(self.webpackChunkdwt_angular=self.webpackChunkdwt_angular||[]).push([[179],{255:gu=>{function Xo(mu){return Promise.resolve().then(()=>{var Ao=new Error("Cannot find module '"+mu+"'");throw Ao.code="MODULE_NOT_FOUND",Ao})}Xo.keys=()=>[],Xo.resolve=Xo,Xo.id=255,gu.exports=Xo},245:(gu,Xo,mu)=>{"use strict";function Ao(e){return"function"==typeof e}let Cd=!1;const Li={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const r=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+r.stack)}else Cd&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Cd=e},get useDeprecatedSynchronousErrorHandling(){return Cd}};function qs(e){setTimeout(()=>{throw e},0)}const Jl={closed:!0,next(e){},error(e){if(Li.useDeprecatedSynchronousErrorHandling)throw e;qs(e)},complete(){}},Xl=Array.isArray||(e=>e&&"number"==typeof e.length);function wd(e){return null!==e&&"object"==typeof e}const Zl=(()=>{function e(r){return Error.call(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r,this}return e.prototype=Object.create(Error.prototype),e})();class Jr{constructor(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._ctorUnsubscribe=!0,this._unsubscribe=r)}unsubscribe(){let r;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:n,_subscriptions:a}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof Jr)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(Ao(n)){i&&(this._unsubscribe=void 0);try{n.call(this)}catch(s){r=s instanceof Zl?s_(s.errors):[s]}}if(Xl(a)){let s=-1,o=a.length;for(;++s<o;){const l=a[s];if(wd(l))try{l.unsubscribe()}catch(d){r=r||[],d instanceof Zl?r=r.concat(s_(d.errors)):r.push(d)}}}if(r)throw new Zl(r)}add(r){let t=r;if(!r)return Jr.EMPTY;switch(typeof r){case"function":t=new Jr(r);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof Jr)){const a=t;t=new Jr,t._subscriptions=[a]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof Jr){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const n=this._subscriptions;return null===n?this._subscriptions=[t]:n.push(t),t}remove(r){const t=this._subscriptions;if(t){const i=t.indexOf(r);-1!==i&&t.splice(i,1)}}}var e;function s_(e){return e.reduce((r,t)=>r.concat(t instanceof Zl?t.errors:t),[])}Jr.EMPTY=((e=new Jr).closed=!0,e);const $l="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Hr extends Jr{constructor(r,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Jl;break;case 1:if(!r){this.destination=Jl;break}if("object"==typeof r){r instanceof Hr?(this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,r.add(this)):(this.syncErrorThrowable=!0,this.destination=new a_(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new a_(this,r,t,i)}}[$l](){return this}static create(r,t,i){const n=new Hr(r,t,i);return n.syncErrorThrowable=!1,n}next(r){this.isStopped||this._next(r)}error(r){this.isStopped||(this.isStopped=!0,this._error(r))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(r){this.destination.next(r)}_error(r){this.destination.error(r),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:r}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this}}class a_ extends Hr{constructor(r,t,i,n){super(),this._parentSubscriber=r;let a,s=this;Ao(t)?a=t:t&&(a=t.next,i=t.error,n=t.complete,t!==Jl&&(s=Object.create(t),Ao(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=a,this._error=i,this._complete=n}next(r){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;Li.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}}error(r){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=Li;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=r,t.syncErrorThrown=!0):qs(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;qs(r)}}}complete(){if(!this.isStopped){const{_parentSubscriber:r}=this;if(this._complete){const t=()=>this._complete.call(this._context);Li.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(r,t){try{r.call(this._context,t)}catch(i){if(this.unsubscribe(),Li.useDeprecatedSynchronousErrorHandling)throw i;qs(i)}}__tryOrSetError(r,t,i){if(!Li.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(n){return Li.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=n,r.syncErrorThrown=!0,!0):(qs(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:r}=this;this._context=null,this._parentSubscriber=null,r.unsubscribe()}}const _u="function"==typeof Symbol&&Symbol.observable||"@@observable";function ql(e){return e}let Vr=(()=>{class e{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,n){const{operator:a}=this,s=function(e,r,t){if(e){if(e instanceof Hr)return e;if(e[$l])return e[$l]()}return e||r||t?new Hr(e,r,t):new Hr(Jl)}(t,i,n);if(s.add(a?a.call(s,this.source):this.source||Li.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Li.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){Li.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(e){for(;e;){const{closed:r,destination:t,isStopped:i}=e;if(r||i)return!1;e=t&&t instanceof Hr?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=l_(i))((n,a)=>{let s;s=this.subscribe(o=>{try{t(o)}catch(l){a(l),s&&s.unsubscribe()}},a,n)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[_u](){return this}pipe(...t){return 0===t.length?this:function(e){return 0===e.length?ql:1===e.length?e[0]:function(t){return e.reduce((i,n)=>n(i),t)}}(t)(this)}toPromise(t){return new(t=l_(t))((i,n)=>{let a;this.subscribe(s=>a=s,s=>n(s),()=>i(a))})}}return e.create=r=>new e(r),e})();function l_(e){if(e||(e=Li.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const ea=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class rS extends Jr{constructor(r,t){super(),this.subject=r,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const r=this.subject,t=r.observers;if(this.subject=null,!t||0===t.length||r.isStopped||r.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class c_ extends Hr{constructor(r){super(r),this.destination=r}}let Do=(()=>{class e extends Vr{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[$l](){return new c_(this)}lift(t){const i=new f_(this,this);return i.operator=t,i}next(t){if(this.closed)throw new ea;if(!this.isStopped){const{observers:i}=this,n=i.length,a=i.slice();for(let s=0;s<n;s++)a[s].next(t)}}error(t){if(this.closed)throw new ea;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,n=i.length,a=i.slice();for(let s=0;s<n;s++)a[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new ea;this.isStopped=!0;const{observers:t}=this,i=t.length,n=t.slice();for(let a=0;a<i;a++)n[a].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ea;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ea;return this.hasError?(t.error(this.thrownError),Jr.EMPTY):this.isStopped?(t.complete(),Jr.EMPTY):(this.observers.push(t),new rS(this,t))}asObservable(){const t=new Vr;return t.source=this,t}}return e.create=(r,t)=>new f_(r,t),e})();class f_ extends Do{constructor(r,t){super(),this.destination=r,this.source=t}next(r){const{destination:t}=this;t&&t.next&&t.next(r)}error(r){const{destination:t}=this;t&&t.error&&this.destination.error(r)}complete(){const{destination:r}=this;r&&r.complete&&this.destination.complete()}_subscribe(r){const{source:t}=this;return t?this.source.subscribe(r):Jr.EMPTY}}function ec(e){return e&&"function"==typeof e.schedule}function Pr(e,r){return function(i){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new nS(e,r))}}class nS{constructor(r,t){this.project=r,this.thisArg=t}call(r,t){return t.subscribe(new iS(r,this.project,this.thisArg))}}class iS extends Hr{constructor(r,t,i){super(r),this.project=t,this.count=0,this.thisArg=i||this}_next(r){let t;try{t=this.project.call(this.thisArg,r,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const d_=e=>r=>{for(let t=0,i=e.length;t<i&&!r.closed;t++)r.next(e[t]);r.complete()},tc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",h_=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function p_(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const Ed=e=>{if(e&&"function"==typeof e[_u])return(e=>r=>{const t=e[_u]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(r)})(e);if(h_(e))return d_(e);if(p_(e))return(e=>r=>(e.then(t=>{r.closed||(r.next(t),r.complete())},t=>r.error(t)).then(null,qs),r))(e);if(e&&"function"==typeof e[tc])return(e=>r=>{const t=e[tc]();for(;;){let i;try{i=t.next()}catch(n){return r.error(n),r}if(i.done){r.complete();break}if(r.next(i.value),r.closed)break}return"function"==typeof t.return&&r.add(()=>{t.return&&t.return()}),r})(e);{const t=`You provided ${wd(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Td(e,r){return new Vr(t=>{const i=new Jr;let n=0;return i.add(r.schedule(function(){n!==e.length?(t.next(e[n++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Cn(e,r){return r?function(e,r){if(null!=e){if(function(e){return e&&"function"==typeof e[_u]}(e))return function(e,r){return new Vr(t=>{const i=new Jr;return i.add(r.schedule(()=>{const n=e[_u]();i.add(n.subscribe({next(a){i.add(r.schedule(()=>t.next(a)))},error(a){i.add(r.schedule(()=>t.error(a)))},complete(){i.add(r.schedule(()=>t.complete()))}}))})),i})}(e,r);if(p_(e))return function(e,r){return new Vr(t=>{const i=new Jr;return i.add(r.schedule(()=>e.then(n=>{i.add(r.schedule(()=>{t.next(n),i.add(r.schedule(()=>t.complete()))}))},n=>{i.add(r.schedule(()=>t.error(n)))}))),i})}(e,r);if(h_(e))return Td(e,r);if(function(e){return e&&"function"==typeof e[tc]}(e)||"string"==typeof e)return function(e,r){if(!e)throw new Error("Iterable cannot be null");return new Vr(t=>{const i=new Jr;let n;return i.add(()=>{n&&"function"==typeof n.return&&n.return()}),i.add(r.schedule(()=>{n=e[tc](),i.add(r.schedule(function(){if(t.closed)return;let a,s;try{const o=n.next();a=o.value,s=o.done}catch(o){return void t.error(o)}s?t.complete():(t.next(a),this.schedule())}))})),i})}(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,r):e instanceof Vr?e:new Vr(Ed(e))}class Sd extends Hr{constructor(r){super(),this.parent=r}_next(r){this.parent.notifyNext(r)}_error(r){this.parent.notifyError(r),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ad extends Hr{notifyNext(r){this.destination.next(r)}notifyError(r){this.destination.error(r)}notifyComplete(){this.destination.complete()}}function Dd(e,r){if(r.closed)return;if(e instanceof Vr)return e.subscribe(r);let t;try{t=Ed(e)(r)}catch(i){r.error(i)}return t}function wn(e,r,t=Number.POSITIVE_INFINITY){return"function"==typeof r?i=>i.pipe(wn((n,a)=>Cn(e(n,a)).pipe(Pr((s,o)=>r(n,s,a,o))),t)):("number"==typeof r&&(t=r),i=>i.lift(new gS(e,t)))}class gS{constructor(r,t=Number.POSITIVE_INFINITY){this.project=r,this.concurrent=t}call(r,t){return t.subscribe(new mS(r,this.project,this.concurrent))}}class mS extends Ad{constructor(r,t,i=Number.POSITIVE_INFINITY){super(r),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)}_tryNext(r){let t;const i=this.index++;try{t=this.project(r,i)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t)}_innerSub(r){const t=new Sd(this),i=this.destination;i.add(t);const n=Dd(r,t);n!==t&&i.add(n)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(r){this.destination.next(r)}notifyComplete(){const r=this.buffer;this.active--,r.length>0?this._next(r.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function vu(e=Number.POSITIVE_INFINITY){return wn(ql,e)}function Md(e,r){return r?Td(e,r):new Vr(d_(e))}function Pd(){return function(r){return r.lift(new vS(r))}}class vS{constructor(r){this.connectable=r}call(r,t){const{connectable:i}=this;i._refCount++;const n=new yS(r,i),a=t.subscribe(n);return n.closed||(n.connection=i.connect()),a}}class yS extends Hr{constructor(r,t){super(r),this.connectable=t}_unsubscribe(){const{connectable:r}=this;if(!r)return void(this.connection=null);this.connectable=null;const t=r._refCount;if(t<=0)return void(this.connection=null);if(r._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,n=r._connection;this.connection=null,n&&(!i||n===i)&&n.unsubscribe()}}class g_ extends Vr{constructor(r,t){super(),this.source=r,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Jr,r.add(this.source.subscribe(new IS(this.getSubject(),this))),r.closed&&(this._connection=null,r=Jr.EMPTY)),r}refCount(){return Pd()(this)}}const bS=(()=>{const e=g_.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class IS extends c_{constructor(r,t){super(r),this.connectable=t}_error(r){this._unsubscribe(),super._error(r)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const r=this.connectable;if(r){this.connectable=null;const t=r._connection;r._refCount=0,r._subject=null,r._connection=null,t&&t.unsubscribe()}}}function TS(){return new Do}function br(e){for(let r in e)if(e[r]===br)return r;throw Error("Could not find renamed property on target object.")}function Rd(e,r){for(const t in r)r.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function ur(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ur).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const r=e.toString();if(null==r)return""+r;const t=r.indexOf("\n");return-1===t?r:r.substring(0,t)}function xd(e,r){return null==e||""===e?null===r?"":r:null==r||""===r?e:e+" "+r}const AS=br({__forward_ref__:br});function Or(e){return e.__forward_ref__=Or,e.toString=function(){return ur(this())},e}function Ut(e){return m_(e)?e():e}function m_(e){return"function"==typeof e&&e.hasOwnProperty(AS)&&e.__forward_ref__===Or}class Is extends Error{constructor(r,t){super(function(e,r){return`${e?`NG0${e}: `:""}${r}`}(r,t)),this.code=r}}function Fn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function rc(e,r){const t=r?` in ${r}`:"";throw new Is("201",`No provider for ${Fn(e)} found${t}`)}function si(e,r){null==e&&function(e,r,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${r} <=Actual]`))}(r,e,null,"!=")}function lr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ai(e){return{providers:e.providers||[],imports:e.imports||[]}}function Po(e){return __(e,nc)||__(e,y_)}function __(e,r){return e.hasOwnProperty(r)?e[r]:null}function v_(e){return e&&(e.hasOwnProperty(Fd)||e.hasOwnProperty(FS))?e[Fd]:null}const nc=br({\u0275prov:br}),Fd=br({\u0275inj:br}),y_=br({ngInjectableDef:br}),FS=br({ngInjectorDef:br});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let Ld;function Zo(e){const r=Ld;return Ld=e,r}function b_(e,r,t){const i=Po(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Qt.Optional?null:void 0!==r?r:void rc(ur(e),"Injector")}function $o(e){return{toString:e}.toString()}var bi=(()=>((bi=bi||{})[bi.OnPush=0]="OnPush",bi[bi.Default=1]="Default",bi))(),cn=(()=>((cn=cn||{})[cn.Emulated=0]="Emulated",cn[cn.None=2]="None",cn[cn.ShadowDom=3]="ShadowDom",cn))();const NS="undefined"!=typeof globalThis&&globalThis,kS="undefined"!=typeof window&&window,BS="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wr=NS||"undefined"!=typeof global&&global||kS||BS,ta={},Sr=[],ic=br({\u0275cmp:br}),Nd=br({\u0275dir:br}),kd=br({\u0275pipe:br}),I_=br({\u0275mod:br}),VS=br({\u0275loc:br}),Ro=br({\u0275fac:br}),yu=br({__NG_ELEMENT_ID__:br});let WS=0;function bu(e){return $o(()=>{const t={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===bi.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Sr,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||cn.Emulated,id:"c",styles:e.styles||Sr,_:null,setInput:null,schemas:e.schemas||null,tView:null},n=e.directives,a=e.features,s=e.pipes;return i.id+=WS++,i.inputs=T_(e.inputs,t),i.outputs=T_(e.outputs),a&&a.forEach(o=>o(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(C_):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(w_):null,i})}function C_(e){return Ln(e)||function(e){return e[Nd]||null}(e)}function w_(e){return function(e){return e[kd]||null}(e)}const E_={};function Ni(e){return $o(()=>{const r={type:e.type,bootstrap:e.bootstrap||Sr,declarations:e.declarations||Sr,imports:e.imports||Sr,exports:e.exports||Sr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(E_[e.id]=e.type),r})}function T_(e,r){if(null==e)return ta;const t={};for(const i in e)if(e.hasOwnProperty(i)){let n=e[i],a=n;Array.isArray(n)&&(a=n[1],n=n[0]),t[n]=i,r&&(r[n]=a)}return t}const Jt=bu;function Ln(e){return e[ic]||null}function Ii(e,r){const t=e[I_]||null;if(!t&&!0===r)throw new Error(`Type ${ur(e)} does not have '\u0275mod' property.`);return t}function so(e){return Array.isArray(e)&&"object"==typeof e[1]}function Bi(e){return Array.isArray(e)&&!0===e[1]}function Wd(e){return 0!=(8&e.flags)}function uc(e){return 2==(2&e.flags)}function lc(e){return 1==(1&e.flags)}function Vi(e){return null!==e.template}function YS(e){return 0!=(512&e[2])}function Ss(e,r){return e.hasOwnProperty(Ro)?e[Ro]:null}class A_{constructor(r,t,i){this.previousValue=r,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function An(){return D_}function D_(e){return e.type.prototype.ngOnChanges&&(e.setInput=ZS),XS}function XS(){const e=P_(this),r=null==e?void 0:e.current;if(r){const t=e.previous;if(t===ta)e.previous=r;else for(let i in r)t[i]=r[i];e.current=null,this.ngOnChanges(r)}}function ZS(e,r,t,i){const n=P_(e)||function(e,r){return e[M_]=r}(e,{previous:ta,current:null}),a=n.current||(n.current={}),s=n.previous,o=this.declaredInputs[t],l=s[o];a[o]=new A_(l&&l.currentValue,r,s===ta),e[i]=r}An.ngInherit=!0;const M_="__ngSimpleChanges__";function P_(e){return e[M_]||null}let Gd;function Xr(e){return!!e.listen}const O_={createRenderer:(e,r)=>void 0!==Gd?Gd:"undefined"!=typeof document?document:void 0};function sn(e){for(;Array.isArray(e);)e=e[0];return e}function Ei(e,r){return sn(r[e.index])}function zd(e,r){return e.data[r]}function li(e,r){const t=r[e];return so(t)?t:t[0]}function Qd(e){return 128==(128&e[2])}function es(e,r){return null==r?null:e[r]}function L_(e){e[18]=0}function Yd(e,r){e[5]+=r;let t=e,i=e[3];for(;null!==i&&(1===r&&1===t[5]||-1===r&&0===t[5]);)i[5]+=r,t=i,i=i[3]}const $t={lFrame:G_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function N_(){return $t.bindingsEnabled}function Ct(){return $t.lFrame.lView}function mr(){return $t.lFrame.tView}function fn(){let e=k_();for(;null!==e&&64===e.type;)e=e.parent;return e}function k_(){return $t.lFrame.currentTNode}function ao(e,r){const t=$t.lFrame;t.currentTNode=e,t.isParent=r}function Kd(){return $t.lFrame.isParent}function fc(){return $t.isInCheckNoChangesMode}function dc(e){$t.isInCheckNoChangesMode=e}function hA(e,r){const t=$t.lFrame;t.bindingIndex=t.bindingRootIndex=e,Xd(r)}function Xd(e){$t.lFrame.currentDirectiveIndex=e}function $d(e){$t.lFrame.currentQueryIndex=e}function gA(e){const r=e[1];return 2===r.type?r.declTNode:1===r.type?e[6]:null}function U_(e,r,t){if(t&Qt.SkipSelf){let n=r,a=e;for(;!(n=n.parent,null!==n||t&Qt.Host||(n=gA(a),null===n||(a=a[15],10&n.type))););if(null===n)return!1;r=n,e=a}const i=$t.lFrame=j_();return i.currentTNode=r,i.lView=e,!0}function hc(e){const r=j_(),t=e[1];$t.lFrame=r,r.currentTNode=t.firstChild,r.lView=e,r.tView=t,r.contextLView=e,r.bindingIndex=t.bindingStartIndex,r.inI18n=!1}function j_(){const e=$t.lFrame,r=null===e?null:e.child;return null===r?G_(e):r}function G_(e){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=r),r}function H_(){const e=$t.lFrame;return $t.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const z_=H_;function pc(){const e=H_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function kn(){return $t.lFrame.selectedIndex}function ts(e){$t.lFrame.selectedIndex=e}function gc(e,r){for(let t=r.directiveStart,i=r.directiveEnd;t<i;t++){const a=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:o,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:c}=a;s&&(e.contentHooks||(e.contentHooks=[])).push(-t,s),o&&((e.contentHooks||(e.contentHooks=[])).push(t,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,o)),l&&(e.viewHooks||(e.viewHooks=[])).push(-t,l),d&&((e.viewHooks||(e.viewHooks=[])).push(t,d),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,d)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(t,c)}}function mc(e,r,t){Q_(e,r,3,t)}function _c(e,r,t,i){(3&e[2])===t&&Q_(e,r,t,i)}function qd(e,r){let t=e[2];(3&t)===r&&(t&=2047,t+=1,e[2]=t)}function Q_(e,r,t,i){const a=null!=i?i:-1,s=r.length-1;let o=0;for(let l=void 0!==i?65535&e[18]:0;l<s;l++)if("number"==typeof r[l+1]){if(o=r[l],null!=i&&o>=i)break}else r[l]<0&&(e[18]+=65536),(o<a||-1==a)&&(EA(e,t,r,l),e[18]=(4294901760&e[18])+l+2),l++}function EA(e,r,t,i){const n=t[i]<0,a=t[i+1],o=e[n?-t[i]:t[i]];if(n){if(e[2]>>11<e[18]>>16&&(3&e[2])===r){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}class Tu{constructor(r,t,i){this.factory=r,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function vc(e,r,t){const i=Xr(e);let n=0;for(;n<t.length;){const a=t[n];if("number"==typeof a){if(0!==a)break;n++;const s=t[n++],o=t[n++],l=t[n++];i?e.setAttribute(r,o,l,s):r.setAttributeNS(s,o,l)}else{const s=a,o=t[++n];th(s)?i&&e.setProperty(r,s,o):i?e.setAttribute(r,s,o):r.setAttribute(s,o),n++}}return n}function Y_(e){return 3===e||4===e||6===e}function th(e){return 64===e.charCodeAt(0)}function yc(e,r){if(null!==r&&0!==r.length)if(null===e||0===e.length)e=r.slice();else{let t=-1;for(let i=0;i<r.length;i++){const n=r[i];"number"==typeof n?t=n:0===t||K_(e,t,n,null,-1===t||2===t?r[++i]:null)}}return e}function K_(e,r,t,i,n){let a=0,s=e.length;if(-1===r)s=-1;else for(;a<e.length;){const o=e[a++];if("number"==typeof o){if(o===r){s=-1;break}if(o>r){s=a-1;break}}}for(;a<e.length;){const o=e[a];if("number"==typeof o)break;if(o===t){if(null===i)return void(null!==n&&(e[a+1]=n));if(i===e[a+1])return void(e[a+2]=n)}a++,null!==i&&a++,null!==n&&a++}-1!==s&&(e.splice(s,0,r),a=s+1),e.splice(a++,0,t),null!==i&&e.splice(a++,0,i),null!==n&&e.splice(a++,0,n)}function J_(e){return-1!==e}function ua(e){return 32767&e}function la(e,r){let t=function(e){return e>>16}(e),i=r;for(;t>0;)i=i[15],t--;return i}let rh=!0;function bc(e){const r=rh;return rh=e,r}let PA=0;function Au(e,r){const t=ih(e,r);if(-1!==t)return t;const i=r[1];i.firstCreatePass&&(e.injectorIndex=r.length,nh(i.data,e),nh(r,null),nh(i.blueprint,null));const n=Ic(e,r),a=e.injectorIndex;if(J_(n)){const s=ua(n),o=la(n,r),l=o[1].data;for(let d=0;d<8;d++)r[a+d]=o[s+d]|l[s+d]}return r[a+8]=n,a}function nh(e,r){e.push(0,0,0,0,0,0,0,0,r)}function ih(e,r){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===r[e.injectorIndex+8]?-1:e.injectorIndex}function Ic(e,r){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,n=r;for(;null!==n;){const a=n[1],s=a.type;if(i=2===s?a.declTNode:1===s?n[6]:null,null===i)return-1;if(t++,n=n[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Cc(e,r,t){!function(e,r,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(yu)&&(i=t[yu]),null==i&&(i=t[yu]=PA++);const n=255&i;r.data[e+(n>>5)]|=1<<n}(e,r,t)}function $_(e,r,t){if(t&Qt.Optional)return e;rc(r,"NodeInjector")}function q_(e,r,t,i){if(t&Qt.Optional&&void 0===i&&(i=null),0==(t&(Qt.Self|Qt.Host))){const n=e[9],a=Zo(void 0);try{return n?n.get(r,i,t&Qt.Optional):b_(r,i,t&Qt.Optional)}finally{Zo(a)}}return $_(i,r,t)}function ev(e,r,t,i=Qt.Default,n){if(null!==e){const a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const r=e.hasOwnProperty(yu)?e[yu]:void 0;return"number"==typeof r?r>=0?255&r:OA:r}(t);if("function"==typeof a){if(!U_(r,e,i))return i&Qt.Host?$_(n,t,i):q_(r,t,i,n);try{const s=a(i);if(null!=s||i&Qt.Optional)return s;rc(t)}finally{z_()}}else if("number"==typeof a){let s=null,o=ih(e,r),l=-1,d=i&Qt.Host?r[16][6]:null;for((-1===o||i&Qt.SkipSelf)&&(l=-1===o?Ic(e,r):r[o+8],-1!==l&&nv(i,!1)?(s=r[1],o=ua(l),r=la(l,r)):o=-1);-1!==o;){const c=r[1];if(rv(a,o,c.data)){const u=FA(o,r,t,s,i,d);if(u!==tv)return u}l=r[o+8],-1!==l&&nv(i,r[1].data[o+8]===d)&&rv(a,o,r)?(s=c,o=ua(l),r=la(l,r)):o=-1}}}return q_(r,t,i,n)}const tv={};function OA(){return new ca(fn(),Ct())}function FA(e,r,t,i,n,a){const s=r[1],o=s.data[e+8],c=function(e,r,t,i,n){const a=e.providerIndexes,s=r.data,o=1048575&a,l=e.directiveStart,c=a>>20,h=n?o+c:e.directiveEnd;for(let f=i?o:o+c;f<h;f++){const g=s[f];if(f<l&&t===g||f>=l&&g.type===t)return f}if(n){const f=s[l];if(f&&Vi(f)&&f.type===t)return l}return null}(o,s,t,null==i?uc(o)&&rh:i!=s&&0!=(3&o.type),n&Qt.Host&&a===o);return null!==c?Du(r,s,c,o):tv}function Du(e,r,t,i){let n=e[t];const a=r.data;if(function(e){return e instanceof Tu}(n)){const s=n;s.resolving&&function(e,r){throw new Is("200",`Circular dependency in DI detected for ${e}`)}(Fn(a[t]));const o=bc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Zo(s.injectImpl):null;U_(e,i,Qt.Default);try{n=e[t]=s.factory(void 0,a,e,i),r.firstCreatePass&&t>=i.directiveStart&&function(e,r,t){const{ngOnChanges:i,ngOnInit:n,ngDoCheck:a}=r.type.prototype;if(i){const s=D_(r);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,s)}n&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,n),a&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a))}(t,a[t],r)}finally{null!==l&&Zo(l),bc(o),s.resolving=!1,z_()}}return n}function rv(e,r,t){return!!(t[r+(e>>5)]&1<<e)}function nv(e,r){return!(e&Qt.Self||e&Qt.Host&&r)}class ca{constructor(r,t){this._tNode=r,this._lView=t}get(r,t,i){return ev(this._tNode,this._lView,r,i,t)}}function Ti(e){return $o(()=>{const r=e.prototype.constructor,t=r[Ro]||oh(r),i=Object.prototype;let n=Object.getPrototypeOf(e.prototype).constructor;for(;n&&n!==i;){const a=n[Ro]||oh(n);if(a&&a!==t)return a;n=Object.getPrototypeOf(n)}return a=>new a})}function oh(e){return m_(e)?()=>{const r=oh(Ut(e));return r&&r()}:Ss(e)}const da="__parameters__";function As(e,r,t){return $o(()=>{const i=function(e){return function(...t){if(e){const i=e(...t);for(const n in i)this[n]=i[n]}}}(r);function n(...a){if(this instanceof n)return i.apply(this,a),this;const s=new n(...a);return o.annotation=s,o;function o(l,d,c){const u=l.hasOwnProperty(da)?l[da]:Object.defineProperty(l,da,{value:[]})[da];for(;u.length<=c;)u.push(null);return(u[c]=u[c]||[]).push(s),l}}return t&&(n.prototype=Object.create(t.prototype)),n.prototype.ngMetadataName=e,n.annotationCls=n,n})}class dr{constructor(r,t){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=lr({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const BA=new dr("AnalyzeForEntryComponents"),Ec=Function;function lo(e,r){e.forEach(t=>Array.isArray(t)?lo(t,r):r(t))}function Sc(e,r,t){r>=e.length?e.push(t):e.splice(r,0,t)}function Ds(e,r){return r>=e.length-1?e.pop():e.splice(r,1)[0]}function ci(e,r,t){let i=pa(e,r);return i>=0?e[1|i]=t:(i=~i,function(e,r,t,i){let n=e.length;if(n==r)e.push(t,i);else if(1===n)e.push(i,e[0]),e[0]=t;else{for(n--,e.push(e[n-1],e[n]);n>r;)e[n]=e[n-2],n--;e[r]=t,e[r+1]=i}}(e,i,r,t)),i}function ah(e,r){const t=pa(e,r);if(t>=0)return e[1|t]}function pa(e,r){return function(e,r,t){let i=0,n=e.length>>t;for(;n!==i;){const a=i+(n-i>>1),s=e[a<<t];if(r===s)return a<<t;s>r?n=a:i=a+1}return~(n<<t)}(e,r,1)}const Ou={},lh="__NG_DI_FLAG__",ga="ngTempTokenPath",KA=/\n/gm,ch="__source",fh=br({provide:String,useValue:br});let Fu;function ma(e){const r=Fu;return Fu=e,r}function XA(e,r=Qt.Default){if(void 0===Fu)throw new Error("inject() must be called from an injection context");return null===Fu?b_(e,void 0,r):Fu.get(e,r&Qt.Optional?null:void 0,r)}function Nt(e,r=Qt.Default){return(Ld||XA)(Ut(e),r)}function Ms(e){const r=[];for(let t=0;t<e.length;t++){const i=Ut(e[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let n,a=Qt.Default;for(let s=0;s<i.length;s++){const o=i[s],l=ZA(o);"number"==typeof l?-1===l?n=o.token:a|=l:n=o}r.push(Nt(n,a))}else r.push(Nt(i))}return r}function Lu(e,r){return e[lh]=r,e.prototype[lh]=r,e}function ZA(e){return e[lh]}function lv(e,r,t,i){const n=e[ga];throw r[ch]&&n.unshift(r[ch]),e.message=function(e,r,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let n=ur(r);if(Array.isArray(r))n=r.map(ur).join(" -> ");else if("object"==typeof r){let a=[];for(let s in r)if(r.hasOwnProperty(s)){let o=r[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):ur(o)))}n=`{${a.join(", ")}}`}return`${t}${i?"("+i+")":""}[${n}]: ${e.replace(KA,"\n  ")}`}("\n"+e.message,n,t,i),e.ngTokenPath=n,e[ga]=null,e}const _a=Lu(As("Inject",e=>({token:e})),-1),Zn=Lu(As("Optional"),8),is=Lu(As("SkipSelf"),4);const Dv="__ngContext__";function Dn(e,r){e[Dv]=r}function Ih(e){const r=function(e){return e[Dv]||null}(e);return r?Array.isArray(r)?r:r.lView:null}function Oc(e){return e.ngOriginalError}function HD(e,...r){e.error(...r)}class Rs{constructor(){this._console=console}handleError(r){const t=this._findOriginalError(r),i=this._findContext(r),n=function(e){return e&&e.ngErrorLogger||HD}(r);n(this._console,"ERROR",r),t&&n(this._console,"ORIGINAL ERROR",t),i&&n(this._console,"ERROR CONTEXT",i)}_findContext(r){return r?function(e){return e.ngDebugContext}(r)||this._findContext(Oc(r)):null}_findOriginalError(r){let t=r&&Oc(r);for(;t&&Oc(t);)t=Oc(t);return t||null}}const kv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wr))();function ho(e){return e instanceof Function?e():e}var di=(()=>((di=di||{})[di.Important=1]="Important",di[di.DashCase=2]="DashCase",di))();function Eh(e,r){return undefined(e,r)}function Uu(e){const r=e[3];return Bi(r)?r[3]:r}function Th(e){return jv(e[13])}function Sh(e){return jv(e[4])}function jv(e){for(;null!==e&&!Bi(e);)e=e[4];return e}function Ia(e,r,t,i,n){if(null!=i){let a,s=!1;Bi(i)?a=i:so(i)&&(s=!0,i=i[0]);const o=sn(i);0===e&&null!==t?null==n?Kv(r,t,o):xs(r,t,o,n||null,!0):1===e&&null!==t?xs(r,t,o,n||null,!0):2===e?function(e,r,t){const i=Lc(e,r);i&&function(e,r,t,i){Xr(e)?e.removeChild(r,t,i):r.removeChild(t)}(e,i,r,t)}(r,o,s):3===e&&r.destroyNode(o),null!=a&&function(e,r,t,i,n){const a=t[7];a!==sn(t)&&Ia(r,e,i,a,n);for(let o=10;o<t.length;o++){const l=t[o];ju(l[1],l,e,r,i,a)}}(r,e,a,t,n)}}function Dh(e,r,t){return Xr(e)?e.createElement(r,t):null===t?e.createElement(r):e.createElementNS(t,r)}function Hv(e,r){const t=e[9],i=t.indexOf(r),n=r[3];1024&r[2]&&(r[2]&=-1025,Yd(n,-1)),t.splice(i,1)}function Mh(e,r){if(e.length<=10)return;const t=10+r,i=e[t];if(i){const n=i[17];null!==n&&n!==e&&Hv(n,i),r>0&&(e[t-1][4]=i[4]);const a=Ds(e,10+r);!function(e,r){ju(e,r,r[11],2,null,null),r[0]=null,r[6]=null}(i[1],i);const s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function zv(e,r){if(!(256&r[2])){const t=r[11];Xr(t)&&t.destroyNode&&ju(e,r,t,3,null,null),function(e){let r=e[13];if(!r)return Ph(e[1],e);for(;r;){let t=null;if(so(r))t=r[13];else{const i=r[10];i&&(t=i)}if(!t){for(;r&&!r[4]&&r!==e;)so(r)&&Ph(r[1],r),r=r[3];null===r&&(r=e),so(r)&&Ph(r[1],r),t=r&&r[4]}r=t}}(r)}}function Ph(e,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function(e,r){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const n=r[t[i]];if(!(n instanceof Tu)){const a=t[i+1];if(Array.isArray(a))for(let s=0;s<a.length;s+=2){const o=n[a[s]],l=a[s+1];try{l.call(o)}finally{}}else try{a.call(n)}finally{}}}}(e,r),function(e,r){const t=e.cleanup,i=r[7];let n=-1;if(null!==t)for(let a=0;a<t.length-1;a+=2)if("string"==typeof t[a]){const s=t[a+1],o="function"==typeof s?s(r):sn(r[s]),l=i[n=t[a+2]],d=t[a+3];"boolean"==typeof d?o.removeEventListener(t[a],l,d):d>=0?i[n=d]():i[n=-d].unsubscribe(),a+=2}else{const s=i[n=t[a+1]];t[a].call(s)}if(null!==i){for(let a=n+1;a<i.length;a++)i[a]();r[7]=null}}(e,r),1===r[1].type&&Xr(r[11])&&r[11].destroy();const t=r[17];if(null!==t&&Bi(r[3])){t!==r[3]&&Hv(t,r);const i=r[19];null!==i&&i.detachView(e)}}}function Qv(e,r,t){return function(e,r,t){let i=r;for(;null!==i&&40&i.type;)i=(r=i).parent;if(null===i)return t[0];if(2&i.flags){const n=e.data[i.directiveStart].encapsulation;if(n===cn.None||n===cn.Emulated)return null}return Ei(i,t)}(e,r.parent,t)}function xs(e,r,t,i,n){Xr(e)?e.insertBefore(r,t,i,n):r.insertBefore(t,i,n)}function Kv(e,r,t){Xr(e)?e.appendChild(r,t):r.appendChild(t)}function Jv(e,r,t,i,n){null!==i?xs(e,r,t,i,n):Kv(e,r,t)}function Lc(e,r){return Xr(e)?e.parentNode(r):r.parentNode}let $v=function(e,r,t){return 40&e.type?Ei(e,t):null};function Nc(e,r,t,i){const n=Qv(e,i,r),a=r[11],o=function(e,r,t){return $v(e,r,t)}(i.parent||r[6],i,r);if(null!=n)if(Array.isArray(t))for(let l=0;l<t.length;l++)Jv(a,n,t[l],o,!1);else Jv(a,n,t,o,!1)}function kc(e,r){if(null!==r){const t=r.type;if(3&t)return Ei(r,e);if(4&t)return xh(-1,e[r.index]);if(8&t){const i=r.child;if(null!==i)return kc(e,i);{const n=e[r.index];return Bi(n)?xh(-1,n):sn(n)}}if(32&t)return Eh(r,e)()||sn(e[r.index]);{const i=ey(e,r);return null!==i?Array.isArray(i)?i[0]:kc(Uu(e[16]),i):kc(e,r.next)}}return null}function ey(e,r){return null!==r?e[16][6].projection[r.projection]:null}function xh(e,r){const t=10+e+1;if(t<r.length){const i=r[t],n=i[1].firstChild;if(null!==n)return kc(i,n)}return r[7]}function Oh(e,r,t,i,n,a,s){for(;null!=t;){const o=i[t.index],l=t.type;if(s&&0===r&&(o&&Dn(sn(o),i),t.flags|=4),64!=(64&t.flags))if(8&l)Oh(e,r,t.child,i,n,a,!1),Ia(r,e,n,o,a);else if(32&l){const d=Eh(t,i);let c;for(;c=d();)Ia(r,e,n,c,a);Ia(r,e,n,o,a)}else 16&l?ry(e,r,i,t,n,a):Ia(r,e,n,o,a);t=s?t.projectionNext:t.next}}function ju(e,r,t,i,n,a){Oh(t,i,e.firstChild,r,n,a,!1)}function ry(e,r,t,i,n,a){const s=t[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++)Ia(r,e,n,l[d],a);else Oh(e,r,l,s[3],n,a,!0)}function ny(e,r,t){Xr(e)?e.setAttribute(r,"style",t):r.style.cssText=t}function Fh(e,r,t){Xr(e)?""===t?e.removeAttribute(r,"class"):e.setAttribute(r,"class",t):r.className=t}function iy(e,r,t){let i=e.length;for(;;){const n=e.indexOf(r,t);if(-1===n)return n;if(0===n||e.charCodeAt(n-1)<=32){const a=r.length;if(n+a===i||e.charCodeAt(n+a)<=32)return n}t=n+1}}const oy="ng-template";function m1(e,r,t){let i=0;for(;i<e.length;){let n=e[i++];if(t&&"class"===n){if(n=e[i],-1!==iy(n.toLowerCase(),r,0))return!0}else if(1===n){for(;i<e.length&&"string"==typeof(n=e[i++]);)if(n.toLowerCase()===r)return!0;return!1}}return!1}function sy(e){return 4===e.type&&e.value!==oy}function _1(e,r,t){return r===(4!==e.type||t?e.value:oy)}function v1(e,r,t){let i=4;const n=e.attrs||[],a=function(e){for(let r=0;r<e.length;r++)if(Y_(e[r]))return r;return e.length}(n);let s=!1;for(let o=0;o<r.length;o++){const l=r[o];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!_1(e,l,t)||""===l&&1===r.length){if(Wi(i))return!1;s=!0}}else{const d=8&i?l:r[++o];if(8&i&&null!==e.attrs){if(!m1(e.attrs,d,t)){if(Wi(i))return!1;s=!0}continue}const u=y1(8&i?"class":l,n,sy(e),t);if(-1===u){if(Wi(i))return!1;s=!0;continue}if(""!==d){let h;h=u>a?"":n[u+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==iy(f,d,0)||2&i&&d!==h){if(Wi(i))return!1;s=!0}}}}else{if(!s&&!Wi(i)&&!Wi(l))return!1;if(s&&Wi(l))continue;s=!1,i=l|1&i}}return Wi(i)||s}function Wi(e){return 0==(1&e)}function y1(e,r,t,i){if(null===r)return-1;let n=0;if(i||!t){let a=!1;for(;n<r.length;){const s=r[n];if(s===e)return n;if(3===s||6===s)a=!0;else{if(1===s||2===s){let o=r[++n];for(;"string"==typeof o;)o=r[++n];continue}if(4===s)break;if(0===s){n+=4;continue}}n+=a?1:2}return-1}return function(e,r){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===r)return t;t++}return-1}(r,e)}function ay(e,r,t=!1){for(let i=0;i<r.length;i++)if(v1(e,r[i],t))return!0;return!1}function uy(e,r){return e?":not("+r.trim()+")":r}function E1(e){let r=e[0],t=1,i=2,n="",a=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&i){const o=e[++t];n+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&i?n+="."+s:4&i&&(n+=" "+s);else""!==n&&!Wi(s)&&(r+=uy(a,n),n=""),i=s,a=a||!Wi(i);t++}return""!==n&&(r+=uy(a,n)),r}const er={};function cy(e,r,t,i){if(!i)if(3==(3&r[2])){const a=e.preOrderCheckHooks;null!==a&&mc(r,a,t)}else{const a=e.preOrderHooks;null!==a&&_c(r,a,0,t)}ts(t)}function Bc(e,r){return e<<17|r<<2}function Ui(e){return e>>17&32767}function Lh(e){return 2|e}function Oo(e){return(131068&e)>>2}function Nh(e,r){return-131069&e|r<<2}function kh(e){return 1|e}function by(e,r){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const n=t[i],a=t[i+1];if(-1!==a){const s=e.data[a];$d(n),s.contentQueries(2,r[a],a)}}}function Gu(e,r,t,i,n,a,s,o,l,d){const c=r.blueprint.slice();return c[0]=n,c[2]=140|i,L_(c),c[3]=c[15]=e,c[8]=t,c[10]=s||e&&e[10],c[11]=o||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=d||e&&e[9]||null,c[6]=a,c[16]=2==r.type?e[16]:c,c}function Ca(e,r,t,i,n){let a=e.data[r];if(null===a)a=function(e,r,t,i,n){const a=k_(),s=Kd(),l=e.data[r]=function(e,r,t,i,n,a){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:n,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?a:a&&a.parent,t,r,i,n);return null===e.firstChild&&(e.firstChild=l),null!==a&&(s?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}(e,r,t,i,n),$t.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=t,a.value=i,a.attrs=n;const s=function(){const e=$t.lFrame,r=e.currentTNode;return e.isParent?r:r.parent}();a.injectorIndex=null===s?-1:s.injectorIndex}return ao(a,!0),a}function wa(e,r,t,i){if(0===t)return-1;const n=r.length;for(let a=0;a<t;a++)r.push(i),e.blueprint.push(i),e.data.push(null);return n}function Hu(e,r,t){hc(r);try{const i=e.viewQuery;null!==i&&qh(1,i,t);const n=e.template;null!==n&&Iy(e,r,n,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&by(e,r),e.staticViewQueries&&qh(2,e.viewQuery,t);const a=e.components;null!==a&&function(e,r){for(let t=0;t<r.length;t++)nM(e,r[t])}(r,a)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{r[2]&=-5,pc()}}function Ea(e,r,t,i){const n=r[2];if(256==(256&n))return;hc(r);const a=fc();try{L_(r),function(e){$t.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Iy(e,r,t,2,i);const s=3==(3&n);if(!a)if(s){const d=e.preOrderCheckHooks;null!==d&&mc(r,d,null)}else{const d=e.preOrderHooks;null!==d&&_c(r,d,0,null),qd(r,0)}if(function(e){for(let r=Th(e);null!==r;r=Sh(r)){if(!r[2])continue;const t=r[9];for(let i=0;i<t.length;i++){const n=t[i],a=n[3];0==(1024&n[2])&&Yd(a,1),n[2]|=1024}}}(r),function(e){for(let r=Th(e);null!==r;r=Sh(r))for(let t=10;t<r.length;t++){const i=r[t],n=i[1];Qd(i)&&Ea(n,i,n.template,i[8])}}(r),null!==e.contentQueries&&by(e,r),!a)if(s){const d=e.contentCheckHooks;null!==d&&mc(r,d)}else{const d=e.contentHooks;null!==d&&_c(r,d,1),qd(r,1)}!function(e,r){const t=e.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const n=t[i];if(n<0)ts(~n);else{const a=n,s=t[++i],o=t[++i];hA(s,a),o(2,r[a])}}}finally{ts(-1)}}(e,r);const o=e.components;null!==o&&function(e,r){for(let t=0;t<r.length;t++)rM(e,r[t])}(r,o);const l=e.viewQuery;if(null!==l&&qh(2,l,i),!a)if(s){const d=e.viewCheckHooks;null!==d&&mc(r,d)}else{const d=e.viewHooks;null!==d&&_c(r,d,2),qd(r,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Yd(r[3],-1))}finally{pc()}}function k1(e,r,t,i){const n=r[10],a=!fc(),s=function(e){return 4==(4&e[2])}(r);try{a&&!s&&n.begin&&n.begin(),s&&Hu(e,r,i),Ea(e,r,t,i)}finally{a&&!s&&n.end&&n.end()}}function Iy(e,r,t,i,n){const a=kn(),s=2&i;try{ts(-1),s&&r.length>20&&cy(e,r,20,fc()),t(i,n)}finally{ts(a)}}function wy(e){const r=e.tView;return null===r||r.incompleteFirstPass?e.tView=Uc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):r}function Uc(e,r,t,i,n,a,s,o,l,d){const c=20+i,u=c+n,h=function(e,r){const t=[];for(let i=0;i<r;i++)t.push(i<e?null:er);return t}(c,u),f="function"==typeof d?d():d;return h[1]={type:e,blueprint:h,template:t,queries:null,viewQuery:o,declTNode:r,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Ay(e,r,t){for(let i in e)if(e.hasOwnProperty(i)){const n=e[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(r,n):t[i]=[r,n]}return t}function My(e,r,t,i,n,a){const s=a.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const l=~r.index;(function(e){let r=e.length;for(;r>0;){const t=e[--r];if("number"==typeof t&&t<0)return t}return 0})(o)!=l&&o.push(l),o.push(i,n,s)}}function Py(e,r){null!==e.hostBindings&&e.hostBindings(1,r)}function Ry(e,r){r.flags|=2,(e.components||(e.components=[])).push(r.index)}function X1(e,r,t){if(t){if(r.exportAs)for(let i=0;i<r.exportAs.length;i++)t[r.exportAs[i]]=e;Vi(r)&&(t[""]=e)}}function xy(e,r,t){e.flags|=1,e.directiveStart=r,e.directiveEnd=r+t,e.providerIndexes=r}function Oy(e,r,t,i,n){e.data[i]=n;const a=n.factory||(n.factory=Ss(n.type)),s=new Tu(a,Vi(n),null);e.blueprint[i]=s,t[i]=s,My(e,r,0,i,wa(e,t,n.hostVars,er),n)}function Z1(e,r,t){const i=Ei(r,e),n=wy(t),a=e[10],s=jc(e,Gu(e,n,null,t.onPush?64:16,i,r,a,a.createRenderer(i,t),null,null));e[r.index]=s}function $1(e,r,t,i,n,a){const s=a[r];if(null!==s){const o=i.setInput;for(let l=0;l<s.length;){const d=s[l++],c=s[l++],u=s[l++];null!==o?i.setInput(t,u,d,c):t[c]=u}}}function q1(e,r){let t=null,i=0;for(;i<r.length;){const n=r[i];if(0!==n)if(5!==n){if("number"==typeof n)break;e.hasOwnProperty(n)&&(null===t&&(t=[]),t.push(n,e[n],r[i+1])),i+=2}else i+=2;else i+=4}return t}function rM(e,r){const t=li(r,e);if(Qd(t)){const i=t[1];80&t[2]?Ea(i,t,i.template,t[8]):t[5]>0&&Jh(t)}}function Jh(e){for(let i=Th(e);null!==i;i=Sh(i))for(let n=10;n<i.length;n++){const a=i[n];if(1024&a[2]){const s=a[1];Ea(s,a,s.template,a[8])}else a[5]>0&&Jh(a)}const t=e[1].components;if(null!==t)for(let i=0;i<t.length;i++){const n=li(t[i],e);Qd(n)&&n[5]>0&&Jh(n)}}function nM(e,r){const t=li(r,e),i=t[1];(function(e,r){for(let t=r.length;t<e.blueprint.length;t++)r.push(e.blueprint[t])})(i,t),Hu(i,t,t[8])}function jc(e,r){return e[13]?e[14][4]=r:e[13]=r,e[14]=r,r}function Xh(e){for(;e;){e[2]|=64;const r=Uu(e);if(YS(e)&&!r)return e;e=r}return null}function $h(e,r,t){const i=r[10];i.begin&&i.begin();try{Ea(e,r,e.template,t)}catch(n){throw Vy(r,n),n}finally{i.end&&i.end()}}function Ly(e){!function(e){for(let r=0;r<e.components.length;r++){const t=e.components[r],i=Ih(t),n=i[1];k1(n,i,n.template,t)}}(e[8])}function qh(e,r,t){$d(0),r(e,t)}const uM=(()=>Promise.resolve(null))();function Ny(e){return e[7]||(e[7]=[])}function ky(e){return e.cleanup||(e.cleanup=[])}function Vy(e,r){const t=e[9],i=t?t.get(Rs,null):null;i&&i.handleError(r)}function Wy(e,r,t,i,n){for(let a=0;a<t.length;){const s=t[a++],o=t[a++],l=r[s],d=e.data[s];null!==d.setInput?d.setInput(l,n,i,o):l[o]=n}}function Gc(e,r,t){let i=t?e.styles:null,n=t?e.classes:null,a=0;if(null!==r)for(let s=0;s<r.length;s++){const o=r[s];"number"==typeof o?a=o:1==a?n=xd(n,o):2==a&&(i=xd(i,o+": "+r[++s]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=n:e.classesWithoutHost=n}const Ta=new dr("INJECTOR",-1);class Uy{get(r,t=Ou){if(t===Ou){const i=new Error(`NullInjectorError: No provider for ${ur(r)}!`);throw i.name="NullInjectorError",i}return t}}const zu=new dr("Set Injector scope."),Qu={},fM={};let ep;function jy(){return void 0===ep&&(ep=new Uy),ep}function Gy(e,r=null,t=null,i){return new hM(e,t,r||jy(),i)}class hM{constructor(r,t,i,n=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];t&&lo(t,o=>this.processProvider(o,r,t)),lo([r],o=>this.processInjectorType(o,[],a)),this.records.set(Ta,Sa(void 0,this));const s=this.records.get(zu);this.scope=null!=s?s.value:null,this.source=n||("object"==typeof r?null:ur(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,t=Ou,i=Qt.Default){this.assertNotDestroyed();const n=ma(this),a=Zo(void 0);try{if(!(i&Qt.SkipSelf)){let o=this.records.get(r);if(void 0===o){const l=function(e){return"function"==typeof e||"object"==typeof e&&e instanceof dr}(r)&&Po(r);o=l&&this.injectableDefInScope(l)?Sa(tp(r),Qu):null,this.records.set(r,o)}if(null!=o)return this.hydrate(r,o)}return(i&Qt.Self?jy():this.parent).get(r,t=i&Qt.Optional&&t===Ou?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[ga]=s[ga]||[]).unshift(ur(r)),n)throw s;return lv(s,r,"R3InjectorError",this.source)}throw s}finally{Zo(a),ma(n)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((i,n)=>r.push(ur(n))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(r,t,i){if(!(r=Ut(r)))return!1;let n=v_(r);const a=null==n&&r.ngModule||void 0,s=void 0===a?r:a,o=-1!==i.indexOf(s);if(void 0!==a&&(n=v_(a)),null==n)return!1;if(null!=n.imports&&!o){let c;i.push(s);try{lo(n.imports,u=>{this.processInjectorType(u,t,i)&&(void 0===c&&(c=[]),c.push(u))})}finally{}if(void 0!==c)for(let u=0;u<c.length;u++){const{ngModule:h,providers:f}=c[u];lo(f,g=>this.processProvider(g,h,f||Sr))}}this.injectorDefTypes.add(s);const l=Ss(s)||(()=>new s);this.records.set(s,Sa(l,Qu));const d=n.providers;if(null!=d&&!o){const c=r;lo(d,u=>this.processProvider(u,c,d))}return void 0!==a&&void 0!==r.providers}processProvider(r,t,i){let n=Aa(r=Ut(r))?r:Ut(r&&r.provide);const a=function(e,r,t){return zy(e)?Sa(void 0,e.useValue):Sa(Hy(e),Qu)}(r);if(Aa(r)||!0!==r.multi)this.records.get(n);else{let s=this.records.get(n);s||(s=Sa(void 0,Qu,!0),s.factory=()=>Ms(s.multi),this.records.set(n,s)),n=r,s.multi.push(r)}this.records.set(n,a)}hydrate(r,t){return t.value===Qu&&(t.value=fM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(r){if(!r.providedIn)return!1;const t=Ut(r.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function tp(e){const r=Po(e),t=null!==r?r.factory:Ss(e);if(null!==t)return t;if(e instanceof dr)throw new Error(`Token ${ur(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const r=e.length;if(r>0){const i=function(e,r){const t=[];for(let i=0;i<e;i++)t.push(r);return t}(r,"?");throw new Error(`Can't resolve all parameters for ${ur(e)}: (${i.join(", ")}).`)}const t=function(e){const r=e&&(e[nc]||e[y_]);if(r){const t=function(e){if(e.hasOwnProperty("name"))return e.name;const r=(""+e).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),r}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Error("unreachable")}function Hy(e,r,t){let i;if(Aa(e)){const n=Ut(e);return Ss(n)||tp(n)}if(zy(e))i=()=>Ut(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Ms(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))i=()=>Nt(Ut(e.useExisting));else{const n=Ut(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ss(n)||tp(n);i=()=>new n(...Ms(e.deps))}return i}function Sa(e,r,t=!1){return{factory:e,value:r,multi:t?[]:void 0}}function zy(e){return null!==e&&"object"==typeof e&&fh in e}function Aa(e){return"function"==typeof e}const Qy=function(e,r,t){return function(e,r=null,t=null,i){const n=Gy(e,r,t,i);return n._resolveInjectorDefTypes(),n}({name:t},r,e,t)};let Tr=(()=>{class e{static create(t,i){return Array.isArray(t)?Qy(t,i,""):Qy(t.providers,t.parent,t.name||"")}}return e.THROW_IF_NOT_FOUND=Ou,e.NULL=new Uy,e.\u0275prov=lr({token:e,providedIn:"any",factory:()=>Nt(Ta)}),e.__NG_ELEMENT_ID__=-1,e})();function FM(e,r){gc(Ih(e)[1],fn())}function kr(e){let r=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const i=[e];for(;r;){let n;if(Vi(e))n=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Error("Directives cannot inherit Components");n=r.\u0275dir}if(n){if(t){i.push(n);const s=e;s.inputs=ap(e.inputs),s.declaredInputs=ap(e.declaredInputs),s.outputs=ap(e.outputs);const o=n.hostBindings;o&&BM(e,o);const l=n.viewQuery,d=n.contentQueries;if(l&&NM(e,l),d&&kM(e,d),Rd(e.inputs,n.inputs),Rd(e.declaredInputs,n.declaredInputs),Rd(e.outputs,n.outputs),Vi(n)&&n.data.animation){const c=e.data;c.animation=(c.animation||[]).concat(n.data.animation)}}const a=n.features;if(a)for(let s=0;s<a.length;s++){const o=a[s];o&&o.ngInherit&&o(e),o===kr&&(t=!1)}}r=Object.getPrototypeOf(r)}!function(e){let r=0,t=null;for(let i=e.length-1;i>=0;i--){const n=e[i];n.hostVars=r+=n.hostVars,n.hostAttrs=yc(n.hostAttrs,t=yc(t,n.hostAttrs))}}(i)}function ap(e){return e===ta?{}:e===Sr?[]:e}function NM(e,r){const t=e.viewQuery;e.viewQuery=t?(i,n)=>{r(i,n),t(i,n)}:r}function kM(e,r){const t=e.contentQueries;e.contentQueries=t?(i,n,a)=>{r(i,n,a),t(i,n,a)}:r}function BM(e,r){const t=e.hostBindings;e.hostBindings=t?(i,n)=>{r(i,n),t(i,n)}:r}let Hc=null;function Da(){if(!Hc){const e=wr.Symbol;if(e&&e.iterator)Hc=e.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<r.length;++t){const i=r[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Hc=i)}}}return Hc}function Ku(e){return!!up(e)&&(Array.isArray(e)||!(e instanceof Map)&&Da()in e)}function up(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Mn(e,r,t){return!Object.is(e[r],t)&&(e[r]=t,!0)}function Tt(e,r=Qt.Default){const t=Ct();return null===t?Nt(e,r):ev(fn(),t,Ut(e),r)}function hp(e,r,t){const i=Ct();return Mn(i,$t.lFrame.bindingIndex++,r)&&function(e,r,t,i,n,a,s,o){const l=Ei(r,t);let c,d=r.inputs;!o&&null!=d&&(c=d[i])?(Wy(e,t,c,i,n),uc(r)&&function(e,r){const t=li(r,e);16&t[2]||(t[2]|=64)}(t,r.index)):3&r.type&&(i=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),n=null!=s?s(n,r.value||"",i):n,Xr(a)?a.setProperty(l,i,n):th(i)||(l.setProperty?l.setProperty(i,n):l[i]=n))}(mr(),function(){const e=$t.lFrame;return zd(e.tView,e.selectedIndex)}(),i,e,r,i[11],t,!1),hp}function pp(e,r,t,i,n){const s=n?"class":"style";Wy(e,t,r.inputs[s],s,i)}function pi(e,r,t,i){const n=Ct(),a=mr(),s=20+e,o=n[11],l=n[s]=Dh(o,r,$t.lFrame.currentNamespace),d=a.firstCreatePass?function(e,r,t,i,n,a,s){const o=r.consts,d=Ca(r,e,2,n,es(o,a));return function(e,r,t,i){let n=!1;if(N_()){const a=function(e,r,t){const i=e.directiveRegistry;let n=null;if(i)for(let a=0;a<i.length;a++){const s=i[a];ay(t,s.selectors,!1)&&(n||(n=[]),Cc(Au(t,r),e,s.type),Vi(s)?(Ry(e,t),n.unshift(s)):n.push(s))}return n}(e,r,t),s=null===i?null:{"":-1};if(null!==a){n=!0,xy(t,e.data.length,a.length);for(let c=0;c<a.length;c++){const u=a[c];u.providersResolver&&u.providersResolver(u)}let o=!1,l=!1,d=wa(e,r,a.length,null);for(let c=0;c<a.length;c++){const u=a[c];t.mergedAttrs=yc(t.mergedAttrs,u.hostAttrs),Oy(e,t,r,d,u),X1(d,u,s),null!==u.contentQueries&&(t.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=128);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),o=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),l=!0),d++}!function(e,r){const i=r.directiveEnd,n=e.data,a=r.attrs,s=[];let o=null,l=null;for(let d=r.directiveStart;d<i;d++){const c=n[d],u=c.inputs,h=null===a||sy(r)?null:q1(u,a);s.push(h),o=Ay(u,d,o),l=Ay(c.outputs,d,l)}null!==o&&(o.hasOwnProperty("class")&&(r.flags|=16),o.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=s,r.inputs=o,r.outputs=l}(e,t)}s&&function(e,r,t){if(r){const i=e.localNames=[];for(let n=0;n<r.length;n+=2){const a=t[r[n+1]];if(null==a)throw new Is("301",`Export of name '${r[n+1]}' not found!`);i.push(r[n],a)}}}(t,i,s)}t.mergedAttrs=yc(t.mergedAttrs,t.attrs)}(r,t,d,es(o,s)),null!==d.attrs&&Gc(d,d.attrs,!1),null!==d.mergedAttrs&&Gc(d,d.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,d),d}(s,a,n,0,r,t,i):a.data[s];ao(d,!0);const c=d.mergedAttrs;null!==c&&vc(o,l,c);const u=d.classes;null!==u&&Fh(o,l,u);const h=d.styles;null!==h&&ny(o,l,h),64!=(64&d.flags)&&Nc(a,n,l,d),0===$t.lFrame.elementDepthCount&&Dn(l,n),$t.lFrame.elementDepthCount++,lc(d)&&(function(e,r,t){!N_()||(function(e,r,t,i){const n=t.directiveStart,a=t.directiveEnd;e.firstCreatePass||Au(t,r),Dn(i,r);const s=t.initialInputs;for(let o=n;o<a;o++){const l=e.data[o],d=Vi(l);d&&Z1(r,t,l);const c=Du(r,e,o,t);Dn(c,r),null!==s&&$1(0,o-n,c,l,0,s),d&&(li(t.index,r)[8]=c)}}(e,r,t,Ei(t,r)),128==(128&t.flags)&&function(e,r,t){const i=t.directiveStart,n=t.directiveEnd,s=t.index,o=$t.lFrame.currentDirectiveIndex;try{ts(s);for(let l=i;l<n;l++){const d=e.data[l],c=r[l];Xd(l),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&Py(d,c)}}finally{ts(-1),Xd(o)}}(e,r,t))}(a,n,d),function(e,r,t){if(Wd(r)){const n=r.directiveEnd;for(let a=r.directiveStart;a<n;a++){const s=e.data[a];s.contentQueries&&s.contentQueries(1,t[a],a)}}}(a,d,n)),null!==i&&function(e,r,t=Ei){const i=r.localNames;if(null!==i){let n=r.index+1;for(let a=0;a<i.length;a+=2){const s=i[a+1],o=-1===s?t(r,e):e[s];e[n++]=o}}}(n,d)}function gi(){let e=fn();Kd()?$t.lFrame.isParent=!1:(e=e.parent,ao(e,!1));const r=e;$t.lFrame.elementDepthCount--;const t=mr();t.firstCreatePass&&(gc(t,e),Wd(e)&&t.queries.elementEnd(e)),null!=r.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(r)&&pp(t,r,Ct(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(r)&&pp(t,r,Ct(),r.stylesWithoutHost,!1)}function Xu(e,r,t,i){pi(e,r,t,i),gi()}function Zu(e){return!!e&&"function"==typeof e.then}const Yc=function(e){return!!e&&"function"==typeof e.subscribe};function $r(e,r,t,i){const n=Ct(),a=mr(),s=fn();return function(e,r,t,i,n,a,s,o){const l=lc(i),c=e.firstCreatePass&&ky(e),u=r[8],h=Ny(r);let f=!0;if(3&i.type||o){const p=Ei(i,r),m=o?o(p):p,I=h.length,y=o?_=>o(sn(_[i.index])):i.index;if(Xr(t)){let _=null;if(!o&&l&&(_=function(e,r,t,i){const n=e.cleanup;if(null!=n)for(let a=0;a<n.length-1;a+=2){const s=n[a];if(s===t&&n[a+1]===i){const o=r[7],l=n[a+2];return o.length>l?o[l]:null}"string"==typeof s&&(a+=2)}return null}(e,r,n,i.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=a,_.__ngLastListenerFn__=a,f=!1;else{a=gp(i,r,u,a,!1);const C=t.listen(m,n,a);h.push(a,C),c&&c.push(n,y,I,I+1)}}else a=gp(i,r,u,a,!0),m.addEventListener(n,a,s),h.push(a),c&&c.push(n,y,I,s)}else a=gp(i,r,u,a,!1);const g=i.outputs;let v;if(f&&null!==g&&(v=g[n])){const p=v.length;if(p)for(let m=0;m<p;m+=2){const A=r[v[m]][v[m+1]].subscribe(a),M=h.length;h.push(a,A),c&&c.push(n,i.index,M,-(M+1))}}}(a,n,n[11],s,e,r,!!t,i),$r}function Lb(e,r,t,i){try{return!1!==t(i)}catch(n){return Vy(e,n),!1}}function gp(e,r,t,i,n){return function a(s){if(s===Function)return i;const o=2&e.flags?li(e.index,r):r;0==(32&r[2])&&Xh(o);let l=Lb(r,0,i,s),d=a.__ngNextListenerFn__;for(;d;)l=Lb(r,0,d,s)&&l,d=d.__ngNextListenerFn__;return n&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function zb(e,r,t,i,n){const a=e[t+1],s=null===r;let o=i?Ui(a):Oo(a),l=!1;for(;0!==o&&(!1===l||s);){const c=e[o+1];DP(e[o],r)&&(l=!0,e[o+1]=i?kh(c):Lh(c)),o=i?Ui(c):Oo(c)}l&&(e[t+1]=i?Lh(a):kh(a))}function DP(e,r){return null===e||null==r||(Array.isArray(e)?e[1]:e)===r||!(!Array.isArray(e)||"string"!=typeof r)&&pa(e,r)>=0}function Kc(e,r){return function(e,r,t,i){const n=Ct(),a=mr(),s=function(e){const r=$t.lFrame,t=r.bindingIndex;return r.bindingIndex=r.bindingIndex+e,t}(2);a.firstUpdatePass&&function(e,r,t,i){const n=e.data;if(null===n[t+1]){const a=n[kn()],s=function(e,r){return r>=e.expandoStartIndex}(e,t);(function(e,r){return 0!=(e.flags&(r?16:32))})(a,i)&&null===r&&!s&&(r=!1),r=function(e,r,t,i){const n=function(e){const r=$t.lFrame.currentDirectiveIndex;return-1===r?null:e[r]}(e);let a=i?r.residualClasses:r.residualStyles;if(null===n)0===(i?r.classBindings:r.styleBindings)&&(t=$u(t=_p(null,e,r,t,i),r.attrs,i),a=null);else{const s=r.directiveStylingLast;if(-1===s||e[s]!==n)if(t=_p(n,e,r,t,i),null===a){let l=function(e,r,t){const i=t?r.classBindings:r.styleBindings;if(0!==Oo(i))return e[Ui(i)]}(e,r,i);void 0!==l&&Array.isArray(l)&&(l=_p(null,e,r,l[1],i),l=$u(l,r.attrs,i),function(e,r,t,i){e[Ui(t?r.classBindings:r.styleBindings)]=i}(e,r,i,l))}else a=function(e,r,t){let i;const n=r.directiveEnd;for(let a=1+r.directiveStylingLast;a<n;a++)i=$u(i,e[a].hostAttrs,t);return $u(i,r.attrs,t)}(e,r,i)}return void 0!==a&&(i?r.residualClasses=a:r.residualStyles=a),t}(n,a,r,i),function(e,r,t,i,n,a){let s=a?r.classBindings:r.styleBindings,o=Ui(s),l=Oo(s);e[i]=t;let c,d=!1;if(Array.isArray(t)){const u=t;c=u[1],(null===c||pa(u,c)>0)&&(d=!0)}else c=t;if(n)if(0!==l){const h=Ui(e[o+1]);e[i+1]=Bc(h,o),0!==h&&(e[h+1]=Nh(e[h+1],i)),e[o+1]=function(e,r){return 131071&e|r<<17}(e[o+1],i)}else e[i+1]=Bc(o,0),0!==o&&(e[o+1]=Nh(e[o+1],i)),o=i;else e[i+1]=Bc(l,0),0===o?o=i:e[l+1]=Nh(e[l+1],i),l=i;d&&(e[i+1]=Lh(e[i+1])),zb(e,c,i,!0),zb(e,c,i,!1),function(e,r,t,i,n){const a=n?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof r&&pa(a,r)>=0&&(t[i+1]=kh(t[i+1]))}(r,c,e,i,a),s=Bc(o,l),a?r.classBindings=s:r.styleBindings=s}(n,a,r,t,s,i)}}(a,e,s,i),r!==er&&Mn(n,s,r)&&function(e,r,t,i,n,a,s,o){if(!(3&r.type))return;const l=e.data,d=l[o+1];Jc(function(e){return 1==(1&e)}(d)?nI(l,r,t,n,Oo(d),s):void 0)||(Jc(a)||function(e){return 2==(2&e)}(d)&&(a=nI(l,null,t,n,o,s)),function(e,r,t,i,n){const a=Xr(e);if(r)n?a?e.addClass(t,i):t.classList.add(i):a?e.removeClass(t,i):t.classList.remove(i);else{let s=-1===i.indexOf("-")?void 0:di.DashCase;if(null==n)a?e.removeStyle(t,i,s):t.style.removeProperty(i);else{const o="string"==typeof n&&n.endsWith("!important");o&&(n=n.slice(0,-10),s|=di.Important),a?e.setStyle(t,i,n,s):t.style.setProperty(i,n,o?"important":"")}}}(i,s,function(e,r){return sn(r[e])}(kn(),t),n,a))}(a,a.data[kn()],n,n[11],e,n[s+1]=function(e,r){return null==e||("string"==typeof r?e+=r:"object"==typeof e&&(e=ur(function(e){return e instanceof class{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(r,t),i,s)}(e,r,null,!0),Kc}function _p(e,r,t,i,n){let a=null;const s=t.directiveEnd;let o=t.directiveStylingLast;for(-1===o?o=t.directiveStart:o++;o<s&&(a=r[o],i=$u(i,a.hostAttrs,n),a!==e);)o++;return null!==e&&(t.directiveStylingLast=o),i}function $u(e,r,t){const i=t?1:2;let n=-1;if(null!==r)for(let a=0;a<r.length;a++){const s=r[a];"number"==typeof s?n=s:n===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ci(e,s,!!t||r[++a]))}return void 0===e?null:e}function nI(e,r,t,i,n,a){const s=null===r;let o;for(;n>0;){const l=e[n],d=Array.isArray(l),c=d?l[1]:l,u=null===c;let h=t[n+1];h===er&&(h=u?Sr:void 0);let f=u?ah(h,i):c===i?h:void 0;if(d&&!Jc(f)&&(f=ah(l,i)),Jc(f)&&(o=f,s))return o;const g=e[n+1];n=s?Ui(g):Oo(g)}if(null!==r){let l=a?r.residualClasses:r.residualStyles;null!=l&&(o=ah(l,i))}return o}function Jc(e){return void 0!==e}function Qi(e,r=""){const t=Ct(),i=mr(),n=e+20,a=i.firstCreatePass?Ca(i,n,1,r,null):i.data[n],s=t[n]=function(e,r){return Xr(e)?e.createText(r):e.createTextNode(r)}(t[11],r);Nc(i,t,s,a),ao(a,!1)}const Fs=void 0;var lR=["en",[["a","p"],["AM","PM"],Fs],[["AM","PM"],Fs,Fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fs,"{1} 'at' {0}",Fs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const r=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===t?1:5}];let Wa={};function TI(e){return e in Wa||(Wa[e]=wr.ng&&wr.ng.common&&wr.ng.common.locales&&wr.ng.common.locales[e]),Wa[e]}var Ft=(()=>((Ft=Ft||{})[Ft.LocaleId=0]="LocaleId",Ft[Ft.DayPeriodsFormat=1]="DayPeriodsFormat",Ft[Ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ft[Ft.DaysFormat=3]="DaysFormat",Ft[Ft.DaysStandalone=4]="DaysStandalone",Ft[Ft.MonthsFormat=5]="MonthsFormat",Ft[Ft.MonthsStandalone=6]="MonthsStandalone",Ft[Ft.Eras=7]="Eras",Ft[Ft.FirstDayOfWeek=8]="FirstDayOfWeek",Ft[Ft.WeekendRange=9]="WeekendRange",Ft[Ft.DateFormat=10]="DateFormat",Ft[Ft.TimeFormat=11]="TimeFormat",Ft[Ft.DateTimeFormat=12]="DateTimeFormat",Ft[Ft.NumberSymbols=13]="NumberSymbols",Ft[Ft.NumberFormats=14]="NumberFormats",Ft[Ft.CurrencyCode=15]="CurrencyCode",Ft[Ft.CurrencySymbol=16]="CurrencySymbol",Ft[Ft.CurrencyName=17]="CurrencyName",Ft[Ft.Currencies=18]="Currencies",Ft[Ft.Directionality=19]="Directionality",Ft[Ft.PluralCase=20]="PluralCase",Ft[Ft.ExtraData=21]="ExtraData",Ft))();const Xc="en-US";let SI=Xc;function bp(e){si(e,"Expected localeId to be defined"),"string"==typeof e&&(SI=e.toLowerCase().replace(/_/g,"-"))}function wp(e,r,t,i,n){if(e=Ut(e),Array.isArray(e))for(let a=0;a<e.length;a++)wp(e[a],r,t,i,n);else{const a=mr(),s=Ct();let o=Aa(e)?e:Ut(e.provide),l=Hy(e);const d=fn(),c=1048575&d.providerIndexes,u=d.directiveStart,h=d.providerIndexes>>20;if(Aa(e)||!e.multi){const f=new Tu(l,n,Tt),g=Tp(o,r,n?c:c+h,u);-1===g?(Cc(Au(d,s),a,o),Ep(a,e,r.length),r.push(o),d.directiveStart++,d.directiveEnd++,n&&(d.providerIndexes+=1048576),t.push(f),s.push(f)):(t[g]=f,s[g]=f)}else{const f=Tp(o,r,c+h,u),g=Tp(o,r,c,c+h),v=f>=0&&t[f],p=g>=0&&t[g];if(n&&!p||!n&&!v){Cc(Au(d,s),a,o);const m=function(e,r,t,i,n){const a=new Tu(e,t,Tt);return a.multi=[],a.index=r,a.componentProviders=0,XI(a,n,i&&!t),a}(n?sx:ox,t.length,n,i,l);!n&&p&&(t[g].providerFactory=m),Ep(a,e,r.length,0),r.push(o),d.directiveStart++,d.directiveEnd++,n&&(d.providerIndexes+=1048576),t.push(m),s.push(m)}else Ep(a,e,f>-1?f:g,XI(t[n?g:f],l,!n&&i));!n&&i&&p&&t[g].componentProviders++}}}function Ep(e,r,t,i){const n=Aa(r);if(n||function(e){return!!e.useClass}(r)){const s=(r.useClass||r).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!n&&r.multi){const l=o.indexOf(t);-1===l?o.push(t,[i,s]):o[l+1].push(i,s)}else o.push(t,s)}}}function XI(e,r,t){return t&&e.componentProviders++,e.multi.push(r)-1}function Tp(e,r,t,i){for(let n=t;n<i;n++)if(r[n]===e)return n;return-1}function ox(e,r,t,i){return Sp(this.multi,[])}function sx(e,r,t,i){const n=this.multi;let a;if(this.providerFactory){const s=this.providerFactory.componentProviders,o=Du(t,t[1],this.providerFactory.index,i);a=o.slice(0,s),Sp(n,a);for(let l=s;l<o.length;l++)a.push(o[l])}else a=[],Sp(n,a);return a}function Sp(e,r){for(let t=0;t<e.length;t++)r.push((0,e[t])());return r}function Ur(e,r=[]){return t=>{t.providersResolver=(i,n)=>function(e,r,t){const i=mr();if(i.firstCreatePass){const n=Vi(e);wp(t,i.data,i.blueprint,n,!0),wp(r,i.data,i.blueprint,n,!1)}}(i,n?n(e):e,r)}}class ZI{}const qI="ngComponent";class lx{resolveComponentFactory(r){throw function(e){const r=Error(`No component factory found for ${ur(e)}. Did you add it to @NgModule.entryComponents?`);return r[qI]=e,r}(r)}}let Ls=(()=>{class e{}return e.NULL=new lx,e})();function tf(...e){}function ja(e,r){return new vn(Ei(e,r))}const dx=function(){return ja(fn(),Ct())};let vn=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=dx,e})();class rf{}let ko=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>px(),e})();const px=function(){const e=Ct(),t=li(fn().index,e);return function(e){return e[11]}(so(t)?t:e)};let Dp=(()=>{class e{}return e.\u0275prov=lr({token:e,providedIn:"root",factory:()=>null}),e})();class nl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const tC=new nl("12.2.16");class rC{constructor(){}supports(r){return Ku(r)}create(r){return new vx(r)}}const _x=(e,r)=>r;class vx{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||_x}forEachItem(r){let t;for(t=this._itHead;null!==t;t=t._next)r(t)}forEachOperation(r){let t=this._itHead,i=this._removalsHead,n=0,a=null;for(;t||i;){const s=!i||t&&t.currentIndex<iC(i,n,a)?t:i,o=iC(s,n,a),l=s.currentIndex;if(s===i)n--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)n++;else{a||(a=[]);const d=o-n,c=l-n;if(d!=c){for(let h=0;h<d;h++){const f=h<a.length?a[h]:a[h]=0,g=f+h;c<=g&&g<d&&(a[h]=f+1)}a[s.previousIndex]=c-d}}o!==l&&r(s,o,l)}}forEachPreviousItem(r){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)r(t)}forEachAddedItem(r){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)r(t)}forEachMovedItem(r){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)r(t)}forEachRemovedItem(r){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)r(t)}forEachIdentityChange(r){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)r(t)}diff(r){if(null==r&&(r=[]),!Ku(r))throw new Error(`Error trying to diff '${ur(r)}'. Only arrays and iterables are allowed`);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let n,a,s,t=this._itHead,i=!1;if(Array.isArray(r)){this.length=r.length;for(let o=0;o<this.length;o++)a=r[o],s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),i=!0),t=t._next}else n=0,function(e,r){if(Array.isArray(e))for(let t=0;t<e.length;t++)r(e[t]);else{const t=e[Da()]();let i;for(;!(i=t.next()).done;)r(i.value)}}(r,o=>{s=this._trackByFn(n,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,n)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,n),i=!0),t=t._next,n++}),this.length=n;return this._truncate(t),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,t,i,n){let a;return null===r?a=this._itTail:(a=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(r.item,t)||this._addIdentityChange(r,t),this._reinsertAfter(r,a,n)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(i,n))?(Object.is(r.item,t)||this._addIdentityChange(r,t),this._moveAfter(r,a,n)):r=this._addAfter(new yx(t,i),a,n),r}_verifyReinsertion(r,t,i,n){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?r=this._reinsertAfter(a,r._prev,n):r.currentIndex!=n&&(r.currentIndex=n,this._addToMoves(r,n)),r}_truncate(r){for(;null!==r;){const t=r._next;this._addToRemovals(this._unlink(r)),r=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const n=r._prevRemoved,a=r._nextRemoved;return null===n?this._removalsHead=a:n._nextRemoved=a,null===a?this._removalsTail=n:a._prevRemoved=n,this._insertAfter(r,t,i),this._addToMoves(r,i),r}_moveAfter(r,t,i){return this._unlink(r),this._insertAfter(r,t,i),this._addToMoves(r,i),r}_addAfter(r,t,i){return this._insertAfter(r,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,t,i){const n=null===t?this._itHead:t._next;return r._next=n,r._prev=t,null===n?this._itTail=r:n._prev=r,null===t?this._itHead=r:t._next=r,null===this._linkedRecords&&(this._linkedRecords=new nC),this._linkedRecords.put(r),r.currentIndex=i,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const t=r._prev,i=r._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,r}_addToMoves(r,t){return r.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,t){return r.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class yx{constructor(r,t){this.item=r,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bx{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,r))return i;return null}remove(r){const t=r._prevDup,i=r._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class nC{constructor(){this.map=new Map}put(r){const t=r.trackById;let i=this.map.get(t);i||(i=new bx,this.map.set(t,i)),i.add(r)}get(r,t){const n=this.map.get(r);return n?n.get(r,t):null}remove(r){const t=r.trackById;return this.map.get(t).remove(r)&&this.map.delete(t),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iC(e,r,t){const i=e.previousIndex;if(null===i)return i;let n=0;return t&&i<t.length&&(n=t[i]),i+r+n}class oC{constructor(){}supports(r){return r instanceof Map||up(r)}create(){return new Ix}}class Ix{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let t;for(t=this._mapHead;null!==t;t=t._next)r(t)}forEachPreviousItem(r){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)r(t)}forEachChangedItem(r){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)r(t)}forEachAddedItem(r){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)r(t)}forEachRemovedItem(r){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)r(t)}diff(r){if(r){if(!(r instanceof Map||up(r)))throw new Error(`Error trying to diff '${ur(r)}'. Only maps and objects are allowed`)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(r,(i,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const a=this._getOrCreateRecordForKey(n,i);t=this._insertBeforeOrAppend(t,a)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,t){if(r){const i=r._prev;return t._next=r,t._prev=i,r._prev=t,i&&(i._next=t),r===this._mapHead&&(this._mapHead=t),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(r,t){if(this._records.has(r)){const n=this._records.get(r);this._maybeAddToChanges(n,t);const a=n._prev,s=n._next;return a&&(a._next=s),s&&(s._prev=a),n._next=null,n._prev=null,n}const i=new Cx(r);return this._records.set(r,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,t){Object.is(t,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=t,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,t){r instanceof Map?r.forEach(t):Object.keys(r).forEach(i=>t(r[i],i))}}class Cx{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sC(){return new il([new rC])}let il=(()=>{class e{constructor(t){this.factories=t}static create(t,i){if(null!=i){const n=i.factories.slice();t=t.concat(n)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||sC()),deps:[[e,new is,new Zn]]}}find(t){const i=this.factories.find(n=>n.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(e){return e.name||typeof e}(t)}'`)}}return e.\u0275prov=lr({token:e,providedIn:"root",factory:sC}),e})();function aC(){return new Ga([new oC])}let Ga=(()=>{class e{constructor(t){this.factories=t}static create(t,i){if(i){const n=i.factories.slice();t=t.concat(n)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||aC()),deps:[[e,new is,new Zn]]}}find(t){const i=this.factories.find(n=>n.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return e.\u0275prov=lr({token:e,providedIn:"root",factory:aC}),e})();function nf(e,r,t,i,n=!1){for(;null!==t;){const a=r[t.index];if(null!==a&&i.push(sn(a)),Bi(a))for(let o=10;o<a.length;o++){const l=a[o],d=l[1].firstChild;null!==d&&nf(l[1],l,d,i)}const s=t.type;if(8&s)nf(e,r,t.child,i);else if(32&s){const o=Eh(t,r);let l;for(;l=o();)i.push(l)}else if(16&s){const o=ey(r,t);if(Array.isArray(o))i.push(...o);else{const l=Uu(r[16]);nf(l[1],l,o,i,!0)}}t=n?t.projectionNext:t.next}return i}class ol{constructor(r,t){this._lView=r,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,t=r[1];return nf(t,r,t.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Bi(r)){const t=r[8],i=t?t.indexOf(this):-1;i>-1&&(Mh(r,i),Ds(t,i))}this._attachedToViewContainer=!1}zv(this._lView[1],this._lView)}onDestroy(r){!function(e,r,t,i){const n=Ny(r);null===t?n.push(i):(n.push(t),e.firstCreatePass&&ky(e).push(i,n.length-1))}(this._lView[1],this._lView,null,r)}markForCheck(){Xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$h(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,r,t){dc(!0);try{$h(e,r,t)}finally{dc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(e,r){ju(e,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=r}}class Ex extends ol{constructor(r){super(r),this._view=r}detectChanges(){Ly(this._view)}checkNoChanges(){!function(e){dc(!0);try{Ly(e)}finally{dc(!1)}}(this._view)}get context(){return null}}const Sx=function(e){return function(e,r,t){if(uc(e)&&!t){const i=li(e.index,r);return new ol(i,i)}return 47&e.type?new ol(r[16],r):null}(fn(),Ct(),16==(16&e))};let Mp=(()=>{class e{}return e.__NG_ELEMENT_ID__=Sx,e})();const Mx=[new oC],Rx=new il([new rC]),xx=new Ga(Mx);class yo{}class uC{}const Vx=function(){return function(e,r){let t;const i=r[e.index];if(Bi(i))t=i;else{let n;if(8&e.type)n=sn(i);else{const a=r[11];n=a.createComment("");const s=Ei(e,r);xs(a,Lc(a,s),n,function(e,r){return Xr(e)?e.nextSibling(r):r.nextSibling}(a,s),!1)}r[e.index]=t=function(e,r,t,i){return new Array(e,!0,!1,r,null,0,i,t,null,null)}(i,r,n,e),jc(r,t)}return new lC(t,e,r)}(fn(),Ct())};let Yi=(()=>{class e{}return e.__NG_ELEMENT_ID__=Vx,e})();const Ux=Yi,lC=class extends Ux{constructor(r,t,i){super(),this._lContainer=r,this._hostTNode=t,this._hostLView=i}get element(){return ja(this._hostTNode,this._hostLView)}get injector(){return new ca(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ic(this._hostTNode,this._hostLView);if(J_(r)){const t=la(r,this._hostLView),i=ua(r);return new ca(t[1].data[i+8],t)}return new ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const t=cC(this._lContainer);return null!==t&&t[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,t,i){const n=r.createEmbeddedView(t||{});return this.insert(n,i),n}createComponent(r,t,i,n,a){const s=i||this.parentInjector;if(!a&&null==r.ngModule&&s){const l=s.get(yo,null);l&&(a=l)}const o=r.create(s,n,void 0,a);return this.insert(o.hostView,t),o}insert(r,t){const i=r._lView,n=i[1];if(function(e){return Bi(e[3])}(i)){const c=this.indexOf(r);if(-1!==c)this.detach(c);else{const u=i[3],h=new lC(u,u[6],u[3]);h.detach(h.indexOf(r))}}const a=this._adjustIndex(t),s=this._lContainer;!function(e,r,t,i){const n=10+i,a=t.length;i>0&&(t[n-1][4]=r),i<a-10?(r[4]=t[n],Sc(t,10+i,r)):(t.push(r),r[4]=null),r[3]=t;const s=r[17];null!==s&&t!==s&&function(e,r){const t=e[9];r[16]!==r[3][3][16]&&(e[2]=!0),null===t?e[9]=[r]:t.push(r)}(s,r);const o=r[19];null!==o&&o.insertView(e),r[2]|=128}(n,i,s,a);const o=xh(a,s),l=i[11],d=Lc(l,s[7]);return null!==d&&function(e,r,t,i,n,a){i[0]=n,i[6]=r,ju(e,i,t,1,n,a)}(n,s[6],l,i,d,o),r.attachToViewContainerRef(),Sc(Pp(s),a,r),r}move(r,t){return this.insert(r,t)}indexOf(r){const t=cC(this._lContainer);return null!==t?t.indexOf(r):-1}remove(r){const t=this._adjustIndex(r,-1),i=Mh(this._lContainer,t);i&&(Ds(Pp(this._lContainer),t),zv(i[1],i))}detach(r){const t=this._adjustIndex(r,-1),i=Mh(this._lContainer,t);return i&&null!=Ds(Pp(this._lContainer),t)?new ol(i):null}_adjustIndex(r,t=0){return null==r?this.length+t:r}};function cC(e){return e[8]}function Pp(e){return e[8]||(e[8]=[])}const Ya={};class RC extends Ls{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const t=Ln(r);return new OC(t,this.ngModule)}}function xC(e){const r=[];for(let t in e)e.hasOwnProperty(t)&&r.push({propName:e[t],templateName:t});return r}const kO=new dr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kv});class OC extends ZI{constructor(r,t){super(),this.componentDef=r,this.ngModule=t,this.componentType=r.type,this.selector=function(e){return e.map(E1).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return xC(this.componentDef.inputs)}get outputs(){return xC(this.componentDef.outputs)}create(r,t,i,n){const a=(n=n||this.ngModule)?function(e,r){return{get:(t,i,n)=>{const a=e.get(t,Ya,n);return a!==Ya||i===Ya?a:r.get(t,i,n)}}}(r,n.injector):r,s=a.get(rf,O_),o=a.get(Dp,null),l=s.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",c=i?function(e,r,t){if(Xr(e))return e.selectRootElement(r,t===cn.ShadowDom);let i="string"==typeof r?e.querySelector(r):r;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Dh(s.createRenderer(null,this.componentDef),d,function(e){const r=e.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(d)),u=this.componentDef.onPush?576:528,h=function(e,r){return{components:[],scheduler:e||kv,clean:uM,playerHandler:r||null,flags:0}}(),f=Uc(0,null,null,1,0,null,null,null,null,null),g=Gu(null,f,h,u,null,null,s,l,o,a);let v,p;hc(g);try{const m=function(e,r,t,i,n,a){const s=t[1];t[20]=e;const l=Ca(s,20,2,"#host",null),d=l.mergedAttrs=r.hostAttrs;null!==d&&(Gc(l,d,!0),null!==e&&(vc(n,e,d),null!==l.classes&&Fh(n,e,l.classes),null!==l.styles&&ny(n,e,l.styles)));const c=i.createRenderer(e,r),u=Gu(t,wy(r),null,r.onPush?64:16,t[20],l,i,c,a||null,null);return s.firstCreatePass&&(Cc(Au(l,t),s,r.type),Ry(s,l),xy(l,t.length,1)),jc(t,u),t[20]=u}(c,this.componentDef,g,s,l);if(c)if(i)vc(l,c,["ng-version",tC.full]);else{const{attrs:I,classes:y}=function(e){const r=[],t=[];let i=1,n=2;for(;i<e.length;){let a=e[i];if("string"==typeof a)2===n?""!==a&&r.push(a,e[++i]):8===n&&t.push(a);else{if(!Wi(n))break;n=a}i++}return{attrs:r,classes:t}}(this.componentDef.selectors[0]);I&&vc(l,c,I),y&&y.length>0&&Fh(l,c,y.join(" "))}if(p=zd(f,20),void 0!==t){const I=p.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const _=t[y];I.push(null!=_?Array.from(_):null)}}v=function(e,r,t,i,n){const a=t[1],s=function(e,r,t){const i=fn();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Oy(e,i,r,wa(e,r,1,null),t));const n=Du(r,e,i.directiveStart,i);Dn(n,r);const a=Ei(i,r);return a&&Dn(a,r),n}(a,t,r);if(i.components.push(s),e[8]=s,n&&n.forEach(l=>l(s,r)),r.contentQueries){const l=fn();r.contentQueries(1,s,l.directiveStart)}const o=fn();return!a.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ts(o.index),My(t[1],o,0,o.directiveStart,o.directiveEnd,r),Py(r,s)),s}(m,this.componentDef,g,h,[FM]),Hu(f,g,null)}finally{pc()}return new WO(this.componentType,v,ja(p,g),g,p)}}class WO extends class{}{constructor(r,t,i,n,a){super(),this.location=i,this._rootLView=n,this._tNode=a,this.instance=t,this.hostView=this.changeDetectorRef=new Ex(n),this.componentType=r}get injector(){return new ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}const Ka=new Map;class GO extends yo{constructor(r,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new RC(this);const i=Ii(r),n=function(e){return e[VS]||null}(r);n&&bp(n),this._bootstrapComponents=ho(i.bootstrap),this._r3Injector=Gy(r,t,[{provide:yo,useValue:this},{provide:Ls,useValue:this.componentFactoryResolver}],ur(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,t=Tr.THROW_IF_NOT_FOUND,i=Qt.Default){return r===Tr||r===yo||r===Ta?this:this._r3Injector.get(r,t,i)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Gp extends uC{constructor(r){super(),this.moduleType=r,null!==Ii(r)&&function(e){const r=new Set;!function t(i){const n=Ii(i,!0),a=n.id;null!==a&&(function(e,r,t){if(r&&r!==t)throw new Error(`Duplicate module registered for ${e} - ${ur(r)} vs ${ur(r.name)}`)}(a,Ka.get(a),i),Ka.set(a,i));const s=ho(n.imports);for(const o of s)r.has(o)||(r.add(o),t(o))}(e)}(r)}create(r){return new GO(this.moduleType,r)}}function Hp(e){return r=>{setTimeout(e,void 0,r)}}const pn=class extends Do{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,t,i){var n,a,s;let o=r,l=t||(()=>null),d=i;if(r&&"object"==typeof r){const u=r;o=null===(n=u.next)||void 0===n?void 0:n.bind(u),l=null===(a=u.error)||void 0===a?void 0:a.bind(u),d=null===(s=u.complete)||void 0===s?void 0:s.bind(u)}this.__isAsync&&(l=Hp(l),o&&(o=Hp(o)),d&&(d=Hp(d)));const c=super.subscribe({next:o,error:l,complete:d});return r instanceof Jr&&r.add(c),c}};Symbol;const _l=new dr("Application Initializer");let Xa=(()=>{class e{constructor(t){this.appInits=t,this.resolve=tf,this.reject=tf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const a=this.appInits[n]();if(Zu(a))t.push(a);else if(Yc(a)){const s=new Promise((o,l)=>{a.subscribe({complete:o,error:l})});t.push(s)}}Promise.all(t).then(()=>{i()}).catch(n=>{this.reject(n)}),0===t.length&&i(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Nt(_l,8))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const vl=new dr("AppId"),zF={provide:vl,useFactory:function(){return`${ig()}${ig()}${ig()}`},deps:[]};function ig(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const l0=new dr("Platform Initializer"),og=new dr("Platform ID"),c0=new dr("appBootstrapListener");let hf=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const us=new dr("LocaleId"),f0=new dr("DefaultCurrencyCode");class YF{constructor(r,t){this.ngModuleFactory=r,this.componentFactories=t}}const sg=function(e){return new Gp(e)},KF=sg,JF=function(e){return Promise.resolve(sg(e))},d0=function(e){const r=sg(e),i=ho(Ii(e).declarations).reduce((n,a)=>{const s=Ln(a);return s&&n.push(new OC(s)),n},[]);return new YF(r,i)},XF=d0,ZF=function(e){return Promise.resolve(d0(e))};let Bs=(()=>{class e{constructor(){this.compileModuleSync=KF,this.compileModuleAsync=JF,this.compileModuleAndAllComponentsSync=XF,this.compileModuleAndAllComponentsAsync=ZF}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const eL=(()=>Promise.resolve(0))();function ag(e){"undefined"==typeof Zone?eL.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class an{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=!i&&t,n.shouldCoalesceRunChangeDetection=i,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let e=wr.requestAnimationFrame,r=wr.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&r){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const i=r[Zone.__symbol__("OriginalDelegate")];i&&(r=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function(e){const r=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(wr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,lg(e),e.isCheckStableRunning=!0,ug(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),lg(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,n,a,s,o)=>{try{return h0(e),t.invokeTask(n,a,s,o)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&r(),p0(e)}},onInvoke:(t,i,n,a,s,o,l)=>{try{return h0(e),t.invoke(n,a,s,o,l)}finally{e.shouldCoalesceRunChangeDetection&&r(),p0(e)}},onHasTask:(t,i,n,a)=>{t.hasTask(n,a),i===n&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,lg(e),ug(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(t,i,n,a)=>(t.handleError(n,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!an.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(an.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,t,i){return this._inner.run(r,t,i)}runTask(r,t,i,n){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+n,r,rL,tf,tf);try{return a.runTask(s,t,i)}finally{a.cancelTask(s)}}runGuarded(r,t,i){return this._inner.runGuarded(r,t,i)}runOutsideAngular(r){return this._outer.run(r)}}const rL={};function ug(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function h0(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function p0(e){e._nesting--,ug(e)}class oL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(r,t,i){return r.apply(t,i)}runGuarded(r,t,i){return r.apply(t,i)}runOutsideAngular(r){return r()}runTask(r,t,i,n){return r.apply(t,i)}}let cg=(()=>{class e{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{an.assertNotInAngularZone(),ag(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ag(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,n){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:a,updateCb:n})}whenStable(t,i,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Nt(an))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),g0=(()=>{class e{constructor(){this._applications=new Map,fg.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return fg.findTestabilityInTree(this,t,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();class sL{addToWindow(r){}findTestabilityInTree(r,t,i){return null}}let fg=new sL,m0=!0,_0=!1;let Xi;const y0=new dr("AllowMultipleToken");class dg{constructor(r,t){this.name=r,this.token=t}}function b0(e,r,t=[]){const i=`Platform: ${r}`,n=new dr(i);return(a=[])=>{let s=I0();if(!s||s.injector.get(y0,!1))if(e)e(t.concat(a).concat({provide:n,useValue:!0}));else{const o=t.concat(a).concat({provide:n,useValue:!0},{provide:zu,useValue:"platform"});!function(e){if(Xi&&!Xi.destroyed&&!Xi.injector.get(y0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Xi=e.get(C0);const r=e.get(l0,null);r&&r.forEach(t=>t())}(Tr.create({providers:o,name:i}))}return function(e){const r=I0();if(!r)throw new Error("No platform exists!");if(!r.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return r}(n)}}function I0(){return Xi&&!Xi.destroyed?Xi:null}let C0=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const o=function(e,r){let t;return t="noop"===e?new oL:("zone.js"===e?void 0:e)||new an({enableLongStackTrace:(_0=!0,m0),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:an,useValue:o}];return o.run(()=>{const d=Tr.create({providers:l,parent:this.injector,name:t.moduleType.name}),c=t.create(d),u=c.injector.get(Rs,null);if(!u)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(()=>{const h=o.onError.subscribe({next:f=>{u.handleError(f)}});c.onDestroy(()=>{hg(this._modules,c),h.unsubscribe()})}),function(e,r,t){try{const i=t();return Zu(i)?i.catch(n=>{throw r.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw r.runOutsideAngular(()=>e.handleError(i)),i}}(u,o,()=>{const h=c.injector.get(Xa);return h.runInitializers(),h.donePromise.then(()=>(bp(c.injector.get(us,Xc)||Xc),this._moduleDoBootstrap(c),c))})})}bootstrapModule(t,i=[]){const n=w0({},i);return function(e,r,t){const i=new Gp(t);return Promise.resolve(i)}(0,0,t).then(a=>this.bootstrapModuleFactory(a,n))}_moduleDoBootstrap(t){const i=t.injector.get(Za);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(n=>i.bootstrap(n));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${ur(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Nt(Tr))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function w0(e,r){return Array.isArray(r)?r.reduce(w0,e):Object.assign(Object.assign({},e),r)}let Za=(()=>{class e{constructor(t,i,n,a,s){this._zone=t,this._injector=i,this._exceptionHandler=n,this._componentFactoryResolver=a,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Vr(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),l=new Vr(d=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{an.assertNotInAngularZone(),ag(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{an.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=function(...e){let r=Number.POSITIVE_INFINITY,t=null,i=e[e.length-1];return ec(i)?(t=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===t&&1===e.length&&e[0]instanceof Vr?e[0]:vu(r)(Md(e,t))}(o,l.pipe(e=>Pd()(function(e,r){return function(i){let n;n="function"==typeof e?e:function(){return e};const a=Object.create(i,bS);return a.source=i,a.subjectFactory=n,a}}(TS)(e))))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ZI?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const a=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(yo),o=n.create(Tr.NULL,[],i||n.selector,a),l=o.location.nativeElement,d=o.injector.get(cg,null),c=d&&o.injector.get(g0);return d&&c&&c.registerApplication(l,d),o.onDestroy(()=>{this.detachView(o.hostView),hg(this.components,o),c&&c.unregisterApplication(l)}),this._loadComponent(o),o}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;hg(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(c0,[]).concat(this._bootstrapListeners).forEach(n=>n(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Nt(an),Nt(Tr),Nt(Rs),Nt(Ls),Nt(Xa))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function hg(e,r){const t=e.indexOf(r);t>-1&&e.splice(t,1)}class gf{}class IL{}const CL={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let wL=(()=>{class e{constructor(t,i){this._compiler=t,this._config=i||CL}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[i,n]=t.split("#");return void 0===n&&(n="default"),mu(255)(i).then(a=>a[n]).then(a=>A0(a,i,n)).then(a=>this._compiler.compileModuleAsync(a))}loadFactory(t){let[i,n]=t.split("#"),a="NgFactory";return void 0===n&&(n="default",a=""),mu(255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(s=>s[n+a]).then(s=>A0(s,i,n))}}return e.\u0275fac=function(t){return new(t||e)(Nt(Bs),Nt(IL,8))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function A0(e,r,t){if(!e)throw new Error(`Cannot find '${t}' in '${r}'`);return e}const OL=b0(null,"core",[{provide:og,useValue:"unknown"},{provide:C0,deps:[Tr]},{provide:g0,deps:[]},{provide:hf,deps:[]}]),BL=[{provide:Za,useClass:Za,deps:[an,Tr,Rs,Ls,Xa]},{provide:kO,deps:[an],useFactory:function(e){let r=[];return e.onStable.subscribe(()=>{for(;r.length;)r.pop()()}),function(t){r.push(t)}}},{provide:Xa,useClass:Xa,deps:[[new Zn,_l]]},{provide:Bs,useClass:Bs,deps:[]},zF,{provide:il,useFactory:function(){return Rx},deps:[]},{provide:Ga,useFactory:function(){return xx},deps:[]},{provide:us,useFactory:function(e){return bp(e=e||"undefined"!=typeof $localize&&$localize.locale||Xc),e},deps:[[new _a(us),new Zn,new is]]},{provide:f0,useValue:"USD"}];let WL=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Nt(Za))},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({providers:BL}),e})(),Tf=null;function bo(){return Tf}const En=new dr("DocumentToken");let Us=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({factory:VN,token:e,providedIn:"platform"}),e})();function VN(){return Nt(Z0)}const WN=new dr("Location Initialized");let Z0=(()=>{class e extends Us{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bo().getBaseHref(this._doc)}onPopState(t){const i=bo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=bo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,n){$0()?this._history.pushState(t,i,n):this.location.hash=n}replaceState(t,i,n){$0()?this._history.replaceState(t,i,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Nt(En))},e.\u0275prov=lr({factory:UN,token:e,providedIn:"platform"}),e})();function $0(){return!!window.history.pushState}function UN(){return new Z0(Nt(En))}function Dg(e,r){if(0==e.length)return r;if(0==r.length)return e;let t=0;return e.endsWith("/")&&t++,r.startsWith("/")&&t++,2==t?e+r.substring(1):1==t?e+r:e+"/"+r}function q0(e){const r=e.match(/#|\?|$/),t=r&&r.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Wo(e){return e&&"?"!==e[0]?"?"+e:e}let eu=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({factory:jN,token:e,providedIn:"root"}),e})();function jN(e){const r=Nt(En).location;return new ew(Nt(Us),r&&r.origin||"")}const Mg=new dr("appBaseHref");let ew=(()=>{class e extends eu{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Dg(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Wo(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${i}${n}`:i}pushState(t,i,n,a){const s=this.prepareExternalUrl(n+Wo(a));this._platformLocation.pushState(t,i,s)}replaceState(t,i,n,a){const s=this.prepareExternalUrl(n+Wo(a));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,n;null===(n=(i=this._platformLocation).historyGo)||void 0===n||n.call(i,t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Us),Nt(Mg,8))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),GN=(()=>{class e extends eu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Dg(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,n,a){let s=this.prepareExternalUrl(n+Wo(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,n,a){let s=this.prepareExternalUrl(n+Wo(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,n;null===(n=(i=this._platformLocation).historyGo)||void 0===n||n.call(i,t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Us),Nt(Mg,8))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),Sf=(()=>{class e{constructor(t,i){this._subject=new pn,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=q0(tw(n)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wo(i))}normalize(t){return e.stripTrailingSlash(function(e,r){return e&&r.startsWith(e)?r.substring(e.length):r}(this._baseHref,tw(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",n=null){this._platformStrategy.pushState(n,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(i)),n)}replaceState(t,i="",n=null){this._platformStrategy.replaceState(n,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(i)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,n;null===(n=(i=this._platformStrategy).historyGo)||void 0===n||n.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(n=>n(t,i))}subscribe(t,i,n){return this._subject.subscribe({next:t,error:i,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(Nt(eu),Nt(Us))},e.normalizeQueryParams=Wo,e.joinWithSlash=Dg,e.stripTrailingSlash=q0,e.\u0275prov=lr({factory:HN,token:e,providedIn:"root"}),e})();function HN(){return new Sf(Nt(eu),Nt(Us))}function tw(e){return e.replace(/\/index.html$/,"")}var un=(()=>((un=un||{})[un.Zero=0]="Zero",un[un.One=1]="One",un[un.Two=2]="Two",un[un.Few=3]="Few",un[un.Many=4]="Many",un[un.Other=5]="Other",un))();const $N=function(e){return function(e){const r=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=TI(r);if(t)return t;const i=r.split("-")[0];if(t=TI(i),t)return t;if("en"===i)return lR;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[Ft.PluralCase]};class Nf{}let Ak=(()=>{class e extends Nf{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch($N(i||this.locale)(t)){case un.Zero:return"zero";case un.One:return"one";case un.Two:return"two";case un.Few:return"few";case un.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Nt(us))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),aB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({providers:[{provide:Nf,useClass:Ak}]}),e})();let gw=(()=>{class e{}return e.\u0275prov=lr({token:e,providedIn:"root",factory:()=>new fB(Nt(En),window)}),e})();class fB{constructor(r,t){this.document=r,this.window=t,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const t=function(e,r){const t=e.getElementById(r)||e.getElementsByName(r)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let n=i.currentNode;for(;n;){const a=n.shadowRoot;if(a){const s=a.getElementById(r)||a.querySelector(`[name="${r}"]`);if(s)return s}n=i.nextNode()}}return null}(this.document,r);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=r)}}scrollToElement(r){const t=r.getBoundingClientRect(),i=t.left+this.window.pageXOffset,n=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],n-a[1])}attemptFocus(r){return r.focus(),this.document.activeElement===r}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=mw(this.window.history)||mw(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch(r){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(r){return!1}}}function mw(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class jg extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(e){Tf||(Tf=e)}(new jg)}onAndCancel(r,t,i){return r.addEventListener(t,i,!1),()=>{r.removeEventListener(t,i,!1)}}dispatchEvent(r,t){r.dispatchEvent(t)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,t){return(t=t||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,t){return"window"===t?window:"document"===t?r:"body"===t?r.body:null}getBaseHref(r){const t=(Tl=Tl||document.querySelector("base"),Tl?Tl.getAttribute("href"):null);return null==t?null:function(e){kf=kf||document.createElement("a"),kf.setAttribute("href",e);const r=kf.pathname;return"/"===r.charAt(0)?r:`/${r}`}(t)}resetBaseElement(){Tl=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return function(e,r){r=encodeURIComponent(r);for(const t of e.split(";")){const i=t.indexOf("="),[n,a]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(n.trim()===r)return decodeURIComponent(a)}return null}(document.cookie,r)}}let kf,Tl=null;const _w=new dr("TRANSITION_ID"),vB=[{provide:_l,useFactory:function(e,r,t){return()=>{t.get(Xa).donePromise.then(()=>{const i=bo(),n=r.querySelectorAll(`style[ng-transition="${e}"]`);for(let a=0;a<n.length;a++)i.remove(n[a])})}},deps:[_w,En,Tr],multi:!0}];class Gg{static init(){!function(e){fg=e}(new Gg)}addToWindow(r){wr.getAngularTestability=(i,n=!0)=>{const a=r.findTestabilityInTree(i,n);if(null==a)throw new Error("Could not find testability for element.");return a},wr.getAllAngularTestabilities=()=>r.getAllTestabilities(),wr.getAllAngularRootElements=()=>r.getAllRootElements(),wr.frameworkStabilizers||(wr.frameworkStabilizers=[]),wr.frameworkStabilizers.push(i=>{const n=wr.getAllAngularTestabilities();let a=n.length,s=!1;const o=function(l){s=s||l,a--,0==a&&i(s)};n.forEach(function(l){l.whenStable(o)})})}findTestabilityInTree(r,t,i){if(null==t)return null;const n=r.getTestability(t);return null!=n?n:i?bo().isShadowRoot(t)?this.findTestabilityInTree(r,t.host,!0):this.findTestabilityInTree(r,t.parentElement,!0):null}}let yB=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const Sl=new dr("EventManagerPlugins");let Vf=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(n=>n.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,n){return this._findPluginFor(i).addEventListener(t,i,n)}addGlobalEventListener(t,i,n){return this._findPluginFor(i).addGlobalEventListener(t,i,n)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const n=this._plugins;for(let a=0;a<n.length;a++){const s=n[a];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Sl),Nt(an))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();class Hg{constructor(r){this._doc=r}addGlobalEventListener(r,t,i){const n=bo().getGlobalEventTarget(this._doc,r);if(!n)throw new Error(`Unsupported event target ${n} for event ${t}`);return this.addEventListener(n,t,i)}}let yw=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(n=>{this._stylesSet.has(n)||(this._stylesSet.add(n),i.add(n))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),Al=(()=>{class e extends yw{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,n){t.forEach(a=>{const s=this._doc.createElement("style");s.textContent=a,n.push(i.appendChild(s))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(bw),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,n)=>{this._addStylesToHost(t,n,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bw))}}return e.\u0275fac=function(t){return new(t||e)(Nt(En))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function bw(e){bo().remove(e)}const zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qg=/%COMP%/g;function Wf(e,r,t){for(let i=0;i<r.length;i++){let n=r[i];Array.isArray(n)?Wf(e,n,t):(n=n.replace(Qg,e),t.push(n))}return t}function ww(e){return r=>{if("__ngUnwrap__"===r)return e;!1===e(r)&&(r.preventDefault(),r.returnValue=!1)}}let Yg=(()=>{class e{constructor(t,i,n){this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Kg(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case cn.Emulated:{let n=this.rendererByCompId.get(i.id);return n||(n=new FB(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,n)),n.applyToHost(t),n}case 1:case cn.ShadowDom:return new LB(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const n=Wf(i.id,i.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Nt(Vf),Nt(Al),Nt(vl))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();class Kg{constructor(r){this.eventManager=r,this.data=Object.create(null)}destroy(){}createElement(r,t){return t?document.createElementNS(zg[t]||t,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,t){r.appendChild(t)}insertBefore(r,t,i){r&&r.insertBefore(t,i)}removeChild(r,t){r&&r.removeChild(t)}selectRootElement(r,t){let i="string"==typeof r?document.querySelector(r):r;if(!i)throw new Error(`The selector "${r}" did not match any elements`);return t||(i.textContent=""),i}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,t,i,n){if(n){t=n+":"+t;const a=zg[n];a?r.setAttributeNS(a,t,i):r.setAttribute(t,i)}else r.setAttribute(t,i)}removeAttribute(r,t,i){if(i){const n=zg[i];n?r.removeAttributeNS(n,t):r.removeAttribute(`${i}:${t}`)}else r.removeAttribute(t)}addClass(r,t){r.classList.add(t)}removeClass(r,t){r.classList.remove(t)}setStyle(r,t,i,n){n&(di.DashCase|di.Important)?r.style.setProperty(t,i,n&di.Important?"important":""):r.style[t]=i}removeStyle(r,t,i){i&di.DashCase?r.style.removeProperty(t):r.style[t]=""}setProperty(r,t,i){r[t]=i}setValue(r,t){r.nodeValue=t}listen(r,t,i){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,t,ww(i)):this.eventManager.addEventListener(r,t,ww(i))}}class FB extends Kg{constructor(r,t,i,n){super(r),this.component=i;const a=Wf(n+"-"+i.id,i.styles,[]);t.addStyles(a),this.contentAttr=function(e){return"_ngcontent-%COMP%".replace(Qg,e)}(n+"-"+i.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(Qg,e)}(n+"-"+i.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,t){const i=super.createElement(r,t);return super.setAttribute(i,this.contentAttr,""),i}}class LB extends Kg{constructor(r,t,i,n){super(r),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Wf(n.id,n.styles,[]);for(let s=0;s<a.length;s++){const o=document.createElement("style");o.textContent=a[s],this.shadowRoot.appendChild(o)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,t){return super.appendChild(this.nodeOrShadowRoot(r),t)}insertBefore(r,t,i){return super.insertBefore(this.nodeOrShadowRoot(r),t,i)}removeChild(r,t){return super.removeChild(this.nodeOrShadowRoot(r),t)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let NB=(()=>{class e extends Hg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,n){return t.addEventListener(i,n,!1),()=>this.removeEventListener(t,i,n)}removeEventListener(t,i,n){return t.removeEventListener(i,n)}}return e.\u0275fac=function(t){return new(t||e)(Nt(En))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const Sw=["alt","control","meta","shift"],GB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Aw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},HB={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let zB=(()=>{class e extends Hg{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,n){const a=e.parseEventName(i),s=e.eventCallback(a.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bo().onAndCancel(t,a.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const a=e._normalizeKey(i.pop());let s="";if(Sw.forEach(l=>{const d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=a,0!=i.length||0===a.length)return null;const o={};return o.domEventName=n,o.fullKey=s,o}static getEventFullKey(t){let i="",n=function(e){let r=e.key;if(null==r){if(r=e.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===e.location&&Aw.hasOwnProperty(r)&&(r=Aw[r]))}return GB[r]||r}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Sw.forEach(a=>{a!=n&&HB[a](t)&&(i+=a+".")}),i+=n,i}static eventCallback(t,i,n){return a=>{e.getEventFullKey(a)===t&&n.runGuarded(()=>i(a))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return e.\u0275fac=function(t){return new(t||e)(Nt(En))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const qB=b0(OL,"browser",[{provide:og,useValue:"browser"},{provide:l0,useValue:function(){jg.makeCurrent(),Gg.init()},multi:!0},{provide:En,useFactory:function(){return function(e){Gd=e}(document),document},deps:[]}]),e2=[[],{provide:zu,useValue:"root"},{provide:Rs,useFactory:function(){return new Rs},deps:[]},{provide:Sl,useClass:NB,multi:!0,deps:[En,an,og]},{provide:Sl,useClass:zB,multi:!0,deps:[En]},[],{provide:Yg,useClass:Yg,deps:[Vf,Al,vl]},{provide:rf,useExisting:Yg},{provide:yw,useExisting:Al},{provide:Al,useClass:Al,deps:[En]},{provide:cg,useClass:cg,deps:[an]},{provide:Vf,useClass:Vf,deps:[Sl,an]},{provide:class{},useClass:yB,deps:[]},[]];let t2=(()=>{class e{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:vl,useValue:t.appId},{provide:_w,useExisting:vl},vB]}}}return e.\u0275fac=function(t){return new(t||e)(Nt(e,12))},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({providers:e2,imports:[aB,WL]}),e})();function ir(...e){let r=e[e.length-1];return ec(r)?(e.pop(),Td(e,r)):Md(e)}"undefined"!=typeof window&&window;class to extends Do{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const t=super._subscribe(r);return t&&!t.closed&&r.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ea;return this._value}next(r){super.next(this._value=r)}}class l2 extends Hr{notifyNext(r,t,i,n,a){this.destination.next(t)}notifyError(r,t){this.destination.error(r)}notifyComplete(r){this.destination.complete()}}class c2 extends Hr{constructor(r,t,i){super(),this.parent=r,this.outerValue=t,this.outerIndex=i,this.index=0}_next(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)}_error(r){this.parent.notifyError(r,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function f2(e,r,t,i,n=new c2(e,t,i)){if(!n.closed)return r instanceof Vr?r.subscribe(n):Ed(r)(n)}const Mw={};class h2{constructor(r){this.resultSelector=r}call(r,t){return t.subscribe(new p2(r,this.resultSelector))}}class p2 extends l2{constructor(r,t){super(r),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(r){this.values.push(Mw),this.observables.push(r)}_complete(){const r=this.observables,t=r.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(f2(this,r[i],void 0,i))}}notifyComplete(r){0==(this.active-=1)&&this.destination.complete()}notifyNext(r,t,i){const n=this.values,s=this.toRespond?n[i]===Mw?--this.toRespond:this.toRespond:0;n[i]=t,0===s&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))}_tryResultSelector(r){let t;try{t=this.resultSelector.apply(this,r)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Uf=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();function qg(...e){return vu(1)(ir(...e))}const tu=new Vr(e=>e.complete());function em(e){return e?function(e){return new Vr(r=>e.schedule(()=>r.complete()))}(e):tu}function Pw(e){return new Vr(r=>{let t;try{t=e()}catch(n){return void r.error(n)}return(t?Cn(t):em()).subscribe(r)})}function fs(e,r){return"function"==typeof r?t=>t.pipe(fs((i,n)=>Cn(e(i,n)).pipe(Pr((a,s)=>r(i,a,n,s))))):t=>t.lift(new _2(e))}class _2{constructor(r){this.project=r}call(r,t){return t.subscribe(new v2(r,this.project))}}class v2 extends Ad{constructor(r,t){super(r),this.project=t,this.index=0}_next(r){let t;const i=this.index++;try{t=this.project(r,i)}catch(n){return void this.destination.error(n)}this._innerSub(t)}_innerSub(r){const t=this.innerSubscription;t&&t.unsubscribe();const i=new Sd(this),n=this.destination;n.add(i),this.innerSubscription=Dd(r,i),this.innerSubscription!==i&&n.add(this.innerSubscription)}_complete(){const{innerSubscription:r}=this;(!r||r.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(r){this.destination.next(r)}}const Rw=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function tm(e){return r=>0===e?em():r.lift(new y2(e))}class y2{constructor(r){if(this.total=r,this.total<0)throw new Rw}call(r,t){return t.subscribe(new b2(r,this.total))}}class b2 extends Hr{constructor(r,t){super(r),this.total=t,this.count=0}_next(r){const t=this.total,i=++this.count;i<=t&&(this.destination.next(r),i===t&&(this.destination.complete(),this.unsubscribe()))}}function xw(e,r){let t=!1;return arguments.length>=2&&(t=!0),function(n){return n.lift(new C2(e,r,t))}}class C2{constructor(r,t,i=!1){this.accumulator=r,this.seed=t,this.hasSeed=i}call(r,t){return t.subscribe(new w2(r,this.accumulator,this.seed,this.hasSeed))}}class w2 extends Hr{constructor(r,t,i,n){super(r),this.accumulator=t,this._seed=i,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(r){this.hasSeed=!0,this._seed=r}_next(r){if(this.hasSeed)return this._tryNext(r);this.seed=r,this.destination.next(r)}_tryNext(r){const t=this.index++;let i;try{i=this.accumulator(this.seed,r,t)}catch(n){this.destination.error(n)}this.seed=i,this.destination.next(i)}}function ru(e,r){return function(i){return i.lift(new E2(e,r))}}class E2{constructor(r,t){this.predicate=r,this.thisArg=t}call(r,t){return t.subscribe(new T2(r,this.predicate,this.thisArg))}}class T2 extends Hr{constructor(r,t,i){super(r),this.predicate=t,this.thisArg=i,this.count=0}_next(r){let t;try{t=this.predicate.call(this.thisArg,r,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(r)}}function js(e){return function(t){const i=new S2(e),n=t.lift(i);return i.caught=n}}class S2{constructor(r){this.selector=r}call(r,t){return t.subscribe(new A2(r,this.selector,this.caught))}}class A2 extends Ad{constructor(r,t,i){super(r),this.selector=t,this.caught=i}error(r){if(!this.isStopped){let t;try{t=this.selector(r,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const i=new Sd(this);this.add(i);const n=Dd(t,i);n!==i&&this.add(n)}}}function Dl(e,r){return wn(e,r,1)}function rm(e){return function(t){return 0===e?em():t.lift(new D2(e))}}class D2{constructor(r){if(this.total=r,this.total<0)throw new Rw}call(r,t){return t.subscribe(new M2(r,this.total))}}class M2 extends Hr{constructor(r,t){super(r),this.total=t,this.ring=new Array,this.count=0}_next(r){const t=this.ring,i=this.total,n=this.count++;t.length<i?t.push(r):t[n%i]=r}_complete(){const r=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,n=this.ring;for(let a=0;a<i;a++){const s=t++%i;r.next(n[s])}}r.complete()}}function Ow(e=x2){return r=>r.lift(new P2(e))}class P2{constructor(r){this.errorFactory=r}call(r,t){return t.subscribe(new R2(r,this.errorFactory))}}class R2 extends Hr{constructor(r,t){super(r),this.errorFactory=t,this.hasValue=!1}_next(r){this.hasValue=!0,this.destination.next(r)}_complete(){if(this.hasValue)return this.destination.complete();{let r;try{r=this.errorFactory()}catch(t){r=t}this.destination.error(r)}}}function x2(){return new Uf}function Fw(e=null){return r=>r.lift(new O2(e))}class O2{constructor(r){this.defaultValue=r}call(r,t){return t.subscribe(new F2(r,this.defaultValue))}}class F2 extends Hr{constructor(r,t){super(r),this.defaultValue=t,this.isEmpty=!0}_next(r){this.isEmpty=!1,this.destination.next(r)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function nu(e,r){const t=arguments.length>=2;return i=>i.pipe(e?ru((n,a)=>e(n,a,i)):ql,tm(1),t?Fw(r):Ow(()=>new Uf))}function ds(){}function mi(e,r,t){return function(n){return n.lift(new N2(e,r,t))}}class N2{constructor(r,t,i){this.nextOrObserver=r,this.error=t,this.complete=i}call(r,t){return t.subscribe(new k2(r,this.nextOrObserver,this.error,this.complete))}}class k2 extends Hr{constructor(r,t,i,n){super(r),this._tapNext=ds,this._tapError=ds,this._tapComplete=ds,this._tapError=i||ds,this._tapComplete=n||ds,Ao(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||ds,this._tapError=t.error||ds,this._tapComplete=t.complete||ds)}_next(r){try{this._tapNext.call(this._context,r)}catch(t){return void this.destination.error(t)}this.destination.next(r)}_error(r){try{this._tapError.call(this._context,r)}catch(t){return void this.destination.error(t)}this.destination.error(r)}_complete(){try{this._tapComplete.call(this._context)}catch(r){return void this.destination.error(r)}return this.destination.complete()}}class V2{constructor(r){this.callback=r}call(r,t){return t.subscribe(new W2(r,this.callback))}}class W2 extends Hr{constructor(r,t){super(r),this.add(new Jr(t))}}class jo{constructor(r,t){this.id=r,this.url=t}}class nm extends jo{constructor(r,t,i="imperative",n=null){super(r,t),this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ml extends jo{constructor(r,t,i){super(r,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lw extends jo{constructor(r,t,i){super(r,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class U2 extends jo{constructor(r,t,i){super(r,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class j2 extends jo{constructor(r,t,i,n){super(r,t),this.urlAfterRedirects=i,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G2 extends jo{constructor(r,t,i,n){super(r,t),this.urlAfterRedirects=i,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H2 extends jo{constructor(r,t,i,n,a){super(r,t),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class z2 extends jo{constructor(r,t,i,n){super(r,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q2 extends jo{constructor(r,t,i,n){super(r,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nw{constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kw{constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y2{constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K2{constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J2{constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X2{constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bw{constructor(r,t,i){this.routerEvent=r,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fr="primary";class Z2{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const t=this.params[r];return Array.isArray(t)?t[0]:t}return null}getAll(r){if(this.has(r)){const t=this.params[r];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iu(e){return new Z2(e)}const Vw="ngNavigationCancelingError";function im(e){const r=Error("NavigationCancelingError: "+e);return r[Vw]=!0,r}function q2(e,r,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(r.hasChildren()||i.length<e.length))return null;const n={};for(let a=0;a<i.length;a++){const s=i[a],o=e[a];if(s.startsWith(":"))n[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:e.slice(0,i.length),posParams:n}}function Io(e,r){const t=e?Object.keys(e):void 0,i=r?Object.keys(r):void 0;if(!t||!i||t.length!=i.length)return!1;let n;for(let a=0;a<t.length;a++)if(n=t[a],!Ww(e[n],r[n]))return!1;return!0}function Ww(e,r){if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;const t=[...e].sort(),i=[...r].sort();return t.every((n,a)=>i[a]===n)}return e===r}function Uw(e){return Array.prototype.concat.apply([],e)}function jw(e){return e.length>0?e[e.length-1]:null}function Tn(e,r){for(const t in e)e.hasOwnProperty(t)&&r(e[t],t)}function Co(e){return Yc(e)?e:Zu(e)?Cn(Promise.resolve(e)):ir(e)}const rV={exact:function zw(e,r,t){if(!Hs(e.segments,r.segments)||!jf(e.segments,r.segments,t)||e.numberOfChildren!==r.numberOfChildren)return!1;for(const i in r.children)if(!e.children[i]||!zw(e.children[i],r.children[i],t))return!1;return!0},subset:Qw},Gw={exact:function(e,r){return Io(e,r)},subset:function(e,r){return Object.keys(r).length<=Object.keys(e).length&&Object.keys(r).every(t=>Ww(e[t],r[t]))},ignored:()=>!0};function Hw(e,r,t){return rV[t.paths](e.root,r.root,t.matrixParams)&&Gw[t.queryParams](e.queryParams,r.queryParams)&&!("exact"===t.fragment&&e.fragment!==r.fragment)}function Qw(e,r,t){return Yw(e,r,r.segments,t)}function Yw(e,r,t,i){if(e.segments.length>t.length){const n=e.segments.slice(0,t.length);return!(!Hs(n,t)||r.hasChildren()||!jf(n,t,i))}if(e.segments.length===t.length){if(!Hs(e.segments,t)||!jf(e.segments,t,i))return!1;for(const n in r.children)if(!e.children[n]||!Qw(e.children[n],r.children[n],i))return!1;return!0}{const n=t.slice(0,e.segments.length),a=t.slice(e.segments.length);return!!(Hs(e.segments,n)&&jf(e.segments,n,i)&&e.children[fr])&&Yw(e.children[fr],r,a,i)}}function jf(e,r,t){return r.every((i,n)=>Gw[t](e[n].parameters,i.parameters))}class Gs{constructor(r,t,i){this.root=r,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return aV.serialize(this)}}class gr{constructor(r,t){this.segments=r,this.children=t,this.parent=null,Tn(t,(i,n)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gf(this)}}class Pl{constructor(r,t){this.path=r,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iu(this.parameters)),this._parameterMap}toString(){return Zw(this)}}function Hs(e,r){return e.length===r.length&&e.every((t,i)=>t.path===r[i].path)}class om{}class Kw{parse(r){const t=new mV(r);return new Gs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(r){return`${`/${Rl(r.root,!0)}`}${function(e){const r=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(n=>`${Hf(t)}=${Hf(n)}`).join("&"):`${Hf(t)}=${Hf(i)}`}).filter(t=>!!t);return r.length?`?${r.join("&")}`:""}(r.queryParams)}${"string"==typeof r.fragment?`#${function(e){return encodeURI(e)}(r.fragment)}`:""}`}}const aV=new Kw;function Gf(e){return e.segments.map(r=>Zw(r)).join("/")}function Rl(e,r){if(!e.hasChildren())return Gf(e);if(r){const t=e.children[fr]?Rl(e.children[fr],!1):"",i=[];return Tn(e.children,(n,a)=>{a!==fr&&i.push(`${a}:${Rl(n,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(e,r){let t=[];return Tn(e.children,(i,n)=>{n===fr&&(t=t.concat(r(i,n)))}),Tn(e.children,(i,n)=>{n!==fr&&(t=t.concat(r(i,n)))}),t}(e,(i,n)=>n===fr?[Rl(e.children[fr],!1)]:[`${n}:${Rl(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[fr]?`${Gf(e)}/${t[0]}`:`${Gf(e)}/(${t.join("//")})`}}function Jw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hf(e){return Jw(e).replace(/%3B/gi,";")}function sm(e){return Jw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zf(e){return decodeURIComponent(e)}function Xw(e){return zf(e.replace(/\+/g,"%20"))}function Zw(e){return`${sm(e.path)}${function(e){return Object.keys(e).map(r=>`;${sm(r)}=${sm(e[r])}`).join("")}(e.parameters)}`}const fV=/^[^\/()?;=#]+/;function Qf(e){const r=e.match(fV);return r?r[0]:""}const dV=/^[^=?&#]+/,pV=/^[^?&#]+/;class mV{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gr([],{}):new gr([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(r.length>0||Object.keys(t).length>0)&&(i[fr]=new gr(r,t)),i}parseSegment(){const r=Qf(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(r),new Pl(zf(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const t=Qf(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const n=Qf(this.remaining);n&&(i=n,this.capture(i))}r[zf(t)]=zf(i)}parseQueryParam(r){const t=function(e){const r=e.match(dV);return r?r[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function(e){const r=e.match(pV);return r?r[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const n=Xw(t),a=Xw(i);if(r.hasOwnProperty(n)){let s=r[n];Array.isArray(s)||(s=[s],r[n]=s),s.push(a)}else r[n]=a}parseParens(r){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Qf(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):r&&(a=fr);const s=this.parseChildren();t[a]=1===Object.keys(s).length?s[fr]:new gr([],s),this.consumeOptional("//")}return t}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new Error(`Expected "${r}".`)}}class $w{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const t=this.pathFromRoot(r);return t.length>1?t[t.length-2]:null}children(r){const t=am(r,this._root);return t?t.children.map(i=>i.value):[]}firstChild(r){const t=am(r,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(r){const t=um(r,this._root);return t.length<2?[]:t[t.length-2].children.map(n=>n.value).filter(n=>n!==r)}pathFromRoot(r){return um(r,this._root).map(t=>t.value)}}function am(e,r){if(e===r.value)return r;for(const t of r.children){const i=am(e,t);if(i)return i}return null}function um(e,r){if(e===r.value)return[r];for(const t of r.children){const i=um(e,t);if(i.length)return i.unshift(r),i}return[]}class Go{constructor(r,t){this.value=r,this.children=t}toString(){return`TreeNode(${this.value})`}}function xl(e){const r={};return e&&e.children.forEach(t=>r[t.value.outlet]=t),r}class qw extends $w{constructor(r,t){super(r),this.snapshot=t,lm(this,r)}toString(){return this.snapshot.toString()}}function eE(e,r){const t=function(e,r){const s=new Yf([],{},{},"",{},fr,r,null,e.root,-1,{});return new rE("",new Go(s,[]))}(e,r),i=new to([new Pl("",{})]),n=new to({}),a=new to({}),s=new to({}),o=new to(""),l=new ou(i,n,s,o,a,fr,r,t.root);return l.snapshot=t.root,new qw(new Go(l,[]),t)}class ou{constructor(r,t,i,n,a,s,o,l){this.url=r,this.params=t,this.queryParams=i,this.fragment=n,this.data=a,this.outlet=s,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pr(r=>iu(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pr(r=>iu(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tE(e,r="emptyOnly"){const t=e.pathFromRoot;let i=0;if("always"!==r)for(i=t.length-1;i>=1;){const n=t[i],a=t[i-1];if(n.routeConfig&&""===n.routeConfig.path)i--;else{if(a.component)break;i--}}return function(e){return e.reduce((r,t)=>({params:Object.assign(Object.assign({},r.params),t.params),data:Object.assign(Object.assign({},r.data),t.data),resolve:Object.assign(Object.assign({},r.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Yf{constructor(r,t,i,n,a,s,o,l,d,c,u){this.url=r,this.params=t,this.queryParams=i,this.fragment=n,this.data=a,this.outlet=s,this.component=o,this.routeConfig=l,this._urlSegment=d,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rE extends $w{constructor(r,t){super(t),this.url=r,lm(this,t)}toString(){return nE(this._root)}}function lm(e,r){r.value._routerState=e,r.children.forEach(t=>lm(e,t))}function nE(e){const r=e.children.length>0?` { ${e.children.map(nE).join(", ")} } `:"";return`${e.value}${r}`}function cm(e){if(e.snapshot){const r=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Io(r.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),r.fragment!==t.fragment&&e.fragment.next(t.fragment),Io(r.params,t.params)||e.params.next(t.params),function(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;++t)if(!Io(e[t],r[t]))return!1;return!0}(r.url,t.url)||e.url.next(t.url),Io(r.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function fm(e,r){return Io(e.params,r.params)&&function(e,r){return Hs(e,r)&&e.every((t,i)=>Io(t.parameters,r[i].parameters))}(e.url,r.url)&&!(!e.parent!=!r.parent)&&(!e.parent||fm(e.parent,r.parent))}function Kf(e,r,t){if(t&&e.shouldReuseRoute(r.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=r.value;const n=function(e,r,t){return r.children.map(i=>{for(const n of t.children)if(e.shouldReuseRoute(i.value,n.value.snapshot))return Kf(e,i,n);return Kf(e,i)})}(e,r,t);return new Go(i,n)}{if(e.shouldAttach(r.value)){const a=e.retrieve(r.value);if(null!==a){const s=a.route;return iE(r,s),s}}const i=function(e){return new ou(new to(e.url),new to(e.params),new to(e.queryParams),new to(e.fragment),new to(e.data),e.outlet,e.component,e)}(r.value),n=r.children.map(a=>Kf(e,a));return new Go(i,n)}}function iE(e,r){if(e.value.routeConfig!==r.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==r.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");r.value._futureSnapshot=e.value;for(let t=0;t<e.children.length;++t)iE(e.children[t],r.children[t])}function Jf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ol(e){return"object"==typeof e&&null!=e&&e.outlets}function dm(e,r,t,i,n){let a={};return i&&Tn(i,(s,o)=>{a[o]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new Gs(t.root===e?r:oE(t.root,e,r),a,n)}function oE(e,r,t){const i={};return Tn(e.children,(n,a)=>{i[a]=n===r?t:oE(n,r,t)}),new gr(e.segments,i)}class sE{constructor(r,t,i){if(this.isAbsolute=r,this.numberOfDoubleDots=t,this.commands=i,r&&i.length>0&&Jf(i[0]))throw new Error("Root segment cannot have matrix parameters");const n=i.find(Ol);if(n&&n!==jw(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hm{constructor(r,t,i){this.segmentGroup=r,this.processChildren=t,this.index=i}}function aE(e,r,t){if(e||(e=new gr([],{})),0===e.segments.length&&e.hasChildren())return Xf(e,r,t);const i=function(e,r,t){let i=0,n=r;const a={match:!1,pathIndex:0,commandIndex:0};for(;n<e.segments.length;){if(i>=t.length)return a;const s=e.segments[n],o=t[i];if(Ol(o))break;const l=`${o}`,d=i<t.length-1?t[i+1]:null;if(n>0&&void 0===l)break;if(l&&d&&"object"==typeof d&&void 0===d.outlets){if(!lE(l,d,s))return a;i+=2}else{if(!lE(l,{},s))return a;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}(e,r,t),n=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const a=new gr(e.segments.slice(0,i.pathIndex),{});return a.children[fr]=new gr(e.segments.slice(i.pathIndex),e.children),Xf(a,0,n)}return i.match&&0===n.length?new gr(e.segments,{}):i.match&&!e.hasChildren()?pm(e,r,t):i.match?Xf(e,0,n):pm(e,r,t)}function Xf(e,r,t){if(0===t.length)return new gr(e.segments,{});{const i=function(e){return Ol(e[0])?e[0].outlets:{[fr]:e}}(t),n={};return Tn(i,(a,s)=>{"string"==typeof a&&(a=[a]),null!==a&&(n[s]=aE(e.children[s],r,a))}),Tn(e.children,(a,s)=>{void 0===i[s]&&(n[s]=a)}),new gr(e.segments,n)}}function pm(e,r,t){const i=e.segments.slice(0,r);let n=0;for(;n<t.length;){const a=t[n];if(Ol(a)){const l=DV(a.outlets);return new gr(i,l)}if(0===n&&Jf(t[0])){i.push(new Pl(e.segments[r].path,uE(t[0]))),n++;continue}const s=Ol(a)?a.outlets[fr]:`${a}`,o=n<t.length-1?t[n+1]:null;s&&o&&Jf(o)?(i.push(new Pl(s,uE(o))),n+=2):(i.push(new Pl(s,{})),n++)}return new gr(i,{})}function DV(e){const r={};return Tn(e,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(r[i]=pm(new gr([],{}),0,t))}),r}function uE(e){const r={};return Tn(e,(t,i)=>r[i]=`${t}`),r}function lE(e,r,t){return e==t.path&&Io(r,t.parameters)}class PV{constructor(r,t,i,n){this.routeReuseStrategy=r,this.futureState=t,this.currState=i,this.forwardEvent=n}activate(r){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,r),cm(this.futureState.root),this.activateChildRoutes(t,i,r)}deactivateChildRoutes(r,t,i){const n=xl(t);r.children.forEach(a=>{const s=a.value.outlet;this.deactivateRoutes(a,n[s],i),delete n[s]}),Tn(n,(a,s)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(r,t,i){const n=r.value,a=t?t.value:null;if(n===a)if(n.component){const s=i.getContext(n.outlet);s&&this.deactivateChildRoutes(r,t,s.children)}else this.deactivateChildRoutes(r,t,i);else a&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(r,t){this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,t):this.deactivateRouteAndOutlet(r,t)}detachAndStoreRouteSubtree(r,t){const i=t.getContext(r.value.outlet);if(i&&i.outlet){const n=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:n,route:r,contexts:a})}}deactivateRouteAndOutlet(r,t){const i=t.getContext(r.value.outlet),n=i&&r.value.component?i.children:t,a=xl(r);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],n);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(r,t,i){const n=xl(t);r.children.forEach(a=>{this.activateRoutes(a,n[a.value.outlet],i),this.forwardEvent(new X2(a.value.snapshot))}),r.children.length&&this.forwardEvent(new K2(r.value.snapshot))}activateRoutes(r,t,i){const n=r.value,a=t?t.value:null;if(cm(n),n===a)if(n.component){const s=i.getOrCreateContext(n.outlet);this.activateChildRoutes(r,t,s.children)}else this.activateChildRoutes(r,t,i);else if(n.component){const s=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const o=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),cE(o.route)}else{const o=function(e){for(let r=e.parent;r;r=r.parent){const t=r.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(n.snapshot),l=o?o.module.componentFactoryResolver:null;s.attachRef=null,s.route=n,s.resolver=l,s.outlet&&s.outlet.activateWith(n,l),this.activateChildRoutes(r,null,s.children)}}else this.activateChildRoutes(r,null,i)}}function cE(e){cm(e.value),e.children.forEach(cE)}class gm{constructor(r,t){this.routes=r,this.module=t}}function hs(e){return"function"==typeof e}function zs(e){return e instanceof Gs}const Fl=Symbol("INITIAL_VALUE");function Ll(){return fs(e=>function(...e){let r,t;return ec(e[e.length-1])&&(t=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Xl(e[0])&&(e=e[0]),Md(e,t).lift(new h2(r))}(e.map(r=>r.pipe(tm(1),function(...e){const r=e[e.length-1];return ec(r)?(e.pop(),t=>qg(e,t,r)):t=>qg(e,t)}(Fl)))).pipe(xw((r,t)=>{let i=!1;return t.reduce((n,a,s)=>n!==Fl?n:(a===Fl&&(i=!0),i||!1!==a&&s!==t.length-1&&!zs(a)?n:a),r)},Fl),ru(r=>r!==Fl),Pr(r=>zs(r)?r:!0===r),tm(1)))}let fE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bu({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&Xu(0,"router-outlet")},directives:function(){return[Cm]},encapsulation:2}),e})();function dE(e,r=""){for(let t=0;t<e.length;t++){const i=e[t];kV(i,BV(r,i))}}function kV(e,r){e.children&&dE(e.children,r)}function BV(e,r){return r?e||r.path?e&&!r.path?`${e}/`:!e&&r.path?r.path:`${e}/${r.path}`:"":e}function mm(e){const r=e.children&&e.children.map(mm),t=r?Object.assign(Object.assign({},e),{children:r}):Object.assign({},e);return!t.component&&(r||t.loadChildren)&&t.outlet&&t.outlet!==fr&&(t.component=fE),t}function Oi(e){return e.outlet||fr}function hE(e,r){const t=e.filter(i=>Oi(i)===r);return t.push(...e.filter(i=>Oi(i)!==r)),t}const pE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Zf(e,r,t){var i;if(""===r.path)return"full"===r.pathMatch&&(e.hasChildren()||t.length>0)?Object.assign({},pE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(r.matcher||q2)(t,e,r);if(!a)return Object.assign({},pE);const s={};Tn(a.posParams,(l,d)=>{s[d]=l.path});const o=a.consumed.length>0?Object.assign(Object.assign({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:o,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function $f(e,r,t,i,n="corrected"){if(t.length>0&&function(e,r,t){return t.some(i=>qf(e,r,i)&&Oi(i)!==fr)}(e,t,i)){const s=new gr(r,function(e,r,t,i){const n={};n[fr]=i,i._sourceSegment=e,i._segmentIndexShift=r.length;for(const a of t)if(""===a.path&&Oi(a)!==fr){const s=new gr([],{});s._sourceSegment=e,s._segmentIndexShift=r.length,n[Oi(a)]=s}return n}(e,r,i,new gr(t,e.children)));return s._sourceSegment=e,s._segmentIndexShift=r.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function(e,r,t){return t.some(i=>qf(e,r,i))}(e,t,i)){const s=new gr(e.segments,function(e,r,t,i,n,a){const s={};for(const o of i)if(qf(e,t,o)&&!n[Oi(o)]){const l=new gr([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===a?e.segments.length:r.length,s[Oi(o)]=l}return Object.assign(Object.assign({},n),s)}(e,r,t,i,e.children,n));return s._sourceSegment=e,s._segmentIndexShift=r.length,{segmentGroup:s,slicedSegments:t}}const a=new gr(e.segments,e.children);return a._sourceSegment=e,a._segmentIndexShift=r.length,{segmentGroup:a,slicedSegments:t}}function qf(e,r,t){return(!(e.hasChildren()||r.length>0)||"full"!==t.pathMatch)&&""===t.path}function gE(e,r,t,i){return!!(Oi(e)===i||i!==fr&&qf(r,t,e))&&("**"===e.path||Zf(r,e,t).matched)}function mE(e,r,t){return 0===r.length&&!e.children[t]}class Nl{constructor(r){this.segmentGroup=r||null}}class _E{constructor(r){this.urlTree=r}}function ed(e){return new Vr(r=>r.error(new Nl(e)))}function vE(e){return new Vr(r=>r.error(new _E(e)))}function GV(e){return new Vr(r=>r.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class QV{constructor(r,t,i,n,a){this.configLoader=t,this.urlSerializer=i,this.urlTree=n,this.config=a,this.allowRedirects=!0,this.ngModule=r.get(yo)}apply(){const r=$f(this.urlTree.root,[],[],this.config).segmentGroup,t=new gr(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,t,fr).pipe(Pr(a=>this.createUrlTree(_m(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(js(a=>{if(a instanceof _E)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Nl?this.noMatchError(a):a}))}match(r){return this.expandSegmentGroup(this.ngModule,this.config,r.root,fr).pipe(Pr(n=>this.createUrlTree(_m(n),r.queryParams,r.fragment))).pipe(js(n=>{throw n instanceof Nl?this.noMatchError(n):n}))}noMatchError(r){return new Error(`Cannot match any routes. URL Segment: '${r.segmentGroup}'`)}createUrlTree(r,t,i){const n=r.segments.length>0?new gr([],{[fr]:r}):r;return new Gs(n,t,i)}expandSegmentGroup(r,t,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(r,t,i).pipe(Pr(a=>new gr([],a))):this.expandSegment(r,i,t,i.segments,n,!0)}expandChildren(r,t,i){const n=[];for(const a of Object.keys(i.children))"primary"===a?n.unshift(a):n.push(a);return Cn(n).pipe(Dl(a=>{const s=i.children[a],o=hE(t,a);return this.expandSegmentGroup(r,o,s,a).pipe(Pr(l=>({segment:l,outlet:a})))}),xw((a,s)=>(a[s.outlet]=s.segment,a),{}),function(e,r){const t=arguments.length>=2;return i=>i.pipe(e?ru((n,a)=>e(n,a,i)):ql,rm(1),t?Fw(r):Ow(()=>new Uf))}())}expandSegment(r,t,i,n,a,s){return Cn(i).pipe(Dl(o=>this.expandSegmentAgainstRoute(r,t,i,o,n,a,s).pipe(js(d=>{if(d instanceof Nl)return ir(null);throw d}))),nu(o=>!!o),js((o,l)=>{if(o instanceof Uf||"EmptyError"===o.name){if(mE(t,n,a))return ir(new gr([],{}));throw new Nl(t)}throw o}))}expandSegmentAgainstRoute(r,t,i,n,a,s,o){return gE(n,t,a,s)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(r,t,n,a,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,t,i,n,a,s):ed(t):ed(t)}expandSegmentAgainstRouteUsingRedirect(r,t,i,n,a,s){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,i,n,s):this.expandRegularSegmentAgainstRouteUsingRedirect(r,t,i,n,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,t,i,n){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?vE(a):this.lineralizeSegments(i,a).pipe(wn(s=>{const o=new gr(s,{});return this.expandSegment(r,o,t,s,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,t,i,n,a,s){const{matched:o,consumedSegments:l,lastChild:d,positionalParamSegments:c}=Zf(t,n,a);if(!o)return ed(t);const u=this.applyRedirectCommands(l,n.redirectTo,c);return n.redirectTo.startsWith("/")?vE(u):this.lineralizeSegments(n,u).pipe(wn(h=>this.expandSegment(r,t,i,h.concat(a.slice(d)),s,!1)))}matchSegmentAgainstRoute(r,t,i,n,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ir(i._loadedConfig):this.configLoader.load(r.injector,i)).pipe(Pr(h=>(i._loadedConfig=h,new gr(n,{})))):ir(new gr(n,{}));const{matched:s,consumedSegments:o,lastChild:l}=Zf(t,i,n);if(!s)return ed(t);const d=n.slice(l);return this.getChildConfig(r,i,n).pipe(wn(u=>{const h=u.module,f=u.routes,{segmentGroup:g,slicedSegments:v}=$f(t,o,d,f),p=new gr(g.segments,g.children);if(0===v.length&&p.hasChildren())return this.expandChildren(h,f,p).pipe(Pr(_=>new gr(o,_)));if(0===f.length&&0===v.length)return ir(new gr(o,{}));const m=Oi(i)===a;return this.expandSegment(h,p,f,v,m?fr:a,!0).pipe(Pr(y=>new gr(o.concat(y.segments),y.children)))}))}getChildConfig(r,t,i){return t.children?ir(new gm(t.children,r)):t.loadChildren?void 0!==t._loadedConfig?ir(t._loadedConfig):this.runCanLoadGuards(r.injector,t,i).pipe(wn(n=>n?this.configLoader.load(r.injector,t).pipe(Pr(a=>(t._loadedConfig=a,a))):function(e){return new Vr(r=>r.error(im(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):ir(new gm([],r))}runCanLoadGuards(r,t,i){const n=t.canLoad;return n&&0!==n.length?ir(n.map(s=>{const o=r.get(s);let l;if(function(e){return e&&hs(e.canLoad)}(o))l=o.canLoad(t,i);else{if(!hs(o))throw new Error("Invalid CanLoad guard");l=o(t,i)}return Co(l)})).pipe(Ll(),mi(s=>{if(!zs(s))return;const o=im(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw o.url=s,o}),Pr(s=>!0===s)):ir(!0)}lineralizeSegments(r,t){let i=[],n=t.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return ir(i);if(n.numberOfChildren>1||!n.children[fr])return GV(r.redirectTo);n=n.children[fr]}}applyRedirectCommands(r,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),r,i)}applyRedirectCreatreUrlTree(r,t,i,n){const a=this.createSegmentGroup(r,t.root,i,n);return new Gs(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(r,t){const i={};return Tn(r,(n,a)=>{if("string"==typeof n&&n.startsWith(":")){const o=n.substring(1);i[a]=t[o]}else i[a]=n}),i}createSegmentGroup(r,t,i,n){const a=this.createSegments(r,t.segments,i,n);let s={};return Tn(t.children,(o,l)=>{s[l]=this.createSegmentGroup(r,o,i,n)}),new gr(a,s)}createSegments(r,t,i,n){return t.map(a=>a.path.startsWith(":")?this.findPosParam(r,a,n):this.findOrReturn(a,i))}findPosParam(r,t,i){const n=i[t.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${r}'. Cannot find '${t.path}'.`);return n}findOrReturn(r,t){let i=0;for(const n of t){if(n.path===r.path)return t.splice(i),n;i++}return r}}function _m(e){const r={};for(const i of Object.keys(e.children)){const a=_m(e.children[i]);(a.segments.length>0||a.hasChildren())&&(r[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children[fr]){const r=e.children[fr];return new gr(e.segments.concat(r.segments),r.children)}return e}(new gr(e.segments,r))}class yE{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class td{constructor(r,t){this.component=r,this.route=t}}function JV(e,r,t){const i=e._root;return kl(i,r?r._root:null,t,[i.value])}function rd(e,r,t){const i=function(e){if(!e)return null;for(let r=e.parent;r;r=r.parent){const t=r.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(r);return(i?i.module.injector:t).get(e)}function kl(e,r,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const a=xl(r);return e.children.forEach(s=>{(function(e,r,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,s=r?r.value:null,o=t?t.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const l=function(e,r,t){if("function"==typeof t)return t(e,r);switch(t){case"pathParamsChange":return!Hs(e.url,r.url);case"pathParamsOrQueryParamsChange":return!Hs(e.url,r.url)||!Io(e.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fm(e,r)||!Io(e.queryParams,r.queryParams);case"paramsChange":default:return!fm(e,r)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new yE(i)):(a.data=s.data,a._resolvedData=s._resolvedData),kl(e,r,a.component?o?o.children:null:t,i,n),l&&o&&o.outlet&&o.outlet.isActivated&&n.canDeactivateChecks.push(new td(o.outlet.component,s))}else s&&Bl(r,o,n),n.canActivateChecks.push(new yE(i)),kl(e,null,a.component?o?o.children:null:t,i,n)})(s,a[s.value.outlet],t,i.concat([s.value]),n),delete a[s.value.outlet]}),Tn(a,(s,o)=>Bl(s,t.getContext(o),n)),n}function Bl(e,r,t){const i=xl(e),n=e.value;Tn(i,(a,s)=>{Bl(a,n.component?r?r.children.getContext(s):null:r,t)}),t.canDeactivateChecks.push(new td(n.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,n))}class uW{}function bE(e){return new Vr(r=>r.error(e))}class cW{constructor(r,t,i,n,a,s){this.rootComponentType=r,this.config=t,this.urlTree=i,this.url=n,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}recognize(){const r=$f(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,r,fr);if(null===t)return null;const i=new Yf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fr,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Go(i,t),a=new rE(this.url,n);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(r){const t=r.value,i=tE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),r.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(r,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(r,t):this.processSegment(r,t,t.segments,i)}processChildren(r,t){const i=[];for(const a of Object.keys(t.children)){const s=t.children[a],o=hE(r,a),l=this.processSegmentGroup(o,s,a);if(null===l)return null;i.push(...l)}const n=IE(i);return function(e){e.sort((r,t)=>r.value.outlet===fr?-1:t.value.outlet===fr?1:r.value.outlet.localeCompare(t.value.outlet))}(n),n}processSegment(r,t,i,n){for(const a of r){const s=this.processSegmentAgainstRoute(a,t,i,n);if(null!==s)return s}return mE(t,i,n)?[]:null}processSegmentAgainstRoute(r,t,i,n){if(r.redirectTo||!gE(r,t,i,n))return null;let a,s=[],o=[];if("**"===r.path){const f=i.length>0?jw(i).parameters:{};a=new Yf(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,EE(r),Oi(r),r.component,r,CE(t),wE(t)+i.length,TE(r))}else{const f=Zf(t,r,i);if(!f.matched)return null;s=f.consumedSegments,o=i.slice(f.lastChild),a=new Yf(s,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,EE(r),Oi(r),r.component,r,CE(t),wE(t)+s.length,TE(r))}const l=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(r),{segmentGroup:d,slicedSegments:c}=$f(t,s,o,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===c.length&&d.hasChildren()){const f=this.processChildren(l,d);return null===f?null:[new Go(a,f)]}if(0===l.length&&0===c.length)return[new Go(a,[])];const u=Oi(r)===n,h=this.processSegment(l,d,c,u?fr:n);return null===h?null:[new Go(a,h)]}}function hW(e){const r=e.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function IE(e){const r=[],t=new Set;for(const i of e){if(!hW(i)){r.push(i);continue}const n=r.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==n?(n.children.push(...i.children),t.add(n)):r.push(i)}for(const i of t){const n=IE(i.children);r.push(new Go(i.value,n))}return r.filter(i=>!t.has(i))}function CE(e){let r=e;for(;r._sourceSegment;)r=r._sourceSegment;return r}function wE(e){let r=e,t=r._segmentIndexShift?r._segmentIndexShift:0;for(;r._sourceSegment;)r=r._sourceSegment,t+=r._segmentIndexShift?r._segmentIndexShift:0;return t-1}function EE(e){return e.data||{}}function TE(e){return e.resolve||{}}function vm(e){return fs(r=>{const t=e(r);return t?Cn(t).pipe(Pr(()=>r)):ir(r)})}class IW extends class{shouldDetach(r){return!1}store(r,t){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,t){return r.routeConfig===t.routeConfig}}{}const ym=new dr("ROUTES");class SE{constructor(r,t,i,n){this.loader=r,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=n}load(r,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe(Pr(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const s=a.create(r);return new gm(Uw(s.injector.get(ym,void 0,Qt.Self|Qt.Optional)).map(mm),s)}),js(a=>{throw t._loader$=void 0,a}));return t._loader$=new g_(n,()=>new Do).pipe(Pd()),t._loader$}loadModuleFactory(r){return"string"==typeof r?Cn(this.loader.load(r)):Co(r()).pipe(wn(t=>t instanceof uC?ir(t):Cn(this.compiler.compileModuleAsync(t))))}}class CW{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new su,this.attachRef=null}}class su{constructor(){this.contexts=new Map}onChildOutletCreated(r,t){const i=this.getOrCreateContext(r);i.outlet=t,this.contexts.set(r,i)}onChildOutletDestroyed(r){const t=this.getContext(r);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let t=this.getContext(r);return t||(t=new CW,this.contexts.set(r,t)),t}getContext(r){return this.contexts.get(r)||null}}class EW{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,t){return r}}function TW(e){throw e}function SW(e,r,t){return r.parse("/")}function AE(e,r){return ir(null)}const AW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qn=(()=>{class e{constructor(t,i,n,a,s,o,l,d){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=n,this.location=a,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Do,this.errorHandler=TW,this.malformedUriErrorHandler=SW,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:AE,afterPreactivation:AE},this.urlHandlingStrategy=new EW,this.routeReuseStrategy=new IW,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(yo),this.console=s.get(hf);const h=s.get(an);this.isNgZoneEnabled=h instanceof an&&an.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=new Gs(new gr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new SE(o,l,f=>this.triggerEvent(new Nw(f)),f=>this.triggerEvent(new kw(f))),this.routerState=eE(this.currentUrlTree,this.rootComponentType),this.transitions=new to({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ru(n=>0!==n.id),Pr(n=>Object.assign(Object.assign({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),fs(n=>{let a=!1,s=!1;return ir(n).pipe(mi(o=>{this.currentNavigation={id:o.id,initialUrl:o.currentRawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fs(o=>{const l=this.browserUrlTree.toString(),d=!this.navigated||o.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return nd(o.source)&&(this.browserUrlTree=o.extractedUrl),ir(o).pipe(fs(u=>{const h=this.transitions.getValue();return i.next(new nm(u.id,this.serializeUrl(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions.getValue()?tu:Promise.resolve(u)}),function(e,r,t,i){return fs(n=>function(e,r,t,i,n){return new QV(e,r,t,i,n).apply()}(e,r,t,n.extractedUrl,i).pipe(Pr(a=>Object.assign(Object.assign({},n),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mi(u=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:u.urlAfterRedirects})}),function(e,r,t,i,n){return wn(a=>function(e,r,t,i,n="emptyOnly",a="legacy"){try{const s=new cW(e,r,t,i,n,a).recognize();return null===s?bE(new uW):ir(s)}catch(s){return bE(s)}}(e,r,a.urlAfterRedirects,t(a.urlAfterRedirects),i,n).pipe(Pr(s=>Object.assign(Object.assign({},a),{targetSnapshot:s}))))}(this.rootComponentType,this.config,u=>this.serializeUrl(u),this.paramsInheritanceStrategy,this.relativeLinkResolution),mi(u=>{"eager"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(u.urlAfterRedirects,u),this.browserUrlTree=u.urlAfterRedirects);const h=new j2(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);i.next(h)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:g,restoredState:v,extras:p}=o,m=new nm(h,this.serializeUrl(f),g,v);i.next(m);const I=eE(f,this.rootComponentType).snapshot;return ir(Object.assign(Object.assign({},o),{targetSnapshot:I,urlAfterRedirects:f,extras:Object.assign(Object.assign({},p),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=o.rawUrl,this.browserUrlTree=o.urlAfterRedirects,o.resolve(null),tu}),vm(o=>{const{targetSnapshot:l,id:d,extractedUrl:c,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=o;return this.hooks.beforePreactivation(l,{navigationId:d,appliedUrlTree:c,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),mi(o=>{const l=new G2(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);this.triggerEvent(l)}),Pr(o=>Object.assign(Object.assign({},o),{guards:JV(o.targetSnapshot,o.currentSnapshot,this.rootContexts)})),function(e,r){return wn(t=>{const{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:a,canDeactivateChecks:s}}=t;return 0===s.length&&0===a.length?ir(Object.assign(Object.assign({},t),{guardsResult:!0})):function(e,r,t,i){return Cn(e).pipe(wn(n=>function(e,r,t,i,n){const a=r&&r.routeConfig?r.routeConfig.canDeactivate:null;return a&&0!==a.length?ir(a.map(o=>{const l=rd(o,r,n);let d;if(function(e){return e&&hs(e.canDeactivate)}(l))d=Co(l.canDeactivate(e,r,t,i));else{if(!hs(l))throw new Error("Invalid CanDeactivate guard");d=Co(l(e,r,t,i))}return d.pipe(nu())})).pipe(Ll()):ir(!0)}(n.component,n.route,t,r,i)),nu(n=>!0!==n,!0))}(s,i,n,e).pipe(wn(o=>o&&function(e){return"boolean"==typeof e}(o)?function(e,r,t,i){return Cn(r).pipe(Dl(n=>qg(function(e,r){return null!==e&&r&&r(new Y2(e)),ir(!0)}(n.route.parent,i),function(e,r){return null!==e&&r&&r(new J2(e)),ir(!0)}(n.route,i),function(e,r,t){const i=r[r.length-1],a=r.slice(0,r.length-1).reverse().map(s=>function(e){const r=e.routeConfig?e.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:e,guards:r}:null}(s)).filter(s=>null!==s).map(s=>Pw(()=>ir(s.guards.map(l=>{const d=rd(l,s.node,t);let c;if(function(e){return e&&hs(e.canActivateChild)}(d))c=Co(d.canActivateChild(i,e));else{if(!hs(d))throw new Error("Invalid CanActivateChild guard");c=Co(d(i,e))}return c.pipe(nu())})).pipe(Ll())));return ir(a).pipe(Ll())}(e,n.path,t),function(e,r,t){const i=r.routeConfig?r.routeConfig.canActivate:null;return i&&0!==i.length?ir(i.map(a=>Pw(()=>{const s=rd(a,r,t);let o;if(function(e){return e&&hs(e.canActivate)}(s))o=Co(s.canActivate(r,e));else{if(!hs(s))throw new Error("Invalid CanActivate guard");o=Co(s(r,e))}return o.pipe(nu())}))).pipe(Ll()):ir(!0)}(e,n.route,t))),nu(n=>!0!==n,!0))}(i,a,e,r):ir(o)),Pr(o=>Object.assign(Object.assign({},t),{guardsResult:o})))})}(this.ngModule.injector,o=>this.triggerEvent(o)),mi(o=>{if(zs(o.guardsResult)){const d=im(`Redirecting to "${this.serializeUrl(o.guardsResult)}"`);throw d.url=o.guardsResult,d}const l=new H2(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.triggerEvent(l)}),ru(o=>!!o.guardsResult||(this.restoreHistory(o),this.cancelNavigationTransition(o,""),!1)),vm(o=>{if(o.guards.canActivateChecks.length)return ir(o).pipe(mi(l=>{const d=new z2(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(d)}),fs(l=>{let d=!1;return ir(l).pipe(function(e,r){return wn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:n}}=t;if(!n.length)return ir(t);let a=0;return Cn(n).pipe(Dl(s=>function(e,r,t,i){return function(e,r,t,i){const n=Object.keys(e);if(0===n.length)return ir({});const a={};return Cn(n).pipe(wn(s=>function(e,r,t,i){const n=rd(e,r,i);return Co(n.resolve?n.resolve(r,t):n(r,t))}(e[s],r,t,i).pipe(mi(o=>{a[s]=o}))),rm(1),wn(()=>Object.keys(a).length===n.length?ir(a):tu))}(e._resolve,e,r,i).pipe(Pr(a=>(e._resolvedData=a,e.data=Object.assign(Object.assign({},e.data),tE(e,t).resolve),null)))}(s.route,i,e,r)),mi(()=>a++),rm(1),wn(s=>a===n.length?ir(t):tu))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mi({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),mi(l=>{const d=new Q2(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(d)}))}),vm(o=>{const{targetSnapshot:l,id:d,extractedUrl:c,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=o;return this.hooks.afterPreactivation(l,{navigationId:d,appliedUrlTree:c,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),Pr(o=>{const l=function(e,r,t){const i=Kf(e,r._root,t?t._root:void 0);return new qw(i,r)}(this.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return Object.assign(Object.assign({},o),{targetRouterState:l})}),mi(o=>{this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects)}),((e,r,t)=>Pr(i=>(new PV(r,i.targetRouterState,i.currentRouterState,t).activate(e),i)))(this.rootContexts,this.routeReuseStrategy,o=>this.triggerEvent(o)),mi({next(){a=!0},complete(){a=!0}}),function(e){return r=>r.lift(new V2(e))}(()=>{var o;if(!a&&!s){const l=`Navigation ID ${n.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(n),this.cancelNavigationTransition(n,l)):this.cancelNavigationTransition(n,l)}(null===(o=this.currentNavigation)||void 0===o?void 0:o.id)===n.id&&(this.currentNavigation=null)}),js(o=>{if(s=!0,function(e){return e&&e[Vw]}(o)){const l=zs(o.url);l||(this.navigated=!0,this.restoreHistory(n,!0));const d=new Lw(n.id,this.serializeUrl(n.extractedUrl),o.message);i.next(d),l?setTimeout(()=>{const c=this.urlHandlingStrategy.merge(o.url,this.rawUrlTree),u={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||nd(n.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:n.resolve,reject:n.reject,promise:n.promise})},0):n.resolve(!1)}else{this.restoreHistory(n,!0);const l=new U2(n.id,this.serializeUrl(n.extractedUrl),o);i.next(l);try{n.resolve(this.errorHandler(o))}catch(d){n.reject(d)}}return tu}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:n,state:a,urlTree:s}=i,o={replaceUrl:!0};if(a){const l=Object.assign({},a);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}this.scheduleNavigation(s,n,a,o)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(t){var i;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,i){if(!t)return!0;const n=i.urlTree.toString()===t.urlTree.toString();return i.transitionId!==t.transitionId||!n||!("hashchange"===i.source&&"popstate"===t.source||"popstate"===i.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){dE(t),this.config=t.map(mm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:n,queryParams:a,fragment:s,queryParamsHandling:o,preserveFragment:l}=i,d=n||this.routerState.root,c=l?this.currentUrlTree.fragment:s;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=a||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,r,t,i,n){if(0===t.length)return dm(r.root,r.root,r,i,n);const a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new sE(!0,0,e);let r=0,t=!1;const i=e.reduce((n,a,s)=>{if("object"==typeof a&&null!=a){if(a.outlets){const o={};return Tn(a.outlets,(l,d)=>{o[d]="string"==typeof l?l.split("/"):l}),[...n,{outlets:o}]}if(a.segmentPath)return[...n,a.segmentPath]}return"string"!=typeof a?[...n,a]:0===s?(a.split("/").forEach((o,l)=>{0==l&&"."===o||(0==l&&""===o?t=!0:".."===o?r++:""!=o&&n.push(o))}),n):[...n,a]},[]);return new sE(t,r,i)}(t);if(a.toRoot())return dm(r.root,new gr([],{}),r,i,n);const s=function(e,r,t){if(e.isAbsolute)return new hm(r.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new hm(a,a===r.root,0)}const i=Jf(e.commands[0])?0:1;return function(e,r,t){let i=e,n=r,a=t;for(;a>n;){if(a-=n,i=i.parent,!i)throw new Error("Invalid number of '../'");n=i.segments.length}return new hm(i,!1,n-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,r,e),o=s.processChildren?Xf(s.segmentGroup,s.index,a.commands):aE(s.segmentGroup,s.index,a.commands);return dm(s.segmentGroup,o,r,i,n)}(d,this.currentUrlTree,t,u,null!=c?c:null)}navigateByUrl(t,i={skipLocationChange:!1}){const n=zs(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(e){for(let r=0;r<e.length;r++){const t=e[r];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${r}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(n){i=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return i}isActive(t,i){let n;if(n=!0===i?Object.assign({},AW):!1===i?Object.assign({},DW):i,zs(t))return Hw(this.currentUrlTree,t,n);const a=this.parseUrl(t);return Hw(this.currentUrlTree,a,n)}removeEmptyProps(t){return Object.keys(t).reduce((i,n)=>{const a=t[n];return null!=a&&(i[n]=a),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ml(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,n,a,s){var o,l;if(this.disposed)return Promise.resolve(!1);const d=this.getTransition(),c=nd(i)&&d&&!nd(d.source),f=(this.lastSuccessfulId===d.id||this.currentNavigation?d.rawUrl:d.urlAfterRedirects).toString()===t.toString();if(c&&f)return Promise.resolve(!0);let g,v,p;s?(g=s.resolve,v=s.reject,p=s.promise):p=new Promise((y,_)=>{g=y,v=_});const m=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),I=n&&n.\u0275routerPageId?n.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):I=0,this.setTransition({id:m,targetPageId:I,source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:g,reject:v,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(y=>Promise.reject(y))}setBrowserUrl(t,i){const n=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl?this.location.replaceState(n,"",a):this.location.go(n,"",a)}restoreHistory(t,i=!1){var n,a;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===s?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const n=new Lw(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return e.\u0275fac=function(t){return new(t||e)(Nt(Ec),Nt(om),Nt(su),Nt(Sf),Nt(Tr),Nt(gf),Nt(Bs),Nt(void 0))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function nd(e){return"imperative"!==e}let Cm=(()=>{class e{constructor(t,i,n,a,s){this.parentContexts=t,this.location=i,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new pn,this.deactivateEvents=new pn,this.name=a||fr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const s=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),o=this.parentContexts.getOrCreateContext(this.name).children,l=new xW(t,o,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Tt(su),Tt(Yi),Tt(Ls),function(e){return function(e,r){if("class"===r)return e.classes;if("style"===r)return e.styles;const t=e.attrs;if(t){const i=t.length;let n=0;for(;n<i;){const a=t[n];if(Y_(a))break;if(0===a)n+=2;else if("number"==typeof a)for(n++;n<i&&"string"==typeof t[n];)n++;else{if(a===r)return t[n+1];n+=2}}}return null}(fn(),e)}("name"),Tt(Mp))},e.\u0275dir=Jt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class xW{constructor(r,t,i){this.route=r,this.childContexts=t,this.parent=i}get(r,t){return r===ou?this.route:r===su?this.childContexts:this.parent.get(r,t)}}class DE{}class ME{preload(r,t){return ir(null)}}let PE=(()=>{class e{constructor(t,i,n,a,s){this.router=t,this.injector=a,this.preloadingStrategy=s,this.loader=new SE(i,n,d=>t.triggerEvent(new Nw(d)),d=>t.triggerEvent(new kw(d)))}setUpPreloading(){this.subscription=this.router.events.pipe(ru(t=>t instanceof Ml),Dl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(yo);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const n=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const s=a._loadedConfig;n.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?n.push(this.preloadConfig(t,a)):a.children&&n.push(this.processRoutes(t,a.children));return Cn(n).pipe(vu(),Pr(a=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ir(i._loadedConfig):this.loader.load(t.injector,i)).pipe(wn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Nt(qn),Nt(gf),Nt(Bs),Nt(Tr),Nt(DE))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})(),wm=(()=>{class e{constructor(t,i,n={}){this.router=t,this.viewportScroller=i,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ml&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Bw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Nt(qn),Nt(gw),Nt(void 0))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();const Qs=new dr("ROUTER_CONFIGURATION"),RE=new dr("ROUTER_FORROOT_GUARD"),FW=[Sf,{provide:om,useClass:Kw},{provide:qn,useFactory:function(e,r,t,i,n,a,s,o={},l,d){const c=new qn(null,e,r,t,i,n,a,Uw(s));return l&&(c.urlHandlingStrategy=l),d&&(c.routeReuseStrategy=d),function(e,r){e.errorHandler&&(r.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(r.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(r.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(r.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(r.urlUpdateStrategy=e.urlUpdateStrategy)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var h,f;null===(h=console.group)||void 0===h||h.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(f=console.groupEnd)||void 0===f||f.call(console)}),c},deps:[om,su,Sf,Tr,gf,Bs,ym,Qs,[class{},new Zn],[class{},new Zn]]},su,{provide:ou,useFactory:function(e){return e.routerState.root},deps:[qn]},{provide:gf,useClass:wL},PE,ME,class{preload(r,t){return t().pipe(js(()=>ir(null)))}},{provide:Qs,useValue:{enableTracing:!1}}];function LW(){return new dg("Router",qn)}let xE=(()=>{class e{constructor(t,i){}static forRoot(t,i){return{ngModule:e,providers:[FW,OE(t),{provide:RE,useFactory:BW,deps:[[qn,new Zn,new is]]},{provide:Qs,useValue:i||{}},{provide:eu,useFactory:kW,deps:[Us,[new _a(Mg),new Zn],Qs]},{provide:wm,useFactory:NW,deps:[qn,gw,Qs]},{provide:DE,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:ME},{provide:dg,multi:!0,useFactory:LW},[Em,{provide:_l,multi:!0,useFactory:jW,deps:[Em]},{provide:FE,useFactory:GW,deps:[Em]},{provide:c0,multi:!0,useExisting:FE}]]}}static forChild(t){return{ngModule:e,providers:[OE(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Nt(RE,8),Nt(qn,8))},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({}),e})();function NW(e,r,t){return t.scrollOffset&&r.setOffset(t.scrollOffset),new wm(e,r,t)}function kW(e,r,t={}){return t.useHash?new GN(e,r):new ew(e,r)}function BW(e){return"guarded"}function OE(e){return[{provide:BA,multi:!0,useValue:e},{provide:ym,multi:!0,useValue:e}]}let Em=(()=>{class e{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Do}appInitializer(){return this.injector.get(WN,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const n=new Promise(o=>i=o),a=this.injector.get(qn),s=this.injector.get(Qs);return"disabled"===s.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ir(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),n})}bootstrapListener(t){const i=this.injector.get(Qs),n=this.injector.get(PE),a=this.injector.get(wm),s=this.injector.get(qn),o=this.injector.get(Za);t===o.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&s.initialNavigation(),n.setUpPreloading(),a.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(Nt(Tr))},e.\u0275prov=lr({token:e,factory:e.\u0275fac}),e})();function jW(e){return e.appInitializer.bind(e)}function GW(e){return e.bootstrapListener.bind(e)}const FE=new dr("Router Initializer"),zW=[];let QW=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({imports:[[xE.forRoot(zW)],xE]}),e})();function LE(e,r,t,i,n,a,s){try{var o=e[a](s),l=o.value}catch(d){return void t(d)}o.done?r(l):Promise.resolve(l).then(i,n)}function NE(e){return function(){var r=this,t=arguments;return new Promise(function(i,n){var a=e.apply(r,t);function s(l){LE(a,i,n,s,o,"next",l)}function o(l){LE(a,i,n,s,o,"throw",l)}s(void 0)})}}!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):"object"==typeof exports?exports.dbr=r():e.dbr=r(e.worker_threads,e.https,e.http,e.fs,e.os)}("object"==typeof window?window:global,function(e,r,t,i,n){return function(a){var s={};function o(l){if(s[l])return s[l].exports;var d=s[l]={i:l,l:!1,exports:{}};return a[l].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=a,o.c=s,o.d=function(l,d,c){o.o(l,d)||Object.defineProperty(l,d,{enumerable:!0,get:c})},o.r=function(l){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,d){if(1&d&&(l=o(l)),8&d||4&d&&"object"==typeof l&&l&&l.__esModule)return l;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),2&d&&"string"!=typeof l)for(var u in l)o.d(c,u,function(h){return l[h]}.bind(null,u));return c},o.n=function(l){var d=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(d,"a",d),d},o.o=function(l,d){return Object.prototype.hasOwnProperty.call(l,d)},o.p="",o(o.s=5)}([function(a,s){a.exports=e},function(a,s){a.exports=r},function(a,s){a.exports=t},function(a,s){a.exports=i},function(a,s){a.exports=n},function(a,s,o){var l,d,c,u,V;o.r(s),o.d(s,"BarcodeReader",function(){return p}),o.d(s,"BarcodeScanner",function(){return y}),o.d(s,"EnumBarcodeColourMode",function(){return _}),o.d(s,"EnumBarcodeComplementMode",function(){return C}),o.d(s,"EnumBarcodeFormat",function(){return u}),o.d(s,"EnumBarcodeFormat_2",function(){return A}),o.d(s,"EnumBinarizationMode",function(){return M}),o.d(s,"EnumClarityCalculationMethod",function(){return E}),o.d(s,"EnumClarityFilterMode",function(){return R}),o.d(s,"EnumColourClusteringMode",function(){return x}),o.d(s,"EnumColourConversionMode",function(){return P}),o.d(s,"EnumConflictMode",function(){return F}),o.d(s,"EnumDeblurMode",function(){return k}),o.d(s,"EnumDeformationResistingMode",function(){return w}),o.d(s,"EnumDPMCodeReadingMode",function(){return S}),o.d(s,"EnumErrorCode",function(){return d}),o.d(s,"EnumGrayscaleTransformationMode",function(){return L}),o.d(s,"EnumImagePixelFormat",function(){return l}),o.d(s,"EnumImagePreprocessingMode",function(){return U}),o.d(s,"EnumIMResultDataType",function(){return c}),o.d(s,"EnumIntermediateResultSavingMode",function(){return Z}),o.d(s,"EnumIntermediateResultType",function(){return ne}),o.d(s,"EnumLocalizationMode",function(){return oe}),o.d(s,"EnumPDFReadingMode",function(){return ue}),o.d(s,"EnumQRCodeErrorCorrectionLevel",function(){return X}),o.d(s,"EnumRegionPredetectionMode",function(){return pe}),o.d(s,"EnumResultCoordinateType",function(){return B}),o.d(s,"EnumResultType",function(){return K}),o.d(s,"EnumScaleUpMode",function(){return G}),o.d(s,"EnumTerminatePhase",function(){return ee}),o.d(s,"EnumTextAssistedCorrectionMode",function(){return ie}),o.d(s,"EnumTextFilterMode",function(){return be}),o.d(s,"EnumTextResultOrderMode",function(){return Te}),o.d(s,"EnumTextureDetectionMode",function(){return Ge}),o.d(s,"EnumLicenseModule",function(){return je}),o.d(s,"EnumChargeWay",function(){return he}),(V=l||(l={}))[V.IPF_Binary=0]="IPF_Binary",V[V.IPF_BinaryInverted=1]="IPF_BinaryInverted",V[V.IPF_GrayScaled=2]="IPF_GrayScaled",V[V.IPF_NV21=3]="IPF_NV21",V[V.IPF_RGB_565=4]="IPF_RGB_565",V[V.IPF_RGB_555=5]="IPF_RGB_555",V[V.IPF_RGB_888=6]="IPF_RGB_888",V[V.IPF_ARGB_8888=7]="IPF_ARGB_8888",V[V.IPF_RGB_161616=8]="IPF_RGB_161616",V[V.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",V[V.IPF_ABGR_8888=10]="IPF_ABGR_8888",V[V.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",V[V.IPF_BGR_888=12]="IPF_BGR_888",function(V){V[V.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",V[V.DBR_SUCCESS=0]="DBR_SUCCESS",V[V.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",V[V.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",V[V.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",V[V.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",V[V.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",V[V.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",V[V.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",V[V.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",V[V.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",V[V.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",V[V.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",V[V.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",V[V.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",V[V.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",V[V.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",V[V.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",V[V.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",V[V.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",V[V.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",V[V.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",V[V.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",V[V.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",V[V.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",V[V.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",V[V.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",V[V.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",V[V.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",V[V.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",V[V.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",V[V.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",V[V.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",V[V.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",V[V.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",V[V.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",V[V.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",V[V.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",V[V.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",V[V.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",V[V.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",V[V.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",V[V.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",V[V.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",V[V.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",V[V.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",V[V.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",V[V.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",V[V.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",V[V.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",V[V.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",V[V.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",V[V.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",V[V.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",V[V.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",V[V.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",V[V.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",V[V.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",V[V.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",V[V.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",V[V.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",V[V.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(d||(d={})),function(V){V[V.IMRDT_IMAGE=1]="IMRDT_IMAGE",V[V.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",V[V.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",V[V.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",V[V.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",V[V.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(c||(c={})),function(V){V[V.BF_ALL=-31457281]="BF_ALL",V[V.BF_ONED=1050623]="BF_ONED",V[V.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",V[V.BF_CODE_39=1]="BF_CODE_39",V[V.BF_CODE_128=2]="BF_CODE_128",V[V.BF_CODE_93=4]="BF_CODE_93",V[V.BF_CODABAR=8]="BF_CODABAR",V[V.BF_ITF=16]="BF_ITF",V[V.BF_EAN_13=32]="BF_EAN_13",V[V.BF_EAN_8=64]="BF_EAN_8",V[V.BF_UPC_A=128]="BF_UPC_A",V[V.BF_UPC_E=256]="BF_UPC_E",V[V.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",V[V.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",V[V.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",V[V.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",V[V.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",V[V.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",V[V.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",V[V.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",V[V.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",V[V.BF_PATCHCODE=262144]="BF_PATCHCODE",V[V.BF_PDF417=33554432]="BF_PDF417",V[V.BF_QR_CODE=67108864]="BF_QR_CODE",V[V.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",V[V.BF_AZTEC=268435456]="BF_AZTEC",V[V.BF_MAXICODE=536870912]="BF_MAXICODE",V[V.BF_MICRO_QR=1073741824]="BF_MICRO_QR",V[V.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",V[V.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",V[V.BF_MSI_CODE=1048576]="BF_MSI_CODE",V[V.BF_NULL=0]="BF_NULL"}(u||(u={}));var h=function(V,Q,me,H){return new(me||(me=Promise))(function(j,q){function re(we){try{le(H.next(we))}catch(Ae){q(Ae)}}function de(we){try{le(H.throw(we))}catch(Ae){q(Ae)}}function le(we){var Ae;we.done?j(we.value):(Ae=we.value,Ae instanceof me?Ae:new me(function(Se){Se(Ae)})).then(re,de)}le((H=H.apply(V,Q||[])).next())})};const g="undefined"==typeof self,v=g?{}:self;class p{constructor(){this._canvasMaxWH="iPhone"==p.browserInfo.OS||"Android"==p.browserInfo.OS?2048:4096,this._instanceID=void 0,this.bSaveOriCanvas=!1,this.oriCanvas=null,this.maxVideoCvsLength=3,this.videoCvses=[],this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.bFilterRegionInJs=!0,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._bUseWebgl=!0,this.decodeRecords=[],this.bDestroyed=!1,this._setWarnnedEx=new Set,this._lastErrorCode=0,this._lastErrorString=""}static get version(){return this._version}static get productKeys(){return this._productKeys}static set productKeys(Q){if("unload"!=this._loadWasmStatus)throw new Error("`productKeys` is not allowed to change after loadWasm is called.");p._productKeys=Q}static get handshakeCode(){return this._productKeys}static set handshakeCode(Q){if("unload"!=this._loadWasmStatus)throw new Error("`handshakeCode` is not allowed to change after loadWasm is called.");p._productKeys=Q}static get organizationID(){return this._organizationID}static set organizationID(Q){if("unload"!=this._loadWasmStatus)throw new Error("`organizationID` is not allowed to change after loadWasm is called.");"number"==typeof Q&&(Q=Q.toString()),p._organizationID=Q}static set sessionPassword(Q){if("unload"!=this._loadWasmStatus)throw new Error("`sessionPassword` is not allowed to change after loadWasm is called.");p._sessionPassword=Q}static get sessionPassword(){return this._sessionPassword}static detectEnvironment(){return h(this,void 0,void 0,function*(){let Q={wasm:"undefined"!=typeof WebAssembly&&("undefined"==typeof navigator||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:"undefined"!=typeof Worker,getUserMedia:!("undefined"==typeof navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(Q.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(me=>{me.stop()}),Q.camera=!0}catch(me){}return Q})}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(Q){if("unload"!=this._loadWasmStatus)throw new Error("`engineResourcePath` is not allowed to change after loadWasm is called.");if(null==Q&&(Q="./"),g)p._engineResourcePath=Q;else{let me=document.createElement("a");me.href=Q,p._engineResourcePath=me.href}this._engineResourcePath.endsWith("/")||(p._engineResourcePath+="/")}static get licenseServer(){return this._licenseServer}static set licenseServer(Q){if("unload"!=this._loadWasmStatus)throw new Error("`licenseServer` is not allowed to change after loadWasm is called.");if(null==Q)p._licenseServer=[];else{Q instanceof Array||(Q=[Q]);for(let me=0;me<Q.length;++me){if(!g){let H=document.createElement("a");H.href=Q[me],Q[me]=H.href}Q[me].endsWith("/")||(Q[me]+="/")}p._licenseServer=Q}}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(Q){if("unload"!=this._loadWasmStatus)throw new Error("`deviceFriendlyName` is not allowed to change after loadWasm is called.");p._deviceFriendlyName=Q||""}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(Q){if("unload"!=this._loadWasmStatus)throw new Error("`_bUseFullFeature` is not allowed to change after loadWasm is called.");this.__bUseFullFeature=Q}set region(Q){this._region=Q}get region(){return this._region}static isLoaded(){return"loadSuccess"==this._loadWasmStatus}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static loadWasm(){return h(this,void 0,void 0,function*(){let Q,me=this.productKeys,H=(0==me.length||me.startsWith("P")||me.startsWith("L"))&&0==this.organizationID.length,j=H||me.length>=8&&!me.startsWith("t")&&!me.startsWith("f")&&!me.startsWith("P")&&!me.startsWith("L")||0==me.length&&0!=this.organizationID.length;if(j&&(v.crypto||(Q="Please upgrade your browser to support handshake code."),v.crypto.subtle||(Q="Require https to use handshake code in this browser.")),Q){if(!H)throw new Error(Q);H=!1,j=!1,console.warn(Q),this._lastErrorCode=d.DMERR_FAILED_TO_REACH_LTS,this._lastErrorString=Q}return H&&(me="",console.warn("Automatically apply for a public trial license.")),yield new Promise((q,re)=>h(this,void 0,void 0,function*(){switch(this._loadWasmStatus){case"unload":{p._loadWasmStatus="loading";let de=this.engineResourcePath+this._workerName;this.engineResourcePath.startsWith(location.origin)||(de=yield fetch(de).then(le=>le.blob()).then(le=>URL.createObjectURL(le))),p._dbrWorker=new Worker(de),this._dbrWorker.onerror=le=>{p._loadWasmStatus="loadFail";let we=new Error(le.message);this._loadWasmErr=we;for(let Ae of this._loadWasmCallbackArr)Ae(we);this._loadWasmCallbackArr=[]},this._dbrWorker.onmessage=le=>h(this,void 0,void 0,function*(){let we=le.data?le.data:le;switch(we.type){case"log":this._onLog&&this._onLog(we.message);break;case"load":{we.message&&(we.message=we.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let Ae=!1;if(H&&(Ae=!0),we.success){p._loadWasmStatus="loadSuccess",p._version=we.version+"(JS "+this._jsVersion+"."+this._jsEditVersion+")",this._onLog&&this._onLog("load dbr worker success");for(let Se of this._loadWasmCallbackArr)Se();this._loadWasmCallbackArr=[],this._dbrWorker.onerror=null,we.message&&console.warn(we.message)}else{let Se=new Error(we.message);Se.stack=we.stack+"\n"+Se.stack,p._loadWasmStatus="loadFail",this._loadWasmErr=Se;for(let ye of this._loadWasmCallbackArr)ye(Se);this._loadWasmCallbackArr=[],Ae||111==we.ltsErrorCode&&-1!=we.message.toLowerCase().indexOf("trial license")&&(Ae=!0)}Ae&&this.showDialog(we.success?"warn":"error",we.message);break}case"task":{let Ae=we.id,Se=we.body;try{this._taskCallbackMap.get(Ae)(Se),this._taskCallbackMap.delete(Ae)}catch(ye){throw this._taskCallbackMap.delete(Ae),ye}break}default:this._onLog&&this._onLog(le)}}),this._dbrWorker.postMessage({type:"loadWasm",bd:this._bWasmDebug,engineResourcePath:this.engineResourcePath,version:this._jsVersion,brtk:j,bptk:H,pk:me,og:this.organizationID,dm:location.origin.startsWith("http")?location.origin:"https://localhost",bUseFullFeature:this._bUseFullFeature,browserInfo:this.browserInfo,deviceFriendlyName:this.deviceFriendlyName,ls:this.licenseServer,sp:this._sessionPassword,lm:this._limitModules,cw:this._chargeWay})}case"loading":this._loadWasmCallbackArr.push(de=>{de?re(de):q()});break;case"loadSuccess":q();break;case"loadFail":re(this._loadWasmErr)}}))})}static showDialog(Q,me){return h(this,void 0,void 0,function*(){if(!this._bNeverShowDialog)try{let H=yield fetch(p.engineResourcePath+"lts.license.dialog.html");if(!H.ok)throw Error("Get license dialog fail. Network Error: "+H.statusText);let j=yield H.text();if(!j.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let q=document.createElement("div");q.innerHTML=j;let re=[];for(let Ve=0;Ve<q.childElementCount;++Ve){let ke=q.children[Ve];ke instanceof HTMLStyleElement&&(re.push(ke),document.head.append(ke))}let de=1==q.childElementCount?q.children[0]:q;de.remove();let le,we,Ae,Se,ye=[de],Fe=de.children;for(let Ve of Fe)ye.push(Ve);for(let Ve=0;Ve<ye.length;++Ve)for(let ke of ye[Ve].children)ye.push(ke);for(let Ve of ye)if(!le&&Ve.classList.contains("lts-license-icon-close"))le=Ve,Ve.addEventListener("click",()=>{de.remove();for(let ke of re)ke.remove()});else if(!we&&Ve.classList.contains("lts-license-icon-error"))we=Ve,"error"!=Q&&Ve.remove();else if(!Ae&&Ve.classList.contains("lts-license-icon-warn"))Ae=Ve,"warn"!=Q&&Ve.remove();else if(!Se&&Ve.classList.contains("lts-license-msg-content")){Se=Ve;let ke=me;for(;ke;){let $e=ke.indexOf("["),Le=ke.indexOf("]",$e),fe=ke.indexOf("(",Le),De=ke.indexOf(")",fe);if(-1==$e||-1==Le||-1==fe||-1==De){Ve.appendChild(new Text(ke));break}$e>0&&Ve.appendChild(new Text(ke.substring(0,$e)));let Oe=document.createElement("a"),Ne=ke.substring($e+1,Le);Oe.innerText=Ne;let Pe=ke.substring(fe+1,De);Oe.setAttribute("href",Pe),Oe.setAttribute("target","_blank"),Ve.appendChild(Oe),ke=ke.substring(De+1)}}document.body.appendChild(de)}catch(H){p._onLog&&p._onLog(H.message||H)}})}static createInstanceInWorker(Q=!1){return h(this,void 0,void 0,function*(){return yield this.loadWasm(),yield new Promise((me,H)=>{let j=p._nextTaskID++;this._taskCallbackMap.set(j,q=>{if(q.success)return me(q.instanceID);{let re=new Error(q.message);return re.stack=q.stack+"\n"+re.stack,H(re)}}),this._dbrWorker.postMessage({type:"createInstance",id:j,productKeys:"",bScanner:Q})})})}static createInstance(){return h(this,void 0,void 0,function*(){let Q=new p;return Q._instanceID=yield this.createInstanceInWorker(),Q})}decode(Q){return h(this,void 0,void 0,function*(){p._onLog&&p._onLog("decode(source: any)"),p._onLog&&(this._timeStartDecode=Date.now());{let me={};return!this.region||this.region instanceof Array||(me.region=JSON.parse(JSON.stringify(this.region))),Q instanceof Blob?yield this._decode_Blob(Q,me):Q instanceof ArrayBuffer?yield this._decode_ArrayBuffer(Q,me):Q instanceof Uint8Array||Q instanceof Uint8ClampedArray?yield this._decode_Uint8Array(Q,me):Q instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&Q instanceof ImageBitmap?yield this._decode_Image(Q,me):Q instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&Q instanceof OffscreenCanvas?yield this._decode_Canvas(Q,me):Q instanceof HTMLVideoElement?yield this._decode_Video(Q,me):"string"==typeof Q||Q instanceof String?"data:image/"==Q.substring(0,11)?yield this._decode_Base64(Q,me):yield this._decode_Url(Q,me):yield Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}})}decodeBase64String(Q){return h(this,void 0,void 0,function*(){let me={};return!this.region||this.region instanceof Array||(me.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(Q,me)})}decodeUrl(Q){return h(this,void 0,void 0,function*(){let me={};return!this.region||this.region instanceof Array||(me.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(Q,me)})}_decodeBuffer_Uint8Array(Q,me,H,j,q,re){return h(this,void 0,void 0,function*(){return yield new Promise((de,le)=>{let we=p._nextTaskID++;p._taskCallbackMap.set(we,Ae=>{if(Ae.success){let Se,ye=p._onLog?Date.now():0;this.bufferShared&&!this.bufferShared.length&&(this.bufferShared=Ae.buffer);try{Se=this._handleRetJsonString(Ae.decodeReturn)}catch(Fe){return le(Fe)}if(p._onLog){let Fe=Date.now();p._onLog("DBR time get result: "+ye),p._onLog("Handle image cost: "+(this._timeEnterInnerDBR-this._timeStartDecode)),p._onLog("DBR worker decode image cost: "+(ye-this._timeEnterInnerDBR)),p._onLog("DBR worker handle results: "+(Fe-ye)),p._onLog("Total decode image cost: "+(Fe-this._timeStartDecode))}return de(Se)}{let Se=new Error(Ae.message);return Se.stack=Ae.stack+"\n"+Se.stack,le(Se)}}),p._onLog&&(this._timeEnterInnerDBR=Date.now()),p._onLog&&p._onLog("Send buffer to worker:"+Date.now()),p._dbrWorker.postMessage({type:"decodeBuffer",id:we,instanceID:this._instanceID,body:{buffer:Q,width:me,height:H,stride:j,format:q,config:re}},[Q.buffer])})})}_decodeBuffer_Blob(Q,me,H,j,q,re){return h(this,void 0,void 0,function*(){return p._onLog&&p._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)"),yield new Promise((de,le)=>{let we=new FileReader;we.readAsArrayBuffer(Q),we.onload=()=>{de(we.result)},we.onerror=()=>{le(we.error)}}).then(de=>this._decodeBuffer_Uint8Array(new Uint8Array(de),me,H,j,q,re))})}decodeBuffer(Q,me,H,j,q,re){return h(this,void 0,void 0,function*(){let de;return p._onLog&&p._onLog("decodeBuffer(buffer,width,height,stride,format)"),p._onLog&&(this._timeStartDecode=Date.now()),Q instanceof Uint8Array||Q instanceof Uint8ClampedArray?de=yield this._decodeBuffer_Uint8Array(Q,me,H,j,q,re):Q instanceof ArrayBuffer?de=yield this._decodeBuffer_Uint8Array(new Uint8Array(Q),me,H,j,q,re):Q instanceof Blob&&(de=yield this._decodeBuffer_Blob(Q,me,H,j,q,re)),de})}_decodeFileInMemory_Uint8Array(Q){return h(this,void 0,void 0,function*(){return yield new Promise((me,H)=>{let j=p._nextTaskID++;p._taskCallbackMap.set(j,q=>{if(q.success){let re;try{re=this._handleRetJsonString(q.decodeReturn)}catch(de){return H(de)}return me(re)}{let re=new Error(q.message);return re.stack=q.stack+"\n"+re.stack,H(re)}}),p._dbrWorker.postMessage({type:"decodeFileInMemory",id:j,instanceID:this._instanceID,body:{bytes:Q}})})})}getRuntimeSettings(){return h(this,void 0,void 0,function*(){return yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success){let q=JSON.parse(j.results);return null!=this.userDefinedRegion&&(q.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),Q(q)}{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"getRuntimeSettings",id:H,instanceID:this._instanceID})})})}updateRuntimeSettings(Q){return h(this,void 0,void 0,function*(){let me;if("string"==typeof Q||"object"==typeof Q&&Q instanceof String)if("speed"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,me.region=H.region,me.deblurLevel=3,me.expectedBarcodesCount=0,me.localizationModes=[2,0,0,0,0,0,0,0]}else if("balance"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,me.region=H.region,me.deblurLevel=5,me.expectedBarcodesCount=512,me.localizationModes=[2,16,0,0,0,0,0,0]}else if("coverage"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,me.region=H.region}else me=JSON.parse(Q);else{if("object"!=typeof Q)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");if(me=JSON.parse(JSON.stringify(Q)),me.region instanceof Array){let H=me.region;[H.regionLeft,H.regionTop,H.regionLeft,H.regionBottom,H.regionMeasuredByPercentage].some(j=>void 0!==j)&&(me.region={regionLeft:H.regionLeft||0,regionTop:H.regionTop||0,regionRight:H.regionRight||0,regionBottom:H.regionBottom||0,regionMeasuredByPercentage:H.regionMeasuredByPercentage||0})}}if(!p._bUseFullFeature){if(0!=(me.barcodeFormatIds&~(u.BF_ONED|u.BF_QR_CODE|u.BF_PDF417|u.BF_DATAMATRIX))||0!=me.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=me.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let H=me.region;if(H instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(H)),this.region=(H.regionLeft||H.regionTop||H.regionRight||H.regionBottom||H.regionMeasuredByPercentage)&&(H.regionLeft||H.regionTop||100!=H.regionRight||100!=H.regionBottom||!H.regionMeasuredByPercentage)?H:null,me.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return yield new Promise((H,j)=>{let q=p._nextTaskID++;p._taskCallbackMap.set(q,re=>{if(re.success){try{this._handleRetJsonString(re.updateReturn)}catch(de){j(de)}return H()}{let de=new Error(re.message);return de.stack=re.stack+"\n"+de.stack,j(de)}}),p._dbrWorker.postMessage({type:"updateRuntimeSettings",id:q,instanceID:this._instanceID,body:{settings:JSON.stringify(me)}})})})}resetRuntimeSettings(){return h(this,void 0,void 0,function*(){return this.userDefinedRegion=null,this.region=null,yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success)return Q();{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"resetRuntimeSettings",id:H,instanceID:this._instanceID})})})}outputSettingsToString(){return h(this,void 0,void 0,function*(){if(!p._bUseFullFeature)throw Error("outputSettingsToString() is not supported in the compact version. Please try the full-featured version.");return yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success)return Q(j.results);{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"outputSettingsToString",id:H,instanceID:this._instanceID})})})}initRuntimeSettingsWithString(Q){return h(this,void 0,void 0,function*(){if(!p._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if("string"==typeof Q||"object"==typeof Q&&Q instanceof String)Q=Q;else{if("object"!=typeof Q)throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");Q=JSON.stringify(Q)}return yield new Promise((me,H)=>{let j=p._nextTaskID++;p._taskCallbackMap.set(j,q=>{if(q.success){try{this._handleRetJsonString(q.initReturn)}catch(re){H(re)}return me()}{let re=new Error(q.message);return re.stack=q.stack+"\n"+re.stack,H(re)}}),p._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:j,instanceID:this._instanceID,body:{settings:Q}})})})}_decode_Blob(Q,me){return h(this,void 0,void 0,function*(){p._onLog&&p._onLog("_decode_Blob(blob: Blob)");let H=null,j=null;if("undefined"!=typeof createImageBitmap)try{H=yield createImageBitmap(Q)}catch(re){}var re;H||(j=yield(re=Q,new Promise((de,le)=>{let we=URL.createObjectURL(re),Ae=new Image;Ae.dbrObjUrl=we,Ae.src=we,Ae.onload=()=>{de(Ae)},Ae.onerror=Se=>{le(new Error("Can't convert blob to image : "+(Se instanceof Event?Se.type:Se)))}})));let q=yield this._decode_Image(H||j,me);return H&&H.close(),q})}_decode_ArrayBuffer(Q,me){return h(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([Q]),me)})}_decode_Uint8Array(Q,me){return h(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([Q]),me)})}_decode_Image(Q,me){return h(this,void 0,void 0,function*(){p._onLog&&p._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),me=me||{};let H,j,q=Q instanceof HTMLImageElement?Q.naturalWidth:Q.width,re=Q instanceof HTMLImageElement?Q.naturalHeight:Q.height,de=Math.max(q,re);if(de>this._canvasMaxWH){let De=this._canvasMaxWH/de;H=Math.round(q*De),j=Math.round(re*De)}else H=q,j=re;let le,we=0,Ae=0,Se=q,ye=re,Fe=q,Ve=re,ke=me.region;if(ke){let De,Oe,Ne,Pe;ke.regionMeasuredByPercentage?(De=ke.regionLeft*H/100,Oe=ke.regionTop*j/100,Ne=ke.regionRight*H/100,Pe=ke.regionBottom*j/100):(De=ke.regionLeft,Oe=ke.regionTop,Ne=ke.regionRight,Pe=ke.regionBottom),Fe=Ne-De,Se=Math.round(Fe/H*q),Ve=Pe-Oe,ye=Math.round(Ve/j*re),we=Math.round(De/H*q),Ae=Math.round(Oe/j*re)}!this.bSaveOriCanvas&&v.OffscreenCanvas?le=new OffscreenCanvas(Fe,Ve):(le=document.createElement("canvas"),le.width=Fe,le.height=Ve);let $e,Le=le.getContext("2d");0==we&&0==Ae&&q==Se&&re==ye&&q==Fe&&re==Ve?Le.drawImage(Q,0,0):Le.drawImage(Q,we,Ae,Se,ye,0,0,Fe,Ve),Q.dbrObjUrl&&URL.revokeObjectURL(Q.dbrObjUrl),ke?($e=JSON.parse(JSON.stringify(me)),delete $e.region):$e=me;let fe=yield this._decode_Canvas(le,$e);return p.fixResultLocationWhenFilterRegionInJs(ke,fe,we,Ae,Se,ye,Fe,Ve),fe})}_decode_Canvas(Q,me){return h(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),Q.crossOrigin&&"anonymous"!=Q.crossOrigin)throw"cors";(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=Q);let H=(Q.dbrCtx2d||Q.getContext("2d")).getImageData(0,0,Q.width,Q.height).data;return yield this._decodeBuffer_Uint8Array(H,Q.width,Q.height,4*Q.width,l.IPF_ABGR_8888,me)})}_decode_Video(Q,me){return h(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Video(video)"),!(Q instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(Q.crossOrigin&&"anonymous"!=Q.crossOrigin)throw"cors";me=me||{};let H,j,q=Q.videoWidth,re=Q.videoHeight,de=Math.max(q,re);if(de>this._canvasMaxWH){let $e=this._canvasMaxWH/de;H=Math.round(q*$e),j=Math.round(re*$e)}else H=q,j=re;let le=0,we=0,Ae=q,Se=re,ye=q,Fe=re,Ve=me.region;if(Ve){let $e,Le,fe,De;Ve.regionMeasuredByPercentage?($e=Ve.regionLeft*H/100,Le=Ve.regionTop*j/100,fe=Ve.regionRight*H/100,De=Ve.regionBottom*j/100):($e=Ve.regionLeft,Le=Ve.regionTop,fe=Ve.regionRight,De=Ve.regionBottom),ye=fe-$e,Ae=Math.round(ye/H*q),Fe=De-Le,Se=Math.round(Fe/j*re),le=Math.round($e/H*q),we=Math.round(Le/j*re)}let ke=0==le&&0==we&&q==Ae&&re==Se&&q==ye&&re==Fe;if(!this.bSaveOriCanvas&&this._bUseWebgl&&ke){this.videoGlCvs||(this.videoGlCvs=v.OffscreenCanvas?new OffscreenCanvas(ye,Fe):document.createElement("canvas"));const $e=this.videoGlCvs;$e.width==ye&&$e.height==Fe||($e.height=Fe,$e.width=ye,this.videoGl&&this.videoGl.viewport(0,0,ye,Fe));const Le=this.videoGl||$e.getContext("webgl",{alpha:!1,antialias:!1})||$e.getContext("experimental-webgl",{alpha:!1,antialias:!1});if(!this.videoGl){this.videoGl=Le;let ze=Le.createShader(Le.VERTEX_SHADER);Le.shaderSource(ze,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    gl_Position = a_position;\n    v_uv = a_uv;\n}\n"),Le.compileShader(ze),Le.getShaderParameter(ze,Le.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+Le.getShaderInfoLog(ze));let ge=Le.createShader(Le.FRAGMENT_SHADER);Le.shaderSource(ge,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec4 sample =  texture2D(u_texture, v_uv);\n    float grey = 0.299 * sample.r + 0.587 * sample.g + 0.114 * sample.b;\n    gl_FragColor = vec4(grey, 0.0, 0.0, 1.0);\n}\n"),Le.compileShader(ge),Le.getShaderParameter(ge,Le.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+Le.getShaderInfoLog(ge));let Ee=Le.createProgram();Le.attachShader(Ee,ze),Le.attachShader(Ee,ge),Le.linkProgram(Ee),Le.getProgramParameter(Ee,Le.LINK_STATUS)||console.error("Unable to initialize the shader program: "+Le.getProgramInfoLog(Ee)),Le.useProgram(Ee),Le.bindBuffer(Le.ARRAY_BUFFER,Le.createBuffer()),Le.bufferData(Le.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),Le.STATIC_DRAW);let Ue=Le.getAttribLocation(Ee,"a_position");Le.enableVertexAttribArray(Ue),Le.vertexAttribPointer(Ue,2,Le.FLOAT,!1,16,0);let Be=Le.getAttribLocation(Ee,"a_uv");Le.enableVertexAttribArray(Be),Le.vertexAttribPointer(Be,2,Le.FLOAT,!1,16,8),Le.activeTexture(Le.TEXTURE0),Le.bindTexture(Le.TEXTURE_2D,Le.createTexture()),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.NEAREST),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.NEAREST),Le.uniform1i(Le.getUniformLocation(Ee,"u_texture"),0)}(!this.glImgData||this.glImgData.length<ye*Fe*4)&&(this.glImgData=new Uint8Array(ye*Fe*4)),Le.texImage2D(Le.TEXTURE_2D,0,Le.RGBA,Le.RGBA,Le.UNSIGNED_BYTE,Q);let fe=p._onLog?Date.now():0;Le.drawArrays(Le.TRIANGLE_STRIP,0,4),p._onLog&&p._onLog("Grey cost: "+(Date.now()-fe));let De=this.glImgData;Le.readPixels(0,0,Le.drawingBufferWidth,Le.drawingBufferHeight,Le.RGBA,Le.UNSIGNED_BYTE,De);let Oe=p._onLog?Date.now():0,Ne=ye*Fe;(!this.bufferShared||this.bufferShared.length<Ne)&&(this.bufferShared=new Uint8Array(Ne));let Pe=this.bufferShared;for(let ze=0;ze<Ne;++ze)Pe[ze]=De[4*ze];return p._onLog&&p._onLog("Extract grey cost: "+(Date.now()-Oe)),yield this._decodeBuffer_Uint8Array(Pe,ye,Fe,ye,l.IPF_GrayScaled)}{let $e=null;if(this.bSaveOriCanvas)$e=document.createElement("canvas"),$e.width=ye,$e.height=Fe,$e.dbrCtx2d=$e.getContext("2d");else{for(let Oe of this.videoCvses)if(Oe.width==ye&&Oe.height==Fe){$e=Oe;break}$e||(v.OffscreenCanvas?$e=new OffscreenCanvas(ye,Fe):($e=document.createElement("canvas"),$e.width=ye,$e.height=Fe),$e.dbrCtx2d=$e.getContext("2d"),this.videoCvses.length>=this.maxVideoCvsLength&&(this.videoCvses=this.videoCvses.slice(1)),this.videoCvses.push($e))}const Le=$e.dbrCtx2d;let fe;ke?Le.drawImage(Q,0,0):Le.drawImage(Q,le,we,Ae,Se,0,0,ye,Fe),Ve?(fe=JSON.parse(JSON.stringify(me)),delete fe.region):fe=me;let De=yield this._decode_Canvas($e,fe);return p.fixResultLocationWhenFilterRegionInJs(Ve,De,le,we,Ae,Se,ye,Fe),De}})}_decode_Base64(Q,me){return h(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Base64(base64Str)"),"string"!=typeof Q&&"object"!=typeof Q)return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'String'.");"data:image/"==Q.substring(0,11)&&(Q=Q.substring(Q.indexOf(",")+1));{let H=atob(Q),j=H.length,q=new Uint8Array(j);for(;j--;)q[j]=H.charCodeAt(j);return yield this._decode_Blob(new Blob([q]),me)}})}_decode_Url(Q,me){return h(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Url(url)"),"string"!=typeof Q&&"object"!=typeof Q)throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'String'.");{let H=yield new Promise((j,q)=>{let re=new XMLHttpRequest;re.open("GET",Q,!0),re.responseType="blob",re.send(),re.onloadend=()=>h(this,void 0,void 0,function*(){j(re.response)}),re.onerror=()=>{q(new Error("Network Error: "+re.statusText))}});return yield this._decode_Blob(H,me)}})}_decode_FilePath(Q,me){return h(this,void 0,void 0,function*(){throw p._onLog&&p._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")})}static fixResultLocationWhenFilterRegionInJs(Q,me,H,j,q,re,de,le){if(Q&&me.length>0)for(let we of me){let Ae=we.localizationResult;2==Ae.resultCoordinateType&&(Ae.x1*=.01*de,Ae.x2*=.01*de,Ae.x3*=.01*de,Ae.x4*=.01*de,Ae.y1*=.01*le,Ae.y2*=.01*le,Ae.y3*=.01*le,Ae.y4*=.01*le),Ae.x1+=H,Ae.x2+=H,Ae.x3+=H,Ae.x4+=H,Ae.y1+=j,Ae.y2+=j,Ae.y3+=j,Ae.y4+=j,2==Ae.resultCoordinateType&&(Ae.x1*=100/q,Ae.x2*=100/q,Ae.x3*=100/q,Ae.x4*=100/q,Ae.y1*=100/re,Ae.y2*=100/re,Ae.y3*=100/re,Ae.y4*=100/re)}}static BarcodeReaderException(Q,me){let H,j=d.DBR_UNKNOWN;return"number"==typeof Q?(j=Q,H=new Error(me)):H=new Error(Q),H.code=j,H}_handleRetJsonString(Q){let me=d;if(Q.textResults){for(let H=0;H<Q.textResults.length;H++){let j=Q.textResults[H];try{let q=j.barcodeText,re="";for(let de=0;de<q.length;de++)re+=String.fromCharCode(q[de]);try{j.barcodeText=decodeURIComponent(escape(re))}catch(de){j.barcodeText=re}}catch(q){j.barcodeText=""}if(null!=j.exception){this._setWarnnedEx.has(j.exception)||(this._setWarnnedEx.add(j.exception),console.warn(j.exception));let q={};j.exception.split(";").forEach(re=>{let de=re.indexOf(":");q[re.substring(0,de)]=re.substring(de+1)}),j.exception=q}}return Q.decodeRecords&&(this.decodeRecords=Q.decodeRecords),this._lastErrorCode=Q.exception,this._lastErrorString=Q.description,Q.textResults}if(Q.exception==me.DBR_SUCCESS)return Q.data;throw p.BarcodeReaderException(Q.exception,Q.description)}setModeArgument(Q,me,H,j){return h(this,void 0,void 0,function*(){return yield new Promise((q,re)=>{let de=p._nextTaskID++;p._taskCallbackMap.set(de,le=>{if(le.success){try{this._handleRetJsonString(le.setReturn)}catch(we){return re(we)}return q()}{let we=new Error(le.message);return we.stack=le.stack+"\n"+we.stack,re(we)}}),p._dbrWorker.postMessage({type:"setModeArgument",id:de,instanceID:this._instanceID,body:{modeName:Q,index:me,argumentName:H,argumentValue:j}})})})}getModeArgument(Q,me,H){return h(this,void 0,void 0,function*(){return yield new Promise((j,q)=>{let re=p._nextTaskID++;p._taskCallbackMap.set(re,de=>{if(de.success){let le;try{le=this._handleRetJsonString(de.getReturn)}catch(we){return q(we)}return j(le)}{let le=new Error(de.message);return le.stack=de.stack+"\n"+le.stack,q(le)}}),p._dbrWorker.postMessage({type:"getModeArgument",id:re,instanceID:this._instanceID,body:{modeName:Q,index:me,argumentName:H}})})})}getIntermediateResults(){return h(this,void 0,void 0,function*(){return yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success)return Q(j.results);{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"getIntermediateResults",id:H,instanceID:this._instanceID})})})}getIntermediateCanvas(){return h(this,void 0,void 0,function*(){let Q=yield this.getIntermediateResults(),me=[];for(let H of Q)if(H.dataType==c.IMRDT_IMAGE)for(let j of H.results){const q=j.bytes;let re;switch(p._onLog&&p._onLog(" "+q.length+" "+q.byteLength+" "+j.width+" "+j.height+" "+j.stride+" "+j.format),j.format){case l.IPF_ABGR_8888:re=new Uint8ClampedArray(q);break;case l.IPF_RGB_888:{const we=q.length/3;re=new Uint8ClampedArray(4*we);for(let Ae=0;Ae<we;++Ae)re[4*Ae]=q[3*Ae+2],re[4*Ae+1]=q[3*Ae+1],re[4*Ae+2]=q[3*Ae],re[4*Ae+3]=255;break}case l.IPF_GrayScaled:{const we=q.length;re=new Uint8ClampedArray(4*we);for(let Ae=0;Ae<we;Ae++)re[4*Ae]=re[4*Ae+1]=re[4*Ae+2]=q[Ae],re[4*Ae+3]=255;break}case l.IPF_Binary:case l.IPF_BinaryInverted:{j.width=8*j.stride,j.height=q.length/j.stride;const we=q.length;re=new Uint8ClampedArray(8*we*4);for(let Ae=0;Ae<we;Ae++){let Se=q[Ae];for(let ye=0;ye<8;++ye)re[4*(8*Ae+ye)]=re[4*(8*Ae+ye)+1]=re[4*(8*Ae+ye)+2]=(128&Se)/128*255,re[4*(8*Ae+ye)+3]=255,Se<<=1}break}default:console.warn("unknow intermediate image",j)}if(!re)continue;let de=new ImageData(re,j.width,j.height),le=document.createElement("canvas");le.width=j.width,le.height=j.height,le.getContext("2d").putImageData(de,0,0),me.push(le)}return me})}destroy(){return p._onLog&&p._onLog("destroy()"),this.bDestroyed=!0,new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success)return Q();{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"destroy",id:H,instanceID:this._instanceID})})}}p.bNode=false,p._jsVersion="8.2.5",p._jsEditVersion="20210426",p._version="loading...(JS "+p._jsVersion+"."+p._jsEditVersion+")",p._productKeys=g||!document.currentScript?"":document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||"",p._organizationID=g||!document.currentScript?"":document.currentScript.getAttribute("data-organizationID")||"",p.browserInfo=function(){if(!g){var V={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS"},searchString:function(Q){for(var me=0;me<Q.length;me++){var H=Q[me].string,j=Q[me].prop;if(this.versionSearchString=Q[me].versionSearch||Q[me].identity,H){if(-1!=H.indexOf(Q[me].subString))return Q[me].identity}else if(j)return Q[me].identity}},searchVersion:function(Q){var me=Q.indexOf(this.versionSearchString);if(-1!=me)return parseFloat(Q.substring(me+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return V.init(),{browser:V.browser,version:V.version,OS:V.OS}}if(g)return{browser:"ssr",version:0,OS:"ssr"};{const Q=o(4);return{browser:"node",version:process.version.substring(1),OS:Q&&Q.platform?Q.platform()+Q.release():"Unknown"}}}(),p._workerName="dbr-"+p._jsVersion+".worker.js",p._bUseIndexDB=!0,p._engineResourcePath=(()=>{if(!g&&document.currentScript){let V=document.currentScript.src,Q=V.indexOf("?");if(-1!=Q)V=V.substring(0,Q);else{let me=V.indexOf("#");-1!=me&&(V=V.substring(0,me))}return V.substring(0,V.lastIndexOf("/")+1)}return"./"})(),p._licenseServer=[],p._deviceFriendlyName="",p._isShowRelDecodeTimeInResults=!1,p._bWasmDebug=!1,p._bSendSmallRecordsForDebug=!1,p._bNeverShowDialog=!1,p.__bUseFullFeature=false,p._nextTaskID=0,p._taskCallbackMap=new Map,p._loadWasmStatus="unload",p._loadWasmCallbackArr=[],p._lastErrorCode=0,p._lastErrorString="",p._loadWasmErr=null;var m=function(V,Q,me,H){return new(me||(me=Promise))(function(j,q){function re(we){try{le(H.next(we))}catch(Ae){q(Ae)}}function de(we){try{le(H.throw(we))}catch(Ae){q(Ae)}}function le(we){var Ae;we.done?j(we.value):(Ae=we.value,Ae instanceof me?Ae:new me(function(Se){Se(Ae)})).then(re,de)}le((H=H.apply(V,Q||[])).next())})};const I=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name&&"undefined"==typeof HTMLCanvasElement);class y extends p{constructor(){super(),this.styleEls=[],this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._singleFrameModeIpt=(()=>{let Q=document.createElement("input");return Q.setAttribute("type","file"),Q.setAttribute("accept","image/*"),Q.setAttribute("capture",""),Q.addEventListener("change",()=>m(this,void 0,void 0,function*(){let me=Q.files[0];Q.value="";let H=yield this.decode(me);for(let j of H)delete j.bUnduplicated;if(this._drawRegionsults(H),this.onFrameRead&&this._isOpen&&!this._bPauseScan&&this.onFrameRead(H),this.onUnduplicatedRead&&this._isOpen&&!this._bPauseScan)for(let j of H)this.onUnduplicatedRead(j.barcodeText,j);yield this.clearMapDecodeRecord()})),Q})(),this._clickIptSingleFrameMode=()=>{this._singleFrameModeIpt.click()},this.intervalTime=0,this._isOpen=!1,this._bPauseScan=!1,this._lastDeviceId=void 0,this._intervalDetectVideoPause=1e3,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{"visible"===document.visibilityState?this._vc_bPlayingVideoBeforeHide&&("Firefox"==p.browserInfo.browser?this.play():this._video.play(),this._vc_bPlayingVideoBeforeHide=!1):this._video&&!this._video.paused&&(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause())},this._video=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._bgLoading=null,this._bgCamera=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._soundOnSuccessfullRead=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.barcodeFillStyle="rgba(254,180,32,0.3)",this.barcodeStrokeStyle="rgba(254,180,32,0.9)",this.barcodeLineWidth=1,this.beingLazyDrawRegionsults=!1,this._indexVideoRegion=-1,this._onCameraSelChange=()=>{this.play(this._selCam.value).then(()=>{this._isOpen||this.stop()}).catch(Q=>{alert("Play video failed: "+(Q.message||Q))})},this._onResolutionSelChange=()=>{let Q,me;if(this._selRsl&&-1!=this._selRsl.selectedIndex){let H=this._selRsl.options[this._selRsl.selectedIndex];Q=H.getAttribute("data-width"),me=H.getAttribute("data-height")}this.play(void 0,Q,me).then(()=>{this._isOpen||this.stop()}).catch(H=>{alert("Play video failed: "+(H.message||H))})},this._onCloseBtnClick=()=>{this.hide()}}static get defaultUIElementURL(){return this._defaultUIElementURL?this._defaultUIElementURL:p.engineResourcePath+"dbr.scanner.html"}static set defaultUIElementURL(Q){this._defaultUIElementURL=Q}getUIElement(){return this.UIElement}setUIElement(Q){return m(this,void 0,void 0,function*(){if("string"==typeof Q||Q instanceof String){if(!Q.trim().startsWith("<")){let H=yield fetch(Q);if(!H.ok)throw Error("Network Error: "+H.statusText);Q=yield H.text()}if(!Q.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let me=document.createElement("div");me.innerHTML=Q;for(let H=0;H<me.childElementCount;++H){let j=me.children[H];j instanceof HTMLStyleElement&&(this.styleEls.push(j),document.head.append(j))}(Q=1==me.childElementCount?me.children[0]:me).remove()}this.UIElement=Q})}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(Q){if(this._isOpen)throw new Error("`singleFrameMode` is not allowed to change when scanner is open.");this._singleFrameMode=Q,this._singleFrameMode&&(()=>{m(this,void 0,void 0,function*(){let me=yield this.getScanSettings();me.oneDTrustFrameCount=1,yield this.updateScanSettings(me)})})()}_assertOpen(){if(!this._isOpen)throw Error("The scanner is not open.")}get soundOnSuccessfullRead(){return this._soundOnSuccessfullRead}set soundOnSuccessfullRead(Q){this._soundOnSuccessfullRead=Q instanceof HTMLAudioElement?Q:new Audio(Q)}set region(Q){this._region=Q,this.singleFrameMode||(this.beingLazyDrawRegionsults=!0,setTimeout(()=>{this.beingLazyDrawRegionsults&&this._drawRegionsults()},500))}get region(){return this._region}static createInstance(Q){return m(this,void 0,void 0,function*(){if(I)throw new Error("`BarcodeScanner` is not supported in Node.js.");let me=new y;me._instanceID=yield y.createInstanceInWorker(!0),("string"==typeof Q||Q instanceof String)&&(Q=JSON.parse(Q));for(let H in Q)me[H]=Q[H];return me.UIElement||(yield me.setUIElement(this.defaultUIElementURL)),me.singleFrameMode||(yield me.updateRuntimeSettings("single")),document.addEventListener("visibilitychange",me._ev_documentHideEvent),me})}decode(Q){return super.decode(Q)}decodeBase64String(Q){return super.decodeBase64String(Q)}decodeUrl(Q){return super.decodeUrl(Q)}decodeBuffer(Q,me,H,j,q,re){return super.decodeBuffer(Q,me,H,j,q,re)}decodeCurrentFrame(){return m(this,void 0,void 0,function*(){this._assertOpen();let Q={};if(this.region)if(this.region instanceof Array){++this._indexVideoRegion>=this.region.length&&(this._indexVideoRegion=0);let me=this.region[this._indexVideoRegion];me&&(Q.region=JSON.parse(JSON.stringify(me)))}else Q.region=JSON.parse(JSON.stringify(this.region));return this._decode_Video(this._video,Q)})}clearMapDecodeRecord(){return m(this,void 0,void 0,function*(){return yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success)return Q();{let q=new Error(j.message);return q.stack=j.stack+"\n"+q.stack,me(q)}}),p._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:H,instanceID:this._instanceID})})})}static isRegionSinglePreset(Q){return JSON.stringify(Q)==JSON.stringify(this.singlePresetRegion)}static isRegionNormalPreset(Q){return 0==Q.regionLeft&&0==Q.regionTop&&0==Q.regionRight&&0==Q.regionBottom&&0==Q.regionMeasuredByPercentage}updateRuntimeSettings(Q){return m(this,void 0,void 0,function*(){let me;if("string"==typeof Q||"object"==typeof Q&&Q instanceof String)if("speed"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,y.isRegionSinglePreset(H.region)||(me.region=H.region)}else if("balance"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,y.isRegionSinglePreset(H.region)||(me.region=H.region),me.deblurLevel=3,me.expectedBarcodesCount=512,me.localizationModes=[2,16,0,0,0,0,0,0],me.timeout=1e5}else if("coverage"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,y.isRegionSinglePreset(H.region)||(me.region=H.region),me.deblurLevel=5,me.expectedBarcodesCount=512,me.scaleDownThreshold=1e5,me.localizationModes=[2,16,4,8,0,0,0,0],me.timeout=1e5}else if("single"==Q){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),me=yield this.getRuntimeSettings(),me.barcodeFormatIds=H.barcodeFormatIds,me.barcodeFormatIds_2=H.barcodeFormatIds_2,me.region=y.isRegionNormalPreset(H.region)?JSON.parse(JSON.stringify(y.singlePresetRegion)):H.region,me.expectedBarcodesCount=1,me.localizationModes=[16,2,0,0,0,0,0,0],me.barcodeZoneMinDistanceToImageBorders=0}else me=JSON.parse(Q);else{if("object"!=typeof Q)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");if(me=JSON.parse(JSON.stringify(Q)),me.region instanceof Array){let H=Q.region;[H.regionLeft,H.regionTop,H.regionLeft,H.regionBottom,H.regionMeasuredByPercentage].some(j=>void 0!==j)&&(me.region={regionLeft:H.regionLeft||0,regionTop:H.regionTop||0,regionRight:H.regionRight||0,regionBottom:H.regionBottom||0,regionMeasuredByPercentage:H.regionMeasuredByPercentage||0})}}if(!p._bUseFullFeature){if(0!=(me.barcodeFormatIds&~(u.BF_ONED|u.BF_QR_CODE|u.BF_PDF417|u.BF_DATAMATRIX))||0!=me.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=me.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let H=me.region;if(this.userDefinedRegion=this.bFilterRegionInJs?JSON.parse(JSON.stringify(H)):null,H instanceof Array)if(H.length){for(let j=0;j<H.length;++j){let q=H[j];q&&((q.regionLeft||q.regionTop||q.regionRight||q.regionBottom||q.regionMeasuredByPercentage)&&(q.regionLeft||q.regionTop||100!=q.regionRight||100!=q.regionBottom||!q.regionMeasuredByPercentage)||(H[j]=null))}this.region=H}else this.region=null;else this.region=(H.regionLeft||H.regionTop||H.regionRight||H.regionBottom||H.regionMeasuredByPercentage)&&(H.regionLeft||H.regionTop||100!=H.regionRight||100!=H.regionBottom||!H.regionMeasuredByPercentage)?H:null;this.bFilterRegionInJs&&(me.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}yield new Promise((H,j)=>{let q=p._nextTaskID++;p._taskCallbackMap.set(q,re=>{if(re.success){try{this._handleRetJsonString(re.updateReturn)}catch(de){j(de)}return H()}{let de=new Error(re.message);return de.stack=re.stack+"\n"+de.stack,j(de)}}),p._dbrWorker.postMessage({type:"updateRuntimeSettings",id:q,instanceID:this._instanceID,body:{settings:JSON.stringify(me)}})}),"single"==Q&&(yield this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","0"),yield this.setModeArgument("LocalizationModes",0,"ScanDirection","2"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeX","71"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeY","71"))})}_bindUI(){let Q=[this.UIElement],me=this.UIElement.children;for(let j of me)Q.push(j);for(let j=0;j<Q.length;++j)for(let q of Q[j].children)Q.push(q);let H=null;for(let j of Q)!this._video&&j.classList.contains("dbrScanner-video")?(this._video=j,this._video.setAttribute("playsinline","true")):!this._cvsDrawArea&&j.classList.contains("dbrScanner-cvs-drawarea")?this._cvsDrawArea=j:!this._divScanArea&&j.classList.contains("dbrScanner-cvs-scanarea")?this._divScanArea=j:!this._divScanLight&&j.classList.contains("dbrScanner-scanlight")?this._divScanLight=j:!this._bgLoading&&j.classList.contains("dbrScanner-bg-loading")?this._bgLoading=j:!this._bgCamera&&j.classList.contains("dbrScanner-bg-camera")?this._bgCamera=j:!this._selCam&&j.classList.contains("dbrScanner-sel-camera")?this._selCam=j:!this._selRsl&&j.classList.contains("dbrScanner-sel-resolution")?(this._selRsl=j,this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dbrScanner-opt-gotResolution" value="got"></option>','<option data-width="3840" data-height="2160">ask 3840 x 2160</option>','<option data-width="2560" data-height="1440">ask 2560 x 1440</option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1600" data-height="1200">ask 1600 x 1200</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="800" data-height="600">ask 800 x 600</option>','<option data-width="640" data-height="480">ask 640 x 480</option>','<option data-width="640" data-height="360">ask 640 x 360</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&j.classList.contains("dbrScanner-opt-gotResolution")?this._optGotRsl=j:!this._btnClose&&j.classList.contains("dbrScanner-btn-close")?this._btnClose=j:!this._video&&j.classList.contains("dbrScanner-existingVideo")?(this._video=j,this._video.setAttribute("playsinline","true"),this.singleFrameMode=!1):!H&&j.tagName&&"video"==j.tagName.toLowerCase()&&(H=j);if(!this._video&&H&&(this._video=H),this.singleFrameMode?(this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")),this._cvsDrawArea&&(this._cvsDrawArea.addEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="pointer",this._cvsDrawArea.setAttribute("title","Take a photo")),this._divScanArea&&(this._divScanArea.addEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="pointer",this._divScanArea.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="")):this._bgLoading&&(this._bgLoading.style.display=""),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this._video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dbrScanner-video`.");this._isOpen=!0}_unbindUI(){this._clearRegionsults(),this.singleFrameMode?(this._video&&(this._video.removeEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="",this._video.removeAttribute("title")),this._cvsDrawArea&&(this._cvsDrawArea.removeEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="",this._cvsDrawArea.removeAttribute("title")),this._divScanArea&&(this._divScanArea.removeEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="",this._divScanArea.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this._video=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._isOpen=!1}_renderSelCameraInfo(){let Q,me;if(this._selCam&&(Q=this._selCam.value,this._selCam.innerHTML=""),this._selCam){for(let j of this._allCameras){let q=document.createElement("option");q.value=j.deviceId,q.innerText=j.label,this._selCam.append(q),Q==j.deviceId&&(me=q)}let H=this._selCam.childNodes;if(!me&&this._currentCamera&&H.length)for(let j of H)if(this._currentCamera.label==j.innerText){me=j;break}me&&(this._selCam.value=me.value)}}getAllCameras(){return m(this,void 0,void 0,function*(){const Q=yield navigator.mediaDevices.enumerateDevices(),me=[];let H=0;for(let j=0;j<Q.length;j++){let q,re=Q[j];"videoinput"==re.kind&&(q={},q.deviceId=re.deviceId,q.label=!re.label||/^camera\s[0-9]+$/.test(re.label)?"camera "+H++:re.label,me.push(q))}return this._allCameras=me,Promise.resolve(me)})}getCurrentCamera(){return m(this,void 0,void 0,function*(){let Q;if(this._video)for(let me of this._video.srcObject.getVideoTracks()){if(Q)break;for(let H of this._allCameras)if(me.label==H.label){Q=H,this._lastDeviceId=H.deviceId;break}}return this._currentCamera=Q,Q})}setCurrentCamera(Q){return m(this,void 0,void 0,function*(){return yield this.play(Q.deviceId||Q)})}getResolution(){return this._isOpen?[this._video.videoWidth,this._video.videoHeight]:null}setResolution(Q,me){return m(this,void 0,void 0,function*(){let H,j;return this._isOpen?(Q instanceof Array?(H=Q[0],j=Q[1]):(H=Q,j=me),yield this.play(null,H,j)):yield Promise.reject(new Error("The camera is not open."))})}getScanSettings(){return m(this,void 0,void 0,function*(){return yield new Promise((Q,me)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,j=>{if(j.success){let q=j.results;return q.intervalTime=this.intervalTime,Q(q)}{let q=new Error(j.message);return q.stack+="\n"+j.stack,me(q)}}),p._dbrWorker.postMessage({type:"getScanSettings",id:H,instanceID:this._instanceID})})})}updateScanSettings(Q){return m(this,void 0,void 0,function*(){return this.intervalTime=Q.intervalTime,yield new Promise((me,H)=>{let j=p._nextTaskID++;p._taskCallbackMap.set(j,q=>{if(q.success)return me();{let re=new Error(q.message);return re.stack+="\n"+q.stack,H(re)}}),y._dbrWorker.postMessage({type:"updateScanSettings",id:j,instanceID:this._instanceID,body:{settings:Q}})})})}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(Q){return this.videoSettings=JSON.parse(JSON.stringify(Q)),this._lastDeviceId=null,this._isOpen?this.play():Promise.resolve()}isOpen(){return this._isOpen}_show(){this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),"none"==this.UIElement.style.display&&(this.UIElement.style.display="")}stop(){this._video&&this._video.srcObject&&(p._onLog&&p._onLog("======stop video========"),this._video.srcObject.getTracks().forEach(Q=>{Q.stop()}),this._video.srcObject=null,this._videoTrack=null),this._video&&this._video.classList.contains("dbrScanner-existingVideo")&&(p._onLog&&p._onLog("======stop existing video========"),this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._divScanLight&&(this._divScanLight.style.display="none")}pause(){this._video&&this._video.pause(),this._divScanLight&&(this._divScanLight.style.display="none")}play(Q,me,H){return m(this,void 0,void 0,function*(){if(this._assertOpen(),this.singleFrameMode)return this._clickIptSingleFrameMode(),{width:0,height:0};if(this._video&&this._video.classList.contains("dbrScanner-existingVideo")){yield this._video.play();let Ae={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(Ae)},0),Ae}if(this._video&&this._video.srcObject&&(this.stop(),yield new Promise(Ae=>setTimeout(Ae,500))),p._onLog&&p._onLog("======before video========"),"Android"==p.browserInfo.OS&&(yield this.getAllCameras()),this.bDestroyed)throw new Error("The BarcodeScanner instance has been destroyed.");const j=this.videoSettings;"boolean"==typeof j.video&&(j.video={});const q="iPhone"==p.browserInfo.OS;let re,de;if(q?me>=1280||H>=1280?j.video.width=1280:me>=640||H>=640?j.video.width=640:(me<640||H<640)&&(j.video.width=320):(me&&(j.video.width={ideal:me}),H&&(j.video.height={ideal:H})),Q)delete j.video.facingMode,j.video.deviceId={exact:Q},this._lastDeviceId=Q;else if(!j.video.deviceId)if(this._lastDeviceId)delete j.video.facingMode,j.video.deviceId={ideal:this._lastDeviceId};else if(j.video.facingMode){let Ae=j.video.facingMode;if(Ae instanceof Array&&Ae.length&&(Ae=Ae[0]),Ae=Ae.exact||Ae.ideal||Ae,"environment"===Ae){for(let Se of this._allCameras){let ye=Se.label.toLowerCase();if(ye&&-1!=ye.indexOf("facing back")&&/camera[0-9]?\s0,/.test(ye)){delete j.video.facingMode,j.video.deviceId={ideal:Se.deviceId};break}}re=!!j.video.facingMode}}p._onLog&&p._onLog("======try getUserMedia========"),p._onLog&&p._onLog("ask "+JSON.stringify(j.video.width)+"x"+JSON.stringify(j.video.height));try{p._onLog&&p._onLog(j),de=yield navigator.mediaDevices.getUserMedia(j)}catch(Ae){p._onLog&&p._onLog(Ae),p._onLog&&p._onLog("======try getUserMedia again========"),q?(delete j.video.width,delete j.video.height):re?(delete j.video.facingMode,this._allCameras.length&&(j.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):j.video=!0,p._onLog&&p._onLog(j),de=yield navigator.mediaDevices.getUserMedia(j)}if(this.bDestroyed)throw de.getTracks().forEach(Ae=>{Ae.stop()}),new Error("The BarcodeScanner instance has been destroyed.");{const Ae=de.getVideoTracks();Ae.length&&(this._videoTrack=Ae[0])}this._video.srcObject=de,p._onLog&&p._onLog("======play video========");try{yield Promise.race([this._video.play(),new Promise((Ae,Se)=>{setTimeout(()=>Se(new Error("Failed to play video. Timeout.")),4e3)})])}catch(Ae){p._onLog&&p._onLog("======play video again========"),yield new Promise(Se=>{setTimeout(Se,1e3)}),yield Promise.race([this._video.play(),new Promise((Se,ye)=>{setTimeout(()=>ye(new Error("Failed to play video. Timeout.")),4e3)})])}p._onLog&&p._onLog("======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused"),this._drawRegionsults();const le="got "+this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=le,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),p._onLog&&p._onLog(le),"Android"!==p.browserInfo.OS&&(yield this.getAllCameras()),yield this.getCurrentCamera(),this._renderSelCameraInfo();let we={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(we)},0),we})}pauseScan(){this._assertOpen(),this._bPauseScan=!0,this._divScanLight&&(this._divScanLight.style.display="none")}resumeScan(){this._assertOpen(),this._bPauseScan=!1}getCapabilities(){return this._assertOpen(),this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){return this._assertOpen(),this._videoTrack.getSettings()}getConstraints(){return this._assertOpen(),this._videoTrack.getConstraints()}applyConstraints(Q){return m(this,void 0,void 0,function*(){if(this._assertOpen(),!this._videoTrack.applyConstraints)throw Error("Not supported.");return yield this._videoTrack.applyConstraints(Q)})}turnOnTorch(){return m(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")})}turnOffTorch(){return m(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")})}setColorTemperature(Q){return m(this,void 0,void 0,function*(){this._assertOpen();let me=this.getCapabilities().colorTemperature;if(!me)throw Error("Not supported.");return Q<me.min?Q=me.min:Q>me.max&&(Q=me.max),yield this._videoTrack.applyConstraints({advanced:[{colorTemperature:Q}]})})}setExposureCompensation(Q){return m(this,void 0,void 0,function*(){this._assertOpen();let me=this.getCapabilities().exposureCompensation;if(!me)throw Error("Not supported.");return Q<me.min?Q=me.min:Q>me.max&&(Q=me.max),yield this._videoTrack.applyConstraints({advanced:[{exposureCompensation:Q}]})})}setZoom(Q){return m(this,void 0,void 0,function*(){this._assertOpen();let me=this.getCapabilities().zoom;if(!me)throw Error("Not supported.");return Q<me.min?Q=me.min:Q>me.max&&(Q=me.max),yield this._videoTrack.applyConstraints({advanced:[{zoom:Q}]})})}setFrameRate(Q){return m(this,void 0,void 0,function*(){this._assertOpen();let me=this.getCapabilities().frameRate;if(!me)throw Error("Not supported.");return Q<me.min?Q=me.min:Q>me.max&&(Q=me.max),yield this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:Q})})}_cloneDecodeResults(Q){if(Q instanceof Array){let me=[];for(let H of Q)me.push(this._cloneDecodeResults(H));return me}return JSON.parse(JSON.stringify(Q,(H,j)=>"oriVideoCanvas"==H||"searchRegionCanvas"==H?void 0:j))}_loopReadVideo(){return m(this,void 0,void 0,function*(){if(!this.bDestroyed){if(!this._isOpen)return void(yield this.clearMapDecodeRecord());if(this._video.paused||this._bPauseScan)return p._onLog&&p._onLog("Video or scan is paused. Ask in 1s."),yield this.clearMapDecodeRecord(),void setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause);this._divScanLight&&"none"==this._divScanLight.style.display&&(this._divScanLight.style.display=""),p._onLog&&p._onLog("======= once read ======="),(new Date).getTime(),p._onLog&&(this._timeStartDecode=Date.now()),this.decodeCurrentFrame().then(Q=>{if(p._onLog&&p._onLog(Q),this._isOpen&&!this._video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&Q.length){let me=!1;if(!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead)me=!0;else if("unduplicated"===this.bPlaySoundOnSuccessfulRead)for(let H of Q)if(H.bUnduplicated){me=!0;break}me&&(this.soundOnSuccessfullRead.currentTime=0,this.soundOnSuccessfullRead.play().catch(H=>{console.warn("Autoplay not allowed. User interaction required: "+(H.message||H))}))}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&Q.length){let me=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead)me=!0;else if("unduplicated"===this.bVibrateOnSuccessfulRead)for(let H of Q)if(H.bUnduplicated){me=!0;break}if(me)try{navigator.vibrate(this.vibrateDuration)}catch(H){console.warn("Vibration not allowed. User interaction required: "+(H.message||H))}}if(this.onFrameRead){let me=this._cloneDecodeResults(Q);for(let H of me)delete H.bUnduplicated;this.onFrameRead(me)}if(this.onUnduplicatedRead)for(let me of Q)me.bUnduplicated&&this.onUnduplicatedRead(me.barcodeText,this._cloneDecodeResults(me));this._drawRegionsults(Q)}setTimeout(()=>{this._loopReadVideo()},this.intervalTime)}).catch(Q=>{p._onLog&&p._onLog(Q.message||Q),setTimeout(()=>{this._loopReadVideo()},Math.max(this.intervalTime,1e3)),"platform error"==Q.message||console.warn(Q.message)})}})}_drawRegionsults(Q){let me,H,j;if(this.beingLazyDrawRegionsults=!1,this.singleFrameMode){if(!this.oriCanvas)return;me="contain",H=this.oriCanvas.width,j=this.oriCanvas.height}else{if(!this._video)return;me=this._video.style.objectFit||"contain",H=this._video.videoWidth,j=this._video.videoHeight}let q=this.region;if(q&&(!q.regionLeft&&!q.regionRight&&!q.regionTop&&!q.regionBottom&&!q.regionMeasuredByPercentage||q instanceof Array?q=null:q.regionMeasuredByPercentage?q=q.regionLeft||q.regionRight||100!==q.regionTop||100!==q.regionBottom?{regionLeft:Math.round(q.regionLeft/100*H),regionTop:Math.round(q.regionTop/100*j),regionRight:Math.round(q.regionRight/100*H),regionBottom:Math.round(q.regionBottom/100*j)}:null:(q=JSON.parse(JSON.stringify(q)),delete q.regionMeasuredByPercentage)),this._cvsDrawArea){this._cvsDrawArea.style.objectFit=me;let re=this._cvsDrawArea;re.width=H,re.height=j;let de=re.getContext("2d");if(q){de.fillStyle=this.regionMaskFillStyle,de.fillRect(0,0,re.width,re.height),de.globalCompositeOperation="destination-out",de.fillStyle="#000";let le=Math.round(this.regionMaskLineWidth/2);de.fillRect(q.regionLeft-le,q.regionTop-le,q.regionRight-q.regionLeft+2*le,q.regionBottom-q.regionTop+2*le),de.globalCompositeOperation="source-over",de.strokeStyle=this.regionMaskStrokeStyle,de.lineWidth=this.regionMaskLineWidth,de.rect(q.regionLeft,q.regionTop,q.regionRight-q.regionLeft,q.regionBottom-q.regionTop),de.stroke()}if(Q){de.globalCompositeOperation="destination-over",de.fillStyle=this.barcodeFillStyle,de.strokeStyle=this.barcodeStrokeStyle,de.lineWidth=this.barcodeLineWidth,Q=Q||[];for(let le of Q){let we=le.localizationResult;de.beginPath(),de.moveTo(we.x1,we.y1),de.lineTo(we.x2,we.y2),de.lineTo(we.x3,we.y3),de.lineTo(we.x4,we.y4),de.fill(),de.beginPath(),de.moveTo(we.x1,we.y1),de.lineTo(we.x2,we.y2),de.lineTo(we.x3,we.y3),de.lineTo(we.x4,we.y4),de.closePath(),de.stroke()}}this.singleFrameMode&&(de.globalCompositeOperation="destination-over",de.drawImage(this.oriCanvas,0,0))}if(this._divScanArea){let re=this._video.offsetWidth,de=this._video.offsetHeight,le=1;re/de<H/j?(le=re/H,this._divScanArea.style.left="0",this._divScanArea.style.top=Math.round((de-j*le)/2)+"px"):(le=de/j,this._divScanArea.style.left=Math.round((re-H*le)/2)+"px",this._divScanArea.style.top="0");let we=q?Math.round(q.regionLeft*le):0,Ae=q?Math.round(q.regionTop*le):0,Se=Math.round(q?q.regionRight*le-we:H*le),ye=Math.round(q?q.regionBottom*le-Ae:j*le);this._divScanArea.style.marginLeft=we+"px",this._divScanArea.style.marginTop=Ae+"px",this._divScanArea.style.width=Se+"px",this._divScanArea.style.height=ye+"px"}}_clearRegionsults(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)}open(){return m(this,void 0,void 0,function*(){this._bindUI();let Q=yield this.play();return this.singleFrameMode||this._loopReadVideo(),Q})}openVideo(){return m(this,void 0,void 0,function*(){this._bindUI();let Q=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||this._loopReadVideo(),Q})}close(){this.stop(),this._unbindUI(),this._bPauseScan=!1}show(){return m(this,void 0,void 0,function*(){this._bindUI(),this._show();let Q=yield this.play();return this.singleFrameMode||this._loopReadVideo(),Q})}showVideo(){return m(this,void 0,void 0,function*(){this._bindUI(),this._show();let Q=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||this._loopReadVideo(),Q})}hide(){this.stop(),this._unbindUI(),this._bPauseScan=!1,this.UIElement.style.display="none"}destroy(){const Q=Object.create(null,{destroy:{get:()=>super.destroy}});return m(this,void 0,void 0,function*(){document.removeEventListener("visibilitychange",this._ev_documentHideEvent),this.close();for(let me of this.styleEls)me.remove();this.styleEls.splice(0,this.styleEls.length),this.bDestroyed||(yield Q.destroy.call(this))})}}var _,C,A,M,E,R,x,P,F,k,w,S,L,U,Z,ne,oe,ue,X,pe,B,K,G,ee,ie,be,Te,Ge,je,he;y.singlePresetRegion=[null,{regionLeft:0,regionTop:30,regionRight:100,regionBottom:70,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1}],function(V){V[V.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",V[V.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",V[V.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",V[V.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",V[V.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",V[V.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",V[V.BICM_SKIP=0]="BICM_SKIP",V[V.BICM_REV=2147483648]="BICM_REV"}(_||(_={})),function(V){V[V.BCM_AUTO=1]="BCM_AUTO",V[V.BCM_GENERAL=2]="BCM_GENERAL",V[V.BCM_SKIP=0]="BCM_SKIP",V[V.BCM_REV=2147483648]="BCM_REV"}(C||(C={})),function(V){V[V.BF2_NULL=0]="BF2_NULL",V[V.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",V[V.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",V[V.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",V[V.BF2_POSTNET=2097152]="BF2_POSTNET",V[V.BF2_PLANET=4194304]="BF2_PLANET",V[V.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",V[V.BF2_RM4SCC=16777216]="BF2_RM4SCC",V[V.BF2_DOTCODE=2]="BF2_DOTCODE"}(A||(A={})),function(V){V[V.BM_AUTO=1]="BM_AUTO",V[V.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",V[V.BM_SKIP=0]="BM_SKIP",V[V.BM_THRESHOLD=4]="BM_THRESHOLD",V[V.BM_REV=2147483648]="BM_REV"}(M||(M={})),function(V){V[V.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(E||(E={})),function(V){V[V.CFM_GENERAL=1]="CFM_GENERAL"}(R||(R={})),function(V){V[V.CCM_AUTO=1]="CCM_AUTO",V[V.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",V[V.CCM_SKIP=0]="CCM_SKIP",V[V.CCM_REV=2147483648]="CCM_REV"}(x||(x={})),function(V){V[V.CICM_GENERAL=1]="CICM_GENERAL",V[V.CICM_SKIP=0]="CICM_SKIP",V[V.CICM_REV=2147483648]="CICM_REV"}(P||(P={})),function(V){V[V.CM_IGNORE=1]="CM_IGNORE",V[V.CM_OVERWRITE=2]="CM_OVERWRITE"}(F||(F={})),function(V){V[V.DM_SKIP=0]="DM_SKIP",V[V.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",V[V.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",V[V.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",V[V.DM_SMOOTHING=8]="DM_SMOOTHING",V[V.DM_MORPHING=16]="DM_MORPHING",V[V.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",V[V.DM_SHARPENING=64]="DM_SHARPENING"}(k||(k={})),function(V){V[V.DRM_AUTO=1]="DRM_AUTO",V[V.DRM_GENERAL=2]="DRM_GENERAL",V[V.DRM_SKIP=0]="DRM_SKIP",V[V.DRM_REV=2147483648]="DRM_REV"}(w||(w={})),function(V){V[V.DPMCRM_AUTO=1]="DPMCRM_AUTO",V[V.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",V[V.DPMCRM_SKIP=0]="DPMCRM_SKIP",V[V.DPMCRM_REV=2147483648]="DPMCRM_REV"}(S||(S={})),function(V){V[V.GTM_INVERTED=1]="GTM_INVERTED",V[V.GTM_ORIGINAL=2]="GTM_ORIGINAL",V[V.GTM_SKIP=0]="GTM_SKIP",V[V.GTM_REV=2147483648]="GTM_REV"}(L||(L={})),function(V){V[V.IPM_AUTO=1]="IPM_AUTO",V[V.IPM_GENERAL=2]="IPM_GENERAL",V[V.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",V[V.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",V[V.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",V[V.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",V[V.IPM_SKIP=0]="IPM_SKIP",V[V.IPM_REV=2147483648]="IPM_REV"}(U||(U={})),function(V){V[V.IRSM_MEMORY=1]="IRSM_MEMORY",V[V.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",V[V.IRSM_BOTH=4]="IRSM_BOTH"}(Z||(Z={})),function(V){V[V.IRT_NO_RESULT=0]="IRT_NO_RESULT",V[V.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",V[V.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",V[V.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",V[V.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",V[V.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",V[V.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",V[V.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",V[V.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",V[V.IRT_CONTOUR=256]="IRT_CONTOUR",V[V.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",V[V.IRT_FORM=1024]="IRT_FORM",V[V.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",V[V.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",V[V.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(ne||(ne={})),function(V){V[V.LM_SKIP=0]="LM_SKIP",V[V.LM_AUTO=1]="LM_AUTO",V[V.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",V[V.LM_LINES=8]="LM_LINES",V[V.LM_STATISTICS=4]="LM_STATISTICS",V[V.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",V[V.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",V[V.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",V[V.LM_CENTRE=128]="LM_CENTRE",V[V.LM_REV=2147483648]="LM_REV"}(oe||(oe={})),function(V){V[V.PDFRM_RASTER=1]="PDFRM_RASTER",V[V.PDFRM_AUTO=2]="PDFRM_AUTO",V[V.PDFRM_VECTOR=4]="PDFRM_VECTOR",V[V.PDFRM_REV=2147483648]="PDFRM_REV"}(ue||(ue={})),function(V){V[V.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",V[V.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",V[V.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",V[V.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(X||(X={})),function(V){V[V.RPM_AUTO=1]="RPM_AUTO",V[V.RPM_GENERAL=2]="RPM_GENERAL",V[V.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",V[V.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",V[V.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",V[V.RPM_SKIP=0]="RPM_SKIP",V[V.RPM_REV=2147483648]="RPM_REV"}(pe||(pe={})),function(V){V[V.RCT_PIXEL=1]="RCT_PIXEL",V[V.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(B||(B={})),function(V){V[V.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",V[V.RT_RAW_TEXT=1]="RT_RAW_TEXT",V[V.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",V[V.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(K||(K={})),function(V){V[V.SUM_AUTO=1]="SUM_AUTO",V[V.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",V[V.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",V[V.SUM_SKIP=0]="SUM_SKIP",V[V.SUM_REV=2147483648]="SUM_REV"}(G||(G={})),function(V){V[V.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",V[V.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",V[V.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",V[V.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",V[V.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",V[V.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(ee||(ee={})),function(V){V[V.TACM_AUTO=1]="TACM_AUTO",V[V.TACM_VERIFYING=2]="TACM_VERIFYING",V[V.TACM_VERIFYING_PATCHING=4]="TACM_VERIFYING_PATCHING",V[V.TACM_SKIP=0]="TACM_SKIP",V[V.TACM_REV=2147483648]="TACM_REV"}(ie||(ie={})),function(V){V[V.TFM_AUTO=1]="TFM_AUTO",V[V.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",V[V.TFM_SKIP=0]="TFM_SKIP",V[V.TFM_REV=2147483648]="TFM_REV"}(be||(be={})),function(V){V[V.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",V[V.TROM_POSITION=2]="TROM_POSITION",V[V.TROM_FORMAT=4]="TROM_FORMAT",V[V.TROM_SKIP=0]="TROM_SKIP",V[V.TROM_REV=2147483648]="TROM_REV"}(Te||(Te={})),function(V){V[V.TDM_AUTO=1]="TDM_AUTO",V[V.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",V[V.TDM_SKIP=0]="TDM_SKIP",V[V.TDM_REV=2147483648]="TDM_REV"}(Ge||(Ge={})),function(V){V.DM_LM_ONED="1",V.DM_LM_QR_CODE="2",V.DM_LM_PDF417="3",V.DM_LM_DATAMATRIX="4",V.DM_LM_AZTEC="5",V.DM_LM_MAXICODE="6",V.DM_LM_PATCHCODE="7",V.DM_LM_GS1_DATABAR="8",V.DM_LM_GS1_COMPOSITE="9",V.DM_LM_POSTALCODE="10",V.DM_LM_DOTCODE="11",V.DM_LM_INTERMEDIATE_RESULT="12",V.DM_LM_DPM="13",V.DM_LM_NONSTANDARD_BARCODE="16"}(je||(je={})),function(V){V.DM_CW_AUTO="",V.DM_CW_DEVICE_COUNT="DeviceCount",V.DM_CW_SCAN_COUNT="ScanCount",V.DM_CW_CONCURRENT_DEVICE_COUNT="ConcurrentDeviceCount",V.DM_CW_APP_DOMIAN_COUNT="Domain",V.DM_CW_ACTIVE_DEVICE_COUNT="ActiveDeviceCount",V.DM_CW_INSTANCE_COUNT="InstanceCount",V.DM_CW_CONCURRENT_INSTANCE_COUNT="ConcurrentInstanceCount"}(he||(he={})),s.default={BarcodeReader:p,BarcodeScanner:y,EnumBarcodeColourMode:_,EnumBarcodeComplementMode:C,EnumBarcodeFormat:u,EnumBarcodeFormat_2:A,EnumBinarizationMode:M,EnumClarityCalculationMethod:E,EnumClarityFilterMode:R,EnumColourClusteringMode:x,EnumColourConversionMode:P,EnumConflictMode:F,EnumDeblurMode:k,EnumDeformationResistingMode:w,EnumDPMCodeReadingMode:S,EnumErrorCode:d,EnumGrayscaleTransformationMode:L,EnumImagePixelFormat:l,EnumImagePreprocessingMode:U,EnumIMResultDataType:c,EnumIntermediateResultSavingMode:Z,EnumIntermediateResultType:ne,EnumLocalizationMode:oe,EnumPDFReadingMode:ue,EnumQRCodeErrorCorrectionLevel:X,EnumRegionPredetectionMode:pe,EnumResultCoordinateType:B,EnumResultType:K,EnumScaleUpMode:G,EnumTerminatePhase:ee,EnumTextAssistedCorrectionMode:ie,EnumTextFilterMode:be,EnumTextResultOrderMode:Te,EnumTextureDetectionMode:Ge,EnumLicenseModule:je,EnumChargeWay:he}}])});const pr={};{let e;"object"==typeof dbr?e=dbr:"object"==typeof module&&module.exports&&module.exports.default?e=module.exports.default:"object"==typeof exports&&exports.dbr&&(e=exports.dbr);for(let r in e)pr[r]=e[r]}var T=window.Dynamsoft||{Lib:{}},Bt=window;window.Dynamsoft=T,function(e){(e.DWT||(e.DWT={})).initQueue=[],e.initOrder=e.initOrder||[],e.unloadQueue=e.unloadQueue||[]}(T),T.DWT.IfUseActiveXForIE10Plus=!1,T=T||{},function(e,r,t){var i=20211014;if(!(r._preDefine_ver&&r._preDefine_ver>=i)){r._preDefine_ver=i;var n=function(d,c){for(var u in c)c.hasOwnProperty(u)&&(d[u]=c[u]);return d},a=function(d){if(null==d||"object"!=typeof d)return d;var c,u,h;if(d instanceof Date)return(c=new Date).setTime(d.getTime()),c;if(d instanceof Array){for(c=[],h=d.length,u=0;u<h;u++)c[u]=a(d[u]);return c}if(d instanceof Object){for(u in c={},d)d.hasOwnProperty(u)&&(c[u]=a(d[u]));return c}return 0};if(r.Lib||(r.Lib={}),n(r.Lib,{win:e,doc:e.document,debug:!1,nil:void 0,mix:n,clone:a,guid:function(d){var h,f,c=[],u="0123456789abcdef";for(h=0;h<8;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),h=0;h<4;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-4"),h=0;h<3;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),f=u.substr(Math.floor(16*Math.random()),1),f=u.substr(3&f|8,1),c.push(f),h=0;h<3;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),h=0;h<8;h++)c.push(u.substr(Math.floor(16*Math.random()),1));return c.unshift(d),c.join("")},now:Date.now||function(){return+new Date},noop:function(){}}),Object.keys)r.Lib.keys=Object.keys;else{var s=["propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],o={}.hasOwnProperty;for(var l in{toString:1})s=!1;r.Lib.keys=function(d){var c=[];for(var u in d)o.call(d,u)&&c.push(u);if(s&&d)for(var h=0;u=s[h++];)o.call(d,u)&&c.push(u);return c}}}}("undefined"!=typeof window?window:void 0,T),function(e){var r=!{toString:1}.propertyIsEnumerable("toString"),t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function i(n,a){return{}.hasOwnProperty.call(n,a)}e.keys=Object.keys||function(n){var s,o,a=[];for(s in n)i(n,s)&&a.push(s);if(r)for(o=t.length-1;o>=0;o--)i(n,s=t[o])&&a.push(s);return a}}(T.Lib),function(e,r){var t=20200716;if(!(e._isXXX_ver&&e._isXXX_ver>=t)){e._isXXX_ver=t;var n,a,s=!1,d={}.hasOwnProperty,c={},u="object"==typeof HTMLElement;(0,e.mix)(e,{isDef:function(v){return v!==r},isUndef:h,isUndefined:h,isNull:function(v){return null===v},isNaN:function(v){return isNaN(v)},type:function(v){return null===v||v===r?String(v):c[{}.toString.call(v)]||"object"},isPlainObject:function(v){if(!v||"object"!==e.type(v)||v.nodeType||v.window==v)return s;var p,m;try{if((m=v.constructor)&&!d(v,"constructor")&&!d(m.prototype,"isPrototypeOf"))return s}catch(I){return s}for(p in v);return h(p)||d(v,p)},isDOM:function(v){return u?v instanceof HTMLElement:v&&"object"==typeof v&&(1===v.nodeType||9===v.nodeType)&&"string"==typeof v.nodeName},isDOMInBody:function(v){var p=v;if(e.isDOM(v))for(;!p&&p!=document.body;)p=p.parentNode;else p=0;return!!p}}),g("Function"),e.each=n=function(v,p,m){if(v){var I,y,_,C=0,A=v.length;if(m=m||null,h(A)||e.isFunction(v))for(_=e.keys(v);C<_.length&&p.call(m,v[I=_[C]],I,v)!==s;C++);else for(y=v[0];C<A&&p.call(m,y,C,v)!==s;y=v[++C]);}return v},a=["String","Object","Boolean","Number"],Array.isArray?e.isArray=Array.isArray:a.push("Array"),n(a,g)}function h(v){return v===r}function g(v,p){c["[object "+v+"]"]=p=v.toLowerCase(),e["is"+v]=function(m){return e.type(m)===p}}}(T.Lib),function(e){var i,r=e.mix,t=e.win,n=20211122;e._log_ver&&e.isNumber(e._log_ver)&&e._log_ver>=n||(e._log_ver=n,e.isDef(t.console)&&(!e.isFunction((i=t.console).log)||!e.isFunction(i.error))&&(i=!1),e.getFormatedNow=function(a){var s=a?new Date(a):new Date,o="yyyy-MM-dd HH:mm:ss.SSSZ",l={"M+":s.getUTCMonth()+1,"d+":s.getUTCDate(),"H+":s.getUTCHours(),"h+":s.getUTCHours()%12||12,"m+":s.getUTCMinutes(),"s+":s.getUTCSeconds(),"q+":Math.floor((s.getUTCMonth()+3)/3),"S+":s.getUTCMilliseconds()};for(var d in/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(s.getUTCFullYear()+"").substr(4-RegExp.$1.length))),l)new RegExp("("+d+")").test(o)&&(o=o.replace(RegExp.$1,1==RegExp.$1.length?l[d]:("000"+l[d]).substr(("000"+l[d]).length-RegExp.$1.length)));return o},r(e,{log:function(a){if(e.debug&&i&&e.isFunction(i.log)){var s=e.getFormatedNow((new Date).getTime());i.log(["[",s,"] ",a].join(""))}},error:function(a){if(e.debug&&i&&e.isFunction(i.error)){var s=e.getFormatedNow((new Date).getTime());i.error(["[",s,"] ",a].join(""))}},warn:function(a){if(e.debug&&i&&e.isFunction(i.warn)){var s=e.getFormatedNow((new Date).getTime());i.warn(["[",s,"] ",a].join(""))}},info:function(a){if(e.debug&&i&&e.isFunction(i.info)){var s=e.getFormatedNow((new Date).getTime());i.info(["[",s,"] ",a].join(""))}},getLogger:function(){return i},setLogger:function(a){i=a}}))}(T.Lib),function(e){var r=20200521;e._random_ver&&e._random_ver>=r||(e._random_ver=r,e.getRandom=function(){for(var n,t=e.now()%1e4,i=[],a=0;a<5;a++)n=Math.floor(10*Math.random()),0!=a||0!=n?i.push(n):a=-1;return t<10?i.push("000"):t<100?i.push("00"):t<1e3&&i.push("0"),i.push(t),i.join("")})}(T.Lib),function(e){var r=20201013;e._strUtil_ver&&e.isNumber(e._strUtil_ver)&&e._strUtil_ver>=r||(e._strUtil_ver=r,e.mix(e,{startsWith:function(t,i){return 0===t.lastIndexOf(i,0)},endsWith:function(t,i){var n=t.length-i.length;return n>=0&&t.indexOf(i,n)===n},replaceAll:function(t,i,n){return t.replace(new RegExp(i,"gi"),n)},upperCaseFirst:function(t){return t.charAt(0).toUpperCase()+t.substr(1)},removeNonPrintableChar:function(t){return e.isString(t)?t.replace(/[^\x20-\x7E]/g,""):t},makeArray:function(t){if(null==t)return[];if(e.isArray(t))return t;var i=typeof t.length,n=typeof t;if("number"!==i||t.alert||"string"===n||"function"===n&&(!("item"in t)||"number"!==i))return[t];for(var a=[],s=0,o=t.length;s<o;s++)a[s]=t[s];return a}}))}(T.Lib),function(e){var r=20200521;e._extend_ver&&e.isNumber(e._extend_ver)&&e._extend_ver>=r||(e._extend_ver=r,e.extend=function(t,i){var n=function(){t.apply(this,arguments),i&&i.apply(this,arguments)};return e.each(t.prototype,function(a,s){n.prototype[s]=a}),n.prototype.constructor=n,n})}(T.Lib),function(e){var r=20200521;function t(i){var n=this,a=n.constructor;for(n.__attrs={},n.__attrVals={},n.userConfig=i;a;)n.addAttrs(a.ATTRS),a=a.superclass?a.superclass.constructor:null;e.mix(n.__attrs,i)}e._attribute_ver&&e.isNumber(e._attribute_ver)&&e._attribute_ver>=r||(e._attribute_ver=r,e.mix(t.prototype,{get:function(i){return i in this.__attrs?this.__attrs[i]:""},set:function(i,n){i in this.__attrs&&(this.__attrs[i]=n)},addAttrs:function(i){e.mix(this.__attrs,i)}}),t.extend=function(i){var a,s;return(i=i||{}).constructor&&(a=i.constructor),s=e.extend(this,a),e.mix(s,i),s},e.Attributes=t)}(T.Lib),function(e){var r=20200521;if(!(e._json_ver&&e._json_ver>=r)){e._json_ver=r;var t=e.win.JSON;if(t&&t.parse&&t.stringify)return e.parse=t.parse,void(e.stringify=t.stringify);var n,f,g,v,p,i=(g={},v=/["\b\f\n\r\t\x00-\x1f]/g,p=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g,e.each(f={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},function(m,I){g[m]=I}),g["\\/"]="/",g["\\\\"]="\\",{quote:function(m){return'"'+m.replace(v,function(I){var y;return(y=f[I])||(y="\\u"+("0000"+I.charCodeAt(0).toString(16)).slice(-4)),y})+'"'},unQuote:function(m){return m.slice(1,m.length-1).replace(p,function(I){var y;return(y=g[I])||(y=String.fromCharCode(parseInt(I.slice(2),16))),y})}});n=function(f,g,v,p,m,I,y){var _=g[f];switch(_&&"object"==typeof _&&("function"==typeof _.toJSON?_=_.toJSON(f):_ instanceof Date?_=isFinite(_.valueOf())?_.getUTCFullYear()+"-"+a(_.getUTCMonth()+1)+"-"+a(_.getUTCDate())+"T"+a(_.getUTCHours())+":"+a(_.getUTCMinutes())+":"+a(_.getUTCSeconds())+"Z":null:(_ instanceof String||_ instanceof Number||_ instanceof Boolean)&&(_=_.valueOf())),void 0!==v&&(_=v.call(g,f,_)),typeof _){case"number":return isFinite(_)?String(_):"null";case"string":return i.quote(_);case"boolean":return String(_);case"object":return _?e.isArray(_)?function(f,g,v,p,m,I){var y=I;I+=p;for(var _=[],C=f.length,A=0;A<C;){var M=n(String(A),f,g,v,p,m,I);_[_.length]=void 0===M?"null":M,++A}return _.length?p?"[\n"+I+_.join("\n,"+I)+"\n"+y+"]":"["+_.join(",")+"]":"[]"}(_,v,p,m,I,y):function(f,g,v,p,m,I){var y=I;I+=p;var _,C,M,A=0,E=[];for(C=(_=void 0!==v?v:e.keys(f)).length;A<C;A++){var R=n(M=_[A],f,g,v,p,m,I);if(void 0!==R){var x=i.quote(M);x+=":",p&&(x+=" "),E[E.length]=x+=R}}return E.length?p?"{\n"+I+E.join(",\n"+I)+"\n"+y+"}":"{"+E.join(",")+"}":"{}"}(_,v,p,m,I,y):"null"}},e.stringify=function(f,g,v){var m,I,p="";return g&&("function"==typeof g?I=g:e.isArray(g)&&(m=g)),"number"==typeof v?(v=Math.min(10,v),p=new Array(v+1).join(" ")):"string"==typeof v&&(p=v.slice(0,10)),n("",{"":f},I,m,p,[],"")};var c,l={};l.yy={unQuote:i.unQuote},(c=function(f){var g=this;g.rules=[],e.mix(g,f),g.resetInput(g.input)}).prototype={constructor:function(f){var g=this;g.rules=[],e.mix(g,f),g.resetInput(g.input)},resetInput:function(f){e.mix(this,{input:f,matched:"",stateStack:[c.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var f=this,g=f.stateStack[f.stateStack.length-1],v=[];return g=f.mapState(g),e.each(f.rules,function(p){var m=p.state||p[3];m?e.inArray(g,m)&&v.push(p):g==c.STATIC.INITIAL&&v.push(p)}),v},pushState:function(f){this.stateStack.push(f)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var f=this,g=c.STATIC.DEBUG_CONTEXT_LIMIT,v=f.matched,p=f.match,m=f.input,I=((v=v.slice(0,v.length-p.length)).length>g?"...":"")+v.slice(-g).replace(/\n/," "),y=p+m;return I+(y=y.slice(0,g)+(y.length>g?"...":""))+"\n"+new Array(I.length+1).join("-")+"^"},mapSymbol:function(f){var v=this.symbolMap;return v?v[f]||(v[f]=++this.symbolId):f},mapReverseSymbol:function(f){var g=this,v=g.symbolMap,m=g.reverseSymbolMap;return!m&&v&&(m=g.reverseSymbolMap={},e.each(v,function(I,y){m[I]=y})),m?m[f]:f},mapState:function(f){var v=this.stateMap;return v?v[f]||(v[f]=++this.stateId):f},lex:function(){var v,p,m,I,y,f=this,g=f.input,_=f.getCurrentRules();if(f.match=f.text="",!g)return f.mapSymbol(c.STATIC.END_TAG);for(v=0;v<_.length;v++){var E,A=(p=_[v]).token||p[0],M=p.action||p[2]||void 0;if(m=g.match(p.regexp||p[1]))return(y=m[0].match(/\n.*/g))&&(f.lineNumber+=y.length),e.mix(f,{firstLine:f.lastLine,lastLine:f.lineNumber+1,firstColumn:f.lastColumn,lastColumn:y?y[y.length-1].length-1:f.lastColumn+m[0].length}),E=f.match=m[0],f.matches=m,f.text=E,f.matched+=E,I=void 0===(I=M&&M.call(f))?A:f.mapSymbol(I),g=g.slice(E.length),f.input=g,I||f.lex()}e.error("lex error at line "+f.lineNumber+":\n"+f.showDebugInfo())}},c.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var u=new c({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});l.lexer=u,u.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},l.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var f={};return f[this.$1.key]=this.$1.value,f}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],l.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},l.parse=function(g){var m,I,y,v=this,p=v.lexer,_=v.table,C=_.gotos,A=_.action,M=v.productions,E=[null],R=[0];for(p.resetInput(g);;){if(m=R[R.length-1],I||(I=p.lex()),!I)return e.log("it is not a valid input: "+g,"error"),!1;if(!(y=A[m]&&A[m][I])){var P,x=[];return A[m]&&e.each(A[m],function(ue,X){x.push(v.lexer.mapReverseSymbol(X))}),P="Syntax error at line "+p.lineNumber+":\n"+p.showDebugInfo()+"\nexpect "+x.join(", "),e.log(P),!1}switch(y[0]){case 1:R.push(I),E.push(p.text),R.push(y[2]),I=null;break;case 2:var Z,F=M[y[1]],k=F.symbol||F[0],w=F.action||F[2],L=(F.rhs||F[1]).length,U=0,ne=E[E.length-L];for(v.$$=ne,Z=void 0;U<L;U++)v["$"+(L-U)]=E[E.length-1-U];w&&(Z=w.call(v)),ne=void 0!==Z?Z:v.$$,L&&(R=R.slice(0,-1*L*2),E=E.slice(0,-1*L)),R.push(k),E.push(ne),R.push(C[R[R.length-2]][R[R.length-1]]);break;case 0:return ne}}},e.parse=function(f,g){var v=l.parse(String(f));return g?h({"":v},"",g):v}}function a(f){return f<10?"0"+f:f}function h(f,g,v){var m,I,y,p=f[g];if("object"==typeof p)if(e.isArray(p)){m=0,I=p.length;for(var _=[];m<I;)void 0!==(y=h(p,String(m),v))&&(_[_.length]=y);p=_}else{var C=e.keys(p);for(m=0,I=C.length;m<I;m++){var A=C[m];void 0===(y=h(p,A,v))?delete p[A]:p[A]=y}}return v.call(f,g,p)}}(T.Lib),function(e){var r=20210305;if(!(e._array_ver&&e._array_ver>=r)){e._array_ver=r;var t=Array.prototype,i=t.indexOf,n=t.filter,a=t.forEach;e.isFunction(i)||(i=function(s,o){var l;if(null==this)return-1;var d=Object(this),c=d.length>>>0;if(0===c)return-1;var u=+o||0;if(Math.abs(u)===1/0&&(u=0),u>=c)return-1;for(l=Math.max(u>=0?u:c-Math.abs(u),0);l<c;){if(l in d&&d[l]===s)return l;l++}return-1}),e.isFunction(a)||(Array.prototype.forEach=function(o,l){var d,c;if(null!=this&&e.isFunction(o)){var u=Object(this),h=u.length>>>0;for(arguments.length>1&&(d=l),c=0;c<h;)c in u&&o.call(d,u[c],c,u),c++}}),e.mix(e,{filter:n?function(s,o,l){return n.call(s,o,l||this)}:function(s,o,l){var d=[];return e.each(s,function(c,u,h){o.call(l||this,c,u,h)&&d.push(c)}),d},indexOf:function(s,o){return i.call(o,s)},uniq:function(s){for(var o=[],l=s.length,d=0;d<l;d++){for(var c=d+1;c<l;c++)s[d]===s[c]&&(c=++d);o.push(s[d])}return o}})}}(T.Lib),function(e){var r=20200521;if(!(e._function_ver&&e._function_ver>=r)){e._function_ver=r;var t=Array.prototype,i=Function.prototype;e.isFunction(i.bind)||(i.bind=function(n){var a=this;if(1<arguments.length){var s=t.slice.call(arguments,1);return function(){return a.apply(n,arguments.length?s.concat(t.slice.call(arguments)):s)}}return function(){return arguments.length?a.apply(n,arguments):a.call(n)}})}}(T.Lib),function(e){var r=20200521;if(!(e._string_ver&&e._string_ver>=r)){e._string_ver=r;var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=String.prototype,a=i.trim;a||(a=i.trim=function(){return this.replace(t,"")}),e.trim=function(s){return null==s?"":a.call(s)}}}(T.Lib),function(e){var r=20211022;e._navInfobase_ver&&e.isNumber(e._navInfobase_ver)&&e._navInfobase_ver>=r||(e._navInfobase_ver=r,e.getNavInfoByUserAgent=function(t,i){var c,a=!1,s=!0,o=e.win,l=e.doc,d=l&&l.documentElement,u=t.toLowerCase(),h=i.toLowerCase(),f=/cros/.test(u),g=/harmonyos/g.test(u),v=/android/g.test(u),p=/iphone/g.test(u)||/iphone/g.test(h),m=/macintosh/.test(u),I=/ipad/g.test(u)||(m||"macintel"==h)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,y=/ucweb|ucbrowser/g.test(u),_=!y&&/nexus/g.test(u)&&/version\/[\d.]+.*safari\//g.test(u),C=/playbook/g.test(u),A=/hp-tablet/g.test(u),M=/blackberry|bb10/g.test(u),E=/symbian/g.test(u),R=/windows phone/g.test(u),x=/mobile/g.test(u),P=/arm64|aarch64/g.test(u),F=/mips64/g.test(u),k=/huaweibrowser/g.test(u),w=P||F;"linux"==h&&u.indexOf("windows nt")>=0&&(h="harmonyos",g=!0);var S=C||I||A,L=p||_||M||E||R||v||g||x,U=!L&&!S&&!f,Z=U&&/win32|win64|windows/.test(h),ne=Z&&/win64|x64/.test(u),oe=U&&/mac68k|macppc|macintosh|macintel/.test(u),ue=U&&/linux/.test(h),X="win64"==h||/wow64|x86_64|win64|x64/.test(u)||w,pe=/wow64/g.test(u),B=u.indexOf("msie "),K=u.indexOf("trident"),G=u.indexOf("rv:"),ee=a,ie=/opera|opr/g.test(u),be=/360se/g.test(u),Te=/maxthon/g.test(u),Ge=/tencenttraveler|qqbrowser/g.test(u),je=/the world/g.test(u),he=/metasr/g.test(u),ae=/avant/g.test(u),V=/firefox|fxios/g.test(u),Q=!V&&/edge\/|edga\/|edgios\/|edg\//g.test(u),me=!(M||C||y||ie||Q)&&/chrome|crios/g.test(u),H=Z&&!V&&!Q&&!me&&(-1!=B||-1!=K||-1!=G),j="",q=0,re=/gecko/g.test(u),de=L||S,le="",we=a,Ae=o.JSON;if((oe||p||I||Z||M||C||_)&&!y&&!ie&&!Q&&!H&&!V&&(c=u.match(/version\/([\d.]+).*safari\//))&&(M||C||_||(ee=s,me=a),le=c[1]),Q){var Se=u.indexOf("edge/");Se>-1?Se+=5:(Se=u.indexOf("edg/"))>-1?Se+=4:(Se=u.indexOf("edga/"))>-1?Se+=5:(Se=u.indexOf("edgios/"))>-1&&(Se+=7),Se>-1&&(c=(le=u.slice(Se)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s}else if(V)if(de=s,(c=u.indexOf("firefox/"))>-1){var ye=(c=u.slice(c+8)).indexOf(" ");ye>-1&&(c=c.slice(0,ye)),le=c,(ye=c.indexOf("."))>-1&&(c=le.slice(0,ye)),c<27&&(de=a)}else(p||I)&&(c=u.indexOf("fxios/"))>-1&&(le=c=(c=u.slice(c+6)).slice(0,c.indexOf(" ")));else if(H)-1!=B?j=c=(c=u.slice(B+5)).slice(0,c.indexOf(";")):-1!=G?j=c=(c=(c=u.slice(G+3)).slice(0,c.indexOf(";"))).slice(0,c.indexOf(")")):-1!=K&&(j=c=(c=u.slice(K+7)).slice(0,c.indexOf(";"))),(""===j||j>=10)&&(de=s),le=c;else if(ee)de=s,(c=le.indexOf("."))>-1&&(c=le.slice(0,c))<7&&(de=a);else if(y)(c=u.indexOf("ucweb"))>-1?le=u.slice(c+5):(c=u.indexOf("ucbrowser/"))>-1&&(c=(le=u.slice(c+10)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s;else if(ie)(c=u.indexOf("version/"))>-1?le=u.slice(c+8):(c=u.indexOf("opr/"))>-1&&(le=u.slice(c+4)),de=s;else if(E)(c=u.indexOf("browserng/"))>-1&&(le=u.slice(c+10)),de=s;else if(R)(c=u.indexOf("iemobile/"))>-1&&(le=u.slice(c+9)),de=s;else if(me){var Fe=u.indexOf("chrome/");Fe>-1?(c=(le=u.slice(Fe+7)).indexOf(" "))>-1&&(le=le.slice(0,c)):(Fe=u.indexOf("crios/"))>-1&&(c=(le=u.slice(Fe+6)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s,(c=le.indexOf("."))>-1&&(c=le.slice(0,c))<27&&(de=a)}return(Q||H)&&(l.documentMode?q=l.documentMode:(q=5,l.compatMode&&"CSS1Compat"==l.compatMode&&(q=7))),d&&d.querySelector&&(!H||H&&le>8)&&(we=s),H&&le<9&&(Ae=null),{bWin:Z,bMac:oe,bLinux:ue,bMobile:L,bPad:S,bChromeOS:f,bHarmonyOS:g,bArm64:P,bMips64:F,bEmbed:w,bAndroid:v,biPhone:p,biPad:I,bWin64:ne,bWOW64:pe,bOSx64:X,bIE:H,bEdge:Q,bChrome:me,bFirefox:V,bSafari:ee,bOpera:ie,bNexus:_,bUC:y,b360SE:be,bMaxthon:Te,bTencentTraveler:Ge,bTheWorld:je,bMetaSr:he,bAvant:ae,bHuaWeiBrowser:k,bGecko:re,bHTML5Edition:de,strBrowserVersion:le,IEMode:q,bQuerySelectorSupported:we,nativeJson:Ae,scrollBarWidth:a}})}(T.Lib),function(e){var r=20210305;if(!(e._defineProperty_ver&&e._defineProperty_ver>=r)){e._defineProperty_ver=r;var t=!1;if(!("userAgentData"in navigator)){var n,i=navigator;n=e.getNavInfoByUserAgent(i.userAgent,i.platform),T.navInfo=n,n.bIE&&(t=8==n.strBrowserVersion)}t?Object.defineProperty=function(a,s,o){a[s]=o.value||o.get&&o.get()}:Object.defineProperty||(Object.defineProperty=function(a,s,o){var l=a[s],d=function(){return o.get.apply(a,[l])},c=function(h){return l=o.set.apply(a,[h])};if(a.__defineGetter__)a.__defineGetter__(s,d),a.__defineSetter__(s,c);else{var u=function(h){event.propertyName==s&&(a.detachEvent("onpropertychange",u),c(a[s]),a[s]=d,a[s].toString=d,a.attachEvent("onpropertychange",u))};a[s]=d,a[s].toString=d,a.attachEvent("onpropertychange",u)}}),Object.create||(Object.create=function(a,s){if("object"!=typeof a&&"function"!=typeof a)return{};if(null===a)return{};if(void 0!==s)return{};function o(){}return o.prototype=a,new o})}}(T.Lib),function(e,r){var f,g,t="",a=e.getLogger(),s=e.isDef,o=e.each,u={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},h={},v=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function p(_){var C=typeof _;return null==_||"object"!==C&&"function"!==C}function y(_){return encodeURIComponent(String(_))}o(u,function(_,C){h[_]=C}),e.mix(e,{urlEncode:y,urlDecode:function(_){return decodeURIComponent(_.replace(/\+/g," "))},fromUnicode:function(_){return _.replace(/\\u([a-f\d]{4})/gi,function(C,A){return String.fromCharCode(parseInt(A,16))})},escapeHtml:function(_){return(_+"").replace(function(){if(f)return f;var _=t;return o(u,function(C){_+=C+"|"}),_=_.slice(0,-1),f=new RegExp(_,"g")}(),function(C){return h[C]})},escapeRegExp:function(_){return _.replace(v,"\\$&")},unEscapeHtml:function(_){return _.replace(function(){if(g)return g;var _=t;return o(h,function(C){_+=C+"|"}),_+="&#(\\d{1,5});",g=new RegExp(_,"g")}(),function(C,A){return u[C]||String.fromCharCode(+A)})},param:function(_,C,A,M){C=C||"&",A=A||"=",e.isUndef(M)&&(M=!0);var E=[];return o(_,function(R,x){var P=y(x);p(R)?(E.push(P),s(R)&&E.push(A,y(R+t)),E.push(C)):e.isArray(R)&&R.length&&o(R,function(F){p(F)&&(E.push(P,M?y("[]"):t),s(F)&&E.push(A,y(F+t)),E.push(C))})}),E.pop(),E.join(t)},unparam:function(_,C,A){if(!e.isString(_)||!(_=e.trim(_)))return{};A=A||"=";for(var E,P,F,M={},R=e.urlDecode,x=_.split(C=C||"&"),k=0,w=x.length;k<w;++k){if(-1===(E=e.indexOf(A,x[k])))P=R(x[k]),F=void 0;else{P=R(x[k].substring(0,E)),F=x[k].substring(E+1);try{F=R(F)}catch(S){a.error("decodeURIComponent error : "+F),a.error(S)}e.endsWith(P,"[]")&&(P=P.substring(0,P.length-2))}P in M?e.isArray(M[P])?M[P].push(F):M[P]=[M[P],F]:M[P]=F}return M}})}(T.Lib),function(e){var r=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function t(n,a){for(var s=[],o=0;o<n.length;o++){var l=n[o];!l||"."===l||(".."===l?s.length&&".."!==s[s.length-1]?s.pop():a&&s.push(".."):s.push(l))}return s}var i=e.Path={resolve:function(){var s,l,n="",o=arguments,d=0;for(s=o.length-1;s>=0&&!d;s--)e.isString(l=o[s])&&l&&(n=l+"/"+n,d="/"===l.charAt(0));return(d?"/":"")+t(e.filter(n.split("/"),function(c){return!!c}),!d).join("/")||"."},normalize:function(n){var a="/"===n.charAt(0),s="/"===n.slice(-1);return!(n=t(e.filter(n.split("/"),function(o){return!!o}),!a).join("/"))&&!a&&(n="."),n&&s&&(n+="/"),(a?"/":"")+n},join:function(){var n=e.makeArray(arguments);return i.normalize(e.filter(n,function(a){return a&&e.isString(a)}).join("/"))},relative:function(n,a){n=i.normalize(n),a=i.normalize(a);var l,d,s=e.filter(n.split("/"),function(h){return!!h}),o=[],c=e.filter(a.split("/"),function(h){return!!h}),u=Math.min(s.length,c.length);for(l=0;l<u&&s[l]===c[l];l++);for(d=l;l<s.length;)o.push(".."),l++;return(o=o.concat(c.slice(d))).join("/")},basename:function(n,a){var o;return o=(n.match(r)||[])[3]||"",a&&o&&o.slice(-1*a.length)===a&&(o=o.slice(0,-1*a.length)),o},dirname:function(n){var a=n.match(r)||[],s=a[1]||"",o=a[2]||"";return s||o?(o&&(o=o.substring(0,o.length-1)),s+o):"."},extname:function(n){return(n.match(r)||[])[4]||""}}}(T.Lib),function(e,r){function t(n){n._queryMap||(n._queryMap=e.unparam(n._query))}function i(n){this._query=n||""}i.prototype={constructor:i,clone:function(){return new i(this.toString())},reset:function(n){var a=this;return a._query=n||"",a._queryMap=null,a},count:function(){var a=0;return t(this),e.each(this._queryMap,function(s){e.isArray(s)?a+=s.length:a++}),a},has:function(n){var s;return t(this),s=this._queryMap,n?n in s:!e.isEmptyObject(s)},get:function(n){var s;return t(this),s=this._queryMap,n?s[n]:s},keys:function(){return t(this),e.keys(this._queryMap)},set:function(n,a){var o,s=this;return t(s),o=s._queryMap,e.isString(n)?s._queryMap[n]=a:(n instanceof i&&(n=n.get()),e.each(n,function(l,d){o[d]=l})),s},remove:function(n){var a=this;return t(a),n?delete a._queryMap[n]:a._queryMap={},a},add:function(n,a){var o,l,s=this;return e.isString(n)?(t(s),l=e.isUndef(l=(o=s._queryMap)[n])?a:[].concat(l).concat(a),o[n]=l):(n instanceof i&&(n=n.get()),e.each(n,function(d,c){s.add(c,d)})),s},toString:function(n){return t(this),e.param(this._queryMap,r,r,n)}},e.uriQuery=i}(T.Lib),function(e){var r=e.uriQuery,t=e.each,i=e.Path,n=e.getLogger(),a=/[#\/\?@]/g,s=/[#\?]/g,o=/[#@]/g,l=/#/g,d={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},c=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function h(v,p){return v.toLowerCase()===p.toLowerCase()}function f(v,p){return encodeURI(v).replace(p,function(m){return"%"+function(v){return 1===v.length?"0"+v:v}(m.charCodeAt(0).toString(16))})}function g(v){if(v instanceof g)return v.clone();var p,m=this;return e.mix(m,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),p=g.getComponents(v),t(p,function(I,y){if(I=I||"","query"===y)m.query=new r(I);else{try{I=e.urlDecode(I)}catch(_){n.error(_+"urlDecode error : "+I)}m[y]=I}}),m}g.prototype={constructor:g,clone:function(){var v=new g,p=this;return t(d,function(m,I){v[I]=p[I]}),v.query=v.query.clone(),v},resolve:function(v){e.isString(v)&&(v=new g(v));var I,m=0,_=this.clone();return t(["scheme","userInfo","hostname","port","path","query","fragment"],function(C){if("path"===C)if(m)_[C]=v[C];else{var A=v.path;A&&(m=1,e.startsWith(A,"/")||(_.hostname&&!_.path?A="/"+A:_.path&&-1!==(I=_.path.lastIndexOf("/"))&&(A=_.path.slice(0,I+1)+A)),_.path=i.normalize(A))}else"query"===C?(m||v.query.toString())&&(_.query=v.query.clone(),m=1):(m||v[C])&&(_[C]=v[C],m=1)}),_},getScheme:function(){return this.scheme},setScheme:function(v){return this.scheme=v,this},getHostname:function(){return this.hostname},setHostname:function(v){return this.hostname=v,this},setUserInfo:function(v){return this.userInfo=v,this},getUserInfo:function(){return this.userInfo},setPort:function(v){return this.port=v,this},getPort:function(){return this.port},setPath:function(v){return this.path=v,this},getPath:function(){return this.path},setQuery:function(v){return e.isString(v)&&(e.startsWith(v,"?")&&(v=v.slice(1)),v=new r(f(v,o))),this.query=v,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(v){return e.startsWith(v,"#")&&(v=v.slice(1)),this.fragment=v,this},isSameOriginAs:function(v){var p=this;return h(p.hostname,v.hostname)&&h(p.scheme,v.scheme)&&h(p.port,v.port)},toString:function(v){var I,y,_,C,A,M,E,p=[],m=this;return(I=m.scheme)&&(p.push(f(I,a)),p.push(":")),(y=m.hostname)&&(p.push("//"),(E=m.userInfo)&&(p.push(f(E,a)),p.push("@")),p.push(encodeURIComponent(y)),(C=m.port)&&(p.push(":"),p.push(C))),(_=m.path)&&(y&&!e.startsWith(_,"/")&&(_="/"+_),_=i.normalize(_),p.push(f(_,s))),(M=m.query.toString.call(m.query,v))&&(p.push("?"),p.push(M)),(A=m.fragment)&&(p.push("#"),p.push(f(A,l))),p.join("")}},g.getComponents=function(v){var m=(v=v||"").match(c)||[],I={};return t(d,function(y,_){I[_]=m[y]}),I},e.Uri=g}(T.Lib),function(e,r){var t=e.Lib,i=t.win,n=20200622;if(!(t._promise_ver&&t.isNumber(t._promise_ver)&&t._promise_ver>=n)){if(t._promise_ver=n,t.isFunction(i.__zone_symbol__Promise)&&(t.nativePromise=i.__zone_symbol__Promise),Bt&&Bt.Promise)return t.Promise=Bt.Promise,void(t.nativePromise||(t.nativePromise=t.Promise));if(i&&i.Promise)return t.Promise=i.Promise,void(t.nativePromise||(t.nativePromise=t.Promise));i.Map||(i.Map=function(){this.keys=new Array,this.data=new Object,this.set=function(a,s){null==this.data[a]&&-1==this.keys.indexOf(a)&&this.keys.push(a),this.data[a]=s},this.get=function(a){return this.data[a]}}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof global?s=global:void 0!==Bt&&(s=Bt),s.Promise=a()}}(function(){return function l(d,c,u){function h(v,p){if(!c[v]){if(!d[v]){var m="function"==typeof _dereq_&&_dereq_;if(!p&&m)return m(v,!0);if(f)return f(v,!0);var I=new Error("Cannot find module '"+v+"'");throw I.code="MODULE_NOT_FOUND",I}var y=c[v]={exports:{}};d[v][0].call(y.exports,function(_){return h(d[v][1][_]||_)},y,y.exports,l,d,c,u)}return c[v].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<u.length;g++)h(u[g]);return h}({1:[function(l,d,c){d.exports=function(u){function h(g){var v=new f(g),p=v.promise();return v.setHowMany(1),v.setUnwrap(),v.init(),p}var f=u._SomePromiseArray;u.any=function(g){return h(g)},u.prototype.any=function(){return h(this)}}},{}],2:[function(l,d,c){function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new y(16),this._normalQueue=new y(16),this._haveDrainedQueues=!1;var _=this;this.drainQueues=function(){_._drainQueues()},this._schedule=I}function v(_){for(;_.length()>0;)p(_)}function p(_){var C=_.shift();if("function"!=typeof C)C._settlePromises();else{var A=_.shift(),M=_.shift();C.call(A,M)}}var m;try{throw new Error}catch(_){m=_}var I=l("./schedule"),y=l("./queue");u.prototype.setScheduler=function(_){var C=this._schedule;return this._schedule=_,this._customScheduler=!0,C},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(_,C){C?(process.stderr.write("Fatal "+(_ instanceof Error?_.stack:_)+"\n"),process.exit(2)):this.throwLater(_)},u.prototype.throwLater=function(_,C){if(1===arguments.length&&(C=_,_=function(){throw C}),"undefined"!=typeof setTimeout)setTimeout(function(){_(C)},0);else try{this._schedule(function(){_(C)})}catch(A){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.prototype.invokeLater=function(_,C,A){this._lateQueue.push(_,C,A),this._queueTick()},u.prototype.invoke=function(_,C,A){this._normalQueue.push(_,C,A),this._queueTick()},u.prototype.settlePromises=function(_){this._normalQueue._pushOne(_),this._queueTick()},u.prototype._drainQueues=function(){v(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,v(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},d.exports=u,d.exports.firstLineError=m},{"./queue":26,"./schedule":29}],3:[function(l,d,c){d.exports=function(u,h,f,g){var v=!1,p=function(_,C){this._reject(C)},m=function(_,C){C.promiseRejectionQueued=!0,C.bindingPromise._then(p,p,null,this,_)},I=function(_,C){0==(50397184&this._bitField)&&this._resolveCallback(C.target)},y=function(_,C){C.promiseRejectionQueued||this._reject(_)};u.prototype.bind=function(_){v||(v=!0,u.prototype._propagateFrom=g.propagateFromFunction(),u.prototype._boundValue=g.boundValueFunction());var C=f(_),A=new u(h);A._propagateFrom(this,1);var M=this._target();if(A._setBoundTo(C),C instanceof u){var E={promiseRejectionQueued:!1,promise:A,target:M,bindingPromise:C};M._then(h,m,void 0,A,E),C._then(I,y,void 0,A,E),A._setOnCancel(C)}else A._resolveCallback(M);return A},u.prototype._setBoundTo=function(_){void 0!==_?(this._bitField=2097152|this._bitField,this._boundTo=_):this._bitField=-2097153&this._bitField},u.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},u.bind=function(_,C){return u.resolve(C).bind(_)}}},{}],4:[function(l,d,c){var h;"undefined"!=typeof Promise&&(h=Promise);var f=l("./promise")();f.noConflict=function(){try{Promise===f&&(Promise=h)}catch(g){}return f},d.exports=f},{"./promise":22}],5:[function(l,d,c){var u=Object.create;if(u){var h=u(null),f=u(null);h[" size"]=f[" size"]=0}d.exports=function(g){function p(A){return function(A,M){var E;if(null!=A&&(E=A[M]),"function"!=typeof E){var R="Object "+_.classString(A)+" has no method '"+_.toString(M)+"'";throw new g.TypeError(R)}return E}(A,this.pop()).apply(A,this)}function m(A){return A[this]}function I(A){var M=+this;return 0>M&&(M=Math.max(0,M+A.length)),A[M]}var _=l("./util"),C=_.canEvaluate;g.prototype.call=function(A){var M=[].slice.call(arguments,1);return M.push(A),this._then(p,void 0,void 0,M,void 0)},g.prototype.get=function(A){var M;if("number"==typeof A)M=I;else if(C){var R=(void 0)(A);M=null!==R?R:m}else M=m;return this._then(M,void 0,void 0,A,void 0)}}},{"./util":36}],6:[function(l,d,c){d.exports=function(u,h,f,g){var v=l("./util"),p=v.tryCatch,m=v.errorObj,I=u._async;u.prototype.break=u.prototype.cancel=function(){if(!g.cancellation())return this._warn("cancellation is disabled");for(var y=this,_=y;y._isCancellable();){if(!y._cancelBy(_)){_._isFollowing()?_._followee().cancel():_._cancelBranched();break}var C=y._cancellationParent;if(null==C||!C._isCancellable()){y._isFollowing()?y._followee().cancel():y._cancelBranched();break}y._isFollowing()&&y._followee().cancel(),y._setWillBeCancelled(),_=y,y=C}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(y){return y===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),I.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(y,_){if(v.isArray(y))for(var C=0;C<y.length;++C)this._doInvokeOnCancel(y[C],_);else if(void 0!==y)if("function"==typeof y){if(!_){var A=p(y).call(this._boundValue());A===m&&(this._attachExtraTrace(A.e),I.throwLater(A.e))}}else y._resultCancelled(this)},u.prototype._invokeOnCancel=function(){var y=this._onCancel();this._unsetOnCancel(),I.invoke(this._doInvokeOnCancel,this,y)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(l,d,c){d.exports=function(u){var f=l("./util"),g=l("./es5").keys,v=f.tryCatch,p=f.errorObj;return function(m,I,y){return function(_){var C=y._boundValue();e:for(var A=0;A<m.length;++A){var M=m[A];if(M===Error||null!=M&&M.prototype instanceof Error){if(_ instanceof M)return v(I).call(C,_)}else if("function"==typeof M){var E=v(M).call(C,_);if(E===p)return E;if(E)return v(I).call(C,_)}else if(f.isObject(_)){for(var R=g(M),x=0;x<R.length;++x){var P=R[x];if(M[P]!=_[P])continue e}return v(I).call(C,_)}}return u}}}},{"./es5":13,"./util":36}],8:[function(l,d,c){d.exports=function(u){function h(){this._trace=new h.CapturedTrace(g())}function g(){var m=p.length-1;return m>=0?p[m]:void 0}var v=!1,p=[];return u.prototype._promiseCreated=function(){},u.prototype._pushContext=function(){},u.prototype._popContext=function(){return null},u._peekContext=u.prototype._peekContext=function(){},h.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,p.push(this._trace))},h.prototype._popContext=function(){if(void 0!==this._trace){var m=p.pop(),I=m._promiseCreated;return m._promiseCreated=null,I}return null},h.CapturedTrace=null,h.create=function(){return v?new h:void 0},h.deactivateLongStackTraces=function(){},h.activateLongStackTraces=function(){var m=u.prototype._pushContext,I=u.prototype._popContext,y=u._peekContext,_=u.prototype._peekContext,C=u.prototype._promiseCreated;h.deactivateLongStackTraces=function(){u.prototype._pushContext=m,u.prototype._popContext=I,u._peekContext=y,u.prototype._peekContext=_,u.prototype._promiseCreated=C,v=!1},v=!0,u.prototype._pushContext=h.prototype._pushContext,u.prototype._popContext=h.prototype._popContext,u._peekContext=u.prototype._peekContext=g,u.prototype._promiseCreated=function(){var A=this._peekContext();A&&null==A._promiseCreated&&(A._promiseCreated=this)}},h}},{}],9:[function(l,d,c){d.exports=function(u,h,f,g){function v(ge,Ee){return{promise:Ee}}function p(){return!1}function m(ge,Ee,Ue){var Be=this;try{ge(Ee,Ue,function(Qe){if("function"!=typeof Qe)throw new TypeError("onCancel must be a function, got: "+V.toString(Qe));Be._attachCancellationCallback(Qe)})}catch(Qe){return Qe}}function I(ge){if(!this._isCancellable())return this;var Ee=this._onCancel();void 0!==Ee?V.isArray(Ee)?Ee.push(ge):this._setOnCancel([Ee,ge]):this._setOnCancel(ge)}function y(){return this._onCancelField}function _(ge){this._onCancelField=ge}function C(){this._cancellationParent=void 0,this._onCancelField=void 0}function A(ge,Ee){if(0!=(1&Ee)){this._cancellationParent=ge;var Ue=ge._branchesRemainingToCancel;void 0===Ue&&(Ue=0),ge._branchesRemainingToCancel=Ue+1}0!=(2&Ee)&&ge._isBound()&&this._setBoundTo(ge._boundTo)}function E(){var ge=this._boundTo;return void 0!==ge&&ge instanceof u?ge.isFulfilled()?ge.value():void 0:ge}function R(){this._trace=new ie(this._peekContext())}function x(ge,Ee){if(me(ge)){var Ue=this._trace;if(void 0!==Ue&&Ee&&(Ue=Ue._parent),void 0!==Ue)Ue.attachExtraTrace(ge);else if(!ge.__stackCleaned__){var Be=oe(ge);V.notEnumerableProp(ge,"stack",Be.message+"\n"+Be.stack.join("\n")),V.notEnumerableProp(ge,"__stackCleaned__",!0)}}}function P(){this._trace=void 0}function w(ge,Ee,Ue){if(ze.warnings){var Be,Qe=new ae(ge);if(Ee)Ue._attachExtraTrace(Qe);else if(ze.longStackTraces&&(Be=u._peekContext()))Be.attachExtraTrace(Qe);else{var Ze=oe(Qe);Qe.stack=Ze.message+"\n"+Ze.stack.join("\n")}fe("warning",Qe)||ue(Qe,"",!0)}}function Z(ge){for(var Ee=[],Ue=0;Ue<ge.length;++Ue){var Be=ge[Ue],Qe="    (No stack trace)"===Be||re.test(Be),Ze=Qe&&Oe(Be);Qe&&!Ze&&(le&&" "!==Be.charAt(0)&&(Be="    "+Be),Ee.push(Be))}return Ee}function oe(ge){var Ee=ge.stack,Ue=ge.toString();return Ee="string"==typeof Ee&&Ee.length>0?function(ge){for(var Ee=ge.stack.replace(/\s+$/g,"").split("\n"),Ue=0;Ue<Ee.length;++Ue){var Be=Ee[Ue];if("    (No stack trace)"===Be||re.test(Be))break}return Ue>0&&"SyntaxError"!=ge.name&&(Ee=Ee.slice(Ue)),Ee}(ge):["    (No stack trace)"],{message:Ue,stack:"SyntaxError"==ge.name?Ee:Z(Ee)}}function ue(ge,Ee,Ue){var Be;"undefined"!=typeof console&&(Be=V.isObject(ge)?Ee+de(ge.stack,ge):Ee+String(ge),"function"==typeof Ge?Ge(Be,Ue):("function"==typeof console.log||"object"==typeof console.log)&&console.log(Be))}function X(ge,Ee,Ue,Be){var Qe=!1;try{"function"==typeof Ee&&(Qe=!0,"rejectionHandled"===ge?Ee(Be):Ee(Ue,Be))}catch(Ze){he.throwLater(Ze)}"unhandledRejection"===ge?fe(ge,Ue,Be)||Qe||ue(Ue,"Unhandled rejection "):fe(ge,Be)}function pe(ge){var Ee;if("function"==typeof ge)Ee="[function "+(ge.name||"anonymous")+"]";else{if(Ee=ge&&"function"==typeof ge.toString?ge.toString():V.toString(ge),/\[object [a-zA-Z0-9$_]+\]/.test(Ee))try{Ee=JSON.stringify(ge)}catch(Qe){}0===Ee.length&&(Ee="(empty array)")}return"(<"+function(ge){return ge.length<41?ge:ge.substr(0,38)+"..."}(Ee)+">, no stack trace)"}function K(){return"function"==typeof Pe}function G(ge){var Ee=ge.match(Ne);return Ee?{fileName:Ee[1],line:parseInt(Ee[2],10)}:void 0}function ie(ge){this._parent=ge,this._promisesCreated=0;var Ee=this._length=1+(void 0===ge?0:ge._length);Pe(this,ie),Ee>32&&this.uncycle()}var be,Te,Ge,je,he=u._async,ae=l("./errors").Warning,V=l("./util"),Q=l("./es5"),me=V.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,j=/\((?:timers\.js):\d+:\d+\)/,q=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,re=null,de=null,le=!1,we=!(0==V.env("BLUEBIRD_DEBUG")||!V.env("BLUEBIRD_DEBUG")&&"development"!==V.env("NODE_ENV")),Ae=!(0==V.env("BLUEBIRD_WARNINGS")||!we&&!V.env("BLUEBIRD_WARNINGS")),Se=!(0==V.env("BLUEBIRD_LONG_STACK_TRACES")||!we&&!V.env("BLUEBIRD_LONG_STACK_TRACES")),ye=0!=V.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Ae||!!V.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function ge(){for(var Be=0;Be<Ue.length;++Be)Ue[Be]._notifyUnhandledRejection();Ee()}function Ee(){Ue.length=0}var Ue=[];je=function(Be){Ue.push(Be),setTimeout(ge,1)},Q.defineProperty(u,"_unhandledRejectionCheck",{value:ge}),Q.defineProperty(u,"_unhandledRejectionClear",{value:Ee})})(),u.prototype.suppressUnhandledRejections=function(){var ge=this._target();ge._bitField=-1048577&ge._bitField|524288},u.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),je(this))},u.prototype._notifyUnhandledRejectionIsHandled=function(){X("rejectionHandled",be,void 0,this)},u.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},u.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},u.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var ge=this._settledValue();this._setUnhandledRejectionIsNotified(),X("unhandledRejection",Te,ge,this)}},u.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},u.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},u.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},u.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},u.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},u.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},u.prototype._warn=function(ge,Ee,Ue){return w(ge,Ee,Ue||this)},u.onPossiblyUnhandledRejection=function(ge){var Ee=u._getContext();Te=V.contextBind(Ee,ge)},u.onUnhandledRejectionHandled=function(ge){var Ee=u._getContext();be=V.contextBind(Ee,ge)};var Fe=function(){};u.longStackTraces=function(){if(he.haveItemsQueued()&&!ze.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ze.longStackTraces&&K()){var ge=u.prototype._captureStackTrace,Ee=u.prototype._attachExtraTrace,Ue=u.prototype._dereferenceTrace;ze.longStackTraces=!0,Fe=function(){if(he.haveItemsQueued()&&!ze.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");u.prototype._captureStackTrace=ge,u.prototype._attachExtraTrace=Ee,u.prototype._dereferenceTrace=Ue,h.deactivateLongStackTraces(),ze.longStackTraces=!1},u.prototype._captureStackTrace=R,u.prototype._attachExtraTrace=x,u.prototype._dereferenceTrace=P,h.activateLongStackTraces()}},u.hasLongStackTraces=function(){return ze.longStackTraces&&K()};var Ve={unhandledrejection:{before:function(){var ge=V.global.onunhandledrejection;return V.global.onunhandledrejection=null,ge},after:function(ge){V.global.onunhandledrejection=ge}},rejectionhandled:{before:function(){var ge=V.global.onrejectionhandled;return V.global.onrejectionhandled=null,ge},after:function(ge){V.global.onrejectionhandled=ge}}},ke=function(){var ge=function(Ue,Be){if(!Ue)return!V.global.dispatchEvent(Be);var Qe;try{return Qe=Ue.before(),!V.global.dispatchEvent(Be)}finally{Ue.after(Qe)}};try{if("function"==typeof CustomEvent){var Ee=new CustomEvent("CustomEvent");return V.global.dispatchEvent(Ee),function(Be,Qe){Be=Be.toLowerCase();var tt=new CustomEvent(Be,{detail:Qe,cancelable:!0});return Q.defineProperty(tt,"promise",{value:Qe.promise}),Q.defineProperty(tt,"reason",{value:Qe.reason}),ge(Ve[Be],tt)}}return"function"==typeof Event?(Ee=new Event("CustomEvent"),V.global.dispatchEvent(Ee),function(Be,Qe){Be=Be.toLowerCase();var Ze=new Event(Be,{cancelable:!0});return Ze.detail=Qe,Q.defineProperty(Ze,"promise",{value:Qe.promise}),Q.defineProperty(Ze,"reason",{value:Qe.reason}),ge(Ve[Be],Ze)}):((Ee=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),V.global.dispatchEvent(Ee),function(Ue,Be){Ue=Ue.toLowerCase();var Qe=document.createEvent("CustomEvent");return Qe.initCustomEvent(Ue,!1,!0,Be),ge(Ve[Ue],Qe)})}catch(Ue){}return function(){return!1}}(),$e=V.isNode?function(){return process.emit.apply(process,arguments)}:V.global?function(ge){var Ee="on"+ge.toLowerCase(),Ue=V.global[Ee];return!!Ue&&(Ue.apply(V.global,[].slice.call(arguments,1)),!0)}:function(){return!1},Le={promiseCreated:v,promiseFulfilled:v,promiseRejected:v,promiseResolved:v,promiseCancelled:v,promiseChained:function(ge,Ee,Ue){return{promise:Ee,child:Ue}},warning:function(ge,Ee){return{warning:Ee}},unhandledRejection:function(ge,Ee,Ue){return{reason:Ee,promise:Ue}},rejectionHandled:v},fe=function(ge){var Ee=!1;try{Ee=$e.apply(null,arguments)}catch(Be){he.throwLater(Be),Ee=!0}var Ue=!1;try{Ue=ke(ge,Le[ge].apply(null,arguments))}catch(Be){he.throwLater(Be),Ue=!0}return Ue||Ee};u.config=function(ge){if("longStackTraces"in(ge=Object(ge))&&(ge.longStackTraces?u.longStackTraces():!ge.longStackTraces&&u.hasLongStackTraces()&&Fe()),"warnings"in ge){var Ee=ge.warnings;ze.warnings=!!Ee,ye=ze.warnings,V.isObject(Ee)&&"wForgottenReturn"in Ee&&(ye=!!Ee.wForgottenReturn)}if("cancellation"in ge&&ge.cancellation&&!ze.cancellation){if(he.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");u.prototype._clearCancellationData=C,u.prototype._propagateFrom=A,u.prototype._onCancel=y,u.prototype._setOnCancel=_,u.prototype._attachCancellationCallback=I,u.prototype._execute=m,De=A,ze.cancellation=!0}if("monitoring"in ge&&(ge.monitoring&&!ze.monitoring?(ze.monitoring=!0,u.prototype._fireEvent=fe):!ge.monitoring&&ze.monitoring&&(ze.monitoring=!1,u.prototype._fireEvent=p)),"asyncHooks"in ge&&V.nodeSupportsAsyncResource){var Be=!!ge.asyncHooks;ze.asyncHooks!==Be&&(ze.asyncHooks=Be,Be?f():g())}return u},u.prototype._fireEvent=p,u.prototype._execute=function(ge,Ee,Ue){try{ge(Ee,Ue)}catch(Be){return Be}},u.prototype._onCancel=function(){},u.prototype._setOnCancel=function(ge){},u.prototype._attachCancellationCallback=function(ge){},u.prototype._captureStackTrace=function(){},u.prototype._attachExtraTrace=function(){},u.prototype._dereferenceTrace=function(){},u.prototype._clearCancellationData=function(){},u.prototype._propagateFrom=function(ge,Ee){};var De=function(ge,Ee){0!=(2&Ee)&&ge._isBound()&&this._setBoundTo(ge._boundTo)},Oe=function(){return!1},Ne=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;V.inherits(ie,Error),h.CapturedTrace=ie,ie.prototype.uncycle=function(){var ge=this._length;if(!(2>ge)){for(var Ee=[],Ue={},Be=0,Qe=this;void 0!==Qe;++Be)Ee.push(Qe),Qe=Qe._parent;for(Be=(ge=this._length=Be)-1;Be>=0;--Be){var Ze=Ee[Be].stack;void 0===Ue[Ze]&&(Ue[Ze]=Be)}for(Be=0;ge>Be;++Be){var lt=Ue[Ee[Be].stack];if(void 0!==lt&&lt!==Be){lt>0&&(Ee[lt-1]._parent=void 0,Ee[lt-1]._length=1),Ee[Be]._parent=void 0,Ee[Be]._length=1;var dt=Be>0?Ee[Be-1]:this;ge-1>lt?(dt._parent=Ee[lt+1],dt._parent.uncycle(),dt._length=dt._parent._length+1):(dt._parent=void 0,dt._length=1);for(var _t=dt._length+1,Rt=Be-2;Rt>=0;--Rt)Ee[Rt]._length=_t,_t++;return}}}},ie.prototype.attachExtraTrace=function(ge){if(!ge.__stackCleaned__){this.uncycle();for(var Ee=oe(ge),Ue=Ee.message,Be=[Ee.stack],Qe=this;void 0!==Qe;)Be.push(Z(Qe.stack.split("\n"))),Qe=Qe._parent;(function(ge){for(var Ee=ge[0],Ue=1;Ue<ge.length;++Ue){for(var Be=ge[Ue],Qe=Ee.length-1,Ze=Ee[Qe],tt=-1,lt=Be.length-1;lt>=0;--lt)if(Be[lt]===Ze){tt=lt;break}for(lt=tt;lt>=0&&Ee[Qe]===Be[lt];--lt)Ee.pop(),Qe--;Ee=Be}})(Be),function(ge){for(var Ee=0;Ee<ge.length;++Ee)(0===ge[Ee].length||Ee+1<ge.length&&ge[Ee][0]===ge[Ee+1][0])&&(ge.splice(Ee,1),Ee--)}(Be),V.notEnumerableProp(ge,"stack",function(ge,Ee){for(var Ue=0;Ue<Ee.length-1;++Ue)Ee[Ue].push("From previous event:"),Ee[Ue]=Ee[Ue].join("\n");return Ue<Ee.length&&(Ee[Ue]=Ee[Ue].join("\n")),ge+"\n"+Ee.join("\n")}(Ue,Be)),V.notEnumerableProp(ge,"__stackCleaned__",!0)}};var Pe=function(){var ge=/^\s*at\s*/,Ee=function(Ze,tt){return"string"==typeof Ze?Ze:void 0!==tt.name&&void 0!==tt.message?tt.toString():pe(tt)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,re=ge,de=Ee;var Ue=Error.captureStackTrace;return Oe=function(Ze){return H.test(Ze)},function(Ze,tt){Error.stackTraceLimit+=6,Ue(Ze,tt),Error.stackTraceLimit-=6}}var Qe,Be=new Error;if("string"==typeof Be.stack&&Be.stack.split("\n")[0].indexOf("stackDetection@")>=0)return re=/@/,de=Ee,le=!0,function(Ze){Ze.stack=(new Error).stack};try{throw new Error}catch(Ze){Qe="stack"in Ze}return"stack"in Be||!Qe||"number"!=typeof Error.stackTraceLimit?(de=function(Ze,tt){return"string"==typeof Ze?Ze:"object"!=typeof tt&&"function"!=typeof tt||void 0===tt.name||void 0===tt.message?pe(tt):tt.toString()},null):(re=ge,de=Ee,function(Ze){Error.stackTraceLimit+=6;try{throw new Error}catch(tt){Ze.stack=tt.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(Ge=function(ge){console&&console.warn&&console.warn(ge)},V.isNode&&process.stderr.isTTY?Ge=function(ge,Ee){console&&console.warn&&console.warn((Ee?"\x1b[33m":"\x1b[31m")+ge+"\x1b[0m\n")}:V.isNode||"string"!=typeof(new Error).stack||(Ge=function(ge,Ee){console&&console.warn&&console.warn("%c"+ge,Ee?"color: darkorange":"color: red")}));var ze={warnings:Ae,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return Se&&u.longStackTraces(),{asyncHooks:function(){return ze.asyncHooks},longStackTraces:function(){return ze.longStackTraces},warnings:function(){return ze.warnings},cancellation:function(){return ze.cancellation},monitoring:function(){return ze.monitoring},propagateFromFunction:function(){return De},boundValueFunction:function(){return E},checkForgottenReturns:function(ge,Ee,Ue,Be,Qe){if(void 0===ge&&null!==Ee&&ye){if(void 0!==Qe&&Qe._returnedNonUndefined()||0==(65535&Be._bitField))return;Ue&&(Ue+=" ");var Ze="",tt="";if(Ee._trace){for(var lt=Ee._trace.stack.split("\n"),dt=Z(lt),_t=dt.length-1;_t>=0;--_t){var Rt=dt[_t];if(!j.test(Rt)){var xt=Rt.match(q);xt&&(Ze="at "+xt[1]+":"+xt[2]+":"+xt[3]+" ");break}}if(dt.length>0){var Pt=dt[0];for(_t=0;_t<lt.length;++_t)if(lt[_t]===Pt){_t>0&&(tt="\n"+lt[_t-1]);break}}}Be._warn("a promise was created in a "+Ue+"handler "+Ze+"but was not returned from it, see http://goo.gl/rRqMUw"+tt,!0,Ee)}},setBounds:function(ge,Ee){if(K()){for(var Ue,Be,Qe=(ge.stack||"").split("\n"),Ze=(Ee.stack||"").split("\n"),tt=-1,lt=-1,dt=0;dt<Qe.length;++dt)if(_t=G(Qe[dt])){Ue=_t.fileName,tt=_t.line;break}for(dt=0;dt<Ze.length;++dt){var _t;if(_t=G(Ze[dt])){Be=_t.fileName,lt=_t.line;break}}0>tt||0>lt||!Ue||!Be||Ue!==Be||tt>=lt||(Oe=function(Rt){if(H.test(Rt))return!0;var xt=G(Rt);return!!(xt&&xt.fileName===Ue&&tt<=xt.line&&xt.line<=lt)})}},warn:w,deprecated:function(ge,Ee){var Ue=ge+" is deprecated and will be removed in a future version.";return Ee&&(Ue+=" Use "+Ee+" instead."),w(Ue)},CapturedTrace:ie,fireDomEvent:ke,fireGlobalEvent:$e}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(l,d,c){d.exports=function(u){function h(){return this.value}function f(){throw this.reason}u.prototype.return=u.prototype.thenReturn=function(g){return g instanceof u&&g.suppressUnhandledRejections(),this._then(h,void 0,void 0,{value:g},void 0)},u.prototype.throw=u.prototype.thenThrow=function(g){return this._then(f,void 0,void 0,{reason:g},void 0)},u.prototype.catchThrow=function(g){if(arguments.length<=1)return this._then(void 0,f,void 0,{reason:g},void 0);var v=arguments[1],p=function(){throw v};return this.caught(g,p)},u.prototype.catchReturn=function(g){if(arguments.length<=1)return g instanceof u&&g.suppressUnhandledRejections(),this._then(void 0,h,void 0,{value:g},void 0);var v=arguments[1];v instanceof u&&v.suppressUnhandledRejections();var p=function(){return v};return this.caught(g,p)}}},{}],11:[function(l,d,c){d.exports=function(u,h){function f(){return p(this)}var v=u.reduce,p=u.all;u.prototype.each=function(m){return v(this,m,h,0)._then(f,void 0,void 0,this,void 0)},u.prototype.mapSeries=function(m){return v(this,m,h,h)},u.each=function(m,I){return v(m,I,h,0)._then(f,void 0,void 0,m,void 0)},u.mapSeries=function(m,I){return v(m,I,h,h)}}},{}],12:[function(l,d,c){function u(F,k){function w(S){return this instanceof w?(y(this,"message","string"==typeof S?S:k),y(this,"name",F),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new w(S)}return I(w,Error),w}function h(F){return this instanceof h?(y(this,"name","OperationalError"),y(this,"message",F),this.cause=F,this.isOperational=!0,void(F instanceof Error?(y(this,"message",F.message),y(this,"stack",F.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new h(F)}var f,g,v=l("./es5"),p=v.freeze,m=l("./util"),I=m.inherits,y=m.notEnumerableProp,_=u("Warning","warning"),C=u("CancellationError","cancellation error"),A=u("TimeoutError","timeout error"),M=u("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(F){f=u("TypeError","type error"),g=u("RangeError","range error")}for(var E="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),R=0;R<E.length;++R)"function"==typeof Array.prototype[E[R]]&&(M.prototype[E[R]]=Array.prototype[E[R]]);v.defineProperty(M.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),M.prototype.isOperational=!0;var x=0;M.prototype.toString=function(){var F=Array(4*x+1).join(" "),k="\n"+F+"AggregateError of:\n";x++,F=Array(4*x+1).join(" ");for(var w=0;w<this.length;++w){for(var S=this[w]===this?"[Circular AggregateError]":this[w]+"",L=S.split("\n"),U=0;U<L.length;++U)L[U]=F+L[U];k+=(S=L.join("\n"))+"\n"}return x--,k},I(h,Error);var P=Error.__BluebirdErrorTypes__;P||(P=p({CancellationError:C,TimeoutError:A,OperationalError:h,RejectionError:h,AggregateError:M}),v.defineProperty(Error,"__BluebirdErrorTypes__",{value:P,writable:!1,enumerable:!1,configurable:!1})),d.exports={Error,TypeError:f,RangeError:g,CancellationError:P.CancellationError,OperationalError:P.OperationalError,TimeoutError:P.TimeoutError,AggregateError:P.AggregateError,Warning:_}},{"./es5":13,"./util":36}],13:[function(l,d,c){var u=function(){return void 0===this}();if(u)d.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:u,propertyIsWritable:function(C,A){var M=Object.getOwnPropertyDescriptor(C,A);return!(M&&!M.writable&&!M.set)}};else{var h={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,v=function(C){var A=[];for(var M in C)h.call(C,M)&&A.push(M);return A};d.exports={isArray:function(C){try{return"[object Array]"===f.call(C)}catch(A){return!1}},keys:v,names:v,defineProperty:function(C,A,M){return C[A]=M.value,C},getDescriptor:function(C,A){return{value:C[A]}},freeze:function(C){return C},getPrototypeOf:function(C){try{return Object(C).constructor.prototype}catch(A){return g}},isES5:u,propertyIsWritable:function(){return!0}}}},{}],14:[function(l,d,c){d.exports=function(u,h){var f=u.map;u.prototype.filter=function(g,v){return f(this,g,v,h)},u.filter=function(g,v,p){return f(g,v,p,h)}}},{}],15:[function(l,d,c){d.exports=function(u,h,f){function g(E,R,x){this.promise=E,this.type=R,this.handler=x,this.called=!1,this.cancelPromise=null}function v(E){this.finallyHandler=E}function p(E,R){return null!=E.cancelPromise&&(arguments.length>1?E.cancelPromise._reject(R):E.cancelPromise._cancel(),E.cancelPromise=null,!0)}function m(){return y.call(this,this.promise._target()._settledValue())}function I(E){return p(this,E)?void 0:(A.e=E,A)}function y(E){var R=this.promise,x=this.handler;if(!this.called){this.called=!0;var P=this.isFinallyHandler()?x.call(R._boundValue()):x.call(R._boundValue(),E);if(P===f)return P;if(void 0!==P){R._setReturnedNonUndefined();var F=h(P,R);if(F instanceof u){if(null!=this.cancelPromise){if(F._isCancelled()){var k=new C("late cancellation observer");return R._attachExtraTrace(k),A.e=k,A}F.isPending()&&F._attachCancellationCallback(new v(this))}return F._then(m,I,void 0,this,void 0)}}}return R.isRejected()?(p(this),A.e=E,A):(p(this),E)}var _=l("./util"),C=u.CancellationError,A=_.errorObj,M=l("./catch_filter")(f);return g.prototype.isFinallyHandler=function(){return 0===this.type},v.prototype._resultCancelled=function(){p(this.finallyHandler)},u.prototype._passThrough=function(E,R,x,P){return"function"!=typeof E?this.then():this._then(x,P,void 0,new g(this,R,E),void 0)},u.prototype.lastly=u.prototype.finally=function(E){return this._passThrough(E,0,y,y)},u.prototype.tap=function(E){return this._passThrough(E,1,y)},u.prototype.tapCatch=function(E){var R=arguments.length;if(1===R)return this._passThrough(E,1,void 0,y);var x,P=new Array(R-1),F=0;for(x=0;R-1>x;++x){var k=arguments[x];if(!_.isObject(k))return u.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+_.classString(k)));P[F++]=k}P.length=F;var w=arguments[x];return this._passThrough(M(P,w,this),1,void 0,y)},g}},{"./catch_filter":7,"./util":36}],16:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function I(R,x,P,F){if(p.cancellation()){var k=new u(f),w=this._finallyPromise=new u(f);this._promise=k.lastly(function(){return w}),k._captureStackTrace(),k._setOnCancel(this)}else(this._promise=new u(f))._captureStackTrace();this._stack=F,this._generatorFunction=R,this._receiver=x,this._generator=void 0,this._yieldHandlers="function"==typeof P?[P].concat(E):E,this._yieldedPromise=null,this._cancellationPhase=!1}var _=l("./errors").TypeError,C=l("./util"),A=C.errorObj,M=C.tryCatch,E=[];C.inherits(I,v),I.prototype._isResolved=function(){return null===this._promise},I.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},I.prototype._promiseCancelled=function(){if(!this._isResolved()){var R;if(void 0!==this._generator.return)this._promise._pushContext(),R=M(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var P=new u.CancellationError("generator .return() sentinel");u.coroutine.returnSentinel=P,this._promise._attachExtraTrace(P),this._promise._pushContext(),R=M(this._generator.throw).call(this._generator,P),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(R)}},I.prototype._promiseFulfilled=function(R){this._yieldedPromise=null,this._promise._pushContext();var x=M(this._generator.next).call(this._generator,R);this._promise._popContext(),this._continue(x)},I.prototype._promiseRejected=function(R){this._yieldedPromise=null,this._promise._attachExtraTrace(R),this._promise._pushContext();var x=M(this._generator.throw).call(this._generator,R);this._promise._popContext(),this._continue(x)},I.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof u){var R=this._yieldedPromise;this._yieldedPromise=null,R.cancel()}},I.prototype.promise=function(){return this._promise},I.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},I.prototype._continue=function(R){var x=this._promise;if(R===A)return this._cleanup(),this._cancellationPhase?x.cancel():x._rejectCallback(R.e,!1);var P=R.value;if(!0===R.done)return this._cleanup(),this._cancellationPhase?x.cancel():x._resolveCallback(P);var F=g(P,this._promise);if(F instanceof u||null!==(F=function(R,x,P){for(var F=0;F<x.length;++F){P._pushContext();var k=M(x[F])(R);if(P._popContext(),k===A){P._pushContext();var w=u.reject(A.e);return P._popContext(),w}var S=g(k,P);if(S instanceof u)return S}return null}(F,this._yieldHandlers,this._promise))){var k=(F=F._target())._bitField;0==(50397184&k)?(this._yieldedPromise=F,F._proxy(this,null)):0!=(33554432&k)?u._async.invoke(this._promiseFulfilled,this,F._value()):0!=(16777216&k)?u._async.invoke(this._promiseRejected,this,F._reason()):this._promiseCancelled()}else this._promiseRejected(new _("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(P))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},u.coroutine=function(R,x){if("function"!=typeof R)throw new _("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var P=Object(x).yieldHandler,F=I,k=(new Error).stack;return function(){var w=R.apply(this,arguments),S=new F(void 0,void 0,P,k),L=S.promise();return S._generator=w,S._promiseFulfilled(void 0),L}},u.coroutine.addYieldHandler=function(R){if("function"!=typeof R)throw new _("expecting a function but got "+C.classString(R));E.push(R)},u.spawn=function(R){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof R)return h("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var x=new I(R,this),P=x.promise();return x._run(u.spawn),P}}},{"./errors":12,"./util":36}],17:[function(l,d,c){d.exports=function(u,h,f,g,v){l("./util"),u.join=function(){var m,I=arguments.length-1;I>0&&"function"==typeof arguments[I]&&(m=arguments[I]);var y=[].slice.call(arguments);m&&y.pop();var _=new h(y).promise();return void 0!==m?_.spread(m):_}}},{"./util":36}],18:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(M,E,R,x){this.constructor$(M),this._promise._captureStackTrace();var P=u._getContext();if(this._callback=y.contextBind(P,E),this._preservedValues=x===v?new Array(this.length()):null,this._limit=R,this._inFlight=0,this._queue=[],A.invoke(this._asyncInit,this,void 0),y.isArray(M))for(var F=0;F<M.length;++F){var k=M[F];k instanceof u&&k.suppressUnhandledRejections()}}function I(M,E,R,x){if("function"!=typeof E)return f("expecting a function but got "+y.classString(E));var P=0;if(void 0!==R){if("object"!=typeof R||null===R)return u.reject(new TypeError("options argument must be an object but it is "+y.classString(R)));if("number"!=typeof R.concurrency)return u.reject(new TypeError("'concurrency' must be a number but it is "+y.classString(R.concurrency)));P=R.concurrency}return new m(M,E,P="number"==typeof P&&isFinite(P)&&P>=1?P:0,x).promise()}var y=l("./util"),_=y.tryCatch,C=y.errorObj,A=u._async;y.inherits(m,h),m.prototype._asyncInit=function(){this._init$(void 0,-2)},m.prototype._init=function(){},m.prototype._promiseFulfilled=function(M,E){var R=this._values,x=this.length(),P=this._preservedValues,F=this._limit;if(0>E){if(R[E=-1*E-1]=M,F>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(F>=1&&this._inFlight>=F)return R[E]=M,this._queue.push(E),!1;null!==P&&(P[E]=M);var k=this._promise,w=this._callback,S=k._boundValue();k._pushContext();var L=_(w).call(S,M,E,x),U=k._popContext();if(p.checkForgottenReturns(L,U,null!==P?"Promise.filter":"Promise.map",k),L===C)return this._reject(L.e),!0;var Z=g(L,this._promise);if(Z instanceof u){var ne=(Z=Z._target())._bitField;if(0==(50397184&ne))return F>=1&&this._inFlight++,R[E]=Z,Z._proxy(this,-1*(E+1)),!1;if(0==(33554432&ne))return 0!=(16777216&ne)?(this._reject(Z._reason()),!0):(this._cancel(),!0);L=Z._value()}R[E]=L}return++this._totalResolved>=x&&(null!==P?this._filter(R,P):this._resolve(R),!0)},m.prototype._drainQueue=function(){for(var M=this._queue,E=this._limit,R=this._values;M.length>0&&this._inFlight<E;){if(this._isResolved())return;var x=M.pop();this._promiseFulfilled(R[x],x)}},m.prototype._filter=function(M,E){for(var R=E.length,x=new Array(R),P=0,F=0;R>F;++F)M[F]&&(x[P++]=E[F]);x.length=P,this._resolve(x)},m.prototype.preservedValues=function(){return this._preservedValues},u.prototype.map=function(M,E){return I(this,M,E,null)},u.map=function(M,E,R,x){return I(M,E,R,x)}}},{"./util":36}],19:[function(l,d,c){d.exports=function(u,h,f,g,v){var p=l("./util"),m=p.tryCatch;u.method=function(I){if("function"!=typeof I)throw new u.TypeError("expecting a function but got "+p.classString(I));return function(){var y=new u(h);y._captureStackTrace(),y._pushContext();var _=m(I).apply(this,arguments),C=y._popContext();return v.checkForgottenReturns(_,C,"Promise.method",y),y._resolveFromSyncValue(_),y}},u.attempt=u.try=function(I){if("function"!=typeof I)return g("expecting a function but got "+p.classString(I));var _,y=new u(h);if(y._captureStackTrace(),y._pushContext(),arguments.length>1){v.deprecated("calling Promise.try with more than 1 argument");var C=arguments[1],A=arguments[2];_=p.isArray(C)?m(I).apply(A,C):m(I).call(A,C)}else _=m(I)();var M=y._popContext();return v.checkForgottenReturns(_,M,"Promise.try",y),y._resolveFromSyncValue(_),y},u.prototype._resolveFromSyncValue=function(I){I===p.errorObj?this._rejectCallback(I.e,!1):this._resolveCallback(I,!0)}}},{"./util":36}],20:[function(l,d,c){function h(_){var C;if(function(_){return _ instanceof Error&&I.getPrototypeOf(_)===Error.prototype}(_)){(C=new m(_)).name=_.name,C.message=_.message,C.stack=_.stack;for(var A=I.keys(_),M=0;M<A.length;++M){var E=A[M];y.test(E)||(C[E]=_[E])}return C}return g.markAsOriginatingFromRejection(_),_}var g=l("./util"),v=g.maybeWrapAsError,m=l("./errors").OperationalError,I=l("./es5"),y=/^(?:name|message|stack|cause)$/;d.exports=function(_,C){return function(A,M){if(null!==_){if(A){var E=h(v(A));_._attachExtraTrace(E),_._reject(E)}else if(C){var R=[].slice.call(arguments,1);_._fulfill(R)}else _._fulfill(M);_=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(l,d,c){d.exports=function(u){function h(y,_){if(!v.isArray(y))return f.call(this,y,_);var A=m(_).apply(this._boundValue(),[null].concat(y));A===I&&p.throwLater(A.e)}function f(y,_){var A=this._boundValue(),M=void 0===y?m(_).call(A,null):m(_).call(A,null,y);M===I&&p.throwLater(M.e)}function g(y,_){if(!y){var A=new Error(y+"");A.cause=y,y=A}var M=m(_).call(this._boundValue(),y);M===I&&p.throwLater(M.e)}var v=l("./util"),p=u._async,m=v.tryCatch,I=v.errorObj;u.prototype.asCallback=u.prototype.nodeify=function(y,_){if("function"==typeof y){var C=f;void 0!==_&&Object(_).spread&&(C=h),this._then(C,g,void 0,this,y)}return this}}},{"./util":36}],22:[function(l,d,c){d.exports=function(){function u(){}function f(he){he!==oe&&function(he,ae){if(null==he||he.constructor!==f)throw new Z("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof ae)throw new Z("expecting a function but got "+C.classString(ae))}(this,he),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(he),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(he){this.promise._resolveCallback(he)}function v(he){this.promise._rejectCallback(he,!1)}function p(he){var ae=new f(oe);ae._fulfillmentHandler0=he,ae._rejectionHandler0=he,ae._promise0=he,ae._receiver0=he}var m=function(){return new Z("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},I=function(){return new f.PromiseInspection(this._target())},y=function(he){return f.reject(new Z(he))},_={},C=l("./util");C.setReflectHandler(I);var A=function(){var he=process.domain;return void 0===he?null:he},E=function(){return{domain:A(),async:null}},R=C.isNode&&C.nodeSupportsAsyncResource?l("async_hooks").AsyncResource:null,x=function(){return{domain:A(),async:new R("Bluebird::Promise")}},P=C.isNode?E:function(){return null};C.notEnumerableProp(f,"_getContext",P);var w=l("./es5"),S=l("./async"),L=new S;w.defineProperty(f,"_async",{value:L});var U=l("./errors"),Z=f.TypeError=U.TypeError;f.RangeError=U.RangeError;var ne=f.CancellationError=U.CancellationError;f.TimeoutError=U.TimeoutError,f.OperationalError=U.OperationalError,f.RejectionError=U.OperationalError,f.AggregateError=U.AggregateError;var oe=function(){},ue={},X={},pe=l("./thenables")(f,oe),B=l("./promise_array")(f,oe,pe,y,u),K=l("./context")(f),G=K.create,ee=l("./debuggability")(f,K,function(){P=x,C.notEnumerableProp(f,"_getContext",x)},function(){P=E,C.notEnumerableProp(f,"_getContext",E)}),ie=l("./finally")(f,pe,X),be=l("./catch_filter")(X),Te=l("./nodeback"),Ge=C.errorObj,je=C.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(he){var ae=arguments.length;if(ae>1){var V,Q=new Array(ae-1),me=0;for(V=0;ae-1>V;++V){var H=arguments[V];if(!C.isObject(H))return y("Catch statement predicate: expecting an object but got "+C.classString(H));Q[me++]=H}if(Q.length=me,"function"!=typeof(he=arguments[V]))throw new Z("The last argument to .catch() must be a function, got "+C.toString(he));return this.then(void 0,be(Q,he,this))}return this.then(void 0,he)},f.prototype.reflect=function(){return this._then(I,I,void 0,this,void 0)},f.prototype.then=function(he,ae){if(ee.warnings()&&arguments.length>0&&"function"!=typeof he&&"function"!=typeof ae){var V=".then() only accepts functions but was passed: "+C.classString(he);arguments.length>1&&(V+=", "+C.classString(ae)),this._warn(V)}return this._then(he,ae,void 0,void 0,void 0)},f.prototype.done=function(he,ae){this._then(he,ae,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(he){return"function"!=typeof he?y("expecting a function but got "+C.classString(he)):this.all()._then(he,void 0,void 0,ue,void 0)},f.prototype.toJSON=function(){var he={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(he.fulfillmentValue=this.value(),he.isFulfilled=!0):this.isRejected()&&(he.rejectionReason=this.reason(),he.isRejected=!0),he},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new B(this).promise()},f.prototype.error=function(he){return this.caught(C.originatesFromRejection,he)},f.getNewLibraryCopy=d.exports,f.is=function(he){return he instanceof f},f.fromNode=f.fromCallback=function(he){var ae=new f(oe);ae._captureStackTrace();var V=arguments.length>1&&!!Object(arguments[1]).multiArgs,Q=je(he)(Te(ae,V));return Q===Ge&&ae._rejectCallback(Q.e,!0),ae._isFateSealed()||ae._setAsyncGuaranteed(),ae},f.all=function(he){return new B(he).promise()},f.cast=function(he){var ae=pe(he);return ae instanceof f||((ae=new f(oe))._captureStackTrace(),ae._setFulfilled(),ae._rejectionHandler0=he),ae},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(he){var ae=new f(oe);return ae._captureStackTrace(),ae._rejectCallback(he,!0),ae},f.setScheduler=function(he){if("function"!=typeof he)throw new Z("expecting a function but got "+C.classString(he));return L.setScheduler(he)},f.prototype._then=function(he,ae,V,Q,me){var H=void 0!==me,j=H?me:new f(oe),q=this._target(),re=q._bitField;H||(j._propagateFrom(this,3),j._captureStackTrace(),void 0===Q&&0!=(2097152&this._bitField)&&(Q=0!=(50397184&re)?this._boundValue():q===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,j));var de=P();if(0!=(50397184&re)){var le,we,Ae=q._settlePromiseCtx;0!=(33554432&re)?(we=q._rejectionHandler0,le=he):0!=(16777216&re)?(we=q._fulfillmentHandler0,le=ae,q._unsetRejectionIsUnhandled()):(Ae=q._settlePromiseLateCancellationObserver,we=new ne("late cancellation observer"),q._attachExtraTrace(we),le=ae),L.invoke(Ae,q,{handler:C.contextBind(de,le),promise:j,receiver:Q,value:we})}else q._addCallbacks(he,ae,j,Q,de);return j},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(he){this._bitField=-65536&this._bitField|65535&he},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){if(!L.hasCustomScheduler()){var he=this._bitField;this._bitField=he|(536870912&he)>>2^134217728}},f.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},f.prototype._receiverAt=function(he){var ae=0===he?this._receiver0:this[4*he-4+3];return ae===_?void 0:void 0===ae&&this._isBound()?this._boundValue():ae},f.prototype._promiseAt=function(he){return this[4*he-4+2]},f.prototype._fulfillmentHandlerAt=function(he){return this[4*he-4+0]},f.prototype._rejectionHandlerAt=function(he){return this[4*he-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(he){var ae=he._fulfillmentHandler0,V=he._rejectionHandler0,Q=he._promise0,me=he._receiverAt(0);void 0===me&&(me=_),this._addCallbacks(ae,V,Q,me,null)},f.prototype._migrateCallbackAt=function(he,ae){var V=he._fulfillmentHandlerAt(ae),Q=he._rejectionHandlerAt(ae),me=he._promiseAt(ae),H=he._receiverAt(ae);void 0===H&&(H=_),this._addCallbacks(V,Q,me,H,null)},f.prototype._addCallbacks=function(he,ae,V,Q,me){var H=this._length();if(H>=65531&&(H=0,this._setLength(0)),0===H)this._promise0=V,this._receiver0=Q,"function"==typeof he&&(this._fulfillmentHandler0=C.contextBind(me,he)),"function"==typeof ae&&(this._rejectionHandler0=C.contextBind(me,ae));else{var j=4*H-4;this[j+2]=V,this[j+3]=Q,"function"==typeof he&&(this[j+0]=C.contextBind(me,he)),"function"==typeof ae&&(this[j+1]=C.contextBind(me,ae))}return this._setLength(H+1),H},f.prototype._proxy=function(he,ae){this._addCallbacks(void 0,void 0,ae,he,null)},f.prototype._resolveCallback=function(he,ae){if(0==(117506048&this._bitField)){if(he===this)return this._rejectCallback(m(),!1);var V=pe(he,this);if(!(V instanceof f))return this._fulfill(he);ae&&this._propagateFrom(V,2);var Q=V._target();if(Q===this)return void this._reject(m());var me=Q._bitField;if(0==(50397184&me)){var H=this._length();H>0&&Q._migrateCallback0(this);for(var j=1;H>j;++j)Q._migrateCallbackAt(this,j);this._setFollowing(),this._setLength(0),this._setFollowee(V)}else if(0!=(33554432&me))this._fulfill(Q._value());else if(0!=(16777216&me))this._reject(Q._reason());else{var q=new ne("late cancellation observer");Q._attachExtraTrace(q),this._reject(q)}}},f.prototype._rejectCallback=function(he,ae,V){var Q=C.ensureErrorObject(he),me=Q===he;if(!me&&!V&&ee.warnings()){var H="a promise was rejected with a non-error: "+C.classString(he);this._warn(H,!0)}this._attachExtraTrace(Q,!!ae&&me),this._reject(he)},f.prototype._resolveFromExecutor=function(he){if(he!==oe){var ae=this;this._captureStackTrace(),this._pushContext();var V=!0,Q=this._execute(he,function(me){ae._resolveCallback(me)},function(me){ae._rejectCallback(me,V)});V=!1,this._popContext(),void 0!==Q&&ae._rejectCallback(Q,!0)}},f.prototype._settlePromiseFromHandler=function(he,ae,V,Q){var me=Q._bitField;if(0==(65536&me)){var H;Q._pushContext(),ae===ue?V&&"number"==typeof V.length?H=je(he).apply(this._boundValue(),V):(H=Ge).e=new Z("cannot .spread() a non-array: "+C.classString(V)):H=je(he).call(ae,V);var j=Q._popContext();0==(65536&(me=Q._bitField))&&(H===X?Q._reject(V):H===Ge?Q._rejectCallback(H.e,!1):(ee.checkForgottenReturns(H,j,"",Q,this),Q._resolveCallback(H)))}},f.prototype._target=function(){for(var he=this;he._isFollowing();)he=he._followee();return he},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(he){this._rejectionHandler0=he},f.prototype._settlePromise=function(he,ae,V,Q){var me=he instanceof f,H=this._bitField,j=0!=(134217728&H);0!=(65536&H)?(me&&he._invokeInternalOnCancel(),V instanceof ie&&V.isFinallyHandler()?(V.cancelPromise=he,je(ae).call(V,Q)===Ge&&he._reject(Ge.e)):ae===I?he._fulfill(I.call(V)):V instanceof u?V._promiseCancelled(he):me||he instanceof B?he._cancel():V.cancel()):"function"==typeof ae?me?(j&&he._setAsyncGuaranteed(),this._settlePromiseFromHandler(ae,V,Q,he)):ae.call(V,Q,he):V instanceof u?V._isResolved()||(0!=(33554432&H)?V._promiseFulfilled(Q,he):V._promiseRejected(Q,he)):me&&(j&&he._setAsyncGuaranteed(),0!=(33554432&H)?he._fulfill(Q):he._reject(Q))},f.prototype._settlePromiseLateCancellationObserver=function(he){var ae=he.handler,V=he.promise,Q=he.receiver,me=he.value;"function"==typeof ae?V instanceof f?this._settlePromiseFromHandler(ae,Q,me,V):ae.call(Q,me,V):V instanceof f&&V._reject(me)},f.prototype._settlePromiseCtx=function(he){this._settlePromise(he.promise,he.handler,he.receiver,he.value)},f.prototype._settlePromise0=function(he,ae,V){var Q=this._promise0,me=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Q,he,me,ae)},f.prototype._clearCallbackDataAtIndex=function(he){var ae=4*he-4;this[ae+2]=this[ae+3]=this[ae+0]=this[ae+1]=void 0},f.prototype._fulfill=function(he){var ae=this._bitField;if(!((117506048&ae)>>>16)){if(he===this){var V=m();return this._attachExtraTrace(V),this._reject(V)}this._setFulfilled(),this._rejectionHandler0=he,(65535&ae)>0&&(0!=(134217728&ae)?this._settlePromises():L.settlePromises(this),this._dereferenceTrace())}},f.prototype._reject=function(he){var ae=this._bitField;if(!((117506048&ae)>>>16))return this._setRejected(),this._fulfillmentHandler0=he,this._isFinal()?L.fatalError(he,C.isNode):void((65535&ae)>0?L.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(he,ae){for(var V=1;he>V;V++){var Q=this._fulfillmentHandlerAt(V),me=this._promiseAt(V),H=this._receiverAt(V);this._clearCallbackDataAtIndex(V),this._settlePromise(me,Q,H,ae)}},f.prototype._rejectPromises=function(he,ae){for(var V=1;he>V;V++){var Q=this._rejectionHandlerAt(V),me=this._promiseAt(V),H=this._receiverAt(V);this._clearCallbackDataAtIndex(V),this._settlePromise(me,Q,H,ae)}},f.prototype._settlePromises=function(){var he=this._bitField,ae=65535&he;if(ae>0){if(0!=(16842752&he)){var V=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,V,he),this._rejectPromises(ae,V)}else{var Q=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Q,he),this._fulfillPromises(ae,Q)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var he=this._bitField;return 0!=(33554432&he)?this._rejectionHandler0:0!=(16777216&he)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&w.defineProperty(f.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),f.defer=f.pending=function(){return ee.deprecated("Promise.defer","new Promise"),{promise:new f(oe),resolve:g,reject:v}},C.notEnumerableProp(f,"_makeSelfResolutionError",m),l("./method")(f,oe,pe,y,ee),l("./bind")(f,oe,pe,ee),l("./cancel")(f,B,y,ee),l("./direct_resolve")(f),l("./synchronous_inspection")(f),l("./join")(f,B,pe,oe,L),f.Promise=f,f.version="3.7.2",l("./call_get.js")(f),l("./generators.js")(f,y,oe,pe,u,ee),l("./map.js")(f,B,y,pe,oe,ee),l("./nodeify.js")(f),l("./promisify.js")(f,oe),l("./props.js")(f,B,pe,y),l("./race.js")(f,oe,pe,y),l("./reduce.js")(f,B,y,pe,oe,ee),l("./settle.js")(f,B,ee),l("./some.js")(f,B,y),l("./timers.js")(f,oe,ee),l("./using.js")(f,y,pe,G,oe,ee),l("./any.js")(f),l("./each.js")(f,oe),l("./filter.js")(f,oe),C.toFastProperties(f),C.toFastProperties(f.prototype),p({a:1}),p({b:2}),p({c:3}),p(1),p(function(){}),p(void 0),p(!1),p(new f(oe)),ee.setBounds(S.firstLineError,C.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(l,d,c){d.exports=function(u,h,f,g,v){function m(y){var _=this._promise=new u(h);y instanceof u&&(_._propagateFrom(y,3),y.suppressUnhandledRejections()),_._setOnCancel(this),this._values=y,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var I=l("./util");return I.inherits(m,v),m.prototype.length=function(){return this._length},m.prototype.promise=function(){return this._promise},m.prototype._init=function y(_,C){var A=f(this._values,this._promise);if(A instanceof u){var M=(A=A._target())._bitField;if(this._values=A,0==(50397184&M))return this._promise._setAsyncGuaranteed(),A._then(y,this._reject,void 0,this,C);if(0==(33554432&M))return 0!=(16777216&M)?this._reject(A._reason()):this._cancel();A=A._value()}if(null!==(A=I.asArray(A)))return 0===A.length?void(-5===C?this._resolveEmptyArray():this._resolve(function(y){switch(y){case-2:return[];case-3:return{};case-6:return new Map}}(C))):void this._iterate(A);var E=g("expecting an array or an iterable object but got "+I.classString(A)).reason();this._promise._rejectCallback(E,!1)},m.prototype._iterate=function(y){var _=this.getActualLength(y.length);this._length=_,this._values=this.shouldCopyValues()?new Array(_):this._values;for(var C=this._promise,A=!1,M=null,E=0;_>E;++E){var R=f(y[E],C);M=R instanceof u?(R=R._target())._bitField:null,A?null!==M&&R.suppressUnhandledRejections():null!==M?0==(50397184&M)?(R._proxy(this,E),this._values[E]=R):A=0!=(33554432&M)?this._promiseFulfilled(R._value(),E):0!=(16777216&M)?this._promiseRejected(R._reason(),E):this._promiseCancelled(E):A=this._promiseFulfilled(R,E)}A||C._setAsyncGuaranteed()},m.prototype._isResolved=function(){return null===this._values},m.prototype._resolve=function(y){this._values=null,this._promise._fulfill(y)},m.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},m.prototype._reject=function(y){this._values=null,this._promise._rejectCallback(y,!1)},m.prototype._promiseFulfilled=function(y,_){return this._values[_]=y,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseCancelled=function(){return this._cancel(),!0},m.prototype._promiseRejected=function(y){return this._totalResolved++,this._reject(y),!0},m.prototype._resultCancelled=function(){if(!this._isResolved()){var y=this._values;if(this._cancel(),y instanceof u)y.cancel();else for(var _=0;_<y.length;++_)y[_]instanceof u&&y[_].cancel()}},m.prototype.shouldCopyValues=function(){return!0},m.prototype.getActualLength=function(y){return y},m}},{"./util":36}],24:[function(l,d,c){d.exports=function(u,h){function f(oe){return!L.test(oe)}function g(oe){try{return!0===oe.__isPromisified__}catch(ue){return!1}}function v(oe,ue,X){var pe=M.getDataPropertyOrDefault(oe,ue+X,w);return!!pe&&g(pe)}function y(oe,ue,X,pe,B){for(var K=new RegExp(Z(ue)+"$"),G=function(oe,ue,X,pe){for(var B=M.inheritedDataKeys(oe),K=[],G=0;G<B.length;++G){var ee=B[G],ie=oe[ee],be=pe===U||U(ee,ie,oe);"function"!=typeof ie||g(ie)||v(oe,ee,ue)||!pe(ee,ie,oe,be)||K.push(ee,ie)}return function(oe,ue,X){for(var pe=0;pe<oe.length;pe+=2){var B=oe[pe];if(X.test(B))for(var K=B.replace(X,""),G=0;G<oe.length;G+=2)if(oe[G]===K)throw new F("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",ue))}}(K,ue,X),K}(oe,ue,K,X),ee=0,ie=G.length;ie>ee;ee+=2){var be=G[ee],Te=G[ee+1],Ge=be+ue;if(pe===ne)oe[Ge]=ne(be,A,be,Te,ue,B);else{var je=pe(Te,function(){return ne(be,A,be,Te,ue,B)});M.notEnumerableProp(je,"__isPromisified__",!0),oe[Ge]=je}}return M.toFastProperties(oe),oe}var A={},M=l("./util"),E=l("./nodeback"),R=M.withAppended,x=M.maybeWrapAsError,P=M.canEvaluate,F=l("./errors").TypeError,w={__isPromisified__:!0},L=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),U=function(oe){return M.isIdentifier(oe)&&"_"!==oe.charAt(0)&&"constructor"!==oe},Z=function(oe){return oe.replace(/([$])/,"\\$")},ne=P?void 0:function(oe,ue,X,pe,B,K){function G(){var be=ue;ue===A&&(be=this);var Te=new u(h);Te._captureStackTrace();var Ge="string"==typeof ie&&this!==ee?this[ie]:oe,je=E(Te,K);try{Ge.apply(be,R(arguments,je))}catch(he){Te._rejectCallback(x(he),!0,!0)}return Te._isFateSealed()||Te._setAsyncGuaranteed(),Te}var ee=function(){return this}(),ie=oe;return"string"==typeof ie&&(oe=pe),M.notEnumerableProp(G,"__isPromisified__",!0),G};u.promisify=function(oe,ue){if("function"!=typeof oe)throw new F("expecting a function but got "+M.classString(oe));if(g(oe))return oe;var B=function(oe,ue,X){return ne(oe,ue,void 0,oe,null,X)}(oe,void 0===(ue=Object(ue)).context?A:ue.context,!!ue.multiArgs);return M.copyDescriptors(oe,B,f),B},u.promisifyAll=function(oe,ue){if("function"!=typeof oe&&"object"!=typeof oe)throw new F("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var X=!!(ue=Object(ue)).multiArgs,pe=ue.suffix;"string"!=typeof pe&&(pe="Async");var B=ue.filter;"function"!=typeof B&&(B=U);var K=ue.promisifier;if("function"!=typeof K&&(K=ne),!M.isIdentifier(pe))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var G=M.inheritedDataKeys(oe),ee=0;ee<G.length;++ee){var ie=oe[G[ee]];"constructor"!==G[ee]&&M.isClass(ie)&&(y(ie.prototype,pe,B,K,X),y(ie,pe,B,K,X))}return y(oe,pe,B,K,X)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(l,d,c){d.exports=function(u,h,f,g){function v(M){var E,R=!1;if(void 0!==m&&M instanceof m)E=C(M),R=!0;else{var x=_.keys(M),P=x.length;E=new Array(2*P);for(var F=0;P>F;++F){var k=x[F];E[F]=M[k],E[F+P]=k}}this.constructor$(E),this._isMap=R,this._init$(void 0,R?-6:-3)}function p(M){var E,R=f(M);return y(R)?(E=R instanceof u?R._then(u.props,void 0,void 0,void 0,void 0):new v(R).promise(),R instanceof u&&E._propagateFrom(R,2),E):g("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var m,I=l("./util"),y=I.isObject,_=l("./es5");"function"==typeof Map&&(m=Map);var C=function(){function M(x,P){this[E]=x,this[E+R]=P,E++}var E=0,R=0;return function(x){R=x.size,E=0;var P=new Array(2*x.size);return x.forEach(M,P),P}}();I.inherits(v,h),v.prototype._init=function(){},v.prototype._promiseFulfilled=function(M,E){if(this._values[E]=M,++this._totalResolved>=this._length){var x;if(this._isMap)x=function(M){for(var E=new m,R=M.length/2|0,x=0;R>x;++x)E.set(M[R+x],M[x]);return E}(this._values);else{x={};for(var P=this.length(),F=0,k=this.length();k>F;++F)x[this._values[F+P]]=this._values[F]}return this._resolve(x),!0}return!1},v.prototype.shouldCopyValues=function(){return!1},v.prototype.getActualLength=function(M){return M>>1},u.prototype.props=function(){return p(this)},u.props=function(M){return p(M)}}},{"./es5":13,"./util":36}],26:[function(l,d,c){function h(f){this._capacity=f,this._length=0,this._front=0}h.prototype._willBeOverCapacity=function(f){return this._capacity<f},h.prototype._pushOne=function(f){var g=this.length();this._checkCapacity(g+1),this[this._front+g&this._capacity-1]=f,this._length=g+1},h.prototype.push=function(f,g,v){var p=this.length()+3;if(this._willBeOverCapacity(p))return this._pushOne(f),this._pushOne(g),void this._pushOne(v);var m=this._front+p-3;this._checkCapacity(p);var I=this._capacity-1;this[m+0&I]=f,this[m+1&I]=g,this[m+2&I]=v,this._length=p},h.prototype.shift=function(){var f=this._front,g=this[f];return this[f]=void 0,this._front=f+1&this._capacity-1,this._length--,g},h.prototype.length=function(){return this._length},h.prototype._checkCapacity=function(f){this._capacity<f&&this._resizeTo(this._capacity<<1)},h.prototype._resizeTo=function(f){var g=this._capacity;this._capacity=f,function(f,g,v,p,m){for(var I=0;m>I;++I)v[I+p]=f[I+0],f[I+0]=void 0}(this,0,this,g,this._front+this._length&g-1)},d.exports=h},{}],27:[function(l,d,c){d.exports=function(u,h,f,g){function v(I,y){var _=f(I);if(_ instanceof u)return m(_);if(null===(I=p.asArray(I)))return g("expecting an array or an iterable object but got "+p.classString(I));var C=new u(h);void 0!==y&&C._propagateFrom(y,3);for(var A=C._fulfill,M=C._reject,E=0,R=I.length;R>E;++E){var x=I[E];(void 0!==x||E in I)&&u.cast(x)._then(A,M,void 0,C,null)}return C}var p=l("./util"),m=function(I){return I.then(function(y){return v(y,I)})};u.race=function(I){return v(I,void 0)},u.prototype.race=function(){return v(this,void 0)}}},{"./util":36}],28:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(E,R,x,P){this.constructor$(E);var F=u._getContext();this._fn=A.contextBind(F,R),void 0!==x&&(x=u.resolve(x))._attachCancellationCallback(this),this._initialValue=x,this._currentCancellable=null,this._eachValues=P===v?Array(this._length):0===P?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function I(E,R){this.isFulfilled()?R._resolve(E):R._reject(E)}function y(E,R,x,P){return"function"!=typeof R?f("expecting a function but got "+A.classString(R)):new m(E,R,x,P).promise()}function _(E){this.accum=E,this.array._gotAccum(E);var R=g(this.value,this.array._promise);return R instanceof u?(this.array._currentCancellable=R,R._then(C,void 0,void 0,this,void 0)):C.call(this,R)}function C(E){var F,R=this.array,x=R._promise,P=M(R._fn);x._pushContext(),(F=void 0!==R._eachValues?P.call(x._boundValue(),E,this.index,this.length):P.call(x._boundValue(),this.accum,E,this.index,this.length))instanceof u&&(R._currentCancellable=F);var k=x._popContext();return p.checkForgottenReturns(F,k,void 0!==R._eachValues?"Promise.each":"Promise.reduce",x),F}var A=l("./util"),M=A.tryCatch;A.inherits(m,h),m.prototype._gotAccum=function(E){null!=this._eachValues&&E!==v&&this._eachValues.push(E)},m.prototype._eachComplete=function(E){return null!==this._eachValues&&this._eachValues.push(E),this._eachValues},m.prototype._init=function(){},m.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},m.prototype.shouldCopyValues=function(){return!1},m.prototype._resolve=function(E){this._promise._resolveCallback(E),this._values=null},m.prototype._resultCancelled=function(E){return E===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof u&&this._currentCancellable.cancel(),this._initialValue instanceof u&&this._initialValue.cancel()))},m.prototype._iterate=function(E){this._values=E;var R,x,P=E.length;void 0!==this._initialValue?(R=this._initialValue,x=0):(R=u.resolve(E[0]),x=1),this._currentCancellable=R;for(var F=x;P>F;++F){var k=E[F];k instanceof u&&k.suppressUnhandledRejections()}if(!R.isRejected())for(;P>x;++x)R=R._then(_,void 0,void 0,{accum:null,value:E[x],index:x,length:P,array:this},void 0),0==(127&x)&&R._setNoAsyncGuarantee();void 0!==this._eachValues&&(R=R._then(this._eachComplete,void 0,void 0,this,void 0)),R._then(I,I,void 0,R,this)},u.prototype.reduce=function(E,R){return y(this,E,R,null)},u.reduce=function(E,R,x,P){return y(E,R,x,P)}}},{"./util":36}],29:[function(l,d,c){var u,I,y,_,C,h=l("./util"),g=h.getNativePromise();if(h.isNode&&"undefined"==typeof MutationObserver){var v=global.setImmediate,p=process.nextTick;u=h.isRecentNode?function(I){v.call(global,I)}:function(I){p.call(process,I)}}else if("function"==typeof g&&"function"==typeof g.resolve){var m=g.resolve();u=function(I){m.then(I)}}else u="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(I){setImmediate(I)}:"undefined"!=typeof setTimeout?function(I){setTimeout(I,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(I=document.createElement("div"),y={attributes:!0},_=!1,C=document.createElement("div"),new MutationObserver(function(){I.classList.toggle("foo"),_=!1}).observe(C,y),function(E){var R=new MutationObserver(function(){R.disconnect(),E()});R.observe(I,y),_||(_=!0,C.classList.toggle("foo"))});d.exports=u},{"./util":36}],30:[function(l,d,c){d.exports=function(u,h,f){function g(m){this.constructor$(m)}var v=u.PromiseInspection;l("./util").inherits(g,h),g.prototype._promiseResolved=function(m,I){return this._values[m]=I,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseFulfilled=function(m,I){var y=new v;return y._bitField=33554432,y._settledValueField=m,this._promiseResolved(I,y)},g.prototype._promiseRejected=function(m,I){var y=new v;return y._bitField=16777216,y._settledValueField=m,this._promiseResolved(I,y)},u.settle=function(m){return f.deprecated(".settle()",".reflect()"),new g(m).promise()},u.allSettled=function(m){return new g(m).promise()},u.prototype.settle=function(){return u.settle(this)}}},{"./util":36}],31:[function(l,d,c){d.exports=function(u,h,f){function g(C){this.constructor$(C),this._howMany=0,this._unwrap=!1,this._initialized=!1}function v(C,A){if((0|A)!==A||0>A)return f("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var M=new g(C),E=M.promise();return M.setHowMany(A),M.init(),E}var p=l("./util"),m=l("./errors").RangeError,I=l("./errors").AggregateError,y=p.isArray,_={};p.inherits(g,h),g.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var C=y(this._values);!this._isResolved()&&C&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},g.prototype.init=function(){this._initialized=!0,this._init()},g.prototype.setUnwrap=function(){this._unwrap=!0},g.prototype.howMany=function(){return this._howMany},g.prototype.setHowMany=function(C){this._howMany=C},g.prototype._promiseFulfilled=function(C){return this._addFulfilled(C),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},g.prototype._promiseRejected=function(C){return this._addRejected(C),this._checkOutcome()},g.prototype._promiseCancelled=function(){return this._values instanceof u||null==this._values?this._cancel():(this._addRejected(_),this._checkOutcome())},g.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var C=new I,A=this.length();A<this._values.length;++A)this._values[A]!==_&&C.push(this._values[A]);return C.length>0?this._reject(C):this._cancel(),!0}return!1},g.prototype._fulfilled=function(){return this._totalResolved},g.prototype._rejected=function(){return this._values.length-this.length()},g.prototype._addRejected=function(C){this._values.push(C)},g.prototype._addFulfilled=function(C){this._values[this._totalResolved++]=C},g.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},g.prototype._getRangeError=function(C){return new m("Input array must contain at least "+this._howMany+" items but contains only "+C+" items")},g.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},u.some=function(C,A){return v(C,A)},u.prototype.some=function(C){return v(this,C)},u._SomePromiseArray=g}},{"./errors":12,"./util":36}],32:[function(l,d,c){d.exports=function(u){function h(y){void 0!==y?(y=y._target(),this._bitField=y._bitField,this._settledValueField=y._isFateSealed()?y._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}h.prototype._settledValue=function(){return this._settledValueField};var f=h.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},g=h.prototype.error=h.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},v=h.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},p=h.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},m=h.prototype.isPending=function(){return 0==(50397184&this._bitField)},I=h.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};h.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},u.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},u.prototype._isCancelled=function(){return this._target().__isCancelled()},u.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},u.prototype.isPending=function(){return m.call(this._target())},u.prototype.isRejected=function(){return p.call(this._target())},u.prototype.isFulfilled=function(){return v.call(this._target())},u.prototype.isResolved=function(){return I.call(this._target())},u.prototype.value=function(){return f.call(this._target())},u.prototype.reason=function(){var y=this._target();return y._unsetRejectionIsUnhandled(),g.call(y)},u.prototype._value=function(){return this._settledValue()},u.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},u.PromiseInspection=h}},{}],33:[function(l,d,c){d.exports=function(u,h){var I=l("./util"),y=I.errorObj,_=I.isObject,C={}.hasOwnProperty;return function(A,M){if(_(A)){if(A instanceof u)return A;var E=function(A){try{return function(A){return A.then}(A)}catch(M){return y.e=M,y}}(A);if(E===y){M&&M._pushContext();var R=u.reject(E.e);return M&&M._popContext(),R}if("function"==typeof E)return function(A){try{return C.call(A,"_promise0")}catch(M){return!1}}(A)?(R=new u(h),A._then(R._fulfill,R._reject,void 0,R,null),R):function(A,M,E){var P=new u(h),F=P;E&&E._pushContext(),P._captureStackTrace(),E&&E._popContext();var k=!0,w=I.tryCatch(M).call(A,function(S){P&&(P._resolveCallback(S),P=null)},function(S){P&&(P._rejectCallback(S,k,!0),P=null)});return k=!1,P&&w===y&&(P._rejectCallback(w.e,!0,!0),P=null),F}(A,E,M)}return A}}},{"./util":36}],34:[function(l,d,c){d.exports=function(u,h,f){function g(A){this.handle=A}function v(A){return clearTimeout(this.handle),A}function p(A){throw clearTimeout(this.handle),A}var m=l("./util"),I=u.TimeoutError;g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var y=function(A){return _(+this).thenReturn(A)},_=u.delay=function(A,M){var E,R;return void 0!==M?(E=u.resolve(M)._then(y,null,null,A,void 0),f.cancellation()&&M instanceof u&&E._setOnCancel(M)):(E=new u(h),R=setTimeout(function(){E._fulfill()},+A),f.cancellation()&&E._setOnCancel(new g(R)),E._captureStackTrace()),E._setAsyncGuaranteed(),E};u.prototype.delay=function(A){return _(A,this)},u.prototype.timeout=function(A,M){A=+A;var E,R,x=new g(setTimeout(function(){E.isPending()&&function(A,M,E){var R;R="string"!=typeof M?M instanceof Error?M:new I("operation timed out"):new I(M),m.markAsOriginatingFromRejection(R),A._attachExtraTrace(R),A._reject(R),null!=E&&E.cancel()}(E,M,R)},A));return f.cancellation()?(R=this.then(),(E=R._then(v,p,void 0,x,void 0))._setOnCancel(x)):E=this._then(v,p,void 0,x,void 0),E}}},{"./util":36}],35:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(w){setTimeout(function(){throw w},0)}function y(w,S){var U=0,Z=w.length,ne=new u(v);return function L(){if(U>=Z)return ne._fulfill();var oe=function(w){var S=f(w);return S!==w&&"function"==typeof w._isDisposable&&"function"==typeof w._getDisposer&&w._isDisposable()&&S._setDisposable(w._getDisposer()),S}(w[U++]);if(oe instanceof u&&oe._isDisposable()){try{oe=f(oe._getDisposer().tryDispose(S),w.promise)}catch(ue){return m(ue)}if(oe instanceof u)return oe._then(L,m,null,null,null)}L()}(),ne}function _(w,S,L){this._data=w,this._promise=S,this._context=L}function C(w,S,L){this.constructor$(w,S,L)}function A(w){return _.isDisposer(w)?(this.resources[this.index]._setDisposable(w),w.promise()):w}function M(w){this.length=w,this.promise=null,this[w-1]=null}var E=l("./util"),R=l("./errors").TypeError,x=l("./util").inherits,P=E.errorObj,F=E.tryCatch,k={};_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():k},_.prototype.tryDispose=function(w){var S=this.resource(),L=this._context;void 0!==L&&L._pushContext();var U=S!==k?this.doDispose(S,w):null;return void 0!==L&&L._popContext(),this._promise._unsetDisposable(),this._data=null,U},_.isDisposer=function(w){return null!=w&&"function"==typeof w.resource&&"function"==typeof w.tryDispose},x(C,_),C.prototype.doDispose=function(w,S){return this.data().call(w,w,S)},M.prototype._resultCancelled=function(){for(var w=this.length,S=0;w>S;++S){var L=this[S];L instanceof u&&L.cancel()}},u.using=function(){var w=arguments.length;if(2>w)return h("you must pass at least 2 arguments to Promise.using");var S=arguments[w-1];if("function"!=typeof S)return h("expecting a function but got "+E.classString(S));var L,U=!0;2===w&&Array.isArray(arguments[0])?(w=(L=arguments[0]).length,U=!1):(L=arguments,w--);for(var Z=new M(w),ne=0;w>ne;++ne){var oe=L[ne];if(_.isDisposer(oe)){var ue=oe;(oe=oe.promise())._setDisposable(ue)}else{var X=f(oe);X instanceof u&&(oe=X._then(A,null,null,{resources:Z,index:ne},void 0))}Z[ne]=oe}var pe=new Array(Z.length);for(ne=0;ne<pe.length;++ne)pe[ne]=u.resolve(Z[ne]).reflect();var B=u.all(pe).then(function(G){for(var ee=0;ee<G.length;++ee){var ie=G[ee];if(ie.isRejected())return P.e=ie.error(),P;if(!ie.isFulfilled())return void B.cancel();G[ee]=ie.value()}K._pushContext(),S=F(S);var be=U?S.apply(void 0,G):S(G),Te=K._popContext();return p.checkForgottenReturns(be,Te,"Promise.using",K),be}),K=B.lastly(function(){var G=new u.PromiseInspection(B);return y(Z,G)});return Z.promise=K,K._setOnCancel(Z),K},u.prototype._setDisposable=function(w){this._bitField=131072|this._bitField,this._disposer=w},u.prototype._isDisposable=function(){return(131072&this._bitField)>0},u.prototype._getDisposer=function(){return this._disposer},u.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},u.prototype.disposer=function(w){if("function"==typeof w)return new C(w,this,g());throw new R}}},{"./errors":12,"./util":36}],36:[function(l,d,c){function u(){try{var ae=ue;return ue=null,ae.apply(this,arguments)}catch(V){return oe.e=V,oe}}function f(ae){return null==ae||!0===ae||!1===ae||"string"==typeof ae||"number"==typeof ae}function I(ae,V,Q){return f(ae)||Z.defineProperty(ae,V,{value:Q,configurable:!0,enumerable:!1,writable:!0}),ae}function E(ae){try{return ae+""}catch(V){return"[no string representation]"}}function R(ae){return ae instanceof Error||null!==ae&&"object"==typeof ae&&"string"==typeof ae.message&&"string"==typeof ae.name}function F(ae){return R(ae)&&Z.propertyIsWritable(ae,"stack")}function k(ae){return{}.toString.call(ae)}var ue,Z=l("./es5"),ne="undefined"==typeof navigator,oe={e:{}},X=void 0!==Bt?Bt:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,B=function(){var ae=[Array.prototype,Object.prototype,Function.prototype],V=function(H){for(var j=0;j<ae.length;++j)if(ae[j]===H)return!0;return!1};if(Z.isES5){var Q=Object.getOwnPropertyNames;return function(H){for(var j=[],q=Object.create(null);null!=H&&!V(H);){var re;try{re=Q(H)}catch(Ae){return j}for(var de=0;de<re.length;++de){var le=re[de];if(!q[le]){q[le]=!0;var we=Object.getOwnPropertyDescriptor(H,le);null!=we&&null==we.get&&null==we.set&&j.push(le)}}H=Z.getPrototypeOf(H)}return j}}var me={}.hasOwnProperty;return function(H){if(V(H))return[];var j=[];e:for(var q in H)if(me.call(H,q))j.push(q);else{for(var re=0;re<ae.length;++re)if(me.call(ae[re],q))continue e;j.push(q)}return j}}(),K=/this\s*\.\s*\S+\s*=/,G=/^[a-z$_][a-z$_0-9]*$/i,ee="stack"in new Error?function(ae){return F(ae)?ae:new Error(E(ae))}:function(ae){if(F(ae))return ae;try{throw new Error(E(ae))}catch(V){return V}},ie=function(ae){return Z.isArray(ae)?ae:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var be="function"==typeof Array.from?function(ae){return Array.from(ae)}:function(ae){for(var V,Q=[],me=ae[Symbol.iterator]();!(V=me.next()).done;)Q.push(V.value);return Q};ie=function(ae){return Z.isArray(ae)?ae:null!=ae&&"function"==typeof ae[Symbol.iterator]?be(ae):null}}var je,ae,Te="undefined"!=typeof process&&"[object process]"===k(process).toLowerCase(),Ge="undefined"!=typeof process&&void 0!==process.env,he={setReflectHandler:function(ae){je=ae},isClass:function(ae){try{if("function"==typeof ae){var V=Z.names(ae.prototype),Q=Z.isES5&&V.length>1,me=V.length>0&&!(1===V.length&&"constructor"===V[0]),H=K.test(ae+"")&&Z.names(ae).length>0;if(Q||me||H)return!0}return!1}catch(j){return!1}},isIdentifier:function(ae){return G.test(ae)},inheritedDataKeys:B,getDataPropertyOrDefault:function(ae,V,Q){if(!Z.isES5)return{}.hasOwnProperty.call(ae,V)?ae[V]:void 0;var me=Object.getOwnPropertyDescriptor(ae,V);return null!=me?null==me.get&&null==me.set?me.value:Q:void 0},thrower:function(ae){throw ae},isArray:Z.isArray,asArray:ie,notEnumerableProp:I,isPrimitive:f,isObject:function(ae){return"function"==typeof ae||"object"==typeof ae&&null!==ae},isError:R,canEvaluate:ne,errorObj:oe,tryCatch:function(ae){return ue=ae,u},inherits:function(ae,V){function Q(){for(var H in this.constructor=ae,this.constructor$=V,V.prototype)me.call(V.prototype,H)&&"$"!==H.charAt(H.length-1)&&(this[H+"$"]=V.prototype[H])}var me={}.hasOwnProperty;return Q.prototype=V.prototype,ae.prototype=new Q,ae.prototype},withAppended:function(ae,V){var Q,me=ae.length,H=new Array(me+1);for(Q=0;me>Q;++Q)H[Q]=ae[Q];return H[Q]=V,H},maybeWrapAsError:function(ae){return f(ae)?new Error(E(ae)):ae},toFastProperties:function(ae){function V(){}function Q(){return typeof me.foo}V.prototype=ae;var me=new V;return Q(),Q(),ae},filledRange:function(ae,V,Q){for(var me=new Array(ae),H=0;ae>H;++H)me[H]=V+H+Q;return me},toString:E,canAttachTrace:F,ensureErrorObject:ee,originatesFromRejection:function(ae){return null!=ae&&(ae instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===ae.isOperational)},markAsOriginatingFromRejection:function(ae){try{I(ae,"isOperational",!0)}catch(V){}},classString:k,copyDescriptors:function(ae,V,Q){for(var me=Z.names(ae),H=0;H<me.length;++H){var j=me[H];if(Q(j))try{Z.defineProperty(V,j,Z.getDescriptor(ae,j))}catch(q){}}},isNode:Te,hasEnvVariables:Ge,env:function(ae){return Ge?process.env[ae]:void 0},global:X,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===k(new Promise(function(){})))return Promise}catch(V){}},contextBind:function(ae,V){if(null===ae||"function"!=typeof V||V===je)return V;null!==ae.domain&&(V=ae.domain.bind(V));var Q=ae.async;if(null!==Q){var me=V;V=function(){var H=new Array(2).concat([].slice.call(arguments));return H[0]=me,H[1]=this,Q.runInAsyncScope.apply(Q,H)}}return V}};he.isRecentNode=he.isNode&&(process.versions&&process.versions.node?ae=process.versions.node.split(".").map(Number):process.version&&(ae=process.version.split(".").map(Number)),0===ae[0]&&ae[1]>10||ae[0]>0),he.nodeSupportsAsyncResource=he.isNode&&function(){var ae=!1;try{ae="function"==typeof l("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(Q){ae=!1}return ae}(),he.isNode&&he.toFastProperties(process);try{throw new Error}catch(ae){he.lastLineError=ae}d.exports=he},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:null!=Bt&&(Bt.P=Bt.Promise),t.Promise=Promise,t.nativePromise||(t.nativePromise=t.Promise)}}(T),function(e){var r=20211022;e._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",e._defaultPlatform="Win32",!(e._navInfo_ver&&e.isNumber(e._navInfo_ver)&&e._navInfo_ver>=r)&&(e._navInfo_ver=r,e.getNavInfoSync=function(){var m,n=e.win,s=n.location.protocol,o="https:"===s,l="https:"!==s&&"http:"!==s,d=!1,c=!1,u=!0,h=!0,f=!1,g=0,v=0;if(T.navInfo)m=T.navInfo;else{e.getNavInfo();var I=navigator;m=e.getNavInfoByUserAgent(I.userAgent,I.platform)}return"userAgentData"in navigator?f=m.bMobile||navigator.userAgentData.mobile:(c=(m=T.navInfo).bEdge,h=m.bGecko,f=m.bMobile||m.bPad||m.bChromeOS,(d=m.bIE)&&(g=m.strBrowserVersion,v=m.IEMode),u=m.bHTML5Edition),{host:n,bSSL:o,bFileSystem:l,bIE:d,bEdge:c,bGecko:h,bMobile:f,IEVersion:g,IEMode:v,bHTML5Edition:u,nodejs:!1}},e.getNavInfoByUAData=function(t){var i=function(n){var l,_,a=navigator.userAgentData,s=a.mobile,d=n.platform.toLowerCase(),f=(n.architecture.toLowerCase(),"64"==n.bitness),g=d.indexOf("mac")>=0,v=d.indexOf("chrome os")>=0,p=navigator.userAgent.toLowerCase(),m=/harmonyos/g.test(p),I=/arm64|aarch64/g.test(p),y=/mips64/g.test(p);return s||/mobile/g.test(p)&&(s=!0),_=/aarch64|arm64|mips64/g.test(p),"brands"in a&&e.isArray(a.brands)&&a.brands.length>0?(a.brands[0].brand.toLowerCase(),l=a.brands[0].version):"uaList"in a&&e.isArray(a.uaList)&&a.uaList.length>0&&(a.uaList[0].brand.toLowerCase(),l=a.uaList[0].version),"linux"==navigator.platform&&p.indexOf("windows nt")>=0&&(d="",m=!0,s=!0),{bWin:"windows"==d,bMac:g,bLinux:"linux"==d,bAndroid:!1,bMobile:s,bPad:!1,bChromeOS:v,bHarmonyOS:m,bArm64:I,bMips64:y,bEmbed:_,bOSx64:f,bIE:!1,bEdge:!1,bChrome:!0,bFirefox:!1,bSafari:!1,bOpera:!1,bGecko:!0,bHTML5Edition:!0,strBrowserVersion:l,IEMode:!1,bQuerySelectorSupported:!0,nativeJson:!0,scrollBarWidth:!1}};return t?Promise.resolve(function(){return i(t)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(i)},e.asyncGetNavInfo=function(){if(T.navInfo)return Promise.resolve(T.navInfo);var t=navigator;return"userAgent"in t?(T.navInfo=e.getNavInfoByUserAgent(t.userAgent,t.platform),Promise.resolve(T.navInfo)):"userAgentData"in t?e.getNavInfoByUAData().then(function(i){return T.navInfo=i,i}):(T.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),Promise.resolve(T.navInfo))},e.getNavInfo=function(){if(T.navInfo)return T.navInfo;var t=navigator;return"userAgent"in t?(T.navInfo=e.getNavInfoByUserAgent(t.userAgent,t.platform),T.navInfo):"userAgentData"in t?(e.getNavInfoByUAData().then(function(i){T.navInfo=i}),!1):(T.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),T.navInfo)},T.navInfoSync=e.getNavInfoSync())}(T.Lib),function(e,r){var t=e.Lib,i=e.navInfoSync,n=20200521;if(!(t._ls_ver&&t.isNumber(t._ls_ver)&&t._ls_ver>=n)){t._ls_ver=n;var a=!1,s=!1;if(!(i.bEdge&&i.bFileSystem||i.bIE&&i.IEVersion<8))try{s=window.localStorage,a=!!s}catch(l){s=!1}t.LS={isSupportLS:function(){return a},item:function(l,d,c){var u=null;return this.isSupportLS()?(d?(s.setItem(l,d),u=d):u=s.getItem(l),null===u?c:u):c},removeItem:function(l){return!!this.isSupportLS()&&(s.removeItem(l),!0)}}}}(T),function(e,r){var t=20200708;if(!(e._utilities_ver&&e._utilities_ver>=t)){e._utilities_ver=t;var n=e.win,a=e.doc,s=T.navInfoSync,_=(e.getLogger(),0),C=[],R=/\S/,x=!(!a||!a.addEventListener),P="DOMContentLoaded",F="readystatechange",k="load",w="complete",S=x?function(ne,oe,ue){ne.addEventListener(oe,ue,!1)}:function(ne,oe,ue){ne.attachEvent("on"+oe,ue)},L=x?function(ne,oe,ue){ne.removeEventListener(oe,ue,!1)}:function(ne,oe,ue){ne.detachEvent("on"+oe,ue)};if(e.mix(e,{isWindow:function(ne){return null!=ne&&ne==ne.window},globalEval:function(ne){ne&&R.test(ne)&&(n.execScript?n.execScript(ne):n.eval.call(n,ne))},domReady:function(ne){if(_)try{ne(e)}catch(oe){e.log(oe.stack||oe,"error"),setTimeout(function(){throw oe},0)}else C.push(ne);return this}}),e.ready=e.domReady,e.checkDomReady=function(){_||(_=1,e.asyncGetNavInfo().then(function(ne){a&&!s.nodejs&&L(n,k,e.checkDomReady),function(){for(var ne=0;ne<C.length;ne++)try{C[ne](e)}catch(oe){e.log(oe.stack||oe,"error"),setTimeout(function(){throw oe},0)}}()}))},function(){if(a&&a.readyState!==w)if(S(n,k,e.checkDomReady),x){var ne=function(){L(a,P,ne),e.checkDomReady()};S(a,P,ne)}else{var oe=function(){a.readyState===w&&(L(a,F,oe),e.checkDomReady())};S(a,F,oe);var ue,X=a&&a.documentElement,pe=X&&X.doScroll;try{ue=null===n.frameElement}catch(K){ue=!1}if(pe&&ue){var B=function(){try{pe("left"),setTimeout(e.checkDomReady,30)}catch(K){setTimeout(B,40)}};B()}}else e.checkDomReady()}(),T.navInfoSync.bIE)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(ne){}}}(T.Lib),function(e){var r=20200521;if(!(e._domUtil_ver&&e._domUtil_ver>=r)){e._domUtil_ver=r;var i="none";e.mix(e,{get:function(n){return e.doc.getElementById(n)},hide:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display=i)},show:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display="")},toggle:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display=a.style.display===i?"":i)},empty:function(n){if(n)for(;n.firstChild;)n.removeChild(n.firstChild)}})}}(T.Lib),function(e){var r=e.Lib,t=20200521;r._color_ver&&r.isNumber(r._color_ver)&&r._color_ver>=t||(r._color_ver=t,r.colorStrToInt=function(i){var a,s,n="0x";if(/^(rgb|RGB)/.test(i)){var o=i.replace(/[^\d,.]/g,"").split(",");for(s=0;s<3;++s)1==(a=Number(o[s]).toString(16)).length&&(a="0"+a),n+=a;4==o.length?(1==(a=Math.round(255*Number(o[s])).toString(16)).length&&(a="0"+a),n+=a):n+="ff"}else if("transparent"==i)n+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(i))n+=i.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(i)){for(s=0;s<3;++s)n+=i[s]+i[s];n+="ff"}else n="-1";return Number(n)},r.IntToColorStr=function(i){if(i>4294967295||i<0)return null;var n;if(T.navInfoSync.bHTML5Edition)n="rgba("+Math.floor(i/16777216)+","+Math.floor(i/65536)%256+","+Math.floor(i/256)%256+","+i%256/255+")";else if(i%256==0)n="transparent";else{for(n=Math.floor(i/256).toString(16);6!=n.length;)n="0"+n;n="#"+n}return n})}(T),function(e,r){var t=e.Lib,i=20211014;t._ajax_ver&&t.isNumber(t._ajax_ver)&&t._ajax_ver>=i||(t._ajax_ver=i,t.asyncGetNavInfo().then(function(n){var Z,ue,a=n.bIE&&parseInt(n.strBrowserVersion)<=9,s=n.bIE&&parseInt(n.strBrowserVersion)<=10,o=t.win,l=t.each,f=200,A=new t.Uri(location.href),M=A&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(A.getScheme()),R=function(){try{return new o.XMLHttpRequest}catch(X){}},x=function(){try{var X=!1;return l(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(pe){try{return X=new o.ActiveXObject(pe)}catch(B){t.error("new xhr error: "+B.message)}}),X}catch(pe){}},P=!(M||!o.XMLHttpRequest)&&"withCredentials"in(R()||[]),F=o.ActiveXObject?function(X){return a?x():!M&&R()||x()}:R,w=/^(?:GET|HEAD)$/,S=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},U=void 0;function ne(){}function oe(X){if(X&&t.isString(X.url)){var pe=new ne;return pe.sendInternal(X),pe}t.log("the url is error.")}Z=Bt&&Bt.fetch?Bt.fetch:o.fetch,s&&(U=t.noop),t.mix(ne.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(X,pe){return this.headers[X]=pe,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(X){var pe,K,B=this;if(X=X.toLowerCase(),2===B.state){if(!(K=B.responseHeaders))for(K=B.responseHeaders={};pe=S.exec(B.responseHeadersString);)K[pe[1].toLowerCase()]=pe[2];pe=K[X]}return void 0===pe?null:pe},overrideMimeType:function(X){return this.state||(this.mimeType=X),this},abort:function(X){var pe=this;return X=X||"abort",pe.state=3,pe.status=0,pe.statusText=X,pe.nativeXhr&&pe.nativeXhr.abort(),pe._callback(),pe},_ioReady:function(X,pe){var B=this,K=!1;if(2!==B.state&&3!==B.state){1===B.state&&(B.state=2),B.readyState=4,X>=f&&X<300||304===X?304===X?(pe="not modified",K=!0):(pe="success",K=!0):X<0&&(X=0);try{X>=f&&B.handleResponseData()}catch(G){t.error(G.stack||G,"error"),pe=G.message||"parser error"}if((X<f||!K)&&B.retry>0)return B.retry=B.retry-1,void setTimeout(function(){B.sendInternal()},200);B.status=X,B.statusText=pe,B._callback(K)}},_callback:function(X){var pe=this,B=pe.timeoutTimer;B&&(clearTimeout(B),pe.timeoutTimer=0),l([X?pe.onSuccess:pe.onError,pe.onComplete],function(K){t.isFunction(K)&&K.apply(pe.context,[pe.responseData,pe.statusText,pe])}),pe.responseData=null},handleResponseData:function(){var pe,X=this,B=X.dataType,K=X.nativeXhr;if("blob"===B||"arraybuffer"===B)if(a){var G,ee,ie;if("responseBody"in K)G=K.responseBody,ee=dsVbsBinGetLength(G),pe=new VBArray(dsVbsBinGetBytes(G,0,ee)).toArray();else for(pe=[],ee=(G=K.responseText).length,ie=0;ie<ee;++ie)pe.push(255&G.charCodeAt(ie));G=null}else pe=o.Blob?K.response:"responseBody"in K?K.responseBody:K.responseText;else if("json"==B)pe=K.responseType&&"json"==K.responseType.toLowerCase()?K.response:K.responseText?(o.JSON&&o.JSON.parse?o.JSON.parse:t.parse)(K.responseText):{};else if("user-defined"===B)pe=void 0!==K.response?K.response:K.responseText;else{X.responseText=pe=K.responseText||"";try{var be=K.responseXML;be&&be.documentElement&&(X.responseXML=be)}catch(Te){}}X.responseData=pe},sendInternal:function(X){var B,G,ee,ie,be,Te,Ge,je,he,ae,V,pe=this;if(B=pe._setup(X),t.isString(G=B.method)&&(G=G.toUpperCase()),be=B.contentType,ie=B.dataType,je=B.mimeType,t.isString(ee=B.url)&&(pe.nativeXhr=Te=F(B.crossDomain),Te)){try{if(pe.state=1,B.username?Te.open(G,ee,B.async,B.username,B.password):Te.open(G,ee,B.async),(B.async||n.bIE)&&ie&&"user-defined"!=ie&&"responseType"in Te)try{Te.responseType=ie}catch(H){}}catch(H){return void(pe.state<2?(t.error(H.stack||H,"error"),pe._ioReady(-1,"open error: "+(t.isNumber(H.number)?"("+H.number+")":"")+(H.message||""))):t.error(H))}"withCredentials"in(Ge=B.xhrFields||{})&&(P||delete Ge.withCredentials),l(Ge,function(H,j){try{Te[j]=H}catch(q){t.error(q)}}),je&&Te.overrideMimeType&&Te.overrideMimeType(je),!1===(he=B.headers||{})["X-Requested-With"]&&delete he["X-Requested-With"],"setRequestHeader"in Te&&(be&&Te.setRequestHeader("Content-Type",B.contentType),Te.setRequestHeader("Accept",ie&&L[ie]?L[ie]+("*"===ie?"":", */*; q=0.01"):L["*"]),l(he,function(H,j){Te.setRequestHeader(j,H)})),B.cache||(Te.setRequestHeader("If-Modified-Since","0"),Te.setRequestHeader("Cache-Control","no-cache")),V=(ae=!w.test(B.method))&&B.data||null,ae&&a&&(V=B.data),B.async&&B.timeout>0&&(B.timeout<300&&(B.timeout=300),pe.timeoutTimer=setTimeout(function(){pe.abort("timeout")},B.timeout));try{if(pe.state=1,t.isFunction(pe.beforeSend)&&!1===pe.beforeSend(Te,pe))return void pe.abort("cancel");Te.send(V),V=null,B.data=null,t.isFunction(pe.afterSend)&&pe.afterSend(pe)}catch(H){pe.state<2?(t.error(H.stack||H,"error"),pe._ioReady(-1,"send error: "+(H.message||""))):t.error(H)}B.async&&4!==Te.readyState?Te.onreadystatechange=function(){pe._xhrCallback()}:pe._xhrCallback()}},_xhrCallback:function(X,pe){var B=this,K=B.nativeXhr;try{if(4===K.readyState||pe)if(K.onreadystatechange=U,pe)4!==K.readyState&&K.abort();else{B.responseHeadersString=K.getAllResponseHeaders();var ee,G=K.status;try{ee=K.statusText}catch(ie){t.error("xhr statusText error: "),t.error(ie),ee=""}B._ioReady(G,ee)}}catch(ie){t.error(ie.stack||ie,"error"),K.onreadystatechange=U,pe||B._ioReady(-1,ie.message||"process error")}},_setup:function(X){var B,K,G,ee,ie,pe=this;if(X){for(K in pe.context=X.context,delete X.context,X instanceof ne&&(X=X.config),pe.config=X,t.startsWith(ee=X.url,"http://")||t.startsWith(ee,"https://")?ie=new t.Uri(ee):(t.startsWith(ee,"//")&&(X.url=ee="http:"+ee),ie=A.resolve(ee)),B=X.dataType?X.dataType.toLowerCase():"text",X.dataType=B,X.method=X.method?X.method.toUpperCase():"GET","crossDomain"in X||(X.crossDomain=!ie.isSameOriginAs(A)),G=X.headers)t.isUndefined(G[K])&&delete G[K];t.mix(pe,X)}return pe.state=1,pe}}),t.mix(t,{ajax:oe,io:{get:function(X,pe,B,K){return oe({method:"GET",url:X,onSuccess:pe,onError:B,dataType:K})},post:function(X,pe,B,K,G){return oe({method:"POST",data:pe,url:X,onSuccess:B,onError:K,dataType:G})},put:function(X,pe,B,K,G){return oe({method:"PUT",data:pe,url:X,onSuccess:B,onError:K,dataType:G})}}}),Z?t.fetch=function(X,pe){var G,ee,B="text",K=!1;return pe&&(pe.dataType&&(B=pe.dataType),pe.fetchRaw&&(K=!0)),G=Z(X,pe),Promise!=t.nativePromise?(ee=Promise,Promise=t.nativePromise,G=G.then(function(ie){if(Promise=ee,ie.ok)return ie;throw{httpCode:ie.status,errorString:["HTTP process error: ",ie.statusText," (",ie.status,")."].join("")}})):G=G.then(function(ie){if(ie.ok)return ie;throw{httpCode:ie.status,errorString:["HTTP process error: ",ie.statusText," (",ie.status,")."].join("")}}),K||(G=G.then("blob"==B?function(ie){return ie.blob()}:"json"==B?function(ie){return ie.json()}:"arraybuffer"==B?function(ie){return ie.arrayBuffer()}:function(ie){return ie.text()})),G}:(a&&t.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),Promise!=t.nativePromise&&(ue=Promise,Promise=t.nativePromise),t.fetch=function(X,pe){return new Promise(function(B,K){var ie={url:X,onSuccess:function(Te,Ge,je){ue&&(Promise=ue),B(Te)},onError:function(Te,Ge,je){ue&&(Promise=ue),K({httpCode:je.status,errorString:Ge})},dataType:"text"},be=!1;pe&&(pe.method&&(ie.method=pe.method),pe.body&&(ie.data=pe.body),pe.headers&&(ie.headers||(ie.headers={}),l(pe.headers,function(Te,Ge){"content-type"==Ge.toLowerCase()&&(be=!0),ie.headers[Ge]=Te})),pe.dataType&&(ie.dataType=pe.dataType),pe.contentType&&(ie.contentType=pe.contentType)),be&&(ie.contentType=!1),"blob"==ie.dataType&&a&&(ie.mimeType="text/plain; charset=x-user-defined"),t.ajax(ie)})})}))}(T),function(e){var r=20200521;if(!(e._customEvt_ver&&e.isNumber(e._customEvt_ver)&&e._customEvt_ver>=r)){e._customEvt_ver=r;var t={fire:function(i){var a,n=this;n.exec=n.exec||{},i=i.toLowerCase(),a=Array.prototype.slice.call(arguments,1),e.each(n.exec[i]||[],function(s){var o=s.f,l=s.c||n;try{o.apply(l,a)}catch(d){e.log(d)}})},on:function(i,n,a){var s=this;s.exec=s.exec||{},i=i.toLowerCase(),s.exec[i]=s.exec[i]||[],s.exec[i].push({f:n,c:a})},off:function(i,n,a){var o=this.exec;if(o){if(!i)return void(this.exec=null);if(i=i.toLowerCase(),!n)return void(o[i]=null);for(var l=o[i]||[],d=l.length-1;d>=0;d--)l[d]===n&&l.splice(d,1)}}};e.obj={customEvent:t}}}(T.Lib),function(e){var a,r=e.Lib,i=!0,n=r.win.document,s=20200521;r._evtBase_ver&&r.isNumber(r._evtBase_ver)&&r._evtBase_ver>=s||(r._evtBase_ver=s,a=function(o){return T.navInfoSync.bGecko&&"mousewheel"===o?"DOMMouseScroll":o},r.mix(r,{addEventListener:n.addEventListener?function(o,l,d){var c=a(l);o&&o.addEventListener(c,d,!1)}:function(o,l,d){var c=a(l);o&&o.attachEvent("on"+c,d)},removeEventListener:n.removeEventListener?function(o,l,d){var c=a(l);o&&o.removeEventListener(c,d,!1)}:function(o,l,d){var c=a(l);o&&o.detachEvent("on"+c,d)},stopPropagation:function(o){var l=o||window.event;l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation(),l.returnValue=!1,l.cancelBubble=!0},fireEvent:function(o,l){var d;n.createEvent?((d=n.createEvent("HTMLEvents")).initEvent(o,i,i),l.dispatchEvent&&l.dispatchEvent(d)):n.createEventObject?((d=n.createEventObject()).bubbles=i,d.cancelable=i,l.fireEvent(o,d)):(d=new Event(o),l.dispatchEvent&&l.dispatchEvent(d))}}))}(T),function(e,r){var t=20200716;if(!(e._loadbase64_ver&&e._loadbase64_ver>=t)){e._loadbase64_ver=t;var i={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};e.base64={UTF16ToUTF8:function(s){for(var d,c,o=[],l=s.length,u=0;u<l;u++){var h=s.charCodeAt(u);if(h>0&&h<=127)o.push(s.charAt(u));else if(h>=128&&h<=2047)d=192|h>>6&31,c=128|63&h,o.push(String.fromCharCode(d),String.fromCharCode(c));else if(h>=2048&&h<=65535){d=224|h>>12&15,c=128|h>>6&63;var f=128|63&h;o.push(String.fromCharCode(d),String.fromCharCode(c),String.fromCharCode(f))}}return o.join("")},UTF8ToUTF16:function(s){var d,h,f,v,o=[],l=s.length;for(d=0;d<l;d++)0==((h=s.charCodeAt(d))>>7&255)?o.push(s.charAt(d)):6==(h>>5&255)?(v=(31&h)<<6|63&(f=s.charCodeAt(++d)),o.push(String.fromCharCode(v))):14==(h>>4&255)&&(v=(255&(h<<4|(f=s.charCodeAt(++d))>>2&15))<<8|(3&f)<<6|63&s.charCodeAt(++d),o.push(String.fromCharCode(v)));return o.join("")},encode:function(s){for(var u,h,f,o=this.UTF16ToUTF8(s),l=[],d=0,c=o.length;d<c;){if(u=255&o.charCodeAt(d++),d==c){l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4)),l.push("==");break}if(h=o.charCodeAt(d++),d==c){l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4|(240&h)>>4)),l.push(i.encodeChars.charAt((15&h)<<2)),l.push("=");break}f=o.charCodeAt(d++),l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4|(240&h)>>4)),l.push(i.encodeChars.charAt((15&h)<<2|(192&f)>>6)),l.push(i.encodeChars.charAt(63&f))}return l.join("")},encodeArray:function(s){for(var c,u,h,o=[],l=0,d=s.length;l<d;){if(c=255&s[l++],l==d){o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4)),o.push("==");break}if(u=255&s[l++],l==d){o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4|(240&u)>>4)),o.push(i.encodeChars.charAt((15&u)<<2)),o.push("=");break}h=255&s[l++],o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4|(240&u)>>4)),o.push(i.encodeChars.charAt((15&u)<<2|(192&h)>>6)),o.push(i.encodeChars.charAt(63&h))}return o.join("")},decode:function(s,o){for(var h,f,g,v,l=this,d=[],c=0,u=s.length;c<u;){do{h=i.decodeChars[255&s.charCodeAt(c++)]}while(c<u&&-1==h);if(-1==h)break;do{f=i.decodeChars[255&s.charCodeAt(c++)]}while(c<u&&-1==f);if(-1==f)break;d.push(o?h<<2|(48&f)>>4:String.fromCharCode(h<<2|(48&f)>>4));do{if(61==(g=255&s.charCodeAt(c++)))return o?d:l.UTF8ToUTF16(d.join(""));g=i.decodeChars[g]}while(c<u&&-1==g);if(-1==g)break;d.push(o?(15&f)<<4|(60&g)>>2:String.fromCharCode((15&f)<<4|(60&g)>>2));do{if(61==(v=255&s.charCodeAt(c++)))return o?d:l.UTF8ToUTF16(d.join(""));v=i.decodeChars[v]}while(c<u&&-1==v);if(-1==v)break;d.push(o?(3&g)<<6|v:String.fromCharCode((3&g)<<6|v))}return o?d:l.UTF8ToUTF16(d.join(""))}},e.utf8={fromUTF16:function(s){for(var c,o=[],l=0,d=s.length;l<d;)(c=s.charCodeAt(l))>=1&&c<=127?o.push(s.charAt(l)):c>2047?(o.push(String.fromCharCode(224|c>>12&15)),o.push(String.fromCharCode(128|c>>6&63)),o.push(String.fromCharCode(128|c>>0&63))):(o.push(String.fromCharCode(192|c>>6&31)),o.push(String.fromCharCode(128|c>>0&63))),l++;return o.join("")},toUTF16:function(s){for(var c,u,h,o=[],l=0,d=s.length;l<d;)switch(c=s.charCodeAt(l++),c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(s.charAt(l-1));break;case 12:case 13:u=s.charCodeAt(l++),o.push(String.fromCharCode((31&c)<<6|63&u));break;case 14:u=s.charCodeAt(l++),h=s.charCodeAt(l++),o.push(String.fromCharCode((15&c)<<12|(63&u)<<6|(63&h)<<0))}return o.join("")}};var n="undefined"!=typeof exports?exports:void 0!==Bt?Bt:$.global;(a.prototype=new Error).name="InvalidCharacterError",e.btoa=n.btoa?function(s){return n.btoa(s)}:function(s){for(var l,d,o=String(s),c=0,u=i.encodeChars,h="";o.charAt(0|c)||(u="=",c%1);h+=u.charAt(63&l>>8-c%1*8)){if((d=o.charCodeAt(c+=3/4))>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");l=l<<8|d}return h},e.atob=n.atob?function(s){return n.atob(s)}:function(s){var o=String(s).replace(/[=]+$/,"");if(o.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,c,l=0,u=0,h="";c=o.charAt(u++);~c&&(d=l%4?64*d+c:c,l++%4)?h+=String.fromCharCode(255&d>>(-2*l&6)):0)c=i.encodeChars.indexOf(c);return h}}function a(s){this.message=s}}(T.Lib),function(e){var r=20210107;if(!(e._loadjs_ver&&e._loadjs_ver>=r)){e._loadjs_ver=r;var n=e.doc,a=n&&n.documentElement,s=n.getElementsByTagName("head")[0]||a,o=n.createElement("script").readyState?function(l,d){var c=l.onreadystatechange;l.onreadystatechange=function(){var u=l.readyState;"loaded"===u||"complete"===u?(l.onreadystatechange=null,c&&c(),d.call(this,!0)):"loading"===u||d.call(this,!1)}}:function(l,d){l.addEventListener("load",d,!1),l.addEventListener("error",d,!1)};e.scriptOnload=o,e.getScript=function(l,d,c){var u,h;if(e.isFunction(c)||(c=function(){}),e.isString(l)&&""!=l)return u=n.createElement("script"),h=["",l].join(""),u.src=h,d&&(u.async=!0),u.charset="utf-8",o(u,c),s.insertBefore(u,s.firstChild),u;c()},e.getScripts=function(l,d,c){if(e.isArray(l)){var u=l.length,h=function(f){f?u--:c(),u<=0&&c("ok")};u<=0?c("ok"):e.each(l,function(f){e.getScript(f,d,h)})}else c()},e.getCss=function(l,d){var c,u=d;if(e.isFunction(u)||(u=!1),e.isString(l)&&""!=l)return(c=n.createElement("link")).href=l,c.rel="stylesheet",c.async=!0,u&&o(c,u),s.insertBefore(c,s.firstChild),c;u&&u()},e.getAllCss=function(l,d){if(e.isArray(l)){var c=l.length,u=function(h){h?c--:d(),c<=0&&d("ok")};e.each(l,function(h){e.getCss(h,u)})}else d()},e.addScript=function(l){var d,c;e.isString(c=l.body)&&""!=c&&((d=n.createElement("script")).charset="utf-8",T.navInfoSync.bIE?d.text=c:d.appendChild(n.createTextNode(c)),d.language=l.language?l.language:"javascript",d.type=l.type?l.type:"text/javascript",s.insertBefore(d,s.firstChild))},e.addJS=function(l){e.addScript({body:l})},e.addVBS=function(l){e.addScript({body:l,language:"vbscript",type:"text/vbscript"})}}}(T.Lib),function(e){var r=e.Lib,t=20210601;if(!(r._asyncQueue_ver&&r.isNumber(r._asyncQueue_ver)&&r._asyncQueue_ver>=t)){r._asyncQueue_ver=t;var i={queue:[],doNextStarted:!1,timer:!1,pushToDo:function(n,a,s){i.queue.push({obj:n,method:a,args:s})},doNext:function(){if(!i.doNextStarted)return clearTimeout(i.timer),void(i.timer=!1);if(0!=i.queue.length){var n=i.queue[0],a=n.obj,s=n.method,o=n.args;if(i.queue.splice(0,1),a&&r.isFunction(a[s])){var l=!1;if(o.length>2){var d=o[o.length-2],c=o[o.length-1];r.isFunction(d)&&r.isFunction(c)&&(o[o.length-2]=function(){try{d.apply(a,arguments)}catch(u){}i.timer=setTimeout(i.doNext,0)},o[o.length-1]=function(){try{c.apply(a,arguments)}catch(u){}i.timer=setTimeout(i.doNext,0)},l=!0)}try{a[s].apply(a,o)}catch(u){}l||(i.timer=setTimeout(i.doNext,0))}else if(null===a&&r.isFunction(s)){try{s.apply(null,o)}catch(u){}i.timer=setTimeout(i.doNext,0)}else r.log("not invoke a function: "+s),i.timer=setTimeout(i.doNext,0)}else i.timer=setTimeout(i.doNext,500)},start:function(){i.doNextStarted||(i.doNextStarted=!0,i.timer=setTimeout(i.doNext,0))},stop:function(){clearTimeout(i.timer),i.doNextStarted=!1,i.queue=[]}};r.asyncQueue=i}}(T),function(e){var r=20200521;if(!(e._sprintf_ver&&e._sprintf_ver>=r)){e._sprintf_ver=r;var t,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},s=Object.create?Object.create(null):{};e.sprintf=t=function(d){return a(o(d),arguments)},e.vsprintf=function(d,c){return t.apply(null,[d].concat(c||[]))}}function n(d,c){if("_".repeat)return d.repeat(c);for(var u=0,h=[];u<c;u++)h.push(d);return h.join("")}function a(d,c){var f,v,p,m,I,y,_,C,A,u=1,h=d.length,g="";for(v=0;v<h;v++)if("string"==typeof d[v])g+=d[v];else if("object"==typeof d[v]){if((m=d[v]).keys)for(f=c[u],p=0;p<m.keys.length;p++){if(null==f)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[p],m.keys[p-1]));f=f[m.keys[p]]}else f=m.param_no?c[m.param_no]:c[u++];if(i.not_type.test(m.type)&&i.not_primitive.test(m.type)&&f instanceof Function&&(f=f()),i.numeric_arg.test(m.type)&&"number"!=typeof f&&isNaN(f))throw new TypeError(t("[sprintf] expecting number but found %T",f));switch(i.number.test(m.type)&&(C=f>=0),m.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,m.width?parseInt(m.width):0);break;case"e":f=m.precision?parseFloat(f).toExponential(m.precision):parseFloat(f).toExponential();break;case"f":f=m.precision?parseFloat(f).toFixed(m.precision):parseFloat(f);break;case"g":f=m.precision?String(Number(f.toPrecision(m.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=m.precision?f.substring(0,m.precision):f;break;case"t":f=String(!!f),f=m.precision?f.substring(0,m.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=m.precision?f.substring(0,m.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=m.precision?f.substring(0,m.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}i.json.test(m.type)?g+=f:(!i.number.test(m.type)||C&&!m.sign?A="":(A=C?"+":"-",f=f.toString().replace(i.sign,"")),y=m.pad_char?"0"===m.pad_char?"0":m.pad_char.charAt(1):" ",_=m.width-(A+f).length,I=m.width&&_>0?n(y,_):"",g+=m.align?A+f+I:"0"===y?A+I+f:I+A+f)}return g}function o(d){if(s[d])return s[d];for(var u,c=d,h=[],f=0;c;){if(null!==(u=i.text.exec(c)))h.push(u[0]);else if(null!==(u=i.modulo.exec(c)))h.push("%");else{if(null===(u=i.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){f|=1;var g=[],v=u[2],p=[];if(null===(p=i.key.exec(v)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(p[1]);""!==(v=v.substring(p[0].length));)if(null!==(p=i.key_access.exec(v)))g.push(p[1]);else{if(null===(p=i.index_access.exec(v)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(p[1])}u[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}c=c.substring(u[0].length)}return s[d]=h,h}}(T.Lib),function(e,r){var a,s,t=T.managerEnv,i=e.LS,n=T.navInfoSync.host,o=20211117,l=function(){if(T.dcp){var u=T.dcp.dcpJSVer;if(e.isNumber(u))return u>=o}return!1};if(t||(T.managerEnv={},t=T.managerEnv),t.resourcesPath=t.resourcesPath||"Resources",t.IfUpdateService=!!t.IfUpdateService,l())return l=r,void(o=r);var d=[];T.dcp=a={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:o,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[17,2,0,"1026"],managerVersionMac:[17,2,0,"1026"],managerVersionLinux:[17,2,0,"1026"],serviceVersion:[1,7,2,"1026"],serviceVersionMac:[1,7,2,"1026"],serviceVersionLinux:[1,7,2,"1026"],detect:s={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var u=T.Lib.getNavInfo();if(!u.bWin&&!u.bWin64){if(u.bMac)return a.managerVersionMac;if(u.bLinux)return a.managerVersionLinux}return a.managerVersion},getServiceVersion:function(){var u=T.Lib.getNavInfo();if(!u.bWin&&!u.bWin64){if(u.bMac)return a.serviceVersionMac;if(u.bLinux)return a.serviceVersionLinux}return a.serviceVersion},versionInfo:function(u,h){var f=0;s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,h,function(p){if(e.isArray(p)&&p.length>0&&p[0]){s.curPort=a.ports[f%a.ports.length];var m=p[0];if(e.isString(m)&&a._compareVersion(m.split(","),a.oldDWASMVer))return a._setDefaultValuesFromServer(p),s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.Connected,a._sendStatusEvent(!1,m),e.isFunction(u)&&setTimeout(function(){u(a.strSID,a.bEnhancedMode)},0),!0}return!1},function(p,m,I){return++f,s.curPortIndex=f%a.ports.length,s.bConnected=!1,!!(s.bConnectNumLimited&&f>=s.IMAXCONNECTCOUNT)&&(setTimeout(function(){u(p,m,I)},0),!0)})},_checkOldManagerVersion:function(u,h){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,r,u,h)},_checkManagerVersion:function(u,h,f){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,u,h,f)},_checkService:function(u,h){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,r,u,h)},_checkUpdateFile:function(u,h){this._postBase("CheckUpdateFile",!1,r,u,h)},_updateService:function(u,h){this._postBase("UpdateService",!1,r,u,h)},_postBase:function(u,h,f,g,v){var m;return m={id:"1",method:u,version:h?a.oldDWASMVerStr:"dwasm2_"+a._getModuleVer(),parameter:[]},f&&(m.productKey=f),this._postBaseV2(u,h,m,200,g,v),!0},_postBaseV2:function(u,h,f,g,v,p){var I,y,_=e.stringify(f);if(e.isFunction(v)&&e.isFunction(p)){if(a.detect.bConnected&&"VersionInfo"==u&&""!=a.detect.connectedResult)return void v(a.detect.connectedResult);I=function(k,w,S){0!=--A||p(k,w,S)},y=function(k,w,S){var L=a._getJSON(k);L&&"result"in L&&(A=-1,a.detect.bConnected||(a.detect.bConnected=!0,a.detect.dcpStatus=a.detect.EnumDCP_DetectStatus.Connected,a.detect.curPort=a.ports[S.index],a.ports=[a.detect.curPort],a.detect.curPortIndex=0,i.isSupportLS()&&i.item("DCP_port",a.detect.curPort[1]),v(L.result)))||I(k,w,S)};var C,A=a.ports.length;if(A>1&&i.isSupportLS()){var M=i.item("DCP_port");if(e.isString(M)&&""!==M)for(C=1;C<A;C++){var R,x,E=a.ports[C];R=E[0],(x=E[1])==M&&(a.ports[C][0]=a.ports[0][0],a.ports[C][1]=a.ports[0][1],a.ports[0][0]=R,a.ports[0][1]=x);break}}for(a.detect.bConnected&&(A=1),d=[],a.detect.bConnected=!1,C=0;C<A;C++){var P=[a._getPreUrl(C),h?"dcp/":a._getModuleName(),h?a.oldDWASMVerStr:a._getModuleVer(),"/",u,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");d.push({method:"POST",url:P,timeout:g,data:_,onSuccess:y,onError:I})}for(C=0;C<A;C++)e.ajax(d[C]).index=C}},loadZip:function(u,h,f,g){var v,p=h,m=f;100===p&&(p=0,m=function(I){e.isString(I)&&(I=I.replace('"result" : [ 0,','"result" : [ 100,')),f(I)}),v=T.managerEnv.IfUpdateService?[a._getPreUrl(s.curPortIndex),a._getModuleName(),a._getModuleVer(),"/LoadZipFromBytes?type=",p,"&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join(""):[a._getPreUrl(s.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:v,async:!0,data:u,onSuccess:m,onError:g})},oldLoadZip:function(u,h,f,g){var v=[a._getPreUrl(s.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:v,async:!0,data:u,onSuccess:f,onError:g})},_getPreUrl:function(u){var h,f;return T.navInfoSync.bSSL?(f="https://",h=a.ports[u][1]):(f="http://",h=a.ports[u][0]),[f,a.host,":",h,"/"].join("")},_getHttpPreUrl:function(u){return["http://",a.host,":",a.ports[u][0],"/"].join("")},_getDcpWsPreUrl:function(u){return a.getWsUrl(a.host,T.navInfoSync.bSSL?a.ports[u][1]:a.ports[u][0])},_getJSON:function(u){return!!u&&e.parse(u)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return a.getManagerVersion().join("")},_compareVersion:function(u,h){return!e.isLocalIP(a.host)||(e.isArray(u)&&4==u.length&&e.isArray(h)&&h.length>=4?u[0]>h[0]||u[0]==h[0]&&u[1]>h[1]||u[0]==h[0]&&u[1]==h[1]&&u[2]>h[2]||u[0]==h[0]&&u[1]==h[1]&&u[2]==h[2]&&parseInt(u[3])>=parseInt(h[3]):!!(e.isArray(u)&&1==u.length&&e.isArray(h)&&h.length>=1)&&parseInt(u[0])>=parseInt(h[0]))},_getDSUpdateZipUrl:function(){var h,f,u=T.Lib.getNavInfo(),g="";return h="Win",u.bMac?h="Mac":u.bLinux&&(h="Linux"),f=T.navInfoSync.bFileSystem?"":"?t="+e.now(),u.bWin&&a.b64bit&&(g="_x64"),[T.managerEnv.resourcesPath,"/dist/serviceupdate/",h,"DSUpdate_",a.getManagerVersion().join("."),g,".zip",f].join("")},getPorts:function(u,h,f){var g="GetPorts",v="dwasm2_"+a._getModuleVer();this._postBaseV2(g,!1,{id:"1",method:g,version:v,parameter:[u]},700,h,f)},_setDefaultValuesFromServer:function(u){var h="",f=!1,g=!1,v={};if(u.length>4&&(h=e.isString(u[2])?u[2]:"",f=e.isString(u[3])&&"true"===u[3],g=e.isString(u[4])&&"64"===u[4]),u.length>5&&(v=u[5]),a.detect.connectedResult=u,a.strSID=h,a.bEnhancedMode=f,a.b64bit=g,a.objEnhancedPorts=v,f&&v&&v.dcp){var p=v.dcp;s.curPort=[p.port,p.sslPort]}else s.curPort=a.ports[s.curPortIndex];if(f&&v&&v.dwt){var m=v.dwt;s.dwtPort=m?T.navInfoSync.bSSL?m.sslPort:m.port:0}},checkDcpForUpdate:function(u,h,f,g,v,p,m,I){var y=!1,_=!0,C=3,A=0,M=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0].split(","),Z=!1;if(L.length>4&&(Z=e.isString(L[4])&&"64"===L[4]),a.b64bit=Z,T.managerEnv.IfUpdateService)if(a._compareVersion(U,a.oldDWASMVer)){var ne=a._getDSUpdateZipUrl();y=!0;var ue=function(pe,B,K){a._funUpdateFailed(v,p,pe,K.status),setTimeout(m,0)};f&&f(),g&&g(),s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),e.fetch(ne,{mode:"cors",dataType:"arraybuffer"}).then(function(pe){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadedZip,a._sendStatusEvent(),a.oldLoadZip(pe,0,function(){setTimeout(function(){a._checkManagerVersion(I,R,x)},5e3)},ue),pe=null},function(pe){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,v&&v();var B="The update package can't be downloaded. The error code is "+pe.httpCode+".";p&&p(!0,B),a._sendStatusEvent(!0,B),setTimeout(m,0)})}else _&&(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,f&&f(),u&&u(),a._sendStatusEvent(),_=!1);else s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0);return!0},E=function(L,U){return++A,s.curPortIndex=A%a.ports.length,s.bConnected=!1,s.bConnectNumLimited&&A>=s.IMAXCONNECTCOUNT?(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3),!0},R=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0].split(",");return!!a._compareVersion(U,a.getManagerVersion())&&(a.detect.connectedResult=L,T.managerEnv.IfUpdateService?setTimeout(y?function(){a._checkUpdateZip(g,v,p,m)}:function(){a._checkService(P,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0)),!0)},x=function(L,U,Z){var ne=1e3;return C<3&&(ne=500),--C<0?(a._funShowUpgradeDialogWhenUpdateFailed(v,p),setTimeout(m,0)):setTimeout(function(){a._checkManagerVersion(I,R,x)},ne),!0},P=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return f&&f(),!1;var U=L[0].split(",");return a._compareVersion(U,a.getServiceVersion())?(s.bConnected=!0,v&&v(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,L[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),setTimeout(m,0)):setTimeout(function(){a._checkUpdateZip(g,v,p,m)},0),!0},F=function(L,U,Z){return a._funUpdateFailed(v,p,L,Z.status),setTimeout(m,0),!0},w=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0];return e.isString(U)&&a._compareVersion(U.split(","),a.oldDWASMVer)?(a._setDefaultValuesFromServer(L),s.curPort=a.ports[A%a.ports.length],T.managerEnv.IfUpdateService?setTimeout(function(){a._checkService(P,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0))):(A=0,s.curPortIndex=0,_&&(f&&f(),u&&u(),_=!1),setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3)),!0},S=function(L,U){return++A,s.curPortIndex=A%a.ports.length,s.bConnected=!1,_&&(f&&f(),u&&u(L,U),_=!1),s.bConnectNumLimited&&A>=s.IMAXCONNECTCOUNT?(A=0,s.curPortIndex=0,setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3)):setTimeout(function(){a._checkManagerVersion(I,w,S)},1e3),!0};h&&h(),a._checkManagerVersion(I,w,S)},_checkUpdateZip:function(u,h,f,g,v){var p=function(R,x,P){var F=-1;if(P&&(F=P.status),0==F)return setTimeout(function(){a._checkService(M,E)},5e3),!0;var k=a._getDSUpdateZipUrl();return s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),e.fetch(k,{mode:"cors",dataType:"arraybuffer"}).then(y,m),!0},m=function(R){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,h&&h();var x="The update package can't be downloaded. The error code is "+R.httpCode+".";return f&&f(!0,x),a._sendStatusEvent(!0,x),setTimeout(g,0),!0},y=function(R){T.dcp.loadZip(R,1,function(P){var F,k;try{e.isString(P)&&"result"in(k=e.parse(P.replace(/\0/g,"")))&&(F=k.result)}catch(w){}e.isArray(F)&&F.length>2&&1==F[2]?setTimeout(function(){a._checkService(M,E)},5e3):(a._funUpdateFailed(h,f,P,200),setTimeout(g,0))},_),R=null},_=function(R,x,P){var F=-1;return P&&(F=P.status),0==F?setTimeout(function(){a._checkService(M,E)},5e3):(a._funUpdateFailed(h,f,R,P.status),setTimeout(g,0)),!0},A=3,M=function(R){if(!(e.isArray(R)&&R.length>0&&R[0]))return!1;var x=R[0].split(",");return!!a._compareVersion(x,a.getServiceVersion())&&(s.bConnected=!0,h&&h(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,R[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),setTimeout(g,0),!0)},E=function(R,x){var P=1e3;return A<3&&(P=500),--A<0?(a._funShowUpgradeDialogWhenUpdateFailed(h,f),setTimeout(g,0),!0):(setTimeout(function(){a._checkService(M,E)},P),!0)};u&&u(),s.dcpStatus=s.EnumDCP_DetectStatus.VerifyingZip,a._sendStatusEvent(),a._checkUpdateFile(function(R){if(!(e.isArray(R)&&R.length>1))return!1;if(1==R[1])s.dcpStatus=s.EnumDCP_DetectStatus.VerifiedZip,a._sendStatusEvent(),s.dcpStatus=s.EnumDCP_DetectStatus.UpdatingService,a._sendStatusEvent(),setTimeout(function(){a._checkService(M,E)},5e3);else{var x=0;if("exception"in R&&(x=R.exception),-2373==x)return a._funUpdateFailed(h,f,R,200),setTimeout(g,0),!0;setTimeout(p,0)}return!0},p)},_getStatusString:function(u,h){var f,g,v="";return u==s.EnumDCP_DetectStatus.Init?"Getting manager version":u==s.EnumDCP_DetectStatus.Connected?(h&&(v=h),"Getting manager version succeeded and the version is "+v):u==s.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":u==s.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":u==s.EnumDCP_DetectStatus.DownloadFailed?(g=".",h&&h.length>0?("."==h.slice(h.length-1)&&(g=""),f=" with the error: "+h):f="","Update package failed to download"+f+g):u==s.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":u==s.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":u==s.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":u==s.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":u==s.EnumDCP_DetectStatus.CheckedService?(h&&(v=h),"Getting service version succeeded and the version is "+v):u==s.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":u==s.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":u==s.EnumDCP_DetectStatus.UpdatingService?"Updating the service":u==s.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":u==s.EnumDCP_DetectStatus.UpdateFailed?(g=".",h&&h.length>0?("."==h.slice(h.length-1)&&(g=""),f=" with the error: "+h):f="","The update failed"+f+g):""},_sendStatusEvent:function(u,h){var f=!!u;e.isFunction(n.OnGetServiceUpdateStatus)&&n.OnGetServiceUpdateStatus(f,s.dcpStatus,a._getStatusString(s.dcpStatus,h))},_getErr:function(u){var h,f="";try{e.isString(u)?(h=u.replace(/\0/g,""),h=e.parse(h)):u&&(h=u),"description"in h&&(f=h.description)}catch(g){}return f},_funShowUpgradeDialogWhenUpdateFailed:function(u,h){return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,u&&u(),h&&h(),a._sendStatusEvent(!0),!0},_funUpdateFailed:function(u,h,f,g){var v,p;return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,u&&u(),200==g?(v="The update failed.",p=a._getStatusString(s.dcpStatus,a._getErr(f))):p=v="The update failed. The error code is "+g,h&&h(!0,v),a._sendStatusEvent(!0,p),!0},getDSPath:function(u,h){var f=T.managerEnv.resourcesPath,g=h;if(T.Lib.isString(f)&&f.length>0?"/"!=f[f.length-1]&&(f+="/"):f="Resources/",!g){var v=T.Lib.getNavInfo();g=v.bMac?".pkg":v.bArm64?"-arm64.deb":v.bMips64?"-mips64el.deb":v.bLinux||v.bChromeOS||v.bHarmonyOS?".deb":".msi"}return[f,"dist/DynamsoftServiceSetup",g].join("")},getLinuxHTML5DebPath:function(){return T.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return T.dcp.getDSPath(!1,".rpm")},newWebsocket:function(u){var h,f=a.wsProtocol,g=window.MozWebSocket;if(void 0!==g)h=f?new g(u,f):new g(u);else{var v=window.WebSocket;if(T.navInfo.bEdge){var p=window,m=parent;try{for(;p!=m&&m.WebSocket;)v=m.WebSocket,p=m.window,m=m.parent}catch(I){v=window.WebSocket}}h=f?new v(u,f):new v(u)}return h},_checkManagerVersionWS:function(u,h,f){var g=a._getDcpWsPreUrl(0),v={id:"1",method:"VersionInfo",version:"dwasm2_"+a._getModuleVer(),parameter:[]};return u&&(v.productKey=u),a.postStringDataByWS(g,e.stringify(v),function(m){var I=e.parse(m);I&&"result"in I?h(I.result):f()},f)},getWsUrl:function(u,h){return[T.navInfoSync.bSSL?"wss://":"ws://",u,":",h,"/"].join("")},postStringDataByWS:function(u,h,f,g){var v=a.newWebsocket(u);v.onopen=function(){1==v.readyState?(v.onopen=null,v.send(h)):0==v.readyState&&setTimeout(v.onopen,100)},v.onmessage=function(p){var m=p.data;if("object"==typeof m)return m=null,p=null,g(),void v.close();var I=m.replace(/\0/g,"");try{f(I),v.close()}catch(y){e.log(m),g(),v.close()}m=null,p=null},v.onerror=function(p){p&&e.log("websocket error: "+p),g(),v.close()},v.onclose=function(p){v.onclose=null,v.onerror=null,v.onmessage=null}},getBinaryFileInfo:function(u,h){var f="GetBinaryFileInfo",g={id:"1",method:f,version:"dwasm2_"+a._getModuleVer(),parameter:[]},v=e.stringify(g),p=function(y,_,C){var A=a._getJSON(y);A?u(A):h(y,_,C)};if(T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition){var m=a._getDcpWsPreUrl(0);return a.postStringDataByWS(m,v,p,h)}var I=[a._getPreUrl(0),a._getModuleName(),a._getModuleVer(),"/",f,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:I,timeout:200,data:v,onSuccess:p,onError:h})},checkDcpV3:function(u,h,f){var g=!0,v=0,p=function(I){return!!(e.isArray(I)&&I.length>0&&I[0])&&(a._setDefaultValuesFromServer(I),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(f,0),!0)},m=function(I,y){return++v,s.bConnectNumLimited&&v>=s.IMAXCONNECTCOUNT?(s.bConnected=!1,s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):setTimeout(function(){T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(u,p,m):a._checkManagerVersion(u,p,m)},1e3),g&&(h&&h(I,y),g=!1),!0};s.curPortIndex=0,s.bConnected=!1,T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(u,p,m):a._checkManagerVersion(u,p,m)}},l=r,o=r,t=r,e.domReady(function(){a.onReadys.length>0&&e.each(a.onReadys,function(u){e.isFunction(u)&&u()})}),T.Ready=function(u){return e.asyncGetNavInfo().then(function(){try{u(e)}catch(h){throw e.log(h.stack||h,"error"),h}})}}(T.Lib),function(e){var r=e.Lib,t=r.doc,i=20200521;if(!(r._evt_ver&&r.isNumber(r._evt_ver)&&r._evt_ver>=i)){r._evt_ver=i,r.Events={registedClass:[],registedObjs:[]};var n=function(s){var o=s||window.event,l=!0;return r.each(r.Events.registedObjs,function(d){r.each(r.Events.registedClass,function(c){if(d instanceof c&&d.bFocus&&d.handlerKeyDown&&!(l=d.handlerKeyDown(o)))return!1})}),l};r.ready(function(){r.addEventListener(t.documentElement,"keydown",n)}),r.mix(r,{getWheelDelta:function(s){var o,l=(s=s||window.event).wheelDelta,d=s.detail;return l&&(o=l/120),d&&(o=-(d%3==0?d/3:d)),o}});var a={LEFT:0,MIDDLE:1,RIGHT:2};r.EnumMouseButton=a,r.detectButton=function(s){var o=s||window.event;return null==o.which?o.button<2?a.LEFT:4==o.button?a.MIDDLE:a.RIGHT:o.which<2?a.LEFT:2==o.which?a.MIDDLE:a.RIGHT}}}(T),function(e){var r=20200521;e._ui_eventWhich_ver&&e.isNumber(e._ui_eventWhich_ver)&&e._ui_eventWhich_ver>=r||(e._ui_eventWhich_ver=r,e.switchEvent=function(t){return(t=t||window.event).which=null==t.which?t.button<2?1:4==t.button?2:3:t.which<2?1:2==t.which?2:3,t})}(T.Lib),function(e){var r=20200521;e._ui_style_ver&&e.isNumber(e._ui_style_ver)&&e._ui_style_ver>=r||(e._ui_style_ver=r,e.currentStyle=function(t,i){var n=e.win,a=n.doc;return t.currentStyle?t.currentStyle[i]:n.getComputedStyle?(i.replace(/([A-Z])/g,"-$1"),i.toLowerCase(),a.defaultView.getComputedStyle(t,null)[i]):null})}(T.Lib),function(e,r){var a=e.Lib,s=e.navInfoSync,o=a.isString,l=a.each,d=Array.prototype.slice,c=" ",u=s.bIE&&s.IEMode<10,h=/[\n\t\r\.]/g,f=20200521;function g(M,E,R){var x=this;return x instanceof g?M?"string"==typeof M?(a.error("Err 4001."),x):a.isArray(M)||M.isNodeList?(Array.prototype.push.apply(x,a.makeArray(M)),x):(x[0]=M,x.length=1,x):x:new g(M,E,R)}function v(M){return o(M)&&(M=a.trim(M))&&M.length>=3&&a.startsWith(M,"<")&&a.endsWith(M,">")}function p(M){return(c+M+c).replace(h,c)}function m(M){return M.replace(h,"")}function A(M,E){var R=E;return R&&R.isNodeList&&(R=R.getEL()),o(M)?(v(M)&&a.err("Err 4002."),new g(a.sizzle(M,R))):M.isNodeList?M:new g(M)}a._ui_nodelist_ver&&a.isNumber(a._ui_nodelist_ver)&&a._ui_nodelist_ver>=f||(a._ui_nodelist_ver=f,g.prototype={isNodeList:!0,length:0,item:function(M){return a.isNumber(M)?M>=this.length?null:new g(this[M]):new g(M)},slice:function(){return new g(d.apply(this,arguments))},getDOMNodes:function(){return d.call(this)},each:function(M,E){var R=this;return l(R,function(x,P){return x=new g(x),M.call(E||x,x,P,R)}),R},getEL:function(){return this.length>0?this[0]:void 0},all:function(M){return this.length>0?a.all(M,this):new g},one:function(M){var R=this.all(M);return R.length?R.slice(0,1):R}},a.mix(g.prototype,{before:function(M){var E=this.getEL(),R=[M];E&&(v(M)&&(R=a.parseHTML(M)),l(R,function(x){E.insertBefore(x,E.childNodes[0])}))},append:function(M){var E=this.getEL(),R=[M];E&&(v(M)&&(R=a.parseHTML(M)),l(R,function(x){E.appendChild(x)}))},html:function(M){var E=this.getEL();if(E){if(a.isUndef(M))return function(M){var E=M.innerHTML;return document.all?(E=E.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(F,k,w,S){return k?"</"+w.toLowerCase()+">":("<"+w.toLowerCase()+S+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(L,U,Z,ne,oe,ue,X,pe){return oe?'="'+oe+'"'+ue:L})}).replace(/<\/?([^>]+)>/g,function(F){return F}):E}(E);E.innerHTML="",l(a.parseHTML(M),function(R){E.appendChild(R)})}},attr:function(M,E){var R=this.getEL();if(R){if(a.isUndef(E))return"readonly"===M?R.readOnly?"readonly":"":("style"!==M&&u?R=R[M]:(R=R.attributes[M])&&(R=R.value),R);"class"==M?R.className=E:R[M]=E}},style:function(M,E){var R=this.getEL();if(R)return a.style(R,M,E)},css:function(M){l(this,function(E){l(M,function(R,x){a.style(E,x,R)})})},addClass:function(M){var E=this.getEL();E&&function(M,E){var x,F,k,w,R=M.className,P=E.length;if(R){for(x=p(R),F=R,k=0;k<P;k++)w=m(E[k]),x.indexOf(c+w+c)<0&&(F+=c+w);F=a.trim(F)}else F=E.join(" ");M.className=F}(E,M.split(c))},removeClass:function(M){var E=this.getEL();E&&function(M,E){var x,F,k,R=M.className,P=E.length;if(R&&P){for(x=p(R),F=0;F<P;F++)for(k=c+m(E[F])+c;x.indexOf(k)>=0;)x=x.replace(k,c);M.className=a.trim(x)}}(E,M.split(c))},hasClass:function(M){var E=this.getEL();if(E)return function(M,E){var x,F,k,R=M.className,P=E.length;if(R&&P){for(x=p(R),F=0;F<P;F++)if(k=c+m(E[F])+c,x.indexOf(k)<0)return!1;return!0}return!1}(E,M.split(c))},parent:function(){var M=this.getEL();return M&&(M=M.parentNode),new g(M)},remove:function(){var M=this.getEL();M&&M.parentNode.removeChild(M)},offset:function(){var M=this.getEL();return a.DOM.getElDimensions(M,!0)}}),a.mix(a,{all:A,one:function(M,E){var R=A(M,E);return R.length?R.slice(0,1):R},isNodeList:function(M){return M instanceof g}}),a.ready(function(){a.all=A}))}(T),function(e){var r=e.win,t=e.doc,i=isNaN,n=20200521;e._dom_ver&&e.isNumber(e._dom_ver)&&e._dom_ver>=n||(e._dom_ver=n,e.DOM={getOffset:function(a,s,o){a=a||r.event;for(var f,g,l=o||a.target,d=0,c=0,u=0,h=0,v=!1;l&&!i(l.offsetLeft)&&!i(l.offsetTop);)g=l.scrollLeft,f=l.scrollTop,"BODY"===l.tagName?v?(g=0,f=0):(g|=t.documentElement.scrollLeft,f|=t.documentElement.scrollTop):"fixed"===l.style.position&&(v=!0),d+=l.offsetLeft-g,c+=l.offsetTop-f,l=l.offsetParent;return s&&(u=s.Left,h=s.Top),{x:d=a.clientX-d-u,y:c=a.clientY-c-h}},getElDimensions:function(a,s){var o,l;return a?(o=a.style.display,a.style.display="",l=s?{offsetTop:a.offsetTop,offsetLeft:a.offsetLeft,offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight}:{clientTop:a.clientTop,clientLeft:a.clientLeft,clientWidth:a.clientWidth?a.clientWidth:parseInt(a.style.width)?parseInt(a.style.width):0,clientHeight:a.clientHeight?a.clientHeight:parseInt(a.style.height)?parseInt(a.style.height):0},a.style.display=o,l):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},e.getElDimensions=e.DOM.getElDimensions)}(T.Lib),function(e,r){var t=20211015,i=e.Lib;if(!(i._dialog_ver&&i.isNumber(i._dialog_ver)&&i._dialog_ver>=t)){i._dialog_ver=t,i.loaderBarClassName="ds-dwt-loaderBar",i.loaderBarWidth="230px",i.loaderBarHeight="240px",i.loaderBarBackgroundColor="",i.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",i.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",i.createShowMaskContent=function(){var R,x,E="";return T.DWT&&T.DWT.CustomizableDisplayInfo&&(x=T.DWT.CustomizableDisplayInfo),R=x&&i.isString(x.loaderBarSource)&&""!=x.loaderBarSource?x.loaderBarSource:T.navInfoSync.bIE?i.loaderBarSourceIE:i.loaderBarSource,""!=i.loaderBarBackgroundColor&&(E=";background:"+i.loaderBarBackgroundColor),['<div align="center" ','class="',i.loaderBarClassName,'" ','style="margin:0 auto;width:',i.loaderBarWidth,";height:",i.loaderBarHeight,";line-height:",i.loaderBarHeight,E,'"><img src="',R,'" /></div>'].join("")};var l,d,n=i.win,a=i.doc,s=!0,o=!1,c=5e5,C={pendingDialogStack:[],_updateStacking:function(E){var P,k;0!=(P=this.pendingDialogStack).length?(1!=E&&(l===r&&(l=a.createElement("div"),(d=l.style).position="fixed",d.display="block",d.left=d.top=d.margin=d.padding=0,d.backgroundColor="rgba(128, 128, 128, 0.1)",d.filter="alpha(opacity=10)",d.opacity=d.MozOpacity=.1,d.zIndex=c,d.width=d.height="100%",T.navInfo.bIE&&(l.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),a.createEvent&&i.addEventListener(l,"click",m)),a.body.contains(l)||a.body.appendChild(l)),k=c,i.each(P,function(w){k++,w._dlgInfo.mask.style.zIndex=k++,w.style.zIndex=k})):l!==r&&(i.removeEventListener(l,"click",m),a.body.removeChild(l),l=r)},pushDialog:function(E,R){var P,x=this,F=E.getBoundingClientRect();x.pendingDialogStack.length>=1e3?i.error("Too many modal dialogs."):((P=a.createElement("div")).className="dynamsoft-backdrop",1==R&&(P.style.left=(F.x|F.left)+"px",P.style.top=(F.y|F.top)+"px",P.style.width=F.width+"px",P.style.height=F.height+"px"),a.createEvent&&i.addEventListener(P,"click",function(k){if(E.dispatchEvent){var w=p(k);E.dispatchEvent(w)}}),E.parentNode.insertBefore(P,E.nextSibling),E._dlgInfo.mask=P,x.pendingDialogStack.push(E),x._updateStacking(R))},removeDialog:function(E){var x,P,R=this;-1!=(x=i.isArray(R.pendingDialogStack)?i.indexOf(E,R.pendingDialogStack):-1)&&(R.pendingDialogStack.splice(x,1),(P=E._dlgInfo.mask).parentNode.removeChild(P),E._dlgInfo.mask=null,R._updateStacking())}};i.dialog={setup:function(E,R,x){E.show=A.bind(E,o,R),E.showModal=A.bind(E,s,R),E.close=M.bind(E),x&&(E._dlgcfg=x),E._dlgInfo={}},setcfg:function(E,R){E._dlgcfg=R}},i.mask={container:!1,bConfined:!1,dlgMask:!1,preOnresize:!1,preOnscroll:!1},i.showMask=function(){if(!i.mask.dlgMask&&!i.dlgLoadingShowStatus){var x,E=i.mask.bConfined,R=i.mask.container;if(R){x=R.getBoundingClientRect();for(var P=R.firstChild;P;){if(i.isFunction(P.getBoundingClientRect)){x=P.getBoundingClientRect();break}P=P.nextSibling}}var F=document.createElement("div");F.className="dynamsoft-dialog-wrap",i.mask.preOnresize=!!window.onresize&&window.onresize,i.mask.preOnscroll=!!window.onscroll&&window.onscroll,E&&x&&(window.onresize=window.onscroll=function(){x=R.getBoundingClientRect();for(var k=R.firstChild;k;){if(i.isFunction(k.getBoundingClientRect)){x=k.getBoundingClientRect();break}k=k.nextSibling}F.style.left=(x.x|x.left)+"px",F.style.top=(x.y|x.top)+"px",F.style.width=x.width+"px",x.width<470&&(i.loaderBarWidth=x.width-10+"px"),F.style.height=i.loaderBarHeight=x.height+"px",i.mask.dlgMask&&(i.mask.dlgMask.close(),i.mask.dlgMask.showModal())},window.onscroll()),F.innerHTML=i.createShowMaskContent(),document.body.appendChild(F),i.mask.dlgMask=F,i.dialog.setup(i.mask.dlgMask,E),i.mask.dlgMask.showModal()}},i.hideMask=function(){var E=i.mask.dlgMask;E&&(E.close(),document.body.removeChild(E),i.mask.dlgMask=!1),window.onresize=i.mask.preOnresize?i.mask.preOnresize:null,i.mask.preOnresize=!1,window.onscroll=i.mask.preOnscroll?i.mask.preOnscroll:null,i.mask.preOnscroll=!1}}function f(E,R){for(var x=0;x<E.length;++x)if(E[x]==R)return s;return o}function p(E){var R=a.createEvent("MouseEvents");return R.initMouseEvent(E.type,E.bubbles,E.cancelable,n,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget),R}function m(E){a.body.dispatchEvent(p(E))}function A(E,R){var x=this,P="absolute",k=x._dlgcfg;k&&i.isString(k.style_position)&&(P=k.style_position),x.open?i.error("showDialog called on open dialog."):(x.open=s,x.removeAttribute("closed"),x.setAttribute("open","open"),x.setAttribute("style","DIALOG"==x.tagName?"position:"+P+";left:0;right:0;top:30%;margin:auto;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);width:-moz-fit-content;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;":"position:"+P+";display:block;left:0;right:0;border:0;top:30%;margin:auto;width:-moz-fit-content;-webkit-box-sizing:border-box;box-sizing:border-box;"),function(E){var R=o;return n.getComputedStyle?R=n.getComputedStyle(E):E.currentStyle&&(R=E.currentStyle),R&&"absolute"!=R.position||"auto"!=E.style.top&&""!=E.style.top||"auto"!=E.style.bottom&&""!=E.style.bottom?o:!function(E){for(var R=0;R<a.styleSheets.length;++R){var k,w,x=a.styleSheets[R],P=o,F=o;try{P=x.cssRules,F=a.querySelectorAll}catch(Z){}if(P&&F)for(var S=0;S<P.length;++S){k=P[S],w=o;try{w=F(k.selectorText)}catch(Z){}if(w&&f(w,E)){var L=k.style.getPropertyValue("top"),U=k.style.getPropertyValue("bottom");if(L&&"auto"!=L||U&&"auto"!=U)return s}}}return o}(E)}(x)&&function(E){E.style.top=(a.body.scrollTop||a.documentElement.scrollTop)+((n.innerHeight?n.innerHeight:a.documentElement.clientHeight)-E.offsetHeight)/2+"px",E._dlgInfo.isTopOverridden=s}(x),E&&(x._dlgInfo.modal=s,C.pushDialog(x,R)))}function M(E){var R=this;return R.open||i.error("closeDialog called on closed dialog."),R.open=o,R.removeAttribute("open"),R.setAttribute("closed","closed"),R.style.display="none",void 0!==E&&(R.returnValue=E),R._dlgInfo.isTopOverridden&&(R.style.top="auto"),R._dlgInfo.modal&&C.removeDialog(R),R.returnValue}}(T),function(e){var r=20200521;if(!(e._sizzle_ver&&e.isNumber(e._sizzle_ver)&&e._sizzle_ver>=r)){e._sizzle_ver=r;var n,a,s,o,l,d,c,u,h,f,g,v,m,I,y,_,R,x,P,F,i=RegExp,C="dws_"+1*new Date,A=window.document,M=0,E=0,k=function(fe,De){return fe===De&&(h=!0),0},w=[],S=w.pop,L=w.push,U=w.push,Z=w.slice,ne=function(fe,De){for(var Oe=0,Ne=fe.length;Oe<Ne;Oe++)if(fe[Oe]===De)return Oe;return-1},ue="[\\x20\\t\\r\\n\\f]",X="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",pe=["\\[",ue,"*(",X,")(?:",ue,"*([*^$|!~]?=)",ue,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",X,"))|)",ue,"*\\]"].join(""),B=new i(ue+"+","g"),K=new i(["^",ue,"+|((?:^|[^\\\\])(?:\\\\.)*)",ue,"+$"].join(""),"g"),G=new i(["^",ue,"*,",ue,"*"].join("")),ee=new i(["^",ue,"*([>+~]|",ue,")",ue,"*"].join("")),be=(new i("^"+X+"$"),{ID:new i("^#("+X+")"),CLASS:new i("^\\.("+X+")"),TAG:new i("^("+X+"|[*])"),ATTR:new i("^"+pe),needsContext:new i(["^",ue,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",ue,"*((?:-\\d)?\\d*)",ue,"*\\)|)(?=[^-]|$)"].join(""),"i")}),Te=/^[^{]+\{\s*\[native \w/,Ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,je=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,he=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(fe,De){return De?"\0"===fe?"\ufffd":fe.slice(0,-1)+"\\"+fe.charCodeAt(fe.length-1).toString(16)+" ":"\\"+fe},V=function(){f()};R=Q(),x=Q(),P=Q(),F=Q();try{U.apply(w=Z.call(A.childNodes),A.childNodes)}catch(fe){U={apply:w.length?function(De,Oe){L.apply(De,Z.call(Oe))}:function(De,Oe){for(var Ne=De.length,Pe=0;De[Ne++]=Oe[Pe++];);De.length=Ne-1}}}n=j.support={},f=j.setDocument=function(fe){var De,Oe,Ne=fe?fe.ownerDocument||fe:A;return Ne===g||9!==Ne.nodeType||!Ne.documentElement||(v=(g=Ne).documentElement,A!==g&&(Oe=g.defaultView)&&Oe.top!==Oe&&(Oe.addEventListener?Oe.addEventListener("unload",V,!1):Oe.attachEvent&&Oe.attachEvent("onunload",V)),n.attributes=re(function(Pe){return Pe.className="i",!Pe.getAttribute("className")}),n.getElementsByTagName=re(function(Pe){return Pe.appendChild(g.createComment("")),!Pe.getElementsByTagName("*").length}),n.getElementsByClassName=Te.test(g.getElementsByClassName),n.getById=re(function(Pe){return v.appendChild(Pe).id=C,!g.getElementsByName||!g.getElementsByName(C).length}),a.filter.ID=n.getById?function(Pe){var ze=Pe;return function(ge){return ge.getAttribute("id")===ze}}:function(Pe){var ze=new i(["^",Pe,"$"].join(""),"g");return function(ge){var Ee=void 0!==ge.getAttributeNode&&ge.getAttributeNode("id");return Ee&&ze.test(Ee.value)}},a.find.TAG=n.getElementsByTagName?function(Pe,ze){return void 0!==ze.getElementsByTagName?ze.getElementsByTagName(Pe):n.qsa?ze.querySelectorAll(Pe):void 0}:function(Pe,ze){var ge,Ee=[],Ue=0,Be=ze.getElementsByTagName(Pe);if("*"===Pe){for(;ge=Be[Ue++];)1===ge.nodeType&&Ee.push(ge);return Ee}return Be},a.find.CLASS=n.getElementsByClassName&&function(Pe,ze){if(void 0!==ze.getElementsByClassName)return ze.getElementsByClassName(Pe)},I=[],m=[],(n.qsa=Te.test(g.querySelectorAll))&&(re(function(Pe){v.appendChild(Pe).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",Pe.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+ue+"*(?:''|\"\")"),Pe.querySelectorAll("[selected]").length||m.push("\\["+ue+"*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),Pe.querySelectorAll("[id~="+C+"-]").length||m.push("~="),Pe.querySelectorAll(":checked").length||m.push(":checked"),Pe.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")}),re(function(Pe){Pe.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ze=g.createElement("input");ze.setAttribute("type","hidden"),Pe.appendChild(ze).setAttribute("name","D"),Pe.querySelectorAll("[name=d]").length&&m.push("name"+ue+"*[*^$|!~]?="),2!==Pe.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),v.appendChild(Pe).disabled=!0,2!==Pe.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),Pe.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Te.test(y=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&re(function(Pe){n.disconnectedMatch=y.call(Pe,"*"),y.call(Pe,"[s!='']:x")}),m=m.length&&new i(m.join("|")),I=I.length&&new i(I.join("|")),De=Te.test(v.compareDocumentPosition),_=De||Te.test(v.contains)?function(Pe,ze){var ge=9===Pe.nodeType?Pe.documentElement:Pe,Ee=ze&&ze.parentNode;return Pe===Ee||!(!Ee||1!==Ee.nodeType||!(ge.contains?ge.contains(Ee):Pe.compareDocumentPosition&&16&Pe.compareDocumentPosition(Ee)))}:function(Pe,ze){if(ze)for(;ze=ze.parentNode;)if(ze===Pe)return!0;return!1},k=De?function(Pe,ze){if(Pe===ze)return h=!0,0;var ge=!Pe.compareDocumentPosition-!ze.compareDocumentPosition;return ge||(1&(ge=(Pe.ownerDocument||Pe)===(ze.ownerDocument||ze)?Pe.compareDocumentPosition(ze):1)||!n.sortDetached&&ze.compareDocumentPosition(Pe)===ge?Pe===g||Pe.ownerDocument===A&&_(A,Pe)?-1:ze===g||ze.ownerDocument===A&&_(A,ze)?1:u?ne(u,Pe)-ne(u,ze):0:4&ge?-1:1)}:function(Pe,ze){if(Pe===ze)return h=!0,0;var ge,Ee=0,Ue=Pe.parentNode,Be=ze.parentNode,Qe=[Pe],Ze=[ze];if(!Ue||!Be)return Pe===g?-1:ze===g?1:Ue?-1:Be?1:u?ne(u,Pe)-ne(u,ze):0;if(Ue===Be)return le(Pe,ze);for(ge=Pe;ge=ge.parentNode;)Qe.unshift(ge);for(ge=ze;ge=ge.parentNode;)Ze.unshift(ge);for(;Qe[Ee]===Ze[Ee];)Ee++;return Ee?le(Qe[Ee],Ze[Ee]):Qe[Ee]===A?-1:Ze[Ee]===A?1:0}),g},j.matches=function(fe,De){return j(fe,null,null,De)},j.matchesSelector=function(fe,De){if((fe.ownerDocument||fe)!==g&&f(fe),n.matchesSelector&&!F[De+" "]&&(!I||!I.test(De))&&(!m||!m.test(De)))try{var Oe=y.call(fe,De);if(Oe||n.disconnectedMatch||fe.document&&11!==fe.document.nodeType)return Oe}catch(Ne){F(De,!0)}return j(De,g,null,[fe]).length>0},j.contains=function(fe,De){return(fe.ownerDocument||fe)!==g&&f(fe),_(fe,De)},j.escape=function(fe){return(fe+"").replace(he,ae)},j.error=function(fe){throw new Error("Syntax error: "+fe)},j.uniqueSort=function(fe){var De,Oe=[],Ne=0,Pe=0;if(h=!n.detectDuplicates,u=!n.sortStable&&fe.slice(0),fe.sort(k),h){for(;De=fe[Pe++];)De===fe[Pe]&&(Ne=Oe.push(Pe));for(;Ne--;)fe.splice(Oe[Ne],1)}return u=null,fe},s=j.getText=function(fe){var De,Oe="",Ne=0,Pe=fe.nodeType;if(Pe){if(1===Pe||9===Pe||11===Pe){if("string"==typeof fe.textContent)return fe.textContent;for(fe=fe.firstChild;fe;fe=fe.nextSibling)Oe+=s(fe)}else if(3===Pe||4===Pe)return fe.nodeValue}else for(;De=fe[Ne++];)Oe+=s(De);return Oe},a=j.selectors={cacheLength:50,match:be,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(fe){return fe[3]=fe[3]||fe[4]||fe[5]||"","~="===fe[2]&&(fe[3]=" "+fe[3]+" "),fe.slice(0,4)}},filter:{TAG:function(fe){var De=fe.toLowerCase();return"*"===fe?function(){return!0}:function(Oe){return Oe.nodeName&&Oe.nodeName.toLowerCase()===De}},CLASS:function(fe){var De=R[fe+" "];return De||(De=new i("(^|"+ue+")"+fe+"("+ue+"|$)"))&&R(fe,function(Oe){return De.test("string"==typeof Oe.className&&Oe.className||void 0!==Oe.getAttribute&&Oe.getAttribute("class")||"")})},ATTR:function(fe,De,Oe){return function(Ne){var Pe=j.attr(Ne,fe);return null==Pe?"!="===De:!De||(Pe+="","="===De?Pe===Oe:"!="===De?Pe!==Oe:"^="===De?Oe&&0===Pe.indexOf(Oe):"*="===De?Oe&&Pe.indexOf(Oe)>-1:"$="===De?Oe&&Pe.slice(-Oe.length)===Oe:"~="===De?(" "+Pe.replace(B," ")+" ").indexOf(Oe)>-1:"|="===De&&(Pe===Oe||Pe.slice(0,Oe.length+1)===Oe+"-"))}}}},Ae.prototype=a.filters=a.pseudos,a.setFilters=new Ae,o=j.tokenize=function(fe,De){var Oe,Ne,ze,ge,Ee,Ue,Pe=[],Be=x[fe+" "];if(Be)return De?0:Be.slice(0);for(ge=fe,Ee=[],Ue=a.preFilter;ge;){for(ze in(!Oe||(Ne=G.exec(ge)))&&(Ne&&(ge=ge.slice(Ne[0].length)||ge),Ee.push(Pe=[])),Oe=!1,(Ne=ee.exec(ge))&&(Oe=Ne.shift(),Pe.push({value:Oe,type:Ne[0].replace(K," ")}),ge=ge.slice(Oe.length)),a.filter)(Ne=be[ze].exec(ge))&&(!Ue[ze]||(Ne=Ue[ze](Ne)))&&(Oe=Ne.shift(),Pe.push({value:Oe,type:ze,matches:Ne}),ge=ge.slice(Oe.length));if(!Oe)break}return De?ge.length:ge?j.error(fe):x(fe,Ee).slice(0)},l=j.compile=function(fe,De){var Oe,Ne=[],Pe=[],ze=P[fe+" "];if(!ze){for(De||(De=o(fe)),Oe=De.length;Oe--;)(ze=$e(De[Oe]))[C]?Ne.push(ze):Pe.push(ze);(ze=P(fe,function(fe,De){var Oe=De.length>0,Ne=fe.length>0,Pe=function(ze,ge,Ee,Ue,Be){var Qe,Ze,tt,lt=0,dt="0",_t=ze&&[],Rt=[],xt=c,Pt=ze||Ne&&a.find.TAG("*",Be),jt=M+=null==xt?1:Math.random()||.1,Ir=Pt.length;for(Be&&(c=ge===g||ge||Be);dt!==Ir&&null!=(Qe=Pt[dt]);dt++){if(Ne&&Qe){for(Ze=0,!ge&&Qe.ownerDocument!==g&&(f(Qe),Ee=!1);tt=fe[Ze++];)if(tt(Qe,ge||g,Ee)){Ue.push(Qe);break}Be&&(M=jt)}Oe&&((Qe=!tt&&Qe)&&lt--,ze&&_t.push(Qe))}if(lt+=dt,Oe&&dt!==lt){for(Ze=0;tt=De[Ze++];)tt(_t,Rt,ge,Ee);if(ze){if(lt>0)for(;dt--;)_t[dt]||Rt[dt]||(Rt[dt]=S.call(Ue));Rt=Ve(Rt)}U.apply(Ue,Rt),Be&&!ze&&Rt.length>0&&lt+De.length>1&&j.uniqueSort(Ue)}return Be&&(M=jt,c=xt),_t};return Oe?q(Pe):Pe}(Pe,Ne))).selector=fe}return ze},d=j.select=function(fe,De,Oe,Ne){var ze="function"==typeof fe&&fe,ge=!Ne&&o(fe=ze.selector||fe);return Oe=Oe||[],(ze||l(fe,ge))(Ne,De,!1,Oe,!De||De),Oe},n.sortStable=C.split("").sort(k).join("")===C,n.detectDuplicates=!!h,f(),n.sortDetached=re(function(fe){return 1&fe.compareDocumentPosition(g.createElement("fieldset"))}),re(function(fe){return fe.innerHTML="<a href='#'></a>","#"===fe.firstChild.getAttribute("href")}),!n.attributes||re(function(fe){return fe.innerHTML="<input/>",fe.firstChild.setAttribute("value",""),""===fe.firstChild.getAttribute("value")}),re(function(fe){return null==fe.getAttribute("disabled")}),e.support=n,e.sizzle=j}function Q(){var fe=[];return function De(Oe,Ne){return fe.push(Oe+" ")>a.cacheLength&&delete De[fe.shift()],De[Oe+" "]=Ne}}function me(fe){for(var De=0,Oe=fe.length,Ne="";De<Oe;De++)Ne+=fe[De].value;return Ne}function j(fe,De,Oe,Ne){var Pe,ze,ge,Ee,Ue,Be,Qe,Ze=De&&De.ownerDocument,tt=De?De.nodeType:9;if(Oe=Oe||[],"string"!=typeof fe||!fe||1!==tt&&9!==tt&&11!==tt)return Oe;if(!Ne){if((De?De.ownerDocument||De:A)!==g&&f(De),De=De||g,11!==tt)if(Ue=Ge.exec(fe))if(Pe=Ue[1]){if(9===tt){if(!(ge=De.getElementById(Pe)))return Oe;if(ge.id===Pe)return Oe.push(ge),Oe}else if(Ze&&(ge=Ze.getElementById(Pe))&&_(De,ge)&&ge.id===Pe)return Oe.push(ge),Oe}else{if(Ue[2])return U.apply(Oe,De.getElementsByTagName(fe)),Oe;if((Pe=Ue[3])&&n.getElementsByClassName&&De.getElementsByClassName)return U.apply(Oe,De.getElementsByClassName(Pe)),Oe}else(Ue=je.exec(fe))&&((Pe=Ue[1])?(9===tt?(ge=De.getElementById(Pe))&&ge.id===Pe&&(De=ge):Ze&&(ge=Ze.getElementById(Pe))&&_(De,ge)&&ge.id===Pe&&(De=ge),Pe="#"+Pe+" "):(Pe=Ue[2])?(U.apply(Oe,De.getElementsByTagName(fe)),De=Oe[0],Pe+=" "):(Pe=Ue[3])&&n.getElementsByClassName&&De.getElementsByClassName&&(U.apply(Oe,De.getElementsByClassName(Pe)),De=Oe[0],Pe+=" "),fe=fe.replace(Pe,""));if(n.qsa&&!F[fe+" "]&&(!m||!m.test(fe))){if(1!==tt)Ze=De,Qe=fe;else if("object"!==De.nodeName.toLowerCase()){for((Ee=De.getAttribute("id"))?Ee=Ee.replace(he,ae):De.setAttribute("id",Ee=C),ze=(Be=o(fe)).length;ze--;)Be[ze]="#"+Ee+" "+me(Be[ze]);Qe=Be.join(","),Ze=De}if(Qe)try{return U.apply(Oe,Ze.querySelectorAll(Qe)),Oe}catch(lt){F(fe,!0)}finally{Ee===C&&De.removeAttribute("id")}}}return d(fe.replace(K,"$1"),De,Oe,Ne)}function q(fe){return fe[C]=!0,fe}function re(fe){var De=g.createElement("fieldset");try{return!!fe(De)}catch(Oe){return!1}finally{De.parentNode&&De.parentNode.removeChild(De),De=null}}function le(fe,De){var Oe=De&&fe,Ne=Oe&&1===fe.nodeType&&1===De.nodeType&&fe.sourceIndex-De.sourceIndex;if(Ne)return Ne;if(Oe)for(;Oe=Oe.nextSibling;)if(Oe===De)return-1;return fe?1:-1}function Ae(){}function Se(fe,De,Oe){var Ne=De.dir,Pe=De.next,ze=Pe||Ne,ge=Oe&&"parentNode"===ze,Ee=E++;return De.first?function(Ue,Be,Qe){for(;Ue=Ue[Ne];)if(1===Ue.nodeType||ge)return fe(Ue,Be,Qe);return!1}:function(Ue,Be,Qe){var Ze,tt,lt,dt=[M,Ee];if(Qe){for(;Ue=Ue[Ne];)if((1===Ue.nodeType||ge)&&fe(Ue,Be,Qe))return!0}else for(;Ue=Ue[Ne];)if(1===Ue.nodeType||ge)if(tt=(lt=Ue[C]||(Ue[C]={}))[Ue.uniqueID]||(lt[Ue.uniqueID]={}),Pe&&Pe===Ue.nodeName.toLowerCase())Ue=Ue[Ne]||Ue;else{if((Ze=tt[ze])&&Ze[0]===M&&Ze[1]===Ee)return dt[2]=Ze[2];if(tt[ze]=dt,dt[2]=fe(Ue,Be,Qe))return!0}return!1}}function ye(fe){return fe.length>1?function(De,Oe,Ne){for(var Pe=fe.length;Pe--;)if(!fe[Pe](De,Oe,Ne))return!1;return!0}:fe[0]}function Ve(fe,De,Oe,Ne,Pe){for(var ze,ge=[],Ee=0,Ue=fe.length,Be=null!=De;Ee<Ue;Ee++)(ze=fe[Ee])&&(!Oe||Oe(ze,Ne,Pe))&&(ge.push(ze),Be&&De.push(Ee));return ge}function ke(fe,De,Oe,Ne,Pe,ze){return Ne&&!Ne[C]&&(Ne=ke(Ne)),Pe&&!Pe[C]&&(Pe=ke(Pe,ze)),q(function(ge,Ee,Ue,Be){var Qe,Ze,tt,lt=[],dt=[],_t=Ee.length,Rt=ge||function(fe,De,Oe){for(var Ne=0,Pe=De.length;Ne<Pe;Ne++)j(fe,De[Ne],Oe);return Oe}(De||"*",Ue.nodeType?[Ue]:Ue,[]),xt=!fe||!ge&&De?Rt:Ve(Rt,lt,fe,Ue,Be),Pt=Oe?Pe||(ge?fe:_t||Ne)?[]:Ee:xt;if(Oe&&Oe(xt,Pt,Ue,Be),Ne)for(Qe=Ve(Pt,dt),Ne(Qe,[],Ue,Be),Ze=Qe.length;Ze--;)(tt=Qe[Ze])&&(Pt[dt[Ze]]=!(xt[dt[Ze]]=tt));if(ge){if(Pe||fe){if(Pe){for(Qe=[],Ze=Pt.length;Ze--;)(tt=Pt[Ze])&&Qe.push(xt[Ze]=tt);Pe(null,Pt=[],Qe,Be)}for(Ze=Pt.length;Ze--;)(tt=Pt[Ze])&&(Qe=Pe?ne(ge,tt):lt[Ze])>-1&&(ge[Qe]=!(Ee[Qe]=tt))}}else Pt=Ve(Pt===Ee?Pt.splice(_t,Pt.length):Pt),Pe?Pe(null,Ee,Pt,Be):U.apply(Ee,Pt)})}function $e(fe){for(var De,Oe,Ne,Pe=fe.length,ze=a.relative[fe[0].type],ge=ze||a.relative[" "],Ee=ze?1:0,Ue=Se(function(Ze){return Ze===De},ge,!0),Be=Se(function(Ze){return ne(De,Ze)>-1},ge,!0),Qe=[function(Ze,tt,lt){var dt=!ze&&(lt||tt!==c)||((De=tt).nodeType?Ue(Ze,tt,lt):Be(Ze,tt,lt));return De=null,dt}];Ee<Pe;Ee++)if(Oe=a.relative[fe[Ee].type])Qe=[Se(ye(Qe),Oe)];else{if((Oe=a.filter[fe[Ee].type].apply(null,fe[Ee].matches))[C]){for(Ne=++Ee;Ne<Pe&&!a.relative[fe[Ne].type];Ne++);return ke(Ee>1&&ye(Qe),Ee>1&&me(fe.slice(0,Ee-1).concat({value:" "===fe[Ee-2].type?"*":""})).replace(K,"$1"),Oe,Ee<Ne&&$e(fe.slice(Ee,Ne)),Ne<Pe&&$e(fe=fe.slice(Ne)),Ne<Pe&&me(fe))}Qe.push(Oe)}return ye(Qe)}}(T.Lib),function(e){var i=e.doc,n=e.each,a=i.documentElement,s=20200521;if(!(e._ui_nodelistExt_ver&&e.isNumber(e._ui_nodelistExt_ver)&&e._ui_nodelistExt_ver>=s)){e._ui_nodelistExt_ver=s;var d,c,u,h,f,g,o=e.support,l=e.sizzle,v=i.createElement("div"),p=i.createElement("div");if(p.style){p.style.cssText="float:left;opacity:.5",o.opacity="0.5"===p.style.opacity,o.cssFloat=!!p.style.cssFloat,p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===p.style.backgroundClip,(v=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",p.innerHTML="",v.appendChild(p),o.boxSizing=""===p.style.boxSizing||""===p.style.MozBoxSizing||""===p.style.WebkitBoxSizing,e.mix(o,{reliableHiddenOffsets:function(){return null==d&&m(),h},boxSizingReliable:function(){return null==d&&m(),u},pixelMarginRight:function(){return null==d&&m(),c},pixelPosition:function(){return null==d&&m(),d},reliableMarginRight:function(){return null==d&&m(),f},reliableMarginLeft:function(){return null==d&&m(),g}});var I,y,_=/^margin/,C=/^(top|right|bottom|left)$/,A=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,M=new RegExp("^("+A+")(?!px)[a-z%]+$","i"),E=new RegExp("^("+A+")(.*)$","i");window.getComputedStyle?(I=function(H){var j,q;return(!(q=(j=e.isFunction(H.getEL)?H.getEL():H).ownerDocument.defaultView)||!q.opener)&&(q=window),q.getComputedStyle(j)},y=function(H,j,q){var re,de,le,we,Ae=H.style;return(""===(we=(q=q||I(H))?q.getPropertyValue(j)||q[j]:void 0)||void 0===we)&&!l.contains(H.ownerDocument,H)&&(we=e.style(H,j)),q&&!o.pixelMarginRight()&&M.test(we)&&_.test(j)&&(re=Ae.width,de=Ae.minWidth,le=Ae.maxWidth,Ae.minWidth=Ae.maxWidth=Ae.width=we,we=q.width,Ae.width=re,Ae.minWidth=de,Ae.maxWidth=le),void 0===we?we:we+""}):a.currentStyle&&(I=function(H){return H.currentStyle},y=function(H,j,q){var re,de,le,we,Ae=H.style;return null==(we=(q=q||I(H))?q[j]:void 0)&&Ae&&Ae[j]&&(we=Ae[j]),M.test(we)&&!C.test(j)&&(re=Ae.left,(le=(de=H.runtimeStyle)&&de.left)&&(de.left=H.currentStyle.left),Ae.left="fontSize"===j?"1em":we,we=Ae.pixelLeft+"px",Ae.left=re,le&&(de.left=le)),void 0===we?we:we+""||"auto"});var X,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,x=/<([\w:-]+)/,P=/^\s+/,F=/<|&#?\w+;/,k=/<tbody/i,w=/^-ms-/,S=/-([\da-z])/gi,L=/^(none|table(?!-c[ea]).+)/,U=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Z={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"},oe=["Top","Right","Bottom","Left"],ue={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:o.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},pe=["Webkit","O","Moz","ms"],K=document.createElement("div");if(K.style){X=K.style,o.cssFloat=!!K.style.cssFloat;var G=function(H,j){return j.toUpperCase()},ee={type:e.type,cssHooks:{},htmlPrefilter:function(H){return H.replace(R,"<$1></$2>")},nodeName:function(H,j){return H.nodeName&&H.nodeName.toLowerCase()===j.toLowerCase()},merge:function(H,j){for(var q=+j.length,re=0,de=H.length;re<q;)H[de++]=j[re++];if(q!=q)for(;void 0!==j[re];)H[de++]=j[re++];return H.length=de,H},camelCase:function(H){return H.replace(w,"ms-").replace(S,G)},cssProps:{float:o.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}};n(["height","width"],function(H,j){ee.cssHooks[H]={get:function(q,re,de){if(re)return L.test(e.css(q,"display"))&&0===q.offsetWidth?function(H,j,q,re){var de,we={};return n(j,function(Ae,Se){we[Se]=H.style[Se],H.style[Se]=j[Se]}),de=q.apply(H,[]),n(j,function(Ae,Se){H.style[Se]=we[Se]}),de}(q,Z,function(){return ae(q,H,de)}):ae(q,H,de)},set:function(q,re,de){var le=de&&I(q);return function(H,j,q){var re=E.exec(j);return re?Math.max(0,re[1]-(q||0))+(re[2]||"px"):j}(0,re,de?he(q,H,de,o.boxSizing&&"border-box"===e.css(q,"boxSizing",!1,le),le):0)}}}),e.style=function(H,j,q,re){if(H&&3!==H.nodeType&&8!==H.nodeType&&H.style){var de,le,we,Ae=ee.camelCase(j),Se=H.style;if(j=ee.cssProps[Ae]||(ee.cssProps[Ae]=ie(Ae)||Ae),we=ee.cssHooks[j]||ee.cssHooks[Ae],void 0===q)return we&&"get"in we&&void 0!==(de=we.get(H,!1,re))?de:Se[j]+"";if("string"==(le=typeof q)&&(de=V(q))&&de[1]&&(q=function(H,j,q,re){var de,le=1,we=20,Ae=function(){return e.css(H,j,"")},Se=Ae(),ye=q&&q[3]||(ee.cssNumber[j]?"":"px"),Fe=(ee.cssNumber[j]||"px"!==ye&&+Se)&&V(e.css(H,j));if(Fe&&Fe[3]!==ye){ye=ye||Fe[3],q=q||[],Fe=+Se||1;do{e.style(H,j,(Fe/=le=le||".5")+ye)}while(le!==(le=Ae()/Se)&&1!==le&&--we)}return q&&(Fe=+Fe||+Se||0,de=q[1]?Fe+(q[1]+1)*q[2]:+q[2]),de}(H,j,de),le="number"),null==q||q!=q)return;"number"===le&&(q+=de&&de[3]||(ee.cssNumber[Ae]?"":"px")),!o.clearCloneStyle&&""===q&&0===j.indexOf("background")&&(Se[j]="inherit"),(!we||!("set"in we)||void 0!==(q=we.set(H,q,re)))&&(Se[j]=q)}},e.css=function(H,j,q,re){var de,le,we,Ae=ee.camelCase(j);return j=ee.cssProps[Ae]||(ee.cssProps[Ae]=ie(Ae)||Ae),(we=ee.cssHooks[j]||ee.cssHooks[Ae])&&"get"in we&&(le=we.get(H,!0,q)),void 0===le&&(le=y(H,j,re)),"normal"===le&&j in ne&&(le=ne[j]),""===q||q?(de=parseFloat(le),!0===q||isFinite(de)?de||0:le):le},e.parseHTML=function(H,j){if(!H||"string"!=typeof H)return[];"boolean"==typeof j&&(j=!1),j=j||document;var q=U.exec(H);return q?[j.createElement(q[1])]:(q=function(H,j){for(var q,re,le,we,Ae,Se,ye=H.length,Fe=function(H){var j="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),q=H.createDocumentFragment();if(q.createElement)for(;j.length;)q.createElement(j.pop());return q}(j),Ve=[],ke=0;ke<ye;ke++)if((re=H[ke])||0===re)if("object"===e.type(re))ee.merge(Ve,re.nodeType?[re]:re);else if(F.test(re)){for(le=le||Fe.appendChild(j.createElement("div")),we=(x.exec(re)||["",""])[1].toLowerCase(),le.innerHTML=(Se=ue[we]||ue._default)[1]+ee.htmlPrefilter(re)+Se[2],q=Se[0];q--;)le=le.lastChild;if(!o.leadingWhitespace&&P.test(re)&&Ve.push(j.createTextNode(P.exec(re)[0])),!o.tbody)for(q=(re="table"!==we||k.test(re)?"<table>"!==Se[1]||k.test(re)?0:le:le.firstChild)&&re.childNodes.length;q--;)ee.nodeName(Ae=re.childNodes[q],"tbody")&&!Ae.childNodes.length&&re.removeChild(Ae);for(ee.merge(Ve,le.childNodes),le.textContent="";le.firstChild;)le.removeChild(le.firstChild);le=Fe.lastChild}else Ve.push(j.createTextNode(re));for(le&&Fe.removeChild(le),ke=0;re=Ve[ke++];)"SCRIPT"!==re.tagName&&(l.contains(re.ownerDocument,re),Fe.appendChild(re));return le=null,Fe}([H],j),ee.merge([],q.childNodes))}}}}function m(){var H,j;a.appendChild(v),p.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",d=u=g=!1,c=f=!0,window.getComputedStyle&&(j=window.getComputedStyle(p),d="1%"!==(j||{}).top,g="2px"===(j||{}).marginLeft,u="4px"===(j||{width:"4px"}).width,p.style.marginRight="50%",c="4px"===(j||{marginRight:"4px"}).marginRight,(H=p.appendChild(document.createElement("div"))).style.cssText=p.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",H.style.marginRight=H.style.width="0",p.style.width="1px",f=!parseFloat((window.getComputedStyle(H)||{}).marginRight),p.removeChild(H)),p.style.display="none",(h=0===p.getClientRects().length)&&(p.style.display="",p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",p.childNodes[0].style.borderCollapse="separate",(H=p.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(h=0===H[0].offsetHeight)&&(H[0].style.display="",H[1].style.display="none",h=0===H[0].offsetHeight)),a.removeChild(v)}function ie(H){if(H in X)return H;for(var j=H.charAt(0).toUpperCase()+H.slice(1),q=pe.length;q--;)if((H=pe[q]+j)in X)return H}function he(H,j,q,re,de){for(var le=q===(re?"border":"content")?4:"width"===j?1:0,we=0;le<4;le+=2)"margin"===q&&(we+=e.css(H,q+oe[le],!0,de)),re?("content"===q&&(we-=e.css(H,"padding"+oe[le],!0,de)),"margin"!==q&&(we-=e.css(H,"border"+oe[le]+"Width",!0,de))):(we+=e.css(H,"padding"+oe[le],!0,de),"padding"!==q&&(we+=e.css(H,"border"+oe[le]+"Width",!0,de)));return we}function ae(H,j,q){var re=!0,de="width"===j?H.offsetWidth:H.offsetHeight,le=I(H),we=o.boxSizing&&"border-box"===e.css(H,"boxSizing",!1,le);if(de<=0||null==de){if(((de=y(H,j,le))<0||null==de)&&(de=H.style[j]),M.test(de))return de;re=we&&(o.boxSizingReliable()||de===H.style[j]),de=parseFloat(de)||0}return de+he(H,j,q||(we?"border":"content"),re,le)}function V(H){return new RegExp("^(?:([+-])=|)("+A+")([a-z%]*)$","i").exec(H)}}(T.Lib),T.navInfoSync.bIE&&T.navInfoSync.IEVersion<=9||function(e){var r={};function t(i){if(r[i])return r[i].exports;var n=r[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(i,n,a){t.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:a})},t.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,n){if(1&n&&(i=t(i)),8&n||4&n&&"object"==typeof i&&i&&i.__esModule)return i;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&n&&"string"!=typeof i)for(var s in i)t.d(a,s,function(o){return i[o]}.bind(null,s));return a},t.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(n,"a",n),n},t.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},t.p="",t(t.s=7)}([function(e,r,t){t.d(r,"e",function(){return n}),t.d(r,"c",function(){return a}),t.d(r,"g",function(){return s}),t.d(r,"d",function(){return o}),t.d(r,"f",function(){return l}),t.d(r,"b",function(){return d}),t.d(r,"a",function(){return c});var n=(!("undefined"==typeof window)&&window,{PREVIOUS:"prev",NEXT:"next"}),a={CLICK:"click",KEYDOWN:"keydown",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",CHANGE:"change",SCROLL:"scroll",CONTEXTMENU:"contextmenu",RESIZE:"resize"},s={IMAGE_SELECTED:"imageSelected",PAGE_CLICK:"click",PAGE_MOUSE_DOWN:"mousedown",PAGE_MOUSE_MOVE:"mousemove",PAGE_MOUSE_UP:"mouseup",PAGE_MOUSE_OVER:"mouseover",PAGE_MOUSE_OUT:"mouseout",PAGE_DOUBLE_CLICK:"dblclick",PAGE_RIGHT_CLICK:"rightclick",PAGE_CONTEXTMENU:"contextmenu",DRAG_START:"dragstart",DRAG_MOVE:"dragmove",DRAG_DONE:"dragdone",KEY_DOWN:"keydown",KEY_UP:"keyup",RESIZE:"resize",TOP_PAGE_CHANGED:"topPageChanged",BUFFER_CHANGED:"bufferChanged",THUMBNAIL_STRETCH:"resize",REMOVE_PAGE:"removePage",FILE_KEY_UP:"fileKeyUp",FILE_LIST_CLICK:"fileListClick",FILE_LIST_RIGHT_CLICK:"fileListRightClick",TAG_KEY_UP:"tagKeyUp",TAG_LIST_CLICK:"tagListClick",TAG_LIST_RIGHT_CLICK:"tagListRightClick",PAGE_AREA_SELECTED:"pageAreaSelected",PAGE_AREA_UNSELECTED:"pageAreaUnselected",VIEWER_PAGE_RENDERED:"pageRendered",DOCUMENT_KEY_UP:"onDocumentKeyUp",DOCUMENT_POINTER_UP:"onDocumentPointerUp",DOCUMENT_POINTER_MOVE:"onDocumentPointerMove",DOCUMENT_CLICK:"onDocumentClick",SIDEBAR_CLICK:"onSidebarClick",FILE_DROP:"onDrop",WHEEL:"wheel"},o={APPEND_SYNC_DROP:"_appendSyncDrop",UPDATE_UI_SETTING:"_updateUISetting",UPDATE_FOCUS:"_updateFocus",CANVAS_VISIBILITY_CHANGED:"_canvasVisibilityChanged",SET_SELECTED_INDEXES:"_SetSelectedIndexes",DOCUMENT_UP:"_documentUp",DOCUMENT_MOVE:"_documentMove",DISPLAYED_IMAGE_CHANGED:"_displayedImageChanged",REORDER_THUMBNAIL:"_onReOrderThumbnail",CHANGE_THUMBNAIL_VIEW_PROP:"_changeThumbnailViewProp",UPDATE_INNER_THUMBNAIL_PAGE:"_updateInnerThumbnailPage",ERROR:"_updateErrorMessage",LOG:"_updateLogMessage",CLEAR_SLT_BOX:"_clearSltBox",DIRECTORY_CHANGED:"_DirectoryChanged",BIND_SLIDE_COMPONENT:"_bindSlideComponent",UNBIND_SLIDE_COMPONENT:"_unbindSlideComponent",BIND_CANVAS:"_bindCanvas",UNBIND_CANVAS:"_unbindCanvas",SET_CANVAS_SIZE:"_setCanvasSize",CANVAS_TOUCH_START:"_canvasTouchstart",CANVAS_TOUCH_MOVE:"_canvasTouchmove",CANVAS_TOUCH_END:"_canvasTouchend",CANVAS_MOUSE_DOWN:"_canvasMousedown",CANVAS_MOUSE_UP:"_canvasMouseup",CANVAS_MOUSE_MOVE:"_canvasMousemove",CANVAS_MOUSE_OVER:"_canvasMouseOver",CANVAS_MOUSE_OUT:"_canvasMouseOut",CANVAS_WHEEL:"_canvasWheel",CANVAS_SCROLL:"_canvasScroll",CANVAS_CLICK:"_canvasClick",CANVAS_DOUBLE_CLICK:"_canvasDoubleClick",CANVAS_RIGHT_CLICK:"_canvasRightClick",CANVAS_KEY_DOWN:"_canvasKeyDown",CANVAS_KEY_UP:"_canvasKeyUp",CANVAS_RESIZE:"_canvasResize",CANVAS_DRAG_START:"_canvasDragStart",CANVAS_DRAG_MOVE:"_canvasDragMove",CANVAS_DRAG_DONE:"_canvasDragDone",CANVAS_DEFAULT_CURSOR:"_canvasDefaultCursor",SHOW_CANVAS_LOADING:"_showCanvasLoading",DB_SAVE_OK:"_addDataToDBSuccess",DB_SAVE_FAILED:"_addDataToDBFailed",AFTER_RENDER:"_afterRender",CURRENT_CHANGED:"_currentChanged"},l={VIEWER_RESIZE:"_viewerResizeUI",VIEWER_CLICK:"_mouseClickUI",VIEWER_RIGHT_CLICK:"_viewerRightClickUI",VIEWER_MOVE:"_mouseMoveUI",SHOW_LATEST_PAGE:"_showLatestPage",UPDATE_PAGES_LAYOUT:"_updatePagesLayout",DOCUMENT_POINTER_MOVE:"_documentPointerMoveUI",DOCUMENT_POINTER_UP:"_documentPointerUpUI",DOCUMENT_KEY_DOWN:"_documentKeyDownUI",DOCUMENT_KEY_UP:"_documentKeyUpUI",DOCUMENT_CLICK:"_documentClickUI",SIDEBAR_CLICK:"_sideBarClickUI",SIDEBAR_STRETCH_START:"_sidebarStretchStartUI",FILE_LIST_CLICK:"_fileListClickUI",FILE_LIST_RIGHT_CLICK:"_fileListRightClickUI",FILE_KEY_UP:"_fileListKeyUpUI",ADD_NEW_FOLDER:"_addNewFolderUI",FILE_REFRESH:"_directoryRefreshUI",FILE_SELECTED:"_fileSelectedUI",TAG_LIST_CLICK:"_tagListClickUI",TAG_LIST_RIGHT_CLICK:"tagListRightClickUI",TAG_KEY_UP:"_tagKeyUpUI",ADD_NEW_TAG:"_addNewTagUI",TAG_REFRESH:"_tagRefreshUI",TAG_SELECTED:"_tagSelectedUI",OPEN_DEFAULT_TAG:"_openDefaultTagUI",IMAGE_SELECTED:"_imageSelectedUI",THUMBNAIL_CHANGED:"_thumbnailChangedUI",UPDATE_THB_ITEM:"_updateThbItem",UPDATE_THUMBNAIL_PROP:"_updateThumbnailPropUI",SCROLL_TO:"_scrollToUI",SET_VIEW_MODE:"_setViewModeUI",MERGE_DISPLAYED_UIDS:"_mergeDisplayedUidsUi",PAGER_BLUR:"_pagerBlurUI",PAGER_CHANGED:"_pagerChangedUI",SET_SCROLLER_SIZE:"_setScrollerSizeUI",CHANGE_CANVAS_CURSOR:"_changeCanvasCursorUI",TAB_CHANGED:"_tabChangedUI",TAB_LIST_CLICK:"_tabListClickUI",CLOSE_SAVE_SETTING_BOX:"_closeSaveSettingBoxUI",CUSTOM_BUTTON_CLICK:"_customButtonClickUI"},d={UPDATE_FOR_VIEWER:"_updateForViewer",LOAD_TO_VIEWER:"_loadToViewer",OPEN_TO_VIEWER:"_openToViewer",LOAD_PAGE:"_loadPage",LOAD_PAGE_OK:"_loadPageOk",SET_CURRENT_INDEX:"_setCurrentIndex",REMOVE_VIEWER_UID:"_removeViewerUid",GOTO_PAGE:"_gotoPage",CHANGE_PAGE:"_changePage",REORDER_PAGE:"_reorderPage",REMOVE_PAGE:"_removePage",OVERLAY_RECTANGLE:"_overlayRectangle",EDIT:"_editPage",UPDATE_THUMBNAIL_PAGE:"_updateThumbnailPage",REMOVE_FROM_TAG:"_removeFromTag",LOAD_TAG:"_loadToTag",OPEN_TAG:"_openTag",REMOVE_PAGE_TAG:"_removePageTag",ADD_PAGE_TAG:"_addPageTag",EMPTY_TAG:"_emptyTag",RENAME_TAG:"_renameTag",TAG_CHANGED:"_tagChanged",APPEND_SYNC:"_appendSync",UPDATE_SYNC:"_updateSync",REMOVE_FROM_FILE:"_removeFromFile",LOAD_FILE:"_loadToFile",APPEND_TO_OPEN_TAG:"_appendToOpenTag",APPEND_TO_OPEN_ALL:"_appendToOpenAll",REMOVE_FROM_ALL:"_removeFromAll",REMOVE_FILE:"_removeFile"},c={OK:{code:0,message:"ok."},PARAM_TYPE:{code:80001,message:"The parameter type is wrong."},PARAMETER_RANGE:{code:80002,message:"The parameter is out of range."},IMG_NOT_EXIST:{code:80003,message:"The image does not exist."},IMG_LOAD_FAILED:{code:80004,message:"The image load failed."},BACK_TO_TOP:{code:80005,message:"The current folder is root folder."},FILE_NOT_EXIST:{code:80006,message:"The file does not exist."},IMG_HAVE_EXIST:{code:80007,message:"The image has existed."},EMPTY_IN_ARRAY:{code:80008,message:"There is some empty element in array."},TAG_NOT_EXIST:{code:80009,message:"Tag does not exist."},TAG_HAVE_EXIST:{code:80010,message:"The tag already exists."},ELEMENT_NOT_EXIST:{code:80011,message:"Element does not exist."},PAGE_NOT_EXIST:{code:80012,message:"Page does not exist."},PARAMETER_INVALID:{code:80013,message:"The parameter is invalid."},URL_INVALID:{code:80014,message:"The url is invalid."},FOLDER_NOT_EXIST:{code:80015,message:"The folder does not exist."},COLOR_INVALID:{code:80016,message:"The color is invalid."},IMG_STORAGE_FAILED:{code:80017,message:"Failed to save image to database."},IMG_REMOVE_FAILED:{code:80018,message:"Failed to remove image from database by uid."},PATH_ERROR:{code:80019,message:"The path of file or folder does not exist."},BROWSER_NOT_SUPPORT:{code:80020,message:"Your browser does not support full screen."},SIZE_INVALID:{code:80021,message:"The size is invalid."},OPERATION_MODE_ERROR:{code:80022,message:"The operation mode is error."},BORDER_INVALID:{code:80023,message:"The border is invalid."},CAMERA_CLASS_REQUIRE:{code:80025,message:"The camera class is required."},VIEW_UI_REQUIRE:{code:80026,message:"The constructor of view ui is required."},WEBCAM_LICENSE_INVALID:{code:80027,message:"The license of webcam is invalid."},CAMERA_EXIST:{code:80028,message:"The video is shown."},CAMERA_CLASS_INVALID:{code:80029,message:"The camera class is invalid."},META_DATA_NOT_EXIST:{code:80030,message:"The metadata is not exist."},CAMERA_NOT_EXIST:{code:80031,message:"The video is not shown."},FILE_EXIST:{code:80032,message:"The file already exists."}}},function(e,r,t){function i(B){return Array.isArray?Array.isArray(B):"[object Array]"===Object.prototype.toString.call(B)}function n(B){if(Array.isArray(B)){for(var K=0;K<B.length;K++)for(var G=K+1;G<B.length;G++)B[K]===B[G]&&(B.splice(G,1),G--);return B}}function a(B){return"[object Object]"===Object.prototype.toString.call(B)}function s(B){return"function"==typeof B}function o(B){return"string"==typeof B}function l(B){var K=String(B);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(K)}function d(B){return"number"==typeof B&&!isNaN(B)}function c(B){return"[object Boolean]"===Object.prototype.toString.call(B)}function u(B){var K=document.createElement("span");return K.style.background=B,!!K.style.background}function h(B){var K=document.createElement("span");return K.style.border=B,!(!K.style.border&&""!==B)}function f(){return"ontouchstart"in document.documentElement}function g(){return void 0!==document.documentMode}function v(B){return B instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(B)}function p(B,K){if(o(K))B.style.cssText=K;else for(var G in K)B.style[G]=K[G]}function m(B,K,G,ee){if(B)return B.addEventListener(K,G,ee),function(){B.removeEventListener(K,G)}}function I(B,K){for(var G in B)void 0===K[G]?K[G]=B[G]:a(B[G])&&a(K[G])?I(B[G],K[G]):K[G]=B[G]}function y(B,K){for(var G in B){var ee=B[G],ie=K[G];void 0===ie?K[G]=B[G]:c(ee)&&a(ie)?ie.visibility=ee:a(ee)&&a(ie)?y(B[G],K[G]):K[G]=B[G]}}function _(B,K){var G=this,ee=0,ie=null;return function(){var be=+new Date;be-ee<K?(clearTimeout(ie),ie=setTimeout(function(){ee=be,B.apply(G)},K)):(ee=be,B.apply(G))}}function C(B){B&&B.stopPropagation?B.stopPropagation():B&&(B.cancelBubble=!0)}function A(B){B.preventDefault?B.preventDefault():B.returnValue=!1}function M(B){return""===B||void 0===B?null:document.getElementById(B)}function E(){var B=window.document;return B.fullscreenElement||B.msFullscreenElement||B.mozFullScreenElement||B.webkitFullscreenElement||!1}function R(B){return B.requestFullscreen?(B.requestFullscreen(),!0):B.mozRequestFullScreen?(B.mozRequestFullScreen(),!0):B.msRequestFullscreen?(B.msRequestFullscreen(),!0):B.oRequestFullscreen?(B.oRequestFullscreen(),!0):B.webkitRequestFullscreen?(B.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)}function x(){var B=window.document;return B.exitFullScreen?(B.exitFullScreen(),!0):B.mozCancelFullScreen?(B.mozCancelFullScreen(),!0):B.webkitExitFullscreen?(B.webkitExitFullscreen(),!0):B.msExitFullscreen?(B.msExitFullscreen(),!0):void 0}function P(B){for(var K=B.parentNode.children,G=0;G<K.length;G++)if(K[G]===B)return G}function F(B,K){for(var G=B.parentNode,ee=G.children,ie=0,be=0;be<ee.length;be++){var Te=ee[be];if(s(K)){if(!K(Te,G))continue;if(Te===B)return ie;ie++}else if(Te===B)return be}return-1}function k(B,K){var G=K.parentNode;G.lastChild==K?G.appendChild(B):w(B,K.nextSibling,G)}function w(B,K,G){void 0===K?G.appendChild(B):G.insertBefore(B,K)}function S(B){var K=Math.random().toString(35).substring(2);return K.length<11&&(K+=Math.random().toString(35).substring(2)),B=Math.max(Math.min(Math.round(B),11),8),K.substring(0,B)}function L(B){var K;if(i(B))K=[];else{if(!a(B))return B;K={}}for(var G in B){var ee=B[G];K[G]=i(B)||a(B)?L(ee):ee}return K}function U(B){var K=window.requestAnimationFrame||window.webkitRequestAnimationFrame,G=!!K;if(K&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(K.toString())&&(G=!1),G)return K(B);var he,ee={},ie=1,be=null,Te=+new Date;return he=ie++,ee[he]=B,null===be&&(be=setInterval(function(){var ae=+new Date,V=ee;for(var Q in ee={},V)Object.prototype.hasOwnProperty.call(V,Q)&&(V[Q](ae),Te=ae);ae-Te>2500&&(clearInterval(be),be=null)},1e3/60)),he}function Z(){var B=window;return B?B.devicePixelRatio?B.devicePixelRatio:B.screen.deviceXDPI&&B.screen.logicalXDPI?B.screen.deviceXDPI/B.screen.logicalXDPI:1:1}function ne(B){var K=new Date,G={"M+":K.getMonth()+1,"d+":K.getDate(),"h+":K.getHours(),"m+":K.getMinutes(),"s+":K.getSeconds(),"q+":Math.floor((K.getMonth()+3)/3),S:K.getMilliseconds()};for(var ee in/(y+)/.test(B)&&(B=B.replace(RegExp.$1,(K.getFullYear()+"").substr(4-RegExp.$1.length))),G)new RegExp("("+ee+")").test(B)&&(B=B.replace(RegExp.$1,1==RegExp.$1.length?G[ee]:("00"+G[ee]).substr((""+G[ee]).length)));return B}function oe(B,K,G,ee,ie){var be=B+G/2,Te=K+ee/2,Ge=ue(B,K,be,Te,ie),je=ue(B+G,K,be,Te,ie),he=ue(B+G,K+ee,be,Te,ie),ae=ue(B,K+ee,be,Te,ie),V=[je.x,Ge.x,ae.x,he.x].sort(function(me,H){return me-H}),Q=[je.y,Ge.y,ae.y,he.y].sort(function(me,H){return me-H});return{x:V[0],y:Q[0],width:V[3]-V[0],height:Q[3]-Q[0]}}function ue(B,K,G,ee,ie){return ie=ie/180*Math.PI,{x:(B-G)*Math.cos(ie)-(K-ee)*Math.sin(ie)+G,y:(B-G)*Math.sin(ie)+(K-ee)*Math.cos(ie)+ee}}t.d(r,"m",function(){return i}),t.d(r,"J",function(){return n}),t.d(r,"w",function(){return a}),t.d(r,"s",function(){return s}),t.d(r,"y",function(){return o}),t.d(r,"x",function(){return l}),t.d(r,"v",function(){return d}),t.d(r,"n",function(){return c}),t.d(r,"p",function(){return u}),t.d(r,"o",function(){return h}),t.d(r,"u",function(){return f}),t.d(r,"t",function(){return g}),t.d(r,"q",function(){return v}),t.d(r,"F",function(){return p}),t.d(r,"c",function(){return m}),t.d(r,"A",function(){return I}),t.d(r,"B",function(){return y}),t.d(r,"H",function(){return _}),t.d(r,"G",function(){return C}),t.d(r,"C",function(){return A}),t.d(r,"j",function(){return M}),t.d(r,"r",function(){return E}),t.d(r,"z",function(){return R}),t.d(r,"f",function(){return x}),t.d(r,"h",function(){return P}),t.d(r,"i",function(){return F}),t.d(r,"k",function(){return k}),t.d(r,"l",function(){return w}),t.d(r,"I",function(){return S}),t.d(r,"d",function(){return L}),t.d(r,"D",function(){return U}),t.d(r,"e",function(){return Z}),t.d(r,"g",function(){return ne}),t.d(r,"E",function(){return oe}),t.d(r,"b",function(){return X}),t.d(r,"a",function(){return pe});var X={log:function(B){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(B)}},pe={windowURL:window.URL||window.webkitURL,createURL:function(B){return o(B)?B:pe.createURLWithType(B).data},createURLWithType:function(B){if(o(B)||void 0===B)return{type:"string",data:B};if(B instanceof Blob)return{type:"object",data:pe.createObjectURL(B)};if(B.imageData&&B.imageData instanceof Blob)return{type:"object",data:pe.createObjectURL(B.imageData)};if(B.imageData){var K=Object.prototype.toString.call(B.imageData);if(/\[object \w+Array\]/.test(K))return{type:"object",data:pe.createObjectURL(new Blob([B.imageData]))}}else if(K=Object.prototype.toString.call(B),/\[object \w+Array\]/.test(K))return{type:"object",data:pe.createObjectURL(new Blob([B]))};return/data:image\/\w+;base64/.test(B)?{type:"string",data:B}:{type:"object",data:B}},createObjectURL:function(B){if(!B)return"";var K=pe.windowURL.createObjectURL(B);return X.log("createObjectURL:"+K),K},revokeObjectURL:function(B){o(B)&&(X.log("revokeObjectURL:"+B),pe.windowURL.revokeObjectURL(B))}}},function(e,r,t){t.d(r,"a",function(){return a}),t.d(r,"b",function(){return s});var i=t(1),n=function(){for(var o=0,l=0,d=arguments.length;l<d;l++)o+=arguments[l].length;var c=Array(o),u=0;for(l=0;l<d;l++)for(var h=arguments[l],f=0,g=h.length;f<g;f++,u++)c[u]=h[f];return c},a=function(){function o(l){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,l?this._oPub=l:(this._oPub=new s,this._bDisposePub=!0)}return o.prototype.getPublishSubscribe=function(){return this._oPub},o.prototype._on=function(l,d){var c=this._oPub.on(l,d);this.push(l,c)},o.prototype._emit=function(l){for(var d,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];null===(d=this._oPub)||void 0===d||d.emit.apply(d,n([l],c))},o.prototype._off=function(l,d){var c;null===(c=this._oPub)||void 0===c||c.off(l,d)},o.prototype.push=function(l,d){this._evtIds.push({name:l,id:d})},o.prototype.dispose=function(){if(this._oPub){for(var l=this._evtIds.length,d=0;d<l;d++){var c=this._evtIds[d];this._oPub.offById(c.name,c.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},o}(),s=function(){function o(){this._events={}}return o.prototype.on=function(l,d){this._events[l]||(this._events[l]=[]);var c=Object(i.I)(10);return this._events[l].push({fn:d,evtId:c}),c},o.prototype.emit=function(l){for(var d,c,u=[],h=1;h<arguments.length;h++)u[h-1]=arguments[h];var f=this._events[l];if(!f||0===f.length)return!1;for(var g=f.length,v=0;v<g;v++)null===(c=f[v])||void 0===c||(d=c.fn).call.apply(d,n([null],u))},o.prototype.emitEx=function(l){for(var d,c,u,h=[],f=1;f<arguments.length;f++)h[f-1]=arguments[f];var g=this._events[l];if(!g||0===g.length)return Promise.resolve(!0);var v=g.length,p=Promise.resolve(!0);if(1===g.length){var m=null===(c=g[0])||void 0===c?void 0:(d=c.fn).call.apply(d,n([null],h));return m instanceof Promise?m:p}for(var I=function(_){var C,A=null===(u=g[_])||void 0===u?void 0:(C=u.fn).call.apply(C,n([null],h));A instanceof Promise&&(p=p.then(function(){return A}))},y=0;y<v;y++)I(y);return p},o.prototype.off=function(l,d){var c=this._events[l];if(!c)return!1;if(d)for(var u=c.length,h=0;h<u;h++){var f=c[h];f&&f.fn===d&&c.splice(h,1),f=null}else c&&(c.length=0);c=null},o.prototype.offById=function(l,d){var c=this._events[l];if(!c)return!1;if(d)for(var u=c.length,h=0;h<u;h++){var f=c[h];if(f&&f.evtId===d){c.splice(h,1);break}f=null}else c&&(c.length=0);c=null},o.prototype.dispose=function(){for(var l=Object.keys(this._events),d=0,c=l.length;d<c;d++){var h=this._events[l[d]];h&&h.splice(0),h=null}this._events={}},o}()},function(e,r,t){var i=t(1),n=function(){function s(o){var l=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.uid=Object(i.I)(11),Object.keys(o).forEach(function(d){l[d]=o[d]}),this._initBox()}return s.prototype.getRect=function(){if("free"===this.mode)return null;var o=this._getMaxPoint(),l=o.minX,d=o.maxX,c=o.minY,u=o.maxY;return{x:Math.floor(l),y:Math.floor(c),width:Math.floor(d-l),height:Math.floor(u-c)}},s.prototype._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},s.prototype._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},s.prototype.checkPointPosition=function(o){var l=this._getMaxPoint(),d=l.minX,c=l.maxX,u=l.minY,h=l.maxY,f=this.probePoints[2*o],g=this.probePoints[2*o+1];return o<4?f===c&&g===h?"se":f===c&&g===u?"ne":f===d&&g===u?"nw":f===d&&g===h?"sw":null:f===c?"e":g===h?"s":f===d?"w":g===u?"n":null},s.prototype.onStartHandler=function(o,l,d){var c=this.isBoxSelected(o,l);if(void 0!==d&&(c=d),null!==c&&(this._startX=o,this._startY=l,this._lastX=o,this._lastY=l,-1===c?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=c,this.isMoveBox=!1),"free"===this.mode&&c>3)){var u=c-4;this.k1=this.slopeRatio[(u+1)%4],this.b1=this.probePoints[(2*u+3)%8]-this.k1*this.probePoints[(2*u+2)%8],this.k2=this.slopeRatio[(u+3)%4],this.b2=this.probePoints[(2*u+1)%8]-this.k2*this.probePoints[(2*u+0)%8]}},s.prototype.onMoveHandler=function(o,l,d){if(this.isPointSelected||this.isMoveBox){var c=this.probePoints.slice();if(this.isPointSelected){var u=this.activeProbePoint;void 0!==d&&(u=d),"normal"===this.mode?c=this._movePointNormal(c,u,o,l):(c=this._movePointFree(c,u,o,l),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)),this.probePoints=c.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var h=o-this._lastX,f=l-this._lastY;if(0===h&&0===f)return;c=this._moveBox(c,h,f),this.probePoints=c.slice()}var g=this._calcMidpoint(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(g),this.midpoints=g,this._lastX=o,this._lastY=l}},s.prototype.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var o=this._startX,l=this._startY;this._startX=0,this._startY=0;var d=this._lastX,c=this._lastY;if(this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var u=this._checkRectConvexity(this.probePoints);(o===d&&l===c||!u)&&(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)}},s.prototype._checkEdge=function(o,l){return o>=0&&o<=this.width&&l>=0&&l<this.height},s.prototype._movePointNormal=function(o,l,d,c){d=Math.max(0,Math.min(this.width,d)),c=Math.max(0,Math.min(this.height,c));var u=0,h=0;if(this.keepAspectRatio){var f=this._getMaxPoint(),g=f.minX,v=f.maxX,p=f.minY,m=f.maxY,I=this.checkPointPosition(l),y=(v-g)/(m-p);0===y||y===1/0||y===-1/0||isNaN(y)?y=this._lastWhr:this._lastWhr=y,u=0,h=0;var _="width";if(l<4){if(h=c-o[2*l+1],0==(u=d-o[2*l])||0===h)return o;_="width"}else{var C=l-4;if("e"===I?(l=(C+1)%4,_="width"):"s"===I?(l=C,_="height"):"w"===I?(l=C,_="width"):"n"===I&&(l=(C+1)%4,_="height"),h=c-o[2*C+1],0==(u=d-o[2*C])||0===h)return o}"height"===_?(u=h*y,"ne"!==I&&"sw"!==I&&"n"!==I&&"w"!==I||(u=-u)):(h=u/y,"ne"!==I&&"sw"!==I&&"n"!==I&&"w"!==I||(h=-h));var A=o[2*l]+u,M=o[2*l+1]+h;A<0?(u=0-o[2*l],h=0):A>this.width?(u=this.width-o[2*l],h=0):M<0?(h=0-o[2*l+1],u=0):M>this.height&&(h=this.height-o[2*l+1],u=0),o[2*l]+=u,o[2*l+1]+=h,E=(l+1)%4,R=(l+3)%4,l%2?(o[2*E]+=u,o[2*R+1]+=h):(o[2*E+1]+=h,o[2*R]+=u)}else if(l<4){if(h=c-o[2*l+1],0==(u=d-o[2*l])&&0===h)return o;o[2*l]=d,o[2*l+1]=c;var E=(l+1)%4,R=(l+3)%4;l%2?(o[2*E]=d,o[2*R+1]=c):(o[2*E+1]=c,o[2*R]=d)}else{var x=l-4,P=this.slopeRatio[x%4];0===P?(o[(2*x+3)%8]=c,o[(2*x+1)%8]=c):P!==1/0&&P!==-1/0||(o[(2*x+2)%8]=d,o[(2*x+0)%8]=d)}return o},s.prototype._movePointFree=function(o,l,d,c){d=Math.max(0,Math.min(this.width,d)),c=Math.max(0,Math.min(this.height,c));var u=o.slice();if(l<4){if(0==d-o[2*l]&&0==c-o[2*l+1])return o;o[2*l]=d,o[2*l+1]=c}else{var g=l-4,v=this.slopeRatio[g%4],p=c-v*d,m=-p/v,I=p,y=o[(2*g+9)%8]-v*o[(2*g+8)%8],_=-y/v,C=this,A=C.k1,M=C.b1,E=C.k2,R=C.b2;0===v?(o[(2*g+3)%8]=c,A!==1/0&&A!==-1/0&&(o[(2*g+2)%8]=(c-M)/A),o[(2*g+1)%8]=c,E!==1/0&&E!==-1/0&&(o[(2*g+0)%8]=(c-R)/E)):v===1/0||v===-1/0?(o[(2*g+2)%8]=d,o[(2*g+3)%8]=A*d+M,o[(2*g+0)%8]=d,o[(2*g+1)%8]=E*d+R):(0===A?o[(2*g+2)%8]+=m-_:A===1/0||A===-1/0?o[(2*g+3)%8]+=I-y:(o[(2*g+2)%8]=(M-p)/(v-A),o[(2*g+3)%8]=(v*M-A*p)/(v-A)),0===E?o[(2*g+0)%8]+=m-_:E===1/0||E===-1/0?o[(2*g+1)%8]+=I-y:(o[(2*g+0)%8]=(R-p)/(v-E),o[(2*g+1)%8]=(v*R-E*p)/(v-E)));for(var x=0;x<4;x++){var P=o[2*x],F=o[2*x+1];if(P<0||P>this.width||F<0||F>this.height)return u}}return o},s.prototype._moveBox=function(o,l,d){if("normal"===this.mode){var c=Math.min(o[0],o[2],o[4],o[6]),u=Math.max(o[0],o[2],o[4],o[6]),h=Math.min(o[1],o[3],o[5],o[7]),f=Math.max(o[1],o[3],o[5],o[7]);c+l<0&&(l=-c),u+l>this.width&&(l=this.width-u),h+d<0&&(d=-h),f+d>this.height&&(d=this.height-f);for(var g=0;g<4;g++)o[2*g]+=l,o[2*g+1]+=d}return o},s.prototype._isPointOnBox=function(o,l){if("normal"===this.mode){var d=this._getMaxPoint();return o>=d.minX&&o<=d.maxX&&l>=d.minY&&l<=d.maxY}return!1},s.prototype.isBoxSelected=function(o,l){var d=this._isPointOnBox(o,l),c=this.isCtrlPointSelected(o,l);return null!==c?c:d?-1:null},s.prototype.isCtrlPointSelected=function(o,l){var d=this.sensorRadius/this.zoom,c=this._getMaxPoint(),f=c.minY,g=c.maxY,v=Math.min(Math.max(d,.1*(c.maxX-c.minX)),3*d)*this.dpr,p=Math.min(Math.max(d,.1*(g-f)),3*d)*this.dpr,m=8;"free"===this.mode&&(m=8);for(var I=0;I<m;I++){var y=this.probePoints[2*I],_=this.probePoints[2*I+1];if(o<=y+v&&o>=y-v&&l<=_+p&&l>=_-p&&o>=0&&o<=this.width&&l>=0&&l<=this.height)return I}return null},s.prototype._checkRectConvexity=function(o){var l=(o[6]-o[0])*(o[3]-o[1])-(o[7]-o[1])*(o[2]-o[0]),d=(o[0]-o[2])*(o[5]-o[3])-(o[1]-o[3])*(o[4]-o[2]),c=(o[2]-o[4])*(o[7]-o[5])-(o[3]-o[5])*(o[6]-o[4]),u=(o[4]-o[6])*(o[1]-o[7])-(o[5]-o[7])*(o[0]-o[6]);if(l*d*c*u<0)return!1;var h=o.slice().concat(o.slice(0,2));if(this.slopeRatio.length)for(var f=0;f<2;f++)if(this.slopeRatio[f]!==this.slopeRatio[f+2]&&this._calcIntersection(h.slice(2*f,2*f+2),h.slice(2*f+2,2*f+4),h.slice(2*f+4,2*f+6),h.slice(2*f+6,2*f+8)))return!1;return l*d*c*u>0},s.prototype._calcMidpoint=function(o){for(var l=o.slice(0,8).concat(o[0],o[1]),d=[],c=0;c<4;c++)d.push((l[2*c]+l[2*c+2])/2,(l[2*c+1]+l[2*c+3])/2);return d},s.prototype._calcSlopeRatio=function(o){for(var l=[],c=o.slice(0,8).concat(o[0],o[1]),u=0;u<4;u++)l.push(c[2*u+3]-c[2*u+1]==0&&c[2*u+2]-c[2*u]==0?0:(c[2*u+3]-c[2*u+1])/(c[2*u+2]-c[2*u]));return l},s.prototype._calcIntersection=function(o,l,d,c){if(this._isRectCross(o,l,d,c)&&this._isLineSegmentCross(o,l,d,c)){var h=void 0,f=void 0;if(f=(o[1]-d[1])*(l[0]-o[0])*(c[0]-d[0])+d[0]*(c[1]-d[1])*(l[0]-o[0])-o[0]*(l[1]-o[1])*(c[0]-d[0]),0==(h=(c[0]-d[0])*(o[1]-l[1])-(l[0]-o[0])*(d[1]-c[1]))||0===f){var g=this._getLine(o,l),v=this._getLine(d,c),p=g[0],m=g[1],I=v[0],y=v[1];if(m[0]===I[0]&&m[1]===I[1])return m;if(p[0]===y[0]&&p[1]===y[1])return p;if(this._isOnLine(m,v)&&this._isOnLine(I,g))return[I,m];if(this._isOnLine(p,v)&&this._isOnLine(y,g))return[p,y];if(this._isOnLine(p,v)&&this._isOnLine(m,v))return[p,m];if(this._isOnLine(I,v)&&this._isOnLine(y,v))return[I,y]}return[f/h,(f=l[1]*(o[0]-l[0])*(c[1]-d[1])+(c[0]-l[0])*(c[1]-d[1])*(o[1]-l[1])-c[1]*(d[0]-c[0])*(l[1]-o[1]))/(h=(o[0]-l[0])*(c[1]-d[1])-(l[1]-o[1])*(d[0]-c[0]))]}return!1},s.prototype._getLine=function(o,l){return o[0]===l[0]?o[1]<l[1]?[o,l]:[l,o]:o[0]<l[0]?[o,l]:[l,o]},s.prototype._isOnLine=function(o,l){return l[0][0]===l[1][0]?o[1]>=l[0][1]&&o[1]<=l[1][1]:o[0]>=l[0][0]&&o[0]<=l[1][0]},s.prototype._isRectCross=function(o,l,d,c){var u=Math.min,h=Math.max;return u(o[0],l[0])<=h(d[0],c[0])&&u(d[0],c[0])<=h(o[0],l[0])&&u(o[1],l[1])<=h(d[1],c[1])&&u(d[1],c[1])<=h(o[1],l[1])},s.prototype._isLineSegmentCross=function(o,l,d,c){var u,h;return!(((u=o[0]*(d[1]-l[1])+l[0]*(o[1]-d[1])+d[0]*(l[1]-o[1]))^(h=o[0]*(c[1]-l[1])+l[0]*(o[1]-c[1])+c[0]*(l[1]-o[1])))>=0&&0!==u&&0!==h||((u=d[0]*(o[1]-c[1])+c[0]*(d[1]-o[1])+o[0]*(c[1]-d[1]))^(h=d[0]*(l[1]-c[1])+c[0]*(d[1]-l[1])+l[0]*(c[1]-d[1])))>=0&&0!==u&&0!==h)},s}();t.d(r,"a",function(){return a});var a=function(){function s(o,l){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.width=o,this.height=l}return s.prototype.setKeepAspectRatio=function(o){this.keepAspectRatio=o,this._drawingFlag||this.cropBoxes.forEach(function(l){l.keepAspectRatio=o})},s.prototype.setAspectRatio=function(o){this.aspectRatio=o},s.prototype.setZoom=function(o){this.zoom=o,this.cropBoxes.forEach(function(l){l.zoom=o})},s.prototype.setPageSize=function(o,l){this.width=o,this.height=l},s.prototype.getRectArr=function(){var o=[];return this.cropBoxes.forEach(function(l,d){var c=Object.assign({index:d},l.getRect());o.push(c)}),o},s.prototype.clear=function(){var o;this.cropBoxes.length>0&&(null===(o=this.unselectedCallback)||void 0===o||o.call(this)),this.cropBoxes=[]},s.prototype.addFreeBox=function(o){var l=Object(i.e)(),d=new n({vertexes:o.slice(),width:this.width,height:this.height,mode:"free",dpr:l});return this.cropBoxes.push(d),d},s.prototype.addBox=function(o,l){var d=Object(i.e)(),c=new n({vertexes:o.slice(),width:this.width,height:this.height,type:l,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:d});return this.cropBoxes.push(c),c},s.prototype.removeBox=function(o){return void 0===o&&this.clear(),!(o<0||o>=this.cropBoxes.length||(this.cropBoxes.splice(o,1),0))},s.prototype.getBoxByUid=function(o){for(var l=this.cropBoxes.length,d=0;d<l;d++)if(this.cropBoxes[d].uid===o)return this.cropBoxes[d];return null},s.prototype.onStartHandler=function(o,l,d){this._startX=o,this._startY=l,this.mouseDown=!0;var c=this.checkSelect(o,l);if(null===c)return d||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[c].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(o,l)},s.prototype.onMoveHandler=function(o,l,d){if(this.mouseDown){var c=null,u=o-this._startX,h=l-this._startY,f=null,g=2/this.zoom;!this._activeBoxId&&o-this._startX<-g&&l-this._startY<-g?(f=0,this.aspectRatio>0&&(h=u/this.aspectRatio)):!this._activeBoxId&&o-this._startX>g&&l-this._startY<-g?(f=1,this.aspectRatio>0&&(h=-u/this.aspectRatio)):!this._activeBoxId&&o-this._startX>g&&l-this._startY>g?(f=2,this.aspectRatio>0&&(h=u/this.aspectRatio)):!this._activeBoxId&&o-this._startX<-g&&l-this._startY>g&&(f=3,this.aspectRatio>0&&(h=-u/this.aspectRatio));var v=[o,this._startY+h,this._startX,this._startY+h,this._startX,this._startY,o,this._startY],p=[this._startX,this._startY,this._startX,this._startY+h,o,this._startY+h,o,this._startY];if(null!==f){for(var m=[],I=0;I<4;I++)f%2?(m.push(p[2*(f+I)%8]),m.push(p[(2*(f+I)+1)%8])):(m.push(v[2*(f+I)%8]),m.push(v[(2*(f+I)+1)%8]));return(c=this.addBox(m,["topLeft","topRight","bottomRight","bottomLeft"][f])).keepAspectRatio=this.aspectRatio>0,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=c.uid,c.onStartHandler(this._startX,this._startY,f),c.onMoveHandler(o,l,f),void(f=null)}this._activeBoxId&&(c=this.getBoxByUid(this._activeBoxId)),c&&c.onMoveHandler(o,l)}},s.prototype.onEndHandler=function(){var o;if(this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId)){var l=this.getBoxByUid(this._activeBoxId);null!==this._addNewFlag&&(l.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),l.onEndHandler(),this.cropBoxes.length>0&&(null===(o=this.selectedCallback)||void 0===o||o.call(this,this.getRectArr())),this._activeBoxId=null}},s.prototype.checkSelect=function(o,l){var d=this.cropBoxes.length;if(0===d)return null;for(var c=d-1;c>=0;c--)if(null!==this.cropBoxes[c].isBoxSelected(o,l))return c;return null},s.prototype.checkSelectForCursor=function(o,l){var d=this.cropBoxes.length;if(0===d)return null;for(var c=d-1;c>=0;c--){var u=this.cropBoxes[c],h=u.isBoxSelected(o,l);if(null!==h){var f="move";return-1!==h&&(f=u.checkPointPosition(h)),{part:h,type:u.type,position:f}}}return null},s.prototype.dispose=function(){this.unselectedCallback=null,this.selectedCallback=null},s}()},function(e,r){(function(t){if("object"==typeof r&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:void 0!==Bt&&(i=Bt),i.Promise=t()}})(function(){return function a(s,o,l){function d(h,f){if(!o[h]){if(!s[h]){var g="function"==typeof _dereq_&&_dereq_;if(!f&&g)return g(h,!0);if(c)return c(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var p=o[h]={exports:{}};s[h][0].call(p.exports,function(m){return d(s[h][1][m]||m)},p,p.exports,a,s,o,l)}return o[h].exports}for(var c="function"==typeof _dereq_&&_dereq_,u=0;u<l.length;u++)d(l[u]);return d}({1:[function(a,s,o){s.exports=function(l){var d=l._SomePromiseArray;function c(u){var h=new d(u),f=h.promise();return h.setHowMany(1),h.setUnwrap(),h.init(),f}l.any=function(u){return c(u)},l.prototype.any=function(){return c(this)}}},{}],2:[function(a,s,o){var l;try{throw new Error}catch(g){l=g}var d=a("./schedule"),c=a("./queue");function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1;var g=this;this.drainQueues=function(){g._drainQueues()},this._schedule=d}function h(g){for(;g.length()>0;)f(g)}function f(g){var v=g.shift();if("function"!=typeof v)v._settlePromises();else{var p=g.shift(),m=g.shift();v.call(p,m)}}u.prototype.setScheduler=function(g){var v=this._schedule;return this._schedule=g,this._customScheduler=!0,v},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(g,v){v?(process.stderr.write("Fatal "+(g instanceof Error?g.stack:g)+"\n"),process.exit(2)):this.throwLater(g)},u.prototype.throwLater=function(g,v){if(1===arguments.length&&(v=g,g=function(){throw v}),"undefined"!=typeof setTimeout)setTimeout(function(){g(v)},0);else try{this._schedule(function(){g(v)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.prototype.invokeLater=function(g,v,p){this._lateQueue.push(g,v,p),this._queueTick()},u.prototype.invoke=function(g,v,p){this._normalQueue.push(g,v,p),this._queueTick()},u.prototype.settlePromises=function(g){this._normalQueue._pushOne(g),this._queueTick()},u.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},s.exports=u,s.exports.firstLineError=l},{"./queue":26,"./schedule":29}],3:[function(a,s,o){s.exports=function(l,d,c,u){var h=!1,f=function(m,I){this._reject(I)},g=function(m,I){I.promiseRejectionQueued=!0,I.bindingPromise._then(f,f,null,this,m)},v=function(m,I){0==(50397184&this._bitField)&&this._resolveCallback(I.target)},p=function(m,I){I.promiseRejectionQueued||this._reject(m)};l.prototype.bind=function(m){h||(h=!0,l.prototype._propagateFrom=u.propagateFromFunction(),l.prototype._boundValue=u.boundValueFunction());var I=c(m),y=new l(d);y._propagateFrom(this,1);var _=this._target();if(y._setBoundTo(I),I instanceof l){var C={promiseRejectionQueued:!1,promise:y,target:_,bindingPromise:I};_._then(d,g,void 0,y,C),I._then(v,p,void 0,y,C),y._setOnCancel(I)}else y._resolveCallback(_);return y},l.prototype._setBoundTo=function(m){void 0!==m?(this._bitField=2097152|this._bitField,this._boundTo=m):this._bitField=-2097153&this._bitField},l.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},l.bind=function(m,I){return l.resolve(I).bind(m)}}},{}],4:[function(a,s,o){var l;"undefined"!=typeof Promise&&(l=Promise);var d=a("./promise")();d.noConflict=function(){try{Promise===d&&(Promise=l)}catch(c){}return d},s.exports=d},{"./promise":22}],5:[function(a,s,o){var l=Object.create;if(l){var d=l(null),c=l(null);d[" size"]=c[" size"]=0}s.exports=function(u){var f=a("./util"),g=f.canEvaluate;function p(y){return function(y,_){var C;if(null!=y&&(C=y[_]),"function"!=typeof C){var A="Object "+f.classString(y)+" has no method '"+f.toString(_)+"'";throw new u.TypeError(A)}return C}(y,this.pop()).apply(y,this)}function m(y){return y[this]}function I(y){var _=+this;return _<0&&(_=Math.max(0,_+y.length)),y[_]}u.prototype.call=function(y){var _=[].slice.call(arguments,1);return _.push(y),this._then(p,void 0,void 0,_,void 0)},u.prototype.get=function(y){var _;if("number"==typeof y)_=I;else if(g){var C=(void 0)(y);_=null!==C?C:m}else _=m;return this._then(_,void 0,void 0,y,void 0)}}},{"./util":36}],6:[function(a,s,o){s.exports=function(l,d,c,u){var h=a("./util"),f=h.tryCatch,g=h.errorObj,v=l._async;l.prototype.break=l.prototype.cancel=function(){if(!u.cancellation())return this._warn("cancellation is disabled");for(var p=this,m=p;p._isCancellable();){if(!p._cancelBy(m)){m._isFollowing()?m._followee().cancel():m._cancelBranched();break}var I=p._cancellationParent;if(null==I||!I._isCancellable()){p._isFollowing()?p._followee().cancel():p._cancelBranched();break}p._isFollowing()&&p._followee().cancel(),p._setWillBeCancelled(),m=p,p=I}},l.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},l.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},l.prototype._cancelBy=function(p){return p===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},l.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},l.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),v.invoke(this._cancelPromises,this,void 0))},l.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},l.prototype._unsetOnCancel=function(){this._onCancelField=void 0},l.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},l.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},l.prototype._doInvokeOnCancel=function(p,m){if(h.isArray(p))for(var I=0;I<p.length;++I)this._doInvokeOnCancel(p[I],m);else if(void 0!==p)if("function"==typeof p){if(!m){var y=f(p).call(this._boundValue());y===g&&(this._attachExtraTrace(y.e),v.throwLater(y.e))}}else p._resultCancelled(this)},l.prototype._invokeOnCancel=function(){var p=this._onCancel();this._unsetOnCancel(),v.invoke(this._doInvokeOnCancel,this,p)},l.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},l.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,s,o){s.exports=function(l){var d=a("./util"),c=a("./es5").keys,u=d.tryCatch,h=d.errorObj;return function(f,g,v){return function(p){var m=v._boundValue();e:for(var I=0;I<f.length;++I){var y=f[I];if(y===Error||null!=y&&y.prototype instanceof Error){if(p instanceof y)return u(g).call(m,p)}else if("function"==typeof y){var _=u(y).call(m,p);if(_===h)return _;if(_)return u(g).call(m,p)}else if(d.isObject(p)){for(var C=c(y),A=0;A<C.length;++A){var M=C[A];if(y[M]!=p[M])continue e}return u(g).call(m,p)}}return l}}}},{"./es5":13,"./util":36}],8:[function(a,s,o){s.exports=function(l){var d=!1,c=[];function u(){this._trace=new u.CapturedTrace(h())}function h(){var f=c.length-1;return f>=0?c[f]:void 0}return l.prototype._promiseCreated=function(){},l.prototype._pushContext=function(){},l.prototype._popContext=function(){return null},l._peekContext=l.prototype._peekContext=function(){},u.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,c.push(this._trace))},u.prototype._popContext=function(){if(void 0!==this._trace){var f=c.pop(),g=f._promiseCreated;return f._promiseCreated=null,g}return null},u.CapturedTrace=null,u.create=function(){if(d)return new u},u.deactivateLongStackTraces=function(){},u.activateLongStackTraces=function(){var f=l.prototype._pushContext,g=l.prototype._popContext,v=l._peekContext,p=l.prototype._peekContext,m=l.prototype._promiseCreated;u.deactivateLongStackTraces=function(){l.prototype._pushContext=f,l.prototype._popContext=g,l._peekContext=v,l.prototype._peekContext=p,l.prototype._promiseCreated=m,d=!1},d=!0,l.prototype._pushContext=u.prototype._pushContext,l.prototype._popContext=u.prototype._popContext,l._peekContext=l.prototype._peekContext=h,l.prototype._promiseCreated=function(){var I=this._peekContext();I&&null==I._promiseCreated&&(I._promiseCreated=this)}},u}},{}],9:[function(a,s,o){s.exports=function(l,d,c,u){var h,f,g,v,p=l._async,m=a("./errors").Warning,I=a("./util"),y=a("./es5"),_=I.canAttachTrace,C=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,A=/\((?:timers\.js):\d+:\d+\)/,M=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,E=null,R=null,x=!1,P=0!=I.env("BLUEBIRD_DEBUG"),F=!(0==I.env("BLUEBIRD_WARNINGS")||!P&&!I.env("BLUEBIRD_WARNINGS")),k=!(0==I.env("BLUEBIRD_LONG_STACK_TRACES")||!P&&!I.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=I.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(F||!!I.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){var ye=[];function Fe(){for(var ke=0;ke<ye.length;++ke)ye[ke]._notifyUnhandledRejection();Ve()}function Ve(){ye.length=0}v=function(ke){ye.push(ke),setTimeout(Fe,1)},y.defineProperty(l,"_unhandledRejectionCheck",{value:Fe}),y.defineProperty(l,"_unhandledRejectionClear",{value:Ve})})(),l.prototype.suppressUnhandledRejections=function(){var ye=this._target();ye._bitField=-1048577&ye._bitField|524288},l.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),v(this))},l.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",h,void 0,this)},l.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},l.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},l.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var ye=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",f,ye,this)}},l.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},l.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},l.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},l.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},l.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},l.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},l.prototype._warn=function(ye,Fe,Ve){return ae(ye,Fe,Ve||this)},l.onPossiblyUnhandledRejection=function(ye){var Fe=l._getContext();f=I.contextBind(Fe,ye)},l.onUnhandledRejectionHandled=function(ye){var Fe=l._getContext();h=I.contextBind(Fe,ye)};var S=function(){};l.longStackTraces=function(){if(p.haveItemsQueued()&&!Se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Se.longStackTraces&&q()){var ye=l.prototype._captureStackTrace,Fe=l.prototype._attachExtraTrace,Ve=l.prototype._dereferenceTrace;Se.longStackTraces=!0,S=function(){if(p.haveItemsQueued()&&!Se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");l.prototype._captureStackTrace=ye,l.prototype._attachExtraTrace=Fe,l.prototype._dereferenceTrace=Ve,d.deactivateLongStackTraces(),Se.longStackTraces=!1},l.prototype._captureStackTrace=Ge,l.prototype._attachExtraTrace=je,l.prototype._dereferenceTrace=he,d.activateLongStackTraces()}},l.hasLongStackTraces=function(){return Se.longStackTraces&&q()};var L={unhandledrejection:{before:function(){var ye=I.global.onunhandledrejection;return I.global.onunhandledrejection=null,ye},after:function(ye){I.global.onunhandledrejection=ye}},rejectionhandled:{before:function(){var ye=I.global.onrejectionhandled;return I.global.onrejectionhandled=null,ye},after:function(ye){I.global.onrejectionhandled=ye}}},U=function(){var ye=function(Ve,ke){if(!Ve)return!I.global.dispatchEvent(ke);var $e;try{return $e=Ve.before(),!I.global.dispatchEvent(ke)}finally{Ve.after($e)}};try{if("function"==typeof CustomEvent){var Fe=new CustomEvent("CustomEvent");return I.global.dispatchEvent(Fe),function(Ve,ke){Ve=Ve.toLowerCase();var $e=new CustomEvent(Ve,{detail:ke,cancelable:!0});return y.defineProperty($e,"promise",{value:ke.promise}),y.defineProperty($e,"reason",{value:ke.reason}),ye(L[Ve],$e)}}return"function"==typeof Event?(Fe=new Event("CustomEvent"),I.global.dispatchEvent(Fe),function(Ve,ke){Ve=Ve.toLowerCase();var $e=new Event(Ve,{cancelable:!0});return $e.detail=ke,y.defineProperty($e,"promise",{value:ke.promise}),y.defineProperty($e,"reason",{value:ke.reason}),ye(L[Ve],$e)}):((Fe=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),I.global.dispatchEvent(Fe),function(Ve,ke){Ve=Ve.toLowerCase();var $e=document.createEvent("CustomEvent");return $e.initCustomEvent(Ve,!1,!0,ke),ye(L[Ve],$e)})}catch(Ve){}return function(){return!1}}(),Z=I.isNode?function(){return process.emit.apply(process,arguments)}:I.global?function(ye){var Fe="on"+ye.toLowerCase(),Ve=I.global[Fe];return!!Ve&&(Ve.apply(I.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function ne(ye,Fe){return{promise:Fe}}var oe={promiseCreated:ne,promiseFulfilled:ne,promiseRejected:ne,promiseResolved:ne,promiseCancelled:ne,promiseChained:function(ye,Fe,Ve){return{promise:Fe,child:Ve}},warning:function(ye,Fe){return{warning:Fe}},unhandledRejection:function(ye,Fe,Ve){return{reason:Fe,promise:Ve}},rejectionHandled:ne},ue=function(ye){var Fe=!1;try{Fe=Z.apply(null,arguments)}catch(ke){p.throwLater(ke),Fe=!0}var Ve=!1;try{Ve=U(ye,oe[ye].apply(null,arguments))}catch(ke){p.throwLater(ke),Ve=!0}return Ve||Fe};function X(){return!1}function pe(ye,Fe,Ve){var ke=this;try{ye(Fe,Ve,function($e){if("function"!=typeof $e)throw new TypeError("onCancel must be a function, got: "+I.toString($e));ke._attachCancellationCallback($e)})}catch($e){return $e}}function B(ye){if(!this._isCancellable())return this;var Fe=this._onCancel();void 0!==Fe?I.isArray(Fe)?Fe.push(ye):this._setOnCancel([Fe,ye]):this._setOnCancel(ye)}function K(){return this._onCancelField}function G(ye){this._onCancelField=ye}function ee(){this._cancellationParent=void 0,this._onCancelField=void 0}function ie(ye,Fe){if(0!=(1&Fe)){this._cancellationParent=ye;var Ve=ye._branchesRemainingToCancel;void 0===Ve&&(Ve=0),ye._branchesRemainingToCancel=Ve+1}0!=(2&Fe)&&ye._isBound()&&this._setBoundTo(ye._boundTo)}l.config=function(ye){if("longStackTraces"in(ye=Object(ye))&&(ye.longStackTraces?l.longStackTraces():!ye.longStackTraces&&l.hasLongStackTraces()&&S()),"warnings"in ye){var Fe=ye.warnings;Se.warnings=!!Fe,w=Se.warnings,I.isObject(Fe)&&"wForgottenReturn"in Fe&&(w=!!Fe.wForgottenReturn)}if("cancellation"in ye&&ye.cancellation&&!Se.cancellation){if(p.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");l.prototype._clearCancellationData=ee,l.prototype._propagateFrom=ie,l.prototype._onCancel=K,l.prototype._setOnCancel=G,l.prototype._attachCancellationCallback=B,l.prototype._execute=pe,be=ie,Se.cancellation=!0}if("monitoring"in ye&&(ye.monitoring&&!Se.monitoring?(Se.monitoring=!0,l.prototype._fireEvent=ue):!ye.monitoring&&Se.monitoring&&(Se.monitoring=!1,l.prototype._fireEvent=X)),"asyncHooks"in ye&&I.nodeSupportsAsyncResource){var ke=!!ye.asyncHooks;Se.asyncHooks!==ke&&(Se.asyncHooks=ke,ke?c():u())}return l},l.prototype._fireEvent=X,l.prototype._execute=function(ye,Fe,Ve){try{ye(Fe,Ve)}catch(ke){return ke}},l.prototype._onCancel=function(){},l.prototype._setOnCancel=function(ye){},l.prototype._attachCancellationCallback=function(ye){},l.prototype._captureStackTrace=function(){},l.prototype._attachExtraTrace=function(){},l.prototype._dereferenceTrace=function(){},l.prototype._clearCancellationData=function(){},l.prototype._propagateFrom=function(ye,Fe){};var be=function(ye,Fe){0!=(2&Fe)&&ye._isBound()&&this._setBoundTo(ye._boundTo)};function Te(){var ye=this._boundTo;return void 0!==ye&&ye instanceof l?ye.isFulfilled()?ye.value():void 0:ye}function Ge(){this._trace=new we(this._peekContext())}function je(ye,Fe){if(_(ye)){var Ve=this._trace;if(void 0!==Ve&&Fe&&(Ve=Ve._parent),void 0!==Ve)Ve.attachExtraTrace(ye);else if(!ye.__stackCleaned__){var ke=Q(ye);I.notEnumerableProp(ye,"stack",ke.message+"\n"+ke.stack.join("\n")),I.notEnumerableProp(ye,"__stackCleaned__",!0)}}}function he(){this._trace=void 0}function ae(ye,Fe,Ve){if(Se.warnings){var ke,$e=new m(ye);if(Fe)Ve._attachExtraTrace($e);else if(Se.longStackTraces&&(ke=l._peekContext()))ke.attachExtraTrace($e);else{var Le=Q($e);$e.stack=Le.message+"\n"+Le.stack.join("\n")}ue("warning",$e)||me($e,"",!0)}}function V(ye){for(var Fe=[],Ve=0;Ve<ye.length;++Ve){var ke=ye[Ve],$e="    (No stack trace)"===ke||E.test(ke),Le=$e&&re(ke);$e&&!Le&&(x&&" "!==ke.charAt(0)&&(ke="    "+ke),Fe.push(ke))}return Fe}function Q(ye){var Fe=ye.stack,Ve=ye.toString();return Fe="string"==typeof Fe&&Fe.length>0?function(ke){for(var $e=ke.stack.replace(/\s+$/g,"").split("\n"),Le=0;Le<$e.length;++Le){var fe=$e[Le];if("    (No stack trace)"===fe||E.test(fe))break}return Le>0&&"SyntaxError"!=ke.name&&($e=$e.slice(Le)),$e}(ye):["    (No stack trace)"],{message:Ve,stack:"SyntaxError"==ye.name?Fe:V(Fe)}}function me(ye,Fe,Ve){var ke;"undefined"!=typeof console&&(ke=I.isObject(ye)?Fe+R(ye.stack,ye):Fe+String(ye),"function"==typeof g&&g(ke,Ve))}function H(ye,Fe,Ve,ke){var $e=!1;try{"function"==typeof Fe&&($e=!0,"rejectionHandled"===ye?Fe(ke):Fe(Ve,ke))}catch(Le){p.throwLater(Le)}"unhandledRejection"===ye?ue(ye,Ve,ke)||$e||me(Ve,"Unhandled rejection "):ue(ye,ke)}function j(ye){var Fe,Ve;if("function"==typeof ye)Fe="[function "+(ye.name||"anonymous")+"]";else{if(Fe=ye&&"function"==typeof ye.toString?ye.toString():I.toString(ye),/\[object [a-zA-Z0-9$_]+\]/.test(Fe))try{Fe=JSON.stringify(ye)}catch(Ve){}0===Fe.length&&(Fe="(empty array)")}return"(<"+((Ve=Fe).length<41?Ve:Ve.substr(0,38)+"...")+">, no stack trace)"}function q(){return"function"==typeof Ae}var re=function(){return!1},de=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function le(ye){var Fe=ye.match(de);if(Fe)return{fileName:Fe[1],line:parseInt(Fe[2],10)}}function we(ye){this._parent=ye,this._promisesCreated=0;var Fe=this._length=1+(void 0===ye?0:ye._length);Ae(this,we),Fe>32&&this.uncycle()}I.inherits(we,Error),d.CapturedTrace=we,we.prototype.uncycle=function(){var ye=this._length;if(!(ye<2)){for(var Fe=[],Ve={},ke=0,$e=this;void 0!==$e;++ke)Fe.push($e),$e=$e._parent;for(ke=(ye=this._length=ke)-1;ke>=0;--ke){var Le=Fe[ke].stack;void 0===Ve[Le]&&(Ve[Le]=ke)}for(ke=0;ke<ye;++ke){var fe=Ve[Fe[ke].stack];if(void 0!==fe&&fe!==ke){fe>0&&(Fe[fe-1]._parent=void 0,Fe[fe-1]._length=1),Fe[ke]._parent=void 0,Fe[ke]._length=1;var De=ke>0?Fe[ke-1]:this;fe<ye-1?(De._parent=Fe[fe+1],De._parent.uncycle(),De._length=De._parent._length+1):(De._parent=void 0,De._length=1);for(var Oe=De._length+1,Ne=ke-2;Ne>=0;--Ne)Fe[Ne]._length=Oe,Oe++;return}}}},we.prototype.attachExtraTrace=function(ye){if(!ye.__stackCleaned__){this.uncycle();for(var Fe=Q(ye),Ve=Fe.message,ke=[Fe.stack],$e=this;void 0!==$e;)ke.push(V($e.stack.split("\n"))),$e=$e._parent;(function(Le){for(var fe=Le[0],De=1;De<Le.length;++De){for(var Oe=Le[De],Ne=fe.length-1,Pe=fe[Ne],ze=-1,ge=Oe.length-1;ge>=0;--ge)if(Oe[ge]===Pe){ze=ge;break}for(ge=ze;ge>=0&&fe[Ne]===Oe[ge];--ge)fe.pop(),Ne--;fe=Oe}})(ke),function(Le){for(var fe=0;fe<Le.length;++fe)(0===Le[fe].length||fe+1<Le.length&&Le[fe][0]===Le[fe+1][0])&&(Le.splice(fe,1),fe--)}(ke),I.notEnumerableProp(ye,"stack",function(Le,fe){for(var De=0;De<fe.length-1;++De)fe[De].push("From previous event:"),fe[De]=fe[De].join("\n");return De<fe.length&&(fe[De]=fe[De].join("\n")),Le+"\n"+fe.join("\n")}(Ve,ke)),I.notEnumerableProp(ye,"__stackCleaned__",!0)}};var Ae=function(){var ye=/^\s*at\s*/,Fe=function(Le,fe){return"string"==typeof Le?Le:void 0!==fe.name&&void 0!==fe.message?fe.toString():j(fe)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,E=ye,R=Fe;var Ve=Error.captureStackTrace;return re=function(Le){return C.test(Le)},function(Le,fe){Error.stackTraceLimit+=6,Ve(Le,fe),Error.stackTraceLimit-=6}}var ke,$e=new Error;if("string"==typeof $e.stack&&$e.stack.split("\n")[0].indexOf("stackDetection@")>=0)return E=/@/,R=Fe,x=!0,function(Le){Le.stack=(new Error).stack};try{throw new Error}catch(Le){ke="stack"in Le}return!("stack"in $e)&&ke&&"number"==typeof Error.stackTraceLimit?(E=ye,R=Fe,function(Le){Error.stackTraceLimit+=6;try{throw new Error}catch(fe){Le.stack=fe.stack}Error.stackTraceLimit-=6}):(R=function(Le,fe){return"string"==typeof Le?Le:"object"!=typeof fe&&"function"!=typeof fe||void 0===fe.name||void 0===fe.message?j(fe):fe.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(g=function(ye){},I.isNode&&process.stderr.isTTY?g=function(ye,Fe){}:I.isNode||"string"!=typeof(new Error).stack||(g=function(ye,Fe){}));var Se={warnings:F,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return k&&l.longStackTraces(),{asyncHooks:function(){return Se.asyncHooks},longStackTraces:function(){return Se.longStackTraces},warnings:function(){return Se.warnings},cancellation:function(){return Se.cancellation},monitoring:function(){return Se.monitoring},propagateFromFunction:function(){return be},boundValueFunction:function(){return Te},checkForgottenReturns:function(ye,Fe,Ve,ke,$e){if(void 0===ye&&null!==Fe&&w){if(void 0!==$e&&$e._returnedNonUndefined()||0==(65535&ke._bitField))return;Ve&&(Ve+=" ");var Le="",fe="";if(Fe._trace){for(var De=Fe._trace.stack.split("\n"),Oe=V(De),Ne=Oe.length-1;Ne>=0;--Ne){var Pe=Oe[Ne];if(!A.test(Pe)){var ze=Pe.match(M);ze&&(Le="at "+ze[1]+":"+ze[2]+":"+ze[3]+" ");break}}if(Oe.length>0){var ge=Oe[0];for(Ne=0;Ne<De.length;++Ne)if(De[Ne]===ge){Ne>0&&(fe="\n"+De[Ne-1]);break}}}ke._warn("a promise was created in a "+Ve+"handler "+Le+"but was not returned from it, see http://goo.gl/rRqMUw"+fe,!0,Fe)}},setBounds:function(ye,Fe){if(q()){for(var Ve,ke,$e=(ye.stack||"").split("\n"),Le=(Fe.stack||"").split("\n"),fe=-1,De=-1,Oe=0;Oe<$e.length;++Oe)if(Ne=le($e[Oe])){Ve=Ne.fileName,fe=Ne.line;break}for(Oe=0;Oe<Le.length;++Oe){var Ne;if(Ne=le(Le[Oe])){ke=Ne.fileName,De=Ne.line;break}}fe<0||De<0||!Ve||!ke||Ve!==ke||fe>=De||(re=function(Pe){if(C.test(Pe))return!0;var ze=le(Pe);return!!(ze&&ze.fileName===Ve&&fe<=ze.line&&ze.line<=De)})}},warn:ae,deprecated:function(ye,Fe){var Ve=ye+" is deprecated and will be removed in a future version.";return Fe&&(Ve+=" Use "+Fe+" instead."),ae(Ve)},CapturedTrace:we,fireDomEvent:U,fireGlobalEvent:Z}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(a,s,o){s.exports=function(l){function d(){return this.value}function c(){throw this.reason}l.prototype.return=l.prototype.thenReturn=function(u){return u instanceof l&&u.suppressUnhandledRejections(),this._then(d,void 0,void 0,{value:u},void 0)},l.prototype.throw=l.prototype.thenThrow=function(u){return this._then(c,void 0,void 0,{reason:u},void 0)},l.prototype.catchThrow=function(u){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:u},void 0);var h=arguments[1],f=function(){throw h};return this.caught(u,f)},l.prototype.catchReturn=function(u){if(arguments.length<=1)return u instanceof l&&u.suppressUnhandledRejections(),this._then(void 0,d,void 0,{value:u},void 0);var h=arguments[1];h instanceof l&&h.suppressUnhandledRejections();var f=function(){return h};return this.caught(u,f)}}},{}],11:[function(a,s,o){s.exports=function(l,d){var c=l.reduce,u=l.all;function h(){return u(this)}l.prototype.each=function(f){return c(this,f,d,0)._then(h,void 0,void 0,this,void 0)},l.prototype.mapSeries=function(f){return c(this,f,d,d)},l.each=function(f,g){return c(f,g,d,0)._then(h,void 0,void 0,f,void 0)},l.mapSeries=function(f,g){return c(f,g,d,d)}}},{}],12:[function(a,s,o){var l,d,c=a("./es5"),u=c.freeze,h=a("./util"),f=h.inherits,g=h.notEnumerableProp;function v(R,x){function P(F){if(!(this instanceof P))return new P(F);g(this,"message","string"==typeof F?F:x),g(this,"name",R),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return f(P,Error),P}var p=v("Warning","warning"),m=v("CancellationError","cancellation error"),I=v("TimeoutError","timeout error"),y=v("AggregateError","aggregate error");try{l=TypeError,d=RangeError}catch(R){l=v("TypeError","type error"),d=v("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),C=0;C<_.length;++C)"function"==typeof Array.prototype[_[C]]&&(y.prototype[_[C]]=Array.prototype[_[C]]);c.defineProperty(y.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),y.prototype.isOperational=!0;var A=0;function M(R){if(!(this instanceof M))return new M(R);g(this,"name","OperationalError"),g(this,"message",R),this.cause=R,this.isOperational=!0,R instanceof Error?(g(this,"message",R.message),g(this,"stack",R.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}y.prototype.toString=function(){var R=Array(4*A+1).join(" "),x="\n"+R+"AggregateError of:\n";A++,R=Array(4*A+1).join(" ");for(var P=0;P<this.length;++P){for(var F=this[P]===this?"[Circular AggregateError]":this[P]+"",k=F.split("\n"),w=0;w<k.length;++w)k[w]=R+k[w];x+=(F=k.join("\n"))+"\n"}return A--,x},f(M,Error);var E=Error.__BluebirdErrorTypes__;E||(E=u({CancellationError:m,TimeoutError:I,OperationalError:M,RejectionError:M,AggregateError:y}),c.defineProperty(Error,"__BluebirdErrorTypes__",{value:E,writable:!1,enumerable:!1,configurable:!1})),s.exports={Error,TypeError:l,RangeError:d,CancellationError:E.CancellationError,OperationalError:E.OperationalError,TimeoutError:E.TimeoutError,AggregateError:E.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(a,s,o){var l=function(){return void 0===this}();if(l)s.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:l,propertyIsWritable:function(f,g){var v=Object.getOwnPropertyDescriptor(f,g);return!(v&&!v.writable&&!v.set)}};else{var d={}.hasOwnProperty,c={}.toString,u={}.constructor.prototype,h=function(f){var g=[];for(var v in f)d.call(f,v)&&g.push(v);return g};s.exports={isArray:function(f){try{return"[object Array]"===c.call(f)}catch(g){return!1}},keys:h,names:h,defineProperty:function(f,g,v){return f[g]=v.value,f},getDescriptor:function(f,g){return{value:f[g]}},freeze:function(f){return f},getPrototypeOf:function(f){try{return Object(f).constructor.prototype}catch(g){return u}},isES5:l,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,s,o){s.exports=function(l,d){var c=l.map;l.prototype.filter=function(u,h){return c(this,u,h,d)},l.filter=function(u,h,f){return c(u,h,f,d)}}},{}],15:[function(a,s,o){s.exports=function(l,d,c){var u=a("./util"),h=l.CancellationError,f=u.errorObj,g=a("./catch_filter")(c);function v(C,A,M){this.promise=C,this.type=A,this.handler=M,this.called=!1,this.cancelPromise=null}function p(C){this.finallyHandler=C}function m(C,A){return null!=C.cancelPromise&&(arguments.length>1?C.cancelPromise._reject(A):C.cancelPromise._cancel(),C.cancelPromise=null,!0)}function I(){return _.call(this,this.promise._target()._settledValue())}function y(C){if(!m(this,C))return f.e=C,f}function _(C){var A=this.promise,M=this.handler;if(!this.called){this.called=!0;var E=this.isFinallyHandler()?M.call(A._boundValue()):M.call(A._boundValue(),C);if(E===c)return E;if(void 0!==E){A._setReturnedNonUndefined();var R=d(E,A);if(R instanceof l){if(null!=this.cancelPromise){if(R._isCancelled()){var x=new h("late cancellation observer");return A._attachExtraTrace(x),f.e=x,f}R.isPending()&&R._attachCancellationCallback(new p(this))}return R._then(I,y,void 0,this,void 0)}}}return A.isRejected()?(m(this),f.e=C,f):(m(this),C)}return v.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){m(this.finallyHandler)},l.prototype._passThrough=function(C,A,M,E){return"function"!=typeof C?this.then():this._then(M,E,void 0,new v(this,A,C),void 0)},l.prototype.lastly=l.prototype.finally=function(C){return this._passThrough(C,0,_,_)},l.prototype.tap=function(C){return this._passThrough(C,1,_)},l.prototype.tapCatch=function(C){var A=arguments.length;if(1===A)return this._passThrough(C,1,void 0,_);var M,E=new Array(A-1),R=0;for(M=0;M<A-1;++M){var x=arguments[M];if(!u.isObject(x))return l.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(x)));E[R++]=x}E.length=R;var P=arguments[M];return this._passThrough(g(E,P,this),1,void 0,_)},v}},{"./catch_filter":7,"./util":36}],16:[function(a,s,o){s.exports=function(l,d,c,u,h,f){var g=a("./errors").TypeError,v=a("./util"),p=v.errorObj,m=v.tryCatch,I=[];function y(_,C,A,M){if(f.cancellation()){var E=new l(c),R=this._finallyPromise=new l(c);this._promise=E.lastly(function(){return R}),E._captureStackTrace(),E._setOnCancel(this)}else(this._promise=new l(c))._captureStackTrace();this._stack=M,this._generatorFunction=_,this._receiver=C,this._generator=void 0,this._yieldHandlers="function"==typeof A?[A].concat(I):I,this._yieldedPromise=null,this._cancellationPhase=!1}v.inherits(y,h),y.prototype._isResolved=function(){return null===this._promise},y.prototype._cleanup=function(){this._promise=this._generator=null,f.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},y.prototype._promiseCancelled=function(){if(!this._isResolved()){var _;if(void 0!==this._generator.return)this._promise._pushContext(),_=m(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var C=new l.CancellationError("generator .return() sentinel");l.coroutine.returnSentinel=C,this._promise._attachExtraTrace(C),this._promise._pushContext(),_=m(this._generator.throw).call(this._generator,C),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(_)}},y.prototype._promiseFulfilled=function(_){this._yieldedPromise=null,this._promise._pushContext();var C=m(this._generator.next).call(this._generator,_);this._promise._popContext(),this._continue(C)},y.prototype._promiseRejected=function(_){this._yieldedPromise=null,this._promise._attachExtraTrace(_),this._promise._pushContext();var C=m(this._generator.throw).call(this._generator,_);this._promise._popContext(),this._continue(C)},y.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof l){var _=this._yieldedPromise;this._yieldedPromise=null,_.cancel()}},y.prototype.promise=function(){return this._promise},y.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},y.prototype._continue=function(_){var C=this._promise;if(_===p)return this._cleanup(),this._cancellationPhase?C.cancel():C._rejectCallback(_.e,!1);var A=_.value;if(!0===_.done)return this._cleanup(),this._cancellationPhase?C.cancel():C._resolveCallback(A);var M=u(A,this._promise);if(M instanceof l||null!==(M=function(R,x,P){for(var F=0;F<x.length;++F){P._pushContext();var k=m(x[F])(R);if(P._popContext(),k===p){P._pushContext();var w=l.reject(p.e);return P._popContext(),w}var S=u(k,P);if(S instanceof l)return S}return null}(M,this._yieldHandlers,this._promise))){var E=(M=M._target())._bitField;0==(50397184&E)?(this._yieldedPromise=M,M._proxy(this,null)):0!=(33554432&E)?l._async.invoke(this._promiseFulfilled,this,M._value()):0!=(16777216&E)?l._async.invoke(this._promiseRejected,this,M._reason()):this._promiseCancelled()}else this._promiseRejected(new g("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(A))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},l.coroutine=function(_,C){if("function"!=typeof _)throw new g("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var A=Object(C).yieldHandler,M=y,E=(new Error).stack;return function(){var R=_.apply(this,arguments),x=new M(void 0,void 0,A,E),P=x.promise();return x._generator=R,x._promiseFulfilled(void 0),P}},l.coroutine.addYieldHandler=function(_){if("function"!=typeof _)throw new g("expecting a function but got "+v.classString(_));I.push(_)},l.spawn=function(_){if(f.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof _)return d("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var C=new y(_,this),A=C.promise();return C._run(l.spawn),A}}},{"./errors":12,"./util":36}],17:[function(a,s,o){s.exports=function(l,d,c,u,h){a("./util"),l.join=function(){var g,v=arguments.length-1;v>0&&"function"==typeof arguments[v]&&(g=arguments[v]);var p=[].slice.call(arguments);g&&p.pop();var m=new d(p).promise();return void 0!==g?m.spread(g):m}}},{"./util":36}],18:[function(a,s,o){s.exports=function(l,d,c,u,h,f){var g=a("./util"),v=g.tryCatch,p=g.errorObj,m=l._async;function I(_,C,A,M){this.constructor$(_),this._promise._captureStackTrace();var E=l._getContext();if(this._callback=g.contextBind(E,C),this._preservedValues=M===h?new Array(this.length()):null,this._limit=A,this._inFlight=0,this._queue=[],m.invoke(this._asyncInit,this,void 0),g.isArray(_))for(var R=0;R<_.length;++R){var x=_[R];x instanceof l&&x.suppressUnhandledRejections()}}function y(_,C,A,M){if("function"!=typeof C)return c("expecting a function but got "+g.classString(C));var E=0;if(void 0!==A){if("object"!=typeof A||null===A)return l.reject(new TypeError("options argument must be an object but it is "+g.classString(A)));if("number"!=typeof A.concurrency)return l.reject(new TypeError("'concurrency' must be a number but it is "+g.classString(A.concurrency)));E=A.concurrency}return new I(_,C,E="number"==typeof E&&isFinite(E)&&E>=1?E:0,M).promise()}g.inherits(I,d),I.prototype._asyncInit=function(){this._init$(void 0,-2)},I.prototype._init=function(){},I.prototype._promiseFulfilled=function(_,C){var A=this._values,M=this.length(),E=this._preservedValues,R=this._limit;if(C<0){if(A[C=-1*C-1]=_,R>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(R>=1&&this._inFlight>=R)return A[C]=_,this._queue.push(C),!1;null!==E&&(E[C]=_);var x=this._promise,P=this._callback,F=x._boundValue();x._pushContext();var k=v(P).call(F,_,C,M),w=x._popContext();if(f.checkForgottenReturns(k,w,null!==E?"Promise.filter":"Promise.map",x),k===p)return this._reject(k.e),!0;var S=u(k,this._promise);if(S instanceof l){var L=(S=S._target())._bitField;if(0==(50397184&L))return R>=1&&this._inFlight++,A[C]=S,S._proxy(this,-1*(C+1)),!1;if(0==(33554432&L))return 0!=(16777216&L)?(this._reject(S._reason()),!0):(this._cancel(),!0);k=S._value()}A[C]=k}return++this._totalResolved>=M&&(null!==E?this._filter(A,E):this._resolve(A),!0)},I.prototype._drainQueue=function(){for(var _=this._queue,C=this._limit,A=this._values;_.length>0&&this._inFlight<C;){if(this._isResolved())return;var M=_.pop();this._promiseFulfilled(A[M],M)}},I.prototype._filter=function(_,C){for(var A=C.length,M=new Array(A),E=0,R=0;R<A;++R)_[R]&&(M[E++]=C[R]);M.length=E,this._resolve(M)},I.prototype.preservedValues=function(){return this._preservedValues},l.prototype.map=function(_,C){return y(this,_,C,null)},l.map=function(_,C,A,M){return y(_,C,A,M)}}},{"./util":36}],19:[function(a,s,o){s.exports=function(l,d,c,u,h){var f=a("./util"),g=f.tryCatch;l.method=function(v){if("function"!=typeof v)throw new l.TypeError("expecting a function but got "+f.classString(v));return function(){var p=new l(d);p._captureStackTrace(),p._pushContext();var m=g(v).apply(this,arguments),I=p._popContext();return h.checkForgottenReturns(m,I,"Promise.method",p),p._resolveFromSyncValue(m),p}},l.attempt=l.try=function(v){if("function"!=typeof v)return u("expecting a function but got "+f.classString(v));var p,m=new l(d);if(m._captureStackTrace(),m._pushContext(),arguments.length>1){h.deprecated("calling Promise.try with more than 1 argument");var I=arguments[1],y=arguments[2];p=f.isArray(I)?g(v).apply(y,I):g(v).call(y,I)}else p=g(v)();var _=m._popContext();return h.checkForgottenReturns(p,_,"Promise.try",m),m._resolveFromSyncValue(p),m},l.prototype._resolveFromSyncValue=function(v){v===f.errorObj?this._rejectCallback(v.e,!1):this._resolveCallback(v,!0)}}},{"./util":36}],20:[function(a,s,o){var l=a("./util"),d=l.maybeWrapAsError,c=a("./errors").OperationalError,u=a("./es5"),h=/^(?:name|message|stack|cause)$/;function f(g){var v,y;if((y=g)instanceof Error&&u.getPrototypeOf(y)===Error.prototype){(v=new c(g)).name=g.name,v.message=g.message,v.stack=g.stack;for(var p=u.keys(g),m=0;m<p.length;++m){var I=p[m];h.test(I)||(v[I]=g[I])}return v}return l.markAsOriginatingFromRejection(g),g}s.exports=function(g,v){return function(p,m){if(null!==g){if(p){var I=f(d(p));g._attachExtraTrace(I),g._reject(I)}else if(v){var y=[].slice.call(arguments,1);g._fulfill(y)}else g._fulfill(m);g=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,s,o){s.exports=function(l){var d=a("./util"),c=l._async,u=d.tryCatch,h=d.errorObj;function f(p,m){if(!d.isArray(p))return g.call(this,p,m);var I=u(m).apply(this._boundValue(),[null].concat(p));I===h&&c.throwLater(I.e)}function g(p,m){var I=this._boundValue(),y=void 0===p?u(m).call(I,null):u(m).call(I,null,p);y===h&&c.throwLater(y.e)}function v(p,m){if(!p){var I=new Error(p+"");I.cause=p,p=I}var y=u(m).call(this._boundValue(),p);y===h&&c.throwLater(y.e)}l.prototype.asCallback=l.prototype.nodeify=function(p,m){if("function"==typeof p){var I=g;void 0!==m&&Object(m).spread&&(I=f),this._then(I,v,void 0,this,p)}return this}}},{"./util":36}],22:[function(a,s,o){s.exports=function(){var l=function(){return new M("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new X.PromiseInspection(this._target())},c=function(G){return X.reject(new M(G))};function u(){}var h={},f=a("./util");f.setReflectHandler(d);var g=function(){var G=process.domain;return void 0===G?null:G},v=function(){return{domain:g(),async:null}},p=f.isNode&&f.nodeSupportsAsyncResource?a("async_hooks").AsyncResource:null,m=function(){return{domain:g(),async:new p("Bluebird::Promise")}},I=f.isNode?v:function(){return null};f.notEnumerableProp(X,"_getContext",I);var y=a("./es5"),_=a("./async"),C=new _;y.defineProperty(X,"_async",{value:C});var A=a("./errors"),M=X.TypeError=A.TypeError;X.RangeError=A.RangeError;var E=X.CancellationError=A.CancellationError;X.TimeoutError=A.TimeoutError,X.OperationalError=A.OperationalError,X.RejectionError=A.OperationalError,X.AggregateError=A.AggregateError;var R=function(){},x={},P={},F=a("./thenables")(X,R),k=a("./promise_array")(X,R,F,c,u),w=a("./context")(X),S=w.create,L=a("./debuggability")(X,w,function(){I=m,f.notEnumerableProp(X,"_getContext",m)},function(){I=v,f.notEnumerableProp(X,"_getContext",v)}),U=a("./finally")(X,F,P),Z=a("./catch_filter")(P),ne=a("./nodeback"),oe=f.errorObj,ue=f.tryCatch;function X(G){G!==R&&function(ee,ie){if(null==ee||ee.constructor!==X)throw new M("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof ie)throw new M("expecting a function but got "+f.classString(ie))}(this,G),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(G),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function pe(G){this.promise._resolveCallback(G)}function B(G){this.promise._rejectCallback(G,!1)}function K(G){var ee=new X(R);ee._fulfillmentHandler0=G,ee._rejectionHandler0=G,ee._promise0=G,ee._receiver0=G}return X.prototype.toString=function(){return"[object Promise]"},X.prototype.caught=X.prototype.catch=function(G){var ee=arguments.length;if(ee>1){var ie,be=new Array(ee-1),Te=0;for(ie=0;ie<ee-1;++ie){var Ge=arguments[ie];if(!f.isObject(Ge))return c("Catch statement predicate: expecting an object but got "+f.classString(Ge));be[Te++]=Ge}if(be.length=Te,"function"!=typeof(G=arguments[ie]))throw new M("The last argument to .catch() must be a function, got "+f.toString(G));return this.then(void 0,Z(be,G,this))}return this.then(void 0,G)},X.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)},X.prototype.then=function(G,ee){if(L.warnings()&&arguments.length>0&&"function"!=typeof G&&"function"!=typeof ee){var ie=".then() only accepts functions but was passed: "+f.classString(G);arguments.length>1&&(ie+=", "+f.classString(ee)),this._warn(ie)}return this._then(G,ee,void 0,void 0,void 0)},X.prototype.done=function(G,ee){this._then(G,ee,void 0,void 0,void 0)._setIsFinal()},X.prototype.spread=function(G){return"function"!=typeof G?c("expecting a function but got "+f.classString(G)):this.all()._then(G,void 0,void 0,x,void 0)},X.prototype.toJSON=function(){var G={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(G.fulfillmentValue=this.value(),G.isFulfilled=!0):this.isRejected()&&(G.rejectionReason=this.reason(),G.isRejected=!0),G},X.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},X.prototype.error=function(G){return this.caught(f.originatesFromRejection,G)},X.getNewLibraryCopy=s.exports,X.is=function(G){return G instanceof X},X.fromNode=X.fromCallback=function(G){var ee=new X(R);ee._captureStackTrace();var ie=arguments.length>1&&!!Object(arguments[1]).multiArgs,be=ue(G)(ne(ee,ie));return be===oe&&ee._rejectCallback(be.e,!0),ee._isFateSealed()||ee._setAsyncGuaranteed(),ee},X.all=function(G){return new k(G).promise()},X.cast=function(G){var ee=F(G);return ee instanceof X||((ee=new X(R))._captureStackTrace(),ee._setFulfilled(),ee._rejectionHandler0=G),ee},X.resolve=X.fulfilled=X.cast,X.reject=X.rejected=function(G){var ee=new X(R);return ee._captureStackTrace(),ee._rejectCallback(G,!0),ee},X.setScheduler=function(G){if("function"!=typeof G)throw new M("expecting a function but got "+f.classString(G));return C.setScheduler(G)},X.prototype._then=function(G,ee,ie,be,Te){var Ge=void 0!==Te,je=Ge?Te:new X(R),he=this._target(),ae=he._bitField;Ge||(je._propagateFrom(this,3),je._captureStackTrace(),void 0===be&&0!=(2097152&this._bitField)&&(be=0!=(50397184&ae)?this._boundValue():he===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,je));var V=I();if(0!=(50397184&ae)){var Q,me,H=he._settlePromiseCtx;0!=(33554432&ae)?(me=he._rejectionHandler0,Q=G):0!=(16777216&ae)?(me=he._fulfillmentHandler0,Q=ee,he._unsetRejectionIsUnhandled()):(H=he._settlePromiseLateCancellationObserver,me=new E("late cancellation observer"),he._attachExtraTrace(me),Q=ee),C.invoke(H,he,{handler:f.contextBind(V,Q),promise:je,receiver:be,value:me})}else he._addCallbacks(G,ee,je,be,V);return je},X.prototype._length=function(){return 65535&this._bitField},X.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},X.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},X.prototype._setLength=function(G){this._bitField=-65536&this._bitField|65535&G},X.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},X.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},X.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},X.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},X.prototype._isFinal=function(){return(4194304&this._bitField)>0},X.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},X.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},X.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},X.prototype._setAsyncGuaranteed=function(){if(!C.hasCustomScheduler()){var G=this._bitField;this._bitField=G|(536870912&G)>>2^134217728}},X.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},X.prototype._receiverAt=function(G){var ee=0===G?this._receiver0:this[4*G-4+3];return ee===h?void 0:void 0===ee&&this._isBound()?this._boundValue():ee},X.prototype._promiseAt=function(G){return this[4*G-4+2]},X.prototype._fulfillmentHandlerAt=function(G){return this[4*G-4+0]},X.prototype._rejectionHandlerAt=function(G){return this[4*G-4+1]},X.prototype._boundValue=function(){},X.prototype._migrateCallback0=function(G){var ee=G._fulfillmentHandler0,ie=G._rejectionHandler0,be=G._promise0,Te=G._receiverAt(0);void 0===Te&&(Te=h),this._addCallbacks(ee,ie,be,Te,null)},X.prototype._migrateCallbackAt=function(G,ee){var ie=G._fulfillmentHandlerAt(ee),be=G._rejectionHandlerAt(ee),Te=G._promiseAt(ee),Ge=G._receiverAt(ee);void 0===Ge&&(Ge=h),this._addCallbacks(ie,be,Te,Ge,null)},X.prototype._addCallbacks=function(G,ee,ie,be,Te){var Ge=this._length();if(Ge>=65531&&(Ge=0,this._setLength(0)),0===Ge)this._promise0=ie,this._receiver0=be,"function"==typeof G&&(this._fulfillmentHandler0=f.contextBind(Te,G)),"function"==typeof ee&&(this._rejectionHandler0=f.contextBind(Te,ee));else{var je=4*Ge-4;this[je+2]=ie,this[je+3]=be,"function"==typeof G&&(this[je+0]=f.contextBind(Te,G)),"function"==typeof ee&&(this[je+1]=f.contextBind(Te,ee))}return this._setLength(Ge+1),Ge},X.prototype._proxy=function(G,ee){this._addCallbacks(void 0,void 0,ee,G,null)},X.prototype._resolveCallback=function(G,ee){if(0==(117506048&this._bitField)){if(G===this)return this._rejectCallback(l(),!1);var ie=F(G,this);if(!(ie instanceof X))return this._fulfill(G);ee&&this._propagateFrom(ie,2);var be=ie._target();if(be!==this){var Te=be._bitField;if(0==(50397184&Te)){var Ge=this._length();Ge>0&&be._migrateCallback0(this);for(var je=1;je<Ge;++je)be._migrateCallbackAt(this,je);this._setFollowing(),this._setLength(0),this._setFollowee(ie)}else if(0!=(33554432&Te))this._fulfill(be._value());else if(0!=(16777216&Te))this._reject(be._reason());else{var he=new E("late cancellation observer");be._attachExtraTrace(he),this._reject(he)}}else this._reject(l())}},X.prototype._rejectCallback=function(G,ee,ie){var be=f.ensureErrorObject(G),Te=be===G;if(!Te&&!ie&&L.warnings()){var Ge="a promise was rejected with a non-error: "+f.classString(G);this._warn(Ge,!0)}this._attachExtraTrace(be,!!ee&&Te),this._reject(G)},X.prototype._resolveFromExecutor=function(G){if(G!==R){var ee=this;this._captureStackTrace(),this._pushContext();var ie=!0,be=this._execute(G,function(Te){ee._resolveCallback(Te)},function(Te){ee._rejectCallback(Te,ie)});ie=!1,this._popContext(),void 0!==be&&ee._rejectCallback(be,!0)}},X.prototype._settlePromiseFromHandler=function(G,ee,ie,be){var Te=be._bitField;if(0==(65536&Te)){var Ge;be._pushContext(),ee===x?ie&&"number"==typeof ie.length?Ge=ue(G).apply(this._boundValue(),ie):(Ge=oe).e=new M("cannot .spread() a non-array: "+f.classString(ie)):Ge=ue(G).call(ee,ie);var je=be._popContext();0==(65536&(Te=be._bitField))&&(Ge===P?be._reject(ie):Ge===oe?be._rejectCallback(Ge.e,!1):(L.checkForgottenReturns(Ge,je,"",be,this),be._resolveCallback(Ge)))}},X.prototype._target=function(){for(var G=this;G._isFollowing();)G=G._followee();return G},X.prototype._followee=function(){return this._rejectionHandler0},X.prototype._setFollowee=function(G){this._rejectionHandler0=G},X.prototype._settlePromise=function(G,ee,ie,be){var Te=G instanceof X,Ge=this._bitField,je=0!=(134217728&Ge);0!=(65536&Ge)?(Te&&G._invokeInternalOnCancel(),ie instanceof U&&ie.isFinallyHandler()?(ie.cancelPromise=G,ue(ee).call(ie,be)===oe&&G._reject(oe.e)):ee===d?G._fulfill(d.call(ie)):ie instanceof u?ie._promiseCancelled(G):Te||G instanceof k?G._cancel():ie.cancel()):"function"==typeof ee?Te?(je&&G._setAsyncGuaranteed(),this._settlePromiseFromHandler(ee,ie,be,G)):ee.call(ie,be,G):ie instanceof u?ie._isResolved()||(0!=(33554432&Ge)?ie._promiseFulfilled(be,G):ie._promiseRejected(be,G)):Te&&(je&&G._setAsyncGuaranteed(),0!=(33554432&Ge)?G._fulfill(be):G._reject(be))},X.prototype._settlePromiseLateCancellationObserver=function(G){var ee=G.handler,ie=G.promise,be=G.receiver,Te=G.value;"function"==typeof ee?ie instanceof X?this._settlePromiseFromHandler(ee,be,Te,ie):ee.call(be,Te,ie):ie instanceof X&&ie._reject(Te)},X.prototype._settlePromiseCtx=function(G){this._settlePromise(G.promise,G.handler,G.receiver,G.value)},X.prototype._settlePromise0=function(G,ee,ie){var be=this._promise0,Te=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(be,G,Te,ee)},X.prototype._clearCallbackDataAtIndex=function(G){var ee=4*G-4;this[ee+2]=this[ee+3]=this[ee+0]=this[ee+1]=void 0},X.prototype._fulfill=function(G){var ee=this._bitField;if(!((117506048&ee)>>>16)){if(G===this){var ie=l();return this._attachExtraTrace(ie),this._reject(ie)}this._setFulfilled(),this._rejectionHandler0=G,(65535&ee)>0&&(0!=(134217728&ee)?this._settlePromises():C.settlePromises(this),this._dereferenceTrace())}},X.prototype._reject=function(G){var ee=this._bitField;if(!((117506048&ee)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=G,this._isFinal())return C.fatalError(G,f.isNode);(65535&ee)>0?C.settlePromises(this):this._ensurePossibleRejectionHandled()}},X.prototype._fulfillPromises=function(G,ee){for(var ie=1;ie<G;ie++){var be=this._fulfillmentHandlerAt(ie),Te=this._promiseAt(ie),Ge=this._receiverAt(ie);this._clearCallbackDataAtIndex(ie),this._settlePromise(Te,be,Ge,ee)}},X.prototype._rejectPromises=function(G,ee){for(var ie=1;ie<G;ie++){var be=this._rejectionHandlerAt(ie),Te=this._promiseAt(ie),Ge=this._receiverAt(ie);this._clearCallbackDataAtIndex(ie),this._settlePromise(Te,be,Ge,ee)}},X.prototype._settlePromises=function(){var G=this._bitField,ee=65535&G;if(ee>0){if(0!=(16842752&G)){var ie=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,ie,G),this._rejectPromises(ee,ie)}else{var be=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,be,G),this._fulfillPromises(ee,be)}this._setLength(0)}this._clearCancellationData()},X.prototype._settledValue=function(){var G=this._bitField;return 0!=(33554432&G)?this._rejectionHandler0:0!=(16777216&G)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&y.defineProperty(X.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),X.defer=X.pending=function(){return L.deprecated("Promise.defer","new Promise"),{promise:new X(R),resolve:pe,reject:B}},f.notEnumerableProp(X,"_makeSelfResolutionError",l),a("./method")(X,R,F,c,L),a("./bind")(X,R,F,L),a("./cancel")(X,k,c,L),a("./direct_resolve")(X),a("./synchronous_inspection")(X),a("./join")(X,k,F,R,C),X.Promise=X,X.version="3.7.2",a("./call_get.js")(X),a("./generators.js")(X,c,R,F,u,L),a("./map.js")(X,k,c,F,R,L),a("./nodeify.js")(X),a("./promisify.js")(X,R),a("./props.js")(X,k,F,c),a("./race.js")(X,R,F,c),a("./reduce.js")(X,k,c,F,R,L),a("./settle.js")(X,k,L),a("./some.js")(X,k,c),a("./timers.js")(X,R,L),a("./using.js")(X,c,F,S,R,L),a("./any.js")(X),a("./each.js")(X,R),a("./filter.js")(X,R),f.toFastProperties(X),f.toFastProperties(X.prototype),K({a:1}),K({b:2}),K({c:3}),K(1),K(function(){}),K(void 0),K(!1),K(new X(R)),L.setBounds(_.firstLineError,f.lastLineError),X}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(a,s,o){s.exports=function(l,d,c,u,h){var f=a("./util");function g(v){var p=this._promise=new l(d);v instanceof l&&(p._propagateFrom(v,3),v.suppressUnhandledRejections()),p._setOnCancel(this),this._values=v,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return f.inherits(g,h),g.prototype.length=function(){return this._length},g.prototype.promise=function(){return this._promise},g.prototype._init=function v(p,m){var I=c(this._values,this._promise);if(I instanceof l){var y=(I=I._target())._bitField;if(this._values=I,0==(50397184&y))return this._promise._setAsyncGuaranteed(),I._then(v,this._reject,void 0,this,m);if(0==(33554432&y))return 0!=(16777216&y)?this._reject(I._reason()):this._cancel();I=I._value()}if(null!==(I=f.asArray(I)))0!==I.length?this._iterate(I):-5===m?this._resolveEmptyArray():this._resolve(function(C){switch(C){case-2:return[];case-3:return{};case-6:return new Map}}(m));else{var _=u("expecting an array or an iterable object but got "+f.classString(I)).reason();this._promise._rejectCallback(_,!1)}},g.prototype._iterate=function(v){var p=this.getActualLength(v.length);this._length=p,this._values=this.shouldCopyValues()?new Array(p):this._values;for(var m=this._promise,I=!1,y=null,_=0;_<p;++_){var C=c(v[_],m);y=C instanceof l?(C=C._target())._bitField:null,I?null!==y&&C.suppressUnhandledRejections():null!==y?0==(50397184&y)?(C._proxy(this,_),this._values[_]=C):I=0!=(33554432&y)?this._promiseFulfilled(C._value(),_):0!=(16777216&y)?this._promiseRejected(C._reason(),_):this._promiseCancelled(_):I=this._promiseFulfilled(C,_)}I||m._setAsyncGuaranteed()},g.prototype._isResolved=function(){return null===this._values},g.prototype._resolve=function(v){this._values=null,this._promise._fulfill(v)},g.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},g.prototype._reject=function(v){this._values=null,this._promise._rejectCallback(v,!1)},g.prototype._promiseFulfilled=function(v,p){return this._values[p]=v,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseCancelled=function(){return this._cancel(),!0},g.prototype._promiseRejected=function(v){return this._totalResolved++,this._reject(v),!0},g.prototype._resultCancelled=function(){if(!this._isResolved()){var v=this._values;if(this._cancel(),v instanceof l)v.cancel();else for(var p=0;p<v.length;++p)v[p]instanceof l&&v[p].cancel()}},g.prototype.shouldCopyValues=function(){return!0},g.prototype.getActualLength=function(v){return v},g}},{"./util":36}],24:[function(a,s,o){s.exports=function(l,d){var c={},u=a("./util"),h=a("./nodeback"),f=u.withAppended,g=u.maybeWrapAsError,v=u.canEvaluate,p=a("./errors").TypeError,m={__isPromisified__:!0},I=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),y=function(P){return u.isIdentifier(P)&&"_"!==P.charAt(0)&&"constructor"!==P};function _(P){return!I.test(P)}function C(P){try{return!0===P.__isPromisified__}catch(F){return!1}}function A(P,F,k){var w=u.getDataPropertyOrDefault(P,F+k,m);return!!w&&C(w)}var R=v?void 0:function(P,F,k,w,S,L){var U=function(){return this}(),Z=P;function ne(){var oe=F;F===c&&(oe=this);var ue=new l(d);ue._captureStackTrace();var X="string"==typeof Z&&this!==U?this[Z]:P,pe=h(ue,L);try{X.apply(oe,f(arguments,pe))}catch(B){ue._rejectCallback(g(B),!0,!0)}return ue._isFateSealed()||ue._setAsyncGuaranteed(),ue}return"string"==typeof Z&&(P=w),u.notEnumerableProp(ne,"__isPromisified__",!0),ne};function x(P,F,k,w,S){for(var L=new RegExp(F.replace(/([$])/,"\\$")+"$"),U=function(P,F,k,w){for(var S=u.inheritedDataKeys(P),L=[],U=0;U<S.length;++U){var Z=S[U],ne=P[Z],oe=w===y||y(Z);"function"!=typeof ne||C(ne)||A(P,Z,F)||!w(Z,ne,P,oe)||L.push(Z,ne)}return function(ue,X,pe){for(var B=0;B<ue.length;B+=2){var K=ue[B];if(pe.test(K))for(var G=K.replace(pe,""),ee=0;ee<ue.length;ee+=2)if(ue[ee]===G)throw new p("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",X))}}(L,F,k),L}(P,F,L,k),Z=0,ne=U.length;Z<ne;Z+=2){var oe=U[Z],ue=U[Z+1],X=oe+F;if(w===R)P[X]=R(oe,c,oe,ue,F,S);else{var pe=w(ue,function(){return R(oe,c,oe,ue,F,S)});u.notEnumerableProp(pe,"__isPromisified__",!0),P[X]=pe}}return u.toFastProperties(P),P}l.promisify=function(P,F){if("function"!=typeof P)throw new p("expecting a function but got "+u.classString(P));if(C(P))return P;var w,S,k=(w=P,S=void 0===(F=Object(F)).context?c:F.context,R(w,S,void 0,w,null,!!F.multiArgs));return u.copyDescriptors(P,k,_),k},l.promisifyAll=function(P,F){if("function"!=typeof P&&"object"!=typeof P)throw new p("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var k=!!(F=Object(F)).multiArgs,w=F.suffix;"string"!=typeof w&&(w="Async");var S=F.filter;"function"!=typeof S&&(S=y);var L=F.promisifier;if("function"!=typeof L&&(L=R),!u.isIdentifier(w))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var U=u.inheritedDataKeys(P),Z=0;Z<U.length;++Z){var ne=P[U[Z]];"constructor"!==U[Z]&&u.isClass(ne)&&(x(ne.prototype,w,S,L,k),x(ne,w,S,L,k))}return x(P,w,S,L,k)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,s,o){s.exports=function(l,d,c,u){var h,f=a("./util"),g=f.isObject,v=a("./es5");"function"==typeof Map&&(h=Map);var p=function(){var y=0,_=0;function C(A,M){this[y]=A,this[y+_]=M,y++}return function(A){_=A.size,y=0;var M=new Array(2*A.size);return A.forEach(C,M),M}}();function m(y){var _,C=!1;if(void 0!==h&&y instanceof h)_=p(y),C=!0;else{var A=v.keys(y),M=A.length;_=new Array(2*M);for(var E=0;E<M;++E){var R=A[E];_[E]=y[R],_[E+M]=R}}this.constructor$(_),this._isMap=C,this._init$(void 0,C?-6:-3)}function I(y){var _,C=c(y);return g(C)?(_=C instanceof l?C._then(l.props,void 0,void 0,void 0,void 0):new m(C).promise(),C instanceof l&&_._propagateFrom(C,2),_):u("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}f.inherits(m,d),m.prototype._init=function(){},m.prototype._promiseFulfilled=function(y,_){if(this._values[_]=y,++this._totalResolved>=this._length){var C;if(this._isMap)C=function(R){for(var x=new h,P=R.length/2|0,F=0;F<P;++F)x.set(R[P+F],R[F]);return x}(this._values);else{C={};for(var A=this.length(),M=0,E=this.length();M<E;++M)C[this._values[M+A]]=this._values[M]}return this._resolve(C),!0}return!1},m.prototype.shouldCopyValues=function(){return!1},m.prototype.getActualLength=function(y){return y>>1},l.prototype.props=function(){return I(this)},l.props=function(y){return I(y)}}},{"./es5":13,"./util":36}],26:[function(a,s,o){function l(d){this._capacity=d,this._length=0,this._front=0}l.prototype._willBeOverCapacity=function(d){return this._capacity<d},l.prototype._pushOne=function(d){var c=this.length();this._checkCapacity(c+1),this[this._front+c&this._capacity-1]=d,this._length=c+1},l.prototype.push=function(d,c,u){var h=this.length()+3;if(this._willBeOverCapacity(h))return this._pushOne(d),this._pushOne(c),void this._pushOne(u);var f=this._front+h-3;this._checkCapacity(h);var g=this._capacity-1;this[f+0&g]=d,this[f+1&g]=c,this[f+2&g]=u,this._length=h},l.prototype.shift=function(){var d=this._front,c=this[d];return this[d]=void 0,this._front=d+1&this._capacity-1,this._length--,c},l.prototype.length=function(){return this._length},l.prototype._checkCapacity=function(d){this._capacity<d&&this._resizeTo(this._capacity<<1)},l.prototype._resizeTo=function(d){var c=this._capacity;this._capacity=d,function(u,h,f,g,v){for(var p=0;p<v;++p)f[p+g]=u[p+0],u[p+0]=void 0}(this,0,this,c,this._front+this._length&c-1)},s.exports=l},{}],27:[function(a,s,o){s.exports=function(l,d,c,u){var h=a("./util");function f(g,v){var p,m=c(g);if(m instanceof l)return(p=m).then(function(E){return f(E,p)});if(null===(g=h.asArray(g)))return u("expecting an array or an iterable object but got "+h.classString(g));var I=new l(d);void 0!==v&&I._propagateFrom(v,3);for(var y=I._fulfill,_=I._reject,C=0,A=g.length;C<A;++C){var M=g[C];(void 0!==M||C in g)&&l.cast(M)._then(y,_,void 0,I,null)}return I}l.race=function(g){return f(g,void 0)},l.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,s,o){s.exports=function(l,d,c,u,h,f){var g=a("./util"),v=g.tryCatch;function p(C,A,M,E){this.constructor$(C);var R=l._getContext();this._fn=g.contextBind(R,A),void 0!==M&&(M=l.resolve(M))._attachCancellationCallback(this),this._initialValue=M,this._currentCancellable=null,this._eachValues=E===h?Array(this._length):0===E?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function m(C,A){this.isFulfilled()?A._resolve(C):A._reject(C)}function I(C,A,M,E){return"function"!=typeof A?c("expecting a function but got "+g.classString(A)):new p(C,A,M,E).promise()}function y(C){this.accum=C,this.array._gotAccum(C);var A=u(this.value,this.array._promise);return A instanceof l?(this.array._currentCancellable=A,A._then(_,void 0,void 0,this,void 0)):_.call(this,A)}function _(C){var A,M=this.array,E=M._promise,R=v(M._fn);E._pushContext(),(A=void 0!==M._eachValues?R.call(E._boundValue(),C,this.index,this.length):R.call(E._boundValue(),this.accum,C,this.index,this.length))instanceof l&&(M._currentCancellable=A);var x=E._popContext();return f.checkForgottenReturns(A,x,void 0!==M._eachValues?"Promise.each":"Promise.reduce",E),A}g.inherits(p,d),p.prototype._gotAccum=function(C){null!=this._eachValues&&C!==h&&this._eachValues.push(C)},p.prototype._eachComplete=function(C){return null!==this._eachValues&&this._eachValues.push(C),this._eachValues},p.prototype._init=function(){},p.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},p.prototype.shouldCopyValues=function(){return!1},p.prototype._resolve=function(C){this._promise._resolveCallback(C),this._values=null},p.prototype._resultCancelled=function(C){if(C===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof l&&this._currentCancellable.cancel(),this._initialValue instanceof l&&this._initialValue.cancel())},p.prototype._iterate=function(C){var A,M;this._values=C;var E=C.length;void 0!==this._initialValue?(A=this._initialValue,M=0):(A=l.resolve(C[0]),M=1),this._currentCancellable=A;for(var R=M;R<E;++R){var x=C[R];x instanceof l&&x.suppressUnhandledRejections()}if(!A.isRejected())for(;M<E;++M)A=A._then(y,void 0,void 0,{accum:null,value:C[M],index:M,length:E,array:this},void 0),0==(127&M)&&A._setNoAsyncGuarantee();void 0!==this._eachValues&&(A=A._then(this._eachComplete,void 0,void 0,this,void 0)),A._then(m,m,void 0,A,this)},l.prototype.reduce=function(C,A){return I(this,C,A,null)},l.reduce=function(C,A,M,E){return I(C,A,M,E)}}},{"./util":36}],29:[function(a,s,o){var l,g,v,p,m,d=a("./util"),c=d.getNativePromise();if(d.isNode&&"undefined"==typeof MutationObserver){var u=global.setImmediate,h=process.nextTick;l=d.isRecentNode?function(g){u.call(global,g)}:function(g){h.call(process,g)}}else if("function"==typeof c&&"function"==typeof c.resolve){var f=c.resolve();l=function(g){f.then(g)}}else l="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(g){setImmediate(g)}:"undefined"!=typeof setTimeout?function(g){setTimeout(g,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(g=document.createElement("div"),v={attributes:!0},p=!1,m=document.createElement("div"),new MutationObserver(function(){g.classList.toggle("foo"),p=!1}).observe(m,v),function(I){var y=new MutationObserver(function(){y.disconnect(),I()});y.observe(g,v),p||(p=!0,m.classList.toggle("foo"))});s.exports=l},{"./util":36}],30:[function(a,s,o){s.exports=function(l,d,c){var u=l.PromiseInspection;function h(f){this.constructor$(f)}a("./util").inherits(h,d),h.prototype._promiseResolved=function(f,g){return this._values[f]=g,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseFulfilled=function(f,g){var v=new u;return v._bitField=33554432,v._settledValueField=f,this._promiseResolved(g,v)},h.prototype._promiseRejected=function(f,g){var v=new u;return v._bitField=16777216,v._settledValueField=f,this._promiseResolved(g,v)},l.settle=function(f){return c.deprecated(".settle()",".reflect()"),new h(f).promise()},l.allSettled=function(f){return new h(f).promise()},l.prototype.settle=function(){return l.settle(this)}}},{"./util":36}],31:[function(a,s,o){s.exports=function(l,d,c){var u=a("./util"),h=a("./errors").RangeError,f=a("./errors").AggregateError,g=u.isArray,v={};function p(I){this.constructor$(I),this._howMany=0,this._unwrap=!1,this._initialized=!1}function m(I,y){if((0|y)!==y||y<0)return c("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var _=new p(I),C=_.promise();return _.setHowMany(y),_.init(),C}u.inherits(p,d),p.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var I=g(this._values);!this._isResolved()&&I&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},p.prototype.init=function(){this._initialized=!0,this._init()},p.prototype.setUnwrap=function(){this._unwrap=!0},p.prototype.howMany=function(){return this._howMany},p.prototype.setHowMany=function(I){this._howMany=I},p.prototype._promiseFulfilled=function(I){return this._addFulfilled(I),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},p.prototype._promiseRejected=function(I){return this._addRejected(I),this._checkOutcome()},p.prototype._promiseCancelled=function(){return this._values instanceof l||null==this._values?this._cancel():(this._addRejected(v),this._checkOutcome())},p.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var I=new f,y=this.length();y<this._values.length;++y)this._values[y]!==v&&I.push(this._values[y]);return I.length>0?this._reject(I):this._cancel(),!0}return!1},p.prototype._fulfilled=function(){return this._totalResolved},p.prototype._rejected=function(){return this._values.length-this.length()},p.prototype._addRejected=function(I){this._values.push(I)},p.prototype._addFulfilled=function(I){this._values[this._totalResolved++]=I},p.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},p.prototype._getRangeError=function(I){return new h("Input array must contain at least "+this._howMany+" items but contains only "+I+" items")},p.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},l.some=function(I,y){return m(I,y)},l.prototype.some=function(I){return m(this,I)},l._SomePromiseArray=p}},{"./errors":12,"./util":36}],32:[function(a,s,o){s.exports=function(l){function d(p){void 0!==p?(p=p._target(),this._bitField=p._bitField,this._settledValueField=p._isFateSealed()?p._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}d.prototype._settledValue=function(){return this._settledValueField};var c=d.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},u=d.prototype.error=d.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},h=d.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},f=d.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=d.prototype.isPending=function(){return 0==(50397184&this._bitField)},v=d.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};d.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},l.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},l.prototype._isCancelled=function(){return this._target().__isCancelled()},l.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},l.prototype.isPending=function(){return g.call(this._target())},l.prototype.isRejected=function(){return f.call(this._target())},l.prototype.isFulfilled=function(){return h.call(this._target())},l.prototype.isResolved=function(){return v.call(this._target())},l.prototype.value=function(){return c.call(this._target())},l.prototype.reason=function(){var p=this._target();return p._unsetRejectionIsUnhandled(),u.call(p)},l.prototype._value=function(){return this._settledValue()},l.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},l.PromiseInspection=d}},{}],33:[function(a,s,o){s.exports=function(l,d){var c=a("./util"),u=c.errorObj,h=c.isObject,f={}.hasOwnProperty;return function(g,v){if(h(g)){if(g instanceof l)return g;var p=function(I){try{return(y=I).then}catch(y){return u.e=y,u}var y}(g);if(p===u){v&&v._pushContext();var m=l.reject(p.e);return v&&v._popContext(),m}if("function"==typeof p)return function(I){try{return f.call(I,"_promise0")}catch(y){return!1}}(g)?(m=new l(d),g._then(m._fulfill,m._reject,void 0,m,null),m):function(I,y,_){var C=new l(d),A=C;_&&_._pushContext(),C._captureStackTrace(),_&&_._popContext();var E=c.tryCatch(y).call(I,function(P){C&&(C._resolveCallback(P),C=null)},function(P){C&&(C._rejectCallback(P,!1,!0),C=null)});return C&&E===u&&(C._rejectCallback(E.e,!0,!0),C=null),A}(g,p,v)}return g}}},{"./util":36}],34:[function(a,s,o){s.exports=function(l,d,c){var u=a("./util"),h=l.TimeoutError;function f(I){this.handle=I}f.prototype._resultCancelled=function(){clearTimeout(this.handle)};var g=function(I){return v(+this).thenReturn(I)},v=l.delay=function(I,y){var _,C;return void 0!==y?(_=l.resolve(y)._then(g,null,null,I,void 0),c.cancellation()&&y instanceof l&&_._setOnCancel(y)):(_=new l(d),C=setTimeout(function(){_._fulfill()},+I),c.cancellation()&&_._setOnCancel(new f(C)),_._captureStackTrace()),_._setAsyncGuaranteed(),_};function p(I){return clearTimeout(this.handle),I}function m(I){throw clearTimeout(this.handle),I}l.prototype.delay=function(I){return v(I,this)},l.prototype.timeout=function(I,y){var _,C;I=+I;var A=new f(setTimeout(function(){var M,E,R,x;_.isPending()&&(M=_,R=C,x="string"!=typeof(E=y)?E instanceof Error?E:new h("operation timed out"):new h(E),u.markAsOriginatingFromRejection(x),M._attachExtraTrace(x),M._reject(x),null!=R&&R.cancel())},I));return c.cancellation()?(C=this.then(),(_=C._then(p,m,void 0,A,void 0))._setOnCancel(A)):_=this._then(p,m,void 0,A,void 0),_}}},{"./util":36}],35:[function(a,s,o){s.exports=function(l,d,c,u,h,f){var g=a("./util"),v=a("./errors").TypeError,p=a("./util").inherits,m=g.errorObj,I=g.tryCatch,y={};function _(x){setTimeout(function(){throw x},0)}function C(x,P){var F=0,k=x.length,w=new l(h);return function S(){if(F>=k)return w._fulfill();var U,Z,L=(U=x[F++],(Z=c(U))!==U&&"function"==typeof U._isDisposable&&"function"==typeof U._getDisposer&&U._isDisposable()&&Z._setDisposable(U._getDisposer()),Z);if(L instanceof l&&L._isDisposable()){try{L=c(L._getDisposer().tryDispose(P),x.promise)}catch(U){return _(U)}if(L instanceof l)return L._then(S,_,null,null,null)}S()}(),w}function A(x,P,F){this._data=x,this._promise=P,this._context=F}function M(x,P,F){this.constructor$(x,P,F)}function E(x){return A.isDisposer(x)?(this.resources[this.index]._setDisposable(x),x.promise()):x}function R(x){this.length=x,this.promise=null,this[x-1]=null}A.prototype.data=function(){return this._data},A.prototype.promise=function(){return this._promise},A.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},A.prototype.tryDispose=function(x){var P=this.resource(),F=this._context;void 0!==F&&F._pushContext();var k=P!==y?this.doDispose(P,x):null;return void 0!==F&&F._popContext(),this._promise._unsetDisposable(),this._data=null,k},A.isDisposer=function(x){return null!=x&&"function"==typeof x.resource&&"function"==typeof x.tryDispose},p(M,A),M.prototype.doDispose=function(x,P){return this.data().call(x,x,P)},R.prototype._resultCancelled=function(){for(var x=this.length,P=0;P<x;++P){var F=this[P];F instanceof l&&F.cancel()}},l.using=function(){var x=arguments.length;if(x<2)return d("you must pass at least 2 arguments to Promise.using");var P,F=arguments[x-1];if("function"!=typeof F)return d("expecting a function but got "+g.classString(F));var k=!0;2===x&&Array.isArray(arguments[0])?(x=(P=arguments[0]).length,k=!1):(P=arguments,x--);for(var w=new R(x),S=0;S<x;++S){var L=P[S];if(A.isDisposer(L)){var U=L;(L=L.promise())._setDisposable(U)}else{var Z=c(L);Z instanceof l&&(L=Z._then(E,null,null,{resources:w,index:S},void 0))}w[S]=L}var ne=new Array(w.length);for(S=0;S<ne.length;++S)ne[S]=l.resolve(w[S]).reflect();var oe=l.all(ne).then(function(X){for(var pe=0;pe<X.length;++pe){var B=X[pe];if(B.isRejected())return m.e=B.error(),m;if(!B.isFulfilled())return void oe.cancel();X[pe]=B.value()}ue._pushContext(),F=I(F);var K=k?F.apply(void 0,X):F(X),G=ue._popContext();return f.checkForgottenReturns(K,G,"Promise.using",ue),K}),ue=oe.lastly(function(){var X=new l.PromiseInspection(oe);return C(w,X)});return w.promise=ue,ue._setOnCancel(w),ue},l.prototype._setDisposable=function(x){this._bitField=131072|this._bitField,this._disposer=x},l.prototype._isDisposable=function(){return(131072&this._bitField)>0},l.prototype._getDisposer=function(){return this._disposer},l.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},l.prototype.disposer=function(x){if("function"==typeof x)return new M(x,this,u());throw new v}}},{"./errors":12,"./util":36}],36:[function(a,s,o){var u,l=a("./es5"),d="undefined"==typeof navigator,c={e:{}},h=void 0!==Bt?Bt:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;function f(){try{var je=u;return u=null,je.apply(this,arguments)}catch(he){return c.e=he,c}}function p(je){return null==je||!0===je||!1===je||"string"==typeof je||"number"==typeof je}function C(je,he,ae){return p(je)||l.defineProperty(je,he,{value:ae,configurable:!0,enumerable:!1,writable:!0}),je}var M=function(){var je=[Array.prototype,Object.prototype,Function.prototype],he=function(Q){for(var me=0;me<je.length;++me)if(je[me]===Q)return!0;return!1};if(l.isES5){var ae=Object.getOwnPropertyNames;return function(Q){for(var me=[],H=Object.create(null);null!=Q&&!he(Q);){var j;try{j=ae(Q)}catch(le){return me}for(var q=0;q<j.length;++q){var re=j[q];if(!H[re]){H[re]=!0;var de=Object.getOwnPropertyDescriptor(Q,re);null!=de&&null==de.get&&null==de.set&&me.push(re)}}Q=l.getPrototypeOf(Q)}return me}}var V={}.hasOwnProperty;return function(Q){if(he(Q))return[];var me=[];e:for(var H in Q)if(V.call(Q,H))me.push(H);else{for(var j=0;j<je.length;++j)if(V.call(je[j],H))continue e;me.push(H)}return me}}(),E=/this\s*\.\s*\S+\s*=/,P=/^[a-z$_][a-z$_0-9]*$/i;function w(je){try{return je+""}catch(he){return"[no string representation]"}}function S(je){return je instanceof Error||null!==je&&"object"==typeof je&&"string"==typeof je.message&&"string"==typeof je.name}function Z(je){return S(je)&&l.propertyIsWritable(je,"stack")}var ne="stack"in new Error?function(je){return Z(je)?je:new Error(w(je))}:function(je){if(Z(je))return je;try{throw new Error(w(je))}catch(he){return he}};function oe(je){return{}.toString.call(je)}var X=function(je){return l.isArray(je)?je:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var pe="function"==typeof Array.from?function(je){return Array.from(je)}:function(je){for(var he,ae=[],V=je[Symbol.iterator]();!(he=V.next()).done;)ae.push(he.value);return ae};X=function(je){return l.isArray(je)?je:null!=je&&"function"==typeof je[Symbol.iterator]?pe(je):null}}var G,Ge,B="undefined"!=typeof process&&"[object process]"===oe(process).toLowerCase(),K="undefined"!=typeof process&&void 0!==process.env,Te={setReflectHandler:function(je){G=je},isClass:function(je){try{if("function"==typeof je){var he=l.names(je.prototype),ae=l.isES5&&he.length>1,V=he.length>0&&!(1===he.length&&"constructor"===he[0]),Q=E.test(je+"")&&l.names(je).length>0;if(ae||V||Q)return!0}return!1}catch(me){return!1}},isIdentifier:function(je){return P.test(je)},inheritedDataKeys:M,getDataPropertyOrDefault:function(je,he,ae){if(!l.isES5)return{}.hasOwnProperty.call(je,he)?je[he]:void 0;var V=Object.getOwnPropertyDescriptor(je,he);return null!=V?null==V.get&&null==V.set?V.value:ae:void 0},thrower:function(je){throw je},isArray:l.isArray,asArray:X,notEnumerableProp:C,isPrimitive:p,isObject:function(je){return"function"==typeof je||"object"==typeof je&&null!==je},isError:S,canEvaluate:d,errorObj:c,tryCatch:function(je){return u=je,f},inherits:function(je,he){var ae={}.hasOwnProperty;function V(){for(var Q in this.constructor=je,this.constructor$=he,he.prototype)ae.call(he.prototype,Q)&&"$"!==Q.charAt(Q.length-1)&&(this[Q+"$"]=he.prototype[Q])}return V.prototype=he.prototype,je.prototype=new V,je.prototype},withAppended:function(je,he){var ae,V=je.length,Q=new Array(V+1);for(ae=0;ae<V;++ae)Q[ae]=je[ae];return Q[ae]=he,Q},maybeWrapAsError:function(je){return p(je)?new Error(w(je)):je},toFastProperties:function(je){function he(){}he.prototype=je;var ae=new he;function V(){return typeof ae.foo}return V(),V(),je},filledRange:function(je,he,ae){for(var V=new Array(je),Q=0;Q<je;++Q)V[Q]=he+Q+ae;return V},toString:w,canAttachTrace:Z,ensureErrorObject:ne,originatesFromRejection:function(je){return null!=je&&(je instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===je.isOperational)},markAsOriginatingFromRejection:function(je){try{C(je,"isOperational",!0)}catch(he){}},classString:oe,copyDescriptors:function(je,he,ae){for(var V=l.names(je),Q=0;Q<V.length;++Q){var me=V[Q];if(ae(me))try{l.defineProperty(he,me,l.getDescriptor(je,me))}catch(H){}}},isNode:B,hasEnvVariables:K,env:function(je){return K?process.env[je]:void 0},global:h,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===oe(new Promise(function(){})))return Promise}catch(je){}},contextBind:function(je,he){if(null===je||"function"!=typeof he||he===G)return he;null!==je.domain&&(he=je.domain.bind(he));var ae=je.async;if(null!==ae){var V=he;he=function(){var Q=new Array(2).concat([].slice.call(arguments));return Q[0]=V,Q[1]=this,ae.runInAsyncScope.apply(ae,Q)}}return he}};Te.isRecentNode=Te.isNode&&(process.versions&&process.versions.node?Ge=process.versions.node.split(".").map(Number):process.version&&(Ge=process.version.split(".").map(Number)),0===Ge[0]&&Ge[1]>10||Ge[0]>0),Te.nodeSupportsAsyncResource=Te.isNode&&function(){var je=!1;try{je="function"==typeof a("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(he){je=!1}return je}(),Te.isNode&&Te.toFastProperties(process);try{throw new Error}catch(je){Te.lastLineError=je}s.exports=Te},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:null!=Bt&&(Bt.P=Bt.Promise)},,,function(e,r,t){t.r(r);var n,se,a=t(2),s=t(1),o=t(0),l=function(){function se(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}return se.prototype.calc3x3Matrix=function(N,b){for(var D=[],O=0;O<3;O++)for(var W=0;W<3;W++)D.push(N[3*O+0]*b[W]+N[3*O+1]*b[W+3]+N[3*O+2]*b[W+6]);return D},se.prototype.rotateMatrix=function(N,b,D){N=N/180*Math.PI;var O=Math.sin(N),W=Math.cos(N);return[W,-O,(1-W)*b+D*O,O,W,(1-W)*D-b*O,0,0,1]},se.prototype.moveMatrix=function(N,b){return[1,0,N,0,1,b,0,0,1]},se.prototype.scaleMatrix=function(N){return[N,0,0,0,N,0,0,0,1]},se.prototype.flipMatrix=function(N,b){return[1-2*Math.pow(N,2),-2*N*b,0,-2*N*b,1-2*Math.pow(b,2),0,0,0,1]},se.prototype.toCanvasMatrix=function(N){for(var b=[0,3,1,4,2,5],D=0;D<b.length;D++)b[D]=N[b[D]];return b},se.prototype.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},se.prototype.rotatePoint=function(N,b,D,O,W){return W=W/180*Math.PI,{x:(N-D)*Math.cos(W)-(b-O)*Math.sin(W)+D,y:(N-D)*Math.sin(W)+(b-O)*Math.cos(W)+O}},se.prototype.rotateRect=function(N,b,D,O,W){var z=N+D/2,ve=b+O/2,xe=this.rotatePoint(N,b,z,ve,W),Me=this.rotatePoint(N+D,b,z,ve,W),J=this.rotatePoint(N+D,b+O,z,ve,W),Ke=this.rotatePoint(N,b+O,z,ve,W),et=[Me.x,xe.x,Ke.x,J.x].sort(function(ot,it){return ot-it}),rt=[Me.y,xe.y,Ke.y,J.y].sort(function(ot,it){return ot-it});return{x:et[0],y:rt[0],width:et[3]-et[0],height:rt[3]-rt[0]}},se.prototype.calcLineEquation=function(N,b){var D=b.y-N.y,O=N.x-b.x,W=b.x*N.y-N.x*b.y,z=D*D+O*O,ve=[];return ve.push((O*O-D*D)/z,-2*D*O/z,-2*D*W/z,-2*D*O/z,(D*D-O*O)/z,-2*O*W/z,0,0,1/z),ve},se.prototype.setTransform=function(N){var b=this;this.matrix.forEach(function(D){D=b.toCanvasMatrix(D),N.transform.apply(N,D)})},se.prototype.setPointTransform=function(N,b){for(var D=[],O=0;O<this.matrix.length;O++){var W=N*(D=this.matrix[O])[0]+b*D[3],z=N*D[1]+b*D[4];N=W,b=z}return{x:N,y:b}},se.prototype.crop=function(N,b,D,O){this._clear();var W={type:"crop",left:N,top:b,width:D,height:O};return this.all.push(W),W},se.prototype.erase=function(N,b,D,O,W){this._clear();var z={type:"erase",left:N,top:b,width:D,height:O,color:W};return this.all.push(z),z},se.prototype.changePageSize=function(N,b){this._clear();var D={type:"changeSize",width:N,height:b};return this.all.push(D),D},se.prototype.flip=function(N){this._flipNum+=1;var b=this._tAngle/180*Math.PI,D=Math.cos(b),O=-Math.sin(b),W=-Math.sin(b),z=-Math.cos(b);this._flipNumX%2&&(W=-W,z=-z),this._flipNumY%2&&(D=-D,O=-O);var ve={x:D,y:O},xe={x:W,y:z},Me={x:0,y:0},J=null;if(0===N)this._flipNumX+=1,J=this.calcLineEquation(ve,Me);else{if(1!==N)return;this._flipNumY+=1,J=this.calcLineEquation(xe,Me)}var Ke={type:"flip",matrix:J,direction:N};this.all.push(Ke),this.matrix.push(J);var et=this.getLatestResult();return et=et?this.calc3x3Matrix(J,et):J,this.result.push(et),Ke},se.prototype.calcFlipMatrix=function(N,b){return[1-2*N*N,-2*N*b,0,-2*N*b,1-2*b*b,0,0,0,1]},se.prototype.rotate=function(N,b,D,O){var W=!1;null!==this._curMode&&(this._curMode!==O?(this._clear(),W=!1):W=!0),this._curMode=O,this._flipNum%2&&(N=-N),this._tAngle+=N;var z=N,ve=this.rotateMatrix(N,b||0,D||0);W&&(z=this._tAngle);var xe={type:"rotate",matrix:ve,mode:O,angle:N,calcAngle:z};this.all.push(xe),this.matrix.push(ve);var Me=this.getLatestResult();return Me=Me?this.calc3x3Matrix(ve,Me):ve,this.result.push(Me),xe},se.prototype.translate=function(N,b){var D=this.moveMatrix(N,b);this.all.push(D),this.matrix.push(D);var O=this.getLatestResult();O=O?this.calc3x3Matrix(D,O):D,this.result.push(O)},se.prototype.calcTranslateDis=function(N,b){var D=this._tAngle/180*Math.PI,O=N*Math.cos(D),W=-N*Math.sin(D),z=b*Math.sin(D),ve=b*Math.cos(D);return this._flipNumX%2&&(z=-z,ve=-ve),this._flipNumY%2&&(O=-O,W=-W),{x:O+z,y:W+ve}},se.prototype.reset=function(){this.all=[],this._clear(),this._curMode=null},se.prototype._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},se}(),d=function(){function se(N,b){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=N,this.setTempSize(b.width,b.height),this.edt=new l}return se.prototype.setTempSize=function(N,b){this.tempWidth=N,this.tempHeight=b},se.prototype.addViewer=function(N){-1===this.vws.indexOf(N)&&this.vws.push(N)},se.prototype.rmViewer=function(N){var b=this.vws.indexOf(N);-1!==b&&this.vws.splice(b,1)},se.prototype.setTags=function(N){N.length<1||(this.tags=N.slice())},se.prototype.getTags=function(){return this.tags.slice()},se}(),c=(n=function(se,N){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,D){b.__proto__=D}||function(b,D){for(var O in D)D.hasOwnProperty(O)&&(b[O]=D[O])})(se,N)},function(se,N){function b(){this.constructor=se}n(se,N),se.prototype=null===N?Object.create(N):(b.prototype=N.prototype,new b)}),u=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},h=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}},f=function(se){function N(b,D,O){var W=se.call(this,D)||this;return W._db=O,W._on(o.b.APPEND_SYNC,function(z,ve){W.appendSync(z,ve)}),W._initEvent(),W}return c(N,se),N.prototype.dispose=function(){se.prototype.dispose.call(this),this._db=null},N.prototype._initEvent=function(){var b=this;this._on(o.b.UPDATE_SYNC,function(D,O,W){b.updateSync(D,O,W)}),this._on(o.b.REMOVE_PAGE,function(D,O){O.forEach(function(W){var z=b._db.getMid(W);if(z){Object(s.y)(z.oriData)&&s.a.revokeObjectURL(z.oriData),Object(s.y)(z.minData)&&s.a.revokeObjectURL(z.minData);var ve=z.img;ve&&(ve.src="",ve.onload=null,ve.onerror=null,z.img=null)}b._db.removeMid(W),b._db.getDataAsync(W).then(function(xe){Object(s.y)(xe.oriData)&&s.a.revokeObjectURL(xe.oriData),Object(s.y)(xe.minData)&&s.a.revokeObjectURL(xe.minData)}).catch(function(xe){}),b._db.removeDataAsync(W),b._db.removeMetadata(W)})}),this._on(o.b.RENAME_TAG,function(D,O,W){W.forEach(function(z){var ve=b._db.getMid(z);if(ve){var xe=ve.tags.indexOf(D);-1!==xe&&ve.tags.splice(xe,1,O)}b._db.getDataAsync(z).then(function(Me){if(Me.tags){var J=Me.tags.indexOf(D);-1!==J&&(Me.tags.splice(J,1,O),b._db.updateDataAsync(z,Me).catch(function(Ke){}))}}).catch(function(Me){})})}),this._on(o.b.EMPTY_TAG,function(D,O,W){O.forEach(function(z){var ve=b._db.getMid(z);if(ve){var xe=ve.tags.indexOf(D);-1!==xe&&ve.tags.splice(xe,1)}b._db.getDataAsync(z).then(function(Me){if(Me.tags){var J=Me.tags.indexOf(D);-1!==J&&(Me.tags.splice(J,1),b._db.updateDataAsync(z,Me).catch(function(Ke){}))}}).catch(function(Me){})})}),this._on(o.b.ADD_PAGE_TAG,function(D,O,W){var z=b._db.getMid(D);z&&-1===z.tags.indexOf(O)&&z.tags.push(D),b._db.getDataAsync(D).then(function(ve){ve.tags&&-1===ve.tags.indexOf(O)&&(ve.tags.push(D),b._db.updateDataAsync(D,ve).catch(function(xe){}))}).catch(function(ve){})}),this._on(o.b.REMOVE_PAGE_TAG,function(D,O,W){var z=b._db.getMid(D);if(z){var ve=z.tags.indexOf(O);-1!==ve&&z.tags.splice(ve,1)}b._db.getDataAsync(D).then(function(xe){if(xe.tags){var Me=xe.tags.indexOf(O);-1!==Me&&(xe.tags.splice(Me,1),b._db.updateDataAsync(D,xe).catch(function(J){}))}}).catch(function(xe){})})},N.prototype.appendSync=function(b,D){if(!this._ckStr(b)||!this._ckArray(D))return[];var O=this._load(b,D);return this._ok(),O},N.prototype.insertSync=function(b,D,O){if(!this._ckStr(b)||!this._ckArray(D))return this._thrEr(o.a.PARAM_TYPE),[];if(void 0===O)return this.appendSync(b,D);var W=this._load(b,D,O);return this._ok(),W},N.prototype.updateSync=function(b,D,O){void 0===O&&(O=!0),this._emit(o.d.LOG,"Invoking DataControl#updateSync.");var W=this._db.getMid(b);if(!W)return!1;this._db.updateMetadata(b,D.metadata),D.customData&&(W.customData=D.customData),D.tags&&W.setTags(D.tags),O&&(s.a.revokeObjectURL(W.oriData),s.a.revokeObjectURL(W.minData)),W.minData=null,!W.overlays.length&&D.minData&&Object(s.y)(D.minData)&&(W.minData=D.minData),W.oriData=null,W.img=null,W.active=!1,W.activeMin=!1,W.minTask=null,W.edt.reset(),W.setTempSize(D.metadata.width,D.metadata.height),this._db.updateMid(b,W),D.tags||(D.tags=W.getTags()),D.customData||(D.customData=W.customData),this._db.updateDataAsync(b,D),this._emit(o.b.UPDATE_FOR_VIEWER,b,D)},N.prototype._load=function(b,D,O){for(var W=this,z=[],ve=[],xe=D.length,Me=function(et){var rt={uid:Object(s.I)(11),data:D[et]};ve.push(rt),z.push(rt.uid);var ot=Object.assign({},rt.data.metadata);J._db.addMetadata(rt.uid,ot),J._db.addDataAsync(rt.uid,rt.data).then(function(pt){W._emit(o.d.DB_SAVE_OK,rt.uid,pt)}).catch(function(pt){W._emit(o.d.DB_SAVE_FAILED,rt.uid,pt)});var it=new d(rt.uid,ot);rt.data.minData&&Object(s.y)(rt.data.minData)&&(it.minData=rt.data.minData),it.customData=rt.data.customData||{},it.setTags(rt.data.tags||[]),J._db.addMid(rt.uid,it)},J=this,Ke=0;Ke<xe;Ke++)Me(Ke);return this._emit(o.b.LOAD_FILE,b,ve,O),ve.slice().forEach(function(et){W._emit(o.b.LOAD_TAG,et)}),z},N.prototype._convertData=function(b){return new Promise(function(D,O){if(Object(s.w)(b))D(b);else{var W=new XMLHttpRequest;W.onload=function(){var z=s.a.createObjectURL(W.response);D(z)},W.open("GET",b,!0),W.responseType="blob",W.send()}})},N.prototype.addData=function(b,D){return u(this,void 0,void 0,function(){var O=this;return h(this,function(W){switch(W.label){case 0:return this._ckStr(b)&&Object(s.w)(D)?[4,this._db.addDataAsync(b,D).then(function(z){return O._ok(),z}).catch(function(z){return O._thrEr(o.a.IMG_STORAGE_FAILED),O._err(o.a.IMG_STORAGE_FAILED.message)})]:(this._thrEr(o.a.PARAM_TYPE),[2,this._err(o.a.PARAM_TYPE.message)]);case 1:return[2,W.sent()]}})})},N.prototype.getData=function(b){return u(this,void 0,void 0,function(){var D=this;return h(this,function(O){switch(O.label){case 0:return this._ckStr(b)?[4,this._db.getDataAsync(b).then(function(W){return D._ok(),Promise.resolve(W)}).catch(function(W){return D._thrEr(o.a.IMG_NOT_EXIST),D._err(o.a.IMG_NOT_EXIST.message)})]:(this._thrEr(o.a.PARAM_TYPE),[2,this._err(o.a.PARAM_TYPE.message)]);case 1:return[2,O.sent()]}})})},N.prototype.removeData=function(b){return u(this,void 0,void 0,function(){var D=this;return h(this,function(O){switch(O.label){case 0:return this._ckStr(b)?[4,this._db.removeDataAsync(b).then(function(W){return D._ok(),W}).catch(function(W){return D._thrEr(o.a.IMG_REMOVE_FAILED),D._err(o.a.IMG_REMOVE_FAILED.message)})]:(this._thrEr(o.a.PARAM_TYPE),[2,this._err(o.a.PARAM_TYPE.message)]);case 1:return[2,O.sent()]}})})},N.prototype.updateData=function(b,D){return u(this,void 0,void 0,function(){var O=this;return h(this,function(W){switch(W.label){case 0:return this._ckStr(b)?[4,this._db.updateDataAsync(b,D).then(function(z){return O._ok(),z}).catch(function(z){return O._thrEr(o.a.IMG_NOT_EXIST),O._err(o.a.IMG_NOT_EXIST.message)})]:(this._thrEr(o.a.PARAM_TYPE),[2,this._err(o.a.PARAM_TYPE.message)]);case 1:return[2,W.sent()]}})})},N.prototype._err=function(b){return Promise.reject(new Error(b))},N.prototype._ckArray=function(b){return!!Object(s.m)(b)||(this._thrEr(o.a.PARAM_TYPE),!1)},N.prototype._ckStr=function(b){return!!Object(s.y)(b)||(this._thrEr(o.a.PARAM_TYPE),!1)},N.prototype._thrEr=function(b){this._emit(o.d.ERROR,b)},N.prototype._ok=function(){this._emit(o.d.ERROR,o.a.OK)},N}(a.a),g=function(){function se(N){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=N.dpr}return se.prototype.bind=function(N){this.canvas=N,this.ctx=N.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},se.prototype.unbind=function(){this.canvas=null,this.ctx=null},se.prototype.clear=function(N,b,D,O){var W;null===(W=this.canvas)||void 0===W||W.clearRect(N,b,D,O)},se.prototype.size=function(N,b){this.cssWidth=N,this.cssHeight=b,this.innerWidth=N*this.dpr,this.innerHeight=b*this.dpr},se.prototype.dispose=function(){this.unbind()},se}(),v=(se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)},function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}),p=function(se){function N(b){var D=se.call(this,b)||this;return D.maskColor="rgba(200,200,200,0.5)",D.isMask=!0,D}return v(N,se),N.prototype.setMaskColor=function(b){this.maskColor=b},N.prototype.getMaskColor=function(){return this.maskColor},N}(g),m=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),I=function(se){function N(b){return se.call(this,b)||this}return m(N,se),N.prototype.setBackGroundColor=function(b){this.canvas.style.background=b},N}(g),y=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),_=function(se){function N(b,D){var O=se.call(this,b)||this;O.uid=null,O.img=null,O._tempCvs=null,O._ctx=null,O.saveColor=null,O.saveType="image/jpeg",O._curOpType=null,O.useType=null,O.isTempCvsReset=!0;var W=document.createElement("canvas");W.id="dvs_calc_"+D,O.bind(W);var z=document.createElement("canvas");return z.id="dvs_temp_"+D,O._tempCvs=z,O._ctx=O._tempCvs.getContext("2d"),O._ctx.imageSmoothingEnabled=!1,O.useType=D,O}return y(N,se),N.prototype.setCanvasSize=function(b,D){this.canvas.width=b,this.canvas.height=D,this.cssWidth=b,this.cssHeight=D,this.innerWidth=b,this.innerHeight=D},N.prototype._fillRect=function(b,D,O){return"image/png"!==this.saveType&&(b.save(),b.fillStyle=this.saveColor,b.fillRect(0,0,D,O),b.restore(),!0)},N.prototype.rotate=function(b,D,O){this._cloneToTempCvs();var W=this.ctx,z=null,ve=this._tempCvs;0===b.mode&&(z=Object(s.E)(0,0,ve.width,ve.height,b.calcAngle)),null!==this._curOpType&&this._curOpType!==b.mode&&(ve.width=this.innerWidth,ve.height=this.innerHeight,this._ctx.drawImage(this.canvas,0,0,this.innerWidth,this.innerHeight)),this._curOpType=b.mode,z&&this.setCanvasSize(z.width,z.height),W.clearRect(0,0,this.innerWidth,this.innerHeight),W.save(),this._fillRect(W,this.innerWidth,this.innerHeight),W.translate(this.innerWidth/2,this.innerHeight/2),O.edt.setTransform(W),W.drawImage(ve,-ve.width/2,-ve.height/2,ve.width,ve.height),W.restore(),z&&D.setNaturalSize(z.width,z.height)},N.prototype.flip=function(b,D,O){this._cloneToTempCvs();var W=this.ctx,z=this._tempCvs;W.clearRect(0,0,this.innerWidth,this.innerHeight),W.save(),this._fillRect(W,this.innerWidth,this.innerHeight),W.translate(this.innerWidth/2,this.innerHeight/2),O.edt.setTransform(W),W.drawImage(z,-z.width/2,-z.height/2,z.width,z.height),W.restore()},N.prototype.crop=function(b,D){this._cloneToTempCvs();var O=this.ctx,W=this._tempCvs;W.width=b.width,W.height=b.height,this._ctx.drawImage(this.canvas,b.left,b.top,b.width,b.height,0,0,b.width,b.height),this.setCanvasSize(b.width,b.height),O.drawImage(W,0,0),this._resetTempCvs(),D.setNaturalSize(b.width,b.height)},N.prototype.erase=function(b,D){var O=this.ctx;O.save(),O.fillStyle=b.color||"#ffffff",O.fillRect(b.left,b.top,b.width,b.height),O.restore(),this._resetTempCvs()},N.prototype.changePageSize=function(b,D){this._cloneToTempCvs();var O=this.ctx,W=this._ctx;this._tempCvs.width=b.width,this._tempCvs.height=b.height,W.save(),W.drawImage(this.canvas,0,0,b.width,b.height),W.restore(),this.setCanvasSize(b.width,b.height),O.drawImage(this._tempCvs,0,0),this._resetTempCvs(),D.setNaturalSize(b.width,b.height)},N.prototype.render=function(b,D,O,W){var z=this;if(b!==this.uid){this._resetTempCvs(),this.uid=b,this.img=D,this.setCanvasSize(D.naturalWidth,D.naturalHeight);var ve=this.ctx;ve.save(),ve.drawImage(D,0,0,D.naturalWidth,D.naturalHeight),ve.restore();var xe=W.edt.all.slice();W.edt.reset(),xe.forEach(function(Me){"rotate"===Me.type?(W.edt.rotate(Me.angle,0,0,Me.mode),z.rotate(Me,O,W)):"flip"===Me.type?(W.edt.flip(Me.direction),z.flip(Me,O,W)):"crop"===Me.type?(W.edt.crop(Me.left,Me.top,Me.width,Me.height),z.crop(Me,O)):"erase"===Me.type?(W.edt.erase(Me.left,Me.top,Me.width,Me.height,Me.color),z.erase(Me,O)):"changeSize"===Me.type&&(W.edt.changePageSize(Me.width,Me.height),z.changePageSize(Me,O))})}},N.prototype._resetTempCvs=function(){this._tempCvs.width=1,this._tempCvs.height=1,this.isTempCvsReset=!0},N.prototype._cloneToTempCvs=function(){if(this.isTempCvsReset){this.isTempCvsReset=!1;var b=this.canvas,D=this._tempCvs;D.width=b.width,D.height=b.height,this._ctx.drawImage(b,0,0)}},N.prototype.reset=function(){this.setCanvasSize(1,1),this._tempCvs.width=1,this._tempCvs.height=1,this.isTempCvsReset=!0,this.uid=null,this._curOpType=null},N.prototype.dispose=function(){this.reset(),this._tempCvs.remove(),this._tempCvs=null,this._ctx=null},N}(g),C=function(){function se(){this.saveColor="#ffffff";var N=Object(s.e)();this._dpr=N,this.mainCvs=new I({dpr:N}),this.cropCvs=new p({dpr:N})}return se.prototype.newSaveCvs=function(){var N=new _({dpr:this._dpr},"save");return N.saveColor=this.saveColor,N},se.prototype.bind=function(N){var b,D,O=N.main,W=N.cropper;O&&(null===(b=this.mainCvs)||void 0===b||b.bind(O)),W&&(null===(D=this.cropCvs)||void 0===D||D.bind(W))},se.prototype.unbind=function(N){"main"===N&&this.mainCvs&&(this.mainCvs.innerWidth=1,this.mainCvs.innerHeight=1,this.mainCvs.unbind()),"cropper"===N&&this.cropCvs&&(this.cropCvs.innerWidth=1,this.cropCvs.innerHeight=1,this.cropCvs.unbind())},se.prototype.setCanvasSize=function(N,b){var D,O;null===(D=this.mainCvs)||void 0===D||D.size(N,b),null===(O=this.cropCvs)||void 0===O||O.size(N,b)},se.prototype.dispose=function(){var N,b;null===(N=this.cropCvs)||void 0===N||N.dispose(),this.cropCvs=null,null===(b=this.mainCvs)||void 0===b||b.dispose(),this.mainCvs=null},se}(),A=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),M=function(se){function N(b){var D=se.call(this,b)||this;return D.wrapper=null,D.isDragging=!1,D.isStart=!1,D.startX=0,D.timer=null,D.startTime=0,D.width=0,D.triggerDist=10,D.minDist=60,D.minTime=300,D.timer1=null,D.pages=null,D.callback=null,D.stateCb=null,D.touchNum=1,D.curPageUid=null,D.renderPageUid=null,D.loading=!1,D.isNew=!1,D.targetIndexes=[-1,-1,-1],D.allowDrag=!0,D.isDisposed=!1,D.isDisposed=!1,D.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],D._initEvent(),D}return A(N,se),N.prototype._initEvent=function(){var b=this;se.prototype._on.call(this,o.d.AFTER_RENDER,function(D){b.renderPageUid=D}),se.prototype._on.call(this,o.d.CURRENT_CHANGED,function(D){D||(b.renderPageUid=null),b.curPageUid=D})},N.prototype.setSlidePages=function(b){if(this.wrapper){for(var D=0;D<3;D++){var O=b[D];if(O.index>-1&&""===O.url)return}this.pages=b,this.isNew=!0,this.allowDrag=!1,this.showPages()}},N.prototype.showPages=function(){var b=this;if(!this.loading&&this.isNew){this.loading=!0,this.isNew=!1;var D=[];this.pages.forEach(function(O,W){var z=new Promise(function(ve,xe){var Me,J,Ke=null===(J=null===(Me=b.wrapper)||void 0===Me?void 0:Me.children[W])||void 0===J?void 0:J.children[0],et=O.index;if(Ke)if(Ke.style.width=O.width+"px",Ke.style.height=O.height+"px",Ke.src!==O.url){if(""===O.url)return Ke.src=O.url,Ke.onload=null,Ke.onerror=null,ve(-1);Ke.onload=function(){Ke.onload=null,Ke.onerror=null,ve(et)},Ke.onerror=function(){Ke.onload=null,Ke.onerror=null,ve(et)},Ke.src=O.url}else ve(et);else xe(et)});D.push(z)}),Promise.all(D).then(function(O){b.allowDrag=!0;for(var W=0;W<O.length;W++)if(O[W]!==b.targetIndexes[W]){b.allowDrag=!1;break}b.loading=!1,b.showPages()}).catch(function(O){})}},N.prototype.startHandler=function(b){!this.isDragging&&this.allowDrag&&(clearTimeout(this.timer),this.startTime=b.timeStamp,b.touches?(this.touchNum=b.touches.length,this.startX=b.touches[0].pageX):this.startX=b.pageX,this.isStart=!0)},N.prototype.moveHandler=function(b){var D;if(this.isStart&&!(this.touchNum>2)){var O=(b.touches?b.touches[0].pageX:b.pageX)-this.startX;Math.abs(O)>this.triggerDist&&(this.isDragging=!0,null===(D=this.stateCb)||void 0===D||D.call(this,!0),this._visible(!0),O>this.width?O=this.width:O<-this.width&&(O=-this.width)),this._translateX(O)}},N.prototype.endHandler=function(b){if(this.isStart){var D=!0;(!b||b.touches&&(this.touchNum>1||1!==b.changedTouches.length))&&(D=!1),this.isStart=!1;var O=(b=b||{}).pageX-this.startX,z=this._calcDirection(b.timeStamp-this.startTime,O,D),ve=this;(Object(s.y)(z)?this._oPub.emitEx("preSlide",z):Promise.resolve(!0)).then(function(){ve._transition("transform 0.2s linear"),setTimeout(function(){ve._adjustSrc(z)},200),ve._callbackHandler(z),ve._hideSlide()})}},N.prototype._adjustSrc=function(b){if(this.wrapper){var D=this.wrapper.children;b===o.e.PREVIOUS?this.wrapper.insertBefore(D[2],D[0]):b===o.e.NEXT&&this.wrapper.appendChild(D[0]),this._reset()}},N.prototype._reset=function(){var b;this.isDragging=!1,null===(b=this.stateCb)||void 0===b||b.call(this,!1),this._transition(""),this._translateX(0)},N.prototype._calcDirection=function(b,D,O){var W,z;return O&&-1!==(null===(W=this.pages[0])||void 0===W?void 0:W.index)&&(D>this.minDist||b<this.minTime&&D>this.triggerDist)?o.e.PREVIOUS:O&&-1!==(null===(z=this.pages[2])||void 0===z?void 0:z.index)&&(D<-this.minDist||b<this.minTime&&D<-this.triggerDist)?o.e.NEXT:null},N.prototype._hideSlide=function(){var b=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.timer),this.timer=setTimeout(function(){b.isDisposed||b._hideSlide()},210)):this._visible(!1)},N.prototype._callbackHandler=function(b){var D=this;b&&setTimeout(function(){var W;D.isDisposed||null===(W=D.callback)||void 0===W||W.call(D,b)},205),b&&(this.allowDrag=!1);var O=0;b===o.e.PREVIOUS?O=this.width:b===o.e.NEXT&&(O=-this.width),this._translateX(O)},N.prototype._translateX=function(b){this.wrapper&&(this.wrapper.style.transform="translateX("+b+"px)")},N.prototype._visible=function(b){this.wrapper&&(this.wrapper.style.visibility=b?"visible":"hidden")},N.prototype._transition=function(b){this.wrapper&&(this.wrapper.style.transition=b)},N.prototype.bindCb=function(b){this.callback=b},N.prototype.bind=function(b){this.wrapper=b},N.prototype.unbind=function(){this.wrapper=null},N.prototype.setSlideSize=function(b){if(!this.wrapper)return!1;b<120&&(this.minDist=b/2),this.width=b,this.wrapper.style.width=3*b+"px",this.wrapper.style.left=-b+"px";for(var D=0;D<3;D++)this.wrapper.children[D].style.width=b+"px"},N.prototype.dispose=function(){se.prototype.dispose.call(this),this._reset(),this._hideSlide(),this.unbind(),this.isDisposed=!0},N}(a.a),E=function(){function se(N,b){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=N,this.cores=navigator.hardwareConcurrency||4,this.workerBlobURL=b}return se.prototype.resize=function(N,b,D,O,W,z){return this.useWorker?this.resizeWithWorker(N,b,D,O,W,z):this.resizeWithoutWorker(N,O,W,z)},se.prototype.resizeWithoutWorker=function(N,b,D,O){var W=N.width,z=N.height;b=Math.round(b);for(var ve=z/(D=Math.round(D)),xe=N.getContext("2d"),Me=[],J=2*Math.ceil(z/this.cores/2),Ke=[],et=-1,rt=0;rt<this.cores;rt++){var ot=et+1;if(!(ot>=z)){var it;et=ot+J-1,et=Math.min(et,z-1),it=Math.min(J,z-ot),Me[rt]={},Me[rt].source=xe.getImageData(0,ot,W,J),Me[rt].target=!0,Me[rt].start_y=Math.ceil(ot/ve),Me[rt].height=it;var pt={width_source:W,height_source:Me[rt].height,width:b,height:Math.ceil(Me[rt].height/ve),core:rt,source:Me[rt].source.data.buffer||Me[rt].source.data};Ke[rt]=pt}}for(var ft=Ke.length,mt=[],Et=0;Et<ft;Et++){for(var Dt=Ke[Et],Lt=Dt.core,kt=Dt.width_source,Mt=Dt.height_source,Vt=Dt.width,Kt=Dt.height,vr=kt/Vt,Ar=Mt/Kt,Yr=Math.ceil(vr/2),en=Math.ceil(Ar/2),Br=new Uint8ClampedArray(Dt.source),ri=Vt*Kt*4,On=new ArrayBuffer(ri),tn=new Uint8ClampedArray(On,0,ri),Dr=0;Dr<Kt;Dr++)for(var rn=0;rn<Vt;rn++){var xr=4*(rn+Dr*Vt),Kr=0,ni=0,ii=0,Gl=0,So=0,gd=0,md=0,Ym=Dr*Ar,Km=Math.floor(rn*vr),Hl=Math.ceil((rn+1)*vr),Jm=Math.floor(Dr*Ar),zl=Math.ceil((Dr+1)*Ar);Hl=Math.min(Hl,kt),zl=Math.min(zl,Mt);for(var du=Jm;du<zl;du++)for(var _d=Math.abs(Ym-du)/en,Xm=rn*vr,Zm=_d*_d,hu=Km;hu<Hl;hu++){var vd=Math.abs(Xm-hu)/Yr,ys=Math.sqrt(Zm+vd*vd);if(!(ys>=1)){var io=4*(hu+du*kt);md+=(Kr=2*ys*ys*ys-3*ys*ys+1)*Br[io+3],ii+=Kr,Br[io+3]<255&&(Kr=Kr*Br[io+3]/250),Gl+=Kr*Br[io],So+=Kr*Br[io+1],gd+=Kr*Br[io+2],ni+=Kr}}tn[xr]=Gl/ni,tn[xr+1]=So/ni,tn[xr+2]=gd/ni,tn[xr+3]=md/ii}mt.push(pt={core:Lt,target:tn})}for(var Fi=0;Fi<ft;Fi++){var Ql=mt[Fi],$m=Math.ceil(Me[Fi].height/ve);if(Me[Fi].target=xe.createImageData(b,$m),Me[Fi].target.data.set)Me[Fi].target.data.set(Ql.target);else for(var yd=Me[Fi].target.data.length,bs=0;bs<yd;bs++)Me[Fi].target.data[bs]=Ql.target[bs]}return Promise.resolve(Me)},se.prototype.resizeWithWorker=function(N,b,D,O,W,z){var ve=this,xe=Math.floor(b),Me=Math.floor(D);O=Math.round(O);var J=Me/(W=Math.round(W));if(this.workers_archive.length>0)for(var Ke=0;Ke<this.cores;Ke++)null!=this.workers_archive[Ke]&&(this.workers_archive[Ke].terminate(),delete this.workers_archive[Ke]);this.workers_archive=new Array(this.cores);for(var et=N.getContext("2d"),rt=[],ot=2*Math.ceil(Me/this.cores/2),it=-1,pt=0;pt<this.cores;pt++){var ft=it+1;if(!(ft>=Me)){var mt;it=ft+ot-1,it=Math.min(it,Me-1),mt=Math.min(ot,Me-ft),rt[pt]={},rt[pt].source=et.getImageData(0,ft,xe,ot),rt[pt].target=!0;var Et=Math.ceil(ft/J);rt[pt].start_y=Et,rt[pt].height=mt,rt[pt].height_part=Math.ceil((ft+mt)/J)-Et}}for(var Dt=[],Lt=function(Vt){if(null==rt[Vt])return"continue";var Kt=new Worker(kt.workerBlobURL);kt.workers_archive[Vt]=Kt;var vr=new Promise(function(Yr,en){Kt.onmessage=function(Br){var ri,On;if(z!==ve.taskUid){if(ve.workers_archive.length>0)for(var tn=0;tn<ve.cores;tn++)null!=ve.workers_archive[tn]&&(null===(ri=ve.workers_archive[tn])||void 0===ri||ri.terminate(),delete ve.workers_archive[tn]);ve.workers_archive=new Array(ve.cores),en(!1)}var Dr=Br.data.core;if(null===(On=ve.workers_archive[Dr])||void 0===On||On.terminate(),delete ve.workers_archive[Dr],rt[Dr].target=et.createImageData(O,rt[Dr].height_part),rt[Dr].target.data.set)rt[Dr].target.data.set(Br.data.target);else for(var xr=rt[Dr].target.data.length,Kr=0;Kr<xr;Kr++)rt[Dr].target.data[Kr]=Br.data.target[Kr];Yr(Dr)}});Dt.push(vr);var Ar={width_source:xe,height_source:rt[Vt].height,width:O,height:rt[Vt].height_part,core:Vt,source:rt[Vt].source.data.buffer||rt[Vt].source.data};try{Kt.postMessage(Ar,[Ar.source])}catch(Yr){Kt.postMessage(Ar)}},kt=this,Mt=0;Mt<this.cores;Mt++)Lt(Mt);return Promise.all(Dt).then(function(Vt){return Promise.resolve(rt)}).catch(function(Vt){return Promise.reject(Vt)})},se}(),R=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),x=function(se){function N(b,D,O,W,z,ve,xe,Me){var J=se.call(this,O)||this;return J.uid=null,J.cvsOffW=0,J.cvsOffH=0,J.cvsCltW=0,J.cvsCltH=0,J.cvsInnerW=0,J.cvsInnerH=0,J.maxW=0,J.maxH=0,J.virW=0,J.virH=0,J.dpr=1,J.fitType="window",J.keepZoom=!0,J.clickZoom=!1,J.isFreeCrop=!1,J.zoom=1,J.zoomInDelta=1.2,J.zoomOutDelta=1.2,J.zoomDelta=1.2,J.scrL=0,J.scrT=0,J.disMode="single",J.opMode=0,J.curTab=null,J.curPages=[],J.iMargin=10,J.oMargin=10,J.rows=0,J.columns=0,J._mousedown=!1,J._pageX=0,J._pageY=0,J.rotateMode=1,J.saveBg="#ffffff",J.aspectRatio=0,J.keepAspectRatio=!1,J._startDistance=0,J.useWebWorker=!1,J.renderTaskUid=null,J.workerTimer=null,J.useHermite=!0,J.hermite=null,J.workerBlobURL=null,J.scrBarW=0,J.loadingTimer=null,J.allowSlide=!0,J.slide=null,J.isSliding=!1,J.zooming=!0,J.scrollX=!0,J.scrollY=!0,J.animating=!1,J.bouncing=!1,J.paging=!1,J.snapping=!1,J.animationDuration=300,J.locking=!1,J.minZoom=.01,J.maxZoom=8,J.speedDelta=1,J._outerWidth=0,J._outerHeight=0,J._innerWidth=0,J._innerHeight=0,J._outerLeft=0,J._outerTop=0,J._snapWidth=0,J._snapHeight=0,J._pullHeight=0,J._pullActive=!1,J._maxSrL=0,J._maxSrT=0,J._srL=0,J._srT=0,J._zoom=1,J._futureLeft=0,J._futureTop=0,J._futureZoom=0,J._zoomComplete=null,J._isSingleTouch=!0,J._isDecelerating=!1,J._isProcessing=!1,J._isDragging=!1,J._isAnimating=!1,J._interruptedAnimation=!1,J._position=[],J._startTouchLeft=0,J._startTouchTop=0,J._startZoom=1,J._lastTouchLeft=0,J._lastTouchTop=0,J._lastScale=1,J._enableScrollX=!0,J._enableScrollY=!0,J._fps=60,J._running={},J._counter=1,J.cropLineColor="rgba(0,0,0,1)",J.defaultCursor=null,J.isDisposed=!1,J.offScreenCanvas=Me,J.uid=W,J.dpr=Object(s.e)(),J._db=D,J.fitType=b.fitType,J.maxZoom=b.maxZoom,J.minZoom=b.minZoom,J.opMode=b.opMode,J.iMargin=b.iMargin,J.scrollX=b.scrollX,J.scrollY=b.scrollY,J.zoomInDelta=b.zoomInDelta,J.zoomOutDelta=b.zoomOutDelta,J.zoomDelta=b.zoomDelta,J.zooming=b.zooming,J.useWebWorker=b.useWebWorker,J.useHermite=z,J.scrBarW=xe,J.cvsMng=new C,J.offScreenCanvas.saveColor=J.saveBg,J._initAnimation(),J._initScroller(),J.slide=new M(O),J.slide.stateCb=function(Ke){J.isSliding=Ke},J.useHermite&&(J.workerBlobURL||(J.workerBlobURL=ve),J.hermite=new E(J.useWebWorker,J.workerBlobURL)),J}return R(N,se),N.prototype.setAllowSlide=function(b){this.allowSlide=b},N.prototype.setSlidePages=function(b){var D;null===(D=this.slide)||void 0===D||D.setSlidePages(b)},N.prototype.checkDisplay=function(b,D){if("single"===D.disMode){var O=D.getCurPage();return!(!O||b!==O.uid)}return!0},N.prototype.initGraphic=function(b){var D=b.uid;this.curPages=b.chs,D!==this.curTab&&(this.curTab=D,this.tabItem=b,this.virH=b.virH||0,this.virW=b.virW||0,this.fitType=b.fitType,this.clickZoom=b.clickZoom,this.isFreeCrop=b.isFreeCrop,this.scrL=b.scrL,this.scrT=b.scrT,this.zoom=b.zoom,this.iMargin=b.iMargin,this.oMargin=b.oMargin,this.direction=b.direction,this.disMode=b.disMode,this.opMode=b.opMode)},N.prototype.render=function(b){var D=this;if(this.tabItem){var O=this.tabItem.getCurPage();if(O&&O.uid===b){var W=this.tabItem.cur,z=this._db.getMid(b),ve=(null==z?void 0:z.overlays)||[],xe=z.img;if(xe){var Me=this.cvsMng.mainCvs.ctx;if(Me){var J=this.offScreenCanvas;J.render({viewerUid:"",pageUid:b,isMin:!1,img:xe,page:O,midData:z});var et=Math.round(O.style.left-this.scrL+O.style.width/2),rt=Math.round(O.style.top-this.scrT+O.style.height/2);Me.imageSmoothingEnabled=!1,this.renderTaskUid=Object(s.I)(11),this.hermite&&(this.hermite.taskUid=this.renderTaskUid),Me.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),Me.save(),Me.scale(this.dpr,this.dpr),Me.translate(et,rt);var ot=J.mainCanvas;this.workerTimer&&clearTimeout(this.workerTimer),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout(function(){var it;null===(it=D.hermite)||void 0===it||it.resize(ot,J.mainWidth,J.mainHeight,O.style.width*D.dpr||1,O.style.height*D.dpr||1,D.renderTaskUid).then(function(pt){D._db.getMid(b)&&(Me.save(),Me.clearRect(0,0,D.cvsInnerW,D.cvsInnerH),pt.forEach(function(ft){var mt=Math.round(0+(O.style.left-D.scrL)*D.dpr),Et=Math.round(ft.start_y+(O.style.top-D.scrT)*D.dpr);Me.putImageData(ft.target,mt,Et)}),Me.restore(),Me.save(),Me.scale(D.dpr,D.dpr),Me.translate(et,rt),D._handleOverlay(ve,O,Me),Me.restore(),se.prototype._emit.call(D,o.d.AFTER_RENDER,b))}).catch(function(pt){se.prototype._emit.call(D,o.d.AFTER_RENDER,b)})},100)),Me.drawImage(ot,0,0,J.mainWidth,J.mainHeight,Math.round(-O.style.width/2),Math.round(-O.style.height/2),O.style.width,O.style.height),this._handleOverlay(ve,O,Me),Me.restore(),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||se.prototype._emit.call(this,o.d.AFTER_RENDER,b),se.prototype._emit.call(this,o.g.VIEWER_PAGE_RENDERED,W))}}}}},N.prototype._handleOverlay=function(b,D,O){var W=this;b.forEach(function(z){D.style.width-z.width*W.zoom>0&&D.style.height-z.height*W.zoom>0&&(O.save(),O.globalAlpha=z.opacity,O.fillStyle=z.color,O.fillRect(-D.style.width/2+z.left*W.zoom,-D.style.height/2+z.top*W.zoom,Math.min(D.style.width-z.left*W.zoom,z.width*W.zoom),Math.min(D.style.height-z.top*W.zoom,z.height*W.zoom)),O.restore())})},N.prototype.drawSltBox=function(b){var D=this,O=this.cvsMng.cropCvs.ctx;O&&(O.imageSmoothingEnabled=!1,O.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),O.save(),O.scale(this.dpr,this.dpr),1===this.opMode&&b.cropMng.cropBoxes.forEach(function(W){for(var z=W.probePoints.slice(0,8),ve=W.midpoints.slice(0,8),xe=0;xe<4;xe++){var Me=D.toCanvasCoordinate(z[2*xe],z[2*xe+1]),J=D.toCanvasCoordinate(ve[2*xe],ve[2*xe+1]);z[2*xe]=Me.x,z[2*xe+1]=Me.y,ve[2*xe]=J.x,ve[2*xe+1]=J.y}for(O.lineWidth=1*W.lineWidth,O.fillStyle=W.pointFillColor,O.save(),xe=0;xe<4;xe++)O.strokeStyle=D.cropLineColor,O.beginPath(),O.rect(z[2*xe]-1*W.sensorRadius,z[2*xe+1]-1*W.sensorRadius,2*W.sensorRadius*1,2*W.sensorRadius*1),O.closePath(),O.stroke(),O.fill();for(xe=0;xe<4;xe++)O.strokeStyle=D.cropLineColor,O.beginPath(),O.rect(ve[2*xe]-1*W.sensorRadius,ve[2*xe+1]-1*W.sensorRadius,2*W.sensorRadius*1,2*W.sensorRadius*1),O.closePath(),O.stroke(),O.fill();try{O.setLineDash([1*W.dashLine[0],1*W.dashLine[1]])}catch(Ke){}O.strokeStyle=D.cropLineColor,O.lineWidth=1*W.lineWidth,O.beginPath(),O.moveTo(z[0],z[1]),O.lineTo(z[2],z[3]),O.lineTo(z[4],z[5]),O.lineTo(z[6],z[7]),O.closePath(),O.stroke(),O.restore()}),O.restore())},N.prototype.clearCanvas=function(){var b=this.cvsMng.mainCvs.ctx;b&&b.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},N.prototype._layoutSingle=function(b,D,O){var W,z,ve=b.getCurPage();if(ve&&(W=this._db.getMetadata(ve.uid),z=this._db.getMid(ve.uid)),ve&&W&&z){var Me=W.width,J=W.height,Ke=W.width,et=W.height,rt=null,ot=null;z.edt.all.forEach(function(Mt){if("rotate"===Mt.type){if(0===Mt.mode&&(ot=Object(s.E)(0,0,Ke,et,Mt.calcAngle)),null!==rt&&rt!==Mt.mode&&(Ke=Me,et=J),rt=Mt.mode,ot){var Vt=ot.width,Kt=ot.height;Me=Vt,J=Kt}}else("crop"===Mt.type||"changeSize"===Mt.type)&&(Me=Vt=Mt.width,J=Kt=Mt.height,Ke=Vt,et=Kt)});var it=this._calcZoom(b,Me||0,J||.1),pt=it.zoom,Et=it.virW,Dt=it.virH;this.setCanvasSize(it.canvasWidth,it.canvasHeight),this._zoom=pt=pt||1,ve.cropMng.setZoom(pt),this.virW=Et,this.virH=Dt,O||se.prototype._emit.call(this,o.f.SET_SCROLLER_SIZE,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT});var Lt=(this.cvsCltW-Et)/2,kt=(this.cvsCltH-Dt)/2;Lt<0&&(D&&(this._srL=Math.abs(Lt)),Lt=0),kt<0&&(D&&(this._srT=Math.abs(kt)),kt=0),ve.setBorder(b.pageBorderWidth),ve.setSize(Et,Dt),ve.setPosition(Lt,kt),b.virW=Et,b.virH=Dt,this.setVirtualSize(Et,Dt),this._zoomTo(pt,!1),O||se.prototype._emit.call(this,o.f.SET_SCROLLER_SIZE,{width:Et,height:Dt,x:this.scrL,y:this.scrT})}else se.prototype._emit.call(this,o.f.SET_SCROLLER_SIZE,{width:1,height:1,x:0,y:0})},N.prototype._calcZoom=function(b,D,O){return"window"===b.fitType?this._calFitWindow(D,O):"width"===b.fitType?this._calcFitWidth(D,O):"height"===b.fitType?this._calcFitHeight(D,O):this.keepZoom&&"none"===b.fitType?this._calcKeepZoom(D,O):this._calFitWindow(D,O)},N.prototype.calcZoomForSlide=function(b,D){var O=this._calFitWindow(b,D).zoom;return Math.min(Math.max(this.minZoom,O),this.maxZoom)},N.prototype._calcKeepZoom=function(b,D){var O=this.zoom,W=this.cvsOffW,z=this.cvsOffH,ve=b*O,xe=D*O;return ve>W&&(z-=this.scrBarW),xe>z&&(W-=this.scrBarW),{zoom:O,canvasWidth:W,canvasHeight:z,virW:ve,virH:xe}},N.prototype._calcFitWidth=function(b,D){var O=1,W=0,z=this.cvsOffW,ve=this.cvsOffH;return(W=D*(O=b<=this.cvsOffW?1:this.cvsOffW/b))>ve&&(W=D*(O=b<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/b))>this.cvsOffH&&(z-=this.scrBarW),{zoom:O,canvasWidth:z,canvasHeight:ve,virW:b*O,virH:W}},N.prototype._calcFitHeight=function(b,D){var O,W=1,z=0,ve=0;return ve=this.cvsOffH,(z=b*(W=D<=this.cvsOffH?1:this.cvsOffH/D))>(O=this.cvsOffW)&&(z=b*(W=D<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/D))>this.cvsOffW&&(ve-=this.scrBarW),{zoom:W,canvasWidth:O,canvasHeight:ve,virW:z,virH:D*W}},N.prototype._calFitWindow=function(b,D){return b<=this.cvsCltW&&D<=this.cvsCltH||b>this.cvsCltW&&D<=this.cvsCltH?this._calcFitWidth(b,D):b<=this.cvsCltW&&D>this.cvsCltH?this._calcFitHeight(b,D):b/this.cvsCltW>=D/this.cvsCltH?this._calcFitWidth(b,D):this._calcFitHeight(b,D)},N.prototype._getPage=function(b){for(var D=this.curPages.length,O=0;O<D;O++)if(this.curPages[O].uid===b)return{page:this.curPages[O],index:O}},N.prototype.setFitType=function(b){this.fitType=b,this.tabItem&&(this.tabItem.fitType=b)},N.prototype._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},N.prototype._setScrollerPosition=function(){var b=this.cvsMng.mainCvs.canvas,D={left:0,top:0,right:0,bottom:0,width:0,height:0};try{D=b.getBoundingClientRect()}catch(O){}this.setPosition(D.left+window.pageXOffset+(null==b?void 0:b.clientLeft)||0,D.top+window.pageYOffset+(null==b?void 0:b.clientTop)||0)},N.prototype.setCanvasOffsetSize=function(b,D){var O,W=!1;return this.cvsOffW===b&&this.cvsOffH===D&&(W=!0),this.cvsOffW=b,this.cvsOffH=D,this.cvsCltW=b,this.cvsCltH=D,this.cvsInnerW=b*this.dpr,this.cvsInnerH=D*this.dpr,this.cvsMng.setCanvasSize(b,D),null===(O=this.slide)||void 0===O||O.setSlideSize(b),this._setScrollerPosition(),W},N.prototype.setCanvasSize=function(b,D){this.cvsCltW=b,this.cvsCltH=D,this.cvsInnerW=b*this.dpr,this.cvsInnerH=D*this.dpr,this.cvsMng.setCanvasSize(b,D)},N.prototype.setVirtualSize=function(b,D){this.virW=b||0,this.virH=D||0,this._setValidArea()},N.prototype.setZoom=function(b){return b=Math.max(Math.min(this.maxZoom,b),this.minZoom),this.zoom=b,this._zoomTo(b,!1),this.setFitType("none"),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages"),!0},N.prototype.getZoom=function(){return this.zoom},N.prototype.zoomTo=function(b,D,O,W){return this.zoom=b,this._zoomTo(b,D,O,W),this.setFitType("none"),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages"),this._zoom},N.prototype.scrollTo=function(b,D,O,W){this._scrollTo(b,D,!1),se.prototype._emit.call(this,"_onRender")},N.prototype.zoomIn=function(){var b=this.zoom;return this._zoomTo(b*=this.zoomInDelta,!1),this.setFitType("none"),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages"),b},N.prototype.zoomOut=function(){var b=this.zoom;return this._zoomTo(b/=this.zoomInDelta,!1),this.setFitType("none"),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages"),b},N.prototype.getMinPageData=function(){var b=document.createElement("canvas");b.dvsUid="useToGetMinPageData";var D=b.getContext("2d"),O=this.offScreenCanvas,W=O.mainWidth,z=O.mainHeight,ve=W/z;(W>800||z>800)&&(ve>=1?z=(W=800)/ve:W=(z=800)*ve),b.width=W,b.height=z,D.drawImage(O.mainCanvas,0,0,W,z);var xe=D.getImageData(0,0,W,z);return b.width=0,b.height=0,xe},N.prototype.setSaveBackgroundColor=function(b){this.saveBg=b,this.offScreenCanvas.saveColor=b},N.prototype.onCanvasTouchstart=function(b){var D;if(b.cancelable&&b.preventDefault(),!(b.touches[0]&&b.touches[0].target&&b.touches[0].target.tagName.match(/input|textarea|select/i))&&"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,!b.target.tagName.match(/input|textarea|select/i))){var O=b.touches[0].pageX,W=b.touches[0].pageY;if(0===this.opMode){if(this._pageX=O,this._pageY=W,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging&&(null===(D=this.slide)||void 0===D||D.startHandler(b)),this.isSliding)return;b.targetTouches.length>1&&(this._startDistance=this._calDistance(b.targetTouches)),this.startHandler(b.targetTouches,b.timeStamp)}else if(1===this.opMode){if(this.checkMouseOverPage(b)){var z=this.tabItem.getCurPage();if(!z)return;var ve=this.getMouseCoordinate(b),xe=this.toPageCoordinate(ve.x,ve.y),Me=!1;!0===b.ctrlKey&&(Me=!0);var J=this.tabItem.cur;null===z.cropMng.checkSelect(xe.x,xe.y)&&(Me||z.cropMng.cropBoxes.length>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,J)),z.cropMng.onStartHandler(xe.x,xe.y,Me)}}else 2===this.opMode&&this.checkMouseOverPage(b)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,O-this._outerLeft,W-this._outerTop),se.prototype._emit.call(this,"_onRender"))}},N.prototype.onCanvasTouchmove=function(b){var D;if("single"===this.disMode&&this.tabItem&&this.tabItem.getCurPage()&&this._mousedown){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===b.targetTouches.length)null===(D=this.slide)||void 0===D||D.moveHandler(b);else{if(this.isSliding)return;var O=1;b.targetTouches.length>1&&(O=this._calDistance(b.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",b.scale&&(O=b.scale)),this.moveHandler(b.targetTouches,b.timeStamp,O),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages")}this._mousedown=!0}},N.prototype.onCanvasTouchend=function(b){},N.prototype.onDocumentTouchend=function(b){},N.prototype.onCanvasMousedown=function(b){var D;if("single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,b.cancelable&&b.preventDefault(),!b.target.tagName.match(/input|textarea|select/i)))if(0===this.opMode)this._pageX=b.pageX,this._pageY=b.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging?null===(D=this.slide)||void 0===D||D.startHandler(b):this.startHandler([{pageX:b.pageX,pageY:b.pageY}],b.timeStamp);else if(1===this.opMode){if(this.checkMouseOverPage(b)){var O=this.tabItem.getCurPage();if(!O)return;var W=this.getMouseCoordinate(b),z=this.toPageCoordinate(W.x,W.y),ve=!1;!0===b.ctrlKey&&(ve=!0);var xe=this.tabItem.cur;null===O.cropMng.checkSelect(z.x,z.y)&&(ve||O.cropMng.cropBoxes.length>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,xe)),O.cropMng.onStartHandler(z.x,z.y,ve)}}else 2===this.opMode&&this.checkMouseOverPage(b)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,b.pageX-this._outerLeft,b.pageY-this._outerTop),se.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages"))},N.prototype.onCanvasMousemove=function(b){this._mousedown&&b.cancelable&&b.preventDefault()},N.prototype.onCanvasMouseup=function(b){},N.prototype.onDocumentMousemove=function(b){var D;if("single"===this.disMode&&this.tabItem){var O=this.tabItem.getCurPage();if(O){var W=this.getMouseCoordinate(b),z=this.toPageCoordinate(W.x,W.y);if(this._mousedown){if(1===this.opMode){if(void 0!==this.checkMouseOverPage(b)){var ve=!1;!0===b.ctrlKey&&(ve=!0),O.cropMng.setAspectRatio(this.aspectRatio),O.cropMng.setKeepAspectRatio(!0===b.shiftKey||this.keepAspectRatio),O.cropMng.onMoveHandler(z.x,z.y,ve),se.prototype._emit.call(this,"_onRenderBoxes")}}else 0===this.opMode&&(b.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null===(D=this.slide)||void 0===D||D.moveHandler(b):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:b.pageX,pageY:b.pageY}],b.timeStamp),se.prototype._emit.call(this,"_onRender"))));this._mousedown=!0}else if(O.cropMng.cropBoxes.length>0){var xe=O.cropMng.checkSelectForCursor(z.x,z.y);if(null!==xe){var Me=null;"move"===xe.position?Me="move":"nw"!==xe.position&&"se"!==xe.position&&"ne"!==xe.position&&"sw"!==xe.position&&"e"!==xe.position&&"w"!==xe.position&&"n"!==xe.position&&"s"!==xe.position||(Me=xe.position+"-resize"),se.prototype._emit.call(this,o.f.CHANGE_CANVAS_CURSOR,Me)}else se.prototype._emit.call(this,o.f.CHANGE_CANVAS_CURSOR,this.defaultCursor)}}}},N.prototype._calDistance=function(b){return Math.sqrt(Math.pow(b[0].pageX-b[1].pageX,2)+Math.pow(b[0].pageY-b[1].pageY,2))},N.prototype.onDocumentMouseup=function(b){var D;if(this._mousedown){if(1===this.opMode){if(this.tabItem&&"single"===this.tabItem.disMode){var O=this.tabItem.getCurPage();if(O){O.cropMng.onEndHandler();var W=this.tabItem.cur,z=O.cropMng.getRectArr();z.length>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_SELECTED,W,z),se.prototype._emit.call(this,"_onRenderBoxes")}}}else if(0===this.opMode){if(this.clickZoom&&this._pageX===b.pageX&&this._pageY===b.pageY){var ve=this.getPosition();this._zoomTo(this.zoom*this.zoomInDelta,!1,b.pageX-ve.left,b.pageY-ve.top),se.prototype._emit.call(this,"_onRender")}this.allowSlide&&(null===(D=this.slide)||void 0===D||D.endHandler(b)),this.endHandler(b.timeStamp)}this._mousedown=!1}},N.prototype.onCanvasWheel=function(b){this.isSliding||this._onWheelHandler(b)},N.prototype.onCanvasScroll=function(b){b&&b.target&&(this._scrollTo(b.target.scrollLeft,b.target.scrollTop,!1),se.prototype._emit.call(this,"_onRender"),se.prototype._emit.call(this,"_onRenderBoxes"))},N.prototype._onWheelHandler=function(b){b.cancelable&&b.preventDefault();var D,O=0;D=b.wheelDelta?b.wheelDelta:-b.deltaY,b.ctrlKey?(O=D>0?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(D,b.timeStamp,b.pageX,b.pageY),se.prototype._emit.call(this,"_onRender"),se.prototype._emit.call(this,"_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&se.prototype._emit.call(this,"_getSlidePages")):b.shiftKey?0!==this._maxSrL&&(O=D<0?30:-30,(0!==this._srL&&O<0||this._srL!==this._maxSrL&&O>0)&&(this._scrollTo(this.scrL+O,this.scrT,!1),se.prototype._emit.call(this,"_onRender"),se.prototype._emit.call(this,"_onRenderBoxes"))):0!==this._maxSrT&&(O=D<0?30:-30,(0!==this._srT&&O<0||this._srT!==this._maxSrT&&O>0)&&(this._scrollTo(this.scrL,this.scrT+O,!1),se.prototype._emit.call(this,"_onRender"),se.prototype._emit.call(this,"_onRenderBoxes")))},N.prototype.checkMouseOverPage=function(b){if(!this.tabItem)return!1;var D=this.tabItem.getCurPage();if(!D)return!1;var O=this.getMouseCoordinate(b),W=this.toPageCoordinate(O.x,O.y),z=W.x,ve=W.y;return z>=0&&z<=D.naturalWidth&&ve>=0&&ve<=D.naturalHeight},N.prototype.toCanvasCoordinate=function(b,D){var O=this.tabItem.getCurPage();return{x:b=b*this.zoom+O.style.left-this.scrL,y:D=D*this.zoom+O.style.top-this.scrT}},N.prototype.toPageCoordinate=function(b,D){var O=this.tabItem.getCurPage();return{x:b=(b-O.style.left+this.scrL)/this.zoom,y:D=(D-O.style.top+this.scrT)/this.zoom}},N.prototype.getMouseCoordinate=function(b){var D=this.cvsMng.mainCvs.canvas.getBoundingClientRect();return{x:(void 0!==b.clientX?b.clientX:b.changedTouches[0].clientX)-D.left,y:(void 0!==b.clientY?b.clientY:b.changedTouches[0].clientY)-D.top}},N.prototype._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},N.prototype._initScroller=function(){this.callback=function(b,D,O){this.scrL=b,this.scrT=D,this.zoom=O,this.tabItem&&(this.tabItem.scrL=b,this.tabItem.scrT=D,this.tabItem.zoom=O)}.bind(this),this._setValidArea(),this._setScrollerPosition()},N.prototype.setValidArea=function(b,D,O,W){b===+b&&(this._outerWidth=b),D===+D&&(this._outerHeight=D),O===+O&&(this._innerWidth=O),W===+W&&(this._innerHeight=W),this.calcMaxScrollValue()},N.prototype.calcMaxScrollValue=function(b){void 0===b&&(b=this._zoom),this.tabItem&&this.tabItem.getCurPage()&&(this._maxSrL=Math.round(Math.max(this.virW-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(this.virH-this._outerHeight,0)))},N.prototype.setPosition=function(b,D){this._outerLeft=b||0,this._outerTop=D||0},N.prototype.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},N.prototype.setSnapSize=function(b,D){this._snapWidth=b,this._snapHeight=D},N.prototype.activatePull=function(b,D,O,W){this._pullHeight=b,this._pullStart=W,this._pullActivate=D,this._pullDeactivate=O},N.prototype.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},N.prototype.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},N.prototype.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},N.prototype.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},N.prototype._zoomTo=function(b,D,O,W,z){if(!this.zooming||"continuous"===this.disMode)return!1;z&&(this._zoomComplete=z),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0===O&&(O=this._outerWidth/2),void 0===W&&(W=this._outerHeight/2);var ve=this._zoom;if(b=Math.max(Math.min(b,this.maxZoom),this.minZoom),"single"===this.disMode){this.calcMaxScrollValue(b);var xe=(O+this._srL)*b/ve-O,Me=(W+this._srT)*b/ve-W;return xe>this._maxSrL?xe=this._maxSrL:xe<0&&(xe=0),Me>this._maxSrT?Me=this._maxSrT:Me<0&&(Me=0),this._innerWidth<this._outerWidth&&(xe=this._maxSrL/2),this._innerHeight<this._outerHeight&&(Me=this._maxSrT/2),this.publish(xe,Me,b,D),!0}},N.prototype._zoomBy=function(b,D,O,W,z){return this._zoomTo(this._zoom*b,D,O,W,z)},N.prototype._scrollTo=function(b,D,O,W){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0!==W&&W!==this._zoom?this.zooming&&(b*=W,D*=W,this.calcMaxScrollValue(W)):W=this._zoom,this.scrollX?this.paging?b=Math.round(b/this._outerWidth)*this._outerWidth:this.snapping&&(b=Math.round(b/this._snapWidth)*this._snapWidth):b=this._srL,this.scrollY?this.paging?D=Math.round(D/this._outerHeight)*this._outerHeight:this.snapping&&(D=Math.round(D/this._snapHeight)*this._snapHeight):D=this._srT,b=Math.max(Math.min(this._maxSrL,b),0),D=Math.max(Math.min(this._maxSrT,D),0),b===this._srL&&D===this._srT&&(O=!1),this._isProcessing||this.publish(b,D,W,O)},N.prototype._scrollBy=function(b,D,O){this._scrollTo((this._isAnimating?this._futureLeft:this._srL)+(b||0),(this._isAnimating?this._futureTop:this._srT)+(D||0),O)},N.prototype.startHandler=function(b,D){var O,W;void 0!==b.length&&(D instanceof Date&&(D=D.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===b.length,this._isSingleTouch?(O=b[0].pageX,W=b[0].pageY):(O=Math.abs(b[0].pageX+b[1].pageX)/2,W=Math.abs(b[0].pageY+b[1].pageY)/2),this._startTouchLeft=O,this._startTouchTop=W,this._startZoom=this._zoom,this._lastTouchLeft=O,this._lastTouchTop=W,this._lastScale=1,this._lastTouchMove=D,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},N.prototype.moveHandler=function(b,D,O){if(void 0!==b.length&&(D instanceof Date&&(D=D.valueOf()),this._isProcessing)){var W,z;1===b.length?(W=b[0].pageX,z=b[0].pageY):(W=Math.abs(b[0].pageX+b[1].pageX)/2,z=Math.abs(b[0].pageY+b[1].pageY)/2);var ve=this._position;if(this._isDragging){var xe=W-this._lastTouchLeft,Me=z-this._lastTouchTop,J=this._srL,Ke=this._srT,et=this._zoom;if(void 0!==O&&this.zooming){var rt=et;if(et=et/this._lastScale*O,rt!==(et=Math.max(Math.min(et,this.maxZoom),this.minZoom))){this._setScrollerPosition();var ot=W-this._outerLeft,it=z-this._outerTop;J=(ot+J)*et/rt-ot,Ke=(it+Ke)*et/rt-it,this.calcMaxScrollValue(et)}}this._enableScrollX&&((J-=xe*this.speedDelta)>this._maxSrL||J<0)&&(this.bouncing?J+=xe/2*this.speedDelta:J=Math.max(Math.min(this._maxSrL,J),0)),this._enableScrollY&&((Ke-=Me*this.speedDelta)>this._maxSrT||Ke<0)&&(this.bouncing?(Ke+=Me/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&Ke<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&Ke>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):Ke=Math.max(Math.min(this._maxSrT,Ke),0)),ve.length>60&&ve.splice(0,30),ve.push(J,Ke,D),this.publish(J,Ke,et)}else{var pt=this.locking?3:0,ft=Math.abs(W-this._startTouchLeft),mt=Math.abs(z-this._startTouchTop);this._enableScrollX=this.scrollX&&ft>=pt,this._enableScrollY=this.scrollY&&mt>=pt,ve.push(this._srL,this._srT,D),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(ft>=5||mt>=5),this._isDragging&&(this._interruptedAnimation=!1)}this._lastTouchLeft=W,this._lastTouchTop=z,this._lastTouchMove=D,this._lastScale=O}},N.prototype.endHandler=function(b){if(b instanceof Date&&(b=b.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&b-this._lastTouchMove<=100){for(var D=this._position,O=D.length-1,W=O,z=O;z>0&&D[z]>this._lastTouchMove-100;z-=3)W=z;if(W!==O){var ve=D[O]-D[W],Me=this._srT-D[W-1];this._decVX=(this._srL-D[W-2])/ve*(1e3/60),this._decVY=Me/ve*(1e3/60),Math.abs(this._decVX)>1||Math.abs(this._decVY)>1?this._startDeceleration(b):this._scrollComp&&this._scrollComp()}else this._scrollComp&&this._scrollComp()}else b-this._lastTouchMove>100&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},N.prototype.zoomHandler=function(b,D,O,W){var z=b>0?1.05:.95;return this._setScrollerPosition(),this._zoomTo(this._zoom*z,!1,O-this._outerLeft,W-this._outerTop)},N.prototype.publish=function(b,D,O,W){var z=this;if(this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),W&&this.animating){this._futureLeft=b,this._futureTop=D,this._futureZoom=O;var ve=this._srL,xe=this._srT,Me=this._zoom,J=b-ve,Ke=D-xe,et=O-Me;this._isAnimating=this._start(function(rt,ot,it){it&&(z._srL=ve+J*rt,z._srT=xe+Ke*rt,z._zoom=Me+et*rt,z.callback&&z.callback(b,D,O))},function(rt){return z._isAnimating===rt},function(rt,ot,it){ot===z._isAnimating&&(z._isAnimating=!1),(z._isDecComp||it)&&z._scrollComp&&z._scrollComp(),z.zooming&&(z.calcMaxScrollValue(),z._zoomComplete&&(z._zoomComplete(),z._zoomComplete=null))},this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)}else this._futureLeft=this._srL=b,this._futureTop=this._srT=D,this._futureZoom=this._zoom=O,this.callback&&this.callback(b,D,O),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null))},N.prototype._easeOut=function(b){return Math.pow(b-1,3)+1},N.prototype._easeInOut=function(b){return(b/=.5)<1?.5*Math.pow(b,3):.5*(Math.pow(b-2,3)+2)},N.prototype._startDeceleration=function(b){var D=this;if(this.paging){var O=Math.max(Math.min(this._srL,this._maxSrL),0),W=Math.max(Math.min(this._srT,this._maxSrT),0),z=this._outerWidth,ve=this._outerHeight;this._minDecL=Math.floor(O/z)*z,this._minDecT=Math.floor(W/ve)*ve,this._maxDecL=Math.ceil(O/z)*z,this._maxDecT=Math.ceil(W/ve)*ve}else this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT;var xe=this.snapping?4:.001;this._isDecelerating=this._start(function(Me,J,Ke){var et=D._srL+D._decVX,rt=D._srT+D._decVY;if(!D.bouncing){var ot=Math.max(Math.min(D._maxDecL,et),D._minDecL),it=Math.max(Math.min(D._maxDecT,rt),D._minDecT);ot!==et&&(et=ot,D._decVX=0),it!==rt&&(rt=it,D._decVY=0)}if(Ke?D.publish(et,rt,D._zoom):(D._srL=et,D._srT=rt),!D.paging&&(D._decVX*=.95,D._decVY*=.95),D.bouncing){var pt=0,ft=0,mt=D.penetrationAcceleration,Et=D.penetrationDeceleration;et<D._minDecL?pt=D._minDecL-et:et>D._maxDecL&&(pt=D._maxDecL-et),rt<D._minDecT?ft=D._minDecT-rt:rt>D._maxDecT&&(ft=D._maxDecT-rt),0!=pt&&(pt*D._decVX<=0?D._decVX+=pt*Et:D._decVX=pt*mt),0!=ft&&(ft*D._decVY<=0?D._decVY+=ft*Et:D._decVY=ft*mt)}},function(){return Math.abs(D._decVX)>=xe||Math.abs(D._decVY)>=xe||(D._isDecComp=!0,!1)},function(Me,J,Ke){D._isDecelerating=!1,D._scrollComp&&D._scrollComp(),D._scrollTo(D._srL,D._srT,D.snapping)})},N.prototype._stop=function(b){var D=null!=this._running[b];return D&&(this._running[b]=null),D},N.prototype._isRunning=function(b){return null!=this._running[b]},N.prototype._start=function(b,D,O,W,z){var ve=this,xe=this._time(),Me=xe,J=0,Ke=0,et=this._counter++;if(et%16==0){var rt={};for(var ot in this._running)rt[ot]=!0;this._running=rt}var it=function(pt){var ft=!0!==pt,mt=ve._time();if(!ve._running[et]||D&&!D(et))return ve._running[et]=null,void(O&&O(ve._fps-Ke/((mt-xe)/1e3),et,!1));if(ft)for(var Et=Math.round((mt-Me)/(1e3/ve._fps))-1,Dt=0;Dt<Math.min(Et,4);Dt++)it(!0),Ke++;W&&(J=(mt-xe)/W)>1&&(J=1);var Lt=z?z(J):J;!1!==b(Lt,mt,ft)&&1!==J||!ft?ft&&(Me=mt,Object(s.D)(it)):(ve._running[et]=null,O&&O(ve._fps-Ke/((mt-xe)/1e3),et,1===J||null==W))};return this._running[et]=!0,Object(s.D)(it),et},N.prototype.dispose=function(){var b,D;se.prototype.dispose.call(this),this._db=null,null===(b=this.cvsMng)||void 0===b||b.dispose(),this.cvsMng=null,null===(D=this.slide)||void 0===D||D.dispose(),this.slide=null,this.hermite=null,this.isDisposed=!0},N}(a.a),P=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),F=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},k=function(se){function N(b,D){var O=se.call(this,D)||this;return O.uid=null,O._tbPub=null,O._size=null,O._mouseShape="pointer",O._direction="vertical",O._sequence=-1,O._location="horizontal",O._showThb=!0,O._showPNum=!1,O._multipleMode=!1,O._showSltBox=!1,O._showRmBtn=!1,O._fullThb=!1,O._dragging=!0,O._resizing=!0,O._keyboard=!1,O._rows=4,O._columns=1,O._bg="rgba(67,66,70,1)",O._border="1px solid rgba(27,27,29,1)",O._pageBg="rgba(0,0,0,0)",O._pageBorder="1px solid rgba(128,128,128,1)",O._sltPBg="rgba(127,133,251,1)",O._sltPBorder="1px solid rgba(255,0,0,1)",O._hvPBg="rgba(196,250,248,1)",O._hvPBorder="1px solid rgba(255,255,0,1)",O._placeholderBg="rgba(255,192,203,1)",O._pageMargin=10,O._autoChangeIdx=!1,O.uid=Object(s.I)(11),O._tbPub=new a.a,O.init(b),O._tbPub._on(o.d.CHANGE_THUMBNAIL_VIEW_PROP,function(W){for(var z in W)O[z]=W[z]}),O}return P(N,se),N.prototype.init=function(b,D){var O=this;void 0===D&&(D=[]),Object.keys(b).forEach(function(W){var z=O[W];z!==b[W]&&(O[W]=b[W],z===O[W]&&D.push(W))})},N.prototype._err=function(b){this._emit(o.d.ERROR,b)},N.prototype._ok=function(){this._emit(o.d.ERROR,o.a.OK)},Object.defineProperty(N.prototype,"size",{get:function(){return this._size},set:function(b){Object(s.x)(b)?(this._size=b,this._notifyUi({size:b}),this._ok()):this._err(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"mouseShape",{get:function(){return this._mouseShape},set:function(b){Object(s.y)(b)?(this._mouseShape=b,this._notifyUi({mouseShape:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pubsub",{get:function(){return this._tbPub.getPublishSubscribe()},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"scrollDirection",{get:function(){return this._direction},set:function(b){Object(s.y)(b)?(this._direction=b,this._notifyUi({scrollDirection:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"sequence",{get:function(){return this._sequence},set:function(b){Object(s.v)(b)?(this._sequence=b,this._notifyUi({sequence:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"location",{get:function(){return this._location},set:function(b){Object(s.y)(b)?(this._location=b,this._notifyUi({location:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showThumbnail",{get:function(){return this._showThb},set:function(b){Object(s.n)(b)?(this._showThb=b,this._notifyUi({showThumbnail:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showPageNumber",{get:function(){return this._showPNum},set:function(b){Object(s.n)(b)?(this._showPNum=b,this._notifyUi({showPageNumber:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"multipleMode",{get:function(){return this._multipleMode},set:function(b){Object(s.n)(b)?(this._multipleMode=b,this._notifyUi({multipleMode:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showSelectBox",{get:function(){return this._showSltBox},set:function(b){Object(s.n)(b)?(this._showSltBox=b,this._notifyUi({showSelectBox:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showRemoveBtn",{get:function(){return this._showRmBtn},set:function(b){Object(s.n)(b)?(this._showRmBtn=b,this._notifyUi({showRemoveBtn:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"fullThumbnail",{get:function(){return this._fullThb},set:function(b){Object(s.n)(b)?(this._fullThb=b,this._notifyUi({fullThumbnail:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"rows",{get:function(){return this._rows},set:function(b){Object(s.v)(b)?b<=0?this._err(o.a.PARAMETER_RANGE):(this._rows=b,this._notifyUi({rows:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"columns",{get:function(){return this._columns},set:function(b){Object(s.v)(b)?b<=0?this._err(o.a.PARAMETER_RANGE):(this._columns=b,this._notifyUi({columns:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"background",{get:function(){return this._bg},set:function(b){Object(s.p)(b)?(this._bg=b,this._notifyUi({background:b}),this._ok()):this._err(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"border",{get:function(){return this._border},set:function(b){Object(s.o)(b)?(this._border=b,this._notifyUi({border:b}),this._ok()):this._err(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageBackground",{get:function(){return this._pageBg},set:function(b){Object(s.p)(b)?(this._pageBg=b,this._notifyUi({pageBackground:b}),this._ok()):this._err(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageBorder",{get:function(){return this._pageBorder},set:function(b){Object(s.o)(b)?(this._pageBorder=b,this._notifyUi({pageBorder:b}),this._ok()):this._err(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectedPageBackground",{get:function(){return this._sltPBg},set:function(b){Object(s.p)(b)?(this._sltPBg=b,this._notifyUi({selectedPageBackground:b}),this._ok()):this._err(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectedPageBorder",{get:function(){return this._sltPBorder},set:function(b){Object(s.o)(b)?(this._sltPBorder=b,this._notifyUi({selectedPageBorder:b}),this._ok()):this._err(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"hoverPageBackground",{get:function(){return this._hvPBg},set:function(b){Object(s.p)(b)?(this._hvPBg=b,this._notifyUi({hoverPageBackground:b}),this._ok()):this._err(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"hoverPageBorder",{get:function(){return this._hvPBorder},set:function(b){Object(s.o)(b)?(this._hvPBorder=b,this._notifyUi({hoverPageBorder:b}),this._ok()):this._err(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"placeholderBackground",{get:function(){return this._placeholderBg},set:function(b){Object(s.p)(b)?(this._placeholderBg=b,this._notifyUi({placeholderBackground:b}),this._ok()):this._err(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageMargin",{get:function(){return this._pageMargin},set:function(b){Object(s.x)(b)?(this._pageMargin=b,this._notifyUi({pageMargin:b}),this._ok()):this._err(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowPageDragging",{get:function(){return this._dragging},set:function(b){Object(s.n)(b)?(this._dragging=b,this._notifyUi({allowPageDragging:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowResizing",{get:function(){return this._resizing},set:function(b){Object(s.n)(b)?(this._resizing=b,this._notifyUi({allowResizing:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowKeyboardControl",{get:function(){return this._keyboard},set:function(b){Object(s.n)(b)?(this._keyboard=b,this._notifyUi({allowKeyboardControl:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"autoChangeIndex",{get:function(){return this._autoChangeIdx},set:function(b){Object(s.n)(b)?(this._autoChangeIdx=b,this._notifyUi({autoChangeIndex:b}),this._ok()):this._err(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),N.prototype.scrollTo=function(b){this.emit(o.f.SCROLL_TO,b,!1)},N.prototype.setViewMode=function(b,D){return Object(s.v)(b)&&Object(s.v)(D)?b<0||D<0?(this._err(o.a.PARAMETER_RANGE),!1):(this._rows=D,this._columns=b,this.emit(o.f.SET_VIEW_MODE,b,D),!0):(this._err(o.a.PARAM_TYPE),!1)},N.prototype.getConfig=function(){return{pubsub:this._tbPub.getPublishSubscribe(),uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showSelectBox:this.showSelectBox,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin}},N.prototype.on=function(b,D){return Object(s.y)(b)&&Object(s.s)(D)?(this._tbPub._on(b,D),!0):(this._err(o.a.PARAM_TYPE),!1)},N.prototype.emit=function(b){for(var D,O=[],W=1;W<arguments.length;W++)O[W-1]=arguments[W];return Object(s.y)(b)?((D=this._tbPub)._emit.apply(D,F([b],O)),!0):(this._err(o.a.PARAM_TYPE),!1)},N.prototype.off=function(b,D){return Object(s.y)(b)?(this._tbPub._off(b,D),!0):(this._err(o.a.PARAM_TYPE),!1)},N.prototype._notifyUi=function(b){this.emit(o.f.UPDATE_THUMBNAIL_PROP,b)},N.prototype.dispose=function(){var b;se.prototype.dispose.call(this),null===(b=this._tbPub)||void 0===b||b.dispose(),this._tbPub=null},N}(a.a),w=t(3),S=function(){function se(N,b){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=b,this.uid=N.uid,this.naturalWidth=N.naturalW,this.naturalHeight=N.naturalH,this.cropMng=new w.a(this.naturalWidth,this.naturalHeight),this.editor2d=new l}return se.prototype.setBorder=function(N,b,D){this.style.borderWidth=N,b&&(this.style.borderType=b),D&&(this.style.borderColor=D)},se.prototype.setSize=function(N,b){this.style.width=N||1,this.style.height=b||1},se.prototype.setPosition=function(N,b){this.style.left=N,this.style.top=b},se.prototype.clearSelectionBoxes=function(){this.selectionBoxes=[]},se.prototype.pushSelectionBox=function(N){this.selectionBoxes.push(N)},se.prototype.setNaturalSize=function(N,b){var D=this._db.getMid(this.uid);D&&(D.tempWidth=N,D.tempHeight=b),this.naturalWidth=N,this.naturalHeight=b,this.cropMng.setPageSize(N,b)},se.prototype.boxCount=function(){return this.cropMng.cropBoxes.length},se}(),L=function(){function se(N){this.uid=N.uid,this.chs=N.chs||[]}return se.prototype.append=function(N){return-1===this._idxOf(N)&&(this.chs.push(N),!0)},se.prototype.insert=function(N,b){return!(b<0||b>=this.chs.length||(this.chs.splice(b,0,N),0))},se.prototype.remove=function(N){var b=this._idxOf(N);return-1!==b&&(this.chs.splice(b,1),!0)},se.prototype.clear=function(){return this.chs=[],!0},se.prototype.move=function(N,b){if(N===b)return!0;var D=this.chs.splice(N,1)[0];return this.chs.splice(b,0,D),!0},se.prototype.switch=function(N,b){if(N===b)return!0;var D=this.chs[N];return this.chs[N]=this.chs[b],this.chs[b]=D,!0},se.prototype.reorder=function(N){var b=N.length,D=[],O=0;if(this.chs.length!==b||0===b)return!1;for(var W=0;W<b;W++)N[W]===W&&O++;if(O===b)return!0;for(var z=0;z<b;z++)D[z]=this.chs[N[z]];for(var ve=0;ve<b;ve++)this.chs[ve]=D[ve];return!0},se.prototype._idxOf=function(N){for(var b=Object(s.y)(N),D=0,O=this.chs.length;D<O;D++)if(b&&this.chs[D]===N||!b&&this.chs[D].uid===N.uid)return D;return-1},se}(),U=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),Z=function(se){function N(b){var D=se.call(this,b)||this;return D.cur=-1,D.total=0,D.slt=[],D.chs=[],D.thbs=[],D.scrL=0,D.scrT=0,D.virW=0,D.virH=0,D.iMargin=0,D.oMargin=0,D.zoom=1,D.fitType="window",D.clickZoom=!1,D.isFreeCrop=!1,D.disMode="single",D.opMode=0,D.name=b.name,D.type=b.type,D.chs=b.chs,D.zoom=b.zoom,D.fitType=b.fitType,D.disMode=b.disMode,D.opMode=b.opMode,D}return U(N,se),N.prototype.getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},N.prototype.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},N.prototype.idxPage=function(b){return this.chs[b]},N.prototype.uidPage=function(b){if(!b)return null;for(var D=0;D<this.total;D++)if(this.chs[D].uid===b)return this.chs[D];return null},N.prototype.uid2Idx=function(b){for(var D=0;D<this.total;D++)if(this.chs[D].uid===b)return D;return-1},N.prototype.setCur=function(b){return!(b<0||b>=this.total||(this.cur=b,0))},N.prototype.append=function(b){return this.chs.push(b),!0},N.prototype.remove=function(b){var D=this.chs.length;if(0===D)return!1;if(1===D)return this.chs[0].uid===b&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0);var O=this.uid2Idx(b);return-1!==O&&((O===this.cur&&O===this.total-1||O<this.cur)&&this.cur--,this.chs.splice(O,1),this.slt=this.chs[this.cur]?[this.chs[this.cur].uid]:[],this.total--,!0)},N.prototype.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,this.total=0,!0},N.prototype.getSlt=function(){return this.slt.slice()},N.prototype.setSlt=function(b){var D=b.length;if(0===D)return this.slt=b,this.cur=-1,!0;var O=this.uid2Idx(b[D-1]);return-1!==O&&(this.slt=b,this.cur=O,!0)},N.prototype.move=function(b,D){return se.prototype.move.call(this,b,D),this.setSlt([this.chs[D].uid])},N.prototype.switch=function(b,D){return se.prototype.switch.call(this,b,D),this.cur===b?this.setSlt([this.chs[D].uid]):this.cur===D&&this.setSlt([this.chs[b].uid]),!0},N.prototype.next=function(){return 0===this.total?-1:(this.total-this.cur>1&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},N.prototype.prev=function(){return 0===this.total?-1:(this.cur>0&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},N.prototype.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},N.prototype.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},N.prototype.goto=function(b){return 0===this.total?-1:(b!==this.cur&&(this.cur=b=b<this.total?b>=0?b:0:this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},N}(L),ne=function(){function se(N){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}return se.prototype.addTab=function(N){var b=this.checkTab(N.uid),D=null;if(-1!==b)D=this.tabs[b];else{var O=Object.assign(this.dfConfig,N);D=new Z(O),"single"===this.mode?this.tabs=[D]:this.tabs.push(D)}return D},se.prototype.getTab=function(N){var b=this.checkTab(N);return-1===b?null:this.tabs[b]},se.prototype.checkTab=function(N){for(var b=this.tabs.length,D=0;D<b;D++)if(this.tabs[D].uid===N)return D;return-1},se.prototype.getCurTab=function(){return this.getTab(this.curTab)},se.prototype.setCurTab=function(N){if(~this.checkTab(N))return this.curTab=N,!0},se.prototype._moveToTop=function(N,b){if(b>=0&&b<N.length){var D=N.splice(b,1)[0];N.push(D)}},se.prototype.closeTab=function(N){var b=this.checkTab(N);return-1!==b&&(this._opStack.pop(),this.tabs.splice(b,1),this.curTab=0===this.tabs.length?null:this._opStack[this._opStack.length-1],!0)},se.prototype.setMode=function(N){return("single"===N||"multiple"===N)&&(this.mode=N,!0)},se.prototype.removePage=function(N,b){var D=this.checkTab(N);return-1!=D&&this.tabs[D].remove(b)},se.prototype.dispose=function(){},se}(),oe=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),ue=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},X=function(se){function N(b,D,O,W,z,ve,xe,Me,J){var Ke=se.call(this,D)||this;return Ke.showLatest=!0,Ke.isMainViewVisible=!0,Ke.isThumbnailVisible=!0,Ke.thbViews=[],Ke.tabMode="single",Ke.autoOpen=!0,Ke.keepZoom=!0,Ke.cors=!0,Ke.minPicWidth=800,Ke.minPicHeight=800,Ke.saveType="image/jpeg",Ke.saveQuality=1,Ke.useHermite=!0,Ke.rows=1,Ke.columns=1,Ke.slideTimer=null,Ke.showTabTimer=null,Ke.isDisposed=!1,Ke.saveCanvas=J,Ke.uid=W,Ke._mPub=new a.a(O),Ke._db=xe,Ke._tabMng=new ne(b),(Object(s.t)()||Object(s.u)())&&(Ke.useHermite=!1),Ke._gpc=new x(b,Ke._db,Ke._oPub,W,Ke.useHermite,z,ve,Me),Ke._initEvent(),Ke._gpc.slide.bindCb(function(et){et===o.e.PREVIOUS?Ke.prevPage():et===o.e.NEXT&&Ke.nextPage(),se.prototype._emit.call(Ke,"slideFinished",et),Ke.setFitType("window")}),Ke}return oe(N,se),N.prototype.drawSltBox=function(){if("single"===this._gpc.disMode){var b=this._tabMng.getCurTab();if(b){var D=b.getCurPage();D&&this._gpc.drawSltBox(D)}}},N.prototype.render=function(b,D){b=b||!1,D=D||!1;var O=this._tabMng.getCurTab();if(!O)return!1;this._gpc._layoutSingle(O,b,D);var W=O.getCurPage();return W?(this._checkDisplay(O),this._showPage(W.uid,O.uid),this._ok(),!0):(this._gpc.clearCanvas(),this._err(o.a.PAGE_NOT_EXIST),!1)},N.prototype.tabHandler=function(b,D,O){var W=this;void 0===D&&(D=null);var z=b.chs,ve=z.length,xe=null,Me=0,J=this.getTab(b.uid),Ke=this.getCurTab();if(Ke&&!J&&"single"===this.tabMode&&O&&this._emitM(o.b.REMOVE_VIEWER_UID,Ke.uid,this.uid),!Ke||!J&&O)(J=this._tabMng.addTab({uid:b.uid,name:b.name,type:b.type,chs:[]})).total=ve,J.cur=this.showLatest?ve-1:ve>0?0:-1,xe=J;else{if(!J)return this._emitM(o.b.REMOVE_VIEWER_UID,b.uid,this.uid),null;Me=ve-J.chs.length,z=b.chs.slice(J.total),J.total=ve,(Ke.uid===J.uid||O)&&(xe=J)}if(null!==D&&(z=b.chs.slice(D,D+Me)),this.showLatest?(this.clearBox(),J.cur=null!==D?D+Me-1:ve-1):ve>0&&-1===J.cur&&(J.cur=0),z.forEach(function(rt,ot){var it=W._db.getMetadata(rt);if(it){var pt=new S({uid:rt,naturalW:it.width,naturalH:it.height},W._db);null!==D?J.insert(pt,D+ot):J.append(pt)}}),this.showLatest){var et=J.idxPage(J.cur);et&&J.setSlt([et.uid])}return xe},N.prototype.showTab=function(b,D){var O=this;void 0===D&&(D="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer);var W=b.uid;this._tabMng.setCurTab(W),se.prototype._emit.call(this,o.f.TAB_CHANGED,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(b),this._gpc.initGraphic(b),(!b.total||b.cur<0)&&this._gpc.clearCanvas(),this._gpc._layoutSingle(b,!0),("remove"!=D||b.total)&&(this.showTabTimer=setTimeout(function(){O.isDisposed||(O._checkDisplay(b),b.chs.length||O._gpc.offScreenCanvas.reset(),b.chs.forEach(function(z){O._showPage(z.uid,W)}))},20),this.getSlidePages()),this.__slt([b.cur]),this.__buffer(b,D),this.__pager()},N.prototype.onTabChanged=function(){se.prototype._emit.call(this,o.f.TAB_CHANGED,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},N.prototype.updateSync=function(b,D,O){var W=this,z=null;if(!(z=D?this.getTab(D):this.getCurTab()))return this._err(o.a.IMG_NOT_EXIST),!1;for(var ve=z.chs,xe=new S({uid:b,naturalW:O.metadata.width||0,naturalH:O.metadata.height||0},this._db),Me=null,J=0;J<ve.length;J++)if(ve[J].uid===b){Me=ve[J],ve[J]=xe;break}if(this._tabMng.curTab===z.uid){z.getCurUid()===b&&this._gpc.offScreenCanvas.reset();var Ke=!0;Me.naturalHeight===xe.naturalHeight&&Me.naturalWidth===xe.naturalWidth&&(Ke=!1),this._gpc._layoutSingle(z,Ke),this._gpc.initGraphic(z),this._checkDisplay(z),ve.forEach(function(et){W._showPage(et.uid,z.uid,!0)}),this.getSlidePages(),this.__buffer(z,"modify")}},N.prototype.setTabMode=function(b){-1!==["single","multiple"].indexOf(b)&&(this.tabMode=b)},N.prototype.getSlidePages=function(){var b=this,D=this._tabMng.getCurTab();D&&"continuous"!==D.disMode&&(null!==this.slideTimer&&clearTimeout(this.slideTimer),this.slideTimer=setTimeout(function(){if(!b.isDisposed){var O=D.cur,W=[],z=D.total,ve=[];0!==z&&(O-1>=0?(W.push(O-1),ve.push(O-1)):ve.push(-1),W.push(O),ve.push(O),O+1<z?(W.push(O+1),ve.push(O+1)):ve.push(-1)),b._gpc&&b._gpc.slide&&(b._gpc.slide.targetIndexes=ve);for(var xe=W.length,Me=0;Me<xe;Me++){var J=b.idxUid(W[Me]);b._emitM(o.b.LOAD_PAGE,J)}}},200))},N.prototype._setSlidePages=function(){var b=this,D=this.getCurTab();if(D&&"single"===D.disMode){var O=D.cur,W=D.total,z=[],ve=[],xe=null;return ve=[null,null,null],0!==W&&(O-1>=0&&(ve[0]=O-1),ve[1]=O,O+1<W&&(ve[2]=O+1)),ve.forEach(function(Me){xe=b._calcSlidePage(Me,O,D),z.push(xe)}),this._gpc.setSlidePages(z),z}},N.prototype._calcSlidePage=function(b,D,O){var W={width:0,height:0,index:-1,uid:null,url:""};if(null===b)return W;var z=this.idxUid(b),ve=this._db.getMid(z),xe=O.idxPage(b);if(!ve||!xe)return W;var Me=xe.style.width,J=xe.style.height;if(b!==D){var Ke=this._gpc.calcZoomForSlide(xe.naturalWidth||1,xe.naturalHeight||1);Me=(xe.naturalWidth||0)*Ke,J=(xe.naturalHeight||0)*Ke}return{width:Me,height:J,index:b,uid:z,url:ve.minData||""}},N.prototype._showAllThb=function(b,D){var O=this,W=b.chs||[],z=b.uidPage(D);z&&(W=[z]);var ve=[];W.forEach(function(xe){var Me=O._db.getMid(xe.uid),J={uid:xe.uid,data:Me.minData,tags:Me.getTags()};ve.push(J)}),se.prototype._emit.call(this,o.f.THUMBNAIL_CHANGED,ve)},N.prototype.showThbItem=function(b){var D=this.getCurTab();if(D){var O=D.uidPage(b),W=this._db.getMid(b);if(O&&W){var z={uid:b,data:W.minData,tags:W.getTags()};se.prototype._emit.call(this,o.f.UPDATE_THB_ITEM,z),this._setSlidePages()}}},N.prototype.needRender=function(b){var D=this._db.getMid(b);return!(!D||D.show.indexOf(this.uid)<0)},N.prototype.renderMainPage=function(b){this.needRender(b)&&this._db.getMid(b).img&&this._gpc.render(b)},N.prototype._showPage=function(b,D,O){var W=this;if(D===this._tabMng.curTab&&this.needRender(b)){var z=this._db.getMid(b);if(O||!z.img)return O||!z.active?(z.active=!0,void this._db.getDataAsync(b).then(function(ve){if(W.needRender(b)){var xe=s.a.createURLWithType(ve.oriData);z.oriData=xe.data,z.oriType=xe.type;var Me=new Image;W.cors&&(Me.crossOrigin="anonymous"),Me.src=z.oriData,Me.onload=function(){if(!W.isDisposed&&(Me.onload=null,Me.onerror=null,W.needRender(b))){if(O){if(!W._gpc)return;W._gpc.offScreenCanvas.reset()}var J=W._db.getMid(b);J.img=Me,W._emitM("dvsRenderMainPage",J.show.slice(),b)}},Me.onerror=function(){Me.onload=null,Me.onerror=null}}}).catch(function(ve){z.active=!1})):void 0;null==this||this._gpc.render(b)}},N.prototype._checkDisplay=function(b){var D=this;if("single"===b.disMode){var O=b.chs;if(!b.getCurPage())return;O.forEach(function(W,z){var ve=D._db.getMid(W.uid);if(ve){var xe=D._gpc.checkDisplay(W.uid,b),Me=ve.show,J=Me.indexOf(D.uid);xe?J<0&&Me.push(D.uid):(J>-1&&Me.splice(J,1),0===Me.length&&("object"===ve.oriType&&s.a.revokeObjectURL(ve.oriData),ve.active=!1,ve.load=!1,ve.img=null,ve.oriData=null))}})}},N.prototype.getTabManager=function(){return this._tabMng},N.prototype.closeTab=function(b){if(this._tabMng.closeTab(b)){if(this._tabMng.curTab)this.showTab(this._tabMng.getCurTab(),"add");else{var D=new Z({uid:"",name:"empty",type:"",chs:[]});this.showTab(D,"remove")}return se.prototype._emit.call(this,"_onCloseTab",b),!0}return!1},N.prototype.closeCurTab=function(){},N.prototype.emptyTab=function(b){},N.prototype.getCurrentTabId=function(){return this._tabMng.curTab},N.prototype.getTab=function(b){return this._tabMng.getTab(b)},N.prototype.getCurTab=function(){return this._tabMng?this._tabMng.getCurTab():null},N.prototype.getCurPageUids=function(){var b=this.getCurTab();return b?b.chs.map(function(D){return D.uid}):[]},N.prototype.getCurPageCount=function(){var b=this.getCurTab();return b?b.total:0},N.prototype.createThumbnailView=function(b){void 0===b&&(b={});var D=new k(b,this._mPub.getPublishSubscribe());return this.thbViews.push(D),D},N.prototype.removeThumbnailView=function(b){if(!b)return this.thbViews=[],!0;for(var D=0;D<this.thbViews.length;D++)if(this.thbViews[D].uid===b)return this.thbViews.splice(D,1),!0;return!1},N.prototype.getThumbnailViewById=function(b){if(!this._chStr(b))return null;for(var D=0;D<this.thbViews.length;D++)if(this.thbViews[D].uid===b)return this._ok(),this.thbViews[D];return null},N.prototype.remove=function(b,D,O){if(void 0===D&&(D=!0),!Object(s.m)(b))return this._err(o.a.PARAM_TYPE),!1;var W=this._tabMng.tabs;b.forEach(function(ve){W.forEach(function(xe){xe.remove(ve)})});var z=this.getCurTab();return z?(O&&O!==z.uid||(this.showTab(z,"remove"),0===z.chs.length&&(this._setSlidePages(),this._gpc.clearCanvas(),se.prototype._emit.call(this,o.f.SET_SCROLLER_SIZE,{width:1,height:1,x:1,y:1}))),D&&this._emitM(o.b.REMOVE_PAGE,this.uid,z,b),this._ok(),!0):void 0},N.prototype.rmAll=function(b){void 0===b&&(b=!0);var D=[],O=this.getCurTab();return O?(O.chs.forEach(function(W){D.push(W.uid)}),this.remove(D,b,O.uid)):(this._ok(),!0)},N.prototype.setBox=function(b,D){var O=this.getCurTab();if(!O)return!1;var W=O.getCurPage();if(void 0===W)return!1;var z=null;Object(s.m)(b)?z=b:Object(s.w)(b)&&(z=[b]),D||W.boxCount()>0&&(W.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,O.cur));for(var ve=z.length,xe=0;xe<ve;xe++){var Me=z[xe];if(!this._chBox(Me,W.naturalWidth,W.naturalHeight))return!1;W.cropMng.addBox([Me.left,Me.top,Me.left+Me.width,Me.top,Me.left+Me.width,Me.top+Me.height,Me.left,Me.top+Me.height],"bottomRight")}this.drawSltBox();var J=W.cropMng.getRectArr();return J.length>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_SELECTED,O.cur,J),this._ok(),!0},N.prototype._chBox=function(b,D,O){return Object(s.v)(b.left)&&Object(s.v)(b.top)&&Object(s.v)(b.width)&&Object(s.v)(b.height)?b.left<0||b.top<0||b.width<0||b.height<0?(this._err(o.a.PARAMETER_RANGE),!1):!(b.left>D||b.top>O||b.left+b.width>D||b.top+b.height>O)||(this._err(o.a.PARAMETER_RANGE),!1):(this._err(o.a.PARAMETER_INVALID),!1)},N.prototype.clearBox=function(b){var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),!1;var O=D.getCurPage();return O?(O.boxCount()>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur),O.cropMng.removeBox(b),this.drawSltBox(),this._ok(),!0):(this._err(o.a.PAGE_NOT_EXIST),!1)},N.prototype._clearBox=function(){var b=this.getCurTab();if(!b)return!1;var D=b.getCurPage();return void 0===D?(this._err(o.a.PAGE_NOT_EXIST),!1):(D.boxCount()>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,b.cur),D.cropMng.removeBox(),se.prototype._emit.call(this,o.d.CLEAR_SLT_BOX,b.cur),!0)},N.prototype.setFreeBox=function(b){var D=this.getCurTab();if(!D)return!1;var O=D.getCurPage();if(void 0===O)return!1;O.cropMng.addFreeBox(b),this.drawSltBox();var W=O.cropMng.getRectArr();return W.length>0&&se.prototype._emit.call(this,o.g.PAGE_AREA_SELECTED,D.cur,W),this._ok(),!0},N.prototype.nextPage=function(b){void 0===b&&(b=!0);var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),-1;var O=!1,W=D.cur,z=D.slt.length,ve=D.next();if(-1===ve)return this._err(o.a.IMG_NOT_EXIST),-1;if(W!==D.total-1||z>1){var xe=D.idxPage(W);xe&&xe.boxCount()>0&&(xe.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur)),O=!0,this.__pager(),this.render(O),this.getSlidePages(),b&&this._emitM(o.b.CHANGE_PAGE,this.uid,o.e.NEXT),this.__buffer(D,"shift")}return this.__slt(),this._ok(),ve},N.prototype.prevPage=function(b){void 0===b&&(b=!0);var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),-1;var O=!1,W=D.cur,z=D.slt.length,ve=D.prev();if(-1===ve)return this._err(o.a.IMG_NOT_EXIST),-1;if(0!==W||z>1){var xe=D.idxPage(W);xe&&xe.boxCount()>0&&(xe.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur)),O=!0,this.__pager(),this.render(O),this.getSlidePages(),b&&this._emitM(o.b.CHANGE_PAGE,this.uid,o.e.PREVIOUS),this.__buffer(D,"shift")}return this.__slt(),this._ok(),ve},N.prototype.firstPage=function(b){void 0===b&&(b=!0);var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),-1;var O=!1,W=D.cur,z=D.slt.length,ve=D.first();if(-1===ve)return this._err(o.a.IMG_NOT_EXIST),-1;if(0!==W||z>1){var xe=D.idxPage(W);xe&&xe.boxCount()>0&&(xe.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur)),O=!0,this.__pager(),this.render(O),this.getSlidePages(),b&&this._emitM(o.b.CHANGE_PAGE,this.uid,"first"),this.__buffer(D,"shift")}return this.__slt(),this._ok(),ve},N.prototype.lastPage=function(b){void 0===b&&(b=!0);var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),-1;var O=!1,W=D.cur,z=D.slt.length,ve=D.last();if(-1===ve)return this._err(o.a.IMG_NOT_EXIST),-1;if(W!==D.total-1||z>1){var xe=D.idxPage(W);xe&&xe.boxCount()>0&&(xe.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur)),O=!0,this.__pager(),this.render(O),this.getSlidePages(),b&&this._emitM(o.b.CHANGE_PAGE,this.uid,"last"),this.__buffer(D,"shift")}return this.__slt(),this._ok(),ve},N.prototype.gotoPage=function(b,D){if(void 0===D&&(D=!0),!this._checkIndex(b))return-1;var O=this.getCurTab();if(!O)return this._err(o.a.IMG_NOT_EXIST),-1;var z=O.cur,ve=O.slt.length,xe=O.goto(b);if(-1===xe)return this._err(o.a.IMG_NOT_EXIST),-1;if(z!==b||ve>1){var Me=O.idxPage(z);Me&&Me.boxCount()>0&&(Me.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,O.cur)),this.render(!0),this.getSlidePages(),D&&this._emitM(o.b.CHANGE_PAGE,this.uid,"goto",b),this.__buffer(O,"shift")}return this.__pager(),this.__slt(),this._ok(),xe},N.prototype.__slt=function(b){b||(b=this.getSltIndexes()),se.prototype._emit.call(this,o.f.IMAGE_SELECTED,b),se.prototype._emit.call(this,o.g.IMAGE_SELECTED,b)},N.prototype.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},N.prototype.__pager=function(){var b=this.getCurTab(),D={cur:-1,total:0};b&&(D={cur:b.cur,total:b.total}),se.prototype._emit.call(this,o.f.PAGER_CHANGED,D)},N.prototype.changeTag=function(b){se.prototype._emit.call(this,o.b.TAG_CHANGED,b)},N.prototype.changeDir=function(b){se.prototype._emit.call(this,o.b.TAG_CHANGED,b)},N.prototype.rmPageTag=function(b,D){var O=this._tabMng.getTab(D);return!!O&&(O.remove(b),O.uid===this._tabMng.curTab?(this.showTab(O,"remove"),0===O.chs.length&&this._gpc.clearCanvas(),!0):void 0)},N.prototype.addPageTag=function(b,D){var O=this._tabMng.getTab(D);if(!O)return!1;var W=this._db.getMetadata(b);if(!W)return!1;var z=new S({uid:b,naturalW:W.width,naturalH:W.height},this._db);O.append(z),this.showLatest&&(O.cur=O.total-1),O.uid===this._tabMng.curTab&&this.showTab(O,"add")},N.prototype.emptyTag=function(b){if(!this._tabMng.getTab(b))return!1},N.prototype.renameTag=function(b,D,O){var W=this._tabMng.getTab(O);if(!W)return!1;W.name=D,se.prototype._emit.call(this,o.f.TAB_CHANGED,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},N.prototype.switchPage=function(b,D,O,W){void 0===O&&(O=!0);var z=null;return(z=W?this.getTab(W):this.getCurTab())?!(!this._checkIndex(b)||!this._checkIndex(D)||(z.switch(b,D),this._tabMng.curTab===z.uid&&(this._showAllThb(z),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(z,"shift")),O&&this._emitM(o.b.REORDER_PAGE,this.uid,z,"switch",b,D),this._ok(),0)):(this._err(o.a.IMG_NOT_EXIST),!1)},N.prototype.movePage=function(b,D,O,W){void 0===O&&(O=!0);var z=null;return(z=W?this.getTab(W):this.getCurTab())?!(!this._checkIndex(b)||!this._checkIndex(D)||(z.move(b,D),this._tabMng.curTab===z.uid&&(this._showAllThb(z),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(z,"shift")),O&&this._emitM(o.b.REORDER_PAGE,this.uid,z,"move",b,D),this._ok(),0)):(this._err(o.a.IMG_NOT_EXIST),!1)},N.prototype.reorderPage=function(b,D,O,W){void 0===O&&(O=!0);var z=null;if(!(z=W?this.getTab(W):this.getCurTab()))return this._err(o.a.IMG_NOT_EXIST),!1;var ve=z.getCurPage();if(z.reorder(b),this._tabMng.curTab===z.uid){this._showAllThb(z),this.setSltPages(D,!1);var xe=z.getCurPage();ve&&xe&&ve.uid!==xe.uid&&ve.boxCount()>0&&(ve.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,z.cur))}O&&this._emitM(o.b.REORDER_PAGE,this.uid,z,"reorder",b,D)},N.prototype.uidIdx=function(b){var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),null;if(!this._chStr(b))return null;for(var O=D.chs.length,W=0;W<O;W++)if(D.chs[W].uid===b)return this._ok(),W;return this._err(o.a.PARAMETER_INVALID),null},N.prototype.idxUid=function(b){if(!this._checkIndex(b))return null;var D=this.getCurTab();return D?(this._ok(),D.chs[b].uid):(this._err(o.a.IMG_NOT_EXIST),null)},N.prototype.getRealTimeMetadataByIndex=function(b){if(void 0!==b&&!this._checkIndex(b))return null;var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),null;var O=D.getCurPage();if(void 0!==b&&(O=D.idxPage(b)),!O)return this._err(o.a.IMG_NOT_EXIST),null;var W=this._db.getMetadata(O.uid);return W?((W=Object.assign({},W)).width=O.naturalWidth,W.height=O.naturalHeight,this._ok(),W):null},N.prototype.getMetadata=function(b){if(!this._checkIndex(b))return null;var D=this.idxUid(b);if(!D)return null;this._ok();var O=this._db.getMetadata(D);return O?Object.assign({},O):null},N.prototype.setMetadata=function(b,D){if(!this._checkIndex(b))return!1;if(!Object(s.w)(D))return this._err(o.a.PARAM_TYPE),!1;var O=this.idxUid(b);return!!O&&(this._ok(),this._db.updateMetadata(O,D))},N.prototype.getCurIndex=function(){var b=this._tabMng.getCurTab();return b?(this._ok(),b.cur):(this._err(o.a.IMG_NOT_EXIST),-1)},N.prototype.getNextPageIndex=function(){var b=this._tabMng.getCurTab();if(!b)return this._err(o.a.IMG_NOT_EXIST),-1;if(this._ok(),0===b.total)return-1;var D=b.cur+1;return D>=b.total?-1:D},N.prototype.getPrePageIndex=function(){var b=this._tabMng.getCurTab();if(!b)return this._err(o.a.IMG_NOT_EXIST),-1;if(this._ok(),0===b.total)return-1;var D=b.cur-1;return D<0?-1:D},N.prototype.setCurIndex=function(b,D){if(void 0===D&&(D=!0),!this._checkIndex(b))return!1;var O=this._tabMng.getCurTab();if(!O)return this._err(o.a.IMG_NOT_EXIST),!1;var W=O.getCurUid(),z=this.idxUid(b),ve=!1;if(z!==W){var xe=O.getCurPage();if(xe&&xe.boxCount()>0&&(xe.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,O.cur)),ve=!0,O.setSlt([z]),!O.setCur(b))return!1;this.__pager(),this.render(ve),this.getSlidePages(),D&&this._emitM(o.b.CHANGE_PAGE,this.uid,"cur",b),this.__buffer(O,"shift")}return this.__slt(),this._ok(),!0},N.prototype.setSltPages=function(b,D){var O=this;if(void 0===D&&(D=!0),!Object(s.m)(b))return this._err(o.a.PARAM_TYPE),!1;var W=b.length;0===W&&this._err(o.a.PARAMETER_INVALID);for(var z=0;z<W;z++)if(!this._checkIndex(b[z]))return!1;var xe=this.getCurTab();if(!xe)return this._err(o.a.IMG_NOT_EXIST),!1;var Me=!1,J=xe.getCurUid(),Ke=[];b.forEach(function(ot){var it=O.idxUid(ot);Ke.push(it),J!=it&&(Me=!0)});var et=!1;if(J!==Ke[W-1]){var rt=xe.getCurPage();rt&&rt.boxCount()>0&&(rt.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,xe.cur)),et=!0}return xe.setSlt(Ke),this.__slt(b),this.__pager(),this.render(et),this.getSlidePages(),D&&this._emitM(o.b.CHANGE_PAGE,this.uid,"slt",b),(Me||0==b.length)&&this.__buffer(xe,"shift"),this._ok(),!0},N.prototype.getCustomDataByIndex=function(b){if(!this._checkIndex(b))return null;var D=this.idxUid(b);return D?this.getCustomDataByUid(D):(this._err(o.a.IMG_NOT_EXIST),null)},N.prototype.getCustomDataByUid=function(b){var D=this._db.getMid(b);return D?(this._ok(),D.customData):(this._err(o.a.IMG_NOT_EXIST),null)},N.prototype.getSltIndexes=function(){var b=this,D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),null;var O=D.getSlt(),W=[];return O.forEach(function(z){var ve=b.uidIdx(z);W.push(ve)}),this._ok(),W},N.prototype.selectAll=function(){var b=this.getCurTab();if(!b)return this._err(o.a.IMG_NOT_EXIST),!1;for(var D=[],O=b.chs.length,W=0;W<O;W++)D.push(W);return this.setSltPages(D)},N.prototype.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},N.prototype.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},N.prototype.zoomTo=function(b,D,O){return!Object(s.v)(b)||void 0!==D&&!Object(s.v)(D)||void 0!==O&&!Object(s.v)(O)?(this._err(o.a.PARAM_TYPE),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=b,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(b,!1,D,O))},N.prototype.flip=function(b){var D=this.getCurTab();if(!D)return this._err(o.a.IMG_NOT_EXIST),!1;var O=D.getCurPage();if(!O)return this._err(o.a.IMG_NOT_EXIST),!1;this._clearBox();var W=this._db.getMid(O.uid);if(W){this._releaseMin(W);var z=W.edt.flip(b);this._emitM(o.b.EDIT,"flip",{uid:O.uid,flipObj:z,page:O,interlayerData:W})}return this.getSlidePages(),!0},N.prototype.reset=function(){var b=this,D=this.getCurTab();return D&&D.getCurPage()?(this._clearBox(),D.chs.forEach(function(O){var W=b._db.getMid(O.uid),z=b._db.getMetadata(O.uid);W&&W.edt.all.length>0&&(b._releaseMin(W),O.setNaturalSize(z.width,z.height),W.edt.reset(),b._emitM(o.b.EDIT,"reset",{uid:O.uid}))}),this.getSlidePages(),this._ok(),!0):(this._err(o.a.IMG_NOT_EXIST),!1)},N.prototype.rotate=function(b,D){var O=this,W=this.getCurTab();if(!W)return this._err(o.a.IMG_NOT_EXIST),!1;if(!Object(s.v)(b))return this._err(o.a.PARAM_TYPE),!1;if(void 0!==D){if(!Object(s.v)(D)&&!Object(s.m)(D))return this._err(o.a.PARAM_TYPE),!1;if(Object(s.m)(D))for(var z=D.length,ve=0;ve<z;ve++)if(!this._checkIndex(D[ve]))return!1}var xe=[],Me=W.getCurPage();xe=void 0===D?[W.cur]:Object(s.v)(D)?[D]:D.slice(),this._clearBox();var J=this._gpc.rotateMode;return xe.forEach(function(Ke){var et=O._db.getMid((Me=W.chs[Ke]).uid);if(et){O._releaseMin(et);var rt=et.edt.rotate(b,0,0,J);O._emitM(o.b.EDIT,"rotate",{uid:Me.uid,rotateObj:rt,page:Me,interlayerData:et})}}),this.getSlidePages(),this._ok(),!0},N.prototype.crop=function(b,D,O,W){var z=this.getCurTab();if(!z)return this._err(o.a.IMG_NOT_EXIST),!1;var ve=z.getCurPage();if(!ve)return this._err(o.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(b)&&Object(s.v)(D)&&Object(s.v)(O)&&Object(s.v)(W)))return this._err(o.a.PARAM_TYPE),!1;var xe=ve.naturalWidth,Me=ve.naturalHeight;if(b<0||b>xe||D<0||D>Me||O<0||W<0||b+O>xe||D+W>Me)return this._err(o.a.PARAMETER_RANGE),!1;this._clearBox();var J=this._db.getMid(ve.uid);if(J){this._releaseMin(J);var Ke=J.edt.crop(b,D,O,W);this._emitM(o.b.EDIT,"crop",{uid:ve.uid,cropObj:Ke,page:ve})}return this.getSlidePages(),this._ok(),!0},N.prototype.erase=function(b,D,O,W,z){var ve=this.getCurTab();if(!ve)return this._err(o.a.IMG_NOT_EXIST),!1;var xe=ve.getCurPage();if(!xe)return this._err(o.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(b)&&Object(s.v)(D)&&Object(s.v)(O)&&Object(s.v)(W)))return this._err(o.a.PARAM_TYPE),!1;var Me=xe.naturalWidth,J=xe.naturalHeight;if(b<0||b>Me||D<0||D>J||O<0||W<0||b+O>Me||D+W>J)return this._err(o.a.PARAMETER_RANGE),!1;this._clearBox();var Ke=this._db.getMid(xe.uid);if(Ke){this._releaseMin(Ke);var et=Ke.edt.erase(b,D,O,W,z);this._emitM(o.b.EDIT,"erase",{uid:xe.uid,eraseObj:et,page:xe})}return this.getSlidePages(),this._ok(),!0},N.prototype.overlay=function(b,D,O,W,z,ve,xe){if(!this._checkIndex(b))return!1;var Me=this.getCurTab();if(!Me)return this._err(o.a.IMG_NOT_EXIST),!1;var J=Me.idxPage(b);if(!J)return this._err(o.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(D)&&Object(s.v)(O)&&Object(s.v)(W)&&Object(s.v)(z)))return this._err(o.a.PARAM_TYPE),!1;var Ke=J.naturalWidth,et=J.naturalHeight;if(D<0||D>Ke||O<0||O>et||W<0||z<0||D+W>Ke||O+z>et)return this._err(o.a.PARAMETER_RANGE),!1;var rt=this._db.getMid(J.uid);return rt.overlays.push({type:"overlay",left:D,top:O,width:W,height:z,color:ve,opacity:xe}),rt&&(this._releaseMin(rt),this._emitM(o.b.EDIT,"overlay",{uid:J.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0},N.prototype.changePageSize=function(b,D){if(b<=0||D<=0)return this._err(o.a.PARAMETER_INVALID),!1;var O=this.getCurTab();if(!O)return this._err(o.a.IMG_NOT_EXIST),!1;var W=O.getCurPage();if(!W)return this._err(o.a.IMG_NOT_EXIST),!1;if(!Object(s.v)(b)||!Object(s.v)(D))return this._err(o.a.PARAM_TYPE),!1;this._clearBox();var z=this._db.getMid(W.uid);if(z){this._releaseMin(z);var ve=z.edt.changePageSize(b,D);this._emitM(o.b.EDIT,"changePageSize",{uid:W.uid,changeSizeObj:ve,page:W})}return this.getSlidePages(),this._ok(),!0},N.prototype._releaseMin=function(b){s.a.revokeObjectURL(b.minData),b.minData=null,b.minType=null,b.activeMin=!1},N.prototype.setSaveType=function(b){return["image/png","image/jpeg"].indexOf(b)<0?(this._err(o.a.PARAMETER_INVALID),!1):(this.saveType=b,this._gpc.offScreenCanvas.saveType=b,this._ok(),!0)},N.prototype.getSaveType=function(){return this.saveType},N.prototype.setSaveQuality=function(b){return b<0||b>1?(this._err(o.a.PARAMETER_RANGE),!1):(this.saveQuality=b,this._ok(),!0)},N.prototype.getSaveQuality=function(){return this.saveQuality},N.prototype.setRotateMode=function(b){return Object(s.v)(b)||this._err(o.a.PARAM_TYPE),-1===[0,1,2].indexOf(b)?(this._err(o.a.PARAMETER_INVALID),!1):(this._gpc.rotateMode=b,this._ok(),!0)},N.prototype.getRotateMode=function(){return this._gpc.rotateMode},N.prototype.setSaveBackgroundColor=function(b){return this._ok(),this._gpc.setSaveBackgroundColor(b)},N.prototype.getSaveBackgroundColor=function(){return this._gpc.saveBg},N.prototype.saveTransformation=function(){var b=this,D=this.getCurTab();if(!D)return Promise.reject(o.a.IMG_NOT_EXIST);for(var O=D.getCurUid(),W=D.chs,z=[],ve=function(J){var Ke=W[J],et=xe._db.getMid(Ke.uid);if(et&&et.edt.all.length>0){var rt=new Promise(function(ot,it){var pt=!0;O===Ke.uid&&(pt=!1);var ft=b._db.getMid(Ke.uid);ft.img?b._saveToBlob(Ke.uid,ft.img,Ke,pt).then(function(mt){ot(mt)}):ft.oriData?b._getImage(Ke.uid,ft.oriData,Ke,pt).then(function(mt){ot(mt)}):b._db.getDataAsync(Ke.uid).then(function(mt){var Et=s.a.createURL(mt.oriData);b._getImage(Ke.uid,Et,Ke,pt).then(function(Dt){ot(Dt)})}).catch(function(mt){})});z.push(rt)}},xe=this,Me=0;Me<W.length;Me++)ve(Me);return Promise.all(z)},N.prototype.__buffer=function(b,D){var O,W,z={action:D,uids:(null===(W=null===(O=b.data)||void 0===O?void 0:O.chs)||void 0===W?void 0:W.slice())||[],currentUid:b.getCurUid(),selectedUids:b.getSlt()};se.prototype._emit.call(this,o.d.CURRENT_CHANGED,b.getCurUid()),se.prototype._emit.call(this,o.g.BUFFER_CHANGED,z)},N.prototype._getImage=function(b,D,O,W){var z=this;return new Promise(function(ve,xe){var Me=new Image;z.cors&&(Me.crossOrigin="anonymous"),Me.src=D,Me.onload=function(){Me.onload=null,Me.onerror=null,z._saveToBlob(b,Me,O,W).then(function(J){ve(J)}),"object"===D.type&&s.a.revokeObjectURL(D),Me.src=""}})},N.prototype._saveToBlob=function(b,D,O,W){var z=this,ve=this._gpc.offScreenCanvas,xe=this._db.getMid(b);ve.render({viewerUid:"",pageUid:b,isMin:!1,img:D,page:O,midData:xe});var Me=this._db.getMetadata(b),J=xe.customData,Ke=xe.tags;Me.width=O.naturalWidth,Me.height=O.naturalHeight,xe.setTempSize(O.naturalWidth,O.naturalHeight),D=null;var et=ve.mainCanvas,rt=ve.mainWidth,ot=ve.mainHeight,it=this.saveCanvas,pt=it.getContext("2d");return it.width!==rt&&(it.width=rt),it.height!==ot&&(it.height=ot),pt.drawImage(et,0,0,rt,ot,0,0,rt,ot),new Promise(function(ft,mt){it.toBlob(function(Et){xe.edt.reset(),z._emitM(o.b.UPDATE_SYNC,b,{oriData:Et,minData:null,metadata:Me,customData:J,tags:Ke},!0),z._db&&z._db.getDataAsync(b).then(function(Lt){ft(Et)})},z.saveType,z.saveQuality)})},N.prototype.getMinPageData=function(){var b=this.getCurTab();if(!b)return this._err(o.a.IMG_NOT_EXIST),null;var D=b.getCurPage();return D&&this._db.getMid(D.uid)?this._gpc.getMinPageData():(this._err(o.a.IMG_NOT_EXIST),null)},N.prototype.setCropLineColor=function(b){this._gpc.cropLineColor=b,this.drawSltBox()},N.prototype.getCropLineColor=function(){return this._gpc.cropLineColor},N.prototype.setKeepZoom=function(b){this._gpc.keepZoom=b},N.prototype.getFitType=function(){return this._gpc.fitType},N.prototype.setFitType=function(b){if(!this._chStr(b))return!1;if(-1===["window","width","height"].indexOf(b))return this._err(o.a.PARAMETER_INVALID),!1;this._gpc.fitType=b;var D=this.getCurTab();return D&&(D.fitType=b),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=b),this.render(!0),this.getSlidePages(),this._ok(),!0},N.prototype.setZoom=function(b){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=b,this._tabMng.dfConfig.fitType="none");var D=this.getCurTab();return D&&(D.zoom=b),this._gpc.setZoom(b)},N.prototype.getZoom=function(){return this._gpc.getZoom()},N.prototype.setMinZoom=function(b){return this._gpc.minZoom=b,!0},N.prototype.getMinZoom=function(){return this._gpc.minZoom},N.prototype.setMaxZoom=function(b){return this._gpc.maxZoom=b,!0},N.prototype.getMaxZoom=function(){return this._gpc.maxZoom},N.prototype.setOperationMode=function(b){var D=this.getCurTab();if(D){D.opMode=b;var O=D.getCurPage();O&&O.boxCount()>0&&(O.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur))}this._gpc.opMode=b,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=b)},N.prototype.getOperationMode=function(){return this._gpc.opMode},N.prototype.setDisplayMode=function(b){var D=this.getCurTab();if(D){D.disMode=b;var O=D.getCurPage();O&&O.boxCount()>0&&(O.cropMng.clear(),this.drawSltBox(),se.prototype._emit.call(this,o.g.PAGE_AREA_UNSELECTED,D.cur))}this._tabMng.dfConfig.disMode=b,this._gpc.disMode=b,this.render(!0),this.getSlidePages()},N.prototype.setAspectRatio=function(b){this._gpc.aspectRatio=b;var D=this.getCurTab();D&&D.chs.forEach(function(O){O.cropMng.setAspectRatio(b)})},N.prototype.getAspectRatio=function(){return this._gpc.aspectRatio},N.prototype.setKeepAspectRatio=function(b){this._gpc.keepAspectRatio=b;var D=this.getCurTab();D&&D.chs.forEach(function(O){O.cropMng.setKeepAspectRatio(b)})},N.prototype.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},N.prototype.setPageMargin=function(b){return this._gpc.iMargin=b,!0},N.prototype.getPageMargin=function(){return this._gpc.iMargin},N.prototype.setZoomDelta=function(){},N.prototype.getZoomDelta=function(){},N.prototype.setAllowSlide=function(b){this._gpc.setAllowSlide(b)},N.prototype.getAllowSlide=function(){return this._gpc.allowSlide},N.prototype._getOutEvent=function(b){var D=null,O=-1,W=-1,z=-1,ve=null==b?void 0:b.clientX,xe=null==b?void 0:b.clientY,Me=this.getCurTab();if(Me&&(D=Me.getCurPage()),D&&(O=this.uidIdx(D.uid)),this._gpc.checkMouseOverPage(b)){var J=this._gpc.getMouseCoordinate(b),Ke=this._gpc.toPageCoordinate(J.x,J.y);W=Math.floor(Ke.x),z=Math.floor(Ke.y)}return{index:O,imageX:W,imageY:z,pageX:ve,pageY:xe}},N.prototype._initEvent=function(){var b=this;se.prototype._on.call(this,o.b.APPEND_SYNC,function(D,O){b._emitM(o.b.APPEND_SYNC,D,O)}),se.prototype._on.call(this,o.d.CANVAS_VISIBILITY_CHANGED,this._onSetCanvasVisibility.bind(this)),se.prototype._on.call(this,o.d.BIND_SLIDE_COMPONENT,function(D){var O;null===(O=b._gpc.slide)||void 0===O||O.bind(D)}),se.prototype._on.call(this,o.d.UNBIND_SLIDE_COMPONENT,function(){var D;null===(D=b._gpc.slide)||void 0===D||D.unbind()}),se.prototype._on.call(this,o.d.BIND_CANVAS,function(D){b._gpc.cvsMng.bind(D)}),se.prototype._on.call(this,o.d.UNBIND_CANVAS,function(D){b._gpc.cvsMng.unbind(D)}),se.prototype._on.call(this,o.d.SET_CANVAS_SIZE,function(D){var z=b._gpc.setCanvasOffsetSize(D.width,D.height),ve=b.getCurTab();ve&&0!==ve.total||se.prototype._emit.call(b,o.f.SET_SCROLLER_SIZE,{width:0,height:0,x:0,y:0}),"single"!==b._gpc.disMode||z||(b.render(!1,!1),b.drawSltBox(),b.getSlidePages())}),se.prototype._on.call(this,o.d.DISPLAYED_IMAGE_CHANGED,function(D){D.forEach(function(O){var W=b._db.getMid(O);if(W)if(W.minData){var z={uid:O,data:W.minData,tags:W.getTags()};se.prototype._emit.call(b,o.f.UPDATE_THB_ITEM,z)}else b._emitM(o.b.LOAD_PAGE,O)})}),se.prototype._on.call(this,o.d.CANVAS_MOUSE_DOWN,function(D,O){var W=b.getCurTab();W&&W.getCurPage()&&b._gpc.onCanvasMousedown(D),O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_DOWN,O,D)}),se.prototype._on.call(this,o.d.CANVAS_MOUSE_MOVE,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_MOVE,O,D)}),se.prototype._on.call(this,o.d.CANVAS_MOUSE_UP,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_UP,O,D)}),se.prototype._on.call(this,o.d.CANVAS_MOUSE_OVER,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_OVER,O,D)}),se.prototype._on.call(this,o.d.CANVAS_MOUSE_OUT,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_OUT,O,D)}),se.prototype._on.call(this,o.d.CANVAS_TOUCH_START,function(D,O){var W=b.getCurTab();W&&W.getCurPage()&&b._gpc.onCanvasTouchstart(D),O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_DOWN,O,D)}),se.prototype._on.call(this,o.d.CANVAS_TOUCH_MOVE,function(D,O){var W=b.getCurTab();W&&W.getCurPage()&&b._gpc.onCanvasTouchmove(D),O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_MOVE,O,D)}),se.prototype._on.call(this,o.d.CANVAS_TOUCH_END,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_MOUSE_UP,O,D)}),se.prototype._on.call(this,o.d.CANVAS_SCROLL,function(D,O){var W=b.getCurTab();W&&W.getCurPage()&&b._gpc.onCanvasScroll(D)}),se.prototype._on.call(this,o.d.CANVAS_WHEEL,function(D,O){var W=b.getCurTab();W&&W.getCurPage()&&(b._gpc.onCanvasWheel(D),se.prototype._emit.call(b,o.g.WHEEL,D))}),se.prototype._on.call(this,o.d.CANVAS_CLICK,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_CLICK,O,D)}),se.prototype._on.call(this,o.d.CANVAS_DOUBLE_CLICK,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_DOUBLE_CLICK,O,D)}),se.prototype._on.call(this,o.d.CANVAS_RIGHT_CLICK,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_RIGHT_CLICK,O,D)}),se.prototype._on.call(this,o.d.CANVAS_RIGHT_CLICK,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.PAGE_CONTEXTMENU,O,D)}),se.prototype._on.call(this,o.d.CANVAS_KEY_DOWN,function(D){se.prototype._emit.call(b,o.g.KEY_DOWN,D)}),se.prototype._on.call(this,o.d.CANVAS_KEY_UP,function(D){se.prototype._emit.call(b,o.g.KEY_UP,D)}),se.prototype._on.call(this,o.d.CANVAS_RESIZE,function(D,O){se.prototype._emit.call(b,o.g.RESIZE,D,O)}),se.prototype._on.call(this,o.d.CANVAS_DRAG_START,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.DRAG_START,O,D)}),se.prototype._on.call(this,o.d.CANVAS_DRAG_MOVE,function(D,O){O||(O=b._getOutEvent(D)),se.prototype._emit.call(b,o.g.DRAG_MOVE,O,D)}),se.prototype._on.call(this,o.d.CANVAS_DRAG_DONE,function(D){se.prototype._emit.call(b,o.g.DRAG_DONE,D)}),se.prototype._on.call(this,o.d.DOCUMENT_MOVE,function(D){var O=b.getCurTab();O&&O.getCurPage()&&b._gpc.onDocumentMousemove(D)}),se.prototype._on.call(this,o.d.DOCUMENT_UP,function(D){var O=b.getCurTab();O&&O.getCurPage()&&b._gpc.onDocumentMouseup(D)}),se.prototype._on.call(this,o.d.SET_SELECTED_INDEXES,function(D){b.setSltPages(D,!1),b._emitM(o.b.CHANGE_PAGE,b.uid,"slt",D)}),se.prototype._on.call(this,o.d.REORDER_THUMBNAIL,function(D,O){b.getCurTab()&&b.reorderPage(D,O,!0)}),se.prototype._on.call(this,o.d.CANVAS_DEFAULT_CURSOR,function(D){void 0===D&&(D="default"),b._gpc.defaultCursor=D}),se.prototype._on.call(this,"_onRender",function(){b.render()}),se.prototype._on.call(this,"_onRenderBoxes",function(){b.drawSltBox()}),se.prototype._on.call(this,"_getSlidePages",function(){b.getSlidePages()})},N.prototype._onSetCanvasVisibility=function(b){},N.prototype.setScrBarW=function(b){this._gpc.scrBarW=b},N.prototype._onM=function(b,D){this._mPub._on(b,D)},N.prototype._emitM=function(b){for(var D,O=[],W=1;W<arguments.length;W++)O[W-1]=arguments[W];this._mPub&&(D=this._mPub)._emit.apply(D,ue([b],O))},N.prototype._offM=function(b,D){this._mPub._off(b,D)},N.prototype._err=function(b){this._emitM(o.d.ERROR,b)},N.prototype._ok=function(){this._emitM(o.d.ERROR,o.a.OK)},N.prototype._chStr=function(b){return!!Object(s.y)(b)||(this._err(o.a.PARAM_TYPE),!1)},N.prototype._checkIndex=function(b){return Object(s.v)(b)?!(b<0||b>=this.getCurPageCount())||(this._err(o.a.PARAMETER_RANGE),!1):(this._err(o.a.PARAM_TYPE),!1)},N.prototype.dispose=function(){var b,D,O;se.prototype.dispose.call(this),null===(b=this._mPub)||void 0===b||b.dispose(),this._mPub=null,this._db=null,null===(D=this._tabMng)||void 0===D||D.dispose(),this._tabMng=null,null===(O=this._gpc)||void 0===O||O.dispose(),this._gpc=null,this.isDisposed=!0},N}(a.a),pe=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),B=function(){return(B=Object.assign||function(se){for(var N,b=1,D=arguments.length;b<D;b++)for(var O in N=arguments[b])Object.prototype.hasOwnProperty.call(N,O)&&(se[O]=N[O]);return se}).apply(this,arguments)},K=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},G=function(se){function N(b){var D=b.config,O=b.viewUi,W=b.workerBlobURL,z=b.scrollbarWidth,ve=b.groupUid,xe=b.defaultConfig,J=b.focus,Ke=b.db,et=b.offScreenCanvas,rt=b.saveCanvas,ot=se.call(this,b.mPub)||this;ot.ViewUi=null,ot.group=null,ot._uiConfig={canvasConfig:{}},ot._config={},ot._dfConfig=null,ot._focus={viewerId:void 0,thumbnailId:void 0},ot.uid=Object(s.I)(6),ot.postfix="-"+ot.uid,ot._iPub=new a.a,ot._db=Ke,ot.ViewUi=O,ot.group=ve,ot._dfConfig=xe,ot._focus=J,ot.vm=new X(D,ot._iPub.getPublishSubscribe(),ot._oPub,ot.uid,W,z,Ke,et,rt);var it=ot.initConfig(D);return ot.bindView(ot.container),ot.on(o.d.UPDATE_FOCUS,function(ft){var Et=ft.thumbnailId;ot._focus.viewerId=ft.viewerId,ot._focus.thumbnailId=Et}),ot.on(o.f.DOCUMENT_KEY_DOWN,function(ft){var mt,Et=ot._focus;ot.uid===Et.viewerId&&(null===(mt=ot.ui)||void 0===mt||mt.documentKeyDown(ft,Et.thumbnailId))}),ot.on(o.f.DOCUMENT_KEY_UP,function(ft){var mt,Et=ot._focus;ot.uid===Et.viewerId&&(null===(mt=ot.ui)||void 0===mt||mt.documentKeyUp(ft,Et.thumbnailId))}),ot.on(o.b.GOTO_PAGE,function(ft){ot.gotoPage(ft)}),ot._e(it.length?{code:80024,message:"Failed to create the viewer because the parameter "+it[0]+" is incorrect."}:o.a.OK),ot}return pe(N,se),N.prototype.initConfig=function(b){var D=b.uiConfig.canvasConfig,O=[],W=B(B(B({},b),D),b.uiConfig);for(var z in W)"uiConfig"===z||Object(s.w)(W[z])||this._checkInitProp(W,z)||O.push(z);return this._config=b,this._uiConfig=b.uiConfig,O},N.prototype._e=function(b){se.prototype._emit.call(this,o.d.ERROR,b)},N.prototype._checkInitProp=function(b,D){var O=this[D],W=b[D];return this[D]=b[D],O===W||O!==this[D]},N.prototype.closeTab=function(b){if(!Object(s.y)(b))return this._e(o.a.PARAM_TYPE),!1;this.vm.closeTab(b)},N.prototype.closeCurrentTab=function(){return this.vm.closeCurTab()},N.prototype.emptyTab=function(b){},N.prototype.getCurrentTabId=function(){return this.vm.getCurrentTabId()},N.prototype.getTab=function(b){return Object(s.y)(b)?this.vm.getTab(b):(this._e(o.a.PARAM_TYPE),null)},N.prototype.getCurrentTab=function(){return this.vm.getCurTab()},N.prototype.getCurrentPageUids=function(){return this.vm.getCurPageUids()},N.prototype.getCurrentIndex=function(){return this.vm.getCurIndex()},N.prototype.getNextPageIndex=function(){return this.vm.getNextPageIndex()},N.prototype.getPrePageIndex=function(){return this.vm.getPrePageIndex()},N.prototype.setCurrentIndex=function(b){return this.vm.setCurIndex(b)},N.prototype.setSelectedIndexes=function(b){return this.vm.setSltPages(b)},N.prototype.getSelectedIndexes=function(){return this.vm.getSltIndexes()},N.prototype.selectAll=function(){return this.vm.selectAll()},N.prototype.removeSync=function(b){if(Object(s.v)(b)&&(b=[b]),!Object(s.m)(b))return this._e(o.a.PARAM_TYPE),!1;if(0===b.length)return this._e(o.a.PARAMETER_INVALID),!1;for(var D=[],O=0;O<b.length;O++){var W=this.getUidByIndex(b[O]);if(!W)return!1;D.push(W)}return this.vm.remove(D)},N.prototype.removeAllSync=function(){return this.vm.rmAll()},N.prototype.switchPage=function(b,D){return this.vm.switchPage(b,D,!0)},N.prototype.movePage=function(b,D){return this.vm.movePage(b,D,!0)},N.prototype.getViewerElement=function(){var b;return this._e(o.a.OK),(null===(b=this.ui)||void 0===b?void 0:b.getViewerElement())||null},N.prototype.bindView=function(b,D,O){var W,z,ve,xe=this;if(void 0===D&&(D={}),void 0===O&&(O=!0),!this.ViewUi)return this._e(o.a.VIEW_UI_REQUIRE),!1;if(!b)return this._e(o.a.PARAMETER_INVALID),!1;if(Object(s.y)(b)&&(b=document.getElementById(b)),!Object(s.q)(b))return this._e(o.a.PARAMETER_INVALID),!1;this.unbindView(),O?Object(s.B)(D,this._uiConfig):this._uiConfig=D,this.ui=new this.ViewUi(b,this._uiConfig,this.postfix,this._iPub.getPublishSubscribe(),this._db),null===(W=this.ui)||void 0===W||W.createInnerThumbnail(),null===(z=this.ui)||void 0===z||z.setDisplayMode(this.displayMode),null===(ve=this.ui)||void 0===ve||ve.setOperationMode(this.operationMode),this.vm.thbViews.forEach(function(J){var Ke;null===(Ke=xe.ui)||void 0===Ke||Ke.createThumbnail(J.getConfig())});var Me=this.vm.getCurTab();return!Me||(this.vm._showAllThb(Me),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(o.a.OK),!0)},N.prototype.unbindView=function(){var b;return null===(b=this.ui)||void 0===b||b.unbindView(),this.ui=null,this._e(o.a.OK),!0},N.prototype.dispose=function(){var b,D;se.prototype.dispose.call(this),null===(b=this._iPub)||void 0===b||b.dispose(),this._iPub=null,this._db=null,this.ViewUi=null,this.ui=null,null===(D=this.vm)||void 0===D||D.dispose(),this.vm=null},N.prototype.updateUISetting=function(b){var D;if(Object(s.w)(b)){var O=Object(s.d)(this._dfConfig.uiConfig);Object(s.B)(b,O);var W=null===(D=this.ui)||void 0===D?void 0:D.containerBox;return W&&this.bindView(W,O,!1),this._e(o.a.OK),!0}return this._e(o.a.PARAM_TYPE),!1},N.prototype.bindContent=function(b){var D;return Object(s.y)(b)&&(b=document.getElementById(b)),Object(s.q)(b)?(null===(D=this.ui)||void 0===D?void 0:D.bindContent(b))?(this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1):(this._e(o.a.PARAMETER_INVALID),!1)},N.prototype.unbindContent=function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.unbindContent())?(this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.fullScreen=function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.fullScreen())?(this._e(o.a.OK),!0):this.ui?(this._e(o.a.BROWSER_NOT_SUPPORT),!1):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.cancelFullScreen=function(){var b;return this._e(o.a.OK),null===(b=this.ui)||void 0===b?void 0:b.cancelFullScreen()},N.prototype.fullWebPage=function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.fullPage())?(this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.cancelFullWebPage=function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.cancelFullPage())?(this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.setButtonClass=function(b,D){var O;if(!Object(s.y)(b)||!Object(s.y)(D))return this._e(o.a.PARAM_TYPE),!1;var W=this._uiConfig.buttons[b];return W?(W.setClass=D,(null===(O=this.ui)||void 0===O?void 0:O.setButtonClass(b))?(this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1)):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.setViewMode=function(b,D){var O;return Object(s.v)(b)&&Object(s.v)(D)?b>0&&D>0?(this._uiConfig.canvasConfig.rows=D,this._uiConfig.canvasConfig.columns=b,this.ui?(this._e(o.a.OK),this.vm.rows=D,this.vm.columns=b,null===(O=this.ui)||void 0===O?void 0:O.setViewMode(b,D)):(this._e(o.a.ELEMENT_NOT_EXIST),!1)):(this._e(o.a.PARAMETER_RANGE),!1):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.createCustomElement=function(b,D,O){var W;void 0===D&&(D=0),void 0===O&&(O=!1);var z=b;return Object(s.y)(b)&&(z=document.getElementById(b)),Object(s.q)(z)?(this._e(o.a.OK),null===(W=this.ui)||void 0===W?void 0:W.createCustomElement(z,D,O)):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.updateVideoContainer=function(b){return this.ui?(Object(s.y)(b)||this._e(o.a.PARAM_TYPE),this.ui.updateVideoContainer(b),this._e(o.a.OK),!0):(this._e(o.a.ELEMENT_NOT_EXIST),!1)},N.prototype.setLoadingImage=function(b){var D;this.uiConfig.canvasConfig.loadingImageUrl=b,null===(D=this.ui)||void 0===D||D.setLoadingImage(b)},N.prototype.nextPage=function(){return this.vm.nextPage()},N.prototype.prevPage=function(){return this.vm.prevPage()},N.prototype.firstPage=function(){return this.vm.firstPage()},N.prototype.lastPage=function(){return this.vm.lastPage()},N.prototype.gotoPage=function(b){return this.vm.gotoPage(b)},N.prototype.createThumbnailView=function(b){var D;if(void 0===b&&(b={}),se.prototype._emit.call(this,o.d.LOG,"Invoking viewer#createThumbnailView."),!Object(s.w)(b))return this._e(o.a.PARAM_TYPE),null;var O=[],W=this.vm.createThumbnailView(this._uiConfig.thumbnail);return null===(D=this.ui)||void 0===D||D.createThumbnail(W.getConfig()),W.init(b,O),this._e(O.length?{code:80024,message:"Failed to create the thumbnail viewer because the parameter "+O[0]+" is incorrect."}:o.a.OK),W},N.prototype.removeThumbnailView=function(b){var D;se.prototype._emit.call(this,o.d.LOG,"Invoking viewer#removeThumbnailView.");var O=b;return Object(s.y)(b)||(O=b.uid),this.vm.removeThumbnailView(O)?(null===(D=this.ui)||void 0===D||D.removeThumbnail(O),this._e(o.a.OK),!0):(this._e(o.a.PARAMETER_INVALID),!1)},N.prototype.getThumbnailViewById=function(b){return this.vm.getThumbnailViewById(b)},N.prototype.getThumbnailViewsList=function(){return this.vm.thbViews},N.prototype.getIndexByUid=function(b){return this.vm.uidIdx(b)},N.prototype.getUidByIndex=function(b){return this.vm.idxUid(b)},N.prototype.getRealTimeMetadataByIndex=function(b){return this.vm.getRealTimeMetadataByIndex(b)},N.prototype.getMetadataByIndex=function(b){return this.vm.getMetadata(b)},N.prototype.setMetadataByIndex=function(b,D){return this.vm.setMetadata(b,D)},N.prototype.getCustomDataByIndex=function(b){return this.vm.getCustomDataByIndex(b)},N.prototype.getCustomDataByUid=function(b){return this.vm.getCustomDataByUid(b)},N.prototype.zoomIn=function(){return this.vm.zoomIn()},N.prototype.zoomOut=function(){return this.vm.zoomOut()},N.prototype.zoomTo=function(b,D,O){return this.vm.zoomTo(b,D,O)},N.prototype.reset=function(){return this.vm.reset()},N.prototype.mirror=function(){return this.vm.flip(1)},N.prototype.flip=function(){return this.vm.flip(0)},N.prototype.rotate=function(b,D){return this.vm.rotate(b,D)},N.prototype.crop=function(b,D,O,W){return this.vm.crop(b,D,O,W)},N.prototype.erase=function(b,D,O,W,z){return this.vm.erase(b,D,O,W,z)},N.prototype.overlayRectangle=function(b,D,O,W,z,ve,xe){return this.vm.overlay(b,D,O,W,z,ve,xe)},N.prototype.changePageSize=function(b,D){return this.vm.changePageSize(b,D)},N.prototype.saveTransformation=function(){return this.vm.saveTransformation()},N.prototype.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},N.prototype.setFreeSelectedBox=function(b){return this.vm.setFreeBox(b)},N.prototype.setSelectedBoxes=function(b,D){var O;if(1!==this.operationMode)return this._e(o.a.OPERATION_MODE_ERROR),!1;if(void 0===b)return this._e(o.a.PARAM_TYPE),!1;if(void 0!==D&&!Object(s.n)(D))return this._e(o.a.PARAM_TYPE),!1;var W=this.getCurrentTab();if(!W)return this._e(o.a.IMG_NOT_EXIST),!1;var z=W.getCurPage();if(void 0===z)return this._e(o.a.IMG_NOT_EXIST),!1;var ve=null;if(Object(s.m)(b)){if(0===(ve=b).length)return this._e(o.a.PARAMETER_INVALID),!1}else{if(!Object(s.w)(b))return this._e(o.a.PARAM_TYPE),!1;ve=[b]}for(var xe=ve.length,Me=z.naturalWidth,J=z.naturalHeight,Ke=0;Ke<xe;Ke++){var et=ve[Ke];if(!(Object(s.v)(et.left)&&Object(s.v)(et.top)&&Object(s.v)(et.width)&&Object(s.v)(et.height)))return this._e(o.a.PARAM_TYPE),!1;et.left<0&&(et.left=0),et.top<0&&(et.top=0),et.width<=0&&(et.width=1),et.height<=0&&(et.height=1),et.width+et.left>Me&&(et.width=Me-et.left),et.height+et.top>J&&(et.height=J-et.top)}return"single"===this.displayMode?this.vm.setBox(b,D):null===(O=this.ui)||void 0===O||O.setSelectedBoxes(b,D),this._e(o.a.OK),!0},N.prototype.clearSelectedBoxes=function(b){var D;return this.vm.clearBox(b),null===(D=this.ui)||void 0===D||D.clearSelectedBoxes(b),this._e(o.a.OK),!0},N.prototype.render=function(){return this.vm.render()},N.prototype.on=function(b,D){Object(s.y)(b)&&Object(s.s)(D)?(this._iPub._on(b,D),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},N.prototype.emit=function(b){for(var D,O=[],W=1;W<arguments.length;W++)O[W-1]=arguments[W];Object(s.y)(b)?((D=this._iPub)._emit.apply(D,K([b],O)),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},N.prototype.off=function(b,D){Object(s.y)(b)&&(void 0===D||Object(s.s)(D))?(this._iPub._off(b,D),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},Object.defineProperty(N.prototype,"zoom",{get:function(){return this.vm.getZoom()},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this.vm.setZoom(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"minZoom",{get:function(){return this._config.minZoom},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this._config.minZoom=b,this.vm.setMinZoom(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"maxZoom",{get:function(){return this._config.maxZoom},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this._config.maxZoom=b,this.vm.setMaxZoom(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showViewer",{get:function(){return this._uiConfig.showViewer},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.showViewer=b,null===(D=this.ui)||void 0===D||D.setShowViewer(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showHeader",{get:function(){return this._uiConfig.toolbars.header},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.toolbars.header=b,null===(D=this.ui)||void 0===D||D.setShowHeader(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"headerColor",{get:function(){return this._uiConfig.headerColor},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.headerColor=b,null===(D=this.ui)||void 0===D||D.setHeaderColor(b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showTopMenu",{get:function(){return this._uiConfig.toolbars.topMenu},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.toolbars.topMenu=b,null===(D=this.ui)||void 0===D||D.setShowTopMenu(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"topMenuColor",{get:function(){return this._uiConfig.topMenuColor},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.topMenuColor=b,null===(D=this.ui)||void 0===D||D.setTopMenuColor(b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"topMenuBorder",{get:function(){return this._uiConfig.topMenuBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.topMenuBorder=b,null===(D=this.ui)||void 0===D||D.setTopMenuBorder(b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showSidebar",{get:function(){return this._uiConfig.showSidebar},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.showSidebar=b,null===(D=this.ui)||void 0===D||D.setShowSidebar(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showAside",{get:function(){return this._uiConfig.toolbars.asideMenu},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.toolbars.asideMenu=b,null===(D=this.ui)||void 0===D||D.setShowAside(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showMain",{get:function(){return this._uiConfig.showMain},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.showMain=b,null===(D=this.ui)||void 0===D||D.setShowMain(b),this.emit(o.d.CANVAS_VISIBILITY_CHANGED,b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showFooter",{get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.toolbars.bottomMenu=b,null===(D=this.ui)||void 0===D||D.setShowFooter(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showTab",{get:function(){return this._uiConfig.showTab},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.showTab=b,null===(D=this.ui)||void 0===D||D.setShowTab(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"footerColor",{get:function(){return this._uiConfig.footerColor},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.footerColor=b,null===(D=this.ui)||void 0===D||D.setFooterColor(b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showVideoContainer",{get:function(){return this._uiConfig.showVideoContainer},set:function(b){var D;Object(s.n)(b)||this._e(o.a.PARAM_TYPE),this._uiConfig.showVideoContainer=b,null===(D=this.ui)||void 0===D||D.setShowVideoContainer(b),this._e(o.a.OK)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"fitType",{get:function(){return this.vm.getFitType()},set:function(b){this.vm.setFitType(b)&&(this._config.fitType=b)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"canvasMouseShape",{get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(b){var D;Object(s.y)(b)?(this._uiConfig.canvasConfig.canvasMouseShape=b,null===(D=this.ui)||void 0===D||D.setCanvasMouseShape(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"canvasBackground",{get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.canvasBackground=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("canvasBackground",b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectedBoxLineColor",{get:function(){return this.vm.getCropLineColor()},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.selectedBoxLineColor=b,this.vm.setCropLineColor(b),null===(D=this.ui)||void 0===D||D.setSelectedBoxLineColor(b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"saveBackgroundColor",{get:function(){return this.vm.getSaveBackgroundColor()},set:function(b){this.vm.setSaveBackgroundColor(b)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"saveQuality",{get:function(){return this.vm.getSaveQuality()},set:function(b){this.vm.setSaveQuality(b)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"saveType",{get:function(){return this.vm.getSaveType()},set:function(b){this.vm.setSaveType(b)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"rotateMode",{get:function(){return this.vm.getRotateMode()},set:function(b){this.vm.setRotateMode(b)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"canvasBorder",{get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.canvasConfig.canvasBorder=b,null===(D=this.ui)||void 0===D||D.setCanvasBorder(b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageBackground",{get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.pageBackground=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("pageBackground",b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageBorder",{get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.canvasConfig.pageBorder=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("pageBorder",b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectedPageBackground",{get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.selectedPageBackground=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("selectedPageBackground",b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectedPageBorder",{get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.canvasConfig.selectedPageBorder=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("selectedPageBorder",b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"hoverPageBorder",{get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.canvasConfig.hoverPageBorder=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("hoverPageBorder",b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"hoverPageBackground",{get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.hoverPageBackground=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("hoverPageBackground",b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"placeholderBackground",{get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(b){var D;Object(s.p)(b)?(this._uiConfig.canvasConfig.placeholderBackground=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("placeholderBackground",b),this._e(o.a.OK)):this._e(o.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showPageNumber",{get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.canvasConfig.showPageNumber=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("showPageNumber",b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"multipleMode",{get:function(){return this._uiConfig.canvasConfig.multipleMode||!1},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.canvasConfig.multipleMode=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("multipleMode",b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowPageDragging",{get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.canvasConfig.allowPageDragging=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("allowPageDragging",b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowKeyboardControl",{get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(b){var D;Object(s.n)(b)?(this._uiConfig.canvasConfig.allowKeyboardControl=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("allowKeyboardControl",b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pageMargin",{get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(b){var D;Object(s.x)(b)?(this._uiConfig.canvasConfig.pageMargin=b,this.vm.setPageMargin(b),null===(D=this.ui)||void 0===D||D.setInnerTbProp("pageMargin",b),this._e(o.a.OK)):this._e(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"scrollDirection",{get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(b){var D;Object(s.y)(b)?(this._uiConfig.canvasConfig.scrollDirection=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("scrollDirection",b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"autoChangeIndex",{get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(b){var D;Object(s.n)(b)?(this.uiConfig.canvasConfig.autoChangeIndex=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("autoChangeIndex",b)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"checkboxColor",{get:function(){return this._uiConfig.canvasConfig.checkboxColor||"#333"},set:function(b){var D;Object(s.p)(b)?(this.uiConfig.canvasConfig.checkboxColor=b,null===(D=this.ui)||void 0===D||D.setInnerTbProp("checkboxColor",b)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"outerBorder",{get:function(){return this._uiConfig.outerBorder},set:function(b){var D;Object(s.o)(b)?(this._uiConfig.outerBorder=b,null===(D=this.ui)||void 0===D||D.setOuterBorder(b),this._e(o.a.OK)):this._e(o.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"sidebarWidth",{get:function(){return this._uiConfig.sidebarWidth},set:function(b){var D;Object(s.x)(b)?(this._uiConfig.sidebarWidth=b,null===(D=this.ui)||void 0===D||D.setSidebarWidth(b),this._e(o.a.OK)):this._e(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"width",{get:function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.getViewerWidth())||this._uiConfig.width},set:function(b){var D;Object(s.x)(b)?(this._uiConfig.width=b,null===(D=this.ui)||void 0===D||D.setViewerWidth(b),this._e(o.a.OK)):this._e(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"height",{get:function(){var b;return(null===(b=this.ui)||void 0===b?void 0:b.getViewerHeight())||this._uiConfig.height},set:function(b){var D;Object(s.x)(b)?(this._uiConfig.height=b,null===(D=this.ui)||void 0===D||D.setViewerHeight(b),this._e(o.a.OK)):this._e(o.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"uiConfig",{get:function(){return this._uiConfig},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"operationMode",{get:function(){return this._config.operationMode},set:function(b){var D;Object(s.v)(b)?-1!==[0,1,2].indexOf(b)?(this._config.operationMode=b,this.vm.setOperationMode(b),null===(D=this.ui)||void 0===D||D.setOperationMode(b),this._e(o.a.OK)):this._e(o.a.PARAMETER_INVALID):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"allowSlide",{get:function(){return this.vm.getAllowSlide()},set:function(b){Object(s.n)(b)?(this.vm.setAllowSlide(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"tabMode",{get:function(){return this._config.tabMode},set:function(b){"single"===b||"multiple"===b?(this._config.tabMode=b,this.vm.setTabMode(b),this._e(o.a.OK)):this._e(o.a.PARAMETER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"selectionBoxAspectRatio",{get:function(){return this.vm.getAspectRatio()},set:function(b){var D;Object(s.v)(b)?(this.vm.setAspectRatio(b),null===(D=this.ui)||void 0===D||D.setAspectRatio(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"keepAspectRatio",{get:function(){return this.vm.getKeepAspectRatio()},set:function(b){Object(s.n)(b)?this.vm.setKeepAspectRatio(b):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"displayMode",{get:function(){return this._config.displayMode},set:function(b){var D;Object(s.y)(b)?-1!==["single","continuous"].indexOf(String(b))?(this._config.displayMode=b,null===(D=this.ui)||void 0===D||D.setDisplayMode(b),this.vm.setDisplayMode(b),this._e(o.a.OK)):this._e(o.a.PARAMETER_RANGE):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"zooming",{get:function(){return this._config.zooming},set:function(b){s.n?(this._config.zooming=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"scrollX",{get:function(){return this._config.scrollX},set:function(b){s.n?(this._config.scrollX=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"scrollY",{get:function(){return this._config.scrollY},set:function(b){s.n?(this._config.scrollY=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"keepZoom",{get:function(){return this._config.keepZoom},set:function(b){Object(s.n)(b)?(this._config.keepZoom=b,this.vm.setKeepZoom(b),this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"ifAllowSlide",{get:function(){return this._config.ifAllowSlide},set:function(b){Object(s.n)(b)?(this._config.ifAllowSlide=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"zoomInDelta",{get:function(){return this._config.zoomInDelta},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this._config.zoomInDelta=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"zoomOutDelta",{get:function(){return this._config.zoomOutDelta},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this._config.zoomOutDelta=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"zoomDelta",{get:function(){return this._config.zoomDelta},set:function(b){Object(s.v)(b)?b<=0?this._e(o.a.PARAMETER_RANGE):(this._config.zoomDelta=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"currentPageCount",{get:function(){return this.vm.getCurPageCount()},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"showLatestPage",{get:function(){return this._config.showLatestPage},set:function(b){Object(s.n)(b)?(this._config.showLatestPage=b,this.vm.showLatest=b,this._e(o.a.OK)):this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"container",{get:function(){return this._config.container},set:function(b){""===b||Object(s.q)(b)||Object(s.q)(b)?this._config.container=b:this._e(o.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),N}(a.a),ee=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),ie=function(se){function N(b){var D=se.call(this,b)||this;return D.vws=[],D.name=b.name,D.type=b.type,D.chs=b.chs||[],D}return ee(N,se),N.prototype.getCounts=function(){return this.chs.length},N.prototype.addViewer=function(b){return-1==this.vws.indexOf(b)&&(this.vws.push(b),!0)},N.prototype.removeViewer=function(b){var D=this.vws.indexOf(b);return-1!=D&&(this.vws.splice(D,1),!0)},N}(L),be=function(){function se(N){this.tabs=[],this.mode="single",this.tabs=[]}return se.prototype.addTab=function(N,b){var D=this.checkTab(N.uid),O=null;return-1!==D?O=this.tabs[D]:(O=new ie(N),this.tabs.push(O)),b&&O.addViewer(b),O},se.prototype.getTab=function(N){var b=this.checkTab(N);return-1===b?null:this.tabs[b]},se.prototype.removeTab=function(N){var b=this.checkTab(N);b>-1&&this.tabs.splice(b,1)},se.prototype.checkTab=function(N){for(var b=this.tabs.length,D=0;D<b;D++)if(this.tabs[D].uid===N)return D;return-1},se.prototype.setMode=function(N){return("single"===N||"multiple"===N)&&(this.mode=N,!0)},se.prototype.removePage=function(N,b){var D=this.checkTab(N);return-1!=D&&this.tabs[D].remove(b)},se.prototype.dispose=function(){},se}(),Te=function(){function se(N,b){this.baseSize=0,this.mainWidth=0,this.mainHeight=0,this.minorWidth=0,this.minorHeight=0,this._curOpType=null,this.saveColor=null,this.saveType="image/jpg",this.scale=1,this.isKeepCanvasSize=!1,this.baseSize=N=N||4032;var D=document.createElement("canvas"),O=document.createElement("canvas");D.id="dvs_used_as_offscreenCanvas_main",O.id="dvs_used_as_offscreenCanvas_minor",this.mainCanvas=D,this.minorCanvas=O,this.mainCtx=D.getContext("2d"),this.minorCtx=O.getContext("2d"),this._setCanvasSize(N,N),void 0!==b?this.isKeepCanvasSize=b:Object(s.u)()&&(this.isKeepCanvasSize=!0)}return se.prototype.reset=function(){this.scale=1,this.pageUid=null,this._curOpType=null},se.prototype.render=function(N){var b=this,O=N.pageUid,W=N.isMin,z=N.img,ve=N.page,xe=N.midData;if(O!==this.pageUid){this.ownerViewer=N.viewerUid,this.isMin=W,this.pageUid=O;var Me=1,J=z.naturalWidth,Ke=z.naturalHeight,et=Math.pow(Math.pow(J,2)+Math.pow(Ke,2),.5),rt=Math.max(J,Ke);this.isKeepCanvasSize?this.mainCanvas.width<rt&&(this.scale=Me=this.baseSize/rt):this.mainCanvas.width<et&&this._setCanvasSize(et,et),J*=Me,Ke*=Me,J=Math.floor(J),Ke=Math.floor(Ke),this._setMainSize(J,Ke),this._setMinorSize(J,Ke),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCtx.drawImage(z,0,0,J,Ke),this.minorCtx.drawImage(z,0,0,J,Ke),null==ve||ve.setNaturalSize(J,Ke);var ot=xe.edt.all.slice();xe.edt.reset(),ot.forEach(function(it){"rotate"===it.type?(xe.edt.rotate(it.angle,0,0,it.mode),b.rotate(it,ve,xe)):"flip"===it.type?(xe.edt.flip(it.direction),b.flip(it,ve,xe)):"crop"===it.type?(xe.edt.crop(it.left,it.top,it.width,it.height),b.crop(it,ve)):"erase"===it.type?(xe.edt.erase(it.left,it.top,it.width,it.height,it.color),b.erase(it,ve)):"changeSize"===it.type&&(xe.edt.changePageSize(it.width,it.height),b.changePageSize(it,ve))})}},se.prototype.rotate=function(N,b,D){var O=this,W=O.mainCanvas,z=O.minorCanvas,ve=O.mainCtx,xe=O.minorCtx,Me=null,J=this.mainWidth,Ke=this.mainHeight,et=1,rt=0,ot=!1;if(0===N.mode){if(J=(Me=Object(s.E)(0,0,this.minorWidth,this.minorHeight,N.calcAngle)).width,Ke=Me.height,rt=Math.pow(Math.pow(J,2)+Math.pow(Ke,2),.5),ot=!this.isKeepCanvasSize&&this.mainCanvas.width<rt,this.isKeepCanvasSize){var it=Math.max(J,Ke);this.mainCanvas.width<it&&(et=this.baseSize/it)}J*=et,Ke*=et}null!==this._curOpType&&this._curOpType!==N.mode&&(Me&&ot&&this._setMinorCanvasSize(rt,rt),this._setMinorSize(this.mainWidth,this.mainHeight),this._clearRect(xe),xe.drawImage(W,0,0)),this._curOpType=N.mode,Me&&(ot&&this._setMainCanvasSize(rt,rt),this._setMainSize(J,Ke)),this._clearRect(ve),ve.save(),this._fillRect(ve,this.mainWidth,this.mainHeight),ve.translate(this.mainWidth/2,this.mainHeight/2),D.edt.setTransform(ve),ve.drawImage(z,0,0,this.minorWidth,this.minorHeight,-this.minorWidth*et/2,-this.minorHeight*et/2,this.minorWidth*et,this.minorHeight*et),ve.restore(),Me&&(null==b||b.setNaturalSize(J,Ke))},se.prototype.flip=function(N,b,D){var O=this.minorCanvas,W=this.mainCtx;this._clearRect(W),W.save(),this._fillRect(W,this.mainWidth,this.mainHeight),W.translate(this.mainWidth/2,this.mainHeight/2),D.edt.setTransform(W),W.drawImage(O,-this.minorWidth/2,-this.minorHeight/2),W.restore()},se.prototype.crop=function(N,b){var D=this,O=D.mainCanvas,W=D.minorCanvas,z=D.mainCtx,ve=D.minorCtx,xe=D.scale,Me=N.left,J=N.top,Ke=N.width,et=N.height;Me*=xe,J*=xe,this._setMinorSize(Ke*=xe,et*=xe),ve.drawImage(O,Me,J,Ke,et,0,0,Ke,et),this._setMainSize(Ke,et),z.drawImage(W,0,0),null==b||b.setNaturalSize(Ke,et)},se.prototype.erase=function(N,b){var D=this,O=D.mainCtx,W=D.minorCtx,z=D.scale,ve=N.left,xe=N.top,Me=N.width,J=N.height,Ke=N.color;ve*=z,xe*=z,Me*=z,J*=z,Ke=Ke||"#ffffff",W.save(),W.fillStyle=Ke,W.fillRect(ve,xe,Me,J),W.restore(),O.save(),O.fillStyle=Ke,O.fillRect(ve,xe,Me,J),O.restore()},se.prototype.changePageSize=function(N,b){var D=this,O=D.mainCanvas,W=D.minorCanvas,z=D.mainCtx,ve=D.minorCtx,xe=N.width,Me=N.height,J=this.scale,Ke=Math.pow(Math.pow(xe,2)+Math.pow(Me,2),.5);if(this.isKeepCanvasSize){var et=Math.max(xe,Me);this.mainCanvas.width<et&&(this.scale=J=this.baseSize/et)}else this.mainCanvas.width<Ke&&this._setMinorCanvasSize(Ke,Ke);this._setMinorSize(xe*=J,Me*=J),ve.drawImage(O,0,0,this.mainWidth,this.mainHeight,0,0,xe,Me),this.isKeepCanvasSize||this.mainCanvas.width<Ke&&this._setMainCanvasSize(Ke,Ke),this._setMainSize(xe,Me),z.drawImage(W,0,0),null==b||b.setNaturalSize(xe,Me)},se.prototype._clearRect=function(N){N.clearRect(0,0,N.canvas.width,N.canvas.height)},se.prototype._fillRect=function(N,b,D){return N.save(),N.fillStyle=this.saveColor,N.fillRect(0,0,b,D),N.restore(),!0},se.prototype._setMainSize=function(N,b){this.mainWidth=N,this.mainHeight=b},se.prototype._setMinorSize=function(N,b){this.minorWidth=N,this.minorHeight=b},se.prototype._setCanvasSize=function(N,b){this.mainCanvas.width=N,this.mainCanvas.height=b,this.minorCanvas.width=N,this.minorCanvas.height=b},se.prototype._setMainCanvasSize=function(N,b){this.mainCanvas.width=N,this.mainCanvas.height=b},se.prototype._setMinorCanvasSize=function(N,b){this.minorCanvas.width=N,this.minorCanvas.height=b},se}();function Ge(){onmessage=function(se){var N=se.data.core,b=se.data.width_source,D=se.data.height_source,O=se.data.width,W=se.data.height,z=b/O,ve=D/W,xe=Math.ceil(z/2),Me=Math.ceil(ve/2),J=null;try{J=new Uint8ClampedArray(se.data.source)}catch(ni){J=new Uint8Array(se.data.source)}var Ke=O*W*4,et=new ArrayBuffer(Ke),rt=null;try{rt=new Uint8ClampedArray(et,0,Ke)}catch(ni){rt=new Uint8Array(et,0,Ke)}for(var ot=0;ot<W;ot++)for(var it=0;it<O;it++){var pt=4*(it+ot*O),ft=0,mt=0,Et=0,Dt=0,Lt=0,kt=0,Mt=0,Vt=ot*ve,Kt=Math.floor(it*z),vr=Math.ceil((it+1)*z),Ar=Math.floor(ot*ve),Yr=Math.ceil((ot+1)*ve);vr=Math.min(vr,b),Yr=Math.min(Yr,D);for(var en=Ar;en<Yr;en++)for(var Br=Math.abs(Vt-en)/Me,ri=it*z,On=Br*Br,tn=Kt;tn<vr;tn++){var Dr=Math.abs(ri-tn)/xe,rn=Math.sqrt(On+Dr*Dr);if(!(rn>=1)){var xr=4*(tn+en*b);Mt+=(ft=2*rn*rn*rn-3*rn*rn+1)*J[xr+3],Et+=ft,J[xr+3]<255&&(ft=ft*J[xr+3]/250),Dt+=ft*J[xr],Lt+=ft*J[xr+1],kt+=ft*J[xr+2],mt+=ft}}rt[pt]=Dt/mt,rt[pt+1]=Lt/mt,rt[pt+2]=kt/mt,rt[pt+3]=Mt/Et}var Kr={core:N,target:rt};try{postMessage(Kr,[rt.buffer])}catch(ni){postMessage(Kr,null)}}}var je=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),he=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},ae=function(se){function N(b,D,O){var W=se.call(this,D)||this;W._defaultConfig={container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showSelectBox:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical"},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}},W._ViewUi=null,W._scrBarW=0,W._q=[],W.loader=[!1,!1,!1,!1],W._cors=!0,W._outW=4096,W._outH=4096,W._minW=800,W._minH=800,W._group={},W._resizeCb=null,W._focus={viewerId:void 0,thumbnailId:void 0},W.isCanvasInit=!1,W.width=0,W.height=0,W.tempWidth=0,W.tempHeight=0,W.offScreenCanvas=null,W.vws=[],W._db=O,W._tabMng=new be,W._mPub=new a.a,W.offScreenCanvas=new Te(b.baseCanvasSize,b.isKeepCanvasSize);var z=document.createElement("canvas");z.id="dvs_generate_min_cvs",W.canvas=z;var ve=document.createElement("canvas");return ve.id="dvs_saveTransformation_cvs",W.saveCanvas=ve,W._initTopEvent(),W._initViewerEvent(),Object(s.A)(b,W._defaultConfig),Object(s.t)()||Object(s.u)()||W.initWorkerUlr(),W._getScrBarW(),W.createViewer(),W}return je(N,se),N.prototype._initTopEvent=function(){var b=this;this.on(o.b.LOAD_TO_VIEWER,function(D,O,W,z){b._load(D,O,W,z)}),this.on(o.b.OPEN_TO_VIEWER,function(D,O,W){b._open(D,O,W)}),this.on(o.b.RENAME_TAG,function(D,O,W,z){var ve=b._tabMng.getTab(z);ve&&ve.vws.forEach(function(xe){var Me=b.uidViewer(xe);Me&&Me.vm.renameTag(D,O,z)})}),this.on(o.b.EMPTY_TAG,function(D,O,W){var z=b._tabMng.getTab(W);z&&z.vws.forEach(function(ve){var xe=b.uidViewer(ve);xe&&xe.vm.emptyTag(W)})}),this.on(o.b.ADD_PAGE_TAG,function(D,O,W){var z=b._tabMng.getTab(W);z&&z.vws.forEach(function(ve){var xe=b.uidViewer(ve);xe&&xe.vm.addPageTag(D,W)})}),this.on(o.b.REMOVE_PAGE_TAG,function(D,O,W){var z=b._tabMng.getTab(W);z&&z.vws.forEach(function(ve){var xe=b.uidViewer(ve);xe&&xe.vm.rmPageTag(D,W)})}),this.on(o.b.REMOVE_FILE,function(D){b.emit(o.b.REMOVE_PAGE,{},D.chs.slice());var O=b._tabMng.getTab(D.uid);O&&(O.vws.forEach(function(W){var z=b.uidViewer(W);z&&z.closeTab(D.uid)}),b._tabMng.removeTab(D.uid))}),this.on(o.b.TAG_CHANGED,function(D){b.vws.forEach(function(O){O.vm.changeTag(D)})}),this.on(o.d.DIRECTORY_CHANGED,function(D){b.vws.forEach(function(O){O.vm.changeDir(D)})}),this.on(o.b.UPDATE_FOR_VIEWER,function(D,O){var W=b._db.getMid(D);W&&(D===b.offScreenCanvas.pageUid&&b.offScreenCanvas.reset(),b._tabMng.tabs.forEach(function(z){-1!==z.chs.indexOf(D)&&z.vws.forEach(function(ve){var xe=b.uidViewer(ve);xe&&(xe.vm.updateSync(D,z.uid,O),xe.vm.showThbItem(D))})}),W.minData||b._loadMinPic(D))})},N.prototype._initViewerEvent=function(){var b=this;this.onM("dvsRenderMainPage",function(D,O){D.forEach(function(W){var z=b.uidViewer(W);z&&z.vm.renderMainPage(O)})}),this.onM(o.b.APPEND_SYNC,function(D,O){b.emit(o.b.APPEND_SYNC,D,O)}),this.onM(o.b.UPDATE_SYNC,function(D,O,W){b.emit(o.b.UPDATE_SYNC,D,O,W)}),this.onM(o.d.ERROR,function(D){b._err(D)}),this.onM(o.b.LOAD_PAGE,function(D){b._loadMinPic(D)}),this.onM(o.b.CHANGE_PAGE,function(D,O,W){b._getGroup(D).forEach(function(z){if(z.uid!==D)switch(O){case"first":z.vm.firstPage(!1);break;case"last":z.vm.lastPage(!1);break;case"next":z.vm.nextPage(!1);break;case"prev":z.vm.prevPage(!1);break;case"goto":z.vm.gotoPage(W,!1);break;case"cur":z.vm.setCurIndex(W,!1);break;case"slt":z.vm.setSltPages(W,!1)}})}),this.onM(o.b.REORDER_PAGE,function(D,O,W,z,ve){var xe=b._tabMng.getTab(O.uid);if(xe){var Me=xe.uid;xe.vws.forEach(function(J){if(D!==J){var Ke=b.uidViewer(J);if(Ke)switch(W){case"switch":Ke.vm.switchPage(z,ve,!1,Me);break;case"move":Ke.vm.movePage(z,ve,!1,Me);break;case"reorder":Ke.vm.reorderPage(z,ve,!1,Me)}}}),xe[W](z,ve),b.emit(o.b.REORDER_PAGE,O,W,z,ve)}}),this.onM(o.b.REMOVE_PAGE,function(D,O,W){b.vws.forEach(function(z){z.uid!==D&&z.vm.remove(W,!1,O.uid)}),W.forEach(function(z){b._tabMng.tabs.forEach(function(ve){ve.remove(z)})}),b.emit(o.b.REMOVE_PAGE,O,W)}),this.onM(o.b.EDIT,function(D,O){var W=O.uid,z=b._db.getMid(W);if(z){if(b._loadMinPic(W),z.vws.length){var ve=b.offScreenCanvas;if(ve.pageUid===W)switch(D){case"rotate":ve.rotate(O.rotateObj,O.page,O.interlayerData);break;case"flip":ve.flip(O.flipObj,O.page,O.interlayerData);break;case"crop":ve.crop(O.cropObj,O.page);break;case"erase":ve.erase(O.eraseObj,O.page);break;case"changePageSize":ve.changePageSize(O.changeSizeObj,O.page);break;case"reset":ve.reset()}}z.vws.forEach(function(xe){var Me=b.uidViewer(xe);Me&&Me.vm.uidIdx(W)===Me.vm.getCurIndex()&&Me.vm.render()})}}),this.onM(o.b.REMOVE_VIEWER_UID,function(D,O){var W=b._tabMng.getTab(D);W&&W.removeViewer(O)})},N.prototype._getGroup=function(b){var D=this,O=[],W=this.uidViewer(b);return W&&this._group[W.group].forEach(function(z){var ve=D.uidViewer(z);ve&&O.push(ve)}),O},N.prototype._loadMinPic=function(b){for(var D=this._q,O=-1,W=0;W<this.loader.length;W++)if(!this.loader[W]){O=W;break}-1!==O?(this.loader[O]=!0,this.runLoader(b,O)):-1===D.indexOf(b)&&D.push(b)},N.prototype._convertData=function(b){return new Promise(function(D,O){if(Object(s.w)(b))D(b);else{var W=new XMLHttpRequest;W.onload=function(){var z=s.a.createURL(W.response);D(z)},W.open("GET",b,!0),W.responseType="blob",W.send()}})},N.prototype.runLoader=function(b,D){var O=this,W=this._db.getMid(b);if(W&&W.minData&&W.vws.forEach(function(Ke){var et=-1;O.vws.some(function(rt,ot){if(rt.uid===Ke)return et=ot,!0}),-1!==et&&O.vws[et].vm.showThbItem(b)}),!W||W.activeMin||W.minData){var z=this._q.shift();z?this.runLoader(z,D):this.loader[D]=!1}else{W.activeMin=!0;var ve=Object(s.I)(11);W.minTask=ve;var xe=!1,Me=new Promise(function(Ke,et){W.oriData?(xe=!0,Ke(W.oriData)):O._db.getDataAsync(b).then(function(rt){if(Object(s.y)(rt.oriData)&&(xe=!0),10===document.documentMode)O._convertData(rt.oriData).then(function(it){Ke(it)});else{var ot=s.a.createURL(rt.oriData);Ke(ot)}}).catch(function(rt){et(rt)})}),J=new Promise(function(Ke,et){Me.then(function(rt){var ot=new Image;O._cors&&(ot.crossOrigin="anonymous"),ot.src=rt,ot.onload=function(){var it=O._db.getMid(b);if(!it||it.minTask!==ve)return et("task cancel or page does not exist");ot.onload=null,ot.onerror=null,Ke(ot)},ot.onerror=function(it){return ot.onload=null,ot.onerror=null,et(it)}}).catch(function(rt){et(rt)})});new Promise(function(Ke,et){J.then(function(rt){var ot=O._db.getMid(b);if(!ot||ot.minTask!==ve)return et("task cancel or page does not exist");O.vws[0].getCurrentTab();var it=O.offScreenCanvas;it.render({viewerUid:"",pageUid:b,isMin:!0,img:rt,page:null,midData:ot});var pt=rt.naturalWidth/rt.naturalHeight,ft=1;pt>=1&&it.mainWidth>O._minW?ft=O._minW/it.mainWidth:pt<1&&it.mainHeight>O._minH&&(ft=O._minH/it.mainHeight);var mt=it.mainWidth*ft,Et=it.mainHeight*ft,Dt=O.canvas,Lt=Dt.getContext("2d");Dt.width!==mt&&(Dt.width=mt),Dt.height!==Et&&(Dt.height=Et),Lt.drawImage(it.mainCanvas,0,0,it.mainWidth,it.mainHeight,0,0,mt,Et),(ot.overlays||[]).forEach(function(kt){Lt.save(),Lt.globalAlpha=kt.opacity,Lt.fillStyle=kt.color,Lt.fillRect(kt.left*ft,kt.top*ft,kt.width*ft,kt.height*ft),Lt.restore()}),!xe&&rt.src&&(s.a.revokeObjectURL(rt.src),rt.src=""),Dt.toBlob(function(kt){var Mt=O._db.getMid(b);Mt&&Mt.minTask===ve||et("task cancel or page does not exist"),Ke(kt)},"image/png")}).catch(function(rt){et(rt)})}).then(function(Ke){var et=s.a.createURLWithType(Ke),rt=O._db.getMid(b);rt&&rt.minTask===ve&&(rt.activeMin=!1,rt.minData=et.data,rt.vws.forEach(function(it){var pt=-1;O.vws.some(function(ft,mt){if(ft.uid===it)return pt=mt,!0}),-1!==pt&&O.vws[pt].vm.showThbItem(b)}));var ot=O._q.shift();ot?O.runLoader(ot,D):O.loader[D]=!1}).catch(function(Ke){var et=O._db.getMid(b);et&&et.minTask===ve&&(et.activeMin=!1);var rt=O._q.shift();rt?O.runLoader(rt,D):O.loader[D]=!1})}},N.prototype._fillRect=function(b,D,O){return b.save(),b.fillStyle="#ffffff",b.fillRect(0,0,D,O),b.restore(),!0},N.prototype._open=function(b,D,O){var W=this,z=b.uid,ve=b.chs.slice(),xe=this._tabMng.getTab(z);xe||(xe=this._tabMng.addTab({uid:z,name:b.name,type:D,chs:[]},O)),xe.chs=ve;var Me=this.vws,J=null;if(O){if(0===(J=this._getGroup(O).map(function(Ke){return Ke.uid})).length)return void this._err(o.a.PARAMETER_INVALID);Me=(J=Object(s.J)(he(J,xe.vws))).map(function(Ke){return W.uidViewer(Ke)})}Me.forEach(function(Ke){if(Ke){xe.addViewer(Ke.uid);var et=Ke.vm.tabHandler(xe,null,!0);et&&Ke.vm.showTab(et,"filter")}})},N.prototype._load=function(b,D,O,W){var z=this,ve=b.uid,xe=b.chs.slice(),Me=this._tabMng.getTab(ve);Me||(Me=this._tabMng.addTab({uid:ve,name:b.name,type:D,chs:[]})),this.vws.forEach(function(J){Me.addViewer(J.uid)}),Me.chs=xe,Me.vws.forEach(function(J){var Ke,et=z.uidViewer(J);if(et){Me.chs.forEach(function(it){var pt=z._db.getMid(it);pt&&pt.addViewer(et.uid)});var rt=null;"all"!==Me.type.toLowerCase()&&(rt=O);var ot=null===(Ke=et.vm)||void 0===Ke?void 0:Ke.tabHandler(Me,rt,!1);ot&&et.vm.showTab(ot)}})},N.prototype.bindViewUi=function(b){if(!Object(s.s)(b))return this.emit(o.d.ERROR,o.a.PARAM_TYPE),!1;this._ViewUi=b,this.vws.forEach(function(D){D.ViewUi=b})},N.prototype.createViewer=function(b,D){var O=this;void 0===b&&(b={});var W=null,z=[],ve=null;if(D){if(!(ve=this.uidViewer(D)))return this._err(o.a.PARAMETER_INVALID),null;z=this._group[W=ve.group]}else W=Object(s.I)(11),this._group[W]=z;var xe=Object(s.d)(this._defaultConfig);Object(s.A)(b,xe);var Me={config:xe,viewUi:this._ViewUi,workerBlobURL:this._hermiteWorkerUrl,scrollbarWidth:this._scrBarW,groupUid:W,defaultConfig:this._defaultConfig,mPub:this._mPub.getPublishSubscribe(),focus:this._focus,db:this._db,offScreenCanvas:this.offScreenCanvas,saveCanvas:this.saveCanvas},J=new G(Me),Ke=J.uid;if(this.vws.push(J),z.push(Ke),ve){var et=ve.vm.getCurTab();if(et){et.chs.forEach(function(it){var pt=O._db.getMid(it.uid);pt&&pt.addViewer(Ke)});var rt=this._tabMng.getTab(et.uid);rt.vws.push(Ke);var ot=J.vm.tabHandler(rt,null,!0);ot&&(ot.setCur(et.cur),ot.setSlt(et.slt.slice()),J.vm.showTab(ot,"filter"))}}return this.emit(o.d.LOG,"Invoking ViewControl#createViewer."),J},N.prototype.removeViewer=function(b){var D,O,W=this;if(!b)return!1;var z=b,ve=null,xe=null;Object(s.w)(b)&&(z=b.uid,ve=b);for(var Me=0;Me<this.vws.length;Me++)if(this.vws[Me].uid===z){ve=this.vws[Me],xe=Me;break}if(null===xe)return!1;var J=this._group[ve.group];if(J){var Ke=J.indexOf(z);J.splice(Ke,1),0===J.length&&delete this._group[ve.group]}for(var et in null===(O=null===(D=this._tabMng)||void 0===D?void 0:D.tabs)||void 0===O||O.forEach(function(rt){rt.removeViewer(ve.uid)&&rt.chs.forEach(function(ot){var it=W._db.getMid(ot);it&&it.rmViewer(ve.uid)})}),ve.unbindView(),ve.dispose(),ve)ve[et]=null,delete ve[et];return this.vws.splice(xe,1),this.emit(o.d.LOG,"Invoking ViewControl#removeViewer."),!0},N.prototype.uidViewer=function(b){if(!b)return this.vws[0]||null;for(var D=0,O=this.vws.length;D<O;D++){var W=this.vws[D];if(W.uid===b)return W}return null},N.prototype.idxViewer=function(b){return b>=this.vws.length||b<0?null:this.vws[b]},N.prototype.dispose=function(){var b,D,O,W=this;se.prototype.dispose.call(this),null===(b=this._mPub)||void 0===b||b.dispose(),this._mPub=null,null===(D=this._tabMng)||void 0===D||D.dispose(),this._tabMng=null,null===(O=this.vws)||void 0===O||O.forEach(function(z){W.removeViewer(z)}),this._hermiteWorkerUrl&&(s.a.revokeObjectURL(this._hermiteWorkerUrl),this._hermiteWorkerUrl=null),this.vws=null,this.offScreenCanvas.reset()},N.prototype._getScrBarW=function(){var b=document.createElement("div"),D=document.createElement("div");b.appendChild(D),b.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),D.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(b);var O=b.offsetWidth-b.clientWidth;document.body.removeChild(b),this._scrBarW=O,this.vws.forEach(function(W){W.vm.setScrBarW(O)})},N.prototype.initWorkerUlr=function(){this._hermiteWorkerUrl=s.a.createURL(new Blob(["("+Ge.toString()+")()"],{type:"application/javascript"}))},N.prototype.on=function(b,D){se.prototype._on.call(this,b,D)},N.prototype.emit=function(b){for(var D=[],O=1;O<arguments.length;O++)D[O-1]=arguments[O];se.prototype._emit.apply(this,he([b],D))},N.prototype.onM=function(b,D){this._mPub._on(b,D)},N.prototype.emitM=function(b){for(var D,O=[],W=1;W<arguments.length;W++)O[W-1]=arguments[W];(D=this._mPub)._emit.apply(D,he([b],O))},N.prototype._err=function(b){this.emit(o.d.ERROR,b)},N.prototype._ok=function(){this.emit(o.d.ERROR,o.a.OK)},N}(a.a),V=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),Q=function(se){function N(b,D,O){var W=se.call(this,D)||this;return W._vwMng=null,W._vwMng=new ae(b,D,O),W}return V(N,se),N.prototype.createViewer=function(b,D){return void 0===b&&(b={}),this._vwMng.createViewer(b,D)},N.prototype.getViewerByUid=function(b){return this._vwMng.uidViewer(b)},N.prototype.getViewerByIndex=function(b){return this._vwMng.idxViewer(b)},N.prototype.removeViewer=function(b){return this._vwMng.removeViewer(b)},N.prototype.getViewerList=function(){return this._vwMng.vws.slice()},N.prototype.bindViewUiConstructor=function(b){return this._vwMng.bindViewUi(b)},N.prototype.dispose=function(){var b;se.prototype.dispose.call(this),null===(b=this._vwMng)||void 0===b||b.dispose(),this._vwMng=null},N}(a.a),me=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),H=function(se){function N(b){var D=se.call(this,b)||this;return D.name=b.name,D.type=b.type,D.parent=b.parent||null,D}return me(N,se),N.prototype.removeChildren=function(b,D){var O=this.chs.length;if(O){for(var W=0;W<O;W++){var z=this.chs[W];if(z.name===b&&z.type===D)return this.chs.splice(W,1)[0]}return!1}return!1},N.prototype.setName=function(b){this.name=b},N.prototype.reorder=function(b){return("file"===this.type||"all"===this.type)&&se.prototype.reorder.call(this,b)},N}(L),j=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),q=function(se){function N(b){var D=se.call(this,b)||this;return D.all=null,D.open=!0,D.dfNode=null,D.root=new H({uid:Object(s.I)(11),name:"root",type:"root",parent:null,chs:[]}),D.dfNode=D.root,D.all=new H({uid:Object(s.I)(11),name:"All",type:"file"}),D.curNode=D.root,D.selectedNodeId=null,D._initEvent(),D}return j(N,se),N.prototype.dispose=function(){se.prototype.dispose.call(this)},N.prototype._initEvent=function(){var b=this;se.prototype._on.call(this,o.b.LOAD_FILE,function(D,O,W){var z=W,ve=b.findChild(b.dfNode,D);ve||(ve=b.createFile(D),se.prototype._emit.call(b,o.d.DIRECTORY_CHANGED,b.dfNode)),O.forEach(function(xe){void 0!==W?ve.insert(xe.uid,z++):ve.append(xe.uid),b.all.append(xe.uid)}),se.prototype._emit.call(b,o.b.LOAD_TO_VIEWER,ve,"file",W,b.open),se.prototype._emit.call(b,o.b.LOAD_TO_VIEWER,b.all,"all",W,!1)}),se.prototype._on.call(this,o.b.REORDER_PAGE,function(D,O,W,z){var ve=null;if("file"===D.type){if(!(ve=b._find(D.uid,b.root)))return}else{if("all"!==D.type)return;ve=b.all}ve[{switch:"switch",move:"move",reorder:"reorder"}[O]](W,z)}),se.prototype._on.call(this,o.b.REMOVE_PAGE,function(D,O){O.forEach(function(W){b.all.remove(W),b._rmPage(W,b.root)})})},N.prototype._rmPage=function(b,D){var O=this;if(!(D.chs.length<1))return D.chs[0].uid?void D.chs.forEach(function(W){O._rmPage(b,W)}):D.remove(b)},N.prototype.createFile=function(b){var D=this.dfNode;D||(D=this.root);var O=this.findChild(D,b);return O&&"file"===O.type?(se.prototype._emit.call(this,o.d.ERROR,o.a.FILE_EXIST),O):(O=new H({uid:Object(s.I)(11),name:b,type:"file",parent:D,chs:[]}),this.curNode.chs.push(O),se.prototype._emit.call(this,o.d.ERROR,o.a.OK),O)},N.prototype.openAll=function(b){return se.prototype._emit.call(this,o.b.OPEN_TO_VIEWER,this.all,"all",null,b),this.all.chs.slice()},N.prototype.openFile=function(b,D){var O=this.findChild(this.dfNode,b);return O&&"file"===O.type?(se.prototype._emit.call(this,o.b.OPEN_TO_VIEWER,O,"file",null,D),se.prototype._emit.call(this,o.d.ERROR,o.a.OK),O.chs.slice()):(se.prototype._emit.call(this,o.d.ERROR,o.a.FILE_NOT_EXIST),!1)},N.prototype.removeFile=function(b){for(var D=this.dfNode.chs,O=0;O<D.length;O++)if(D[O].name===b)return se.prototype._emit.call(this,o.b.REMOVE_FILE,D[O]),D.splice(O,1),se.prototype._emit.call(this,o.d.ERROR,o.a.OK),!0;return se.prototype._emit.call(this,o.d.ERROR,o.a.FILE_NOT_EXIST),!1},N.prototype.getCurrentFileList=function(){return this.dfNode.chs.slice()},N.prototype._getSpiltIndex=function(b){for(var D=b.length,O=0;O<D;O++)if("folder"!==b[O].type)return O;return D},N.prototype.findChild=function(b,D){if(b.chs.length>=0){var O=b.chs.filter(function(W){return W.name===D});return O.length?O[0]:null}return null},N.prototype._find=function(b,D){for(var O=D.chs,W=O.length,z=0;z<W;z++){if(O[z].uid===b)return O[z];if(O[z].children){var ve=this._find(b,O[z]);if(ve)return ve}}},N.prototype._err=function(b){se.prototype._emit.call(this,o.d.ERROR,b)},N.prototype._ok=function(){se.prototype._emit.call(this,o.d.ERROR,o.a.OK)},N}(a.a),re=function(){function se(N){this.autoOpen=!0,this._tree=new q(N.pubsub)}return se.prototype.dispose=function(){var N;null===(N=this._tree)||void 0===N||N.dispose(),this._tree=null},se.prototype.setDefaultFolder=function(N){this._tree.dfNode=N},se.prototype.openAll=function(){return this._tree.openAll()},se.prototype.getAllContents=function(){return this._tree.all.chs.slice()},se.prototype.openFile=function(N,b){return this._tree.openFile(N,b)},se.prototype.createFile=function(N){return this._tree.createFile(N)},se.prototype.removeFile=function(N){return this._tree.removeFile(N)},se.prototype.getCurrentFileList=function(){return this._tree.getCurrentFileList()},se}(),de=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),le=function(se){function N(b){var D=se.call(this,b)||this;return D.name=b.name,D.chs=b.chs||[],D.uid=b.uid||Object(s.I)(11),D}return de(N,se),N}(L),we=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),Ae=function(se){function N(b){var D=se.call(this,b)||this;return D.tags=[],D.dfName=null,D.dfUid=null,D.sltUid=null,D.emptyItem=new le({name:"defaultTag",chs:[]}),D._initEvent(),D}return we(N,se),N.prototype.dispose=function(){se.prototype.dispose.call(this),this.tags=[]},N.prototype._initEvent=function(){var b=this;se.prototype._on.call(this,o.b.LOAD_TAG,function(D){var O=!1,W=D.data;W.tags||(W.tags=[]),b.dfName&&-1===W.tags.indexOf(b.dfName)&&W.tags.push(b.dfName),W.tags.forEach(function(z){b.addTag(z)&&(O=!0);var ve=b.getTag(z);ve.append(D.uid),se.prototype._emit.call(b,o.b.LOAD_TO_VIEWER,ve,"tag",null,null,!1)}),O&&se.prototype._emit.call(b,o.b.TAG_CHANGED,b.getTagList())}),se.prototype._on.call(this,o.b.REORDER_PAGE,function(D,O,W,z){if("tag"===D.type){var ve=b.uidTag(D.uid);ve&&ve[{switch:"switch",move:"move",reorder:"reorder"}[O]](W,z)}}),se.prototype._on.call(this,o.b.REMOVE_PAGE,function(D,O){b.getTagList().forEach(function(W){O.forEach(function(z){W.remove(z)})})})},N.prototype.openTag=function(b,D){var O=this.getTag(b);return O||(this._err(o.a.TAG_NOT_EXIST),O=this.emptyItem),this.setDefaultTag(b),this.sltUid=O.uid,se.prototype._emit.call(this,o.b.OPEN_TO_VIEWER,O,"tag",D),this._ok(),O.chs.slice()},N.prototype.getCurTag=function(){return this.uidTag(this.sltUid)},N.prototype.addTag=function(b,D){if(-1!==this.checkTag(b))return!1;var O=new le({name:b,chs:D||[]});return this.tags.push(O),!0},N.prototype.removeTag=function(b){var D=this.checkTag(b);return-1!==D&&(b===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(D,1),!0)},N.prototype.emptyTag=function(b){var D=this.getTag(b);return!!D&&(D.clear(),!0)},N.prototype.clear=function(){return this.tags=[],!0},N.prototype.getTagContents=function(b){var D=this.getTag(b);return D?D.chs.slice():null},N.prototype.getDefaultTag=function(){return this.dfName},N.prototype.setDefaultTag=function(b){if(!b)return this.dfName=null,this.dfUid=null,!0;var D=this.checkTag(b);if(-1===D)return!1;var O=this.tags[D];return this.dfName=b,this.dfUid=O.uid,!0},N.prototype.renameTag=function(b,D){if(!Object(s.y)(b)||!Object(s.y)(D))return this._err(o.a.PARAM_TYPE),!1;var O=this.getTag(D),W=this.getTag(b);if(!W)return this._err(o.a.TAG_NOT_EXIST),!1;if(O)return this._err(o.a.TAG_HAVE_EXIST),!1;W.name=D;var z=W.chs.slice();return se.prototype._emit.call(this,o.b.RENAME_TAG,b,D,z,W.uid),this._ok(),!0},N.prototype.checkTag=function(b){for(var D=this.tags.length,O=0;O<D;O++)if(this.tags[O].name===b)return O;return-1},N.prototype.getTagList=function(){return this.tags},N.prototype.getTag=function(b){var D=this.checkTag(b);return-1===D?null:this.tags[D]},N.prototype.uidTag=function(b){for(var D=this.tags.length,O=0;O<D;O++)if(this.tags[O].uid===b)return this.tags[O];return null},N.prototype._err=function(b){se.prototype._emit.call(this,o.d.ERROR,b)},N.prototype._ok=function(){se.prototype._emit.call(this,o.d.ERROR,o.a.OK)},N}(a.a),Se=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},ye=function(){function se(N){this._mng=new Ae(N.pubsub)}return se.prototype.dispose=function(){var N;null===(N=this._mng)||void 0===N||N.dispose(),this._mng=null},se.prototype.getTagList=function(){var N=[];return this._mng.tags.forEach(function(b){var D={name:b.name,uids:b.chs.slice()};N.push(D)}),N},se.prototype.addTag=function(N){return Object(s.y)(N)?!!this._mng.addTag(N)||(this._err(o.a.TAG_HAVE_EXIST),!1):(this._err(o.a.PARAM_TYPE),!1)},se.prototype.removeTag=function(N){var b=this,D=this._mng.getTag(N);return D?(D.chs.slice().forEach(function(O){b.removePageTag(O,N)}),this._ok(),this._mng.removeTag(N)):(this._err(o.a.TAG_NOT_EXIST),!1)},se.prototype.emptyTag=function(N){if(!Object(s.y)(N))return this._err(o.a.PARAM_TYPE),!1;var b=this._mng.uidTag(N);if(!N)return this._err(o.a.TAG_NOT_EXIST),!1;var D=b.chs.slice();return this._emit(o.b.EMPTY_TAG,N,D,b.uid),this._ok(),this._mng.emptyTag(N)},se.prototype.openTag=function(N,b){return this._mng.openTag(N,b)},se.prototype.getCurrentTag=function(){return this._mng.getCurTag()},se.prototype.getTagContents=function(N){return this._mng.getTagContents(N)},se.prototype.getDefaultTag=function(){return this._mng.getDefaultTag()},se.prototype.setDefaultTag=function(N){return this._mng.setDefaultTag(N)},se.prototype.addPageTag=function(N,b){Object(s.y)(N)&&Object(s.y)(b)||this._err(o.a.PARAM_TYPE);var D=this._mng.getTag(b);return D?D.append(N)?(this._emit(o.b.ADD_PAGE_TAG,N,b,D.uid),this._emit(o.b.TAG_CHANGED,this._mng.tags),this._ok(),!0):(this._err(o.a.TAG_HAVE_EXIST),!1):(this._err(o.a.TAG_NOT_EXIST),!1)},se.prototype.removePageTag=function(N,b){var D=this;if(Object(s.y)(N)||this._err(o.a.PARAM_TYPE),void 0===b)this._mng.getTagList().forEach(function(z){z.remove(N),D._emit(o.b.REMOVE_PAGE_TAG,N,z.name,z.uid)});else{Object(s.y)(b)||this._err(o.a.PARAM_TYPE);var O=this._mng.getTag(b);if(!O)return this._err(o.a.TAG_NOT_EXIST),!1;if(!O.remove(N))return this._err(o.a.PAGE_NOT_EXIST),!1;this._emit(o.b.REMOVE_PAGE_TAG,N,b,O.uid)}var W=this._mng.getTagList();return this._emit(o.b.TAG_CHANGED,W),!0},se.prototype.renameTag=function(N,b){return this._mng.renameTag(N,b)},se.prototype._emit=function(N){for(var b,D=[],O=1;O<arguments.length;O++)D[O-1]=arguments[O];(b=this._mng)._emit.apply(b,Se([N],D))},se.prototype._err=function(N){this._emit(o.d.ERROR,N)},se.prototype._ok=function(){this._emit(o.d.ERROR,o.a.OK)},se}(),Fe=function(){function se(){this._d={}}return se.prototype.addDataSync=function(N,b){return!this._check(N)&&(this._d[N]=b,!0)},se.prototype.getDataSync=function(N){return this._d[N]},se.prototype.removeDataSync=function(N){return!!this._check(N)&&(delete this._d[N],!0)},se.prototype.updateDataSync=function(N,b){return!!this._check(N)&&(this._d[N]=b,!0)},se.prototype._check=function(N){return void 0!==this._d[N]},se}(),Ve=function(){function se(N,b){this._d={},this.createDatabase(N,b)}return se.prototype.createDatabase=function(N,b){this._d[N]={},this._d[N][b]={}},se.prototype.addDataAsync=function(N,b,D,O){var W=this;return new Promise(function(z,ve){return W._checkDB(D)?W._checkTable(D,O)?W._checkId(D,O,N)?ve("The "+N+" already exists."):(W._d[D][O][N]=b,void z("Save "+N+" to database successful.")):ve(W._erMsg(1,O)):ve(W._erMsg(0,D))})},se.prototype.getDataAsync=function(N,b,D){var O=this;return new Promise(function(W,z){return O._checkDB(b)?O._checkTable(b,D)?O._checkId(b,D,N)?void W(O._d[b][D][N]):z(O._erMsg(2,N)):z(O._erMsg(1,D)):z(O._erMsg(0,b))})},se.prototype.removeDataAsync=function(N,b,D){var O=this;return new Promise(function(W,z){return O._checkDB(b)?O._checkTable(b,D)?(delete O._d[b][D][N],void W("Remove "+N+" successful.")):z(O._erMsg(1,D)):z(O._erMsg(0,b))})},se.prototype.updateDataAsync=function(N,b,D,O){var W=this;return new Promise(function(z,ve){return W._checkDB(D)?W._checkTable(D,O)?W._checkId(D,O,N)?(W._d[D][O][N]=b,void z("Update "+N+" successful.")):ve(W._erMsg(2,N)):ve(W._erMsg(1,O)):ve(W._erMsg(0,D))})},se.prototype._checkDB=function(N){return void 0!==this._d[N]},se.prototype._checkTable=function(N,b){return void 0!==this._d[N][b]},se.prototype._checkId=function(N,b,D){return void 0!==this._d[N][b][D]},se.prototype._erMsg=function(N,b){return"The "+["database","table","item"][N]+" "+b+" does not exist."},se}(),ke=function(){function se(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new Fe,this.metadataMng=new Fe,this.DBMng=new Ve(this.databaseName,this.documentTableName)}return se.prototype.addDataAsync=function(N,b,D,O){return this.DBMng.addDataAsync(N,b,D||this.databaseName,O||this.documentTableName)},se.prototype.getDataAsync=function(N,b,D){return this.DBMng.getDataAsync(N,b||this.databaseName,D||this.documentTableName)},se.prototype.removeDataAsync=function(N,b,D){return this.DBMng.removeDataAsync(N,b||this.databaseName,D||this.documentTableName)},se.prototype.updateDataAsync=function(N,b,D,O){return this.DBMng.updateDataAsync(N,b,D||this.databaseName,O||this.documentTableName)},se.prototype.addMid=function(N,b){return this.middle.addDataSync(N,b)},se.prototype.getMid=function(N){return this.middle.getDataSync(N)},se.prototype.removeMid=function(N){return this.middle.removeDataSync(N)},se.prototype.updateMid=function(N,b){return this.middle.updateDataSync(N,b)},se.prototype.addMetadata=function(N,b){return this.metadataMng.addDataSync(N,b)},se.prototype.getMetadata=function(N){return this.metadataMng.getDataSync(N)},se.prototype.removeMetadata=function(N){return this.metadataMng.removeDataSync(N)},se.prototype.updateMetadata=function(N,b){return this.metadataMng.updateDataSync(N,b)},se}(),$e=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),Le=function(se){function N(b){var D=se.call(this,b)||this;return D.errorMessage="ok",D.errorCode=0,D._on(o.d.ERROR,D.updateErrorMessage.bind(D)),D}return $e(N,se),N.prototype.updateErrorMessage=function(b){80003!==b.code&&(this.errorMessage=b.message,this.errorCode=b.code)},N}(a.a),fe=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),De=function(se){function N(b){var D=se.call(this,b)||this;return D.logs=[],D.allowLog=!0,D.logs.push(D._formatLog("Initialize DVS object.")),D.logs.push(D._formatLog("Initialize DVS object.")),D._on(o.d.LOG,D.updateLogMessage.bind(D)),D.logs.push(D._formatLog("Complete Log object initialization.")),D}return fe(N,se),N.prototype.updateLogMessage=function(b){var D;this.allowLog&&(null===(D=null==this?void 0:this.logs)||void 0===D||D.push(null==this?void 0:this._formatLog(b)))},N.prototype._formatLog=function(b){return Object(s.g)("yyyy-MM-dd hh:mm:ss")+" DVS: "+b},N.prototype.clear=function(){this.logs=[]},N.prototype.dispose=function(){se.prototype.dispose.call(this),this.logs=null},N}(a.a),Oe=window.Dynamsoft,Ne=t(4),Pe=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},ze=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}};function ge(se,N,b,D,O){return void 0===O&&(O={}),Pe(this,void 0,void 0,function(){var W,z,ve,xe;return ze(this,function(Me){switch(Me.label){case 0:return[4,N.DataControl.getData(b)];case 1:return W=Me.sent(),z=W.customData,ve=Ee(se),z?D&&(z.resBlob&&delete z.resBlob,z.preview&&delete z.preview):z={},O&&(xe=D?["angle","detectArea","filterValue"]:["angle","detectArea","filterValue","resBlob","preview"],Object(Ne.each)(xe,function(J){void 0!==O[J]&&(z[J]=O[J])}),!z.oriBlob&&O.oriBlob&&(z.oriBlob=O.oriBlob)),N.DataControl.updateSync(b,{oriData:se.imageData,metadata:ve,customData:z},!0),[2,!0]}})})}function Ee(se){return{width:se.imageWidth,height:se.imageHeight,bitDepth:se.imageBitDepth,resolutionX:se.imageXResolution,resolutionY:se.imageYResolution,rgba:se.rgba,bgra:se.bgra}}function Ue(){var se=document.querySelectorAll(".preFilter");if(se)for(var N=0;N<se.length;N++){var b=se[N];b&&"IMG"==b.tagName&&b.src&&(s.a.revokeObjectURL(b.src),b.onload=null,b.parentNode.remove())}}function Be(){var se;Ue(),null===(se=document.querySelector(".filterDropDown"))||void 0===se||se.remove()}function Qe(se){return!1===(se||{}).visibility?{visibility:!1}:{}}function Ze(se,N,b,D){return s.b.log("blobToImageData"),_t(se,N,b,D,{quality:85,returnType:Oe.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(O){return O.result})}function tt(se){return s.b.log("ImageDataToBlob"),_t(se,void 0,void 0,void 0,{quality:85,returnType:Oe.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(b){return se.imageData=b.src,b.result})}function lt(se,N,b){return Pe(this,void 0,void 0,function(){var D;return ze(this,function(W){return b&&(D={points:b}),[2,_t(se,N,D,!0,{quality:85,returnType:Oe.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(z){return se.imageData=z.src,z.result})]})})}function dt(se,N,b,D){var O,W="fe8e14";return b&&Object(s.y)(b.stroke)&&0==b.stroke.indexOf("#")&&(W=b.stroke.substr(1)),N&&(O={points:Rt(N),lineWidth:5,strokeColor:W}),_t(se,D,O,!1,!1,!0).then(function(z){return z.preview})}function _t(se,N,b,D,O,W){return Pe(this,void 0,void 0,function(){var z,ve;return ze(this,function(xe){return ve={polygon:z=void 0,doPerspective:z,source:{angle:z},output:{orgImage:z,previewImage:z}},Object(s.A)(se,ve.source),ve.source.angle=N,b&&(ve.polygon=b),D&&b&&b.points&&(ve.doPerspective=!0),!1!==O&&(ve.output.orgImage=O instanceof Object?O:{quality:85,returnType:Oe.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==W&&(ve.output.previewImage=W instanceof Object?W:{quality:85,width:200,height:200,returnType:Oe.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),[2,Oe.ImageProcWrapper.createImage(ve)]})})}function Rt(se){for(var N={value:Number.MAX_VALUE,idx:-1},b={value:Number.MAX_VALUE,idx:-1},D=0;D<se.length;D+=2){var O=se[D];O<=N.value?(b=N,N={value:O,idx:D}):O<=b.value&&(b={value:O,idx:D})}var W=se[N.idx+1]<se[b.idx+1]?N.idx:b.idx;return se.slice(W).concat(se.slice(0,W))}function xt(se,N,b){return void 0===b&&(b=1),Math.abs(se-N)<=b}function Pt(se){var N=se.config,b=(void 0===N?{}:N).filterViewer.filter,D=b.defaultValue,O=void 0===D?"original":D;return"original"!==O&&b.valueList.some(function(z){return z.value===O})?O:"original"}function jt(se,N,b){return Pe(this,void 0,void 0,function(){var D,O,W,z;return ze(this,function(ve){var xe,Me,J,et,rt,ot,it,pt,ft,mt;return O=!1,b&&(D=Rt(b),Me=se.imageWidth,J=se.imageHeight,et=(xe=D)[1],rt=xe[2],ot=xe[3],it=xe[4],pt=xe[5],ft=xe[6],mt=xe[7],O=xt(xe[0],0)&&xt(et,0)&&xt(rt,Me)&&xt(ot,0)&&xt(it,Me)&&xt(pt,J)&&xt(ft,0)&&xt(mt,J)),z=!1,O||!b||(W={points:D},z=!0),[2,Ze(se,N,W,z)]})})}var _i=function(se,N,b){return function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,[])).next())})}(this,0,void 0,function(){var D,O,W,z,ve,xe,Me,J,Ke,et,rt,ot,it,mt,Lt,kt;return function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}}(this,function(Mt){switch(Mt.label){case 0:D=this,O=b.getCurrentPage().options,W=O.file,z=[],ve=0,xe=se.File.getCurrentFileList(),Me=xe.find(function(Vt){return"camera"===Vt.name}),Ke=(J=(null==Me?void 0:Me.chs)||[]).length-1,Mt.label=1;case 1:return ve<J.length?(rt={uuid:et=J[ve]},ve!=Ke?[3,4]:[4,se.DataControl.getData(et)]):[3,5];case 2:return ot=Mt.sent(),[4,dt((it=ot.customData).oriBlob,it.detectArea,void 0===(Lt=b.config.scannerViewer.polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:Lt,void 0===(mt=it.angle)?0:mt)];case 3:kt=Mt.sent(),rt.preview=kt,Mt.label=4;case 4:return z.push(rt),ve++,[3,1];case 5:return W.blobList=z,D.setCurPageId(null),D.setCurImageData(null),b.showAllPages(),document.getElementById("dvs-camera-container").classList.add("nodisplay"),b.multipleView=!1,b.emit("focusPage"),b.emit("resetResolution"),[2]}})})},To=function(se,N,b){return function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,[])).next())})}(this,0,void 0,function(){var D,O,W,z,ve;return function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}}(this,function(Me){D=this,b.showLoading("rotate button init");try{N.rotateMode=0,N.rotate(270),O=N.getCurrentIndex(),W=N.getUidByIndex(O),(z=N.getCustomDataByUid(W)).angle=((Ke=((void 0===(ve=z.angle)?0:ve)+270)%360)<0&&(Ke+=360),Ke),z.resBlob&&delete z.resBlob,D.setCurImageData(null),D.SetFilterDirty(!0),Be()}finally{b.hideLoading("rotate button init")}var Ke;return[2]})})},Gn=function(se,N,b,D){var O=N.getCurrentIndex();N.vm.getCurPageCount(),N.removeSync(O),D.file.blobList.splice(O,1);var W=document.querySelector(".imgCount");W.innerText=Number(W.innerText)-1+"";var z=document.querySelector(".dcs-btn-multipleImg");if(N.currentPageCount<1)_i.call(this,se,N,b),null==z||z.classList.add("hidden");else{var ve=N.getCurrentIndex();ar(this,N.getUidByIndex(ve)).then(function(){N.render()})}},ei=function(se,N,b,D){var O=this,W=N.getCurrentIndex(),z=N.getUidByIndex(W);O.showEditPage(z,{element:D,footerButtons:{save:{icon:"dcs-font dcs-i-save",onclick:function(ve,xe){var Me=xe.dcs,J=xe.page;return function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,[])).next())})}(this,0,void 0,function(){var Ke,et,rt,ot,it,pt,ft,mt;return function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}}(this,function(Et){switch(Et.label){case 0:Me.showLoading("crop save"),Et.label=1;case 1:return Et.trys.push([1,,10,11]),Ke=J.getAngle(),et=J.getDetectAreaForNotRotate(),[4,N.getCustomDataByUid(z)];case 2:return[4,Ze((rt=Et.sent()).oriBlob)];case 3:return[4,lt(Et.sent(),Ke,et)];case 4:return ot=Et.sent(),O.setCurImageData(ot),O.SetFilterDirty(!0),[4,tt(ot)];case 5:return it=Et.sent(),mt=void 0,"original"!==(ft=void 0===(pt=rt.filterValue)?"original":pt)?[3,6]:(mt=it,[3,8]);case 6:return[4,Me.filterHandlerByIImageData(ot,it,ft)];case 7:mt=Et.sent(),Et.label=8;case 8:return[4,ge(mt,se,z,!1,{detectArea:et,angle:Ke})];case 9:return Et.sent(),Me.navigateBack(),Be(),[3,11];case 10:return Me.hideLoading("crop save"),[7];case 11:return[2]}})})}}}},!0)},Hn_MAX_IMAGES_IN_BUFFER_LIMIT={code:-4219,message:"The number of images processed exceeded memory limit"},ti=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},no=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}},Yo=function(se,N,b,D){var O,W,z=this,ve=this,xe=((null===(O=b.config.filterViewer)||void 0===O?void 0:O.insert)||{}).position;W="before"===(void 0===xe?"before":xe)?N.getCurrentIndex():N.getCurrentIndex()+1;var Me=function(rt){void 0===rt&&(rt={});var ot=rt.scannerViewer,it=void 0===ot?{}:ot,pt=it.resolution,ft=it.autoScan,mt=it.autoDetect,Et=it.continuousScan,Dt=it.switchCamera,Lt=it.loadLocalFile;return{deviceId:it.deviceId,fill:it.fullScreen,continuous:null==Et?void 0:Et.enableContinuousScan,headerButtons:{autoDetect:vi({isSelected:!(null==ft?void 0:ft.enableAutoScan)&&(null==mt?void 0:mt.enableAutoDetect)},Qe(mt)),changeResBtn:Qe(pt)},footerButtons:{load:Qe(Lt),autoCapture:vi({isSelected:null==ft?void 0:ft.enableAutoScan},Qe(ft)),toggleCamera:Qe(Dt),continuous:Qe(Et)}}}(b.config);function J(rt){var ot;return ti(this,void 0,void 0,function(){var it,pt,ft,mt,Dt,Lt,kt,Mt,Vt,Kt,vr,Ar,Br;return no(this,function(ri){return ft=rt.oriBlob,mt=rt.detectArea,Dt=rt.resBlob,Lt=rt.filterBlob||Dt||ft,kt=((null===(ot=b.config.filterViewer)||void 0===ot?void 0:ot.filter)||{}).defaultValue,Mt=[{oriData:Lt.imageData,metadata:{width:Lt.imageWidth,height:Lt.imageHeight},customData:{detectArea:mt,oriBlob:ft,resBlob:Dt,filterValue:kt}}],vr=void 0===(Kt=(Vt=b.config.scannerViewer||{}).maxDocuments)?20:Kt,N.currentPageCount+1<=(void 0===(Ar=Vt.maxImagesInBuffer)?vr:Ar)&&N.currentPageCount+1<=vr?(pt=W>N.currentPageCount-1?se.DataControl.appendSync("camera",Mt):se.DataControl.insertSync("camera",Mt,W),it=pt[0],D.file.blobList.splice(W,0,rt),(Br=document.querySelector(".imgCount")).innerText=Number(Br.innerText)+1+""):b.emit("video-error",Hn_MAX_IMAGES_IN_BUFFER_LIMIT),b.navigateBack(),b.hideLoading("insertImgByBlobItem"),[2,it]})})}function Ke(rt,ot){var it,pt=!1,ft=!1;(it=document.createElement("input")).type="file",it.multiple=!1,it.accept="image/png,image/jpeg";var mt=function(){it.value=null,it.files=null,it.onchange=null,it=null,ft=!1,pt=!1,ot.removeGlobalBlurEvent(rt),ot.removeGlobalFocusEvent(rt)};return ft=!0,it.click(),pt=!0,new Promise(function(Et){ot.addGlobalFocusEvent(rt,function(){setTimeout(function(){!ft&&pt&&(s.b.log("select file canceled"),mt(),rt.onblur=null,Et(null))},200)}),ot.addGlobalBlurEvent(rt,function(){ft&&pt&&(s.b.log("selecting file"),ft=!1)}),it.onchange=function(){if(pt=!1,""===it.value)mt(),rt.onblur=null,Et(null);else{var Dt=it.files;Dt.length>0?(Et(Dt[0]),mt(),rt.onblur=null):(Et(null),mt(),rt.onblur=null)}}})}function et(rt){return Oe.ImageProcWrapper.createImage({source:{data:rt},output:{orgImage:{quality:85,returnType:Oe.Enum_ImageType.IT_BGRA,returnBlob:!1},previewImage:!1}}).then(function(it){return it.result})}Object(s.A)({footerButtons:{capture:{onclick:function(rt,ot){return ti(z,void 0,void 0,function(){var it;return no(this,function(pt){return(it=ot&&ot.dcs||b).captureLoop.startManualCapture({dcs:it,page:it.getCurrentPage()}),[2]})})}},load:{onclick:function(rt,ot){return ti(this,void 0,void 0,function(){var it,pt,ft,mt,Dt,Lt;return no(this,function(kt){switch(kt.label){case 0:return it=ot&&ot.dcs||b,b.emit("blurPage"),[4,Ke(rt.target,b)];case 1:if(!(pt=kt.sent()))return b.emit("focusPage"),[2];it.showLoading("insert - load image"),kt.label=2;case 2:return kt.trys.push([2,6,7,8]),[4,et(pt)];case 3:return ft=kt.sent(),[4,it.packageBlobItemFromIImageData(ft,!0,!0,!0)];case 4:return mt=kt.sent(),ve.setCurImageData(mt.resImage),ve.SetFilterDirty(!0),mt.resImage&&delete mt.resImage,[4,J(mt)];case 5:return Dt=kt.sent(),ve.setCurPageId(Dt),[3,8];case 6:throw Lt=kt.sent(),it.hideLoading("insert - load image"),b.emit("blurPage"),Lt;case 7:return b.emit("blurPage"),it.hideLoading("insert - load image"),[7];case 8:return[2]}})})}},continuous:{visibility:!1}}},Me),Me.continuous=!1,Me.onSaveCapture=function(rt,ot,it,pt,ft){return ti(this,void 0,void 0,function(){var mt,Et,Lt;return no(this,function(kt){switch(kt.label){case 0:(mt=ot.dcs).showLoading("OnInsertPageSave"),kt.label=1;case 1:return kt.trys.push([1,,4,5]),[4,mt.packageBlobItemFromIImageData(it,!0,!0,!1)];case 2:return Et=kt.sent(),ve.setCurImageData(Et.resImage),ve.SetFilterDirty(!0),Et.resImage&&delete Et.resImage,[4,J(Et)];case 3:return Lt=kt.sent(),ve.setCurPageId(Lt),pt&&mt.setImageDataBack(it.imageData),mt.emit("blurPage"),[3,5];case 4:return mt.hideLoading("OnInsertPageSave"),[7];case 5:return[2]}})})},b.showInsertPage(Me),b.emit("focusPage")},vs=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},Ko=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}},Js=function(se,N,b,D){return vs(this,void 0,void 0,function(){var O,W,z,ve,xe,Me,J,Ke;return Ko(this,function(et){switch(et.label){case 0:O=this,b.showLoading("save button init"),et.label=1;case 1:et.trys.push([1,,13,14]),O.setCurImageData(null),O.SetFilterDirty(!0),W=N.getCurrentPageUids(),z=[],ve=0,et.label=2;case 2:return ve<W.length?[4,se.DataControl.getData(xe=W[ve])]:[3,7];case 3:return Me=et.sent(),[4,lu(b,Me)];case 4:return J=et.sent(),Ke=J.filterBlob,delete J.filterBlob,z.push({file:J,iImageData:Ke}),[4,se.DataControl.removeData(xe)];case 5:et.sent(),et.label=6;case 6:return ve++,[3,2];case 7:return[4,O._savePhotoCallback(z)];case 8:return et.sent(),z.splice(0),z=null,b.showAllPages(),N.removeAllSync(),D.file.blobList=[],document.querySelector(".dcs-btn-multipleImg").classList.add("hidden"),document.getElementById("dvs-camera-container").classList.add("nodisplay"),b.config.filterViewer.exitDocumentScanAfterSave?b.multipleCloseHandleFn?[4,b.multipleCloseHandleFn()]:[3,10]:[3,11];case 9:et.sent(),et.label=10;case 10:return Be(),b.emit("video-closed"),b.navigateBack(),[3,12];case 11:b.multipleView=!1,b.emit("focusPage"),et.label=12;case 12:return[3,14];case 13:return b.hideLoading("save button init"),[7];case 14:return[2]}})})};function lu(se,N){return vs(this,void 0,void 0,function(){var b,D,O,W,z,ve,xe,Me,J,Ke,et,rt,ot,it,pt;return Ko(this,function(ft){switch(ft.label){case 0:return D=(b=N.customData).oriBlob,W=b.filterValue,ve=void 0===(z=b.angle)?0:z,(O=b.detectArea)&&W?(se.emit("resetResolution"),[2,{filterBlob:N.oriData,detectArea:O,oriBlob:D,angle:ve,filterValue:W}]):[3,1];case 1:return!O||W?[3,5]:[4,jt(D,ve,O)];case 2:return xe=ft.sent(),Me=Pt(se),[4,tt(xe)];case 3:return J=ft.sent(),[4,se.filterHandlerByIImageData(xe,J,Me)];case 4:return Ke=ft.sent(),se.emit("resetResolution"),[2,{filterBlob:Ke,detectArea:O,oriBlob:D,angle:ve,filterValue:Me}];case 5:return[4,Ze(D,ve)];case 6:return et=ft.sent(),[4,se.packageBlobItemFromIImageData(et,!0,!0,!1)];case 7:return rt=ft.sent(),ot=rt.detectArea,it=rt.filterBlob,pt=rt.filterValue,se.emit("resetResolution"),[2,{filterBlob:it,detectArea:ot,oriBlob:D,angle:ve,filterValue:pt}]}})})}var Jo=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},zn=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}},Xs=function(se,N,b,D){return Jo(this,void 0,void 0,function(){function O(){W(document.querySelector(".filterDropDown"),!1)}function W(it,pt){it&&(it.classList[pt?"remove":"add"]("nodisplay"),pt&&Me&&(it.scrollLeft=Me.offsetLeft),xe=pt)}function z(it,pt){var ft;return Jo(this,void 0,void 0,function(){var mt,Et,Dt,Lt,kt,Mt,Vt,Kt,vr,Ar,Yr,en,Br,ri,On,tn,Dr,rn;return zn(this,function(xr){switch(xr.label){case 0:D.showLoading("create filter list"),xr.label=1;case 1:return xr.trys.push([1,,12,13]),it.className="filterDropDown dropdown nodisplay",[4,ve.getCurImageData()];case 2:return mt=xr.sent(),Et=pt.getUidByIndex(pt.getCurrentIndex()),[4,N.DataControl.getData(Et)];case 3:return Dt=xr.sent(),Lt=Dt.customData.filterValue,kt=null===(ft=D.config.filterViewer)||void 0===ft?void 0:ft.filter,Mt=kt.valueList,[4,(Kr=mt,ni={source:Kr,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:Oe.Enum_ImageType.IT_BGRA,returnBlob:!1,nInterplationMethod:5}}},Oe.ImageProcWrapper.createImage(ni).then(function(ii){return Kr.imageData=ii.src,ii.preview}))];case 4:return[4,tt(Vt=xr.sent())];case 5:Kt=xr.sent(),vr=[],Ar=!1,Yr=0,xr.label=6;case 6:return Yr<Mt.length?(ri=(en=Mt[Yr]).label,On=void 0,"original"!==(Br=en.value)?[3,7]:(On=Kt,Ar=!0,[3,9])):[3,11];case 7:return[4,D.filterHandlerByIImageData(Vt,Kt,Br)];case 8:tn=xr.sent(),On=tn,xr.label=9;case 9:On&&(Dr=s.a.createURL(On),vr.push({value:Br,url:Dr,label:ri})),xr.label=10;case 10:return Yr++,[3,6];case 11:return Vt=null,Ar||vr.unshift({value:"original",url:s.a.createURL(Kt),label:"original"}),Mt.some(function(ii){return ii.value===Lt})||(Lt="original"),rn=document.createDocumentFragment(),vr.forEach(function(ii,Gl){var So=document.createElement("li");So.innerHTML='<img class="preFilter" src="'+ii.url+'"><p>'+ii.label+"</p>",rn.appendChild(So),So.dataset.filterValue=ii.value,ii.value===Lt&&(So.classList.add("selectedItem"),Me=So)}),it.appendChild(rn),[3,13];case 12:return D.hideLoading("create filter list"),[7];case 13:return[2]}var Kr,ni})})}var ve,xe,Me,J,Ke,et,rt,ot=this;return zn(this,function(it){switch(it.label){case 0:return ve=this,xe=!1,Me=null,J=!1,Ke=document.querySelector(".dvs-filter"),(et=Ke.querySelector(".filterDropDown"))&&!ve.IsFilterDirty()?[3,2]:(rt=!et,et?Ue():et=document.createElement("ul"),[4,z(et,b)]);case 1:it.sent(),et.addEventListener("click",function(pt){return Jo(ot,void 0,void 0,function(){return zn(this,function(ft){return function(mt){Jo(this,void 0,void 0,function(){var Et,Dt,Lt,kt,Mt,Vt;return zn(this,function(Kt){switch(Kt.label){case 0:if(mt.stopPropagation(),(Et=mt.target)===Me||"LI"!==Et.tagName)return[2];D.showLoading("click filter"),Kt.label=1;case 1:return Kt.trys.push([1,,8,9]),Dt=b.getUidByIndex(b.getCurrentIndex()),null==Me||Me.classList.remove("selectedItem"),Me=Et,Et.classList.add("selectedItem"),Lt=Et.dataset.filterValue,[4,ve.getCurImageData()];case 2:return[4,tt(kt=Kt.sent())];case 3:return Mt=Kt.sent(),Vt=void 0,"original"!==Lt?[3,4]:(Vt=Mt,[3,6]);case 4:return[4,D.filterHandlerByIImageData(kt,Mt,Lt)];case 5:Vt=Kt.sent(),Kt.label=6;case 6:return[4,ge(Vt,N,Dt,!1,{filterValue:Lt})];case 7:return Kt.sent(),[3,9];case 8:return D.hideLoading("click filter"),[7];case 9:return[2]}})})}(pt),[2]})})}),rt&&Ke.appendChild(et),ve.SetFilterDirty(!1),it.label=2;case 2:return W(et,xe=!xe),se.stopPropagation(),J||(b.on(o.f.DOCUMENT_CLICK,O),b.on(o.d.CANVAS_CLICK,O),b.on(o.f.PAGER_CHANGED,function(){Be(),xe=!1}),J=!0),[2]}})})},fu=function(se,N,b,D){var O,W,z;return function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,[])).next())})}(this,0,void 0,function(){var ve,xe,Me,J,Ke,et,rt,ot,it,pt,ft,mt;return function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}}(this,function(Et){switch(Et.label){case 0:null===(z=null===(W=null===(O=null==se?void 0:se.ViewControl)||void 0===O?void 0:O.getViewerByIndex(0))||void 0===W?void 0:W.ui)||void 0===z||z._resizeViewer(),ve=se.File.getCurrentFileList(),xe=ve.find(function(Dt){return"camera"===Dt.name}),Me=(null==xe?void 0:xe.chs)||[],J=0,Et.label=1;case 1:return J<D.length||J<Me.length?(et=Me[J],!(Ke=D[J])||et?[3,2]:(rt=Ke.detectArea,ot=Ee(mt=Ke.oriBlob),it=se.DataControl.appendSync("camera",[{oriData:mt.imageData,metadata:ot,customData:{oriBlob:mt,detectArea:rt}}])[0],Ke.uuid=it,Ke.oriBlob=null,[3,5])):[3,6];case 2:if(Ke||!et)return[3,3];for(pt=[],ft=J;ft<Me.length;ft++)pt.push(ft);return se.ViewControl.getViewerByIndex(0).removeSync(pt),[3,5];case 3:return Ke.uuid===et?[3,5]:(mt=Ke.oriBlob,Ke.uuid=et,[4,ge(mt,se,et,!1,{oriBlob:mt})]);case 4:Et.sent(),Et.label=5;case 5:return J++,[3,1];case 6:return D.splice(0),[2]}})})},vi=function(){return(vi=Object.assign||function(se){for(var N,b=1,D=arguments.length;b<D;b++)for(var O in N=arguments[b])Object.prototype.hasOwnProperty.call(N,O)&&(se[O]=N[O]);return se}).apply(this,arguments)},jr=function(se,N,b,D){return new(b||(b=Promise))(function(O,W){function z(Me){try{xe(D.next(Me))}catch(J){W(J)}}function ve(Me){try{xe(D.throw(Me))}catch(J){W(J)}}function xe(Me){var J;Me.done?O(Me.value):(J=Me.value,J instanceof b?J:new b(function(Ke){Ke(J)})).then(z,ve)}xe((D=D.apply(se,N||[])).next())})},Qn=function(se,N){var b,D,O,W,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return W={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ve(xe){return function(Me){return function(J){if(b)throw new TypeError("Generator is already executing.");for(;z;)try{if(b=1,D&&(O=2&J[0]?D.return:J[0]?D.throw||((O=D.return)&&O.call(D),0):D.next)&&!(O=O.call(D,J[1])).done)return O;switch(D=0,O&&(J=[2&J[0],O.value]),J[0]){case 0:case 1:O=J;break;case 4:return z.label++,{value:J[1],done:!1};case 5:z.label++,D=J[1],J=[0];continue;case 7:J=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==J[0]&&2!==J[0])){z=0;continue}if(3===J[0]&&(!O||J[1]>O[0]&&J[1]<O[3])){z.label=J[1];break}if(6===J[0]&&z.label<O[1]){z.label=O[1],O=J;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(J);break}O[2]&&z.ops.pop(),z.trys.pop();continue}J=N.call(se,z)}catch(Ke){J=[6,Ke],D=0}finally{b=O=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([xe,Me])}}},yi="closeMultiple",qe="deleteImg",bt="replaceImg",At="rotateImg",ht="filterImg",Zt="cropImg",yt="saveImg",yr=function(){function se(N,b,D,O,W){var z=this;this._container=null,this._curPageId=null,this._curImageData=null,this._filterDirty=!1,this.ViewUiClass=null,this.ViewUiClass=D,this.isKeepCanvasSize=void 0===O?Object(s.u)():O,this.baseCanvasSize=W||2560,this._dcs=new N,this._dcs.on("video-closed",function(){var ve;b.videoShown=!1,Be(),null===(ve=b._oPub)||void 0===ve||ve.emit("video-closed"),z._removeCameraDvs()}),this._dcs.on("video-error",function(ve){b._oPub.emit("video-error",ve)}),this._bindMultipleHandler(),this._bindMultipleCloseHandler(),this._dvs=b}return se.prototype.unbindDvsBeforeDispose=function(){this._dvs=null},se.prototype.dispose=function(){var N;this._removeCameraDvs(),null===(N=this._dcs)||void 0===N||N.dispose(),this._dcs=null,this._dvs=null,this._container=null,this._savePhotoCallback=null},se.prototype.showVideo=function(N){return void 0===N&&(N={}),jr(this,void 0,void 0,function(){var b;return Qn(this,function(D){switch(D.label){case 0:return(b=this._dcs).config=N,b._dvs=this._dvs,[4,b.showHomePage(vi({onSave:this._savePhotoCallback},St(N)))];case 1:return D.sent(),this._dvs.videoShown=!0,[4,b.getCurrentResolution()];case 2:return[2,D.sent()]}})})},se.prototype.showEditPage=function(N,b,D){return void 0===b&&(b={}),void 0===D&&(D=!1),jr(this,void 0,void 0,function(){var O,W,z,ve,xe,Me,J,Ke,et,rt,ot,it,pt,ft;return Qn(this,function(mt){switch(mt.label){case 0:if(O=this._dcs,W=D?this._cameraDvs:this._dvs,!N)throw new Error("page id is necessary!");return[4,W.DataControl.getData(N)];case 1:return z=mt.sent(),xe=z.metadata,Me=z.oriData,et=!1,(ve=z.customData).oriBlob?J=ve.oriBlob:(ve.oriBlob=Me,J=Me),Object(s.y)(J)?[4,fetch(J)]:[3,4];case 2:return[4,mt.sent().blob()];case 3:J=mt.sent(),et=!0,mt.label=4;case 4:return J instanceof Blob?[4,(Et=J,_t({imageData:Et},void 0,void 0,void 0,{quality:85,returnType:Oe.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(Dt){return Dt.result}))]:[3,6];case 5:J=mt.sent(),et=!0,mt.label=6;case 6:return et&&(ve.oriBlob=J),Ke=ve.detectArea?ve.detectArea:[0,0,rt=xe.width,0,rt,ot=xe.height,0,ot],it=function(Dt){void 0===Dt&&(Dt={});var Lt=Dt.cropViewer,kt=void 0===Lt?{}:Lt,Mt=Dt.filterViewer,vr=kt.rotateRight,Ar=kt.autoDetectBorder,Yr="dcs-font dcs-i-next";return(void 0===Mt?{}:Mt).visibility||(Yr="dcs-font dcs-i-save"),{footerButtons:{rotateLeft:Qe(kt.rotateLeft),rotateRight:Qe(vr),toggleFullArea:Qe(Ar),save:{icon:Yr}}}}(O.config),pt=ve.angle,Object(s.A)(b,it),void 0===pt&&(pt=0),it.file||(it.file={}),it.file.oriBlob=J,it.file.oriDetectArea=Ke,it.file.oriAngle=pt,(ft=b.element)&&(O.config.element=ft),O.showEditPage(vi({blob:J,detectArea:Ke,angle:pt,onSave:function(Dt){var Lt=this,kt=Dt[0];return s.b.log("[camera] showEditPage - onSave"),s.b.log(kt),ge(kt.iImageData,W,N,!0,kt.file).then(function(){return jr(Lt,void 0,void 0,function(){return Qn(this,function(Mt){return O.navigateBack(2),[2,!0]})})})}},it)),[2]}var Et})})},se.prototype.closeVideo=function(){this._dcs.closeAll()},se.prototype.bindAreaDetectFunction=function(N){return this._dcs.bindAreaDetectFunction(N)},se.prototype.bindPerspectiveFunction=function(N){return this._dcs.bindPerspectiveFunction(N)},se.prototype.bindLicenseCallback=function(N){return this._dcs.bindLicenseCallback(N)},se.prototype.bindSavePhotoCallback=function(N){this._savePhotoCallback=N},se.prototype.bindFilterHandleList=function(N){return this._dcs.bindFilterHandleList(N)},se.prototype.bindImageDataToBlobHandle=function(N){return this._dcs.bindImageDataToBlobHandle(N)},se.prototype._bindCameraEvents=function(N,b,D){var O=this,W=D.dcs,z=D.page,ve=b.on.bind(b),xe=z.options;this._container=W.config.element,ve(yi,_i.bind(this,N,b,W)),ve(At,To.bind(this,N,b,W)),ve(qe,Gn.bind(this,N,b,W,xe)),ve(Zt,ei.bind(this,N,b,W,this._container)),ve(bt,Yo.bind(this,N,b,W,xe)),ve(yt,Js.bind(this,N,b,W,xe)),ve(ht,function(Me){Xs.call(O,Me,N,b,W)}),N.ViewControl.getViewerByIndex(0).on("slideFinished",function(){Cr(O)})},se.prototype._createCameraDvs=function(N){var b,D=N.dcs.config,O=D.element,W=D.filterViewer,z=void 0===W?{}:W,ve=D.cropViewer,xe=void 0===ve?{}:ve,Me=z.insert,J=z.rotateLeft,Ke=z.remove,et=z.filter,rt=void 0===et?{}:et;if(this._cameraDvs)document.getElementById("dvs-camera-container").classList.remove("nodisplay");else{var ot=document.createElement("div");ot.id="dvs-camera-container";var it=void 0;(it=Object(s.y)(O)?document.getElementById(O):O)?it.appendChild(ot):(document.body.appendChild(ot),ot.classList.add("dcs-fixed-full")),this._cameraDvs=new Gr({isKeepCanvasSize:this.isKeepCanvasSize,baseCanvasSize:this.baseCanvasSize,uiConfig:{toolbars:{header:!1,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!1},footerGroup:{visibility:!0,location:"bottomMenu",sequence:1},headerGroup:{visibility:!0,location:"topMenu",sequence:1}},buttons:{back:{visibility:!0,location:"headerGroup",iconClass:"dcs-font dcs-i-back",sequence:0,onButtonClick:yi},delete:{visibility:!1!==(null==Ke?void 0:Ke.visibility),location:"headerGroup",iconClass:(null==Ke?void 0:Ke.iconCss)||"dcs-font dcs-i-delete",sequence:0,onButtonClick:qe},replace:{visibility:!1!==(null==Me?void 0:Me.visibility),location:"footerGroup",iconClass:"dcs-font dcs-i-insert",sequence:0,onButtonClick:bt},rotateLeft:{visibility:!1!==(null==J?void 0:J.visibility),location:"footerGroup",iconClass:(null==J?void 0:J.iconCss)||"dcs-font dcs-i-rotateLeft",sequence:0,onButtonClick:At},filter:{visibility:!1!==rt.visibility,location:"footerGroup",iconClass:"dcs-font dcs-i-filter",sequence:0,onButtonClick:ht},crop:{visibility:!1!==xe.visibility,location:"footerGroup",iconClass:"dcs-font dcs-i-crop",sequence:0,onButtonClick:Zt},save:{visibility:!0,location:"footerGroup",iconClass:"dcs-font dcs-i-save",sequence:0,onButtonClick:yt}}}}),this._cameraDvs.ViewControl.bindViewUiConstructor(this.ViewUiClass);var pt=this._cameraDvs.ViewControl.getViewerByIndex(0);pt.bindView(ot),(b=pt).topMenuBorder="none",b.topMenuColor="#000",b.canvasBackground="#323234",b.canvasBorder="none",b.footerColor="#000",b.displayMode="single",b.width="100%",b.height="100%",function(ft,mt){var Et,Dt=ft._dcs,Lt=document.createElement("div");Lt.className="cameraPager",Lt.id="cameraPager",Lt.innerHTML='\n    <div class="previousPage dcs-font dcs-i-arrow"></div>\n    <p><span class="curPage">0</span>/<span class="totalPage">0</span></p>\n    <div class="nextPage dcs-font dcs-i-arrow disable"></div>\n    ',null===(Et=document.getElementById("dvs-camera-container"))||void 0===Et||Et.appendChild(Lt);var kt=Lt.children[0],Mt=Lt.children[2];kt.onclick=function(){Dt.showLoading("prePage");var Kt=mt.getPrePageIndex();if(-1!=Kt){var vr=mt.getUidByIndex(Kt);ar(ft,vr).then(function(){mt.prevPage()})}Dt.hideLoading("prePage")},Mt.onclick=function(){Dt.showLoading("next page");var Kt=mt.getNextPageIndex();if(-1!=Kt){var vr=mt.getUidByIndex(Kt);ar(ft,vr).then(function(){mt.nextPage()})}Dt.hideLoading("next page")},mt.on(o.f.PAGER_CHANGED,function(Kt){var vr=Lt.querySelector(".curPage"),Ar=Lt.querySelector(".totalPage");vr.innerText=String(Kt.cur+1),Ar.innerText=String(Kt.total),function(){var Kt,vr;if("camera"===(null===(Kt=mt.getCurrentTab())||void 0===Kt?void 0:Kt.name)){var Ar=mt.getCurrentIndex();kt.classList[Ar<=0?"add":"remove"]("dcs-disable");var Yr=(null===(vr=mt.getCurrentTab())||void 0===vr?void 0:vr.chs.length)||0;Mt.classList[Yr===Ar+1?"add":"remove"]("dcs-disable")}}()})}(this,pt),this._bindCameraEvents(this._cameraDvs,pt,N)}},se.prototype._removeCameraDvs=function(){var N,b;null===(N=this._cameraDvs)||void 0===N||N.dispose(),this._cameraDvs=null,null===(b=document.getElementById("dvs-camera-container"))||void 0===b||b.remove()},se.prototype._bindMultipleHandler=function(){var N=this,b=this;this._dcs.bindMultipleHandle(function(D,O){return jr(N,void 0,void 0,function(){return Qn(this,function(W){switch(W.label){case 0:return O.dcs.multipleView=!0,O.dcs.config.filterViewer.visibility||(O.dcs.config.filterViewer.insert.visibility=!1,O.dcs.config.filterViewer.remove.visibility=!1,O.dcs.config.filterViewer.rotateLeft.visibility=!1,O.dcs.config.filterViewer.filter.visibility=!1),D.length?[3,2]:[4,b._multipleCloseFn()];case 1:return W.sent(),[2];case 2:return b._createCameraDvs(O),b._cameraDvs.ViewControl.getViewerByIndex(0),[4,fu(b._cameraDvs,0,0,D)];case 3:return W.sent(),Cr(b).finally(function(){b._dcs.hideAllPages()}),[2]}})})})},se.prototype._bindMultipleCloseHandler=function(){this._dcs.bindMultipleCloseHandle(this._multipleCloseFn)},se.prototype._multipleCloseFn=function(){return jr(this,void 0,void 0,function(){var N,b;return Qn(this,function(D){return(N=document.querySelector(".dcs-btn-multipleImg"))&&(b=N.querySelector(".previewImg")).src&&s.a.revokeObjectURL(b.src),[2]})})},se.prototype.getCurPageId=function(){return this._curPageId},se.prototype.setCurPageId=function(N){this._curPageId!=N&&(this._filterDirty=!0),this._curPageId=N},se.prototype.IsFilterDirty=function(){return this._filterDirty},se.prototype.SetFilterDirty=function(N){this._filterDirty=N},se.prototype.getCurImageData=function(){return jr(this,void 0,void 0,function(){var N,b,D,O,W,z,ve,xe,Me,J,Ke,et,rt,ot,it,pt;return Qn(this,function(ft){switch(ft.label){case 0:return this._curImageData?[2,this._curImageData]:(N=this._cameraDvs,b=this._dcs,D=this.getCurPageId(),[4,N.DataControl.getData(D)]);case 1:O=ft.sent(),z=(W=O.customData).oriBlob,ve=W.detectArea,Me=void 0===(xe=W.angle)?0:xe,b.showLoading("handle page by uid"),ft.label=2;case 2:return ft.trys.push([2,,9,10]),ve?[4,jt(z,Me,ve)]:[3,4];case 3:return J=ft.sent(),this.setCurImageData(J),this.SetFilterDirty(!0),[3,8];case 4:return[4,Ze(z,Me)];case 5:return Ke=ft.sent(),[4,b.packageBlobItemFromIImageData(Ke,!0,!0,!1)];case 6:return et=ft.sent(),rt=et.detectArea,ot=et.filterBlob,it=et.resImage,pt=et.filterValue,this.setCurPageId(D),this.setCurImageData(it),this.SetFilterDirty(!0),[4,ge(ot,N,D,!1,{detectArea:rt,oriBlob:z,filterValue:pt})];case 7:ft.sent(),ft.label=8;case 8:return[3,10];case 9:return b.hideLoading("handle page by uid"),[7];case 10:return[2,this._curImageData]}})})},se.prototype.handlePageByUid=function(N){return jr(this,void 0,void 0,function(){var b,D,O,W,z,ve,xe,Me;return Qn(this,function(J){switch(J.label){case 0:this.getCurPageId()!=N&&(this.setCurPageId(N),this.setCurImageData(null),this.SetFilterDirty(!0)),b=this._cameraDvs,(D=this._dcs).showLoading("handle page by uid"),J.label=1;case 1:return J.trys.push([1,,9,10]),[4,b.DataControl.getData(N)];case 2:return O=J.sent(),z=O.customData.filterValue,(W=O.customData.detectArea)&&z?[3,8]:[3,3];case 3:return[4,this.getCurImageData()];case 4:return ve=J.sent(),!W||z?[3,8]:(xe=Pt(D),[4,tt(ve)]);case 5:return Me=J.sent(),[4,D.filterHandlerByIImageData(ve,Me,xe)];case 6:return[4,ge(J.sent(),b,N,!1,{filterValue:xe})];case 7:J.sent(),J.label=8;case 8:return[3,10];case 9:return D.hideLoading("handle page by uid"),[7];case 10:return[2]}})})},se.prototype.setCurImageData=function(N){this._curImageData&&delete this._curImageData.imageData,this._curImageData=N},se}();function Cr(se){return jr(this,void 0,void 0,function(){var b,D,O;return Qn(this,function(W){switch(W.label){case 0:return(b=se._cameraDvs.ViewControl.getViewerByIndex(0))?(D=b.getCurrentIndex(),O=b.getUidByIndex(D),[4,ar(se,O)]):[3,2];case 1:W.sent(),W.label=2;case 2:return[2]}})})}function ar(se,N){return jr(this,void 0,void 0,function(){return Qn(this,function(b){switch(b.label){case 0:return[4,se.handlePageByUid(N)];case 1:return b.sent(),[2]}})})}function St(se){void 0===se&&(se={});var N=se.scannerViewer,b=void 0===N?{}:N,D=b.resolution,O=b.autoScan,W=b.autoDetect,z=b.continuousScan,ve=b.switchCamera,xe=b.loadLocalFile;return{deviceId:b.deviceId,fill:b.fullScreen,continuous:null==z?void 0:z.enableContinuousScan,headerButtons:{autoDetect:vi({isSelected:!(null==O?void 0:O.enableAutoScan)&&(null==W?void 0:W.enableAutoDetect)},Qe(W)),changeResBtn:Qe(D)},footerButtons:{load:Qe(xe),autoCapture:vi({isSelected:null==O?void 0:O.enableAutoScan},Qe(O)),toggleCamera:Qe(ve),continuous:Qe(z)}}}var _r=function(){var se=function(N,b){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var W in O)O.hasOwnProperty(W)&&(D[W]=O[W])})(N,b)};return function(N,b){function D(){this.constructor=N}se(N,b),N.prototype=null===b?Object.create(b):(D.prototype=b.prototype,new D)}}(),Gt=function(){for(var se=0,N=0,b=arguments.length;N<b;N++)se+=arguments[N].length;var D=Array(se),O=0;for(N=0;N<b;N++)for(var W=arguments[N],z=0,ve=W.length;z<ve;z++,O++)D[O]=W[z];return D},Gr=function(se){function N(b){var D=se.call(this,new a.b)||this;return D.DataControl=null,D.ViewControl=null,D.File=null,D.Tag=null,D.Annotation=null,D.Error=null,D.Log=null,D._cameraClass=null,D._areaDetectCallback=null,D._perspectiveCallback=null,D._licenseCallback=null,D._savePhotoCallback=null,D._filterHandleList=null,D.videoShown=!1,D._imageDataToBlobHandleFn=null,function(){var se,N,b,D;Array.from||(Array.from=(se=Object.prototype.toString,N=function(O){return"function"==typeof O||"[object Function]"===se.call(O)},b=Math.pow(2,53)-1,D=function(O){var ve,W=(ve=Number(O),isNaN(ve)?0:0!==ve&&isFinite(ve)?(ve>0?1:-1)*Math.floor(Math.abs(ve)):ve);return Math.min(Math.max(W,0),b)},function(O){var W=this,z=Object(O);if(null==O)throw new TypeError("Array.from requires an array-like object - not null or undefined");var ve,xe=arguments.length>1?arguments[1]:void 0;if(void 0!==xe){if(!N(xe))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(ve=arguments[2])}for(var Me,J=D(z.length),Ke=N(W)?Object(new W(J)):new Array(J),et=0;et<J;)Me=z[et],Ke[et]=xe?void 0===ve?xe(Me,et):xe.call(ve,Me,et):Me,et+=1;return Ke.length=J,Ke})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(O,W){if(null==O)throw new TypeError("Cannot convert undefined or null to object");for(var z=Object(O),ve=1;ve<arguments.length;ve++){var xe=arguments[ve];if(null!=xe)for(var Me in xe)Object.prototype.hasOwnProperty.call(xe,Me)&&(z[Me]=xe[Me])}return z},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(O,W,z){for(var ve=atob(this.toDataURL(W,z).split(",")[1]),xe=ve.length,Me=new Uint8Array(xe),J=0;J<xe;J++)Me[J]=ve.charCodeAt(J);O(new Blob([Me],{type:W||"image/png"}))}})}(),D.Log=new De(D._oPub),D._log("DVS"),D._log("db"),D._db=new ke,D._log("db",!1),D._log("Error"),D.Error=new Le(D._oPub),D._log("Error",!1),D._log("Tag"),D.Tag=new ye({pubsub:D._oPub}),D._log("Tag",!1),D._log("File"),D.File=new re({pubsub:D._oPub}),D._log("File",!1),D._log("ViewControl"),D.ViewControl=new Q(b,D._oPub,D._db),D._log("ViewControl",!1),D._log("DataControl"),D.DataControl=new f(b,D._oPub,D._db),D._log("DataControl",!1),D._log("DVS",!1),D}return _r(N,se),N.prototype.on=function(b,D){se.prototype._on.call(this,b,D)},N.prototype.off=function(b,D){se.prototype._off.call(this,b,D)},N.prototype.emit=function(b){for(var D=[],O=1;O<arguments.length;O++)D[O-1]=arguments[O];se.prototype._emit.apply(this,Gt([b],D))},N.prototype._log=function(b,D){void 0===D&&(D=!0),this._oPub.emit(o.d.LOG,D?"Initialize "+b+" object.":"Complete "+b+" object initialization.")},N.prototype.dispose=function(){var b,D,O,W,z,ve,xe,Me;se.prototype.dispose.call(this),null===(b=this.Tag)||void 0===b||b.dispose(),null===(D=this.File)||void 0===D||D.dispose(),null===(W=null===(O=this.ViewControl)||void 0===O?void 0:O.getViewerByIndex(0))||void 0===W||W.removeAllSync(),null===(z=this.ViewControl)||void 0===z||z.dispose(),null===(ve=this.Error)||void 0===ve||ve.dispose(),null===(xe=this.Log)||void 0===xe||xe.dispose(),this._db=null,null===(Me=this.camera)||void 0===Me||Me.dispose(),this.camera=null,this.Log=null,this.Error=null,this.Tag=null,this.File=null,this.DataControl=null},N.prototype.bindCamera=function(b,D,O,W){return this._licenseCallback&&0!==this._licenseCallback().errorCode?(this._e(o.a.WEBCAM_LICENSE_INVALID),!1):Object(s.s)(b)?this._cameraClass?(this._e(o.a.OK),!0):(this._cameraClass=b,this.camera||(this.camera=new yr(b,this,D,O,W)),this._initWebcamCallbacks(),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.showVideo=function(b){return this.videoShown?Promise.reject(o.a.CAMERA_EXIST):(this.videoShown=!0,this.camera?this.camera.showVideo(b):Promise.reject(o.a.CAMERA_CLASS_REQUIRE))},N.prototype.showEditPage=function(b){return this.camera?this.camera.showEditPage(b):Promise.reject(o.a.CAMERA_CLASS_REQUIRE)},N.prototype.closeVideo=function(){this.camera?this.camera.closeVideo():this._e(o.a.ELEMENT_NOT_EXIST)},N.prototype.bindAreaDetectFunction=function(b){var D;return Object(s.s)(b)?(this._areaDetectCallback=b,null===(D=this.camera)||void 0===D||D.bindAreaDetectFunction(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.bindPerspectiveFunction=function(b){var D;return Object(s.s)(b)?(this._perspectiveCallback=b,null===(D=this.camera)||void 0===D||D.bindPerspectiveFunction(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.bindLicenseCallback=function(b){var D;return Object(s.s)(b)?(this._licenseCallback=b,null===(D=this.camera)||void 0===D||D.bindLicenseCallback(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.bindSavePhotoCallback=function(b){var D;return Object(s.s)(b)?(this._savePhotoCallback=b,null===(D=this.camera)||void 0===D||D.bindSavePhotoCallback(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.bindFilterHandleList=function(b){var D;return Object(s.m)(b)?(this._filterHandleList=b,null===(D=this.camera)||void 0===D||D.bindFilterHandleList(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype.bindImageDataToBlobHandle=function(b){var D;return Object(s.s)(b)?(this._imageDataToBlobHandleFn=b,null===(D=this.camera)||void 0===D||D.bindImageDataToBlobHandle(b),this._e(o.a.OK),!0):(this._e(o.a.PARAM_TYPE),!1)},N.prototype._initWebcamCallbacks=function(){if(this.camera){var b=this.camera;return this._areaDetectCallback&&b.bindAreaDetectFunction(this._areaDetectCallback),this._perspectiveCallback&&b.bindPerspectiveFunction(this._perspectiveCallback),this._savePhotoCallback&&b.bindSavePhotoCallback(this._savePhotoCallback),this._licenseCallback&&b.bindLicenseCallback(this._licenseCallback),this._filterHandleList&&b.bindFilterHandleList(this._filterHandleList),this._imageDataToBlobHandleFn&&b.bindImageDataToBlobHandle(this._imageDataToBlobHandleFn),!0}return!1},N.prototype._e=function(b){this._oPub.emit(o.d.ERROR,b)},N}(a.a);t.d(r,"DVS",function(){return Gr});var $s=t(4);window.Promise||(window.Promise=$s),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=Gr}]),T.Ready(function(e,r){var i="[bio]: ",n=!0,a=!1,s=e.win,o=s&&s.FormData;function l(c){var u=this;u.__attrs={},e.mix(u.__attrs,{action:"",data:{},bChunkedSendData:n,blockSize:0,ajaxConfig:{value:{},type:"post",processData:a,cache:a,dataType:"text",async:n,contentType:a,retry:0,headers:{"X-Requested-With":a}},ajax:"",formData:"",CORS:a,bOnlyEmptyIsOK:n}),e.mix(u.__attrs,c),u._setWithCredentials()}function d(c){var u=this;u.__attrs={},e.mix(u.__attrs,{action:"",retry:0,timeout:0,CORS:a,async:n,dataType:"text",fileStatus:"",uploadType:a,data:{},bOnlyEmptyIsOK:n}),e.mix(u.__attrs,c),u._init()}e.mix(l,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"},status:{SUCCESS:"success",ERROR:"error"}}),e.mix(l.prototype,e.obj.customEvent),e.mix(l.prototype,{get:function(c){return c in this.__attrs?this.__attrs[c]:""},set:function(c,u){c in this.__attrs&&(this.__attrs[c]=u)},_setWithCredentials:function(){this.get("CORS");var h=this.get("ajaxConfig");return e.mix(h,{xhrFields:{withCredentials:!1}}),h},uploadToServer:function(c){var u=this;return u.get("blockSize")>0&&c&&c.size>0?u._chunkedUpload(c):u._fullUpload(c)},uploadFilesToServer:function(c){return this._fullUploadFiles(c)},_fullUpload:function(c){var u=this,h=u.get("ajaxConfig"),f=!0;u._setFormData(),c&&c.size>0&&(u._addFileData(c),u.name=e.isString(c.name)&&""!=c.name?c.name:c.fileName),e.mix(h,{data:u.get("formData"),url:u.get("action"),beforeSend:function(m,I,y){m.upload.addEventListener("progress",function(_){u.fire(l.event.PROGRESS,{loaded:_.loaded,total:_.total,name:u.name})},!1)}}),e.mix(h,{method:"POST",onSuccess:function(m){var I="";m&&(m&&e.isArray(m)&&m.length>1?I=m[0]:e.isString(m)&&(I=m)),I=u._processResponse(I),u.fire(l.event.SUCCESS,I)},onError:function(m,I,y){var _,C;f=!1,m&&e.isArray(m)&&m.length>2?(_=m[1],C=m[2]):(_=I,C=y),u._errorHandler(C,_,c)}});var p=e.ajax(h);return u.set("formData",null),h.async?(u.set("ajax",p),!0):(u.set("ajax",!1),f)},_fullUploadFiles:function(c){var u=this,h=u.get("ajaxConfig"),f=!0,g=[];u._setFormData(),e.each(c,function(I){I&&I.size>0?(u._addFileData(I),e.isString(I.name)&&""!=I.name?g.push(I.name):g.push(I.fileName)):g.push("")}),e.mix(h,{data:u.get("formData"),url:u.get("action"),beforeSend:function(I,y,_){I.upload.addEventListener("progress",function(C){u.fire(l.event.PROGRESS,{loaded:C.loaded,total:C.total,name:""})},!1)}}),e.mix(h,{method:"POST",onSuccess:function(I){var y="";g=[],I&&(I&&e.isArray(I)&&I.length>1?y=I[0]:e.isString(I)&&(y=I)),y=u._processResponse(y),u.fire(l.event.SUCCESS,y)},onError:function(I,y,_){var C,A;f=!1,g=[],I&&e.isArray(I)&&I.length>2?(C=I[1],A=I[2]):(C=y,A=_),u._errorHandler(A,C,c)}}),u.name="";var m=e.ajax(h);return u.set("formData",null),h.async?(u.set("ajax",m),!0):(u.set("ajax",!1),f)},_chunkedUpload:function(c){var u=this,h=u.get("ajaxConfig"),g=function(_,C,A){var M,E;_&&e.isArray(_)&&_.length>2?(M=_[1],E=_[2]):(M=C,E=A),u._errorHandler(E,M,c)};e.mix(h,{url:u.get("action")});var v=c.size,p=0,m=u.get("blockSize")||v,I=c.slice||c.webkitSlice||c.mozSlice;!function y(_){var C=I.call(c,p,p+m,c.type),A=C.size,M=c.name;u._setContentRange(p,A,v),u._setFormData(),_&&u.set("data",[]),(!e.isString(M)||""==M)&&(M=c.fileName),C.name=M,u.name=M,u._addFileData(C),e.mix(h,{data:u.get("formData")}),e.mix(h,{method:"POST",onSuccess:function(E,R,x){p=u._getUploadedBytes(x)||p+A,u.fire(l.event.PROGRESS,{loaded:p,total:v,name:u.name}),p<v?y(!1):function(_){var C="";_&&(_&&e.isArray(_)&&_.length>1?C=_[0]:e.isString(_)&&(C=_)),C=u._processResponse(C),u.fire(l.event.SUCCESS,C)}(E)},onError:g}),e.ajax(h),u.set("formData",null)}(!0)},abort:function(){var c=this,u=c.get("ajax");return e.isObject(u)?(u.abort(),c.set("ajax",!1),c):(e.log(i+"abort(), the value of io invalid!"),c)},_setFormData:function(){var h,c=this,u=c.get("data");if(o)if(u instanceof o)c.set("formData",u);else{h=new o;try{e.each(u,function(f,g){h.append(g,f)}),c.set("formData",h)}catch(f){e.log(i+"something error when reset FormData.")}}else e.log(i+"the browser does not support ajax.")},setRequestHeader:function(c,u){var f=this.get("ajaxConfig");return f.headers[c]=u,this.set("ajaxConfig",f),u},_addFileData:function(c){if(!e.isObject(c))return e.log(i+"_addFileData(), file parameter invalid!"),!1;var h=this.get("formData"),g=c.remoteFilename;return g||(g="RemoteFile"),h.append(g,c,c.name),this.set("formData",h),h},_errorHandler:function(c,u,h){var g=l.status.ERROR,p={status:g,msg:u,response:!1,name:this.name};c&&(p.httpStatus=c.status,p.response=c.responseText),this.fire(g,p)},_getUploadedBytes:function(c){var u=c.getResponseHeader("Range"),h=u&&u.split("-"),f=h&&h.length>1&&parseInt(h[1],10);return f&&f+1},_setContentRange:function(c,u,h){var f="bytes "+c+"-"+(c+u-1)+"/"+h;return this.get("ajaxConfig").headers["Content-Range"]=f,f},_processResponse:function(c){var h,f,g,v=!1,p=this.name,m=l.status.SUCCESS,I=l.event.ERROR;if(e.log("Response from server: "+c),!this.get("bOnlyEmptyIsOK"))return{status:m,msg:!1,json:!1,response:c,name:p};if(e.isUndefined(c)||""===c)h={status:m,msg:!1,json:!1,response:"",name:p};else if(e.isString(c)){try{for(f=0;f<c.length&&!(f>10);f++){if("{"==(g=c[f])){v=!0;break}if(" "!=g&&"\r"!=g&&"\n"!=g&&"\t"!=g)break}if(v){var y=e.parse(c);h=1==y.status?{status:m,msg:!1,json:y,response:c,name:p}:{status:I,msg:!1,json:y,response:c,name:p}}}catch(C){v=!1,e.log(C)}if(!v){var _=String(c);h=""==(_=_.replace(/( |\t|\r|\n)/g,""))?{status:m,msg:!1,json:!1,response:c,name:p}:{status:I,msg:!1,json:!1,response:c,name:p}}}else h={status:m,msg:!1,json:!1,response:"",name:p};return h}}),e.mix(d,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}}),e.mix(d.prototype,e.obj.customEvent),e.mix(d.prototype,{get:function(c){return c in this.__attrs?this.__attrs[c]:""},set:function(c,u){c in this.__attrs&&(this.__attrs[c]=u)},upload:function(c){var h=this.get("uploadType");if(c){if(e.isArray(c))return h.uploadFilesToServer(c);if(e.isObject(c)){var g=c;return g.size?(g.id||(g.id=e.guid("file-")),g.size&&(g.textSize=this._convertByteSize(g.size))):g.size=0,h.uploadToServer(g)}}return h.uploadToServer(c)},abort:function(){return this.get("uploadType").abort(),!0},setRequestHeader:function(c,u){this.get("uploadType").setRequestHeader(c,u)},_convertByteSize:function(c){var u=-1;do{c/=1024,u++}while(c>99&&u<4);return Math.max(c,.1).toFixed(1)+["KB","MB","GB","TB"][u]},_init:function(){var c=this,h=new l({action:c.get("action"),data:c.get("data"),CORS:c.get("CORS"),bOnlyEmptyIsOK:c.get("bOnlyEmptyIsOK")}),f=h.get("ajaxConfig");return f&&(f.dataType=c.get("dataType"),f.async=c.get("async"),f.retry=c.get("retry")),h.on(l.event.SUCCESS,c._uploadCompleteHandler,c),h.on(l.event.ERROR,c._uploadCompleteHandler,c),h.on(l.event.PROGRESS,c._uploadProgressHandler,c),c.set("uploadType",h),h},_uploadProgressHandler:function(c){this.fire(d.event.PROGRESS,c)},_uploadCompleteHandler:function(c){var u=this,h=c.status,f=c.msg,g=u.get("file");e.mix(c,{file:g}),"success"===h?u.fire(d.event.SUCCESS,c):(!1===f||("abort"===f?e.mix(c,{canceled:!0}):"timeout"===f&&e.mix(c,{timeout:!0})),u.fire(d.event.ERROR,c))}}),e.BIO=d}),function(e){e.DWT=e.DWT||{},e.Lib.timestamp="?t=20220120",e.DWT.defaultEnv={JSVersion:"17,2,0,1026",ServerVersionInfo:"17,2,0,1026",ServerLinuxVersionInfo:"17,2,0,1026",ServerMacVersionInfo:"17,2,0,1026",ActiveXVersion:"17,2,0,1026",PluginVersion:"11,1,0,0",PdfVersion:"11.3.0.1026",ProductName:"Dynamic Web TWAIN 17.2",Containers:[],DynamicContainers:[],ContainerMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,UseDefaultInstallUI:!0,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,IfUseViewer:!0,ViewerJSIntegerited:!0,ActiveXIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfCheck64bitServiceFirst:!1,IfDownload64bitService:!1,IfInstallDWTModuleWithZIP:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfCheckDWT:!0,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!1,IfUseWSPool:!1,UseDefaultViewer:!0,fetchOptions:{mode:"cors",credentials:"same-origin"},CertificateConfig:{URL:"",UpdateDaysBeforeExpired:30},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,CustomizableDisplayInfo:{loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:e.navInfoSync.bIE?e.Lib.loaderBarSourceIE:e.Lib.loaderBarSource,errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_WebTwainIdDuplicated:"Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}},handshakeCode:void 0,organizationID:void 0,licenseServer:void 0,sessionPassword:"",ltsDebug:!1,showLoadingMsgDialog:!0},e.MSG={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}}(T),T.OnWebTwainNotFoundOnWindowsCallback=T.OnWebTwainNotFoundOnWindowsCallback||!1,T.OnWebTwainNotFoundOnMacCallback=T.OnWebTwainNotFoundOnMacCallback||!1,T.OnWebTwainNotFoundOnLinuxCallback=T.OnWebTwainNotFoundOnLinuxCallback||!1,T.OnWebTwainPreExecuteCallback=T.OnWebTwainPreExecuteCallback||!1,T.OnWebTwainPostExecuteCallback=T.OnWebTwainPostExecuteCallback||!1,T.OnWebTwainShowUpdatingDialog=T.OnWebTwainShowUpdatingDialog||!1,T.OnWebTwainCloseUpdatingDialog=T.OnWebTwainCloseUpdatingDialog||!1,T.OnRemoteWebTwainNotFoundCallback=T.OnRemoteWebTwainNotFoundCallback||!1,T.OnRemoteWebTwainNeedUpgradeCallback=T.OnRemoteWebTwainNeedUpgradeCallback||!1,T.OnWebTWAINDllDownloadSuccessful=T.OnWebTWAINDllDownloadSuccessful||!1,T.OnWebTWAINDllDownloadFailure=T.OnWebTWAINDllDownloadFailure||!1,T.OnWebTWAINModuleDownloadManually=T.OnWebTWAINModuleDownloadManually||!1,function(e){var r={},t=T.dcp;T.DWT.RegisterEvent=function(i,n){return(("OnWebTwainReady"===i||!T.DWT.UseDefaultInstallUI)&&e.isFunction(n)||"OnWebTwainInitMessage"===i&&e.isFunction(n))&&(T.DWT[i]=n),!0},e.mix(r,T.DWT.defaultEnv),e.mix(r,T.DWT),T.DWT=r,t.onReadys.push(function(){t.ifCheck64bitServiceFirst=T.DWT.IfCheck64bitServiceFirst})}(T.Lib),function(e){var g,r=!0,t=!1,i=document.location.protocol,n=location.hostname,a=T.navInfoSync,s=a.bSSL,o=a.bHTML5Edition,l=t,d=t,c=t,u=0,h=location.pathname,f=0;(g={config:{debug:t,devMode:t,usingMainMode:t,bDiscardBlankImage:t,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:s,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:r,bOK:t,__dialog:t,scriptLoaded:t,wasmScriptLoaded:t,wasmLoad:t,cssLoaded:t,viewerScriptLoaded:t,bNoControlEvent:t,bNeedUpgradeEvent:t,StartWSTimeoutId:t,StartWSByIPTimeoutId:t,bPromptJSOrServerOutdated:t,bNeedWasm:t,bAutoLoadDone:t,detectType:s?1:"http:"===i||""===n?0:-1,tryTimes:0,ports:[{port:18623,ssl:r},{port:18622,ssl:t}],win64Ports:[{port:18621,ssl:r},{port:18620,ssl:t}],cUrlIndex:0,urls:[],onNoControl:t,needUpgrade:t,onNotAllowedForChrome:t,OnDetectNext:t,OnCreatWS:t,bMaskShow:t},page:{bUnload:t,OnUnload:t},tmp:{IfAllowLocalCache:r,EmptyFunction:function(){}}}).appendMessage=function(M){"string"==typeof M?g.config.msg.push(M):"[object Array]"===Object.prototype.toString.call(M)&&T.Lib.each(M,function(E){g.appendMessage(E)})},g.appendRichMessage=function(M){g.appendMessage([g.config.msgPrefix,M,g.config.msgSuffix])},g.clearMessage=function(){var M=T.navInfoSync;return M.bIE&&8==M.IEVersion?g.config.msg.splice(0,g.config.msg.length):g.config.msg.splice(0),r},g.getRealPath=function(M){return void 0===M?"":1==g.env.pathType?g.env.basePath+M:g.env.basePath+M.replace(new RegExp("/","g"),"\\\\")},g.getHex=function(M){var E;return 1==(E=Number(M).toString(16).toUpperCase()).length&&(E=["0",E].join("")),E},g.getColor=function(M){var R,x;return x=(65280&M)>>8,R=255&M,["#",g.getHex(M>>16),g.getHex(x),g.getHex(R)].join("")},g.RGB2BGR=function(M){return(255&M)<<16|65280&M|M>>16},g.BGR2RGB=g.RGB2BGR,g.isLocalIP=function(M){return M&&("127.0.0.1"===M||"localhost"===M||"local.dynamsoftwebtwain.com"===M||"local.dynamsoft.com"===M)},g.IsNeedLoadWasm=function(){return e.detect.bNeedWasm||!1===T.DWT.UseLocalService||e.isUndefined(T.DWT.UseLocalService)&&e.env.bMobile||T.DWT.UseBarcodeAddonWasm};var p=navigator,m=p.userAgent.toLowerCase(),I=p.platform.toLowerCase(),y=!a.bMobile&&/win32|win64|windows/.test(I),_=y&&/win64|x64/.test(m),C="",A="";m.indexOf("mac os x")>-1&&(C=((C=m.match(/mac os x [\d._]*/gi))+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")),m.indexOf("cpu os")>-1&&(A=((A=m.match(/cpu os [\d._]*/gi))+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")),m.indexOf("cpu iphone os")>-1&&(A=((A=m.match(/cpu os [\d._]*/gi))+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")),""===n?y&&h.lastIndexOf("\\")>1?h=h.substring(1,h.lastIndexOf("\\")).replace(/%20/g," "):(f=1,h=h.substring(1,h.lastIndexOf("/")).replace(/%20/g," ")):(f=1,h=h.substring(0,h.lastIndexOf("/"))),a.bIE?""===(u=a.IEVersion)||u>=10?0==T.DWT.IfUseActiveXForIE10Plus?o=r:(c=r,T.navInfoSync.bHTML5Edition=o=t):(o=t,u>=9&&(c=r),d=r):o||(l=r),g.env={bIE:a.bIE,bEdge:a.bEdge,bWin64:_,osVersion:A,macOSX:C,bFileSystem:a.bFileSystem,bMobile:a.bMobile,strIEVersion:a.IEVersion,basePath:h,pathType:f,isDesktopViewer:function(){return T.navInfo.bWin||T.navInfo.bLinux||T.navInfo.bMac},isPadViewer:function(){return T.navInfo.bPad||T.navInfo.bChromeOS},isMobileViewer:function(){return T.navInfo.bMobile},isWasmUseFastcomp:function(){if(navigator.userAgentData&&navigator.userAgentData.brands){var M=navigator.userAgentData.brands,E=0;for(E=0;E<M.length;E++){var R=M[E];if(R.brand&&("Chromium"==R.brand||"Google Chrome"==R.brand)&&R.version&&parseInt(R.version,10)>=94)return!1}}else{var x=parseInt(T.navInfo.strBrowserVersion);if(T.navInfo.bSafari&&x>=13)return!1;if(T.navInfo.bFirefox&&x>=94)return!1;if(T.navInfo.bChrome&&x>=94)return!1}return!0}},g.product={name:"Dynamic Web TWAIN",bHTML5Edition:o,bPluginEdition:l||c,bActiveXEdition:d,host:T.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:T.dcp.getDSPath,getPKGPath:function(){return T.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return T.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return T.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return T.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:o},g.getShadowRoot=function(M){var E=M;if(e.win.ShadowRoot)for(;E;){if(E instanceof e.win.ShadowRoot)return E;E=E.parentNode}return!1},g.isShadowRoot=function(M){return!!(e.win.ShadowRoot&&M instanceof e.win.ShadowRoot)},e.mix(e,g),e.Addon_Events=[],e.Addon_Sendback_Events=[]}(T.Lib),T.Ready(function(e,r){var n=e.getNavInfo(),s=navigator.userAgent.toLowerCase(),c=(document,location,n.bMac),u=n.bLinux,h=n.bWin,f=n.bOSx64,g=n.bSafari,v=n.bFirefox,m=n.bChrome,y=parseFloat(n.strBrowserVersion);n.bChromeOS&&(n.bMobile=!0);var E={getServerVersionInfo:function(x){var P=T.DWT.ServerVersionInfo;return n.bWin||n.bWin64||(n.bMac?P=T.DWT.ServerMacVersionInfo:(n.bLinux||n.bChromeOS)&&(P=T.DWT.ServerLinuxVersionInfo)),x?P:e.replaceAll(P,",","")},getDWTPrefix:function(){return!0===T.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1};e.mix(e.product,E);var R={bChrome:m,bFirefox:v,bSafari:g,bWin:h,bWin64:-1!=s.indexOf("win64")||-1!=s.indexOf("x64"),bMac:c,bLinux:u,isX64:f,iPluginLength:n.bIE||n.bEdge?0:navigator.plugins.length,strChromeVersion:n.bChrome?y:"",strFirefoxVersion:n.bFirefox?y:""};e.mix(e.env,R)}),T.Ready(function(e,r){var t=e.getNavInfo(),i=!0,n=!1;e.License={isLTS:function(){return e.isString(T.DWT.handshakeCode)||e.isString(T.DWT.organizationID)||T.DWT.isPublicLicense()},_innerCheckProductKey:function(l,d,c,u){var h,v,f=T.DWT,g=u;if((h=l.__licenseInfo)&&h.LTS){if(!h||!e.isArray(h.Detail)||0==h.Detail.length)return T.Lib.License.isLTS()?e.Errors.LicenseNoCore(l):e.Errors.LicenseEmptyOrInvalid(l),e.License.ShowInvalidLicense("",!0),n;g=!1}else if(!e.isString(f.ProductKey)||""==f.ProductKey||"******"==f.ProductKey||!h||!e.isArray(h.Detail)||0==h.Detail.length)return T.Lib.License.isLTS()?e.Errors.LicenseNoCore(l):e.Errors.LicenseEmptyOrInvalid(l),e.License.ShowInvalidLicense("",!0),n;var x,P,F,k,p=0,m=0,I=[],y=[],_=n,C=n,A=n,M=n,E=n,R=n;if(!this.isBindDomainOK(h.Domain))return e.Errors.LicenseBadDomain(l),g&&e.License.promptLicenseErr(l),n;for(h.Detail.length>0&&(v="FALSE"!=(F=h.Detail[0]).Trial),P=1;P<h.Detail.length;P++)if("FALSE"==(F=h.Detail[P]).Trial&&v||"TRUE"==F.Trial&&!v)return e.Errors.LicenseTrialFullMixed(l),g&&e.License.promptLicenseErr(l),n;if(d.Core){for(P=0;P<h.Detail.length;P++)if((k=this.getEnumLicenseType((F=h.Detail[P]).EnumLicenseType)).Core){var w=this.getLicenseType(F.LicenseType);if(e.product.bHTML5Edition){if(w.ActiveX&&!w.Html5)continue;y.push(F)}else{if(!w.ActiveX&&w.Html5)continue;y.push(F)}}}else y=h.Detail;for(P=0;P<y.length;P++){var S=i;if(k=this.getEnumLicenseType((F=y[P]).EnumLicenseType),d.Core||this.isAllowLicenseType(k,d)){x=F.ExpireDate.replace(/-/g,"/");var L="FALSE"!=F.Trial;if(L&&!T.DWT.HideTrialMessage){var U=this.remainExpireDays(x);U<=5&&(e.isFunction(T.OnLicenseExpiredMessage)&&T.OnLicenseExpiredMessage(x,U),T.DWT.HideTrialMessage=!0)}if(this.isExpiredOrFuture(x,L))I.push(x);else if(k.Core&&parseInt(F.Version)>=15||!k.Core)if(d.Wasm){var Z=!1;(d.Core&&k.Core||d.PDFRasterizer&&k.PDFRasterizer||d.Webcam&&k.Webcam)&&(Z=!0),Z&&(F.OS.toLowerCase().indexOf("wasm")>-1?this.isBrowserOK(F.Browser)||c?(p++,S=n):C=i:d.PDFRasterizer?E=i:d.Webcam?R=i:M=i)}else this.isOSOK(F.OS,l)?this.isBrowserOK(F.Browser)||c?(p++,S=n):C=i:_=i;else A=i;S&&m++}}if(p>0)return i;if(0==m)return this.setNoAllowedLicenseTypeError(l,d),g&&e.License.promptLicenseErr(l),n;if(I.length>0){var pe,ne=0,oe=1e20,ue="",X=(new Date).getTime();for(x="",P=0;P<I.length;P++)(pe=this.parseDateFromString(I[P])).getTime()<X&&pe.getTime()>ne?(ne=pe.getTime(),x=I[P]):pe.getTime()>X&&pe.getTime()<oe&&(oe=pe.getTime(),ue=I[P]);return""!=x?(pe=this.parseDateFromString(x),x=this.getLicenseDateString(pe),e.Errors.LicenseExpired(l,x),T.Lib.License.isLTS()||e.License.ShowInvalidLicense(x,v),g=!1):""!=ue?(pe=this.parseDateFromString(ue),ue=this.getLicenseDateString(pe),e.Errors.LicenseIsFuture(l,ue)):(e.Errors.LicenseExpired(l,""),g=!1,e.License.ShowInvalidLicense()),g&&e.License.promptLicenseErr(l),n}if(A)return e.Errors.LicenseLower(l),g&&e.License.promptLicenseErr(l),n;if(C)return t.bEdge?e.Errors.LicenseNoEdge(l):t.bChrome?e.Errors.LicenseNoChrome(l):t.bFirefox?e.Errors.LicenseNoFirefox(l):t.bIE?e.Errors.LicenseNoIE(l):t.bSafari?e.Errors.LicenseNoSafari(l):e.Errors.LicenseNotSupportBorwser(l),g&&e.License.promptLicenseErr(l),n;if(_){var K=!1,G=!1,ee=!1;return l._bRemoteMode?l.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?ee=!0:l.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux?G=!0:l.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(K=!0):(K=t.bMac,G=t.bLinux,ee=t.bWin||t.bWin64),ee?e.Errors.LicenseNotSupportWindows(l):K?e.Errors.LicenseNotSupportMAC(l):G?e.Errors.LicenseNotSupportLinux(l):e.Errors.LicenseNotSupportOS(l),g&&e.License.promptLicenseErr(l),n}return M?(e.Errors.LicenseNotSupportWasm(l),g&&e.License.promptLicenseErr(l),n):E?(e.Errors.LicenseNotSupportPdfRWasm(l),g&&e.License.promptLicenseErr(l),n):R?(e.Errors.LicenseNotSupportWebcamWasm(l),g&&e.License.promptLicenseErr(l),n):(e.Errors.LicenseEmptyOrInvalid(l),g&&this.promptLicenseErr(l),n)},checkProductKey:function(l,d,c,u){var h=T.DWT.licenseException,f=!0;return(T.Lib.isString(T.DWT.handshakeCode)||T.Lib.isString(T.DWT.organizationID))&&T.Lib.isString(T.DWT.ProductKey)&&(T.Lib.Errors.LongKeyShortKeyMixed(l),f=!1),(f=f&&T.Lib.License._innerCheckProductKey(l,d,c,u))||(h.code=l._errorCode,h.message=l._errorString,h.fromLTS=!1),f},promptLicenseErr:function(l){var c,d=!1,u=screen.width,h=u>640?640:u-10;e.isNumber(l.ErrorCode)?(d=l.ErrorCode,c=l.ErrorString):e.isNumber(l.code)?(d=l.code,c=l.message):e.isString(l.message)&&(d=!0,c=l.message),!1!==d&&T.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',c,"</div>",'<div style="padding-top:35px"></div>'].join(""),{width:h,height:0,headerStyle:1})},ShowInvalidLicense:function(l,d){if(!e.detect.needUpgrade){if(e.License.isLTS())return void(T.OnLTSLicenseError&&T.OnLTSLicenseError(T.Lib.License.getPublicLicenseContent(T.DWT.licenseException.message)));var h=[],f="is not valid",g=screen.width,v=g>640?640:g-10;if(l&&""!=l&&(f=-1==l.indexOf("on")?"has expired on "+l:"has expired "+l),h.push('<div style="padding:0 25px 25px 25px;">'),e.env.bMobile?(h.push("The <strong>ProductKey</strong> is not valid."),d&&(h.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"),h.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"),h.push("</ul>"))):d?(h.push("You are seeing this message because your trial key "),h.push(f),h.push(". Two quick steps to extend your trial: <br /><div><ul>"),h.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"),h.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"),h.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")):(h.push("You are seeing this message because the license for doc scanning support "),h.push(f),h.push(".<br /><div><ul>"),h.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"),h.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"),h.push("</ul></div>")),h.push("</div>"),T.DWT.ShowMessage(h.join(""),{width:v,height:0,headerStyle:1,closeButton:!1}),e.env.bMobile){var p=e.one(".ds-dwt-ui-dlg-wrap");p&&p.length>0&&(p[0].style.fontSize="1.5em",p[0].style.lineHeight="1.5em")}}},isBindDomainOK:function(l){if(e.isUndefined(l)||null==l||""==l||"*"==l||"*.*"==l)return i;var d=location.hostname,c=n;if(""==d)return i;for(var u=d.toLowerCase().split("."),h=u.length,f=l.toLowerCase().split(";"),g=0;g<f.length;g++){var v=f[g];if("*.*"==v){c=i;break}var p=v.split("."),m=p.length;if(m>0&&m-1<=h){for(var I=i,y=m-1;y>0;y--){if(p[y].indexOf("*")>-1){c=i;break}if(y+h-m>=0){if(u[y+h-m]!=p[y]){I=n;break}}else if("*"!=p[y]){I=n;break}}if(I&&("*"==p[0]||h>=m&&u[h-m]==p[0])){c=i;break}}}return c},isExpiredOrFuture:function(l,d){if(""==l)return n;if(!d){var c=l.length;if(c>2&&"/"==l[c-2]&&"0"==l[c-1])return n}var u=this.parseDateFromString(l),h=(new Date).getTime(),f=h+5184e6;return u.getTime()<h||d&&u.getTime()>f?i:n},remainExpireDays:function(l){if(""==l)return 65536;var d=this.parseDateFromString(l),c=(new Date).getTime(),u=(d.getTime()-c)/864e5;return d.getTime()<c?0:Math.ceil(u)},isOSOK:function(l,d){var u=!1,h=!1,f=!1,g=!1,v=!1,p=!1;return""==l||"0"==l||(d._bRemoteMode?d.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?f=!0:d.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux?h=!0:d.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac?u=!0:d.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumEmbed?v=!0:d.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumChromeOS&&(p=!0):(u=t.bMac,h=t.bLinux,f=t.bWin||t.bWin64,g=e.env.bMobile,p=t.bChromeOS,v=t.bEmbed),(l=l.toLowerCase()).indexOf("windows")>-1&&f)||l.indexOf("mac")>-1&&u||l.indexOf("linux")>-1&&h||l.indexOf("mobile")>-1&&(g||p)||l.indexOf("embed")>-1&&v?i:n},isBrowserOK:function(l){if(e.isString(l)){if(""==l||"0"==l)return i;var d=(l=l.toLowerCase()).split(";"),c=n;return e.each(d,function(u){("chrome"==e.trim(u)&&(t.bChrome||t.bSafari||t.bOpera)||"ie"==e.trim(u)&&(t.bIE||t.bEdge)||"firefox"==e.trim(u)&&t.bFirefox)&&(c=i)}),c}return n},parseDateFromString:function(l){var d,c=l;return c=c.replace(/-/g,"/"),d=Date.parse(c),isNaN(d)&&(d=0),(d=new Date(d)).setHours(23,59,59,999),d},getEnumLicenseType:function(l){var d=n,c=n,u=n,h=n,f=n,g=n,v=n,p=n,m=n;return e.isString(l)&&e.each(l.split(";"),function(I){var y=1*I;2==y||3==y||0==y||1==y?d=i:4==y?c=i:50==y?u=i:51==y?h=i:52==y?f=i:7==y?g=i:8==y?v=i:9==y?p=i:10==y&&(m=i)}),{Core:d,PDFRasterizer:p,Webcam:v,barcode1D:c,QR:u,PDF417:h,DataMatrix:f,OCR:g,OCRPro:m}},getLicenseType:function(l){var d=n,c=n,u=n,h=n,f=n,g=n,v=n,p=n,m=n,I=n;return l&&""!=l&&("html5;activex;oldie"==(l=l.toLowerCase())?u=i:"html5"==l||"win=(aph) or mac=(ph) or linux(h)"==l?d=i:"html5;activex"==l?(d=i,u=i):"1d barcode reader"==l?c=i:"2d barcode reader(qrcode)"==l?h=i:"2d barcode reader(pdf417)"==l?f=i:"2d barcode reader(data matrix)"==l?g=i:"ocr"==l?v=i:"webcam"==l?p=i:"pdf rasterizer"==l?m=i:"proocr"==l&&(I=i)),{Html5:d,PDFRasterizer:m,Webcam:p,barcode1D:c,QR:h,PDF417:f,DataMatrix:g,OCR:v,OCRPro:I,ActiveX:u}},isAllowLicenseType:function(l,d){return d.Core?l.Core:d.PDFRasterizer?l.PDFRasterizer:d.Webcam?l.Webcam:d.barcode1D?l.barcode1D:d.QR?l.QR:d.PDF417?l.PDF417:d.DataMatrix?l.DataMatrix:d.OCR?l.OCR:d.OCRPro?l.OCRPro:l.Core},setNoAllowedLicenseTypeError:function(l,d){d.Core?d.Wasm?e.Errors.LicenseNotSupportWasm(l):e.Errors.LicenseNoCore(l):d.PDFRasterizer?d.Wasm?e.Errors.LicenseNotSupportPdfRWasm(l):e.Errors.LicenseNoPDF(l):d.Webcam?d.Wasm?e.Errors.LicenseNotSupportWebcamWasm(l):e.Errors.LicenseNoWebcam(l):d.OCR?e.Errors.LicenseNoOCR(l):d.OCRPro?e.Errors.LicenseNoOCRPro(l):e.Errors.LicenseEmptyOrInvalid(l)},getLicenseDateString:function(l){var c,d=l.getFullYear();return[(c=l.getMonth()+1)>=10?""+c:"0"+c,"/",l.getDate()>=10?""+l.getDate():"0"+l.getDate(),"/",d].join("")},hasPDFRProductKey:function(l){if(l._isMobileMode()){if(!e.License.checkProductKey(l,{PDFRasterizer:!0,Wasm:!0},!0))return l._resetErr(),!1}else if(!e.License.checkProductKey(l,{PDFRasterizer:!0},!0))return l._resetErr(),!1;return!0},checkPDFProductKeyWhenNeeds:function(l,d){var h;if((d==T.DWT.EnumDWT_ImageType.IT_PDF||d==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF)&&(e.product.bHTML5Edition?l.__addon&&l.__addon.PDF&&(h=l.__addon.PDF.GetConvertMode()):l.Addon&&l.Addon.PDF&&(h=l.Addon.PDF.GetConvertMode()),1==h||4==h))return e.isFunction(l._isMobileMode)&&l._isMobileMode()?this.checkProductKey(l,{PDFRasterizer:!0,Wasm:!0},!0):this.checkProductKey(l,{PDFRasterizer:!0},!0);return i},getPublicLicenseContent:function(l){var d=[],c=l;if(!e.isString(c)){if(e.isUndef(c))return"";c=c instanceof Error||"message"in c?c.message:""+c}var u=c.indexOf("["),h=c.indexOf("]",u),f=c.indexOf("(",h),g=c.indexOf(")",f);if(-1==u||-1==h||-1==f||-1==g)return c;u>0&&d.push(c.substring(0,u));var v=c.substring(u+1,h),p=c.substring(f+1,g);return d.push(['<a href="',p,'" target="_blank" class="dynamsoft-major-color">',v,"</a>"].join("")),d.push(c.substring(g+1)),d.join("")}}}),T.Ready(function(e,r){var n={Errors:{FilePathSyntaxIncorrect:function(a){a._errorCode=-3123,a._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(a,s){return e.isString(s)&&0!=s.length?!(e.startsWith(s,"http://")||e.startsWith(s,"https://")||e.startsWith(s,"ftp://"))||(e.File.Errors.FilePathSyntaxIncorrect(a),!1):(e.Errors.InvalidFile(a),!1)}};n.checkFolder=n.checkFilePath,e.File=n,T.DWT.isPublicLicense=function(){return!(!e.isUndef(T.DWT.ProductKey)||!(e.isUndef(T.DWT.handshakeCode)&&e.isUndef(T.DWT.organizationID)||e.isUndef(T.DWT.handshakeCode)&&"200001"==T.DWT.organizationID))},e.showProgress=function(){},e.closeProgress=function(){},T.DWT.__innerCheckCertDate=function(a){var s=Date.parse(a+"T00:00:00");""!=a&&!isNaN(s)&&T.DWT.CheckCertExpired&&(new Date).getTime()>=s-864e5*T.DWT.CertificateConfig.UpdateDaysBeforeExpired&&(e.isFunction(T.OnCertExpired)&&T.OnCertExpired(a),setTimeout(function(){T.DWT.UpdateCert(T.DWT.CertificateConfig.URL,T.OnUpdateCertSuccess,T.OnUpdateCertFailure)},5e3))},T.DWT.__innerUpdateCert=function(a,s,o,l){var c,d=T.dcp;c=[s?d._getHttpPreUrl(d.detect.curPortIndex):d._getPreUrl(d.detect.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",2,"&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:c,async:!0,data:a,onSuccess:o,onError:function(){e.isFunction(l)&&l()}})},T.DWT.__innerReboot=function(a,s){var o=T.dcp,l=[o._getPreUrl(o.detect.curPortIndex),o._getModuleName(),o._getModuleVer(),"/admin?ts=",e.now()].join("");e.ajax({method:"POST",url:l,async:!0,data:'{"id":"1","method":"Reboot","parameter":[],"version":"dwasm2_'+o._getModuleVer()+'"}',onSuccess:a,onError:s})},T.DWT.UpdateCert=function(a,s,o){e.isString(a)&&""!=a?e.fetch(a,{mode:"cors",dataType:"arraybuffer"}).then(function(d){T.DWT.__innerUpdateCert(d,!1,function(){T.DWT.CheckCertExpired=!1,e.isFunction(s)&&s()},function(){T.navInfoSync.bSSL?T.DWT.__innerUpdateCert(d,!0,s,o):e.isFunction(o)&&o()}),d=null},o):e.isFunction(o)&&o()}}),function(e,r){e.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},e.install._strNonInstallDIV=['<div style="text-align:center;" id="',e.install._divDWTNonInstallContainerID,'"></div>'].join(""),r.CloseDialog=function(){var t=e.install._dlgInstall;if(t){var i=e.all(".dynamsoft-dialog-close");e.each(i,function(n,a){e.removeEventListener(n,"click",r.CloseDialog)}),t.open&&t.close(),document.body.removeChild(t),e.install._dlgInstall=!1}},r.ShowDialog=function(t,i,n,a,s){if(!1!==n){var o,l={width:t,height:i,position:"absolute"};a?(o=['<div class="dynamsoft-dwt-dialog-body">',n,"</div>"].join(""),l.closeButton=!1):o=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',s?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",n,"</div>","</div>"].join(""),s&&(l.closeButton=!1),r.ShowMessage(o,l)}},r.ShowMessage=function(t,i){var d,c,f,g,v,n=e.install,a="ds-dwt-ui-dlg",s="ds-dwt-ui-dlg-wrap",o=screen.width,l=!0,u=0,h=!0,p=!0,m=0,I="fixed",y="Error",_=e.product.bActiveXEdition||e.product.bPluginEdition;if(i&&(d=i.width,c=i.height,i.seconds&&(u=i.seconds),i.headerStyle&&(m=i.headerStyle),!1===i.closeButton&&(h=!1),i.bAutoClose&&(f=i.bAutoClose,h=!0),0==i.bReadyClosed&&(l=!1),i.position&&(I=i.position),i.caption&&(y=i.caption)),d?d>o-10&&(d=o-10):d=o>600?600:o-10,c||(c="100%"),1==m?t=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',h?'<div class="dynamsoft-dialog-close"></div>':"","</div>",t,"</div></div>"].join(""):2==m&&(t=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',y,"</span>",h?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',t,"</div></div>"].join("")),0==e.one("."+a).length){var C=document.createElement("div"),A=document.createElement("div"),M=document.createElement("div");if(C.className=a,A.className=s,A.style.margin="auto",A.style.zIndex="9999",A.style.position="relative",A.style.border="0",f&&((g=document.createElement("div")).className="dynamsoft-dialog-close",A.insertBefore(g,A.firstChild),(v=document.createElement("div")).className="dynamsoft-dialog-closeTimer",v.style.width="100%",v.style.height="2px",v.style.marginTop="-2px",v.style.backgroundColor="#fe8e14",A.insertBefore(v,A.firstChild)),A.appendChild(M),M.innerHTML=t,C.appendChild(A),document.body.appendChild(C),n._dlgInstall=C,e.dialog.setup(n._dlgInstall,!1,{style_position:I}),T.navInfo.bIE){var E=document.createElement("iframe");E.frameborder="0",E.marginheight="0",E.marginwidth="0",E.style.border="0",E.style.backgroundColor="transparent",E.style.position="absolute",E.style.left=0,E.style.top=0,E.style.width="100%",E.style.height=document.body.clientHeight+"px",E.style.margin="0 auto",E.style.zIndex="9990",E.src=["javas","cript:",'""'].join("");var R=e.one(".dynamsoft-backdrop");R&&R.length>0&&(R[0].innerHTML="",R[0].appendChild(E))}}else p=!1,e.dialog.setcfg(n._dlgInstall,{style_position:I});var x=e.one("."+s);if(x&&x.getEL()&&(x[0].style.width=d+"px",x[0].style.height=e.isNumber(c)&&c>0?c+"px":"100%",p||e.each(x[0].childNodes,function(k){if("DIV"==k.tagName&&"dynamsoft-dialog-close"!=k.className&&"dynamsoft-dialog-closeTimer"!=k.className)return k.innerHTML=t,!1})),_){var P=e.one(".dynamsoft-dialog");P&&P.getEL()&&(P.getEL().style.border="1px solid #999")}if(n._dlgInstall.open&&n._dlgInstall.close(),n._dlgInstall.showModal(),n._dlgInstall.bReadyClosed=l,h){var F=e.all(".dynamsoft-dialog-close");e.each(F,function(k,w){e.addEventListener(k,"click",r.CloseDialog)}),F.length>0&&f&&u>0&&setTimeout(e._zdgb_xkz_dhk,100)}},r.OnWebTwainPreExecute=function(){T.Lib.detect.OnWebTwainPreExecute(T.DWT.IfConfineMaskWithinTheViewer)},r.OnWebTwainPostExecute=function(){T.Lib.detect.OnWebTwainPostExecute()}}(T.Lib,T.DWT);var ZW=function(e,r){var t=T.Lib;r||T.DWT.CloseDialog();var i=t.get(t.install._divDWTNonInstallContainerID);if(i&&i.parentNode.removeChild(i),e&&t.isDOM(e)&&t.show(e),e&&t.isString(e))t.show(e);else{var n,a;if(a=T.DWT.Containers)for(n=0;n<a.length;n++)a[n].ContainerId&&t.show(a[n].ContainerId);if(a=T.DWT.DynamicContainers)for(n=0;n<a.length;n++)a[n].ContainerId&&t.show(a[n].ContainerId);a=null}""!=t.install._divDWTemessageContainer&&t.show(t.install._divDWTemessageContainer)};(function(e){e.win.DCP_DWT_OnClickCloseInstall=ZW,e.detect.showMask=function(){e.detect.bMaskShow=!0,T.DWT.ScanDirectly||(e.isFunction(T.OnWebTwainPreExecuteCallback)?T.OnWebTwainPreExecuteCallback():e.detect.OnWebTwainPreExecute(T.DWT.IfConfineMaskWithinTheViewer))},e.detect.OnWebTwainPreExecute=function(t){var n,a,i=t;T.DWT.Containers.length>0&&(a=T.Lib.get(T.DWT.Containers[0].ContainerId)),a&&(n=a.getBoundingClientRect(),a.firstChild&&a.firstChild.getBoundingClientRect&&(n=a.firstChild.getBoundingClientRect())),(null==n||T.DWT.Containers.length>1||1==T.DWT.Containers.length&&(0==n.width||0==n.height))&&(i=!1),e.mask.bConfined=i,e.mask.container=a,e.showMask()},e.detect.hideMask=function(){e.detect.bMaskShow=!1,T.DWT.ScanDirectly||(e.isFunction(T.OnWebTwainPostExecuteCallback)?T.OnWebTwainPostExecuteCallback():e.detect.OnWebTwainPostExecute())},e.detect.OnWebTwainPostExecute=e.hideMask})(T.Lib),function(e){e._zdgb_xkz_dhk=function(){var r=e.install._dlgInstall;if(r){var t=e.one(".dynamsoft-dialog-closeTimer",r);if(t.getEL()){var i=parseInt(t.getEL().style.width);(i-=1)<=0?T.DWT.CloseDialog():(t.getEL().style.width=i+"%",setTimeout(e._zdgb_xkz_dhk,100))}}},e.ShowLicenseDialog=T.DWT.ShowMessage,e.createLoadingBarContent=function(){var r=e.loaderBarClassName+"-noserver",t=e.loaderBarClassName+"-noserver-parent",i="";""!=e.loaderBarBackgroundColor&&(i=";background:"+e.loaderBarBackgroundColor);var n=[];return n.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">'),n.push(['<div class="',t,'" style="margin:0 auto',i,'">'].join("")),n.push(['<div class="',r,'" style="margin:0 auto',i,'">'].join("")),n.push(['<img src="',e.loaderBarSource,'" />'].join("")),n.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>'),n.push('<p class="dynamsoft-loadingMsg-desc"> </p>'),n.push("</div></dialog>"),n.join("")},e.openLoadingMsg=function(){if(e.product.bHTML5Edition&&!e.dlgLoadingShowStatus&&T.DWT.showLoadingMsgDialog){var t,r=T.DWT.UseLocalService;if(!e.env.bMobile&&(e.isUndefined(r)||1==r))return void e.detect.showMask();if(e.detect.hideMask(),!e.dlgLoading){(t=e.one(".dynamsoft-loadingMsg"))&&t.getEL()&&t.remove();var i=e.parseHTML(e.createLoadingBarContent());i&&i.length>0&&document.body.appendChild(i[0]),(t=e.one(".dynamsoft-loadingMsg"))&&t.getEL()&&(e.dlgLoading=t[0],e.dialog.setup(e.dlgLoading))}e.dlgLoading.showModal(),e.dlgLoadingShowStatus=!0}},e.showLoadingMsg=function(r,t,i){if(0!=e.dlgLoadingShowStatus){e.one(".dynamsoft-loadingMsg");var a=e.one(".dynamsoft-loadingMsg-msg"),s=e.one(".dynamsoft-loadingMsg-desc");a&&a.getEL()&&a.html(t),s&&s.getEL()&&(e.env.bMobile&&(s.getEL().style.fontSize="1.4em"),s.html(i))}},e.closeLoadingMsg=function(r){e.log("closeLoadingMsg:"+r),e.detect.hideMask(),1==e.dlgLoadingShowStatus&&(e.dlgLoading&&e.dlgLoading.close(),e.dlgLoadingShowStatus=!1)}}(T.Lib),function(e){e.domReady(function(){var t=document.createElement("style"),i=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");t.type="text/css";try{t.appendChild(document.createTextNode(i))}catch(n){t.styleSheet.cssText=i}document.body.appendChild(t)});var r=!0;e._funsAfterConfigLoaded=[],e._safePromptCustomMsg=function(t){if(e.product.loadResourcePath)t&&e._funsAfterConfigLoaded.push(t);else{if(r){var i={},n=T.DWT.CustomizableDisplayInfo;e.mix(i,T.DWT.defaultEnv.CustomizableDisplayInfo),n&&(n.loaderBarClassName&&(i.loaderBarClassName=n.loaderBarClassName),n.loaderBarSource&&(i.loaderBarSource=n.loaderBarSource),n.loaderBarWidth&&(i.loaderBarWidth=n.loaderBarWidth),n.loaderBarHeight&&(i.loaderBarHeight=n.loaderBarHeight),n.errorMessages&&e.mix(i.errorMessages,n.errorMessages),n.generalMessages&&e.mix(i.generalMessages,n.generalMessages),n.customProgressText&&e.mix(i.customProgressText,n.customProgressText),n.buttons&&(n.buttons.titles&&e.mix(i.buttons.titles,n.buttons.titles),n.buttons.bShowAllButtons&&e.mix(i.buttons.bShowAllButtons,n.buttons.bShowAllButtons),n.buttons.visibility&&e.mix(i.buttons.visibility,n.buttons.visibility)),n.dialogText&&e.mix(i.dialogText,n.dialogText)),T.DWT.CustomizableDisplayInfo=i,r=!1}t&&t()}}}(T.Lib),T.Ready(function(e){function r(t,i){var s,n=this,a=0;s=e.isString(t)?document.getElementById(t):t,n.isLoaded=!1,n.displayType=0,n.progress=0,n.progressPosition=0,n.borderWidth={left:0,right:0,top:0,bottom:0},n.orientation=i.orientation||r.Orientation.Horizontal,n.direction=i.direction||r.Direction.LeftToRight,n.creationType=i.creationType||r.CreationType.Replace,n.value=0,n.initialValue=i.value||0,n.minValue=i.minValue||0,n.maxValue=i.maxValue||100,n.showLabel=void 0===i.showLabel||i.showLabel,n.labelText=i.labelText||"",n.width=i.width||280,n.height=i.height||20,n.borderRadius=i.borderRadius||10,n.orientation==r.Orientation.Horizontal&&n.borderRadius>n.height/2&&(n.borderRadius=Math.round(n.height/2)),n.orientation==r.Orientation.Vertical&&n.borderRadius>n.width/2&&(n.borderRadius=Math.round(n.width/2)),n.backColor=i.backColor||"",n.color=i.color||"#50a8e1",n.animationStyle=0,n.animationInterval=i.animationInterval||100;var o=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];for(n.extraClassName={},a=0;a<o.length;a++)n.extraClassName[o[a]]=i.extraClassName?"string"==typeof i.extraClassName?i.extraClassName:i.extraClassName[o[a]]||"":"";n.onLoad=i.onLoad||null,n.onValueChanged=i.onValueChanged||null,n.onAnimate=i.onAnimate||null,n.creationType==r.CreationType.Replace?n.parentElement=s:(n.parentElement=document.createElement("DIV"),s.appendChild(n.parentElement)),n.finishLoading()}r.Orientation={Horizontal:0,Vertical:1},r.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},r.CreationType={Replace:0,AppendChild:1},r.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},r.prototype.finishLoading=function(){var n,t=this;t.wrapperElement=null,t.backgroundElement=null,t.valueElement=null,t.leftElement=null,t.middleElement=null,t.rightElement=null,t.backgroundElement=document.createElement("DIV"),t.backgroundElement.className="progressbar_background"+(t.extraClassName.background?" ":"")+t.extraClassName.background,t.backgroundElement.style.cssText=t.backgroundElement.style.cssText+r._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(t.backgroundElement);var a=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"],s=0,o="";for(s=0;s<a.length&&!(o=r._elementCurrentStyle(t.backgroundElement,a[s]))&&"string"!=typeof o;s++);""!=o&&r._parseInt(o)!=t.borderRadius&&(t.borderRadius=r._parseInt(o)),t.displayType=t.orientation==r.Orientation.Horizontal||t.orientation==r.Orientation.Vertical?0:1,t.parentElement.className=(""!=t.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(t.extraClassName.parent?" ":"")+t.extraClassName.parent,0==t.displayType?((n=t.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",n.style.cssFloat="left",n.style.display="inline-block",n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.left="0px",n.style.top=-t.height+"px",n.style.backgroundColor=t.backColor,n.style.backgroundRepeat="no-repeat",n.style.position="relative",n.style.cssText=n.style.cssText+r._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(n),t.borderWidth={left:r._parseInt(r._elementCurrentStyle(n,"border-left-width")),right:r._parseInt(r._elementCurrentStyle(n,"border-right-width")),top:r._parseInt(r._elementCurrentStyle(n,"border-top-width")),bottom:r._parseInt(r._elementCurrentStyle(n,"border-bottom-width"))}):1==t.displayType&&(t.orientation==r.Orientation.Horizontal?t.borderRadius>t.width/2&&(t.borderRadius=t.width):t.orientation==r.Orientation.Vertical&&t.borderRadius>t.height/2&&(t.borderRadius=t.height),t.valueElement=document.createElement("DIV"),t.valueElement.className="",t.leftElement=document.createElement("DIV"),t.middleElement=document.createElement("DIV"),t.rightElement=document.createElement("DIV"),t.leftElement.style.border="1px solid #A0A0A0",t.leftElement.style.cssFloat="left",t.leftElement.style.display="inline-block",t.leftElement.style.backgroundColor=t.backColor,t.leftElement.style.backgroundRepeat="no-repeat",t.leftElement.style.position="relative",t.rightElement.style.border="1px solid #A0A0A0",t.rightElement.style.cssFloat="left",t.rightElement.style.display="inline-block",t.rightElement.style.backgroundColor=t.backColor,t.rightElement.style.backgroundRepeat="no-repeat",t.rightElement.style.position="relative",t.middleElement.style.border="1px solid #A0A0A0",t.middleElement.style.cssFloat="left",t.middleElement.style.display="inline-block",t.middleElement.style.overflow="hidden",t.middleElement.style.position="relative",t.valueElement.style.backgroundColor=t.backColor,t.valueElement.style.position="relative",t.orientation==r.Orientation.Horizontal?(t.leftElement.style.width=t.borderRadius+"px",t.leftElement.style.height=t.height+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderRight="none",t.leftElement.style.cssText=t.leftElement.style.cssText+r._createBorderRadiusCss(t.borderRadius,0,0,t.borderRadius),t.rightElement.style.width=t.borderRadius+"px",t.rightElement.style.height=t.height+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.borderLeft="none",t.rightElement.style.cssText=t.rightElement.style.cssText+r._createBorderRadiusCss(0,t.borderRadius,t.borderRadius,0),t.middleElement.style.width=t.width-2*t.borderRadius+"px",t.middleElement.style.height=t.height+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.borderLeft="none",t.middleElement.style.borderRight="none",t.valueElement.style.width="0px",t.valueElement.style.height=t.height+"px"):t.orientation==r.Orientation.Vertical&&(t.leftElement.style.width=t.width+"px",t.leftElement.style.height=t.borderRadius+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderBottom="none",t.leftElement.style.cssText=t.leftElement.style.cssText+r._createBorderRadiusCss(t.borderRadius,t.borderRadius,0,0),t.rightElement.style.width=t.width+"px",t.rightElement.style.height=t.borderRadius+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.left="0px",t.rightElement.style.borderTop="none",t.rightElement.style.cssText=t.rightElement.style.cssText+r._createBorderRadiusCss(0,0,t.borderRadius,t.borderRadius),t.middleElement.style.width=t.width+"px",t.middleElement.style.height=t.height-2*t.borderRadius+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.left="0px",t.middleElement.style.borderTop="none",t.middleElement.style.borderBottom="none",t.valueElement.style.width=t.width+"px",t.valueElement.style.height="0px"),t.middleElement.appendChild(t.valueElement),t.parentElement.appendChild(t.leftElement),t.parentElement.appendChild(t.middleElement),t.parentElement.appendChild(t.rightElement),t.orientation==r.Orientation.Horizontal?t.borderWidth={left:r._parseInt(r._elementCurrentStyle(t.leftElement,"border-left-width")),right:r._parseInt(r._elementCurrentStyle(t.rightElement,"border-right-width")),top:r._parseInt(r._elementCurrentStyle(t.middleElement,"border-top-width")),bottom:r._parseInt(r._elementCurrentStyle(t.middleElement,"border-bottom-width"))}:t.orientation==r.Orientation.Vertical&&(t.borderWidth={left:r._parseInt(r._elementCurrentStyle(t.middleElement,"border-left-width")),right:r._parseInt(r._elementCurrentStyle(t.middleElement,"border-right-width")),top:r._parseInt(r._elementCurrentStyle(t.leftElement,"border-top-width")),bottom:r._parseInt(r._elementCurrentStyle(t.rightElement,"border-bottom-width"))})),t.parentElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.parentElement.style.height=t.height+t.borderWidth.top+t.borderWidth.bottom+"px",t.backgroundElement.style.cssFloat="left",t.backgroundElement.style.display="inline-block",t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.backgroundElement.style.height=t.height+"px",t.backgroundElement.style.backgroundColor="#FFFFFF",t.backgroundElement.style.position="relative",0==t.displayType&&(t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px"),t.backgroundElement.style.top=t.borderWidth.top+"px",t.markerElement=document.createElement("DIV"),t.markerElement.style.display="inline-block",t.markerElement.style.zoom="1.0",t.markerElement.style.width=t.width+"px",t.markerElement.style.height=t.height+"px",t.markerElement.style.top=2*-t.height-t.borderWidth.top+"px",t.markerElement.style.left=t.borderWidth.left+"px",t.markerElement.style.backgroundColor=t.color,t.markerElement.style.lineHeight=t.height+"px",t.markerElement.style.position="relative",t.parentElement.appendChild(t.markerElement),t.isLoaded=!0,t.setValue(t.initialValue),null!=t.onLoad&&t.onLoad()},r.prototype.setValue=function(t){var i=this;if(null!==t&&t<i.minValue&&(t=i.minValue),null!==t&&t>i.maxValue&&(t=i.maxValue),null===t||(i.value=t),i.isLoaded){var a,n=0;if(i.orientation==r.Orientation.Horizontal){i.progressPosition=n=i.value/i.maxValue*i.width,0==i.displayType||1==i.displayType&&(i.direction==r.Direction.LeftToRight?i.valueElement.style.width=n<=i.borderRadius?"0px":n>=i.width-i.borderRadius?i.middleElement.style.width:n-i.borderRadius+"px":n<=i.borderRadius?i.valueElement.style.width="0px":n>=i.width-i.borderRadius?(i.valueElement.style.left="0px",i.valueElement.style.width=i.middleElement.style.width):(i.valueElement.style.left=i.width-n-i.borderRadius+"px",i.valueElement.style.width=n-i.borderRadius+"px")),n>0?(i.markerElement.style.width=i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull?n+"px":i.width+"px",i.markerElement.style.visibility="visible"):(i.markerElement.style.width=i.width+"px",i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull&&(i.markerElement.style.visibility="hidden")),i.markerElement.style.left=i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull?i.direction==r.Direction.LeftToRight?i.borderWidth.left+"px":i.width-n+i.borderWidth.left+"px":i.borderWidth.left+"px";var o=2*-i.height-i.borderWidth.top;if(0==n||i.width==n)i.markerElement.style.top=o+"px",i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius);else if(n<i.borderRadius){var l=i.height-2.25*(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-n,2)));i.markerElement.style.top=o+i.height/2-l/2+"px",i.markerElement.style.height=l+"px",i.markerElement.style.cssText=i.direction==r.Direction.LeftToRight?i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}else i.width-n<i.borderRadius?(a=(2*(i.borderRadius-(i.width-n))+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.width-n),2))))/3,i.markerElement.style.cssText=i.direction==r.Direction.LeftToRight?i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,a,a,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(a,i.borderRadius,i.borderRadius,a)):(i.markerElement.style.top=o+"px",i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.direction==r.Direction.LeftToRight?i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0))}else if(i.orientation==r.Orientation.Vertical){i.progressPosition=n=i.value/i.maxValue*i.height,0==i.displayType||1==i.displayType&&(i.direction==r.Direction.TopToBottom?i.valueElement.style.height=n<=i.borderRadius?"0px":n>=i.height-i.borderRadius?i.middleElement.style.height:n-i.borderRadius+"px":n<=i.borderRadius?i.valueElement.style.height="0px":n>=i.height-i.borderRadius?(i.valueElement.style.top="0px",i.valueElement.style.height=i.middleElement.style.height):(i.valueElement.style.top=i.height-n-i.borderRadius+"px",i.valueElement.style.height=n+2*i.borderRadius+"px")),n>0?(i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull?i.markerElement.style.height=n+"px":(i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius)),i.markerElement.style.visibility="visible"):(i.markerElement.style.height="0px",i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull&&(i.markerElement.style.visibility="hidden"));var h=i.borderWidth.left;if(0==n||i.height==n)i.markerElement.style.left=h+"px",i.markerElement.style.width=i.width+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius);else if(n<i.borderRadius){var f=2.5*n;f>i.width&&(f=i.width),i.markerElement.style.left=h+i.width/2-f/2+"px",i.markerElement.style.width=f+"px",i.markerElement.style.cssText=i.direction==r.Direction.BottomToTop?i.markerElement.style.cssText+r._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}else i.height-n<i.borderRadius?(a=(2*(i.borderRadius-(i.height-n))+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.height-n),2))))/3,i.markerElement.style.cssText=i.direction==r.Direction.BottomToTop?i.markerElement.style.cssText+r._createBorderRadiusCss(a,a,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,i.borderRadius,a,a)):(i.markerElement.style.left=h+"px",i.markerElement.style.width=i.width+"px",i.markerElement.style.cssText=i.direction==r.Direction.BottomToTop?i.markerElement.style.cssText+r._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+r._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0));i.markerElement.style.top=i.animationStyle!=r.AnimationStyle.StaticFull&&i.animationStyle!=r.AnimationStyle.CustomFull?i.direction==r.Direction.TopToBottom?2*-i.height-i.borderWidth.top+"px":-i.height-n-i.borderWidth.top+"px":2*-i.height-i.borderWidth.top+"px"}i.progress=i.value/i.maxValue}null!=i.onValueChanged&&i.onValueChanged()},r._elementCurrentStyle=function(t,i){if(t.currentStyle){var n=0,a="",s=!1;for(n=0;n<i.length;n++)"-"!=i[n].toString()?(a+=s?i[n].toString().toUpperCase():i[n].toString(),s=!1):s=!0;return t.currentStyle[i=a]}return getComputedStyle(t,null).getPropertyValue(i)},r._parseInt=function(t){var i=parseInt(t);return isNaN(i)&&(i=0),i},r._createBorderRadiusCss=function(t,i,n,a){return null!=t&&null==i&&null==n&&null==a?"; -moz-border-radius: "+t+"px; -ms-border-radius: "+t+"px; -o-border-radius: "+t+"px; -webkit-border-radius: "+t+"px; -khtml-border-radius: "+t+"px; border-radius: "+t+"px;":"; -moz-border-radius: "+(t=t||0)+"px "+(i=i||0)+"px "+(n=n||0)+"px "+(a=a||0)+"px; -ms-border-radius: "+t+"px "+i+"px "+n+"px "+a+"px; -o-border-radius: "+t+"px "+i+"px "+n+"px "+a+"px; -webkit-border-radius: "+t+"px "+i+"px "+n+"px "+a+"px; -khtml-border-radius: "+t+"px "+i+"px "+n+"px "+a+"px; border-radius: "+t+"px "+i+"px "+n+"px "+a+"px;"},e.ProgressBar=r}),function(e){for(var r=[T.DWT],t=0;t<1;t++){var i=r[t];i.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},i.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},i.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},i.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446},i.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6},i.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},i.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},i.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},i.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},i.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14},i.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},i.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},i.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12},i.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},i.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},i.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113},i.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54},i.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3},i.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1},i.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7},i.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2},i.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3},i.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1},i.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8},i.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4},i.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1},i.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4},i.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1},i.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6},i.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},i.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3},i.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6},i.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4},i.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1},i.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1},i.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},i.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2},i.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4,enumHarmonyOS:5},i.EnumDWT_UploadDataFormat={Binary:0,Base64:1},i.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8},i.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},i.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5},i.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5},i.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14}}}(window),T.DWT.EnumDWT_Error={ModuleNotExists:-2371},function(){function e(r){return T.Lib.isString(r)?r:("errorMessage"in r&&(t=r.errorMessage),"message"in r&&(t=r.message),T.Lib.isString(t)||(t="message"in t?t.message:""),"errorCode"in r&&-1==t.indexOf("(")&&(t+="("+r.errorCode+")"),"code"in r&&-1==t.indexOf("(")&&(t+="("+r.code+")"),t);var t}T.Lib.Errors={OutOfRange:function(r){r._errorCode=-1010,r._errorString="Data parameter out of supported range."},InvalidIndex:function(r){r._errorCode=-1033,r._errorString="Invalid index."},InvalidValue:function(r){r._errorCode=-1034,r._errorString="Invalid value."},NoImage:function(r){r._errorCode=-1035,r._errorString="There is no image."},UnrecognizedExt:function(r){r._errorCode=-1110,r._errorString="Unrecognized file extension."},LoadTextPDFButSetImageOnly:function(r){r._errorCode=-1119,r._errorString="The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it."},SourceHasNothingToCapture:function(r){r._errorCode=-1029,r._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(r){return-1416==r},MustUpgradeService:function(r){r._errorCode=-2207,r._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(r){r._errorCode=-2208,r._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(r){r._errorCode=-2209,r._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(r){r._errorCode=-2210,r._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(r){r._errorCode=-2300,r._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(r){r._errorCode=-2301,r._errorString="Network error."},InvalidResultFormat:function(r){r._errorCode=-2302,r._errorString="The result format is invalid."},UploadError:function(r,t,i,n){if(t)r._errorCode=-2303,r._errorString="Upload cancelled.";else if(r._errorCode=-2003,n&&n>0||i){var a=["HTTP process error: "];i&&a.push(i),n&&n>0&&a.push(" ("+n+")"),r._errorString=a.join("")+"."}else r._errorString="HTTP process error."},HttpDownloadUrlError:function(r){r._errorCode=-2304,r._errorString="Http download error: the url is invalid."},HttpDownloadError:function(r,t,i,n){if(t)r._errorCode=-2305,r._errorString="User cancelled the operation.";else if(r._errorCode=-2003,n&&n>0||i){var a=["HTTP process error: "];i&&a.push(i),n&&n>0&&a.push(" ("+n+")"),r._errorString=a.join("")+"."}else r._errorString="HTTP process error."},UploadFileCannotEmpty:function(r){r._errorCode=-2306,r._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(r){r._errorCode=-2307,r._errorString="The width or height you entered is invalid."},Server_Invalid:function(r){0==r._errorCode&&(r._errorCode=-2308,r._errorString="The local Dynamsoft Service has been stopped.")},InvalidLocalFilename:function(r,t){r._errorCode=-2309,r._errorString="The LocalFile is empty in the name "+t+" Function."},BarCode_InvalidIndex:function(r,t){r._errorCode=-2310,r._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(r){r._errorCode=-2311,r._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(r){r._errorCode=-2312,r._errorString="The file length is empty."},UploadExceededMaxSize:function(r){r._errorCode=-2313,r._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(r){r._errorCode=-2314,r._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(r,t){r._errorCode=-2315,r._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(r){r._errorCode=-2316,r._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(r){r._errorCode=-2317,r._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(r){r._errorCode=-2318,r._errorString="Invalid destination file."},InvalidSourceFile:function(r){r._errorCode=-2319,r._errorString="Invalid source file."},InvalidFile:function(r){r._errorCode=-2320,r._errorString="Invalid file."},hasLicenseError:function(r){return r._errorCode>=-2348&&r._errorCode<=-2325},OCR_InvalidIndex:function(r,t){r._errorCode=-2321,r._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(r){r._errorCode=-2322,r._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(r){r._errorCode=-2323,r._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(r){r._errorCode=-2324,r._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(r){r._errorCode=-2325,T.Lib.License.isLTS()?(r._errorString="The license is invalid.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key is empty or invalid."},LicenseExpired:function(r,t){r._errorCode=-2326;var i="";t&&""!=t&&-1==t.indexOf("on")&&(i=" on "+t),T.Lib.License.isLTS()?(r._errorString="The license has expired"+i+".",T.DWT.lcexp().then(function(){r._errorString=T.DWT.licenseException.message})):r._errorString="The current product key has expired"+i+", please contact the site administrator."},LicenseNoChrome:function(r){r._errorCode=-2327,r._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(r){r._errorCode=-2328,r._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(r){r._errorCode=-2329,r._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(r){r._errorCode=-2330,r._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(r){r._errorCode=-2392,r._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(r){r._errorCode=-2333,T.Lib.License.isLTS()?(r._errorString="The license for the module twain is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNoWebcam:function(r){r._errorCode=-2338,T.Lib.License.isLTS()?(r._errorString="The license for the module direct show is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(r){r._errorCode=-2339,T.Lib.License.isLTS()?(r._errorString="The license for the module pdf rasterizer is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(r){r._errorCode=-2340,T.Lib.License.isLTS()?(r._errorString="The license for the module ocr is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(r){r._errorCode=-2341,T.Lib.License.isLTS()?(r._errorString="The license for the module ocr pro is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(r){r._errorCode=-2342,r._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(r){r._errorCode=-2343,r._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(r){r._errorCode=-2344,r._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(r){r._errorCode=-2345,r._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(r){r._errorCode=-2346,r._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(r){r._errorCode=-2347,r._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(r){r._errorCode=-2348,r._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(r){r._errorCode=-2349,r._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(r){r._errorCode=-2350,r._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(r){r._errorCode=-2351,r._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(r){r._errorCode=-2352,r._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(r){r._errorCode=-2353,r._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(r){r._errorCode=-2354,r._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(r){r._errorCode=-2355,r._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(r){r._errorCode=-2356,r._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(r){r._errorCode=-2357,r._errorString="The header name you entered is invalid."},IndicesNotArray:function(r){r._errorCode=-2358,r._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(r){r._errorCode=-2359,r._errorString="The index is out of range."},IndexNullOrUndefined:function(r){r._errorCode=-2360,r._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(r){r._errorCode=-2361,r._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(r){r._errorCode=-2362,r._errorString="The image type is not supported."},InvalidDataFormat:function(r){r._errorCode=-2363,r._errorString="The data format is not supported."},InvalidUploadInSegments:function(r){r._errorCode=-2364,r._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(r){r._errorCode=-2365,r._errorString="The url is invalid."},ConvertBase64Failed:function(r){r._errorCode=-2366,r._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(r){r._errorCode=-2367,r._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(r){r._errorCode=-2368,r._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(r){r._errorCode=-2369,r._errorString="The current product key is missing the WASM core license, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(r){r._errorCode=-2370,T.Lib.License.isLTS()?(r._errorString="The license for the module pdf rasterizer is not found or has expired.",T.Lib.Errors.SetLTSException(r)):r._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},WebTwainModuleNotExist:function(r){r._errorCode=T.DWT.EnumDWT_Error.ModuleNotExists,r._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(r){r._errorCode=-2372,r._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(r){r._errorCode=-2375,r._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(r){r._errorCode=-2376,r._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(r){r._errorCode=-2377,r._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(r){r._errorCode=-2378,r._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(r){r._errorCode=-2379,r._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(r){r._errorCode=-2380,r._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(r){r._errorCode=-2381,r._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(r){r._errorCode=-2382,r._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(r){r._errorCode=-2383,r._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(r){r._errorCode=-2384,r._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(r){r._errorCode=-2385,r._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(r){r._errorCode=-2386,r._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(r){r._errorCode=-2387,r._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(r){r._errorCode=-2388,r._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(r){r._errorCode=-2389,r._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(r){r._errorCode=-2390,r._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(r){r._errorCode=-1034,r._errorString="Invalid image ID."},InvalidEventName:function(r){r._errorCode=-2391,r._errorString="Invalid event name."},ConvertBlobIsEmpty:function(r){r._errorCode=-2393,r._errorString="Failed to convert the data to blob."},InvalidTagName:function(r){r._errorCode=-2394,r._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(r){r._errorCode=-2395,r._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(r,t){r._errorCode=-2396,r._errorString="The current product key is invalid, please contact the site administrator."},ServiceNotSupport:function(r,t){r._errorCode=-2400,r._errorString=t+" doesn't work under current settings."},MobileNotSupport:function(r,t){r._errorCode=-2400,r._errorString=t+" doesn't work under current settings."},LoadImageFailed:function(r,t){r._errorCode=-2401,r._errorString="Failed to load image: "+e(t)},RotateFailed:function(r,t){r._errorCode=-2402,r._errorString="Failed to rotate image: "+e(t)},FlipFailed:function(r,t){r._errorCode=-2403,r._errorString="Failed to flip image: "+e(t)},MirrorFailed:function(r,t){r._errorCode=-2404,r._errorString="Failed to mirror image: "+e(t)},EraseFailed:function(r,t){r._errorCode=-2405,r._errorString="Failed to erase image: "+e(t)},InvertFailed:function(r,t){r._errorCode=-2406,r._errorString="Failed to invert image: "+e(t)},SaveImageFailed:function(r,t){r._errorCode=-2407,r._errorString="Failed to save image: "+e(t)},ChangeImageSizeFailed:function(r,t){r._errorCode=-2408,r._errorString="Failed to change image size: "+e(t)},CropFailed:function(r,t){r._errorCode=-2409,r._errorString="Failed to crop image: "+e(t)},SkewAngleFailed:function(r,t){r._errorCode=-2410,r._errorString="Failed to skew angle: "+e(t)},ConvertToGrayScaleFailed:function(r,t){r._errorCode=-2411,r._errorString="Failed to convert to gray scale: "+e(t)},ConvertToBWScaleFailed:function(r,t){r._errorCode=-2412,r._errorString="Failed to convert to black and white scale: "+e(t)},SetDPIFailed:function(r,t){r._errorCode=-2413,r._errorString="Failed to set dpi: "+e(t)},SetImageWidthFailed:function(r,t){r._errorCode=-2414,r._errorString="Failed to set image width: "+e(t)},GetLicenseInfoFailed:function(r,t){r._errorCode=-2415,r._errorString="Failed to get license info: "+e(t)},InvalidParameter:function(r){r._errorCode=-2416,r._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(r){r._errorCode=-2417,r._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(r){r._errorCode=-2418,r._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(r){r._errorCode=-2419,r._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(r){r._errorCode=-2420,r._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(r){r._errorCode=-2421,r._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(r){r._errorCode=-2422,r._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(r){r._errorCode=-2423,r._errorString="The index is invalid."},GetMD5Failed:function(r,t){r._errorCode=-2424,r._errorString="Failed to get MD5: "+e(t)},ConvertFromBase64Failed:function(r){r._errorCode=-2425,r._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(r){r._errorCode=-2426,r._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(r,t){r._errorCode=-2427,r._errorString=t},TiffTagCountExceedError:function(r){r._errorCode=-2428,r._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(r){r._errorCode=-2429,r._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(r){r._errorCode=-2430,r._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(r){r._errorCode=-2431,r._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(r){r._errorCode=-2432,r._errorString="Invalid parameter."},ActiveXNotSupport:function(r){r._errorCode=-2433,r._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(r){r._errorCode=-2434},PerspectiveCallback:function(r){r._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(r){return'Error: The element specified by the id "'+r+"\" doesn't exist."},StartScanFailed:function(r){r._errorCode=-2436,r._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(r){r._errorCode=-2437,r._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(r){r._errorCode=-2438,r._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(r){r._errorCode=-2439,r._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(r){r._errorCode=-2444,r._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(r){r._errorCode=-2500,r._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(r){r._errorCode=-2501,r._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(r){r._errorCode=-2502,r._errorString="A CustomElement already exists."},ImageEditorNotExist:function(r){r._errorCode=-2503,r._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(r){r._errorCode=-2504,r._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(r){r._errorCode=-2505,r._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(r){r._errorCode=-2506,r._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(r){r._errorCode=-2507,r._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(r){r._errorCode=-2508,r._errorString="The CustomElement object has been disposed."},EventNotExist:function(r){r._errorCode=-2509,r._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(r){r._errorCode=-2510,r._errorString="The callback is not a function."},ElementRequired:function(r){r._errorCode=-2511,r._errorString="Parameter 'element' is required."},ElementNotExist:function(r){r._errorCode=-2512,r._errorString="Parameter 'element' doesn't exist."},Destroyed:function(r){r._errorCode=-2513,r._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(r){r._errorCode=-2514,r._errorString="Invalid property value. "},HostNotAvailable:function(r,t){r._errorCode=-2515,r._errorString="The Dynamsoft Service is not configured correctly on "+t+". Please check."},CameraRequired:function(r){r._errorCode=-2516,r._errorString="The camera addon is required."},OldTagNameRequired:function(r){r._errorCode=-2517,r._errorString="Old tag name is required."},NewTagNameRequired:function(r){r._errorCode=-2518,r._errorString="New tag name is required."},CursorInvalidMode:function(r){r._errorCode=-2519,r._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(r,t){r._errorCode=-2520,r._errorString=t},ChangeContrastFailed:function(r,t){r._errorCode=-2521,r._errorString="Failed to change contrast: "+e(t)},ChangeBrightnessFailed:function(r,t){r._errorCode=-2522,r._errorString="Failed to change brightening: "+e(t)},ConvertToGrayScaleFilterCallbackErr:function(r,t){r._errorCode=-2523,r._errorString='Failed to apply "gray" filter: '+e(t)},ConvertToBWScaleFilterCallbackErr:function(r,t){r._errorCode=-2524,r._errorString='Failed to apply "black and white" filter: '+e(t)},RemoveShadowFilterCallbackErr:function(r,t){r._errorCode=-2525,r._errorString='Failed to apply "remove shadow" filter: '+e(t)},EnhanceAndSharpenFilterCallbackErr:function(r,t){r._errorCode=-2526,r._errorString='Failed to apply "enhance and sharpen" filter: '+e(t)},BrightenFilterCallbackErr:function(r,t){r._errorCode=-2527,r._errorString='Failed to apply "brightening" filter: '+e(t)},SaveTonerCallbackErr:function(r,t){r._errorCode=-2528,r._errorString='Failed to apply "save toner" filter: '+e(t)},GetBlurryScoreErr:function(r,t){r._errorCode=-2529,r._errorString="Failed to get blurry score: "+e(t)},FileNameCannotEmpty:function(r){r._errorCode=-2530,r._errorString="File name cannot be empty."},FileNameNotString:function(r){r._errorCode=-2531,r._errorString="File name is not a string."},DocumentEditorNotExist:function(r){r._errorCode=-2532,r._errorString="This documentEditor doesn't exist."},DocumentEditorDispose:function(r){r._errorCode=-2533,r._errorString="The documentEditor object has been disposed."},DocumentEditorExist:function(r){r._errorCode=-2534,r._errorString="A documentEditor already exists."},RgbaImageToBlobErr:function(r,t){r._errorCode=-2529,r._errorString="Failed to convert image data: "+e(t)},LoadTextPDFButNoPdfrLicenseErr:function(r){r._errorCode=-2530,r._errorString="This PDF file is not supported by the Core module. You may need the PDF Rasterizer add-on to support it."},WebviewerError:function(r,t,i){r._errorCode=i||-2600,r._errorString=t},ClearErrorInfo:function(r){r._errorCode=0,r._errorString=""},SetLTSException:function(r){var t=T.DWT.licenseException;t.code=r._errorCode,t.message=r._errorString,t.fromLTS=!1},__last:!1}}(),function(e){function r(Se){this.clearData(),this.m_enumInstance=Se,Se==e.DWT.EnumInstance.dwt_desktop?this.m_deploymentType="desktop":(Se==e.DWT.EnumInstance.dwt_browser||Se==e.DWT.EnumInstance.dbr)&&(this.m_deploymentType="browser")}e.DWT.LTS=e.DWT.LTS||{},e.DWT.lwscmd=[],e.DWT.licenseException={code:0,message:"",fromLTS:!1},e.DWT.bLTSOnline=!0,e.DWT.axInstance=void 0,e.DWT.lOnUpdateDWObj=[],e.DWT.globalWS=[],e.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2},r.prototype.clearData=function(){this.m_iUsingTime=0,this.m_jvUsingTime=e.Lib.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=e.Lib.nil,this.m_maxExpiredTime=e.Lib.nil,this.m_cu=e.Lib.nil,this.m_ar=e.Lib.nil,this.m_ltsInstance=e.Lib.nil},r.prototype.set_cu=function(Se){this.m_cu=Se},r.prototype.get_cu=function(){return this.m_cu},r.prototype.set_ar=function(Se){this.m_ar=Se},r.prototype.get_ar=function(){return this.m_ar},r.prototype.get_ltsInstance=function(){return this.m_ltsInstance||(this.m_ltsInstance=function(Se){var Fe,Ve,ye=e.DWT.licenseServer;if(ye&&ye.length>0)for(Fe=0;Fe<ye.length;Fe++)e.Lib.endsWith(Ve=ye[Fe],"/")||(ye[Fe]=Ve+"/");var ke={lf:e.Lib.localforage,btoa:e.Lib.btoa,atob:e.Lib.atob,sutlcb:function(){e.Lib.isFunction(e.DWT.lonsend)&&e.DWT.lonsend()},fol:e.DWT.OnFirstOffline,dwt:!0,product:"dwt|dbr"};if(ke.feab=Se==e.DWT.EnumInstance.dwt_browser||Se==e.DWT.EnumInstance.dbr?e.DWT.lfeab_wasm:e.DWT.lfeab_ax,!e.navInfoSync.bIE&&e.DWT.ltsDebug&&(ke.debugLog=console.log),e.LTS&&e.LTS._)return e.LTS._.createLtsInstance(ke);var $e={},Le=function(){return T.Lib.Promise.reject({code:Ae.LtsJsLoadError,message:"The dynamsoft.lts.js load failed."})};return $e.i=Le,$e.s=Le,$e.caret=Le,$e}(this.m_enumInstance)),this.m_ltsInstance},r.prototype.inited_ltsInstance=function(Se){return!!this.m_ltsInstance},r.prototype.set_maxExpiredTime=function(Se){this.m_maxExpiredTime=Se},r.prototype.get_maxExpiredTime=function(){return this.m_maxExpiredTime},r.prototype.set_minExpiredTime=function(Se){this.m_minExpiredTime=Se},r.prototype.get_minExpiredTime=function(){return this.m_minExpiredTime},r.prototype.get_deploymentType=function(){return this.m_deploymentType};var X,ie,be,Te,ue=0,pe={},B=!1,K=!1,Ge=!1,je=!1,he=!1;function V(){var Se=e.DWT.handshakeCode;return e.Lib.isString(Se)||(Se=""),Se}function Q(){var Se=e.DWT.organizationID;return e.Lib.isNumber(Se)?Se=""+Se:e.Lib.isString(Se)||(Se=""),Se}function H(){return e.DWT.JSVersion.split(",")[0]}function j(){var Se=e.DWT.ResourcesPath,ye="";return T.Lib.endsWith(Se,"/")||(ye="/"),[Se,ye,"src"].join("")}function re(Se){var ye=Se;return ye===e.Lib.nil&&(ye=T.Lib.IsNeedLoadWasm()?e.DWT.EnumInstance.dwt_browser:e.DWT.EnumInstance.dwt_desktop),ye==e.DWT.EnumInstance.dwt_browser?(ie||(ie=new r(ye)),ie):ye==e.DWT.EnumInstance.dbr?(Te||(Te=new r(ye)),Te):(be||(be=new r(ye)),be)}function le(){return Date.now()}function we(Se){var ye=Se?new Date(Se):new Date,Fe="yyyy-MM-ddTHH:mm:ss.SSSZ",Ve={"M+":ye.getUTCMonth()+1,"d+":ye.getUTCDate(),"H+":ye.getUTCHours(),"h+":ye.getUTCHours()%12||12,"m+":ye.getUTCMinutes(),"s+":ye.getUTCSeconds(),"q+":Math.floor((ye.getUTCMonth()+3)/3),"S+":ye.getUTCMilliseconds()};for(var ke in/(y+)/.test(Fe)&&(Fe=Fe.replace(RegExp.$1,(ye.getUTCFullYear()+"").substr(4-RegExp.$1.length))),Ve)new RegExp("("+ke+")").test(Fe)&&(Fe=Fe.replace(RegExp.$1,1==RegExp.$1.length?Ve[ke]:("000"+Ve[ke]).substr(("000"+Ve[ke]).length-RegExp.$1.length)));return Fe}e.DWT.lupverfy=function(){re(e.DWT.EnumInstance.dwt_desktop).get_ltsInstance(),re(e.DWT.EnumInstance.dwt_browser).get_ltsInstance(),re(e.DWT.EnumInstance.dbr).get_ltsInstance()},e.DWT.lsmid=function(Se){re(e.DWT.EnumInstance.dwt_desktop).set_cu(Se)},e.DWT.laddDWTObj=function(Se){var ye=!1;e.Lib.each(e.DWT.lOnUpdateDWObj,function(Fe){if(Fe==Se)return ye=!0,!1}),ye||e.DWT.lOnUpdateDWObj.push(Se)},e.DWT.lremoveDWTObj=function(Se){e.Lib.each(e.DWT.lOnUpdateDWObj,function(ye,Fe){if(ye==Se)return e.DWT.lOnUpdateDWObj.splice(Fe,1),!1})},e.DWT.lsendUpdateEvt=function(Se){var ye=[];if(e.Lib.each(e.DWT.lOnUpdateDWObj,function(ke){Se==T.DWT.EnumInstance.dwt_desktop?(ke.isUsingActiveX()||ke._bLocalService)&&ye.push(ke):Se==T.DWT.EnumInstance.dwt_browser&&(ke.isUsingActiveX()||ke._bLocalService||ye.push(ke))}),0==ye.length)return e.Lib.Promise.resolve();var Ve,Fe=ye[0];return Fe.isUsingActiveX()?(e.Lib.each(ye,function(ke){ke.SetLTSInfo(re(Se).get_ar(),re(Se).get_cu())}),Fe.GetLicenseInfo().then(function(ke){ke&&e.Lib.isArray(ke.Detail)&&ke.Detail.length>0&&T.DWT.lsexp(Se,ke.Detail[0].ExpireDate)})):(Ve=Fe.SetLTSLicenseAsync(re(Se).get_ar()).then(function(ke){ke&&e.Lib.isArray(ke.Detail)&&ke.Detail.length>0&&T.DWT.lsexp(Se,ke.Detail[0].ExpireDate)}),e.Lib.each(ye,function(ke,$e){0!=$e&&ke.SetLTSLicenseAsync(re(Se).get_ar())}),Ve)},e.DWT.lgcb=function(){var Se=e.navInfo,ye=[];return Se.bChrome?ye.push("Chrome"):Se.bFirefox?ye.push("Firefox"):Se.bEdge?ye.push("Edge"):Se.bIE?ye.push("IE"):Se.bSafari?ye.push("Safari"):Se.bOpera?ye.push("Opera"):Se.b360SE?ye.push("360SE"):Se.bTencentTraveler?ye.push("TencentTraveler"):Se.bMaxthon?ye.push("Maxthon"):Se.bMetaSr?ye.push("MetaSr"):Se.bTheWorld?ye.push("TheWorld"):Se.bUC&&ye.push("UC"),ye.push(Se.strBrowserVersion),Se.bWin||Se.bWin64?ye.push("Windows"):Se.bMac?ye.push("Mac"):Se.bLinux?ye.push("Linux"):Se.bAndroid?ye.push("Android"):Se.bMobile||Se.biPhone||Se.biPad?ye.push("Mobile OS"):Se.bEmbed&&ye.push("Embed OS"),ye.join(" ")},e.DWT.lglic=function(Se){var ye=re(Se);if(e.DWT.lclex(),ye.get_ar()&&ye.get_cu())return Promise.resolve({ar:ye.get_ar(),cu:ye.get_cu()});var Fe={engineResourcePath:j(),version:e.Lib.replaceAll(e.DWT.JSVersion,",","."),pk:V(),dm:location.origin?e.Lib.startsWith(location.origin,"http")?location.origin:"https://localhost":e.Lib.startsWith(location.href,"http")?location.href:"https://localhost",browserInfo:e.DWT.lgcb(),deviceFriendlyName:"",ls:e.DWT.licenseServer,sp:e.DWT.sessionPassword,og:Q(),getMinExpireTime:function(){return ye.get_maxExpiredTime()},getMaxExpireTime:function(){return ye.get_minExpiredTime()},fol:e.DWT.OnFirstOffline};return Fe.dt=ye.get_deploymentType(),Se==e.DWT.EnumInstance.dwt_desktop&&(Fe.lsu=ye.get_cu()),Se==e.DWT.EnumInstance.dbr||(Fe.dwt=!0,Fe.updateLicense=function(Ve){ye.set_ar(Ve.ar),ye.get_cu()||ye.set_cu(Ve.cu),e.DWT.lsendUpdateEvt(Se)}),ye.get_ltsInstance().i(Fe).then(function(Ve){return ye.get_ar()||ye.set_ar()(Ve.ar),ye.get_cu()||ye.set_cu(Ve.cu),Ve})},e.DWT.lshow=function(){return{t:X,t2:ue,m:JSON.stringify(pe)}},e.DWT.lgct=function(Se){switch(Se){case 0:return"3011";case 1:return"3012";case 2:return"3014";case 3:return"3013";case 4:return"3015";case 14:return"3016";case 3001:return"3001";case 3002:return"3002";case 3003:return"3003";case 3004:return"3004";case 3005:return"3005";case 3006:return"3006";case 3007:return"3007";case 5001:return"5001";case 4001:return"4001";case 4002:return"4002";case 4003:return"4003"}return""},e.DWT.lcvrf=function(Se){var ye;ye=Se.isUsingActiveX()||Se._bLocalService?T.DWT.EnumInstance.dwt_desktop:T.DWT.EnumInstance.dwt_browser,setTimeout(function(){e.DWT.lcvrf_(Se,ye)},1)},e.DWT.lcvrf_=function(Se,ye){var fe,Ve=e.DWT.lgcb(),$e=re(ye),Le={handShake:V(),organization:Q(),clientUuid:$e.get_cu(),clientFriendName:"",cw:"",os:Ve,versionMajor:H(),deploymentType:$e.get_deploymentType(),edition:"javascript"},De=function(Qe,Ze){var lt,_t,tt=T.Lib,dt=0;if(tt.isString(Qe)&&""!=Qe&&"{}"!=Qe&&Ze&&tt.isArray(Ze)&&!(Ze.length<1)){if(_t=re(Ze[0]),lt=tt.parse(Qe),e.DWT.lclex(),0==ue){var xt=le(),Pt="";ue=xt,X=we(xt),pe={},dt=0,tt.each(lt,function(jt,Ir){(Ir<dt||0==dt)&&(dt=Ir,Pt=jt)}),dt>0&&_t.get_ltsInstance().s(e.DWT.licenseServer,Pt,dt,!0).then(function(){},function(jt){})}tt.each(lt,function(jt,Ir){var Eo=!1,_i=parseInt(Ir);_i>0&&_i!=dt&&(_i+18e4<le()&&(Eo=!0),_t.get_ltsInstance().s(e.DWT.licenseServer,jt,Ir,Eo).then(function(){},function(Qo){}))})}};if(Le.product="dwt|dbr",fe=JSON.stringify(Le),!Se.isUsingActiveX()){var Ne=T.Lib.html5.Funs,Pe="GetBuffer",ze=Ne.makeParams(T.Lib.replaceAll(fe,'"','\\"')),ge=Se._objWS,Ee=Se.clientId,Ue=Ne.generateCmdId();return e.DWT.lwscmd.push({cmd:Pe,cmdId:Ue,sFun:De,fFun:function(){},params:[ye,Se._host]}),Ne.sendData(ge,e.DWT.lgj(Ee,Pe,ze,Ue),!1,!0)}De(Se.GetBuffer(fe),[ye,""])},e.DWT.lavrf=function(Se,ye,Fe){var Ve=1;if(""!=Se){ye>1&&(Ve=ye);var ke=le();if(ue>0&&ue+18e4<ke){K?(pe={},e.DWT.lavrf__unload()):e.DWT.lavrf__(!0,Fe);var Le=le()+1;ue=Le,X=we(Le),pe={}}B=!0,K=!1,pe[Se]?pe[Se]+=Ve:pe[Se]=Ve,0==ue&&e.DWT.lavrf__(!0,Fe)}},e.DWT.lavrf_=function(Se,ye){if(B){var Fe=1;Se&&(Fe=Se),setTimeout(function(){e.DWT.lavrf__(!1,ye)},Fe)}},e.DWT.lavrf__=function(Se,ye){var $e,Ne,Fe=le(),Ve=!1,ke=!!Se,De=0,Oe=ye;e.Lib.isUndefined(Oe)&&(Oe=e.DWT.EnumInstance.dwt_browser),Ne=re(Oe),B=!1,0==ue&&(Ve=!0,ue=Fe,X=we(Fe)),$e=ue;var Pe={};Pe.usingTime=X;var ze={};if(T.Lib.each(pe,function(lt,dt){ze[dt]=lt,lt>0&&De++}),Pe.counts=ze,ke||$e+18e4<Fe){ke=!0;var ge=le()+1;if(ue=ge,X=we(ge),pe={},K=!1,0==De)return}else{if(0==De)return;K=!0}Pe.concurrentDuration=Ve?1:180;var tt,Be=e.DWT.lgcb(),Ze={handShake:V(),organization:Q(),clientUuid:Ne.get_cu(),clientFriendName:"",cw:"",os:Be,versionMajor:H(),deploymentType:Ne.get_deploymentType(),edition:"javascript",records:[Pe],product:"dwt|dbr"};tt=JSON.stringify(Ze),e.DWT.ltsDebug&&we(),e.DWT.lclex(),Ne.get_ltsInstance().s(e.DWT.licenseServer,tt,""+$e,ke).then(function(){},function(lt){})},e.DWT.lavrf__unload=function(){var Fe,Se=le(),ke=re(e.DWT.EnumInstance.dwt_desktop),$e=re(e.DWT.EnumInstance.dwt_browser),Le=re(e.DWT.EnumInstance.dbr);B=!1,0==ue&&(ue=Se,X=we(Se)),Fe=ue;var fe=le()+1;ue=fe,X=we(fe),pe={},K=!1,Fe+=1,e.DWT.lclex(),ke.inited_ltsInstance()&&ke.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Fe,!0).then(function(){},function(De){}),$e.inited_ltsInstance()&&$e.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Fe,!0).then(function(){},function(De){}),Le.inited_ltsInstance()&&Le.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Fe,!0).then(function(){},function(De){})},e.DWT.lclex=function(){var Se=e.DWT.licenseException;Se.code=0,Se.message="",Se.httpResponse="",Se.fromLTS=!1},e.DWT.li=function(Se){var ye;return Se.axInstance&&(e.DWT.axInstance=Se.axInstance,e.DWT.axInstance)?(ye=e.DWT.axInstance.GetUUID(),e.DWT.ltsDebug&&console.log("ActiveX cu: "+ye),re(Se.instanceMode).set_cu(ye),ye):re(Se.instanceMode).get_cu()},e.DWT.lfeab_ax=function(Se){return new Promise(function(ye,Fe){var Ve="";if(e.DWT.axInstance)try{Ve=e.DWT.axInstance.Encrypt(Se,0)}catch(ke){}ye(Ve)})},e.DWT.lfeab_wasm=function(Se){return new Promise(function(ye,Fe){var Ve=new T.Imagecore;Ve.getAesResult(Se).then(function(ke){Ve.terminate(),ye(ke)},function(ke){Ve.terminate(),Fe(ke)})})},e.DWT.lgj=function(Se,ye,Fe,Ve){var ke=[];ke.push("{"),ke.push('"id":"'),ke.push(Se),ke.push('"'),Ve&&(ke.push(',"cmdId":"'),ke.push(Ve),ke.push('"')),ke.push(',"method":"'),ke.push(ye),ke.push('"'),ke.push(',"module":"dwt","version":"');var $e=T.Lib,Le=[$e.product.getDWTPrefix(),$e.product.getServerVersionInfo()].join("");return ke.push(Le),ke.push('"'),null!=Fe&&(ke.push(',"parameter":'),ke.push(Fe)),ke.push("}"),ke.join("")},e.DWT.lwsproc=function(Se){var ye;if(Se.indexOf("Exception:")>=0||0==Se.indexOf("Error")){var Fe=Se;(ye=T.DWT.lwscmd.pop()||{}).fFun&&ye.fFun({code:-2520,message:Fe})}else{try{Se=T.Lib.parse(Se)}catch(Le){return void((ye=e.DWT.lwscmd.pop()||{}).fFun&&ye.fFun(Le))}if(Se.cmdId){var ke,$e=-1;for(ke=T.DWT.lwscmd.length-1;ke>=0;ke--)if(T.DWT.lwscmd[ke].cmdId==Se.cmdId){ye=T.DWT.lwscmd.splice($e=ke,1)[0];break}if($e<0)return}if("GetBuffer"==Se.method){if(void 0!==Se.exception&&void 0!==Se.description)return void(ye.fFun&&ye.fFun({code:Se.exception,message:Se.description}));ye.sFun(ye.sFun&&Se.result.length>0?Se.result[0]:"",ye.params)}else ye.sFun&&ye.sFun(Se)}},e.DWT.lsexp=function(Se,ye){var Ve,Fe=ye;if(3==(Ve=(Fe=e.Lib.replaceAll(Fe,"/","-")).split("-")).length){var ke=Ve[0],$e=Ve[1],Le=Ve[2];$e.length<2&&($e=($e="00"+$e).substr($e.length-2)),Le.length<2&&(Le=(Le="00"+Le).substr(Le.length-2)),Fe=[ke,$e,Le].join("-")}var fe=[Fe,"T23:59:59.999Z"].join("");re(Se).set_minExpiredTime(fe),re(Se).set_maxExpiredTime(fe)},e.DWT.lunload=function(){e.DWT.lavrf__unload();var Se=re(e.DWT.EnumInstance.dwt_desktop),ye=re(e.DWT.EnumInstance.dwt_browser),Fe=re(e.DWT.EnumInstance.dbr);Se.clearData(),ye.clearData(),Fe.clearData(),ue=0,X=e.Lib.nil,pe={},K=!1,B=!1,Ge=!1,je=!1,he=!1,e.DWT.lwscmd=[],e.DWT.lclex(),e.DWT.bLTSOnline=!0,e.DWT.axInstance=e.Lib.nil,e.DWT.lOnUpdateDWObj=[],e.DWT.globalWS=[]};var Ae={NetworkError:-2440,Timedout:-2441,JsonError:-2442,CorsError:-2443,Expired:-2445,LtsJsLoadError:-2446,UUIDError:-2447};e.DWT.lcexp=function(Se){return re(Se).get_ltsInstance().caret().then(function(){return!1},function(ye){var Fe=T.DWT.licenseException,Ve="";return ye instanceof Error||"message"in ye?Ve=ye.message:e.Lib.isString(ye)&&(Ve=ye),e.DWT.lsetException(Ae.Expired,Ve,!1),je||(je=!0,console&&console.error&&console.error(Ve),T.OnLTSLicenseError&&T.OnLTSLicenseError(T.Lib.License.getPublicLicenseContent(Fe.message))),!0})},e.DWT.OnLicenseException=function(){var Se=e.DWT.licenseException,ye=Se.message;if(e.Lib.isString(ye)&&(ye.indexOf("Error Code")>-1?ye=e.Lib.replaceAll(ye,"Error Code","error code"):ye.indexOf("Error code")>-1&&(ye=e.Lib.replaceAll(ye,"Error code","error code"))),ye.indexOf("(https://www.dynamsoft.com/purchase-center/)")>-1&&(ye=ye.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),Se.message=ye),ye.indexOf("error code:")>-1){var Fe=ye.substr(0,ye.indexOf("message")),Ve=ye.substr(ye.indexOf("message"));Fe.indexOf("{")>-1&&(Fe=Fe.substr(Fe.indexOf("{")+1)),Ve.indexOf("}")>-1&&(Ve=Ve.substr(0,Ve.indexOf("}"))),Fe=e.Lib.replaceAll(Fe,"error code:",""),Ve=e.Lib.replaceAll(Ve,"message: ",""),e.DWT.lsetException(parseInt(Fe),Ve,!0),console&&console.error&&console.error(Ve),T.OnLTSLicenseError&&T.OnLTSLicenseError(T.Lib.License.getPublicLicenseContent(ye))}else{if(!Se.code){var ke=Ae.NetworkError;ye.indexOf("timed out")>-1||ye.indexOf("timeout")>-1?ke=Ae.Timedout:(ye.indexOf("access-control-allow-origin")>-1||ye.indexOf("cors")>-1)&&(ke=Ae.CorsError),e.DWT.lsetException(ke,ye,!0)}if(console&&console.error&&console.error(Se.message),Se.code==Ae.LtsJsLoadError)return;T.OnLTSLicenseError&&T.OnLTSLicenseError(T.Lib.License.getPublicLicenseContent(Se.message))}},e.DWT.lol=function(){return e.DWT.bLTSOnline},e.DWT.OnFirstOffline=function(Se){e.DWT.bLTSOnline=!1},e.DWT.lpubdlg=function(Se,ye){if(e.Lib.isString(Se)&&""!=Se){if(Se=e.Lib.atob(Se),console&&console.warn&&!Ge&&console.warn(Se),1==ye)return Ge||(Ge=!0,T.OnLTSPublicLicenseMessage&&T.OnLTSPublicLicenseMessage(T.Lib.License.getPublicLicenseContent(Se))),!0;2==ye&&(Ge||(Ge=!0))}return!1},e.DWT.lcheckLic=function(Se,ye){var Fe=!1;if(ye){if(e.Lib.isArray(ye.Detail)&&ye.Detail.length>0)return T.DWT.lsexp(Se,ye.Detail[0].ExpireDate),T.DWT.lcexp().then(function($e){var Le=!1;$e?Le=!0:(1==ye.Trial||2==ye.Trial)&&(Le=e.DWT.lpubdlg(ye.Message,ye.Trial)),!Le&&!e.DWT.bLTSOnline&&!he&&(he=!0,T.OnLTSConnectionWarning&&T.OnLTSConnectionWarning())});(1==ye.Trial||2==ye.Trial)&&(Fe=e.DWT.lpubdlg(ye.Message,ye.Trial))}!Fe&&!e.DWT.bLTSOnline&&!he&&(he=!0,T.OnLTSConnectionWarning&&T.OnLTSConnectionWarning())},e.DWT.lisValidID=function(Se){if(e.Lib.isString(Se)&&""!=Se)return!0;var ye=e.DWT.licenseException;return e.DWT.lsetException(Ae.UUIDError,"Failed to generate an ID for your device to license it: not enough permission.",!0),console&&console.error&&console.error(ye.message),T.OnLTSUUIDError&&T.OnLTSUUIDError(ye.message),!1},e.DWT.lsetException=function(Se,ye,Fe){var Ve=T.DWT.licenseException;Ve.code=Se,Ve.message=ye,e.Lib.isUndefined(Fe)||(Ve.fromLTS=Fe)}}(T),T.Ready(function(e){e.LS={isSupportLS:function(){var r=T.navInfoSync,t=!1;if(!r.bEdge||!r.bFileSystem)try{t=!!window.localStorage}catch(i){}return t},item:function(r,t,i){var n=null;return this.isSupportLS()?(t?(localStorage.setItem(r,t),n=t):n=localStorage.getItem(r),null===n?i:n):i},removeItem:function(r){return!!this.isSupportLS()&&(localStorage.removeItem(r),!0)}}}),T.Ready(function(e,r){if(e.html5=e.html5||{},e.product.bHTML5Edition){var i,t=1,n=!1,a=!0;i=e.html5.Funs={notSupportProperty:function(P){},notSupportMethod:function(P){},getRandom:function(){for(var k,P=(new Date).getTime()%1e4,F=[],w=0;w<5;w++)k=Math.floor(10*Math.random()),0!=w||0!=k?F.push(k):w=-1;return P<10?F.push("000"):P<100?F.push("00"):P<1e3&&F.push("0"),F.push(P),F.join("")},generateCmdId:function(){return++t},cformat:function(P,F){if(e.isString(P)){var w,S,L,U,Z,k=P.indexOf("<%");if(-1==k)return P;if(S=P.substring(0,k),!(k+2<(w=P.indexOf(">",S))))return P;L=P.substring(k+1,w),U=P.substring(w+1);try{Z=e.sprintf(L,F)}catch(ne){Z=""}return[S,Z,U].join("")}return""},sendData:function(P,F,k,w){var S,L,U,Z,ne,oe,ue,X;if(!w){try{P.send(F)}catch(pe){e.log(pe)}return n}for(Z=new ArrayBuffer(12),L=k&&k.size?k.size:0,U=(S=(X=new Blob([F])).size)+L,ne=new DataView(Z),ue=0;ue<8&&U;ue++)ne.setUint8(ue,U%256),U=parseInt(U/256);for(ue=0;ue<4&&S;ue++)ne.setUint8(8+ue,S%256),S=parseInt(S/256);return oe=new Blob([Z,X]),P.send(oe),L>0&&P.send(k),Z=null,X=null,oe=null,ne=null,a},__pushElement:function(P,F){if(e.isString(F))P.push('"'),P.push(F),P.push('"');else if(e.isArray(F)){var k=a;P.push("["),e.each(F,function(w){k?k=n:P.push(","),i.__pushElement(P,w)}),P.push("]")}else P.push(void 0===F?'""':F)},makeParams:function(){var P=arguments;if(void 0!==P&&0!==P.length){var k,w,F=[];return 1===P.length?(k=P[0],F.push("["),i.__pushElement(F,k),F.push("]")):2===P.length?(k=P[0],w=P[1],F.push("["),i.__pushElement(F,k),F.push(","),i.__pushElement(F,w),F.push("]")):i.__pushElement(F,Array.prototype.slice.call(P)),F.join("")}},getJson:function(P,F,k,w){var S=[];S.push("{"),S.push('"id":"'),S.push(P.clientId),S.push('"'),w&&(S.push(',"cmdId":"'),S.push(w),S.push('"')),S.push(',"method":"'),S.push(F),S.push('"'),S.push(',"module":"dwt","version":"');var U=[e.product.getDWTPrefix(),e.product.getServerVersionInfo()].join("");return S.push(U),S.push('"'),null!=k&&(S.push(',"parameter":'),S.push(k)),S.push("}"),S.join("")},refreshImageAfterInvokeFun:function(P,F,k){return 1==k},loadHttpBlob:function(P,F,k,w,S,L,U,Z){var oe,ue,X=n;if(ue={method:F,dataType:"blob"},Z&&(ue.headers=Z),""!=P.HTTPUserName&&(ue.username=P.HTTPUserName,ue.password=P.HTTPPassword),w){if((T.navInfo.bMobile||T.navInfo.bChrome||T.navInfo.bFirefox)&&"get"==F)return ue.fetchRaw=!0,fetch(k,ue).then(function(G){if(!G.ok)throw{httpCode:G.status,errorString:G.statusText};var ee=G.headers.get("Content-Length"),ie=0,be=G.body.getReader(),Te=new ReadableStream({start:function(je){var he=function(){be.read().then(function(ae){ae.done?je.close():(U({loaded:ie+=ae.value.length,total:ee}),je.enqueue(ae.value),setTimeout(he,0))})};setTimeout(he,0)}}),Ge=G.headers.get("Content-Type");return(!Ge||""==Ge)&&(Ge="application/octet-stream"),new Response(Te,{headers:{"Content-Type":Ge}})}).then(function(G){return G.blob()}).then(function(G){S(G),G=null},function(G){G&&G.httpCode?e.Errors.HttpDownloadError(P,!1,G.errorString,G.httpCode):e.Errors.HttpDownloadUrlError(P),e.isFunction(L)&&L({code:P._errorCode,message:P._errorString})}),!0;ue.onSuccess=S,e.isFunction(U)&&(ue.beforeSend=function(G){G.addEventListener("progress",function(ee){delete ee.totalSize,delete ee.position,U(ee)},n)}),X=a}else T.navInfoSync.bIE?(ue.dataType="arraybuffer",ue.onSuccess=function(G,ee,ie){var be,Ge;(be=G||ie.responseData)&&(Ge=new Uint8Array(be)),P._errorCode=0,P._errorString="",S(Ge),Ge=null,X=a}):(ue.dataType="text",ue.contentType="text/plain; charset=x-user-defined",ue.mimeType="text/plain; charset=x-user-defined",ue.onSuccess=function(G,ee,ie){var be,Te,Ge;Te=(be=ie.responseText).length,Ge=new Uint8Array(Te);for(var je=0;je<Te;je++)Ge[je]=be.charCodeAt(je);P._errorCode=0,P._errorString="",S(Ge),Ge=null,X=a}),ue.headers?e.mix(ue.headers,{"X-Requested-With":n}):ue.headers={"X-Requested-With":n};if("post"==F){var B,pe=P.httpFormFields;if(pe)try{B=new FormData,e.each(pe,function(G,ee){G instanceof Blob?B.append(ee,G,G.name):B.append(ee,G)}),e.mix(ue,{data:B,processData:n,contentType:n})}catch(G){}}oe=function(G,ee,ie){var be,Te;G&&e.isArray(G)&&G.length>2?(be=G[1],Te=G[2]):(be=ee,Te=ie),2==Te.state&&0==Te.status?"abort"===Te.statusText?e.Errors.HttpDownloadError(P,!0):e.Errors.HttpDownloadUrlError(P):e.Errors.HttpDownloadError(P,n,be,Te.status),e.isFunction(L)&&L()},ue.url=k,ue.async=w,ue.onError=oe,ue.onComplete=function(){e.bio=n};var K=e.ajax(ue);return w&&(e.bio=K),X},combineUrl:function(P,F,k){var w=[],S=F;return void 0===S||void 0===k?n:(e.isString(S)||(S=String(F)),0==S.indexOf("http://")?(S=S.replace("http://",""),w.push("http://")):0==S.indexOf("https://")?(S=S.replace("https://",""),w.push("https://")):(0==S.indexOf("//")&&(S=S.replace("//","")),w.push(P.IfSSL?"https://":"http://")),w.push(S),S.indexOf(":")<0&&(""==P.HTTPPort&&(P.HTTPPort=e.detect.ssl?443:80),(!e.detect.ssl&&80!=P.HTTPPort||e.detect.ssl&&443!=P.HTTPPort)&&(w.push(":"),w.push(P.HTTPPort))),0!==k.indexOf("/")&&w.push("/"),w.push(k),w.join(""))},httpPostUpload:function(P,F,k,w,S,L,U,Z,ne,oe,ue,X){if(!k||k.size<=0)return e.Errors.UploadFileCannotEmpty(P),e.isFunction(X)&&X(),n;var G,ee,pe=P.MaxUploadImageSize,B=k.size,K=k.type;if(B>pe&&-1!=pe)return e.Errors.UploadExceededMaxSize(P),e.isFunction(X)&&X(),n;if(""===K||K&&K!=P.HttpContentTypeFieldValue){var ie=k.slice||k.webkitSlice||k.mozSlice,be=k.name;(!e.isString(be)||""==be)&&(be=k.fileName),(G=ie.call(k,0,B,P.HttpContentTypeFieldValue)).name=be}else G=k;return k=null,G.remoteFilename=P.__remoteFilename,ee=this.httpUploadByBIO(P,F,G,S,w,L,U,Z,ne,oe,ue,X),G=null,ee},httpPostUploadFiles:function(P,F,k,w,S,L,U,Z,ne,oe,ue){var B,X=P.MaxUploadImageSize,pe=0;if(!k||!e.isArray(k)||k.length<=0)return e.Errors.UploadFileCannotEmpty(P),e.isFunction(ue)&&ue(),n;for(B=0;B<k.length;B++){var K=k[B];if(!K||K.size<=0)return e.Errors.UploadFileCannotEmpty(P),e.isFunction(ue)&&ue(),n;var ie,G=K.size,ee=K.type;if(pe+=G,""===ee||ee&&ee!=P.HttpContentTypeFieldValue){var Te=K.name,Ge=(K.slice||K.webkitSlice||K.mozSlice).call(K,0,G,P.HttpContentTypeFieldValue);(!e.isString(Te)||""==Te)&&(Te=K.fileName),Ge.name=this.cformat(Te,B+1),k[B]=Ge}k[B].remoteFilename=this.cformat(P.__remoteFilename,B+1),K=null}if(pe>X&&-1!=X)return e.Errors.UploadExceededMaxSize(P),e.isFunction(ue)&&ue(),n;for(ie=this.httpUploadByBIO(P,F,k,S,w,L,U,Z,ne,!1,oe,ue),B=0;B<k.length;B++)k[B]=null;return k=null,ie},httpPostUploadString:function(P,F,k,w,S,L,U,Z,ne,oe,ue){var X,pe,K;return""==k?(e.Errors.UploadFileCannotEmpty(P),e.isFunction(ue)&&ue(),n):k.length>(pe=P.MaxUploadImageSize)&&-1!=pe?(e.Errors.UploadExceededMaxSize(P),e.isFunction(ue)&&ue(),n):((X=new Blob([k],{type:"text/plain"})).name=w,K=this.httpUploadByBIO(P,F,X,S,a,L,U,Z,ne,!1,oe,ue),X=null,K)},httpUploadByBIO:function(P,F,k,w,S,L,U,Z,ne,oe,ue,X){var pe,B,K,G;if(K=P.httpFormFields,G=new FormData,e.each(K,function(ie,be){ie instanceof Blob?G.append(be,ie,ie.name):G.append(be,ie)}),e.bio=new e.BIO({action:F,data:G,async:S,retry:Z,bOnlyEmptyIsOK:ne}),(pe=e.bio.get("uploadType"))&&((B=pe.get("ajaxConfig"))&&B.headers&&L&&e.mix(B.headers,L),w>=0&&pe.set("blockSize",w),P.__withCredentials&&e.mix(B.xhrFields,{withCredentials:!0})),P.__HTTPPostResponseString=n,e.bio.on(e.BIO.event.SUCCESS,function(ie){e.bio=n,P.__HTTPPostResponseString=ie&&e.isString(ie.response)?ie.response:"",e.isFunction(P.__OnHttpUploadStatus)&&P.__OnHttpUploadStatus({fileName:ie.name,percentage:100,statusCode:200,responseString:P.__HTTPPostResponseString}),e.isFunction(ue)&&ue(P.__HTTPPostResponseString)}),e.bio.on(e.BIO.event.ERROR,function(ie){var be=ie&&ie.canceled,Ge=n,je=0;e.bio=n,P.__HTTPPostResponseString=ie&&e.isString(ie.response)?ie.response:"",be||(ie&&ie.msg&&(Ge=ie.msg),ie&&ie.httpStatus&&(je=ie.httpStatus)),e.Errors.UploadError(P,be,Ge,je),e.isFunction(P.__OnHttpUploadStatus)&&P.__OnHttpUploadStatus({fileName:ie.name,percentage:100,statusCode:je,responseString:P.__HTTPPostResponseString}),e.isFunction(X)&&X(P.__HTTPPostResponseString)}),(U||e.isFunction(P.__OnHttpUploadStatus))&&(e.bio.on(e.BIO.event.PROGRESS,function(ie){delete ie.totalSize,delete ie.position;var be=0===ie.total?100:Math.round(100*ie.loaded/ie.total);[ie.loaded," / ",ie.total].join(""),e.isFunction(P.__OnHttpUploadStatus)&&(be>99&&(be=99),P.__OnHttpUploadStatus({fileName:ie.name,percentage:be,statusCode:0,responseString:""})),U&&P._OnPercentDone([0,be,"","http",ie.name])}),U&&P._OnPercentDone([0,-1,T.MSG.Uploading,"http"]),e.isFunction(P.__OnHttpUploadStatus))){var ee="";e.isArray(k)&&k.length>0||(k&&k.name&&""!=k.name?ee=k.name:k&&k.fileName&&(ee=k.fileName)),P.__OnHttpUploadStatus({fileName:ee,percentage:0,statusCode:0,responseString:""})}return oe&&oe.bCancel?(oe.st=2,e.isFunction(X)&&X(!1),!1):e.bio.upload(k)},httpPutImage:function(P,F,k,w,S,L,U){var Z=a,ne={method:"PUT",url:F,hasContent:a,processData:n,async:w,data:k,onSuccess:S,onError:function(){Z=n,e.isFunction(L)&&L()},onComplete:function(){e.bio=n},beforeSend:function(oe){e.isFunction(U)&&oe.upload.addEventListener("progress",function(ue){delete ue.totalSize,delete ue.position,U(ue)},n)}};return""!=P.HTTPUserName&&(ne.username=P.HTTPUserName,ne.password=P.HTTPPassword),w||e.mix(ne,{headers:{"X-Requested-With":n}}),e.bio=e.ajax(ne),Z},dialog:n,dialogRef:0,showMask:function(P){var F=this;e.log("showMask:"+P+"--"+F.dialogRef),0==F.dialogRef&&e.detect.showMask(),F.dialogRef++},hideMask:function(P){var F=this;e.log("hideMask:"+P+"--"+F.dialogRef),F.dialogRef>1?F.dialogRef--:F.dialogRef<=1&&(e.detect.hideMask(),F.dialog=n,F.dialogRef=0)},setBtnCancelVisibleForProgress:function(P,F){(0==e.cancelFrome&&P.__IfShowProgressBar==a||0!=e.cancelFrome&&P.__IfShowCancelDialogWhenImageTransfer==a)&&e.setBtnCancelVisibleForProgress(F)},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleOnBitmapChangedEvent:function(P,F,k){var w="_OnBitmapChanged";return e.isFunction(P[w])&&P[w](F.result,F,k),n},handleEvent:function(P,F,k){var w=F.result[0],S=P._objWS,L=n;return e.each(i.EVENTS,function(U,Z){if(F.event===U){var ne=["_",U].join("");return L=a,e.isFunction(P[ne])&&P[ne](F.result,F),n}}),L?(e.log("handled event:"+F.event),e.each(i.SEND_BACK_EVENTS,function(U,Z){return i.isServerInvalid(P)?n:F.event===U?(e.log("sendback event:"+F.event),i.sendData(S,i.getJson(P,F.event,i.makeParams(w),0),n,a),n):void 0})):(e.each(e.Addon_Events,function(U,Z){if(F.event===U){var ne=["_",U].join("");return L=a,e.isFunction(P[ne])&&P[ne](F.result),n}}),L&&(e.log("handled addon event:"+F.event),e.each(e.Addon_Sendback_Events,function(U,Z){return i.isServerInvalid(P)?n:F.event===U?(e.log("sendback addon event:"+F.event),i.sendData(S,i.getJson(P,F.event,i.makeParams(w),0),n,a),n):void 0}))),L},getImageType:function(P){if(void 0===P)return-1;if(P.length<4)return-1;var k=P.lastIndexOf(".");if(-1===k)return-1;var w=P.slice(k).toLowerCase();return".bmp"===w||".dib"===w?T.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===w||".jpe"===w||".jpeg"===w||".jfif"===w?T.DWT.EnumDWT_ImageType.IT_JPG:".tif"===w||".tiff"===w?T.DWT.EnumDWT_ImageType.IT_TIF:".png"===w?T.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===w?T.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===w||".j2k"===w||".j2c"===w?T.DWT.EnumDWT_ImageType.IT_J2K:-1},addImageFileExt:function(P,F){var k,w=P.substring(P.lastIndexOf(".")).toLowerCase();return".bmp"==w||".dib"==w||".jpg"==w||".jpe"==w||".jpeg"==w||".jfif"==w||".tif"==w||".tiff"==w||".png"==w||".pdf"==w?P:(F==T.DWT.EnumDWT_ImageType.IT_BMP?k=[P,".bmp"].join(""):F==T.DWT.EnumDWT_ImageType.IT_JPG?k=[P,".jpg"].join(""):F==T.DWT.EnumDWT_ImageType.IT_PNG?k=[P,".png"].join(""):F==T.DWT.EnumDWT_ImageType.IT_TIF?k=[P,".tif"].join(""):F==T.DWT.EnumDWT_ImageType.IT_PDF?k=[P,".pdf"].join(""):F==T.DWT.EnumDWT_ImageType.IT_J2K&&(k=[P,".jp2"].join("")),k)},autoDiscardBlankImage:function(P,F){if(e.config.bDiscardBlankImage){var k=P._ImgManager.getCurrentImageIndex();P.IsBlankImage(k)&&P.RemoveImage(k);var w=["Blank Discard (",F,"): ",P.ErrorString].join("");e.isFunction(P.__OnPrintMsg)&&P.__OnPrintMsg(w)}},replaceLocalFilename:function(P){var F;return void 0===P?"":(F=(P=String(P)).replace(/\\/g,"\\\\"),T.navInfoSync.bFileSystem&&(F=decodeURI(F)),F)},GetImageInfo:function(P,F){var k=P._ImgManager.convertClientIndexToServerId(F);return-1==k?(e.Errors.IndexOutOfRange(P),!1):P._innerFun("GetImageInfo",i.makeParams(k))},isServerInvalid:function(P){var k,w,F=P;return w=F.__bMustUpgradeService,(k=!F.bReady||null===F._objWS)?e.Errors.Server_Invalid(F):w&&e.Errors.MustUpgradeService(F),k||w||-2208==F._errorCode},isHttpServerInvalid:function(P){var k,w,F=P;return w=F.__bMustUpgradeService,(k=!F.bReady||null===F.httpUrl)?e.Errors.Server_Invalid(F):w&&e.Errors.MustUpgradeService(F),k||w||-2208==F._errorCode},getBlobTypeByImageType:function(P){var F="application/octet-stream";switch(P){case 0:F="image/bmp";break;case 1:F="image/jpeg";break;case 2:F="image/tiff";break;case 3:F="image/png";break;case 4:F="application/pdf";break;case 14:F="image/jp2"}return F},DEF:function(P,F,k,w){var S;0!==k&&1!==k?S=k:(S={},k&&(S.set=1==w?function(L){var U=1*L;return!e.isNumber(U)||isNaN(U)?(e.Errors.InvalidValue(P),n):(P._resetErr(),!!P._isValid()&&P._innerFun(F,i.makeParams(U)))}:2==w?function(L){return e.isBoolean(L)?(P._resetErr(),!!P._isValid()&&P._innerFun(F,i.makeParams(L))):(e.Errors.InvalidValue(P),n)}:function(L){return e.isString(L)?(P._resetErr(),!!P._isValid()&&P._innerFun(F,i.makeParams(L))):(e.Errors.InvalidValue(P),n)})),S.get||(S.get=function(){if(P._resetErr(),!P._isValid())return!1;if("CurrentSourceName"==F){var L=P._innerFun(F);return P.__currentImageCaptureDriverType==T.DWT.EnumDWT_Driver.TWAIN64&&L.length>0?"Twain64-"+L:P.__currentImageCaptureDriverType==T.DWT.EnumDWT_Driver.ICA&&P.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&L.length>0?"ICA-"+L:L}return P._innerFun(F)}),F in P||Object.defineProperty(P,F,S)},_DEF_NOT_SUPPORT_MOBILE_A:function(P,F,k){var w={get:function(){return P._mobileNotSupport(F)}};(1===k||e.isUndef(k))&&(w.set=w.get),F in P||Object.defineProperty(P,F,w)},DEF_NOT_SUPPORT_MOBILE:function(P,F,k){e.isArray(F)?e.each(F,function(w){i._DEF_NOT_SUPPORT_MOBILE_A(P,w,k)}):i._DEF_NOT_SUPPORT_MOBILE_A(P,F,k)},callbacks:[],pushCallback:function(P,F,k){i.callbacks({method:P,callback:F,ticks:k})},refreshUIRef:0,isPDF:function(P){return 37==P[0]&&80==P[1]&&68==P[2]&&70==P[3]},isTIFF:function(P){return 73==P[0]&&73==P[1]&&42==P[2]&&0==P[3]||77==P[0]&&77==P[1]&&0==P[2]&&42==P[3]},isJP2:function(P){return 0==P[0]&&0==P[1]&&0==P[2]&&12==P[3]&&106==P[4]&&80==P[5]&&32==P[6]&&32==P[7]||255==P[0]&&79==P[1]&&255==P[2]&&81==P[3]},isJpeg:function(P){return 255==P[0]&&216==P[1]},isBMP:function(P){return 66==P[0]&&77==P[1]},isPng:function(P){return 137==P[0]&&80==P[1]&&78==P[2]&&71==P[3]},GetFileType:function(P){var F=T.DWT.EnumDWT_ImageType,w=P;return(P instanceof ArrayBuffer||P instanceof Array)&&(w=new Uint8Array(P.slice(0,12))),e.html5.Funs.isPDF(w)?F.IT_PDF:e.html5.Funs.isTIFF(w)?F.IT_TIF:e.html5.Funs.isPng(w)?F.IT_PNG:e.html5.Funs.isJpeg(w)?F.IT_JPG:e.html5.Funs.isBMP(w)?F.IT_BMP:e.html5.Funs.isJP2(w)?F.IT_J2K:F.IT_PNG}};var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];_(m("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function P(F,k){return(F=0|F||0)<0?Math.max(F+k,0):Math.min(F,k)}ArrayBuffer.prototype.slice=function(F,k){var U,Z,ne,oe,w=this.byteLength,S=P(F,w),L=w;return void 0!==k&&(L=P(k,w)),S>L?new ArrayBuffer(0):(U=L-S,Z=new ArrayBuffer(U),ne=new Uint8Array(Z),oe=new Uint8Array(this,S,U),ne.set(oe),Z)}}(),x.prototype.append=function(P){return this.appendBinary(C(P)),this},x.prototype.appendBinary=function(P){this._buff+=P,this._length+=P.length;var k,F=this._buff.length;for(k=64;k<=F;k+=64)g(this._hash,v(this._buff.substring(k-64,k)));return this._buff=this._buff.substring(k-64),this},x.prototype.end=function(P){var w,L,F=this._buff,k=F.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(w=0;w<k;w+=1)S[w>>2]|=F.charCodeAt(w)<<(w%4<<3);return this._finish(S,k),L=_(this._hash),P&&(L=R(L)),this.reset(),L},x.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},x.prototype.setState=function(P){return this._buff=P.buff,this._length=P.length,this._hash=P.hash,this},x.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},x.prototype._finish=function(P,F){var w,S,L,k=F;if(P[k>>2]|=128<<(k%4<<3),k>55)for(g(this._hash,P),k=0;k<16;k+=1)P[k]=0;w=(w=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(w[2],16),L=parseInt(w[1],16)||0,P[14]=S,P[15]=L,g(this._hash,P)},x.hash=function(P,F){return x.hashBinary(C(P),F)},x.hashBinary=function(P,F){var w=_(m(P));return F?R(w):w},(x.ArrayBuffer=function(){this.reset()}).prototype.append=function(P){var w,F=function(P,F,k){var w=new Uint8Array(P.byteLength+F.byteLength);return w.set(new Uint8Array(P)),w.set(new Uint8Array(F),P.byteLength),w}(this._buff.buffer,P),k=F.length;for(this._length+=P.byteLength,w=64;w<=k;w+=64)g(this._hash,p(F.subarray(w-64,w)));return this._buff=w-64<k?new Uint8Array(F.buffer.slice(w-64)):new Uint8Array(0),this},x.ArrayBuffer.prototype.end=function(P){var S,L,F=this._buff,k=F.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(S=0;S<k;S+=1)w[S>>2]|=F[S]<<(S%4<<3);return this._finish(w,k),L=_(this._hash),P&&(L=R(L)),this.reset(),L},x.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.ArrayBuffer.prototype.getState=function(){var P=x.prototype.getState.call(this);return P.buff=function(P){return String.fromCharCode.apply(null,new Uint8Array(P))}(P.buff),P},x.ArrayBuffer.prototype.setState=function(P){return P.buff=function(P,F){var L,k=P.length,w=new ArrayBuffer(k),S=new Uint8Array(w);for(L=0;L<k;L+=1)S[L]=P.charCodeAt(L);return S}(P.buff),x.prototype.setState.call(this,P)},x.ArrayBuffer.prototype.destroy=x.prototype.destroy,x.ArrayBuffer.prototype._finish=x.prototype._finish,x.ArrayBuffer.hash=function(P,F){var w=_(function(P){var w,S,L,U,Z,ne,F=P.length,k=[1732584193,-271733879,-1732584194,271733878];for(w=64;w<=F;w+=64)g(k,p(P.subarray(w-64,w)));for(S=(P=w-64<F?P.subarray(w-64):new Uint8Array(0)).length,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<S;w+=1)L[w>>2]|=P[w]<<(w%4<<3);if(L[w>>2]|=128<<(w%4<<3),w>55)for(g(k,L),w=0;w<16;w+=1)L[w]=0;return U=(U=8*F).toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt(U[2],16),ne=parseInt(U[1],16)||0,L[14]=Z,L[15]=ne,g(k,L),k}(new Uint8Array(P)));return F?R(w):w},e.SparkMD5=x}function g(P,F){var k=P[0],w=P[1],S=P[2],L=P[3];w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&S|~w&L)+F[0]-680876936|0)<<7|k>>>25)+w|0)&w|~k&S)+F[1]-389564586|0)<<12|L>>>20)+k|0)&k|~L&w)+F[2]+606105819|0)<<17|S>>>15)+L|0)&L|~S&k)+F[3]-1044525330|0)<<22|w>>>10)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&S|~w&L)+F[4]-176418897|0)<<7|k>>>25)+w|0)&w|~k&S)+F[5]+1200080426|0)<<12|L>>>20)+k|0)&k|~L&w)+F[6]-1473231341|0)<<17|S>>>15)+L|0)&L|~S&k)+F[7]-45705983|0)<<22|w>>>10)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&S|~w&L)+F[8]+1770035416|0)<<7|k>>>25)+w|0)&w|~k&S)+F[9]-1958414417|0)<<12|L>>>20)+k|0)&k|~L&w)+F[10]-42063|0)<<17|S>>>15)+L|0)&L|~S&k)+F[11]-1990404162|0)<<22|w>>>10)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&S|~w&L)+F[12]+1804603682|0)<<7|k>>>25)+w|0)&w|~k&S)+F[13]-40341101|0)<<12|L>>>20)+k|0)&k|~L&w)+F[14]-1502002290|0)<<17|S>>>15)+L|0)&L|~S&k)+F[15]+1236535329|0)<<22|w>>>10)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&L|S&~L)+F[1]-165796510|0)<<5|k>>>27)+w|0)&S|w&~S)+F[6]-1069501632|0)<<9|L>>>23)+k|0)&w|k&~w)+F[11]+643717713|0)<<14|S>>>18)+L|0)&k|L&~k)+F[0]-373897302|0)<<20|w>>>12)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&L|S&~L)+F[5]-701558691|0)<<5|k>>>27)+w|0)&S|w&~S)+F[10]+38016083|0)<<9|L>>>23)+k|0)&w|k&~w)+F[15]-660478335|0)<<14|S>>>18)+L|0)&k|L&~k)+F[4]-405537848|0)<<20|w>>>12)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&L|S&~L)+F[9]+568446438|0)<<5|k>>>27)+w|0)&S|w&~S)+F[14]-1019803690|0)<<9|L>>>23)+k|0)&w|k&~w)+F[3]-187363961|0)<<14|S>>>18)+L|0)&k|L&~k)+F[8]+1163531501|0)<<20|w>>>12)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w&L|S&~L)+F[13]-1444681467|0)<<5|k>>>27)+w|0)&S|w&~S)+F[2]-51403784|0)<<9|L>>>23)+k|0)&w|k&~w)+F[7]+1735328473|0)<<14|S>>>18)+L|0)&k|L&~k)+F[12]-1926607734|0)<<20|w>>>12)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w^S^L)+F[5]-378558|0)<<4|k>>>28)+w|0)^w^S)+F[8]-2022574463|0)<<11|L>>>21)+k|0)^k^w)+F[11]+1839030562|0)<<16|S>>>16)+L|0)^L^k)+F[14]-35309556|0)<<23|w>>>9)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w^S^L)+F[1]-1530992060|0)<<4|k>>>28)+w|0)^w^S)+F[4]+1272893353|0)<<11|L>>>21)+k|0)^k^w)+F[7]-155497632|0)<<16|S>>>16)+L|0)^L^k)+F[10]-1094730640|0)<<23|w>>>9)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w^S^L)+F[13]+681279174|0)<<4|k>>>28)+w|0)^w^S)+F[0]-358537222|0)<<11|L>>>21)+k|0)^k^w)+F[3]-722521979|0)<<16|S>>>16)+L|0)^L^k)+F[6]+76029189|0)<<23|w>>>9)+S|0,w=((w+=((S=((S+=((L=((L+=((k=((k+=(w^S^L)+F[9]-640364487|0)<<4|k>>>28)+w|0)^w^S)+F[12]-421815835|0)<<11|L>>>21)+k|0)^k^w)+F[15]+530742520|0)<<16|S>>>16)+L|0)^L^k)+F[2]-995338651|0)<<23|w>>>9)+S|0,w=((w+=((L=((L+=(w^((k=((k+=(S^(w|~L))+F[0]-198630844|0)<<6|k>>>26)+w|0)|~S))+F[7]+1126891415|0)<<10|L>>>22)+k|0)^((S=((S+=(k^(L|~w))+F[14]-1416354905|0)<<15|S>>>17)+L|0)|~k))+F[5]-57434055|0)<<21|w>>>11)+S|0,w=((w+=((L=((L+=(w^((k=((k+=(S^(w|~L))+F[12]+1700485571|0)<<6|k>>>26)+w|0)|~S))+F[3]-1894986606|0)<<10|L>>>22)+k|0)^((S=((S+=(k^(L|~w))+F[10]-1051523|0)<<15|S>>>17)+L|0)|~k))+F[1]-2054922799|0)<<21|w>>>11)+S|0,w=((w+=((L=((L+=(w^((k=((k+=(S^(w|~L))+F[8]+1873313359|0)<<6|k>>>26)+w|0)|~S))+F[15]-30611744|0)<<10|L>>>22)+k|0)^((S=((S+=(k^(L|~w))+F[6]-1560198380|0)<<15|S>>>17)+L|0)|~k))+F[13]+1309151649|0)<<21|w>>>11)+S|0,w=((w+=((L=((L+=(w^((k=((k+=(S^(w|~L))+F[4]-145523070|0)<<6|k>>>26)+w|0)|~S))+F[11]-1120210379|0)<<10|L>>>22)+k|0)^((S=((S+=(k^(L|~w))+F[2]+718787259|0)<<15|S>>>17)+L|0)|~k))+F[9]-343485551|0)<<21|w>>>11)+S|0,P[0]=k+P[0]|0,P[1]=w+P[1]|0,P[2]=S+P[2]|0,P[3]=L+P[3]|0}function v(P){var k,F=[];for(k=0;k<64;k+=4)F[k>>2]=P.charCodeAt(k)+(P.charCodeAt(k+1)<<8)+(P.charCodeAt(k+2)<<16)+(P.charCodeAt(k+3)<<24);return F}function p(P){var k,F=[];for(k=0;k<64;k+=4)F[k>>2]=P[k]+(P[k+1]<<8)+(P[k+2]<<16)+(P[k+3]<<24);return F}function m(P){var w,S,L,U,Z,ne,F=P.length,k=[1732584193,-271733879,-1732584194,271733878];for(w=64;w<=F;w+=64)g(k,v(P.substring(w-64,w)));for(S=(P=P.substring(w-64)).length,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<S;w+=1)L[w>>2]|=P.charCodeAt(w)<<(w%4<<3);if(L[w>>2]|=128<<(w%4<<3),w>55)for(g(k,L),w=0;w<16;w+=1)L[w]=0;return U=(U=8*F).toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt(U[2],16),ne=parseInt(U[1],16)||0,L[14]=Z,L[15]=ne,g(k,L),k}function y(P){var k,F="";for(k=0;k<4;k+=1)F+=h[P>>8*k+4&15]+h[P>>8*k&15];return F}function _(P){var F;for(F=0;F<P.length;F+=1)P[F]=y(P[F]);return P.join("")}function C(P){return/[\u0080-\uFFFF]/.test(P)&&(P=unescape(encodeURIComponent(P))),P}function R(P){var w,F=[],k=P.length;for(w=0;w<k-1;w+=2)F.push(parseInt(P.substr(w,2),16));return String.fromCharCode.apply(String,F)}function x(){this.reset()}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=e.html5.Funs,n=i.DEF;e.html5.STwainStyle=function(o){this._parent=o,function(o){var l=o;n(l,"width",{get:function(){return this._parent._width},set:function(d){this.SetSize(d,!1)}}),n(l,"height",{get:function(){return this._parent._height},set:function(d){this.SetSize(!1,d)}})}(this)},e.html5.STwainStyle.prototype.SetSize=function(o,l){!function(o,l,d){var f,c=o,u=!1,h=!1;c._isBindViewer()&&(e.isString(l)&&l.length>0&&"%"===l.charAt(l.length-1)&&(u=l),!u&&l&&(f=parseInt(l))&&(u=f+"px"),e.isString(d)&&d.length>0&&"%"===d.charAt(d.length-1)&&(h=d),!h&&d&&(f=parseInt(d))&&(h=f+"px"),u&&(c._width=u),h&&(c._height=h),i.changeImageUISize(c,u,h))}(this._parent,o,l)}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=239514e3;t.prototype.convertServerIdToGuid=function(n){return 1*n+i},t.prototype.convertGuidToServerId=function(n){return 1*n-i},e.Index=e.Index||{},e.Index.ImageIndexManager=t}function t(){}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=e.html5.Funs,n=T.dcp,a=!1,s=!0;e.html5.STwain=function(d){var c=this,u=d||{},h=u.bNoViewer,f=u.bLocalService;c._destroy=!1,c.config=u,c.clientId=i.getRandom(),c._id=u.id,u.container?c._containerElement=u.container:u.containerID&&(c._containerElement=e.get(u.containerID)),c._bBindViewer=h?a:s,c._customIP=a,c._ssl=e.detect.ssl,u.customIP?(c._customIP=s,c._host=u.host):c._host=e.product.host,""==c._host||e.isLocalIP(c._host)?(c._bLocalService=f?s:a,c._bRemoteMode=a):(c._bLocalService=s,c._bRemoteMode=s),(u.customIP||n.bEnhancedMode)&&(c._port=u.port),c.bReady=a,c.httpFormFields={},c._objWS=null,c.__wsRetry=0,c.curCommand=[],c.__OnInternetTransferPercentage=u.onInternetTransferPercentage||"",c.__OnInternetTransferPercentageEx=u.onInternetTransferPercentageEx||"",c.__OnReady=u.onReady||null,c.__OnWSReconnect=u.onWSReconnect||null,c.__OnWSClose=u.onWSClose||null,c.__OnWSMessage=u.onWSMessage||null,c.__OnWSError=u.onWSError||null,c.__OnPercentDone=u.onPercentDone||"",c.__OnPrintMsg=u.onPrintMsg||"",c.__OnResult=u.onResult||"",c.HTTPPassword=u.HTTPPassword||"",c.HTTPPort=u.HTTPPort||(e.detect.ssl?443:80),c.HTTPUserName=u.HTTPUserName||"",c.__HTTPPostResponseString="",c.__strHttpContentTypeFieldValue="application/octet-stream",c.__IfShowProgressBar=s,c.__IfShowCancelDialogWhenImageTransfer=s,c._errorCode=0,c._errorString="",c.__bLoadingImage=a,c.__bAcquireImageNow=a,c.__bOpenFileNow=a,c.__backgroundColor=a,c.__addon={},c.__remoteFilename="RemoteFile",c.__sourceName=[],c.__defaultSourceName="",c.__sourceCount=0,c.__icaSourceCount=-1,c.__serverId="",c.__bConnecting=a,c.__bTrial=a,c.__licenseInfo=a,c.__httpHeaderMap=a,c.__bForceClose=a,c.__strProductName=c._bLocalService?"":T.DWT.ProductName,c.__versionInfo=T.DWT.JSVersion,c.__bMustUpgradeService=a,c.__withCredentials=a,c._moduleSize=1048576,c._segementUploadThreshold=T.dcp.b64bit?4294967296:524288e3,c._driverType=T.DWT.EnumDWT_Driver.TWAIN,c.__IfAppendImage=s,c.__maxImagesInBuffer=32767,c.__maxUploadImageSize=-1,c.__insertingIndex=-1,c.objImageIndexManager=new e.Index.ImageIndexManager(c.__maxImagesInBuffer),c._bServerPercentDone=s,c._aryBitmapCache=[],c._aryTiffTag=[],c._tiffCompressionType=T.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,c._jpgQuality=80,c._pdfConvertMode=3,c._pdfRealConvertMode=3,c._pdfResolution=200,c._pdfPassword="",c._ifSSL=T.navInfoSync.bSSL,c._bRegistedLoad=!1,c._logLevel=0,c._scaleDownThreshold=0,c._pdfWriteSetting={},c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumUnknown,c.bPageFocus=!0,c.bServerAlwaysFocusOnPopupWindow=!0,e.License.isLTS()&&(c._blts=!0),function(d,c){var u=c||{};d.__OnAfterOperate=u.onAfterOperate||"",d.__OnBeforeOperate=u.onBeforeOperate||"",d.__OnOperateStatus=u.onOperateStatus||"",d.__OnBitmapChanged=u.onBitmapChanged||"",d.__OnGetFilePath=u.onGetFilePath||"",d.__OnPreAllTransfers=u.onPreAllTransfers||"",d.__OnPreTransfer=u.onPreTransfer||"",d.__OnPostLoad=u.onPostLoad||"",d.__OnPostTransfer=u.onPostTransfer||"",d.__OnPostAllTransfers=u.onPostAllTransfers||"",d.__OnSourceUIClose=u.onSourceUIClose||"",d.__OnTransferCancelled=u.onTransferCancelled||"",d.__OnTransferError=u.onTransferError||"",d.__OnInternetTransferPercentage=u.onInternetTransferPercentage||"",d.__OnInternetTransferPercentageEx=u.onInternetTransferPercentageEx||"",d.__OnRemoteScanStatusAsync=u.onRemoteScanStatusAsync||""}(c,u)};var o=e.html5.STwain.prototype;o.getInstance=function(){return this},o._getWebTwainId=function(){return this._id},o._isMobileMode=function(){return!(""!=this._host&&!e.isLocalIP(this._host)||this._bLocalService)},o._isPC=function(){var d=T.navInfo;return d.bWin||d.bMac||d.bLinux},o._resetErr=function(){this._errorCode=0,this._errorString="";var d=T.DWT.licenseException;d.code=0,d.message=""},o._isValid=function(){return!this._destroy||(e.Errors.Destroyed(this),!1)},o._isBindViewer=function(){return this._bBindViewer},o._isNoViewer=function(){return!this._bBindViewer},o._mobileNotSupport=function(d,c){var u=this;return e.Errors.MobileNotSupport(u,d),e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),!1},o._mobileNotSupportAsync=function(d){var c=this;return e.Errors.MobileNotSupport(c,d),e.Promise.reject({code:c.ErrorCode,message:c.ErrorString})},o._serviceNotSupportAsync=function(d){var c=this;return e.Errors.ServiceNotSupport(c,d),e.Promise.reject({code:c.ErrorCode,message:c.ErrorString})},o._nouiNotSupport=function(d,c){var u=this;return e.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(u,d),e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),!1},o._OnRecieveMsg=function(d){var u,h,c=this;if(d.event){if("OnBitmapChanged"==d.event){if(d.cmdId)for(g=c.curCommand.length-1;g>=0;g--)if(c.curCommand[g].cmdId==d.cmdId)return void i.handleOnBitmapChangedEvent(c,d,h=c.curCommand[g].currentFileName);return void i.handleOnBitmapChangedEvent(c,d)}i.handleEvent(c,d,h)}else{if(d.cmdId){var g,v=-1;for(g=c.curCommand.length-1;g>=0;g--)if(c.curCommand[g].cmdId==d.cmdId){u=c.curCommand.splice(v=g,1)[0];break}if(v<0)return}else u=c.curCommand.pop()||{};if(void 0!==d.exception&&void 0!==d.description?(c._errorCode=d.exception,c._errorString=d.description):"StartScan"!=d.method&&"GetAddOnVersion"!=d.method&&(c._errorCode=0,c._errorString=""),"ReadBarcode"==d.method||"OCRRecognize"==d.method||d.request&&"OCRProRecognize"==d.request.method)u.sFun&&u.sFun(d);else{if("ActiveUI"==d.method||"VersionInfo"==d.method||"ConvertToBase64"==d.method||"SaveSelectedImagesToBase64Binary"==d.method||"ConvertToBlob"==d.method){if(u.sFun&&d.result.length>0)return void u.sFun(d.result)}else if("ShowFileDialog"==d.method||"SplitTiff"==d.method||"SplitPDF"==d.method||"EncodeAsBase64"==d.method||"ProductKey"==d.method||"GetSourceNames"==d.method||"GetSkewAngle"==d.method||"GetImageInfo"==d.method){if(u.sFun)return void u.sFun(d.result)}else if("GetLicenseInfo"==u.cmd&&e.isArray(d.Detail)){if(u.sFun)return void u.sFun(d)}else if("SetCapabilities"==d.method)return"exception"in d&&"0"!=d.exception?(d.result.errorCode&&d.result.errorString?(c._errorCode=d.result.errorCode,c._errorString=d.result.errorString):(c._errorCode=d.exception,c._errorString=d.description),u.fFun&&u.fFun(d.result),void(d=null)):(u.sFun&&u.sFun(d.result),void(d=null));if(d.result&&d.result.length&&("1"==d.result[0]||1==d.result[0]))u.sFun&&u.sFun();else if(d.exception){var p=!1;u.fFun&&(p=u.fFun(c._errorString)),!p&&d.exception&&d.exception<0&&-2115!=d.exception&&e.isFunction(c.__OnPrintMsg)&&c.__OnPrintMsg(c._errorString)}else{if("LoadImage"==d.method||"LoadImageEx"==d.method||"LoadImageFromBytes"==d.method||"LoadImageFromBase64Binary"==d.method||"LoadDibFromClipboard"==d.method||"FTPDownload"==d.method||"FTPDownloadEx"==d.method)return u.sFun&&u.sFun(d.result),void(d=null);u.fFun&&u.fFun(i.__pushElement(["result:"],d.result))}}}},o._OnReady=function(d){var u,c=this;if(e.detect.starting=!1,e.detect.bOK=!0,c.bReady=!0,c.__wsRetry=0,d||!T.DWT.ContainerMap[c._getWebTwainId()]){if(c._bLocalService&&T.DWT.IfUseWSPool){if(null===(u=c._objWS))return;if(u.onopen=null,c.httpUrl=e.getHttpUrl({host:c._host,ssl:c._ssl,port:c._port}),u.onmessage=function(p){var I,m=p.data;if("object"==typeof m){if(T.DWT.ConnectWithSocket){var C;for(C=c.curCommand.length-1;C>=0;C--)if("ConvertToBlob"==c.curCommand[C].cmd||"GetImageByIndex"==c.curCommand[C].cmd){I=c.curCommand.splice(C,1)[0];break}I.sFun(m)}return m=null,void(p=null)}var M=m.replace(/\0/g,"");try{M=e.parse(M)}catch(E){e.log(m)}M.id?e._deliverMsg(u.url,M):M=null},u.onclose=u.onerror=function(p){!e.page.bUnload&&!e.detect.starting&&(setTimeout(e._reconnectWSPool,500),e.detect.starting=!0),p&&e.log("websocket error: "+p),i.hideMask(!0),e.detect.bOK=!1,T.Lib.each(T.DWT.globalWS,function(m,I){if(m==u)return T.DWT.globalWS.splice(I,1),!1})},d)return void c._innerActiveUI(function(p){var I,y,_,m=c.__serverId;p&&p.length>=6?(I=p[1],_=p[5],c.__strProductName=y=p[2],e.isString(_)&&("win"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumWindow:"linux"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumLinux:"mac"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumMac:"embed"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==_&&(c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(I=p[1],c.__strProductName=y=p[2]):p&&p.length>=2?I=p[1]:e.log("ActiveUI return parameters error."),y&&(y=y.toLowerCase()),c.__serverId=I,c._blts?T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(C){return e.closeProgress("Reconnect"),c.SetLTSLicenseAsync(C.ar)}).then(function(C){T.DWT.laddDWTObj(c),T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_desktop,C)},function(C){C&&(T.DWT.lsetException(C.code||C.ltsErrorCode,C.message),T.DWT.OnLicenseException()),c.__unload(),T.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)}):(e.closeProgress("Reconnect"),c.SetProductKeyAsync(T.DWT.ProductKey)),m!=I?(e.Errors.Server_Restarted(c),c._ImgManager&&(c._ImgManager.clear(),c._ImgManager.OnReady())):c._ImgManager&&c._innerFunRawV2("HowManyImagesInBuffer").then(function(C){C&&C.result&&0==C.result[0]&&c._ImgManager.clear(),c._ImgManager.OnReady(),c._resetErr()})});e.isLocalIP(c._host)&&(e.LS.item("DWT_port",c._port),e.LS.item("DWT_ssl",c._ssl?"true":"false"))}else if(c._bLocalService&&!T.DWT.IfUseWSPool){var h,f;if(u=c._objWS,c._customIP?f={host:c._host,ssl:c._ssl,port:c._port}:(f=e.detect.urls[e.detect.cUrlIndex])?f.host=e.product.host:f={host:e.product.host,ssl:c._ssl,port:c._port},h=e.getHttpUrl(f),null===u)return;if(u.onopen=null,c.httpUrl=h,u.onmessage=function(p){var I,y,m=p.data;if("object"==typeof m){if(T.DWT.ConnectWithSocket){var C;for(C=c.curCommand.length-1;C>=0;C--)if("ConvertToBlob"==c.curCommand[C].cmd||"GetImageByIndex"==c.curCommand[C].cmd){I=c.curCommand.splice(C,1)[0];break}I.sFun(m)}return m=null,void(p=null)}c.__OnWSMessage&&c.__OnWSMessage(m);var M=m.replace(/\0/g,"");if(M.indexOf('"method" : "EnableBuffer"')>=0||M.indexOf('"method" : "GetBuffer"')>=0)T.DWT.lwsproc(M);else{if(M.indexOf("Exception:")>=0||0==M.indexOf("Error")){var E=m;return I=c.curCommand.pop()||{},y=!1,e.log(E+"@"+I.cmd),I.fFun&&(y=I.fFun(E)),void(!y&&e.isFunction(c.__OnPrintMsg)&&c.__OnPrintMsg(E))}try{M=e.parse(M)}catch(R){e.log(m)}c._OnRecieveMsg(M),M=null}},u.onclose=function(){c.bReady=!1,c.__wsRetry=0,e.Errors.Server_Invalid(c),!c.__bForceClose&&!e.page.bUnload&&!e.detect.starting&&(setTimeout(function(){e._checkAndReconnect(c._host,c._port)},500),e.detect.starting=!0),c.__OnWSClose&&c.__OnWSClose(),i.hideMask(!0),e.detect.bOK=!1,c.__bForceClose=!1,T.Lib.each(T.DWT.globalWS,function(p,m){if(p==u)return T.DWT.globalWS.splice(m,1),!1})},u.onerror=function(p){c.bReady=!1,c.__wsRetry=0,e.Errors.Server_Invalid(c),e.detect.bOK=!1,!e.page.bUnload&&!e.detect.starting&&(setTimeout(function(){e._checkAndReconnect(c._host,c._port)},500),e.detect.starting=!0),p&&e.log("websocket error: "+p),c.__OnWSError&&c.__OnWSError(),i.hideMask(!0)},d)return void c._innerActiveUI(function(p){var I,y,_,C,m=c.__serverId;p&&p.length>=6?(I=p[1],_=p[5],c.__strProductName=y=p[2],e.isString(_)&&("win"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumWindow:"linux"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumLinux:"mac"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumMac:"embed"==_?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==_&&(c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(I=p[1],c.__strProductName=y=p[2]):p&&p.length>=2?I=p[1]:e.log("ActiveUI return parameters error."),y&&(y=y.toLowerCase()),c.__serverId=I,c._blts?T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(A){return e.closeProgress("Reconnect"),c.SetLTSLicenseAsync(A.ar)}).then(function(A){T.DWT.laddDWTObj(c),T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_desktop,A)},function(A){A&&(T.DWT.lsetException(A.code||A.ltsErrorCode,A.message),T.DWT.OnLicenseException()),c.__unload(),T.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)}):(e.closeProgress("Reconnect"),c.SetProductKeyAsync(T.DWT.ProductKey)),m!=I?(e.Errors.Server_Restarted(c),c._ImgManager&&(c._ImgManager.clear(),c._ImgManager.OnReady()),e.isFunction(c.__OnWSReconnect)&&(C=e.getWSUrl(c._host,c._port,c._ssl),c.__OnWSReconnect(C,h))):c._ImgManager&&c._innerFunRawV2("HowManyImagesInBuffer").then(function(A){A&&A.result&&0==A.result[0]&&c._ImgManager.clear(),c._ImgManager.OnReady(),c._resetErr()})});e.isLocalIP(c._host)&&(e.LS.item("DWT_port",f.port),e.LS.item("DWT_ssl",f.ssl?"true":"false"))}if(e.attachProperty(c),e.html5.ui.init(c,c.config),e.html5.ui.addMethods(c),e.attachPropertyUI(c),c._ImgManager.OnReady(),c._bLocalService)c._innerActiveUI(function(p){var m,I,y,_=!1;if(p&&p.length>=6?(m=p[1],y=p[5],c.__strProductName=I=p[2],e.isString(y)&&("win"==y?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumWindow:"linux"==y?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumLinux:"mac"==y?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumMac:"embed"==y?c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==y&&(c.__serverPlatform=T.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(m=p[1],c.__strProductName=I=p[2]):p&&p.length>=2?(m=p[1],_=!0):(_=!0,e.log("ActiveUI return parameters error.")),e.attachAddon(c),I&&(I=I.toLowerCase()),c.__serverId=m,c.__bMustUpgradeService=_,_)e.isFunction(c.__OnReady)&&c.__OnReady(c);else{var C;if(e.showLoadingMsg(-1,"",T.MSG.Init_SetLicenseForDWT),c._blts){e.isUndefined(c._bLocalService),C=T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(E){return c.SetLTSLicenseAsync(E.ar)}).then(function(E){T.DWT.laddDWTObj(c),T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_desktop,E)})}else{var M=T.DWT.ProductKey;C=""==M||"******"==M?e.Promise.resolve(0):c.SetProductKeyAsync(M)}C=C.then(function(){e.closeLoadingMsg();var E=!1;if(c._blts?0==T.DWT.licenseException.code&&(e.License.checkProductKey(c,{Core:!0},!0)||e.License.checkProductKey(c,{Webcam:!0},!0)?(T.DWT.lclex(),E=!0):e.License.checkProductKey(c,{Core:!0},!0)):e.License.checkProductKey(c,{Core:!0})||e.License.checkProductKey(c,{Webcam:!0},!0)?E=!0:e.License.checkProductKey(c,{Core:!0},!1,!0),e.isFunction(c.__OnReady)&&c.__OnReady(c),E)return c._setConvertModeAsync(c._pdfConvertMode).catch(function(){})},function(E){if(e.closeLoadingMsg(),c._blts&&E)return T.DWT.lsetException(E.code||E.ltsErrorCode,E.message),T.DWT.OnLicenseException(),c.__unload(),T.DWT.ContainerMap={},e.detect.arySTwains.splice(0),void e.detect.arySTwainsByIP.splice(0);c._blts?e.License.checkProductKey(c,{Core:!0},!0):e.License.checkProductKey(c,{Core:!0})||e.License.checkProductKey(c,{Webcam:!0},!0)||e.License.checkProductKey(c,{Core:!0},!1,!0)})}});else{var g;if(e.attachAddon(c),c.__serverId=1,c.__bMustUpgradeService=!1,e.showLoadingMsg(-1,"",T.MSG.Init_SetLicenseForDWT),c._blts)T.DWT.li({instanceMode:T.DWT.EnumInstance.dwt_browser}),g=T.DWT.lglic(T.DWT.EnumInstance.dwt_browser).then(function(p){return c.SetLTSLicenseAsync(p.ar)}).then(function(p){T.DWT.laddDWTObj(c),T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_browser,p)},function(p){p&&(T.DWT.lsetException(p.code||p.ltsErrorCode,p.message),T.DWT.OnLicenseException()),c.__unload(),T.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)});else{var v=T.DWT.ProductKey;g=""==v||"******"==v?e.Promise.resolve(0):c.SetProductKeyAsync(v)}g.then(function(){if(e.closeLoadingMsg(),c.ErrorCode<0)e.License.promptLicenseErr(c);else{var p=!1;c._blts?0==T.DWT.licenseException.code&&(e.License.checkProductKey(c,{Core:!0},!0)||e.License.checkProductKey(c,{Webcam:!0},!0)?(T.DWT.lclex(),p=!0):e.License.checkProductKey(c,{Core:!0},!0)):e.License.checkProductKey(c,{Core:!0})||e.License.checkProductKey(c,{Webcam:!0},!0)?e.License.checkProductKey(c,{Core:!0,Wasm:!0},!0,!0)&&(p=!0):e.License.checkProductKey(c,{Core:!0},!1,!0),p&&(T.WasmEnv&&T.WasmEnv.setLoglevel(c._logLevel),c._setConvertMode(c._pdfConvertMode)),e.isFunction(c.__OnReady)&&c.__OnReady(c)}},function(p){e.closeLoadingMsg(),c.errorCode=p.code,c.errorString=p.message,T.OnLicenseError(p.message,p.code)})}}else e.isFunction(c.__OnReady)&&c.__OnReady(c)},o.__unload=o.dispose=function(){var c,d=this;d._destroy||(d._ImgManager&&d._ImgManager.clear(),d.bReady&&((c=d._objWS)&&(d.__bForceClose=!0,T.DWT.IfUseWSPool?e._removeFromWSPool(d):c.close(),d.curCommand.splice(0),delete d._objWS),d.bReady=!1),d.__addon&&d.__addon.Camera&&d.__addon.Camera._viewer&&(""!=d.__addon.Camera.getStatus()&&d.__addon.Camera.closeSource().catch(function(){}),d.__addon.Camera._viewer.dispose(),d.__addon.Camera._viewer=null),d._isBindViewer()&&(d.UnbindViewer(),e.html5.ui.unLoad(d)),d._ImgManager&&(d._ImgManager.dispose(),d._ImgManager=null,d.Viewer=null),d.objImageIndexManager&&(d.objImageIndexManager=null),T.DWT.lremoveDWTObj(d),d._destroy=!0)}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.DWT,s=e.html5.STwain,o=s.prototype,c={Auto:0,G3:1,G4:2,LZW:3,ZIP:4,JPEG:5};e.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(B,K,G){var ee=window,ie=T.navInfo;if((ie.biPad||ie.biPhone)&&!(ee.requestFileSystem||ee.webkitRequestFileSystem||ee.mozRequestFileSystem)&&(ie.bSafari&&parseFloat(ie.strBrowserVersion)<13||!ie.bSafari)){var Te=window.open(B,"","",!1);return setTimeout(function(){Te.document.title=K},100),!0}var Ge=document.createElementNS("http://www.w3.org/1999/xhtml","a");if(Ge.href=B,Ge.download=K,Ge.target="_blank",document.body.appendChild(Ge),ie.bEdge)Ge.click();else{var je=document.createEvent("MouseEvents");je.initMouseEvent("click",!0,!1),Ge.dispatchEvent(je)}return document.body.removeChild(Ge),!0},saveLocal:function(B,K,G){e.isString(B)&&B.indexOf("blob:http://")>-1?e.MobileFuns._innerSaveLocal(B,K,G):B instanceof Blob?e.MobileFuns._innerSaveLocal(URL.createObjectURL(B),K,G):B instanceof ArrayBuffer?e.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([B])),K,G):e.MobileFuns._innerSaveLocal(B,K,G)},dataURLtoBlob:function(B){var ee,ie,be,K=B.split(","),G=K[0].match(/:(.*?);/)[1];try{ee=atob(K[1])}catch(Te){return ee="",!1}for(ie=ee.length,be=new Uint8Array(ie);ie--;)be[ie]=ee.charCodeAt(ie);return new Blob([be],{type:G})},appendTiffPage:function(B,K,G,ee){var ie=B,be=K,Te=G.context.bShowPercentProgress,Ge=ie._aryTiffTag.length;if(Ge>0){Ge>32&&(Ge=32);for(var je=0;je<Ge;je++)be=(be=be.then(function(he){G.context.tagIndex=0;var V=ie._aryTiffTag[G.context.tagIndex];return e.log("[Wasm]Save Image: page "+G.context.cIndex+" add tiff tag "+V.tag),G.addTag(V.tag,V.content,V.UseBase64Encoding)})).then(function(){G.context.tagIndex=G.context.tagIndex+1})}return be=be.then(function(){e.log("[Wasm]Save Image: page "+G.context.cIndex+" add tiff tag successfully");var he=G.context.aryIndex,ae=G.context.cIndex;return ie._ImgManager.getWebViewer().GetImageData(ie._ImgManager.getUidByIndex(he[ae]))}),ie._scaleDownThreshold<=0||(be=(be=be.then(function(he){var ae=he&&he.metadata?he.metadata:{};return e.log("[Wasm]Save Image: scale"),T.ImageProcWrapper.resize(he.oriData,ae.width,ae.height,ie._scaleDownThreshold)})).then(function(he){return e.log("[Wasm]Save Image: scaled"),{oriData:he.imageData}})),be=be.then(function(he){var ae=T.DWT.EnumDWT_ImageType.IT_ALL,V=G.context.tiffFormat;return e.log("[Wasm]Save Image: page "+G.context.cIndex+" append to tiff"),G.appendImage(he.oriData,ae,V,ie._jpgQuality)}),Te&&(be=be.then(function(){var ae=G.context.aryIndex.length,Q=G.context.cIndex+1;ie._OnPercentDone([0,100*Q/(1*ae),Q+"/"+ae,""])})),be.then(function(){var he=G.context.cIndex;return G.context.cIndex=he+1,he+1})},unloadWasm:function(){return h&&(h.terminate(),h=null),e.Promise.resolve()},loadCallback:function(B){if(B&&B.customData){var V,K=B.customData,G=B.fPdfReader,ee=B.imgCore,ie=K.src,be=K.imgType,Te=K.index,Ge=K.password,je=K.resolution,he=K.convertMode,ae=!1,Q=T.DWT.EnumDWT_ImageType;if(be==Q.IT_PDF)return G||(G=p(),ae=!0),V=function(j){G.close(),ae&&G.terminate()},G.open(ie,Ge).then(function(j){return G.readPage(Te,je,he,T.DWT.EnumDWT_ImageType.IT_JPG,!1,!1)},V).then(function(j){return G.close(),ae&&G.terminate(),j.imageData},V);if(be==Q.IT_TIF)return ee||(ee=g(),ae=!0),V=function(j){ae&&ee.terminate()},ee.openTiff(ie).then(function(j){return ee.readTiff(Te,T.DWT.EnumDWT_ImageType.IT_JPG,!1)}).then(function(j){return ae&&ee.terminate(),j.imageData},V);if(be==Q.IT_PNG||be==Q.IT_JPG||be==Q.IT_BMP)return ee||(ee=g()),ae=!0,V=function(j){ae&&ee.terminate()},ee.readImage(ie,T.DWT.EnumDWT_ImageType.IT_JPG,K.quality,!1).then(function(j){return ae&&ee.terminate(),j.imageData},V)}return e.Promise.resolve()},convertOutputType:function(B){return B},isBlobUrl:function(B){return e.isString(B)&&B.indexOf("blob:http://")>-1},revoke:function(B){return!e.MobileFuns.isBlobUrl(B)||(window.URL||window.webkitURL).revokeObjectURL(B)}},o._innerSendToMobile=function(B,K,G,ee,ie){var be=this;return"GetLicenseInfo"==B||"SetLTSLicense"==B?(e.showMask(),oe(be,K).then(function(Te){e.hideMask(),e.isFunction(ee)&&ee(Te)},function(Te){e.hideMask(),e.Errors.GetLicenseInfoFailed(be,Te),ie&&ie(be._errorCode,be._errorString)})):e.License.checkProductKey(be,{Core:!0,Wasm:!0},!0)?("SaveImage"==B?ne(be,K).then(function(Te){ee&&ee(Te.blobData,Te.type,Te.MD5)},function(){e.isFunction(ie)&&ie(be._errorCode,be._errorString)}):be._innerSendToMobileV2(B,K).then(ee,function(){e.isFunction(ie)&&ie(be._errorCode,be._errorString)}),!0):(ie&&ie(be._errorCode,be._errorString),!1)},o._innerSendToMobileV2=function(B,K){var G=this;return"GetLicenseInfo"==B||"SetLTSLicense"==B?oe(G,K):e.License.checkProductKey(G,{Core:!0,Wasm:!0},!0)?"LoadImageFromBinary"==B?_(G,K):"RotateEx"==B?C(G,K):"Flip"==B?E(G,K):"Mirror"==B?M(G,K):"Invert"==B?R(G,K):"SaveImage"==B?ne(G,K):"Crop"==B?x(G,K):"Erase"==B?P(G,K):"ChangeImageSize"==B?F(G,K):"GetSkewAngleOnly"==B?k(G,K):"GetSkewAngle"==B?w(G,K):"ConvertToGrayScale"==B?S(G,K):"ConvertToBWScale"==B?L(G,K):"SetDPI"==B?U(G,K):"SetImageWidth"==B?Z(G,K):"IsTextBasedPDF"==B?y(G,K):"GetMD5"==B?ue(G,K):"ChangeBrightness"==B?pe(G,K):"ChangeContrast"==B?X(G,K):e.Promise.reject({code:-1e3,message:"invalid method: "+B}):e.Promise.reject(T.DWT.licenseException)};var u=0,h=null,f=function(){var B=i.ProductKey;return e.License.isLTS()&&T.WasmEnv&&(B=T.WasmEnv.productKey),B},g=function(){return new T.Imagecore(f(),1)},v=function(){return new T.ImageProc(f(),1)},p=function(){return new T.PdfReader(f(),1)},y=function(B,K){var ee,Te,G=K[0],Ge=T.DWT.EnumDWT_ImageType;if(G instanceof FileList?ee=G[0]:G instanceof Blob?ee=G:G instanceof ArrayBuffer||G instanceof Uint8Array?(ee=new Blob([G]),Te=e.html5.Funs.GetFileType(G)):ee=G,e.isUndefined(Te)&&(ee.type?"application/pdf"==ee.type&&(Te=Ge.IT_PDF):Te=e.html5.Funs.getImageType(ee.name)),Te==Ge.IT_PDF){var je=p();return e.showMask(),je.open(ee,B._pdfPassword).then(function(he){return e.hideMask(),je.close(),je.terminate(),he.isTextBased},function(he){throw e.hideMask(),e.Errors.LoadImageFailed(B,he),je.close(),je.terminate(),{code:B._errorCode,message:B._errorString}})}return e.Errors.LoadImageFailed(B,"not pdf."),e.Promise.reject({code:B._errorCode,message:B._errorString})},_=function(B,K){var ie,be,Ge,je,G=K[0],ee=K[1],he=!1,ae=0,V=!1,Q=T.DWT.EnumDWT_ImageType;if(K.length>3&&(ie=K[3]),K.length>4&&(V=K[4]),ie||""==(ie=B.GetCurrentFileName())&&(ie=B._ImgManager.getWebViewer().GetDefaultFileName()),G instanceof FileList?be=G[0]:G instanceof Blob?be=G:G instanceof ArrayBuffer||G instanceof Uint8Array?(be=new Blob([G]),je=e.html5.Funs.GetFileType(G)):be=G,e.isUndefined(be))return e.Errors.InvalidSourceFile(B),e.Promise.reject({code:B._errorCode,message:B._errorString});if(e.isUndefined(je))if(be.type){if(-1==(je="application/pdf"==be.type?Q.IT_PDF:"image/png"==be.type?Q.IT_PNG:"image/jpeg"==be.type||"image/jpg"==be.type?Q.IT_JPG:"image/bmp"==be.type?Q.IT_BMP:"image/tiff"==be.type||"image/tif"==be.type?Q.IT_TIF:"image/jp2"==be.type?Q.IT_J2K:e.html5.Funs.getImageType(be.name))&&"application/octet-stream"==be.type)return new e.Promise(function(re,de){var le=new FileReader;le.onload=function(we){K[0]=we.target.result,re(K)},le.readAsArrayBuffer(be)}).then(function(re){return _(B,re)})}else je=e.html5.Funs.getImageType(be.name);if(Ge=be.name,je==Q.IT_JPG||je==Q.IT_PNG||je==Q.IT_BMP||je==Q.IT_J2K){var me=B._jpgQuality;return he=g(),V||e.showMask(),he.readImage(be,Q.IT_JPG,me,!1).then(function(re){var de=0;ee?de=3006:1==re.originalFormat?de=Q.IT_BMP:2==re.originalFormat?de=Q.IT_JPG:3==re.originalFormat?de=Q.IT_PNG:14==re.originalFormat&&(de=Q.IT_J2K);var le={src:re.imageData,imgType:re.imageType,verify:de,dataType:"url"};be instanceof File||2==re.originalFormat&&be instanceof Blob&&(le.src=be);var we=K[2],Ae={};Ae.width=re.imageWidth,Ae.height=re.imageHeight,Ae.bitDepth=re.imageBitDepth,Ae.resolutionX=re.imageXResolution,Ae.resolutionY=re.imageYResolution,we&&(Ae.oriBlobData=we),le.metadata=Ae,u++;var Se=!1;try{B._OnBitmapChanged(["10",""+u,1,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),le],null,ie)}catch(ye){Se=!0,e.Errors.SystemExceptionError(B,ye.message)}if(V||e.hideMask(),!Se&&e.isFunction(B.__OnPostLoad))try{B.__OnPostLoad("",Ge,je)}catch(ye){Se=!0,e.Errors.SystemExceptionError(B,ye.message)}if(he.terminate(),T.DWT.lavrf_(1,T.DWT.EnumInstance.dwt_browser),Se)throw{code:B._errorCode,message:B._errorString}},function(re){throw e.Errors.LoadImageFailed(B,re),V||e.hideMask(),he.terminate(),{code:B._errorCode,message:B._errorString}})}if(je==Q.IT_PDF){var H=p();return H.context={},e.showProgress(B),B._OnPercentDone([0,-1,T.MSG.LoadingPdf,""]),H.open(be,B._pdfPassword).then(function(re){var le,de=re.PdfCount;if(re.isTextBased&&2==B._pdfRealConvertMode)return T.Lib.closeProgress(),2==B._pdfConvertMode?T.Lib.Errors.LoadTextPDFButSetImageOnly(B):T.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(B),H.close(),H.terminate(),e.Promise.reject({code:B._errorCode,message:B._errorString});for(B._OnPercentDone([0,0,"0/"+de,""]),le=e.Promise.resolve(0),H.context.cIndex=0,H.context.pdfCount=de,ae=0;ae<de;ae++)le=(le=le.then(function(){return H.readPage(H.context.cIndex,B._pdfResolution,B._pdfRealConvertMode,T.DWT.EnumDWT_ImageType.IT_JPG,!1,!1)})).then(function(Ae){var Se=H.context.cIndex,ye=H.context.pdfCount,Fe=Se+1,ke={},$e=T.DWT.EnumDWT_ImageType.IT_PDF;if(1==Ae.realReadMode&&($e=5001),B._OnPercentDone([0,100*Fe/(1*ye),Fe+"/"+ye,""]),T.Lib.isArray(Ae.imageInfos)&&Ae.imageInfos.length>0){var Le=Ae.imageInfos[0];ke.width=Le.imageWidth,ke.height=Le.imageHeight,ke.bitDepth=Le.imageBitDepth,ke.resolutionX=Le.imageXResolution,ke.resolutionY=Le.imageYResolution}u++;var fe={src:Ae.imageData,dataType:"url",imgType:T.DWT.EnumDWT_ImageType.IT_PDF,verify:$e,index:Ae.pageIndex,metadata:ke,imageId:u};try{B._OnBitmapChanged(["10",""+u,1,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),fe],null,ie)}catch(De){throw T.Lib.Errors.SystemExceptionError(B,De.message),0}H.context.cIndex=Se+1});return le.then(function(){T.Lib.closeProgress(),H.close(),H.terminate(),T.DWT.lavrf_(1,T.DWT.EnumInstance.dwt_browser),T.Lib.isFunction(B.__OnPostLoad)&&B.__OnPostLoad("",Ge,je)},function(Ae){throw T.Lib.closeProgress(),H.close(),H.terminate(),Ae&&T.Lib.Errors.LoadImageFailed(B,Ae),{code:B._errorCode,message:B._errorString}})},function(re){throw T.Lib.closeProgress(),H.close(),H.terminate(),re&&T.Lib.Errors.LoadImageFailed(B,re),{code:B._errorCode,message:B._errorString}})}return je==Q.IT_TIF?(he=g(),e.showProgress(B),B._OnPercentDone([0,-1,T.MSG.LoadingTiff,""]),he.openTiff(be).then(function(re){var de=re.pageCount,le=re.imageInfos,we=e.Promise.resolve(0);B._OnPercentDone([0,0,"0/"+de,""]);for(var Ae=0;Ae<de;Ae++)we=we.then(function(Se){return he.readTiff(Se,T.DWT.EnumDWT_ImageType.IT_JPG,!1).then(function(ye){var Fe=Se+1;B._OnPercentDone([0,100*Fe/(1*de),Fe+"/"+de,""]),u++;var ke={src:ye.imageData,dataType:"url",imgType:T.DWT.EnumDWT_ImageType.IT_TIF,verify:T.DWT.EnumDWT_ImageType.IT_TIF,index:Se,metadata:le[Se],imageId:u};try{B._OnBitmapChanged(["10",""+u,1,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),ke],null,ie)}catch($e){throw T.Lib.Errors.SystemExceptionError(B,$e.message),0}return Se+1})});return we.then(function(){T.Lib.closeProgress(),he.closeTiff(),he.terminate(),T.DWT.lavrf_(1,T.DWT.EnumInstance.dwt_browser),T.Lib.isFunction(B.__OnPostLoad)&&B.__OnPostLoad("",Ge,je)},function(Se){throw T.Lib.closeProgress(),he.closeTiff(),he.terminate(),Se&&T.Lib.Errors.LoadImageFailed(B,Se),{code:B._errorCode,message:B._errorString}})},function(re){throw T.Lib.closeProgress(),he.closeTiff(),he.terminate(),T.Lib.Errors.LoadImageFailed(B,re),{code:B._errorCode,message:B._errorString}})):(e.Errors.LoadImageFailed(B,"invalid image type."),e.Promise.reject({code:B._errorCode,message:B._errorString}))},C=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3],Te=K[4];e.isUndefined(ee)&&(ee=0),e.isUndefined(ie)&&(ie=!0),(e.isUndefined(be)||be<1||be>3)&&(be=3),e.isUndefined(Te)&&(Te="FFFFFF"),ee<0?ee=ee%360+360:ee>=360&&(ee%=360),e.showMask();var Ge=v(),je=B._ImgManager.convertClientIndexToServerId(G);return Ge.context={},B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(he){return Ge.context.metadata=he&&he.metadata?he.metadata:{},Ge.initImage(he.oriData)}).then(function(){if(0!=ee)return Ge.rotate(ee,Te,ie,be)}).then(function(){return Ge.getImage()}).then(function(he){"width"in he&&(he.imageWidth=he.imageWidth),"height"in he&&(he.imageHeight=he.imageHeight);var ae={src:he.imageData,imgType:e.MobileFuns.convertOutputType(he.imageType),dataType:"url",metadata:{width:he.imageWidth,height:he.imageHeight}},V=!1;try{B._OnBitmapChanged(["10",""+je,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),ae])}catch(Q){V=!0,e.Errors.SystemExceptionError(B,Q.message)}if(e.hideMask(),Ge.terminate(),V)throw{code:B._errorCode,message:B._errorString}},function(he){throw e.Errors.RotateFailed(B,he),e.hideMask(),Ge.terminate(),{code:B._errorCode,message:B._errorString}})},A=function(B,K,G){var ee=v(),ie=B._ImgManager.convertClientIndexToServerId(K);return ee.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(K)).then(function(be){return ee.context.metadata=be&&be.metadata?be.metadata:{},ee.initImage(be.oriData)}).then(function(){return ee.flip(G)}).then(function(){return ee.getImage()}).then(function(be){var Te={src:be.imageData,imgType:e.MobileFuns.convertOutputType(be.imageType),dataType:"url"};try{B._OnBitmapChanged(["10",""+ie,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Te])}catch(Ge){throw e.Errors.SystemExceptionError(B,Ge.message),0}}).then(function(){e.hideMask(),ee.terminate()},function(be){throw e.hideMask(),be&&(-1==G?e.Errors.MirrorFailed(B,be):e.Errors.FlipFailed(B,be)),ee.terminate(),{code:B._errorCode,message:B._errorString}})},M=function(B,K){return A(B,K[0],-1)},E=function(B,K){return A(B,K[0],1)},R=function(B,K){var G=K[0],ee=v(),ie=B._ImgManager.convertClientIndexToServerId(G);return ee.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(be){return ee.context.metadata=be&&be.metadata?be.metadata:{},ee.initImage(be.oriData)}).then(function(){return ee.invert()}).then(function(){return ee.getImage()}).then(function(be){var Te={src:be.imageData,imgType:e.MobileFuns.convertOutputType(be.imageType),dataType:"url"};try{B._OnBitmapChanged(["10",""+ie,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Te])}catch(Ge){throw e.Errors.SystemExceptionError(B,Ge.message),0}}).then(function(){e.hideMask(),ee.terminate()},function(be){throw e.hideMask(),be&&e.Errors.InvertFailed(B,be),ee.terminate(),{code:B._errorCode,message:B._errorString}})},x=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3],Te=K[4];if(!(e.isNumber(ee)&&e.isNumber(ie)&&e.isNumber(be)&&e.isNumber(Te)))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(B),e.Promise.reject({code:B._errorCode,message:B._errorString});var Ge=v(),je=B._ImgManager.convertClientIndexToServerId(G);return Ge.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(he){return Ge.context.metadata=he&&he.metadata?he.metadata:{},Ge.initImage(he.oriData)}).then(function(){return Ge.crop(ee,ie,be,Te)}).then(function(){return Ge.getImage()}).then(function(he){var ae={src:he.imageData,imgType:e.MobileFuns.convertOutputType(he.imageType),dataType:"url",metadata:{imageData:he.imageData,width:he.imageWidth,height:he.imageHeight}};try{B._OnBitmapChanged(["10",""+je,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),ae])}catch(V){throw e.Errors.SystemExceptionError(B,V.message),0}}).then(function(){e.hideMask(),Ge.terminate()},function(he){throw e.hideMask(),he&&e.Errors.CropFailed(B,he),Ge.terminate(),{code:B._errorCode,message:B._errorString}})},P=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3],Te=K[4],Ge=K[5];if(!(e.isNumber(ee)&&e.isNumber(ie)&&e.isNumber(be)&&e.isNumber(Te)))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(B),e.Promise.reject({code:B._errorCode,message:B._errorString});e.isUndefined(Ge)&&(Ge="FFFFFF");var je=v(),he=B._ImgManager.convertClientIndexToServerId(G);return je.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(ae){return je.context.metadata=ae&&ae.metadata?ae.metadata:{},je.initImage(ae.oriData)}).then(function(){return je.erase(ee,ie,be,Te,Ge)}).then(function(){return je.getImage()}).then(function(ae){var V={src:ae.imageData,imgType:e.MobileFuns.convertOutputType(ae.imageType),dataType:"url",metadata:{imageData:ae.imageData,width:ae.imageWidth,height:ae.imageHeight}};try{B._OnBitmapChanged(["10",""+he,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),V])}catch(Q){throw e.Errors.SystemExceptionError(B,Q.message),0}}).then(function(){e.hideMask(),je.terminate()},function(ae){throw e.hideMask(),ae&&e.Errors.EraseFailed(B,ae),je.terminate(),{code:B._errorCode,message:B._errorString}})},F=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3];if(!e.isNumber(ee))return e.Errors.MobileServer_InvalidWidth(B),e.Promise.reject({code:B._errorCode,message:B._errorString});if(!e.isNumber(ie))return e.Errors.MobileServer_InvalidHeight(B),e.Promise.reject({code:B._errorCode,message:B._errorString});e.isUndefined(be)&&(be=5);var Te=v(),Ge=B._ImgManager.convertClientIndexToServerId(G);return Te.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(je){return Te.context.metadata=je&&je.metadata?je.metadata:{},Te.initImage(je.oriData)}).then(function(){return Te.resize(ee,ie,be)}).then(function(){return Te.getImage()}).then(function(je){var he={src:je.imageData,imgType:e.MobileFuns.convertOutputType(je.imageType),dataType:"url",metadata:{imageData:je.imageData,width:je.imageWidth,height:je.imageHeight}};try{B._OnBitmapChanged(["10",""+Ge,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),he])}catch(ae){throw e.Errors.SystemExceptionError(B,ae.message),0}}).then(function(){e.hideMask(),Te.terminate()},function(je){throw e.hideMask(),je&&e.Errors.ChangeImageSizeFailed(B,je),Te.terminate(),{code:B._errorCode,message:B._errorString}})},k=function(B,K){var G=K[0],ee=v();B._ImgManager.convertClientIndexToServerId(G),ee.context={},e.showMask();var be=B._ImgManager.getWebViewer().GetMinPageData();if(be)return ee.initImage(be.data,!0,be.width,be.height).then(function(){return ee.getSkewAngle()}).then(function(Te){return e.hideMask(),delete ee.context,ee.terminate(),Te},function(Te){throw e.hideMask(),e.Errors.SkewAngleFailed(B,Te),ee.terminate(),{code:B._errorCode,message:B._errorString}})},w=function(B,K){var G=K[0],ee=v();return B._ImgManager.convertClientIndexToServerId(G),ee.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(be){return ee.context.metadata=be&&be.metadata?be.metadata:{},ee.initImage(be.oriData)}).then(function(){return ee.getSkewAngle()}).then(function(be){return e.hideMask(),delete ee.context,ee.terminate(),be},function(be){throw e.hideMask(),e.Errors.SkewAngleFailed(B,be),ee.terminate(),{code:B._errorCode,message:B._errorString}})},S=function(B,K){var G=K[0],ee=v(),ie=B._ImgManager.convertClientIndexToServerId(G);return ee.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(be){return ee.context.metadata=be&&be.metadata?be.metadata:{},ee.initImage(be.oriData)}).then(function(){return ee.toGrayscale()}).then(function(){return ee.getImage()}).then(function(be){var Te={src:be.imageData,imgType:e.MobileFuns.convertOutputType(be.imageType),dataType:"url",metadata:{imageData:be.imageData,width:be.imageWidth,height:be.imageHeight,bitDepth:8}};try{B._OnBitmapChanged(["10",""+ie,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Te])}catch(Ge){throw e.Errors.SystemExceptionError(B,Ge.message),0}}).then(function(){e.hideMask(),ee.terminate()},function(be){throw e.hideMask(),be&&e.Errors.ConvertToGrayScaleFailed(B,be),ee.terminate(),{code:B._errorCode,message:B._errorString}})},L=function(B,K){var G=K[0],ee=v(),ie=B._ImgManager.convertClientIndexToServerId(G);return ee.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(be){return ee.context.metadata=be&&be.metadata?be.metadata:{},ee.initImage(be.oriData)}).then(function(){return ee.toBinary(!1,void 0)}).then(function(){return ee.getImage()}).then(function(be){var Te={src:be.imageData,imgType:e.MobileFuns.convertOutputType(be.imageType),dataType:"url",metadata:{imageData:be.imageData,width:be.imageWidth,height:be.imageHeight,bitDepth:1}};try{B._OnBitmapChanged(["10",""+ie,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Te])}catch(Ge){throw e.Errors.SystemExceptionError(B,Ge.message),0}}).then(function(){e.hideMask(),ee.terminate()},function(be){throw e.hideMask(),be&&e.Errors.ConvertToBWScaleFailed(B,be),ee.terminate(),{code:B._errorCode,message:B._errorString}})},U=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3],Te=K[4];if(!e.isNumber(ee))return e.Errors.MobileServer_InvalidXResolution(B),e.Promise.reject({code:B._errorCode,message:B._errorString});if(!e.isNumber(ie))return e.Errors.MobileServer_InvalidYResolution(B),e.Promise.reject({code:B._errorCode,message:B._errorString});e.isUndefined(Te)&&(Te=T.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);var he,ae,V,Ge=v(),je=B._ImgManager.convertClientIndexToServerId(G);return Ge.context={},he=B._ImgManager._UIView.GetMetaDataByIndex(G),ae=he.resolutionX,V=he.resolutionY,e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(Q){return Ge.context.metadata=Q&&Q.metadata?Q.metadata:{},Ge.initImage(Q.oriData)}).then(function(){return Ge.setDPI(ae,V,ee,ie,be,Te)}).then(function(){return Ge.getImage()}).then(function(Q){var me={src:Q.imageData,imgType:e.MobileFuns.convertOutputType(Q.imageType),dataType:"url",metadata:{imageData:Q.imageData,width:Q.imageWidth,height:Q.imageHeight,resolutionX:ee,resolutionY:ie}};try{B._OnBitmapChanged(["10",""+je,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),me])}catch(H){throw e.Errors.SystemExceptionError(B,H.message),0}}).then(function(){e.hideMask(),Ge.terminate()},function(Q){throw e.hideMask(),Q&&e.Errors.SetDPIFailed(B,Q),Ge.terminate(),{code:B._errorCode,message:B._errorString}})},Z=function(B,K){var G=K[0],ee=K[1];if(!e.isNumber(ee))return e.Errors.MobileServer_InvalidWidth(B),e.Promise.reject({code:B._errorCode,message:B._errorString});var ie=v(),be=B._ImgManager.convertClientIndexToServerId(G);return ie.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(Te){return ie.context.metadata=Te&&Te.metadata?Te.metadata:{},ie.initImage(Te.oriData)}).then(function(){return ie.setImageWidth(ee)}).then(function(){return ie.getImage()}).then(function(Te){var Ge={src:Te.imageData,imgType:e.MobileFuns.convertOutputType(Te.imageType),dataType:"url",metadata:{imageData:Te.imageData,width:Te.imageWidth,height:Te.imageHeight}};try{B._OnBitmapChanged(["10",""+be,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Ge])}catch(je){throw e.Errors.SystemExceptionError(B,je.message),0}}).then(function(){e.hideMask(),ie.terminate()},function(Te){throw e.hideMask(),Te&&e.Errors.SetImageWidthFailed(B,Te),ie.terminate(),{code:B._errorCode,message:B._errorString}})},ne=function(B,K){var G=K[0],ee=K[1],ie=K[2],be=K[3],Te=K[4],ae=!1,V=!1,Q=T.DWT.EnumDWT_ImageType;if(e.isUndefined(G))return e.Errors.MobileServer_InvalidImage(B),e.Promise.reject({code:B._errorCode,message:B._errorString});if(!e.isArray(ee))return e.Errors.MobileServer_InvalidIndex(B),e.Promise.reject({code:B._errorCode,message:B._errorString});if(e.isUndefined(ie)&&(ie="jpg"),(!e.isString(G)||""==G)&&(G="img."+ie),"png"==ie||"jpg"==ie||"bmp"==ie){B._ImgManager.convertClientIndexToServerId(j);var H,j=ee[0],q=B._jpgQuality;e.log("[Wasm]Save Image: save "+ie),1==be&&e.showMask(),H="png"==ie?Q.IT_PNG:"bmp"==ie?Q.IT_BMP:Q.IT_JPG;var re=B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(j));return(V=g()).context={},V.context.bSaveAsBinary=Te,(re=B._scaleDownThreshold<=0?re.then(function(ke){return e.log("[Wasm]Save Image: get original image data successfully."),V.saveImage(ke.oriData,H,q,V.context.bSaveAsBinary?T.Enum_ReturnType.RT_BINARY:T.Enum_ReturnType.RT_BASE64)}):(re=re.then(function(ke){e.log("[Wasm]Save Image: save to new type successfully.");var $e=ke&&ke.metadata?ke.metadata:{};return T.ImageProcWrapper.resize(ke.oriData,$e.width,$e.height,B._scaleDownThreshold)})).then(function(ke){return e.log("[Wasm]Save Image: image scale successfully."),V.saveImage(ke.imageData,H,q,V.context.bSaveAsBinary?T.Enum_ReturnType.RT_BINARY:T.Enum_ReturnType.RT_BASE64)})).then(function(ke){return 1==be&&e.hideMask(),V&&V.terminate(),ae&&ae.terminate(),e.log("[Wasm]Save Image: save image terminate."),{blobData:ke.imageData,type:ie,MD5:ke.MD5}},function(ke){throw 1==be&&e.hideMask(),e.Errors.SaveImageFailed(B,ke),e.log("[Wasm]Save Image: save image failed."),V&&V.terminate(),ae&&ae.terminate(),{code:B._errorCode,message:B._errorString}})}if("pdf"==ie){var le,de=new T.PdfWriter(f(),1),we=ee.length;de.context={},e.log("[Wasm]Save Image: save pdf"),be&&(e.showProgress(B),B._OnPercentDone(2==be?[0,-1,T.MSG.ConvertingToBlob,""]:3==be?[0,-1,T.MSG.ConvertingToBase64,""]:4==be?[0,-1,T.MSG.Encoding,""]:[0,-1,T.MSG.SavingPdf,""]));var Ae=de.initPdfSetting(B._pdfWriteSetting);for(B._scaleDownThreshold>0&&((ae=v()).context={}),de.context.cIndex=0,de.context.aryIndex=ee,de.context.bSaveAsBinary=Te,le=0;le<we;le++)Ae=Ae.then(function(){var ke=de.context.cIndex,$e=de.context.aryIndex;return e.log("[Wasm]Save Image: page "+de.context.cIndex+" start process."),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex($e[ke]))}),Ae=(Ae=B._scaleDownThreshold<=0?Ae.then(function(ke){return e.log("[Wasm]Save Image: page "+de.context.cIndex+" get image data successfully. (no scale)"),de.appendPage(ke.oriData)}):(Ae=Ae.then(function(ke){e.log("[Wasm]Save Image: page "+de.context.cIndex+" get image data successfully.");var $e=ke&&ke.metadata?ke.metadata:{};return T.ImageProcWrapper.resize(ke.oriData,$e.width,$e.height,B._scaleDownThreshold)})).then(function(ke){return e.log("[Wasm]Save Image: page "+de.context.cIndex+" scale successfully."),de.appendPage(ke.imageData)})).then(function(){var ke=de.context.cIndex,Le=de.context.aryIndex.length;if(be){var fe=ke+1;B._OnPercentDone([0,100*fe/(1*Le),fe+"/"+Le,""])}e.log("[Wasm]Save Image: page "+de.context.cIndex+" processed."),de.context.cIndex=ke+1});return Ae.then(function(){return de.writePdf(de.context.bSaveAsBinary?T.Enum_ReturnType.RT_BINARY:T.Enum_ReturnType.RT_AUTO)}).then(function(ke){return e.log("[Wasm]Save Image: save pdf successfully."),be&&e.closeProgress(),de.terminate(),ae&&ae.terminate(),{blobData:ke.pdfData,type:"pdf",MD5:ke.MD5}},function(ke){throw be&&e.closeProgress(),e.Errors.SaveImageFailed(B,ke),e.log("[Wasm]Save Image: save pdf failed."),de.terminate(),ae&&ae.terminate(),{code:B._errorCode,message:B._errorString}})}if("tiff"==ie){var Se,ye=ee.length;e.log("[Wasm]Save Image: save tiff"),(V=g()).context={},V.context.bSaveAsBinary=Te,B._scaleDownThreshold>0&&((ae=v()).context={}),be&&(V.context.bShowPercentProgress=!0,e.showProgress(B),B._OnPercentDone(2==be?[0,-1,T.MSG.ConvertingToBlob,""]:3==be?[0,-1,T.MSG.ConvertingToBase64,""]:4==be?[0,-1,T.MSG.Encoding,""]:[0,-1,T.MSG.SavingTiff,""]));var Fe=V.createTiff(),Ve=T.DWT.EnumDWT_TIFFCompressionType;for(V.context.cIndex=0,Se=c.Auto,B._tiffCompressionType==Ve.TIFF_AUTO?Se=c.Auto:B._tiffCompressionType==Ve.TIFF_FAX3||B._tiffCompressionType==Ve.TIFF_T4?Se=c.G3:B._tiffCompressionType==Ve.TIFF_FAX4||B._tiffCompressionType==Ve.TIFF_T6?Se=c.G4:B._tiffCompressionType==Ve.TIFF_LZW?Se=c.LZW:B._tiffCompressionType==Ve.TIFF_JPEG?Se=c.JPEG:B._tiffCompressionType==Ve.TIFF_PACKBITS&&(Se=c.ZIP),V.context.tiffFormat=Se,V.context.aryIndex=ee,le=0;le<ye;le++)Fe=e.MobileFuns.appendTiffPage(B,Fe,V,ae);return(Fe=Fe.then(function(){return e.log("[Wasm]Save Image: generate tiff data."),V.getTiff(V.context.bSaveAsBinary?T.Enum_ReturnType.RT_BINARY:T.Enum_ReturnType.RT_AUTO)})).then(function(ke){return e.log("[Wasm]Save Image: save tiff successfully."),V.context.bShowPercentProgress&&e.closeProgress(),V.closeTiff(),V.terminate(),ae&&ae.terminate(),{blobData:ke.imageData,type:"tiff",MD5:ke.MD5}},function(ke){throw V.context.bShowPercentProgress&&e.closeProgress(),e.Errors.SaveImageFailed(B,ke),e.log("[Wasm]Save Image: save tiff failed."),V.closeTiff(),V.terminate(),ae&&ae.terminate(),{code:B._errorCode,message:B._errorString}})}return e.Errors.InvalidImageType(B),e.Promise.reject({code:B._errorCode,message:B._errorString})},oe=function(B,K){var G;return G=K.length>0?K[0]:f(),T.WasmEnv?T.WasmEnv.getLicenseInfo(G,T.WasmEnv.licMode,T.WasmEnv.uuid).then(function(be){if(!be||!be.Detail)throw e.Errors.LicenseEmptyOrInvalid(B),{code:B._errorCode,message:B._errorString};return be},function(be){throw e.Errors.GetLicenseInfoFailed(B,be),{code:B._errorCode,message:B._errorString}}):(e.Errors.GetLicenseInfoFailed(B,"wasm not load."),e.Promise.reject({code:B._errorCode,message:B._errorString}))},ue=function(B,K){var G=K[0],ee=G;G instanceof FileList?ee=G[0]:(G instanceof Uint8ClampedArray||G instanceof ArrayBuffer||G instanceof Uint8Array)&&(ee=new Blob([G]));var ie=g();return ie.getMD5(ee).then(function(be){return ie.terminate(),be},function(be){throw e.Errors.GetMD5Failed(B,be),ie.terminate(),{code:B._errorCode,message:B._errorString}})},X=function(B,K){var G=K[0],ee=K[1],ie=v(),be=B._ImgManager.convertClientIndexToServerId(G);return ie.context={},e.showMask(),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(Te){return ie.context.metadata=Te&&Te.metadata?Te.metadata:{},ie.initImage(Te.oriData)}).then(function(){return ie.changeContrast(ee)}).then(function(){return ie.getImage()}).then(function(Te){var Ge={src:Te.imageData,imgType:e.MobileFuns.convertOutputType(Te.imageType),dataType:"url",metadata:{imageData:Te.imageData,width:Te.imageWidth,height:Te.imageHeight,bitDepth:8}};try{B._OnBitmapChanged(["10",""+be,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Ge])}catch(je){throw e.Errors.SystemExceptionError(B,je.message),0}}).then(function(){e.hideMask(),ie.terminate()},function(Te){throw e.hideMask(),Te&&e.Errors.ChangeContrastFailed(B,Te),ie.terminate(),{code:B._errorCode,message:B._errorString}})},pe=function(B,K){var G=K[0],ee=K[1],ie=v(),be=B._ImgManager.convertClientIndexToServerId(G);return ie.context={},e.showMask(),e.log("[Wasm]Change Brightness: value "+ee),B._ImgManager.getWebViewer().GetImageData(B._ImgManager.getUidByIndex(G)).then(function(Te){return e.log("[Wasm]Change Brightness: get original image data"),ie.context.metadata=Te&&Te.metadata?Te.metadata:{},ie.initImage(Te.oriData)}).then(function(){return e.log("[Wasm]Change Brightness: change brightness"),ie.changeBrightness(ee)}).then(function(){return ie.getImage()}).then(function(Te){e.log("[Wasm]Change Brightness: change brightness successfully");var Ge={src:Te.imageData,imgType:e.MobileFuns.convertOutputType(Te.imageType),dataType:"url",metadata:{imageData:Te.imageData,width:Te.imageWidth,height:Te.imageHeight,bitDepth:8}};try{B._OnBitmapChanged(["10",""+be,4,B._ImgManager.getCurrentImageIndex(),B._ImgManager.count(),Ge])}catch(je){throw e.Errors.SystemExceptionError(B,je.message),0}}).then(function(){e.hideMask(),ie.terminate()},function(Te){throw e.hideMask(),Te&&e.Errors.ChangeBrightnessFailed(B,Te),ie.terminate(),{code:B._errorCode,message:B._errorString}})};o._saveImageCallback=function(B){var G,ee,ie,K=this;if(!e.isArray(B))return e.Errors.InvalidSourceFile(K),e.Promise.reject({code:K._errorCode,message:K._errorString});for(e.log("[Wasm]camera callback: save image"),G=e.Promise.resolve({aryData:B,curIndex:0,count:ie=B.length}),ee=0;ee<ie;ee++)G=(G=G.then(function(be){var Te,Ge;if(Te=be.aryData[be.curIndex],B&&Te){var he=Te.iImageData;if(he instanceof Blob||he instanceof ArrayBuffer)return be.captureBlob=he,be;Ge=he.imageData}return Ge instanceof Blob||Ge instanceof ArrayBuffer?(be.captureBlob=Ge,be):(T.Lib.Errors.InvalidSourceFile(K),e.log("[Wasm]camera callback: save image error - page "+be.curIndex+" source invalid."),T.Lib.Promise.reject({code:K._errorCode,message:K._errorString}))})).then(function(be){var Te,Ge;return Te=be.aryData[be.curIndex],B&&Te&&(Ge=Te.file),e.log("[Wasm]camera callback: save image - page "+be.curIndex+" data ready"),new T.Lib.Promise(function(je,he){var ae=be.captureBlob,V=-1,Q=T.DWT.EnumDWT_ImageType;if(K._bLocalService)T.Lib.isString(ae.type)&&("application/pdf"==ae.type?V=Q.IT_PDF:"image/png"==ae.type?V=Q.IT_PNG:"image/jpeg"==ae.type||"image/jpg"==ae.type?V=Q.IT_JPG:"image/bmp"==ae.type?V=Q.IT_BMP:"image/tiff"==ae.type||"image/tif"==ae.type?V=Q.IT_TIF:"image/jp2"==ae.type&&(V=Q.IT_J2K)),K.__captureImage(ae,V,function(){e.log("[Wasm]camera callback: save image - page "+be.curIndex+" data saved from service"),be.curIndex=be.curIndex+1,be.captureBlob=null,je(be)},function(H,j){he({code:H,message:j})});else{var me=K.GetCurrentFileName();""==me&&(me=K._ImgManager.getWebViewer().GetDefaultFileName()),K._innerSendToMobile("LoadImageFromBinary",[ae,!0,Ge,me,!0],0,function(){e.log("[Wasm]camera callback: save image - page "+be.curIndex+" data saved"),be.curIndex=be.curIndex+1,be.captureBlob=null,je(be)},function(H,j){he({code:H,message:j})})}})});return G},s._areaDetectCallback=function(B,K,G,ee,ie,be){var Te;return be?Te=v():(h||(h=new T.ImageProc(f(),1)),Te=h),e.log("[Wasm]camera callback: area detect"),Te.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(Ge){return e.log("[Wasm]camera callback: image is ready"),Te.src=Ge.srcBuffer,Te.detectDocument(ie,K,G,ee)}).then(function(Ge){return e.log("[Wasm]camera callback: area detect successfully"),Ge.src=Te.src,be&&Te.terminate(),Te.src=null,Ge},function(Ge){e.closeLoadingMsg(),e.log("[Wasm]camera callback: area detect failed"),be&&Te.terminate();var je={};throw Ge&&Ge.code&&Ge.message?(je._errorString=Ge.message,je._errorCode=Ge.code):(je._errorString=Ge,e.Errors.DetectCallbackErr(je)),{code:je._errorCode,message:je._errorString}})},s._perspectiveCallback=function(B,K){var G=v();if(e.log("[Wasm]camera callback: perspective"),!e.isArray(K)||8!=K.length){var ee={};return e.Errors.InvalidParameterInCallback(ee),e.Promise.reject({code:ee._errorCode,message:ee._errorString})}return G.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ie){return e.log("[Wasm]camera callback: image is ready"),G.src=ie.srcBuffer,G.perspective(K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7])}).then(function(){var ie;return e.log("[Wasm]camera callback: perspective successfully"),G.getImage(85,!0,!1,ie,ie,ie,!0,T.Enum_ImageType.IT_JPG)}).then(function(ie){e.log("[Wasm]camera callback: filter process successfully");var be=G.src;return G.terminate(),G.src=null,{src:be,result:ie}},function(ie){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),G.terminate();var be={};throw ie&&ie.code&&ie.message?(be._errorString=ie.message,be._errorCode=ie.code):(be._errorString=ie,e.Errors.PerspectiveCallback(be)),{code:be._errorCode,message:be._errorString}})},s._convertToGrayScaleFilterCallback=function(B,K){var G=v();return e.log("[Wasm]camera callback: convert to gray scale filter"),G.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ee){var ie;return e.log("[Wasm]camera callback: image is ready"),G.src=ee.srcBuffer,K&&(ie=K.level),G.toGrayscale(ie)}).then(function(){e.log("[Wasm]camera callback: gray scale successfully");var ie=void 0;return B.bitDepth<=8&&(ie=B.imageBitDepth),G.getImage(85,!0,!1,ie,B.imageXResolution,B.imageYResolution,!0,T.Enum_ImageType.IT_JPG)}).then(function(ee){e.log("[Wasm]camera callback: filter process successfully");var ie=G.src;return G.terminate(),G.src=null,{src:ie,result:ee}},function(ee){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),G.terminate();var ie={};throw e.Errors.ConvertToGrayScaleFilterCallbackErr(ie,ee),{code:ie._errorCode,message:ie._errorString}})},s._saveTonerFilterCallback=function(B,K){return s._convertToBWScaleFilterCallback(B,K,!0)},s._convertToBWScaleFilterCallback=function(B,K,G){var ee=v();return e.log(G?"[Wasm]camera callback: save toner filter":"[Wasm]camera callback: convert to BW scale filter"),ee.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ie){var be;return e.log("[Wasm]camera callback: image is ready"),ee.src=ie.srcBuffer,K&&(be=K.level),ee.toBinary(!!G,be)}).then(function(){return ee.getImage(85,!0,!1,1,B.imageXResolution,B.imageYResolution,!0,T.Enum_ImageType.IT_PNG)}).then(function(ie){e.log("[Wasm]camera callback: filter process successfully");var be=ee.src;return ee.terminate(),ee.src=null,{src:be,result:ie}},function(ie){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),ee.terminate();var be={};throw G?e.Errors.SaveTonerCallbackErr(be,ie):e.Errors.ConvertToBWScaleFilterCallbackErr(be,ie),{code:be._errorCode,message:be._errorString}})},s._cleanFilterCallback=function(B,K){var G=v();return e.log("[Wasm]camera callback: remove shadow filter"),G.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ee){var ie,be;return e.log("[Wasm]camera callback: image is ready"),K&&(ie=K.level,be=K.alpha),G.src=ee.srcBuffer,G.removeShadow(ie,be)}).then(function(){var ee;return G.getImage(85,!0,!1,ee,ee,ee,!0,T.Enum_ImageType.IT_JPG)}).then(function(ee){e.log("[Wasm]camera callback: remove shadow successfully");var ie=G.src;return G.terminate(),G.src=null,{src:ie,result:ee}},function(ee){e.log("[Wasm]camera callback: remove shadow failed"),e.closeLoadingMsg(),G.terminate();var ie={};throw e.Errors.RemoveShadowFilterCallbackErr(ie,ee),{code:ie._errorCode,message:ie._errorString}})},s._enhanceAndSharpenFilterCallback=function(B,K){var G=v();return e.log("[Wasm]camera callback: enhance and sharpen filter"),G.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ee){var ie;return e.log("[Wasm]camera callback: image is ready"),G.src=ee.srcBuffer,K&&(ie=K.level),G.enhanceAndSharpenImage(ie)}).then(function(){var ee;return G.getImage(85,!0,!1,ee,ee,ee,!0,T.Enum_ImageType.IT_JPG)}).then(function(ee){e.log("[Wasm]camera callback: enhance and sharpen successfully");var ie=G.src;return G.terminate(),G.src=null,{src:ie,result:ee}},function(ee){e.log("[Wasm]camera callback: enhance and sharpen failed"),e.closeLoadingMsg(),G.terminate();var ie={};throw e.Errors.EnhanceAndSharpenFilterCallbackErr(ie,ee),{code:ie._errorCode,message:ie._errorString}})},s._brightenFilterCallback=function(B,K){var G=v();return e.log("[Wasm]camera callback: brighten filter"),G.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(ee){var ie;return e.log("[Wasm]camera callback: image is ready"),G.src=ee.srcBuffer,K&&(ie=K.level),G.brighten(ie)}).then(function(){var ee;return G.getImage(85,!0,!1,ee,ee,ee,!0,T.Enum_ImageType.IT_JPG)}).then(function(ee){e.log("[Wasm]camera callback: brighten successfully");var ie=G.src;return G.terminate(),G.src=null,{src:ie,result:ee}},function(ee){e.log("[Wasm]camera callback: brighten failed"),e.closeLoadingMsg(),G.terminate();var ie={};throw e.Errors.BrightenFilterCallbackErr(ie,ee),{code:ie._errorCode,message:ie._errorString}})},s._getBlurryScore=function(B){var K=v();return e.log("[Wasm]camera callback: get blurry score filter"),K.initImage(B.imageData,B.rgba,B.imageWidth,B.imageHeight,B.bgra).then(function(G){return e.log("[Wasm]camera callback: image is ready"),K.src=G.srcBuffer,K.getBlurryScore()}).then(function(G){e.log("[Wasm]camera callback: get blurry score successfully");var ee=K.src;return K.terminate(),K.src=null,{src:ee,result:G>=100}},function(G){e.log("[Wasm]camera callback: get blurry score failed"),e.closeLoadingMsg(),K.terminate();var ee={};throw e.Errors.GetBlurryScoreErr(ee,G),{code:ee._errorCode,message:ee._errorString}})},s._imageDataToBlob=function(B,K,G,ee,ie,be){e.log("[Wasm]ImageDataToBlob: init image");var Te={source:{},output:{}};return e.mix(Te.source,B),K&&(K<0?K=K%360+360:K>=360&&(K%=360),0!=K&&(Te.source.angle=K)),G&&(Te.polygon=G),ee&&G&&G.points&&(Te.doPerspective=!0),!1!==ie&&(Te.output.orgImage=e.isObject(ie)?ie:{quality:85,returnType:T.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==be&&(Te.output.previewImage=e.isObject(be)?be:{quality:85,width:200,height:200,returnType:T.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),T.ImageProcWrapper.createImage(Te)},s._freeCallback=function(){h&&(h.terminate(),h=null)},o._checkWebcamWasmLicense=function(){return e.License.checkProductKey(this,{Webcam:!0},!0)&&e.License.checkProductKey(this,{Webcam:!0,Wasm:!0},!0)?{errorCode:0}:T.DWT.licenseException},o.GetImageDataAsync=function(B){var G,K=this;return K.Viewer&&K.Viewer._webViewer&&(G=K.Viewer._webViewer.GetUidByIndex(B)),G?K.Viewer._webViewer.GetImageData(G):Promise.resolve(null)},o.SetCustomDataAsync=function(B,K){var ee,G=this;return G.Viewer&&G.Viewer._webViewer&&(ee=G.Viewer._webViewer.GetUidByIndex(B)),ee&&K?G.Viewer._webViewer.GetImageData(ee).then(function(ie){return ie.customData=K,G.Viewer._webViewer.UpdateImageData(ee,ie)}):Promise.resolve(!1)}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.navInfo,n=e.html5.Funs,a=!0,s=!1,u=n.DEF,h=n.DEF_NOT_SUPPORT_MOBILE,g=function(y,_,C){2==C&&e.each(_,function(A,M){u(y,A,{get:function(){return y._resetErr(),y._isValid()?a:s},set:function(E){return y._resetErr(),y._isValid()?a:s}})})},v=function(y,_){e.each(_,function(C,A){u(y,C,1,2)})},p=function(y,_){e.each(_,function(C,A){u(y,C,1,1)})},m=function(y,_){e.each(_,function(C,A){u(y,C,0)})},I=function(y,_){e.each(_,function(C,A){u(y,C,1)})};e.DynamicLoadAddonFuns=[],e.attachAddon=function(y){e.each(e.DynamicLoadAddonFuns,function(_){e.isFunction(_)&&_(y)})},e.attachProperty=function(y){var _=y;u(_,"ErrorCode",{get:function(){return _._errorCode}}),u(_,"ErrorString",{get:function(){return-2207==_._errorCode&&_.__bMustUpgradeService&&e.Errors.MustUpgradeService(_),0!=_._errorCode?_._errorString:"Successful."}}),u(_,"ProductKey",{get:function(){return T.DWT.ProductKey},set:function(x){return e.isString(x)?(_._resetErr(),!!_._isValid()&&_._setProductKey(x,!1)):(e.Errors.InvalidValue(_),s)}}),u(_,"ProductName",{get:function(){return _.__strProductName},set:function(x){return _._resetErr(),e.isString(x)?(_.__strProductName=x,a):(e.Errors.InvalidValue(_),s)}}),u(_,"VersionInfo",{get:function(){return _.__versionInfo}}),_._isMobileMode()?h(_,"DefaultSourceName",0):u(_,"DefaultSourceName",{get:function(){if(_._resetErr(),!_._isValid())return!1;e.isUndefined(_.__currentImageCaptureDriverType)&&(_.__currentImageCaptureDriverType=0);var F,x="",P=0,k=_._innerFun("GetDefaultSourceName",n.makeParams(_._driverType));return k.length>0&&(P=(F=JSON.parse(k)).type,x=T.Lib.base64.decode(F.ProductName)),4==_._driverType?P==T.DWT.EnumDWT_Driver.TWAIN64&&x.length>0?"Twain64-"+x:P==T.DWT.EnumDWT_Driver.ICA&&_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&x.length>0?"ICA-"+x:x:_.__currentImageCaptureDriverType==T.DWT.EnumDWT_Driver.TWAIN64?x.length>0&&P==T.DWT.EnumDWT_Driver.TWAIN64?"Twain64-"+x:x:_.__currentImageCaptureDriverType==T.DWT.EnumDWT_Driver.ICA&&x.length>0&&_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac?"ICA-"+x:x}}),_._isMobileMode()?h(_,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"]):(u(_,"IfShowCancelDialogWhenImageTransfer",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfShowCancelDialogWhenImageTransfer},set:function(x){return e.isBoolean(x)?(_._resetErr(),!!_._isValid()&&(_.__IfShowCancelDialogWhenImageTransfer=x)):(e.Errors.InvalidValue(_),s)}}),u(_,"ImageCaptureDriverType",{get:function(){return _._resetErr(),_._isValid()?_._driverType:0},set:function(x){var F=!1,k=!1,w=!1;if(_._bRemoteMode?_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?w=!0:_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux?k=!0:_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(F=!0):(F=i.bMac,k=i.bLinux,w=i.bWin),_._resetErr(),!_._isValid())return!1;if(""!==x){var S=1*x;if(S<T.DWT.EnumDWT_Driver.TWAIN||S>T.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),s;if(w){if(S===T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(T.dcp.b64bit)return _._driverType=S,_.__icaSourceCount=-1,_._innerFun("SetImageCaptureDriverType",n.makeParams(T.DWT.EnumDWT_Driver.TWAIN,_._driverType))}else if(S!=T.DWT.EnumDWT_Driver.TWAIN&&S!=T.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),s;T.dcp.b64bit||(S=T.DWT.EnumDWT_Driver.TWAIN),_._driverType=S,_.__currentImageCaptureDriverType=S}else{if(k)return _._driverType=S=T.DWT.EnumDWT_Driver.SANE,_.__currentImageCaptureDriverType=S,S===T.DWT.EnumDWT_Driver.SANE?a:(e.Errors.ImageCaptureDriverTypeError(_),s);if(F){if(S===T.DWT.EnumDWT_Driver.TWAIN_AND_ICA)return _._driverType=S,_.__icaSourceCount=-1,a;if(S!=T.DWT.EnumDWT_Driver.ICA&&S!=T.DWT.EnumDWT_Driver.TWAIN&&S!=T.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),s;_._driverType=S,_.__currentImageCaptureDriverType=S}}_.__icaSourceCount=0,_.CloseSourceManager();var L=_._innerFun("SetImageCaptureDriverType",n.makeParams(S,_._driverType));return _.OpenSourceManager(),L}return e.Errors.ImageCaptureDriverTypeError(_),s}})),_._isMobileMode()?h(_,"SourceCount",0):u(_,"SourceCount",{get:function(){var x,P,F,k,w,S,U,Z,ne,L=[],X=!1,B=!1;if(_._bRemoteMode?_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?B=!0:_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux||_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(X=!0):(X=i.bMac,B=i.bWin),_._resetErr(),!_._isValid())return!1;if(_._resetSources(),_.__icaSourceCount=0,X&&_._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_ICA){for(P=[],U=_._getSourceNamesSyncV2(T.DWT.EnumDWT_Driver.ICA),S=0;S<U.length;S++)e.isString(k=U[S].ProductName)&&""!==(k=e.trim(k))&&(1==U[S].IsDefaultSource&&(F=k),L.push("ICA"===U[S].DriverType?"ICA-"+k:k),P.push(U[S]));for(void 0===F&&U.length>0&&e.isString(k=U[0].ProductName)&&""!==(k=e.trim(k))&&(F="ICA"===U[0].DriverType?"ICA-"+k:k),ne=_._getSourceNamesSyncV2(T.DWT.EnumDWT_Driver.TWAIN),S=0;S<ne.length;S++)e.isString(k=ne[S].ProductName)&&""!==(k=e.trim(k))&&(1==ne[S].IsDefaultSource&&(F=k),L.push("ICA"===ne[S].DriverType?"ICA-"+k:k),P.push(ne[S]));void 0===F&&ne.length>0&&e.isString(k=ne[0].ProductName)&&""!==(k=e.trim(k))&&(F="ICA"===ne[0].DriverType?"ICA-"+k:k),x=P.length,_.__defaultSourceName=F,_.__icaSourceCount=U.length,_.__sourceCount=x,_.__sourceName=L,_.__sourceDetails=P}else if(B&&T.dcp.b64bit&&_._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){for(P=[],ne=_._getSourceNamesSyncV2(T.DWT.EnumDWT_Driver.TWAIN),S=0;S<ne.length;S++)e.isString(k=ne[S].ProductName)&&""!==(k=e.trim(k))&&(1==ne[S].IsDefaultSource&&(F=k),L.push(k),P.push(ne[S]));if(void 0===F&&ne.length>0&&e.isString(k=ne[0].ProductName)&&""!==(k=e.trim(k))&&(F=k),T.dcp.b64bit){for(Z=_._getSourceNamesSyncV2(T.DWT.EnumDWT_Driver.TWAIN64),S=0;S<Z.length;S++)e.isString(k=Z[S].ProductName)&&""!==(k=e.trim(k))&&(1==Z[S].IsDefaultSource&&(F=k),L.push("TWAIN(64Bit)"===Z[S].DriverType?"Twain64-"+k:k),P.push(Z[S]));void 0===F&&Z.length>0&&e.isString(k=Z[0].ProductName)&&""!==(k=e.trim(k))&&(F="TWAIN(64Bit)"===Z[0].DriverType?"Twain64-"+k:k)}else Z=[];x=P.length,_.__defaultSourceName=F,_.__icaSourceCount=ne.length,_.__sourceCount=x,_.__sourceName=L,_.__sourceDetails=P}else{if(w=_._getSourceNamesSyncV2(),_.__defaultSourceName="",w&&w.length>=1){for(S=0;S<w.length;S++)e.isString(k=w[S].ProductName)&&""!==(k=e.trim(k))&&(1==w[S].IsDefaultSource&&(F=k),L.push(k));e.isString(F)?_.__defaultSourceName=F:e.isString(k=w[0].ProductName)&&""!==(k=e.trim(k))&&(_.__defaultSourceName="ICA"===w[0].DriverType?"ICA-"+k:k)}else w=[],L=[];_.__sourceCount=x=w.length,_._driverType===T.DWT.EnumDWT_Driver.ICA&&X&&x>0&&(e.each(L,function(K,G){if(e.isString(K)){var ee=e.trim(K);""!==ee&&(L[G]="ICA-"+ee)}}),""!==_.__defaultSourceName&&(_.__defaultSourceName="ICA-"+_.__defaultSourceName)),_.__sourceName=L,_.__sourceDetails=w}return x<=0?(P=[],L=[],_.__sourceName=[],_.__sourceDetails=[],_.__defaultSourceName="",_.__sourceCount=0,0):x}}),u(_,"HowManyImagesInBuffer",{get:function(){return _._isValid()?_._ImgManager.count():0}}),u(_,"HTTPPostResponseString",{get:function(){return _._resetErr(),_._isValid()&&_.__HTTPPostResponseString?_.__HTTPPostResponseString:""}}),u(_,"IfAppendImage",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfAppendImage},set:function(x){return _._resetErr(),!!_._isValid()&&(e.isBoolean(x)?_.__IfAppendImage=x:(e.Errors.InvalidValue(_),s))}}),_._isMobileMode()?h(_,["FTPPort","IfShowProgressBar","IfAppendImage"]):(u(_,"FTPPort",{get:function(){return _._resetErr(),_._isValid()?_._innerFun("FTPPort"):0},set:function(x){return _._resetErr(),!!_._isValid()&&(""!==x?_._innerFun("FTPPort",n.makeParams(1*x)):void 0)}}),u(_,"IfShowProgressBar",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfShowProgressBar},set:function(x){return _._resetErr(),!!_._isValid()&&(e.isBoolean(x)?_.__IfShowProgressBar=x:(e.Errors.InvalidValue(_),s))}})),_._isMobileMode()?u(_,"JPEGQuality",{get:function(){return _._resetErr(),!!_._isValid()&&_._jpgQuality},set:function(x){var P=1*x;return P>=100?P=100:P<0&&(P=0),_._resetErr(),!!_._isValid()&&(_._jpgQuality=P,!0)}}):u(_,"JPEGQuality",{get:function(){return _._resetErr(),_._isValid()?_._innerFun("JPEGQuality"):0},set:function(x){var P=1*x;return P>=100?P=100:P<0&&(P=0),_._resetErr(),!!_._isValid()&&_._innerFun("JPEGQuality",n.makeParams(P))}}),_._isMobileMode()?u(_,"TIFFCompressionType",{get:function(){return _._resetErr(),_._isValid()?_._tiffCompressionType:0},set:function(x){return _._resetErr(),!!_._isValid()&&(_._tiffCompressionType=x,!0)}}):u(_,"TIFFCompressionType",1,1),_._isMobileMode()?u(_,"BufferMemoryLimit",{get:function(){return _._resetErr(),_._isValid(),0},set:function(x){return _._resetErr(),_._isValid(),!1}}):u(_,"BufferMemoryLimit",1,1),_._isMobileMode()?u(_,"LogLevel",{get:function(){return _._resetErr(),_._isValid()?_._logLevel:0},set:function(x){if(_._resetErr(),!_._isValid())return!1;var P=1*x;return P>=14?P=14:P<0&&(P=0),T.WasmEnv&&T.WasmEnv.setLoglevel(_._logLevel),_._logLevel=P,!0}}):u(_,"LogLevel",1,1),u(_,"HttpContentTypeFieldValue",{get:function(){return _._resetErr(),_._isValid()?_.__strHttpContentTypeFieldValue:""},set:function(x){return _._resetErr(),!!_._isValid()&&(_.__strHttpContentTypeFieldValue=x,x)}}),u(_,"BrokerProcessType",{get:function(){return _._resetErr(),_._isValid()?1:0},set:function(x){return _._resetErr(),!!_._isValid()}}),u(_,"BorderStyle",{get:function(){return _._resetErr(),!!_._isValid()&&0},set:function(x){return _._resetErr(),_._isValid(),!1}}),u(_,"HttpFieldNameOfUploadedImage",{get:function(){return _._resetErr(),!!_._isValid()&&_.__remoteFilename},set:function(x){return _._resetErr(),!!_._isValid()&&(_.__remoteFilename=x)}}),u(_,"style",{get:function(){return _._isValid()?_.__style:""}}),u(_,"Addon",{get:function(){return _.__addon}}),u(_,"HTTPRequestswithCredentials",{get:function(){return _._resetErr(),!!_._isValid()&&_.__withCredentials},set:function(x){return _._resetErr(),!!_._isValid()&&(_.__withCredentials=x)}}),u(_,"ScaleDownThreshold",{get:function(){return _._resetErr(),_._isValid()?_._scaleDownThreshold:0},set:function(x){return _._resetErr(),!!_._isValid()&&(_._scaleDownThreshold=x)}}),u(_,"CurrentImageIndexInBuffer",{get:function(){return _._isValid()?_._ImgManager.getCurrentImageIndex():0},set:function(x){var P=1*x;return _._resetErr(),!!_._isValid()&&(P>=0&&P<_._ImgManager.count()&&(_._ImgManager.Go(P),_._isBindViewer()&&n.__innerRefreshFromUIView(_,_._ImgManager.getCurrentImageIndex())),!0)}}),u(_,"SelectedImagesIndices",{get:function(){return _._resetErr(),_._isValid()?_._ImgManager.count()<=0?[]:_._ImgManager.getSelectedClientIndexArray():[]}}),u(_,"MaxImagesInBuffer",{get:function(){return _._resetErr(),_._isValid()?_.__maxImagesInBuffer:0},set:function(x){var P=1*x;return _._resetErr(),!!_._isValid()&&(P>0&&P<32768?_.__maxImagesInBuffer=P:e.Errors.OutOfRange(_),_.__maxImagesInBuffer)}}),u(_,"MaxUploadImageSize",{get:function(){return _._resetErr(),!!_._isValid()&&_.__maxUploadImageSize},set:function(x){var P=1*x;return _._resetErr(),!!_._isValid()&&(_.__maxUploadImageSize=P,_._isMobileMode()||_._innerFun("MaxUploadImageSize",n.makeParams(P)),_.__maxUploadImageSize)}}),u(_,"IfSSL",{get:function(){return _._ifSSL},set:function(x){return _._ifSSL=x,_._isMobileMode()||_._innerFun("IfSSL",n.makeParams(x)),!0}}),_._isMobileMode()?u(_,"IfAllowLocalCache",{get:function(){return!1},set:function(x){return!1}}):u(_,"IfAllowLocalCache",1,2),u(_,"UseLocalService",{get:function(){return!_._isMobileMode()}}),u(_,"PDFCompressionType",{get:function(){return _._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("PDFCompressionType"):_._innerFun("PDFCompressionType"))},set:function(x){var P=1*x;return P==T.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(P=T.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),_._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("PDFCompressionType"):_._innerFun("PDFCompressionType",n.makeParams(P)))}}),_._getPdfDllname=function(){var P=!1,F=!1;return _._bRemoteMode?_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow||(_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux?F=!0:_.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(P=!0)):(P=i.bMac,F=i.bLinux),P?T.dcp.b64bit?"libDynamicPdfCorex64_"+T.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+T.DWT.PdfVersion+".dylib":F?"libDynamicPdfCore_"+T.DWT.PdfVersion+".so":T.dcp.b64bit?"DynamicPdfCorex64_"+T.DWT.PdfVersion+".dll":"DynamicPdfCore_"+T.DWT.PdfVersion+".dll"},_._setConvertModeInner=function(x){if(!e.License.checkProductKey(_,{Core:!0}))return!1;var P=1*x;return _._resetErr(),!(!_._isValid()||(isNaN(P)?(e.Errors.ParameterCannotEmpty(_),1):1!=P&&2!=P&&3!=P&&4!=P?(e.Errors.InvalidValue(_),1):(_._pdfConvertMode=P,_._pdfRealConvertMode=2==P||e.License.hasPDFRProductKey(_)?P:2,0)))},_._setConvertMode=function(x){if(!_._setConvertModeInner(x))return!1;if(!_._isMobileMode()){var L=_._getPdfDllname();_._innerFun("SetPDFConvertMode",n.makeParams(_._pdfRealConvertMode,L))}return!(2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode)||(e.Errors.LicenseNoPDF(_),!1)},_._setConvertModeAsync=function(x){var S=_._setConvertModeInner(x);if(e.Promise.resolve(!0),!S)return e.Promise.reject({code:_._errorCode,message:_._errorString});if(!_._isMobileMode()){var U=_._getPdfDllname();return _._innerFunV2("SetPDFConvertMode",n.makeParams(_._pdfRealConvertMode,U)).then(function(){if(2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode)throw e.Errors.LicenseNoPDF(_),{code:_._errorCode,message:_._errorString};return!0})}return 2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode?(e.Errors.LicenseNoPDF(_),e.Promise.reject({code:_._errorCode,message:_._errorString})):e.Promise.resolve(!0)},_._setProductKey=function(x,P,F,k){var w=!0,S=x,L=T.DWT,U=function(Z){Z||(_.__licenseInfo=!1);var ne=!0;return k||(ne=e.License.checkProductKey(_,{Core:!0})),e.isFunction(F)&&F(),ne};if(_._resetErr(),!_._isValid())return!1;if((!e.isString(S)||"******"==S)&&(S=""),L.ProductKey=S,""==S)w=!1,U();else{if(_._isMobileMode())return e.showProgressMsg(-1,"",T.MSG.Init_GetLicenseInfoForDWT),_.GetLicenseInfo(function(Z){T.WasmEnv&&T.WasmEnv.setLoglevel(_._logLevel),_._setConvertMode(_._pdfConvertMode),_._resetErr(),U(!0)},U),!0;_._innerFunRaw("ProductKey",n.makeParams(S),P,!1,!1,function(Z){var ne;ne=e.isArray(Z)?Z[0]:Z,e.isArray(Z)&&Z.length>=3&&"1"===Z[1]&&e.isFunction(T.DWT.ShowMessage)&&T.DWT.ShowMessage(Z[2],{width:510,height:272,headerStyle:1,seconds:10}),P||(w=ne),e.showProgressMsg(-1,"",T.MSG.Init_GetLicenseInfoForDWT),_.GetLicenseInfo(function(){_._setConvertMode(_._pdfConvertMode),U(!0)},U)},function(){P||(w=!1),U()})}return w},I(_,["ProxyServer"]);var C=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"];_._isMobileMode()?h(_,C):I(_,C),m(_,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]);var A=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"];_._isMobileMode()?h(_,A,0):m(_,A),v(_,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]);var M=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"];_._isMobileMode()?h(_,M):v(_,M),p(_,["MaxInternetTransferThreads"]);var E=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"];_._isMobileMode()?h(_,E):p(_,E),g(_,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2);var R=["IfOpenImageWithGDIPlus"];_._isMobileMode()?h(_,R):g(_,R)},e.attachPropertyUI||(e.attachPropertyUI=function(){})}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.navInfoSync,a=e.html5.STwain.prototype,s=e.html5.Funs;a.__innerLoadImage=function(o,l,d,c,u,h,f){var g=this;if(!e.License.checkProductKey(g,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(g,d))return e.isFunction(f)&&f(g._errorCode,g._errorString),!1;if(e.isFunction(h))return g.__innerAcquireImage(o,l,c,h,f);var v=g.GetCurrentFileName();return""==v&&(v=g._ImgManager.getWebViewer().GetDefaultFileName()),g.__innerLoadImageFun(o,l,u,v)},a.__innerLoadImageFun=function(o,l,d,c){var h,u=this,f=!0;if(s.isHttpServerInvalid(u))return!1;if(h=u._innerFunRaw(o,l,!1,!1,!0),u.__bOpenFileNow=!1,e.isArray(h.result)&&h.result.length>0){var g="",v=[];if(d){var p=h.result[0];e.isObject(p)?(g=p.ids,v=p.metaData):-1==p&&("LoadImage"==o||"FTPDownload"==o)&&(f=!1)}else g=h.result.join(",");if(e.isArray(v)||(v=[]),u._OnBitmapChanged(["c2",g,1,u._ImgManager.getCurrentImageIndex(),u._ImgManager.count(),v],null,c),f)return e.License.isLTS()&&T.DWT.lcvrf(u),!0}return T.Lib.Errors.bImageOnlyError_NotPurelyPDF(u._errorCode)&&T.Lib.Errors.LicenseNoPDF(u),!1},a.__closeRemoteScanUI=function(o){var l=this;if(l._acquireDivEL){var d=e.one(".ds-img-screen");l._acquireDivEL.evtFun?(d&&d.length>0&&e.removeEventListener(d[0],"mouseup",l._acquireDivEL.evtFun),l._acquireDivEL.evtFun=null):d&&d.length>0&&e.removeEventListener(d[0],"mouseup"),d&&d.length>0&&(d[0].src=""),o&&(document.body.removeChild(l._acquireDivEL),l._acquireDivEL=null)}},a.__innerAcquireImage=function(o,l,d,c,u){var h=this,f="LoadImage"==o||"LoadImageEx"==o||"GenerateURLForUploadData"==o,g=f||"LoadDibFromClipboard"==o,v=function(p){h.__bLoadingImage=!1,h.__bAcquireImageNow=!1,h.__bOpenFileNow=!1;var m=h._ImgManager.getCurrentImageIndex();return m>=0&&h.OnRefreshUI(m),T.Lib.Errors.bImageOnlyError_NotPurelyPDF(h._errorCode)&&T.Lib.Errors.LicenseNoPDF(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),f?T.Lib.closeProgress(o):s.hideMask(o),p&&T.Lib.log(p),h.__closeRemoteScanUI(!0),!1};return s.isServerInvalid(h)?(v(),!1):(f?T.Lib.showProgress(h,o,!1):s.showMask(o),h._innerSend(o,l,!0,function(){if(h.__bLoadingImage=!1,h.__bOpenFileNow=!1,f){if(T.Lib.closeProgress(o),h._isBindViewer()){var p=h._ImgManager.getCurrentImageIndex();p>=0&&h.OnRefreshUI(p)}}else s.hideMask(o);e.isFunction(c)&&c(),h.__closeRemoteScanUI(!0),g&&e.License.isLTS()&&T.DWT.lcvrf(h)},v),!0)},a.__innerSaveImage=function(o,l,d,c){return this._OnPercentDone([0,-1,T.MSG.Encoding]),this.__innerProgressFunction(o,l,!1,d,c)},a.__innerFTPDownloadDirectly=function(o,l,d,c,u){var h=this;return e.License.checkProductKey(h,{Core:!0})&&e.License.checkPDFProductKeyWhenNeeds(h,d)?(e.cancelFrome=4,h.__innerProgressFunction(o,l,!0,c,u)):(e.isFunction(u)&&u(h._errorCode,h._errorString),!1)},a.__innerFTPDownload=function(o,l,d,c,u){var f,h=this;if(!e.License.checkProductKey(h,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(h,d))return e.isFunction(u)&&u(h._errorCode,h._errorString),!1;if(e.cancelFrome=4,e.isFunction(u))return h.__innerProgressFunction(o,l,!0,function(){var m=h._ImgManager.getCurrentImageIndex();m>=0&&h.OnRefreshUI(m),e.License.isLTS()&&T.DWT.lcvrf(h),e.isFunction(c)&&c()},u);var v=h.GetCurrentFileName();""==v&&(v=h._ImgManager.getWebViewer().GetDefaultFileName()),(f=h.__innerLoadImageFun(o,l,1,v))&&e.License.isLTS()&&T.DWT.lcvrf(h);var p=h._ImgManager.getCurrentImageIndex();return p>=0&&h.OnRefreshUI(p),f},a.__innerFTPUpload=function(o,l,d,c){return T.Lib.cancelFrome=3,this.__innerProgressFunction(o,l,!0,d,c)},a.__innerProgressFunction=function(o,l,d,c,u){var h=this;return e.isFunction(u)?(T.Lib.showProgress(h,o,d),this._innerSend(o,l,!0,function(){T.Lib.closeProgress(o),e.isFunction(c)&&c()},function(g){return e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),T.Lib.closeProgress(o),g&&T.Lib.log(g),!0})):this._innerFun(o,l)},a.__innerGetBarcodeResultAsyncFunction=function(o){var l=T.Lib.NewBarcodeResult();return o&&(l._errorCode=o.exception,l._errorString=o.description,l._resultlist=o.result,l._Count=o.result.length),l},a.__innerGetOCRResultAsyncFunction=function(o){var l=T.Lib.NewOCRResult(this);return o&&(l._errorCode=o.exception,l._errorString=o.description,l._resultlist=o.result),l},a._innerSendCmd=function(o,l){if(s.isHttpServerInvalid(this))return!1;this._innerFunRaw(o,l,!0,!1,!0)},a._innerFun=function(o,l){var c;return!s.isHttpServerInvalid(this)&&(c=this._innerFunRaw(o,l,!1,!1,!1),T.Lib.isArray(c)?c[0]:c)},a._innerFunRawV2=function(o,l,d){var u,c=this;return c._resetErr(),c._isValid()?s.isHttpServerInvalid(c)?e.Promise.reject({code:c._errorCode,message:c._errorString}):(u={method:"post",body:s.getJson(c,o,l,0),dataType:d},T.DWT.ConnectWithSocket?new Promise(function(f,g){c._innerSend(o,l,!1,function(v){var p=!1;try{p=e.isString(v)?e.parse(v):v}catch(m){}if(p){if(p instanceof Blob||p instanceof ArrayBuffer)return void f(p);void 0!==p.exception&&void 0!==p.description&&(c._errorCode=p.exception,c._errorString=p.description)}c._resetErr(),f(p)},function(v){T.Lib.Errors.NetworkError(c),v&&(c._errorString=[c._errorString," ",v.errorString," (",v.httpCode,")"].join("")),g({code:c._errorCode,message:c._errorString})})}):e.fetch([c.httpUrl,"fa/",o,"?",s.getRandom()].join(""),u).then(function(f){var g=!1;try{g=e.isString(f)?e.parse(f):f}catch(v){}if(g){if(g instanceof Blob||g instanceof ArrayBuffer)return g;if(void 0===g.exception||void 0===g.description)return c._resetErr(),g;c._errorCode=g.exception,c._errorString=g.description}else T.Lib.Errors.InvalidResultFormat(c);throw{code:c._errorCode,message:c._errorString}},function(f){throw T.Lib.Errors.NetworkError(c),f&&(c._errorString=[c._errorString," ",f.errorString," (",f.httpCode,")"].join("")),{code:c._errorCode,message:c._errorString}})):e.Promise.reject({code:c._errorCode,message:c._errorString})},a._innerFunV2=function(o,l){var d=this;return s.isHttpServerInvalid(d)?e.Promise.reject({code:d._errorCode,message:d._errorString}):d._innerFunRawV2(o,l,"text").then(function(c){return c&&T.Lib.isArray(c.result)&&c.result.length>0?c.result[0]:c})},a._innerNewWS=function(o,l){var d=this,c=s.generateCmdId(),u=s.getJson(d,o,l,c);return d._resetErr(),d._isValid()?s.isHttpServerInvalid(d)?e.Promise.reject({code:d._errorCode,message:d._errorString}):new e.Promise(function(h,f){var g;try{g=e.getWS(d._host,d._port,d._ssl)}catch(v){g&&(g.close(),g=null),e.Errors.Server_Invalid(d),f({code:d._errorCode,message:d._errorString})}g.onopen=function(){1==g.readyState?(g.onopen=null,g.send(u)):0==g.readyState&&setTimeout(g.onopen,100)},g.onmessage=function(v){h(v&&v.data?v.data:""),g.close(),v=null},g.onerror=function(v){f(v),g.close()},g.onclose=function(v){g&&(g.onclose=null,g.onerror=null,g.onmessage=null,g=null)}}):e.Promise.reject({code:d._errorCode,message:d._errorString})},a._innerFunRaw=function(o,l,d,c,u,h,f){var v,p,m,y,g=this,I="f/",_=!1;if(T.DWT.ConnectWithSocket)return this._innerSend(o,l,!1,h,f);if(s.isHttpServerInvalid(g)||(g._resetErr(),!g._isValid()))return!1;if(d&&(_=!0,I="fa/"),m={method:"POST",url:v=[g.httpUrl,I,o,"?",s.getRandom()].join(""),data:p=s.getJson(g,o,l,0),async:_,onSuccess:function(A,M,E){var R=!1;try{R=e.isString(A)&&"text/json"===E.getResponseHeader("content-type")?e.parse(A):A}catch(x){}R?(void 0!==R.exception&&void 0!==R.description?(g._errorCode=R.exception,g._errorString=R.description):g._resetErr(),y=u?R:R.result):(T.Lib.Errors.InvalidResultFormat(g),y=""),e.isFunction(h)&&h(y)},onError:function(){T.Lib.Errors.NetworkError(g),y="",e.isFunction(f)&&f()}},!_&&c)i.bIE?(m.dataType="arraybuffer",m.onSuccess=function(A,M,E){var R,x,F,P=!1;if(E.responseHeadersString&&-1!=E.responseHeadersString.indexOf("text/json")&&(P=!0),R=E.responseData,g._resetErr(),y=!1,R&&(x=new Uint8Array(R),P?R=String.fromCharCode.apply(null,x):(y=new Blob([x],{type:g.__strHttpContentTypeFieldValue}),(F=new e.SparkMD5.ArrayBuffer).append(x),y.md5=F.end())),!R||P){var w,L=!1;if((w=P?R:E.responseText).length>0){if("{"==w.charAt(0))try{L=e.parse(w),P=!0}catch(U){T.Lib.log(w)}P?void 0!==L.exception&&void 0!==L.description?(g._errorCode=L.exception,g._errorString=L.description,y=!1):y=!0:(x=new Uint8Array(w),y=new Blob([x],{type:g.__strHttpContentTypeFieldValue}),(F=new e.SparkMD5.ArrayBuffer).append(x),y.md5=F.end())}}e.isFunction(h)&&h(y)}):(_||(m.dataType="text",m.contentType="text/plain; charset=x-user-defined",m.mimeType="text/plain; charset=x-user-defined"),m.onSuccess=function(A,M,E){var R,x,P;if(g._resetErr(),(x=(R=E.responseText).length)>0){var k,F=!1;if("{"==R.charAt(0))try{k=e.parse(R),F=!0}catch(L){T.Lib.log(R)}if(F)void 0!==k.exception&&void 0!==k.description?(g._errorCode=k.exception,g._errorString=k.description,y=!1):y=!0;else{P=new Uint8Array(x);for(var w=0;w<x;w++)P[w]=R.charCodeAt(w);y=new Blob([P],{type:g.__strHttpContentTypeFieldValue});var S=new e.SparkMD5.ArrayBuffer;S.append(P),y.md5=S.end()}}else y="";e.isFunction(h)&&h(y)});else if(_&&c){m={method:"POST",body:p},i.bIE?m.dataType="arraybuffer":m.fetchRaw=!0;var C=e.fetch(v,m);return i.bIE||(C=C.then(function(A){var M=A.headers.get("content-type");return M.indexOf("image/")>=0||M.indexOf("application/octet-stream")>=0?A.arrayBuffer():A.json()})),C=C.then(function(A){if(g._resetErr(),A instanceof ArrayBuffer)return e.isFunction(h)&&h(A),void(A=null);if(e.isObject(A)){var M=A;if(void 0!==M.exception&&void 0!==M.description)g._errorCode=M.exception,g._errorString=M.description,e.isFunction(f)&&f();else{var E="";M.result&&(E=M.result),e.isFunction(h)&&h(E)}}else T.Lib.Errors.NetworkError(g),e.isFunction(f)&&f()},function(A){T.Lib.Errors.NetworkError(g),e.isFunction(f)&&f()}),!0}return _||e.mix(m,{headers:{"X-Requested-With":!1}}),i.bFileSystem&&(m.crossDomain=!1),e.ajax(m),!!_||y},a._innerSend=function(o,l,d,c,u){var h=this,f=h._objWS,g=!1,v=!1,p=!1,m=!0;if("ActiveUI"==o?m=!1:p=s.isServerInvalid(h),p)return e.isFunction(u)&&u(),!0;e.isFunction(c)&&(v=c),e.isFunction(u)&&(g=u);var y,I=s.generateCmdId();if(T.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=o&&"ConvertToBlob"!=o){var E=h.GetCurrentFileName();""==E&&(E=h._ImgManager.getWebViewer().GetDefaultFileName()),h.curCommand.push({cmd:o,cmdId:I,sFun:v,fFun:g,currentFileName:E}),y=s.sendData(f,s.getJson(h,o,l,I),!1,m)}else{var _=s.getJson(h,o,l,I);h._innerFunRaw(o,_,!0,!0,!0,v,g),y=!0}return y},a.__innerConvertToBlob=function(o,l,d,c,u,h,f,g){var v=this;if(v._isMobileMode())return v.__innerConvertToBlobByMobile(o,l,d,u,h,f,g);var p=d,I=",";(!e.isString(p)||""==p)&&(p="",I="");var y=["[",o,',"',l.join(","),'"',I,p,"]"].join("");if(c)return v._innerFunRaw("ConvertToBlob",y,!0,!0,!0,function(A){var M=s.getBlobTypeByImageType(o),E=new Blob([A],{type:M});if(T.DWT.IfAddMD5InUploadHeader){var R=new e.SparkMD5.ArrayBuffer;R.append(A),e.isFunction(h)&&h(E,R.end(),g)}else e.isFunction(h)&&h(E,"",g);E=null},f);var _=v._innerFunRaw("ConvertToBlob",y,!1,!0,!1),C="";return 0==v.ErrorCode?(_&&"md5"in _&&(C=_.md5),h(_,C,g)):(f(),!1)},a.__innerConvertToBlobByMobile=function(o,l,d,c,u,h,f){var m,I,g=this,p=[];if(o==T.DWT.EnumDWT_ImageType.IT_BMP)return m="bmp",g._mobileNotSupport("Convert to bmp",h);for(m=o==T.DWT.EnumDWT_ImageType.IT_JPG?"jpg":o==T.DWT.EnumDWT_ImageType.IT_PNG?"png":o==T.DWT.EnumDWT_ImageType.IT_TIF?"tiff":o==T.DWT.EnumDWT_ImageType.IT_PDF?"pdf":o==T.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",I=0;I<l.length;I++)p.push(g._ImgManager.convertServerIdToClientIndex(l[I]));return g._innerSendToMobile("SaveImage",T.Lib.MobileFuns.makeParams("",p,m,c,!0),0,function(y,_,C){e.isFunction(u)&&u(y,f)},h)},a.__innerConvertToBase64ByMobile=function(o,l,d,c,u,h){var p,m,f=this,v=[];if(d==T.DWT.EnumDWT_ImageType.IT_BMP)return p="bmp",f._mobileNotSupport("Convert to bmp",h);if(p=d==T.DWT.EnumDWT_ImageType.IT_JPG?"jpg":d==T.DWT.EnumDWT_ImageType.IT_PNG?"png":d==T.DWT.EnumDWT_ImageType.IT_TIF?"tiff":d==T.DWT.EnumDWT_ImageType.IT_PDF?"pdf":d==T.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",e.isArray(l))for(m=0;m<l.length;m++)v.push(f._ImgManager.convertServerIdToClientIndex(l[m]));return f._innerSendToMobile("SaveImage",T.Lib.MobileFuns.makeParams(o,v,p,c,!1),0,function(I,y,_){if(I instanceof Uint8ClampedArray||I instanceof ArrayBuffer||I instanceof Uint8Array){var C=new FileReader;C.onload=function(M){var E=M.target.result,R=e.isString(E)?E.split(","):[];R.length>=2&&(E=R[1]),e.isFunction(u)&&u({result:[E,E.length,C.md5]})};var A="image/"+y;return"pdf"==y&&(A="application/pdf"),void f._innerSendToMobile("GetMD5",T.Lib.MobileFuns.makeParams(I),0,function(M){C.md5=M,C.readAsDataURL(new Blob([I],{type:A}))},h)}u({result:[I,I.length,_]})},h)},a.__SaveLocalFileToBytes=function(o,l,d,c,u){var h=this;if(l)return h._innerFunRaw("SaveSelectedImagesToBytes",s.makeParams(0,0,o,d),l,!0,!0,function(v){if(e.isFunction(c)){var p=new Blob([v]);c(p),p=null}},u),!0;var g=h._innerFunRaw("SaveSelectedImagesToBytes",s.makeParams(0,0,o,d),l,!0,!1);return 0==h.ErrorCode?c(g):(u(),!1)},a.__captureImage=function(o,l,d,c){return this.__LoadImageFromBytesV2(o,l,"",!0,d,c,0,0,"true")},a.__LoadImageFromBytes=function(o,l,d,c,u,h,f,g){return this.__LoadImageFromBytesV2(o,l,d,c,u,h,f,g,"false")},a.__LoadImageFromBytesV2=function(o,l,d,c,u,h,f,g,v){var C,p=this,m="LoadImageFromBytes",I=l||3,y=o.size||o.length,_=o.name,A=s.isServerInvalid(p),M=!0,E=0,R=1;!isNaN(f)&&f>=0&&!isNaN(g)&&g>0?R=0:(f=0,g=0),E=p.__GetLoadEventsNum(),C=["[",y,",",0,",",I,',"',d,'",',f,",",g,",",E,",",R,",",v,"]"].join("");var x=function(){if(T.Lib.closeProgress(m),p.__bLoadingImage=!1,M){var P=p._ImgManager.getCurrentImageIndex();P>=0&&p.OnRefreshUI(P)}return e.isFunction(h)&&h(p._errorCode,p._errorString,_),!1};return A||!e.License.checkProductKey(p,{Core:!0})&&!e.License.checkProductKey(p,{Webcam:!0},!0)||!e.License.checkPDFProductKeyWhenNeeds(p,l)?(M=!1,x()):0===y?(T.Lib.Errors.ImageFileLengthCannotZero(p),M=!1,x()):(s.setBtnCancelVisibleForProgress(p,!1),this._innerSendBlob(m,C,o,c,R,function(){if((f+y==g||g<=0||isNaN(g))&&T.Lib.closeProgress(m),p.__bLoadingImage=!1,p._isBindViewer()){var P=p._ImgManager.getCurrentImageIndex();c&&P>=0&&p.OnRefreshUI(P)}if(e.isFunction(u))if(c)setTimeout(function(){u(_)},30);else try{u(_)}catch(F){T.Lib.log(F.message)}return e.License.isLTS()&&T.DWT.lcvrf(p),!0},x))},a._innerSendBlob=function(o,l,d,c,u,h,f){var g=this,v=g._objWS,p=!1;if(s.isServerInvalid(g))return e.isFunction(f)&&f(),!1;if(e.isFunction(f)&&(p=f),!c){var y,C,A,M,_=[],R="";return!(s.isHttpServerInvalid(g)||(g._resetErr(),!g._isValid()))&&(C=[g.httpUrl,"f/",o,"?",s.getRandom()].join(""),A=s.getJson(g,o,l,0),A+="\r\n\r\n",M={method:"post",url:C,processData:!1,data:A+=T.Lib.base64.encodeArray(d),async:!1,onSuccess:function(x,P,F){var k=!1,w=!1;try{k=e.isString(x)&&"text/json"===F.getResponseHeader("content-type")?e.parse(x):x}catch(L){}if(null!=k&&(void 0!==k.exception&&void 0!==k.description?(g._errorCode=k.exception,g._errorString=k.description):g._resetErr(),(y=k.result)&&e.isArray(y)&&y.length>=1))if(u){var S=y[0];S&&e.isObject(S)&&(R=S.ids,e.isArray(S.metaData)&&(_=S.metaData),w=!0)}else R=y.join(","),_=[],w=!0;w||(T.Lib.Errors.InvalidResultFormat(g),y="",_=[])},onError:function(){T.Lib.Errors.NetworkError(g),y="",_=[]}},e.mix(M,{headers:{"X-Requested-With":!1}}),i.bFileSystem&&(M.crossDomain=!1),e.ajax(M),0==g._errorCode?(R.length>0&&g._OnBitmapChanged(["c2",R,1,g._ImgManager.getCurrentImageIndex(),g._ImgManager.count(),_],null,d.currentFileName),e.isFunction(h)&&h()):e.isFunction(p)&&p(),y)}var m=s.generateCmdId();g.curCommand.push({cmd:o,cmdId:m,sFun:function(){e.isFunction(h)&&h()},fFun:p,currentFileName:d.currentFileName}),s.sendData(v,s.getJson(g,o,l,m),d,!0)},a.GetImageAsync=function(o,l,d,c,u){var h=this;if(h._resetErr(),!h._isValid())return e.Promise.reject({code:h._errorCode,message:h._errorString});var f=parseInt(o);if(isNaN(f))return e.Errors.InvalidIndex(h),e.Promise.reject({code:h._errorCode,message:h._errorString});if(f<0||f>=h._ImgManager.count())return e.Errors.IndexOutOfRange(h),e.Promise.reject({code:h._errorCode,message:h._errorString});if(h._isMobileMode())return h._mobileNotSupportAsync("GetImageAsync");var y,g=h._ImgManager.convertClientIndexToServerId(f);return-1==g?(e.Errors.IndexOutOfRange(h),e.Promise.reject({code:h._errorCode,message:h._errorString})):(e.isNumber(l)?y=s.makeParams(g,l):e.isNumber(d)&&e.isNumber(c)?y=s.makeParams(g,d,c):e.isNumber(u)&&(y=s.makeParams(g,-1,-1,u)),h._innerFunV2("GetImageByIndex",y))},a.GetImageInfoAsync=function(o){var l=this;if(l._resetErr(),!l._isValid())return e.Promise.reject({code:l._errorCode,message:l._errorString});var d=parseInt(o);if(isNaN(d))return e.Errors.InvalidIndex(l),e.Promise.reject({code:l._errorCode,message:l._errorString});if(d<0||d>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString});if(l._isMobileMode())return l._mobileNotSupportAsync("GetImageAsync");var c=l._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("GetImageInfo",s.makeParams(c)).then(function(u){var h=0,f=0,g=u;if(T.Lib.isArray(u)&&1==u.length&&(g=u[0]),T.Lib.isString(g)){var v=g.split(",");h=parseInt(v[0]),f=parseInt(v[1])}return{width:h,height:f}})},a._innerActiveUI=function(o,l){var d=e.detect.ssl;if(this._blts){var c=this,u=T.DWT.li({instanceMode:T.DWT.EnumInstance.dwt_desktop});if(!T.DWT.lisValidID(u))return void(c=null);c._innerSend("ActiveUI",s.makeParams(T.Lib.env.WSVersion,T.Lib.env.WSSession,1,u,d),!1,o,l),c=null}else this._innerSend("ActiveUI",s.makeParams(T.Lib.env.WSVersion,T.Lib.env.WSSession,1,"",d),!1,o,l);return!0}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.navInfo,a=e.html5.STwain.prototype,s=e.html5.Funs,o=e.removeNonPrintableChar,l=T.DWT,d=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];a.LoadDibFromClipboard=function(u,h){var p,f=this;return f._resetErr(),!!f._isValid()&&(f._isMobileMode()?f._mobileNotSupport("LoadDibFromClipboard",h):(p=f.__GetLoadEventsNum(),f.__innerLoadImage("LoadDibFromClipboard",s.makeParams(p,1),-1,!0,1,u,h)))},a.LoadImage=function(u,h,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(g._isMobileMode())return g._mobileNotSupport("LoadImage",f);var I,y,_,p=s.replaceLocalFilename(u),m=e.html5.Funs.getImageType(p);return h&&e.isFunction(h)&&(y=function(){h()}),f&&e.isFunction(f)&&(_=function(){f(g.ErrorCode,g.ErrorString)}),I=g.__GetLoadEventsNum(),""==p&&(g.__bOpenFileNow=!0),g.__innerLoadImage("LoadImage",s.makeParams(p,I,1),m,!0,1,y,_)},a.LoadImageEx=function(u,h,f,g){var v=this;if(v._resetErr(),!v._isValid())return!1;if(v._isMobileMode()){var m=e.one(".d-loadImage");if(0==m.length){var I=document.createElement("input");I._stwain=v,I.setAttribute("type","file"),I.setAttribute("multiple","multiple"),I.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",I.className="d-loadImage",I.setAttribute("accept",h==T.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":h==T.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":h==T.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":h==T.DWT.EnumDWT_ImageType.IT_PNG?"image/png":h==T.DWT.EnumDWT_ImageType.IT_PDF?".pdf":h==T.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":e.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),I.ondoubleclick=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,f,g),this.value="",this._stwain=null},I.onchange=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,f,g),this.value="",this._stwain=null},document.body.appendChild(I),I.click()}else m[0].setAttribute("accept",h==T.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":h==T.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":h==T.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":h==T.DWT.EnumDWT_ImageType.IT_PNG?"image/png":h==T.DWT.EnumDWT_ImageType.IT_PDF?".pdf":h==T.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":e.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),m[0].value="",m[0]._stwain=v,m[0].click();return!0}var C,A,M,y=s.replaceLocalFilename(u),_=h;return f&&e.isFunction(f)&&(A=function(){f()}),g&&e.isFunction(g)&&(M=function(){g(v.ErrorCode,v.ErrorString)}),_==T.DWT.EnumDWT_ImageType.IT_ALL&&(_=-1),C=v.__GetLoadEventsNum(),""==y&&(v.__bOpenFileNow=!0),v.__innerLoadImage("LoadImageEx",s.makeParams(y,_,C,1),_,!0,1,A,M)},a.EnableSource=function(u,h,f){var g=this;return g._resetErr(),!!g._isValid()&&(g._isMobileMode()?g._mobileNotSupport("EnableSource",f):g.AcquireImage(u,h,f))},a.AcquireImage=function(u,h,f){var m,I,g=this,v=null,p=null;if(g._resetErr(),!g._isValid())return!1;if(e.isUndefined(f)&&(e.isFunction(u)&&e.isFunction(h)||e.isFunction(u)&&e.isUndefined(h)||e.isFunction(u)&&null==h||null==u&&e.isFunction(h))?(I={},e.isFunction(u)&&(v=u),e.isFunction(h)&&(p=h)):(I=e.isUndefined(u)||null==u?{}:e.clone(u),e.isFunction(h)&&(v=function(){h(I)}),e.isFunction(f)&&(p=function(){f(I,g._errorCode,g._errorString)})),!e.License.checkProductKey(g,{Core:!0}))return e.isFunction(p)&&p(g.ErrorCode,g.ErrorString),!1;if(g._isMobileMode())return g._mobileNotSupport("AcquireImage",p);if(s.isServerInvalid(g))return e.isFunction(p)&&p(g.ErrorCode,g.ErrorString),!1;!g._bRemoteMode&&I.RemoteScan&&(I.RemoteScan=!1),g._bRemoteMode&&I.RemoteScan&&(e.isFunction(g.__OnRemoteScanStatusAsync)||(g.__OnRemoteScanStatusAsync=function(){}),e.isFunction(g.__OnSourceUIClose)||(g.__OnSourceUIClose=function(){}));for(var y=0,_=0;_<d.length;_++){var C=["__",d[_]].join("");e.isFunction(g[C])&&(y|=1<<_)}if(I.EnableEvents=y,g._enableEvents=y,g._bRemoteMode&&I.RemoteScan&&(g._isBindViewer()||I.ShowRemoteScanUI)){var A=document.createElement("div");A.style.position="absolute",A.style.zIndex="510000",A.style.left="0",A.style.top="0";var M=document.createElement("img");M.className="ds-img-screen",A.appendChild(M),document.body.appendChild(A),g._acquireDivEL=A}if("SelectSourceByIndex"in I){var E=I.SelectSourceByIndex;return delete I.SelectSourceByIndex,g.SelectSourceByIndexAsync(E).then(function(){return m=["[",e.stringify(I),"]"].join(""),g.__bAcquireImageNow=!0,g.__innerAcquireImage("AcquireImage",m,!1,v,p)},function(R){p(R.code,R.message)})}return g._bRemoteMode||(g.bPageFocus&&l.IfAlwaysFocusOnPopupWindow?g.bServerAlwaysFocusOnPopupWindow||g._OnPageFocus(!0):g.bServerAlwaysFocusOnPopupWindow&&g._OnPageBlur(!0)),m=["[",e.stringify(I),"]"].join(""),g.__bAcquireImageNow=!0,g.__innerAcquireImage("AcquireImage",m,!1,v,p)},a._startScan=function(u,h,f){var m,I,g=this,v=null,p=null;if(I=e.isUndefined(u)||null==u?{}:u,g._resetErr(),!g._isValid())return!1;if(e.isFunction(h)&&(v=function(){h(I)}),e.isFunction(f)&&(p=function(A,M){f(A,M,I)}),s.isServerInvalid(g)||!e.License.checkProductKey(g,{Core:!0}))return e.isFunction(p)&&p(g._errorCode,g._errorString),!1;for(var y=0,_=0;_<d.length;_++){var C=["__",d[_]].join("");e.isFunction(g[C])&&(y|=1<<_)}return I.EnableEvents=y,m=["[",e.stringify(I),"]"].join(""),g.__bAcquireImageNow=!0,g.__innerAcquireImage("StartScan",m,!1,v,p)},a.CancelAllPendingTransfers=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CancelAllPendingTransfers"):this._innerFun("CancelAllPendingTransfers"))},a.CloseSource=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CloseSource"):u._innerFun("CloseSource"))},a.CloseSourceManager=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CloseSourceManager"):u._innerFun("CloseSourceManager"))},a.CloseSourceAsync=function(){var u=this;return u._resetErr(),u._isValid()?u._isMobileMode()?u._mobileNotSupportAsync("CloseSource"):u._innerFunV2("CloseSource"):e.Promise.reject({code:u._errorCode,message:u._errorString})},a.CloseSourceManagerAsync=function(){var u=this;return u._resetErr(),u._isValid()?u._isMobileMode()?u._mobileNotSupportAsync("CloseSourceManager"):u._innerFunV2("CloseSourceManager"):e.Promise.reject({code:u._errorCode,message:u._errorString})},a.DisableSource=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("DisableSource"):u._innerFun("DisableSource"))},a.FeedPage=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("FeedPage"):u._innerFun("FeedPage"))},a.GetDeviceType=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("GetDeviceType"):u._innerFun("GetDeviceType"))},a.GetSourceNameItems=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("GetSourceNameItems"):(h.__sourceCount<0&&(h.SourceCount=0),u<h.__sourceCount&&u>=0?h.__sourceName[u]:""))},a.SourceNameItems=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("SourceNameItems"):h.GetSourceNameItems(u))};var c=function(u){var h=JSON.parse(o(u));return e.each(h,function(f){f.ProductName&&(f.ProductName=e.base64.decode(f.ProductName)),f.ProductFamily&&(f.ProductFamily=e.base64.decode(f.ProductFamily)),f.Manufacturer&&(f.Manufacturer=e.base64.decode(f.Manufacturer)),f.Version&&f.Version.Info&&(f.Version.Info=e.base64.decode(f.Version.Info))}),h};a._getSourceNamesSyncV2=function(u){var v,p,h=this,g=[],m=[];if(v=h._innerFun("GetSourceNames",s.makeParams(1,u)),0!=h._errorCode&&-3032!=h._errorCode)return[];if(""!=v){g=c(v);for(var I=0;I<g.length;I++){var _="true"==(p=g[I]).IsDefaultSource;p.IsCurrentSource="true"==p.IsCurrentSource,p.IsDefaultSource=_,m.push(p)}}return m},a._getSourceNamesAsyncV2=function(u){var h=this;return h._innerFunV2("GetSourceNames",s.makeParams(1,u)).then(function(g){if(0!=h._errorCode&&-3032!=h._errorCode)throw 0;var p,v=[],m=[];if(""!=g){v=c(g);for(var I=0;I<v.length;I++){var _="true"==(p=v[I]).IsDefaultSource;p.IsCurrentSource="true"==p.IsCurrentSource,p.IsDefaultSource=_,m.push(p)}}return m})},a.GetSourceNames=function(u){var h=this,f=h.SourceCount;return f<=0&&(f=0),u?h.__sourceDetails:h.__sourceName},a._resetSources=function(){var u=this;u.__defaultSourceName="",u.__sourceCount=0,u.__icaSourceCount=-1,u.__sourceName=[],u.__sourceDetails=[]},a.GetSourceCountAsync=function(u){var f,h=this,g=!1,p=!1;return h._resetErr(),h._isValid()?(h._bRemoteMode?h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?p=!0:h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux||h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(g=!0):(g=i.bMac,p=i.bWin),h._resetSources(),e.showMask(),u&&(h._driverType=u),g&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_ICA?f=h._getSourceNamesAsyncV2(T.DWT.EnumDWT_Driver.ICA).then(function(I){var y,_,C;for(C=0;C<I.length;C++)e.isString(y=(_=I[C]).ProductName)&&""!==(y=o(e.trim(y)))&&("ICA"===_.DriverType&&(y="ICA-"+y),1==_.IsDefaultSource&&(h.__defaultSourceName=y),h.__sourceName.push(y),h.__sourceDetails.push(_));h.__icaSourceCount=h.__sourceDetails.length}).then(function(){return h._getSourceNamesAsyncV2(T.DWT.EnumDWT_Driver.TWAIN)}).then(function(I){var y,_,C;for(C=0;C<I.length;C++)e.isString(y=(_=I[C]).ProductName)&&""!==(y=o(e.trim(y)))&&("ICA"===_.DriverType&&(y="ICA-"+y),1==_.IsDefaultSource&&(h.__defaultSourceName=y),h.__sourceName.push(y),h.__sourceDetails.push(_))}).then(function(){var I=h.__sourceDetails.length;return h.__sourceCount=I,""===h.__defaultSourceName&&h.__sourceName.length>0&&(h.__defaultSourceName=h.__sourceName[0]),e.hideMask(),I},function(){return h._resetSources(),h.__icaSourceCount=0,e.hideMask(),0}):p&&T.dcp.b64bit&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(f=h._getSourceNamesAsyncV2(T.DWT.EnumDWT_Driver.TWAIN).then(function(I){var y,_,C;for(C=0;C<I.length;C++)e.isString(y=(_=I[C]).ProductName)&&""!==(y=o(e.trim(y)))&&(1==_.IsDefaultSource&&(h.__defaultSourceName=y),h.__sourceName.push(y),h.__sourceDetails.push(_));h.__icaSourceCount=h.__sourceDetails.length}),T.dcp.b64bit&&(f=f.then(function(){return h._getSourceNamesAsyncV2(T.DWT.EnumDWT_Driver.TWAIN64)}).then(function(I){var y,_,C;for(C=0;C<I.length;C++)e.isString(y=(_=I[C]).ProductName)&&""!==(y=e.trim(y))&&("TWAIN(64Bit)"===_.DriverType&&(y="Twain64-"+y),1==_.IsDefaultSource&&(h.__defaultSourceName=y),h.__sourceName.push(y),h.__sourceDetails.push(_))})),f=f.then(function(){var I=h.__sourceDetails.length;return h.__sourceCount=I,""===h.__defaultSourceName&&h.__sourceName.length>0&&(h.__defaultSourceName=h.__sourceName[0]),e.hideMask(),I},function(){return h._resetSources(),h.__icaSourceCount=0,e.hideMask(),0})):f=h._getSourceNamesAsyncV2().then(function(I){var y,_,C;for(C=0;C<I.length;C++)e.isString(y=(_=I[C]).ProductName)&&""!==(y=o(e.trim(y)))&&("ICA"===_.DriverType&&(y="ICA-"+y),1==_.IsDefaultSource&&(h.__defaultSourceName=y),h.__sourceName.push(y),h.__sourceDetails.push(_))}).then(function(){var I=h.__sourceDetails.length;return h.__sourceCount=I,""===h.__defaultSourceName&&h.__sourceName.length>0&&(h.__defaultSourceName=h.__sourceName[0]),h.__icaSourceCount=0,e.hideMask(),I},function(){return h._resetSources(),h.__icaSourceCount=0,e.hideMask(),0}),f):e.Promise.reject({code:h._errorCode,message:h._errorString})},a.getSourceCount=function(u){return this.GetSourceCountAsync(u)},a.GetSourceNamesAsync=function(u){var h=this;return h._resetErr(),h._isValid()?h._isMobileMode()?h._mobileNotSupportAsync("GetSourceNames"):h.getSourceCount().then(u?function(g){return h.__sourceDetails}:function(g){return h.__sourceName}):e.Promise.reject({code:h._errorCode,message:h._errorString})},a.GetSourceType=function(u){var h=this,f=parseInt(u);return h._resetErr(),isNaN(f)?(e.Errors.InvalidParameter(h),!1):(f=h.__SetImageCaptureTypeInner(f),h._innerFun("GetSourceType",s.makeParams(f)))},a.OpenSource=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("OpenSource"):u._innerFun("OpenSource"))},a.OpenSourceManager=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("OpenSourceManager"):u._innerFun("OpenSourceManager"))},a.OpenSourceAsync=function(){var u=this;return u._resetErr(),u._isValid()?u._isMobileMode()?u._mobileNotSupportAsync("OpenSource"):u._innerFunV2("OpenSource"):e.Promise.reject({code:u._errorCode,message:u._errorString})},a.OpenSourceManagerAsync=function(){var u=this;return u._resetErr(),u._isValid()?u._isMobileMode()?u._mobileNotSupportAsync("OpenSourceManager"):u._innerFunV2("OpenSourceManager"):e.Promise.reject({code:u._errorCode,message:u._errorString})},a.ResetImageLayout=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("ResetImageLayout"):u._innerFun("ResetImageLayout"))},a.RewindPage=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("RewindPage"):u._innerFun("RewindPage"))},a.SelectSource=function(u,h){var f=this;return f._resetErr(),!!f._isValid()&&(f._isMobileMode()?f._mobileNotSupport("SelectSource",h):e.isUndefined(u)?f._bRemoteMode&&f.IfShowUI?(e.Errors.SelectSourceMustAsyncWhenRemote(f),!1):f._driverType==T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(e.Errors.SelectSourceMustAsync(f),!1):f._innerFun("SelectSource"):(f.SelectSourceAsync().then(u,function(){e.isFunction(h)&&h(f.ErrorCode,f.ErrorString)}),!0))},a.SelectSourceAsync=function(u){var h=this;return h._resetErr(),h._isValid()?h._isMobileMode()?h._mobileNotSupportAsync("SelectSource"):u?h._innerFunV2("SelectSource",s.makeParams(u)):h.getSourceCount().then(function(f){var v,p,g=document;if(f<=0){var m=l.CustomizableDisplayInfo.dialogText.selectSource[3];return alert(m),e.Promise.reject(m)}if(e.dialog.selectsourcedlg){var A=T.Lib.one(".dynamsoft-dialog-selectsource");A&&A.length>0&&(p=A[0])}else{var I,y=-1;for((p=g.createElement("dialog")).className="dynamsoft-dialog-selectsource",p.style.top="20%",(i.bIE||i.bEdge)&&(p.style.width="300px"),p.setAttribute("closed","closed"),(I=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),v=0;v<h.__sourceCount;v++){var _="";(""==h.__defaultSourceName&&0==v||h.__defaultSourceName==h.__sourceName[v])&&(_=" dynamsoft-dialog-selectsource-sourcelist-li-selected",y=v),I.push('<li class="dynamsoft-dialog-selectsource-item'+_+'" sourceindex='+v+">"+h.__sourceName[v]+"</li>")}I.push("</ul>"),I=I.join("");var C=["<p>",l.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',I,"</div>",'<div><input type="button" value="',l.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',l.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");p.innerHTML=C,e.dialog.selectsourcedlg=p,g.body.appendChild(e.dialog.selectsourcedlg),e.each(e.all(".dynamsoft-dialog-selectsource-item"),function(R,x){e.addEventListener(R,"click",function(P){for(var F=P.target,k=F.attributes.sourceindex.value,w=F.parentElement.children,S=0;S<w.length;S++)w[S].className="dynamsoft-dialog-selectsource-item";F.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",e.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",k)})}),e.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",y.toString()),e.dialog.setup(e.dialog.selectsourcedlg)}e.dialog.selectsourcedlg.showModal();var M;if((M="CSS1Compat"==g.compatMode?g.documentElement.scrollTop:g.body.scrollTop)>0&&p){var E=e.DOM.getElDimensions(p,!0).offsetTop;p.style.top=(E+=M)+"px"}return new e.Promise(function(R,x){e.removeEventListener(e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),e.removeEventListener(e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),e.addEventListener(e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var P=parseInt(T.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);h.SelectSourceByIndexAsync(P).then(function(){e.dialog.selectsourcedlg.close(),document.body.removeChild(e.dialog.selectsourcedlg),e.dialog.selectsourcedlg=!1,R(P)})}),e.addEventListener(e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){e.dialog.selectsourcedlg.close(),document.body.removeChild(e.dialog.selectsourcedlg),e.dialog.selectsourcedlg=!1,x({code:-1032,message:"User cancelled the operation."})})})}):e.Promise.reject({code:h._errorCode,message:h._errorString})},a.SelectSourceByIndex=function(u){var h=this,f=parseInt(u);if(h._resetErr(),h._isMobileMode())return h._mobileNotSupport("SelectSourceByIndex");if(isNaN(f))return e.Errors.InvalidParameter(h),!1;var g=h.__getSourceIndexAndImageCaptureType(u);return h._innerFun("SelectSourceByIndex",s.makeParams(g[0],g[1],g[2]))},a.__getSourceIndexAndImageCaptureType=function(u){var h=this,f=1*u,v=!1,m=!1;h._isValid()&&(h._bRemoteMode?h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?m=!0:h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux||h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(v=!0):(v=i.bMac,m=i.bWin),v&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_ICA?f>=h.__icaSourceCount?(f-=h.__icaSourceCount,h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN):h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.ICA:m&&T.dcp.b64bit&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64&&(f>=h.__icaSourceCount?(f-=h.__icaSourceCount,h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN64):h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN));var y=void 0===h._driverType?0:h._driverType;return[f,void 0===h.__currentImageCaptureDriverType?y:h.__currentImageCaptureDriverType,y]},a.__SetImageCaptureTypeInner=function(u){var h=this;if(!h._isValid())return!1;var f=h.__getSourceIndexAndImageCaptureType(u);return h._innerFun("SetImageCaptureDriverType",s.makeParams(f[1],f[2])),f[0]},a._resetImageCaptureDriverType=function(u){var f,h=this,g=u,v=!1,m=!1;return h._resetErr(),!!h._isValid()&&(h._bRemoteMode?h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow?m=!0:h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux||h.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(v=!0):(v=i.bMac,m=i.bWin),v&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(f=-1==h.__icaSourceCount?h.getSourceCount():e.Promise.resolve(h.__sourceCount),u>=h.__icaSourceCount?(g-=h.__icaSourceCount,h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN,f=f.then(function(){return h._innerFunV2("SetImageCaptureDriverType",s.makeParams(T.DWT.EnumDWT_Driver.TWAIN,h._driverType))})):(h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.ICA,f=f.then(function(){return h._innerFunV2("SetImageCaptureDriverType",s.makeParams(T.DWT.EnumDWT_Driver.ICA,h._driverType))}))):m&&T.dcp.b64bit&&h._driverType===T.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(f=-1==h.__icaSourceCount?h.getSourceCount():e.Promise.resolve(h.__sourceCount),u>=h.__icaSourceCount?(g-=h.__icaSourceCount,h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN64,f=f.then(function(){return h._innerFunV2("SetImageCaptureDriverType",s.makeParams(T.DWT.EnumDWT_Driver.TWAIN64,h._driverType))})):(h.__currentImageCaptureDriverType=T.DWT.EnumDWT_Driver.TWAIN,f=f.then(function(){return h._innerFunV2("SetImageCaptureDriverType",s.makeParams(T.DWT.EnumDWT_Driver.TWAIN,h._driverType))}))):f=e.Promise.resolve(0),f.then(function(){return g}))},a.GetSourceTypeAsync=function(u){var h=this,f=1*u;return h._resetErr(),h._isValid()?h._isMobileMode()?h._mobileNotSupportAsync("GetSourceType"):h._resetImageCaptureDriverType(f).then(function(g){return h._innerFunV2("GetSourceType",s.makeParams(g))}):e.Promise.reject({code:h._errorCode,message:h._errorString})},a.SelectSourceByIndexAsync=function(u){var h=this,f=1*u;return h._resetErr(),h._isValid()?e.isNaN(f)?(e.Errors.InvalidIndex(h),e.Promise.reject({code:h._errorCode,message:h._errorString})):h._isMobileMode()?h._mobileNotSupportAsync("SelectSourceByIndex"):h._resetImageCaptureDriverType(f).then(function(g){return h._innerFunV2("SelectSourceByIndex",s.makeParams(g))}):e.Promise.reject({code:h._errorCode,message:h._errorString})},a.SetFileXferInfo=function(u,h){var g,v,f=this;return f._resetErr(),!!f._isValid()&&(f._isMobileMode()?f._mobileNotSupport("SetFileXferInfo"):(g=T.navInfoSync.bFileSystem?u.replace(/<%/g,"<%25"):u,v=s.replaceLocalFilename(g),f._innerFun("SetFileXferInfo",s.makeParams(v,h))))},a.SetImageLayout=function(u,h,f,g){var v=this;return v._resetErr(),!!v._isValid()&&(v._isMobileMode()?v._mobileNotSupport("SetImageLayout"):v._innerFun("SetImageLayout",s.makeParams(u,h,f,g)))},a.CapGet=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGet"):this._innerFun("CapGet"))},a.CapGetCurrent=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGetCurrent"):this._innerFun("CapGetCurrent"))},a.CapGetDefault=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGetDefault"):this._innerFun("CapGetDefault"))},a.CapGetFrameBottom=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("CapGetFrameBottom"):this._innerFun("CapGetFrameBottom",s.makeParams(u)))},a.CapGetFrameLeft=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("CapGetFrameLeft"):this._innerFun("CapGetFrameLeft",s.makeParams(u)))},a.CapGetFrameRight=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("CapGetFrameRight"):this._innerFun("CapGetFrameRight",s.makeParams(u)))},a.CapGetFrameTop=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("CapGetFrameTop"):this._innerFun("CapGetFrameTop",s.makeParams(u)))},a.CapGetHelp=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGetHelp"):this._innerFun("CapGetHelp"))},a.CapGetLabel=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGetLabel"):this._innerFun("CapGetLabel"))},a.CapGetLabels=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapGetLabels"):this._innerFun("CapGetLabels"))},a.CapIfSupported=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("CapIfSupported"):this._innerFun("CapIfSupported",s.makeParams(u)))},a.CapReset=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapReset"):this._innerFun("CapReset"))},a.CapSet=function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("CapSet"):this._innerFun("CapSet"))},a.CapSetFrame=function(u,h,f,g,v){var p=this;return p._resetErr(),!!p._isValid()&&(p._isMobileMode()?p._mobileNotSupport("CapSetFrame"):this._innerFun("CapSetFrame",s.makeParams(u,h,f,g,v)))},a.GetCapItems=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("GetCapItems"):this._innerFun("GetCapItems",s.makeParams(u)))},a.GetCapItemsString=function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("GetCapItemsString"):this._innerFun("GetCapItemsString",s.makeParams(u)))},a.SetCapItems=function(u,h){var f=this;return f._resetErr(),!!f._isValid()&&(f._isMobileMode()?f._mobileNotSupport("SetCapItems"):this._innerFun("SetCapItems",s.makeParams(u,h)))},a.SetCapItemsString=function(u,h){var f=this;return f._resetErr(),!!f._isValid()&&(f._isMobileMode()?f._mobileNotSupport("SetCapItemsString"):this._innerFun("SetCapItemsString",s.makeParams(u,h)))},a.GenerateURLForUploadData=function(u,h,f,g,v){var p=this,m=[];if(h==T.DWT.EnumDWT_ImageType.IT_BMP||h==T.DWT.EnumDWT_ImageType.IT_JPG||h==T.DWT.EnumDWT_ImageType.IT_PNG){if(!e.isArray(u))return e.Errors.IndicesNotArray(p),e.isFunction(g)&&g(p.ErrorCode,p.ErrorString,"",u,h),"";if(u.length>1)return e.Errors.UploadIndexMoreThanOne(p),e.isFunction(g)&&g(p.ErrorCode,p.ErrorString,"",u,h),"";if(!p._checkIndices(u))return g(p.ErrorCode,p.ErrorString,"",u,h),!1;var I=p._ImgManager.convertClientIndexToServerId(u[0]);-1!=I&&m.push(I)}else{if(h!=T.DWT.EnumDWT_ImageType.IT_TIF&&h!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.isArray(u)?e.Errors.InvalidImageType(p):e.Errors.IndicesNotArray(p),e.isFunction(g)&&g(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,u,h),"";var y,_;if(e.isArray(u)){if(!p._checkIndices(u))return g(p.ErrorCode,p.ErrorString,"",u,h),!1;y=u}else{if(-1!=u)return e.Errors.IndicesNotArray(p),e.isFunction(g)&&g(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,u,h),"";for(y=[],_=0;_<p._ImgManager.count();_++)y.push(_)}e.each(y,function(M){var E=p._ImgManager.convertClientIndexToServerId(M);-1!=E&&m.push(E)})}return e.isFunction(f)&&e.isFunction(g)?(p._asyncGenerateURLForUploadData(m,h,v,f,function(M){g(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,M,h)}),!0):this._syncGenerateURLForUploadData(m,h,v)},a._syncGenerateURLForUploadData=function(u,h,f){var v,g=this,p=!1,m=T.dcp.managerVersion.join(""),I=f,y=",";(!e.isString(I)||""==I)&&(I="",y="");var _=["[",'"dcp","dwasm_'+m,'",',h,',"',u.join(","),'"',y,I,"]"].join("");(v=this._innerFunRaw("GenerateURLForUploadData",_,!1,!1,!0))&&e.isArray(v.result)&&v.result.length>1&&1==v.result[0]&&(p=["dcp://dwasm_",m,"/file/",v.result[1]].join(""));var M=[];return e.isArray(u)&&e.each(u,function(E){var R=g._ImgManager.convertServerIdToClientIndex(E);R>-1&&M.push(R)}),0==p?(e.Errors.GenerateURL_InvalidRetFromServer(g),""):p},a._asyncGenerateURLForUploadData=function(u,h,f,g,v){var p=this,m=h,I=function(){if(e.isFunction(v)){var R=[];e.isArray(u)&&e.each(u,function(x){var P=p._ImgManager.convertServerIdToClientIndex(x);P>-1&&R.push(P)}),v(R)}return""},_=",";if(m==T.DWT.EnumDWT_ImageType.IT_BMP||m==T.DWT.EnumDWT_ImageType.IT_JPG||m==T.DWT.EnumDWT_ImageType.IT_PNG){if(u.length>1)return e.Errors.UploadIndexMoreThanOne(p),I(),""}else if(m!=T.DWT.EnumDWT_ImageType.IT_TIF&&m!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(p),I(),"";var C=!1,A=T.dcp.managerVersion.join(""),M=f;(!e.isString(M)||""==M)&&(M="",_="");var E=["[",'"dcp","dwasm_'+A,'",',m,',"',u.join(","),'"',_,M,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",E,!0,!1,!0,function(R){if(R&&e.isArray(R.result)&&R.result.length>0?1==R.result[0]&&R.result.length>1?C=["dcp://dwasm_",A,"/file/",R.result[1]].join(""):void 0!==R.exception&&void 0!==R.description?(p._errorCode=R.exception,p._errorString=R.description):e.Errors.GenerateURL_InvalidRetFromServer(p):e.Errors.GenerateURL_InvalidRetFromServer(p),0==C)return I(),"";if(e.isFunction(g)){var F=[];e.isArray(u)&&e.each(u,function(k){var w=p._ImgManager.convertServerIdToClientIndex(k);w>-1&&F.push(w)}),g(C,F,h)}return C},I)}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var n=e.html5.STwain.prototype,a=e.html5.Funs;n.AddText=function(s,o,l,d,c,u,h,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(g._isMobileMode())return g._mobileNotSupport("AddText");var v=parseInt(s);if(isNaN(v))return e.Errors.InvalidIndex(g),!1;if(v<0||v>=g._ImgManager.count())return e.Errors.IndexOutOfRange(g),!1;var p=e.RGB2BGR(c),m=e.RGB2BGR(u),I=g._ImgManager.convertClientIndexToServerId(v);return-1==I?(e.Errors.IndexOutOfRange(g),!1):g._innerFun("AddText",a.makeParams(I,o,l,d,p,m,h,f))},n.CreateTextFont=function(s,o,l,d,c,u,h,f,g,v,p,m,I,y){var _=this;return _._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("CreateTextFont"):this._innerFun("CreateTextFont",a.makeParams(s,o,l,d,c,u,h,f,g,v,p,m,I,y)))},n.CopyToClipboard=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CopyToClipboard");var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("CopyToClipboard",a.makeParams(d))},n.CopyToClipboardAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CopyToClipboardAsync");var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CopyToClipboard",a.makeParams(d))},n._asyncErase=function(s,o,l,d,c,u,h){var f=this,p=parseInt(s),y=f.__BackgroundFillColor;return e.isUndef(y)?y="FFFFFF":e.isNumber(y)?y=y.toString(16):e.isString(y)&&(y=y.replace("#","")),f._innerSendToMobile("Erase",T.Lib.MobileFuns.makeParams(p,o,l,d,c,y),0,function(){a.refreshImageAfterInvokeFun(f,s),e.isFunction(u)&&setTimeout(u,30)},function(){e.isFunction(h)&&h(f.ErrorCode,f.ErrorString)})},n.Erase=function(s,o,l,d,c,u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;var p,g=parseInt(s);if(isNaN(g))return e.Errors.InvalidIndex(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(g<0||g>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._ImgManager.getView().GetWebViewer().clearSelectedAreas(),f._asyncErase(g,o,l,d,c,u,h);var m=f._ImgManager.convertClientIndexToServerId(g);return-1==m?(e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1):(f._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(p=1==f._innerFun("Erase",a.makeParams(m,o,l,d,c)))?e.isFunction(u)&&u():e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),p)},n.GetImageBitDepth=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return parseInt(d.bitDepth)}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("GetImageBitDepth",a.makeParams(c))},n.GetImageWidth=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),-1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),-1;if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return parseInt(d.width)}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),-1):o._innerFun("GetImageWidth",a.makeParams(c))},n.GetImageHeight=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),-1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),-1;if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return parseInt(d.height)}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),-1):o._innerFun("GetImageHeight",a.makeParams(c))},n.GetImageSize=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return!1;if(d._isMobileMode())return d._mobileNotSupport("GetImageSize");var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),-1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),-1;var u=d._ImgManager.convertClientIndexToServerId(c);return-1==u?(e.Errors.IndexOutOfRange(d),-1):d._innerFun("GetImageSize",a.makeParams(u,o,l))},n.GetImageSizeWithSpecifiedType=function(s,o){var l=this;if(l._resetErr(),!l._isValid())return!1;if(l._isMobileMode())return l._mobileNotSupport("GetImageSizeWithSpecifiedType");var d=parseInt(s);if(isNaN(d))return e.Errors.InvalidIndex(l),-1;if(d<0||d>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),-1;var c=l._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(l),-1):l._innerFun("GetImageSizeWithSpecifiedType",a.makeParams(c,o))},n.GetImageXResolution=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return parseInt(d.resolutionX)}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("GetImageXResolution",a.makeParams(c))},n.GetImageYResolution=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return parseInt(d.resolutionY)}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("GetImageYResolution",a.makeParams(c))},n.SelectAllImages=function(){var l,s=this,o=s.HowManyImagesInBuffer,d=[];if(s._resetErr(),!s._isValid())return!1;for(l=0;l<o;l++)d.push(l);return s._ImgManager.SetSelectedClientIndexArray(d),d},n.SelectImages=function(s){var o=this;return o._resetErr(),!!o._isValid()&&o._ImgManager.SetSelectedClientIndexArray(s)},n._asyncGetSkewAngleOnly=function(s,o,l){var d=this,h=parseInt(s);return d._innerSendToMobile("GetSkewAngleOnly",T.Lib.MobileFuns.makeParams(h),0,function(v){a.refreshImageAfterInvokeFun(d,s),e.isFunction(o)&&setTimeout(function(){o(v)},30)},function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)})},n._asyncGetSkewAngle=function(s,o,l){var d=this,h=parseInt(s);return d._innerSendToMobile("GetSkewAngle",T.Lib.MobileFuns.makeParams(h),0,function(f){a.refreshImageAfterInvokeFun(d,s),e.isFunction(o)&&setTimeout(function(){o(f)},30)},function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)})},n.GetSkewAngle=function(s,o,l){var c,d=this;if(d._resetErr(),!d._isValid())return!1;var h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(h<0||h>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncGetSkewAngle(h,o,l);var f=d._ImgManager.convertClientIndexToServerId(h);if(-1==f)return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c=d._innerFun("GetSkewAngle",a.makeParams(f)),0==d.ErrorCode){if(a.refreshImageAfterInvokeFun(d,h),!e.isFunction(o))return c;o(c)}else e.isFunction(l)&&l(d.ErrorCode,d.ErrorString);return!0},n.GetSkewAngleAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var d=parseInt(s);if(isNaN(d))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(d<0||d>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._innerSendToMobileV2("GetSkewAngle",T.Lib.MobileFuns.makeParams(d)).then(function(u){a.refreshImageAfterInvokeFun(o,d)});var c=o._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetSkewAngle",a.makeParams(c)).then(function(u){var h=u;return e.isArray(u)&&(h=u.length>0?u[0]:0),a.refreshImageAfterInvokeFun(o,d),h})},n.GetSkewAngleEx=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("GetSkewAngleEx");var h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),!1;var f=u._ImgManager.convertClientIndexToServerId(h);return-1==f?(e.Errors.IndexOutOfRange(u),!1):u._innerFun("GetSkewAngleEx",a.makeParams(f,o,l,d,c))},n.IsBlankImageEx=function(s,o,l,d,c,u){var f,h=this;if(h._resetErr(),!h._isValid())return!1;if(h._isMobileMode())return h._mobileNotSupport("IsBlankImageEx");if(f=parseInt(s),isNaN(f))return e.Errors.InvalidIndex(h),!1;if(f<0||f>=h._ImgManager.count())return e.Errors.IndexOutOfRange(h),!1;var g=h._ImgManager.convertClientIndexToServerId(f);return-1==g?(e.Errors.IndexOutOfRange(h),!1):h._innerFun("IsBlankImageEx",a.makeParams(g,o,l,d,c,u))},n.MirrorAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._innerSendToMobileV2("Mirror",T.Lib.MobileFuns.makeParams(l)).then(function(){a.refreshImageAfterInvokeFun(o,l),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("Mirror",a.makeParams(d)).then(function(c){if(1!=c)throw{code:o._errorCode,message:o._errorString};a.refreshImageAfterInvokeFun(o,l),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.Mirror=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._innerSendToMobileV2("Mirror",T.Lib.MobileFuns.makeParams(c)).then(function(){a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),o&&o()},function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)}),!0;var f,u=d._ImgManager.convertClientIndexToServerId(c);return-1==u?(e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):((f=1==d._innerFun("Mirror",a.makeParams(u)))?(a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(o)&&o()):e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),f)},n.RemoveAllImages=function(){var s=this,o=!0,l=s._isMobileMode();if(s._resetErr(),!s._isValid())return!1;var d=s._ImgManager.GetCurrentTag();if(""==d||"All"==d)l?s._OnBitmapChanged(["10","-1",3,-1,0]):((o=s._innerFun("RemoveAllImages"))||-1033==s._errorCode)&&s._OnBitmapChanged(["0","-1",3,-1,0]);else{var c,u=function(){},h=function(){},f=[],g="0";for(l&&(g="10"),c=s.HowManyImagesInBuffer-1;c>=0;c--){var p=s._ImgManager.convertClientIndexToServerId(c);p>-1&&(l||(o=s._innerFunRaw("RemoveImage",a.makeParams(p),!0,!1,!0,u,h))||-1033==s._errorCode)&&f.push(p)}s._OnBitmapChanged([g,f.join(","),3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])}return o},n.RemoveImage=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;var l=parseInt(s),d=!0;if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),!1):(o._isMobileMode()?o._OnBitmapChanged(["10",""+c,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]):((d=o._innerFun("RemoveImage",a.makeParams(c)))||-1033==o._errorCode)&&o._OnBitmapChanged(["0",""+c,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]),d)},n.RemoveAllImagesAsync=function(){var s=this;if(s._resetErr(),!s._isValid())return e.Promise.reject({code:s._errorCode,message:s._errorString});var l=s._ImgManager.GetCurrentTag();if(""==l||"All"==l)return s._isMobileMode()?(s._OnBitmapChanged(["10","-1",3,-1,0]),e.Promise.resolve(!0)):s._innerFunV2("RemoveAllImages").then(function(v){return!(!v&&-1033!=s._errorCode||(s._OnBitmapChanged(["0","-1",3,-1,0]),0))});var d,u,c=[],h=s.HowManyImagesInBuffer;for(d=0;d<h;d++){var f=s._ImgManager.convertClientIndexToServerId(d);f>-1&&c.push(f)}if(s._isMobileMode())u=e.Promise.resolve(c.join(","));else{var g=[];for(u=e.Promise.resolve(0),d=0;d<c.length;d++)u=u.then(function(v){return s._innerFunRawV2("RemoveImage",a.makeParams(c[v])).then(function(p){return(p||-1033==s._errorCode)&&g.push(c[v]),v++})});u=u.then(function(){return g.join(",")})}return u.then(function(v){var p="0";s._isMobileMode()&&(p="10"),""!=v&&s._OnBitmapChanged([p,v,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})},n.RemoveImageAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._isMobileMode()?(o._OnBitmapChanged(["10",""+d,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]),e.Promise.resolve(!0)):o._innerFunV2("RemoveImage",a.makeParams(d)).then(function(c){return!(!c&&-1033!=o._errorCode||(o._OnBitmapChanged(["0",""+d,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]),0))})},n._removeImageById=function(s,o,l){var d=this;return d._innerFunRaw("RemoveImage",a.makeParams(s),!0,!1,!0,function(){d._OnBitmapChanged(["0",""+s,3,d._ImgManager.getCurrentImageIndex(),d._ImgManager.count()]),e.isFunction(o)&&o()},l)},n._asyncRotateEx=function(s,o,l,d){var c=this,u=parseInt(s),h=c.__BackgroundFillColor;return e.isUndef(h)?h="FFFFFF":e.isNumber(h)?h="0x"+h.toString(16):e.isString(h)&&(h=h.replace("#","")),c._innerSendToMobileV2("RotateEx",T.Lib.MobileFuns.makeParams(u,o,l,d,h)).then(function(){a.refreshImageAfterInvokeFun(c,s),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.Rotate=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return!1;var g,h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),!1;if(u._isMobileMode())return u._asyncRotateEx(h,o,l,-1).then(d,function(){e.isFunction(c)&&c(u.ErrorCode,u.ErrorString)}),!0;var v=u._ImgManager.convertClientIndexToServerId(h);return-1==v?(e.Errors.IndexOutOfRange(u),e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),!1):((g=1==u._innerFun("Rotate",a.makeParams(v,o,l)))?(a.refreshImageAfterInvokeFun(u,h),u._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(d)&&d()):e.isFunction(c)&&c(u.ErrorCode,u.ErrorString),g)},n.RotateEx=function(s,o,l,d,c,u){var h=this;if(h._resetErr(),!h._isValid())return!1;var v,f=parseInt(s);if(isNaN(f))return e.Errors.InvalidIndex(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1;if(f<0||f>=h._ImgManager.count())return e.Errors.IndexOutOfRange(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1;if(h._isMobileMode())return h._asyncRotateEx(f,o,l,d).then(c,function(){e.isFunction(u)&&u(h.ErrorCode,h.ErrorString)}),!0;var p=h._ImgManager.convertClientIndexToServerId(f);return-1==p?(e.Errors.IndexOutOfRange(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1):((v=1==h._innerFun("RotateEx",a.makeParams(p,o,l,d)))?(a.refreshImageAfterInvokeFun(h,f),h._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(c)&&c()):e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),v)},n.RotateLeft=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var h,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncRotateEx(c,-90,!0,-1).then(o,function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)}),!0;var f=d._ImgManager.convertClientIndexToServerId(c);return-1==f?(e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):((h=1==d._innerFun("RotateLeft",a.makeParams(f)))?(a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(o)&&o()):e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),h)},n.RotateRight=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var h,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncRotateEx(c,90,!0,-1).then(o,function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)}),!0;var f=d._ImgManager.convertClientIndexToServerId(c);return-1==f?(e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):((h=1==d._innerFun("RotateRight",a.makeParams(f)))?(a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(o)&&o()):e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),h)},n.RotateAsync=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return e.Promise.reject({code:d._errorCode,message:d._errorString});var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.Promise.reject({code:d._errorCode,message:d._errorString});if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.Promise.reject({code:d._errorCode,message:d._errorString});if(d._isMobileMode())return d._asyncRotateEx(c,o,l,-1);var u=d._ImgManager.convertClientIndexToServerId(c);return-1==u?(e.Errors.IndexOutOfRange(d),e.Promise.reject({code:d._errorCode,message:d._errorString})):d._innerFunV2("Rotate",a.makeParams(u,o,l)).then(function(h){if(1!=h)throw{code:d._errorCode,message:d._errorString};a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.RotateExAsync=function(s,o,l,d){var c=this;if(c._resetErr(),!c._isValid())return e.Promise.reject({code:c._errorCode,message:c._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(u<0||u>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(c._isMobileMode())return c._asyncRotateEx(u,o,l,d);var h=c._ImgManager.convertClientIndexToServerId(u);return-1==h?(e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("RotateEx",a.makeParams(h,o,l,d)).then(function(f){if(1!=f)throw{code:c._errorCode,message:c._errorString};a.refreshImageAfterInvokeFun(c,u),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.RotateLeftAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncRotateEx(l,-90,!0,-1);var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("RotateLeft",a.makeParams(d)).then(function(c){if(1!=c)throw{code:o._errorCode,message:o._errorString};a.refreshImageAfterInvokeFun(o,l),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.RotateRightAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncRotateEx(l,90,!0,-1);var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("RotateRight",a.makeParams(d)).then(function(c){if(1!=c)throw{code:o._errorCode,message:o._errorString};a.refreshImageAfterInvokeFun(o,l),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n._asyncChangeImageSize=function(s,o,l,d){var c=this,u=parseInt(s),h=parseInt(o),f=parseInt(l);return c._innerSendToMobileV2("ChangeImageSize",T.Lib.MobileFuns.makeParams(u,h,f,d)).then(function(){a.refreshImageAfterInvokeFun(c,s)})},n.ChangeImageSize=function(s,o,l,d,c,u){var m,h=this,f=parseInt(s),g=1*o,v=1*l;if(h._resetErr(),!h._isValid())return!1;if(isNaN(f))return e.Errors.InvalidIndex(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1;if(f<0||f>=h._ImgManager.count())return e.Errors.IndexOutOfRange(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1;if(g<=0||v<=0)return e.Errors.InvalidWidthOrHeight(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1;if(h._isMobileMode())return h._asyncChangeImageSize(f,o,l,d).then(c,function(){e.isFunction(u)&&u(h.ErrorCode,h.ErrorString)}),!0;var I=h._ImgManager.convertClientIndexToServerId(f);return-1==I?(e.Errors.IndexOutOfRange(h),e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),!1):((m=1==h._innerFun("ChangeImageSize",a.makeParams(I,g,v,d)))?(a.refreshImageAfterInvokeFun(h,f),e.isFunction(c)&&c()):e.isFunction(u)&&u(h.ErrorCode,h.ErrorString),m)},n.ChangeImageSizeAsync=function(s,o,l,d){var c=this,u=parseInt(s),h=1*o,f=1*l;if(c._resetErr(),!c._isValid())return e.Promise.reject({code:c._errorCode,message:c._errorString});if(isNaN(u))return e.Errors.InvalidIndex(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(u<0||u>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(h<=0||f<=0)return e.Errors.InvalidWidthOrHeight(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(c._isMobileMode())return c._asyncChangeImageSize(u,o,l,d);var g=c._ImgManager.convertClientIndexToServerId(u);return-1==g?(e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("ChangeImageSize",a.makeParams(g,h,f,d)).then(function(v){if(1!=v)throw{code:c._errorCode,message:c._errorString};a.refreshImageAfterInvokeFun(c,u)})},n._asyncFlip=function(s){var o=this,l=parseInt(s);return o._innerSendToMobileV2("Flip",T.Lib.MobileFuns.makeParams(l)).then(function(){a.refreshImageAfterInvokeFun(o,s),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n.Flip=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var h,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncFlip(c).then(o,function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)}),!0;var f=d._ImgManager.convertClientIndexToServerId(c);return-1==f?(e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):((h=1==d._innerFun("Flip",a.makeParams(f)))?(a.refreshImageAfterInvokeFun(d,c),d._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(o)&&o()):e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),h)},n.FlipAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncFlip(l);var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("Flip",a.makeParams(d)).then(function(c){if(1!=c)throw{code:o._errorCode,message:o._errorString};a.refreshImageAfterInvokeFun(o,l),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},n._asyncCrop=function(s,o,l,d,c){var u=this,h=parseInt(s);return u._innerSendToMobileV2("Crop",T.Lib.MobileFuns.makeParams(h,o,l,d,c)).then(function(){var f,g;a.refreshImageAfterInvokeFun(u,s),f=u.ErrorCode,g=u.ErrorString,u._ImgManager.getView().GetWebViewer().clearSelectedAreas(),u._errorCode=f,u._errorString=g})},n.Crop=function(s,o,l,d,c,u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;var p,g=parseInt(s);if(isNaN(g))return e.Errors.InvalidIndex(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(g<0||g>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncCrop(g,o,l,d,c).then(u,function(){e.isFunction(h)&&h(f.ErrorCode,f.ErrorString)}),!0;var I,y,m=f._ImgManager.convertClientIndexToServerId(g);return-1==m?(e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1):(p=1==f._innerFun("Crop",a.makeParams(m,o,l,d,c)),I=f.ErrorCode,y=f.ErrorString,f._ImgManager.getView().GetWebViewer().clearSelectedAreas(),f._errorCode=I,f._errorString=y,p?(a.refreshImageAfterInvokeFun(f,g),e.isFunction(u)&&u()):e.isFunction(h)&&h(I,y),p)},n.CropAsync=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});var h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._asyncCrop(h,o,l,d,c);var f=u._ImgManager.convertClientIndexToServerId(h);return-1==f?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("Crop",a.makeParams(f,o,l,d,c)).then(function(g){var v,p;if(v=u.ErrorCode,p=u.ErrorString,u._ImgManager.getView().GetWebViewer().clearSelectedAreas(),u._errorCode=v,u._errorString=p,1!=g)throw{code:u._errorCode,message:u._errorString};return a.refreshImageAfterInvokeFun(u,h),!0})},n.CropToClipboard=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("CropToClipboard");var g,h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),!1;var v=u._ImgManager.convertClientIndexToServerId(h);return-1==v?(e.Errors.IndexOutOfRange(u),!1):(u._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(g=1==u._innerFun("CropToClipboard",a.makeParams(v,o,l,d,c)))&&a.refreshImageAfterInvokeFun(u,h),g)},n.CutFrameToClipboard=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("CutFrameToClipboard");var g,h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),!1;var v=u._ImgManager.convertClientIndexToServerId(h);return-1==v?(e.Errors.IndexOutOfRange(u),!1):(u._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(g=1==u._innerFun("CutFrameToClipboard",a.makeParams(v,o,l,d,c)))&&a.refreshImageAfterInvokeFun(u,h),g)},n.CutToClipboard=function(s){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CutToClipboard");var c,l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),!1;if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var u=o._ImgManager.convertClientIndexToServerId(l);return-1==u?(e.Errors.IndexOutOfRange(o),!1):((c=1==o._innerFun("CutToClipboard",a.makeParams(u)))&&o._OnBitmapChanged(["0",""+u,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]),c)},n.CutFrameToClipboardAsync=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._mobileNotSupportAsync("CutFrameToClipboardAsync");var h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString});var v=u._ImgManager.convertClientIndexToServerId(h);return-1==v?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("CutFrameToClipboard",a.makeParams(v,o,l,d,c)).then(function(p){var m=1==p;if(!m)throw{code:u._errorCode,message:u._errorString};return a.refreshImageAfterInvokeFun(u,h),m})},n.CropToClipboardAsync=function(s,o,l,d,c){var u=this;if(u._resetErr(),!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._mobileNotSupportAsync("CropToClipboardAsync");var h=parseInt(s);if(isNaN(h))return e.Errors.InvalidIndex(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString});var f=u._ImgManager.convertClientIndexToServerId(h);return-1==f?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("CropToClipboard",a.makeParams(f,o,l,d,c)).then(function(g){var v=1==g;if(!v)throw{code:u._errorCode,message:u._errorString};return a.refreshImageAfterInvokeFun(u,h),v})},n.CutToClipboardAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CutToClipboardAsync");var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var d=o._ImgManager.convertClientIndexToServerId(l);return-1==d?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CutToClipboard",a.makeParams(d)).then(function(c){var u=1==c;if(!u)throw{code:o._errorCode,message:o._errorString};return o._OnBitmapChanged(["0",""+d,3,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count()]),u})},n._asyncSetDPI=function(s,o,l,d,c,u,h,f){var g=this,m=parseInt(s),I=parseInt(l),y=parseInt(d),_=parseInt(u);return isNaN(I)||I<=0||isNaN(y)||y<=0||isNaN(_)||_<0?(e.Errors.InvalidParameter(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1):g._innerSendToMobile("SetDPI",T.Lib.MobileFuns.makeParams(m,I,y,c,_),0,function(){a.refreshImageAfterInvokeFun(g,s),e.isFunction(h)&&setTimeout(h,30)},function(){e.isFunction(f)&&f(g.ErrorCode,g.ErrorString)})},n.SetDPI=function(s,o,l,d,c,u,h){var v,f=this;if(f._resetErr(),!f._isValid())return!1;var p=parseInt(s);if(isNaN(p))return e.Errors.InvalidIndex(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(p<0||p>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;var m=f._ImgManager.convertClientIndexToServerId(p);return-1==m?(e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1):f._isMobileMode()?f._asyncSetDPI(p,m,o,l,d,c,u,h):((v=1==f._innerFun("SetDPI",a.makeParams(m,o,l,d,c)))?e.isFunction(u)&&u():e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),v)},n.MoveImage=function(s,o){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(s),c=parseInt(o);return isNaN(d)||isNaN(c)?(e.Errors.InvalidIndex(l),!1):d<0||d>=l._ImgManager.count()||c<0||c>=l._ImgManager.count()?(e.Errors.IndexOutOfRange(l),!1):l._ImgManager.MoveImage(d,c)},n.SwitchImage=function(s,o){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(s),c=parseInt(o);return isNaN(d)||isNaN(c)?(e.Errors.InvalidIndex(l),!1):d<0||d>=l._ImgManager.count()||c<0||c>=l._ImgManager.count()?(e.Errors.IndexOutOfRange(l),!1):l._ImgManager.SwitchImage(d,c)},n.CloseWorkingProcess=function(){var s=this;return s._resetErr(),!!s._isValid()&&(s._isMobileMode()?s._mobileNotSupport("CloseWorkerProcess"):s._innerFun("CloseWorkerProcess"))},n.RemoveAllSelectedImages=function(){var s=this,o=s._isMobileMode();if(s._resetErr(),!s._isValid())return!1;var l=!0,d=s._ImgManager.getCurrentImageIndex(),c=s._ImgManager.getSelectedClientIndexArray(),u=[];if(e.isArray(c)&&e.each(c,function(f){var g=s._ImgManager.convertClientIndexToServerId(f);-1!=g&&u.push(g)}),0==u.length&&d>=0){var h=s._ImgManager.convertClientIndexToServerId(d);u.push(h)}return o||(l=s._innerFun("RemoveAllSelectedImages",a.makeParams(u.join(",")))),l&&(o||(s._HowManyImagesInBuffer=s._innerFun("HowManyImagesInBuffer")),e.each(u,function(f){var g="0";s._isMobileMode()&&(g="10"),s._OnBitmapChanged([g,""+f,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})),l},n.RemoveAllSelectedImagesAsync=function(){var s=this,o=s._isMobileMode();if(s._resetErr(),!s._isValid())return e.Promise.reject({code:s._errorCode,message:s._errorString});var d=s._ImgManager.getCurrentImageIndex(),c=s._ImgManager.getSelectedClientIndexArray(),u=[];if(e.isArray(c)&&e.each(c,function(g){var v=s._ImgManager.convertClientIndexToServerId(g);-1!=v&&u.push(v)}),0==u.length&&d>=0){var f=s._ImgManager.convertClientIndexToServerId(d);u.push(f)}return(o?e.Promise.resolve(!0):s._innerFunV2("RemoveAllSelectedImages",a.makeParams(u.join(","))).then(function(g){return g&&s._innerFunV2("HowManyImagesInBuffer").then(function(v){return s._HowManyImagesInBuffer=v,!0})})).then(function(g){g&&e.each(u,function(v){var p="0";s._isMobileMode()&&(p="10"),s._OnBitmapChanged([p,""+v,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})})},n.TagImages=function(s,o){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=!0,c=l._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();return e.isArray(s)?e.isString(o)&&""!=o?(e.each(s,function(u){if(isNaN(u)||u<0||u>=c)return e.Errors.IndexOutOfRange(l),d=!1}),d&&l._ImgManager.AddImageTag(s,o)):(e.Errors.InvalidTagName(l),!1):(e.Errors.IndicesNotArray(l),!1)},n.ClearImageTags=function(s){var o=this;return o._resetErr(),!!o._isValid()&&(-1==s||s>=o.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(o),!1):o._ImgManager.RemoveImageTag(s))},n.SetDefaultTag=function(s){var o=this;return o._resetErr(),!!o._isValid()&&o._ImgManager.SetDefaultTag(s)},n.FilterImagesByTag=function(s,o,l){var d=this;return d._resetErr(),!!d._isValid()&&d._ImgManager.ShowImagesByFilter(s,o,l)},n.ClearFilter=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.ClearFilter()},n.CreateFile=function(s){var o=this;return o._resetErr(),!!o._isValid()&&(s&&""!=s?e.isString(s)?o._ImgManager.CreateFile(s):(e.Errors.FileNameNotString(o),!1):(e.Errors.FileNameCannotEmpty(o),!1))},n.OpenFile=function(s){var o=this;return o._resetErr(),!!o._isValid()&&(s&&""!=s?e.isString(s)?o._ImgManager.OpenFile(s):(e.Errors.FileNameNotString(o),!1):(e.Errors.FileNameCannotEmpty(o),!1))},n.GetCurrentFileName=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetCurrentFileName()},n.RemoveFile=function(s){var o=this,l=o._isMobileMode();if(o._resetErr(),!o._isValid())return!1;if(!l){var d=o._ImgManager.GetImageIdsByFileName(s);o._innerFun("RemoveAllSelectedImages",a.makeParams(d.join(",")))}return o._ImgManager.RemoveFile(s)},n.GetFileInfoList=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetFileInfoList()},n._asyncInvert=function(s){var o=this,l=parseInt(s);return o._innerSendToMobileV2("Invert",T.Lib.MobileFuns.makeParams(l)).then(function(){a.refreshImageAfterInvokeFun(o,s)})},n.Invert=function(s,o,l){var h,d=this,c=parseInt(s);if(d._resetErr(),!d._isValid())return!1;if(isNaN(c))return e.Errors.InvalidIndex(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncInvert(c).then(o,function(){e.isFunction(l)&&l(d.ErrorCode,d.ErrorString)}),!0;var f=d._ImgManager.convertClientIndexToServerId(c);return-1==f?(e.Errors.IndexOutOfRange(d),e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):((h=1==d._innerFun("Invert",a.makeParams(f)))?(a.refreshImageAfterInvokeFun(d,c),e.isFunction(o)&&o()):e.isFunction(l)&&l(d.ErrorCode,d.ErrorString),h)},n.InvertAsync=function(s){var o=this,l=parseInt(s);if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncInvert(l);var u=o._ImgManager.convertClientIndexToServerId(l);return-1==u?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("Invert",a.makeParams(u)).then(function(h){var f=1==h;if(!f)throw{code:o._errorCode,message:o._errorString};return a.refreshImageAfterInvokeFun(o,l),f})},n.RenameTag=function(s,o){var l=this;return l._resetErr(),!!l._isValid()&&(e.isUndefined(s)?(e.Errors.ParameterCannotEmpty(l),!1):0==s.length?(e.Errors.OldTagNameRequired(l),!1):e.isUndefined(o)||0==o.length?(e.Errors.NewTagNameRequired(l),!1):l._ImgManager.RenameTag(s,o))},n.RemoveTag=function(s,o){var l=this;return l._resetErr(),!!l._isValid()&&(e.isUndefined(s)||0==s.length?(e.Errors.ParameterCannotEmpty(l),!1):e.isUndefined(o)||e.isArray(o)?l._ImgManager.RemoveTag(s,o):(e.Errors.IndicesNotArray(l),!1))},n.GetTagList=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetTagList()},n.GetTagListByIndex=function(s){var o=this;return o._resetErr(),!!o._isValid()&&o._ImgManager.GetTagListByIndex(s)},n._registLoadCallback=function(s){var o=this;return o._resetErr(),!!o._isValid()&&o._ImgManager.RegistLoadCallback(s)},n.GetImageBitDepthAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return e.Promise.resolve(parseInt(d.bitDepth))}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetImageBitDepth",a.makeParams(c))},n.GetImageWidthAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return e.Promise.resolve(parseInt(d.width))}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetImageWidth",a.makeParams(c))},n.GetImageHeightAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return e.Promise.resolve(parseInt(d.height))}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetImageHeight",a.makeParams(c))},n.GetImageSizeAsync=function(s,o,l){var d=this;if(d._resetErr(),!d._isValid())return e.Promise.reject({code:d._errorCode,message:d._errorString});if(d._isMobileMode())return d._mobileNotSupportAsync("GetImageSizeAsync");var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(d),e.Promise.reject({code:d._errorCode,message:d._errorString});if(c<0||c>=d._ImgManager.count())return e.Errors.IndexOutOfRange(d),e.Promise.reject({code:d._errorCode,message:d._errorString});var u=d._ImgManager.convertClientIndexToServerId(c);return-1==u?(e.Errors.IndexOutOfRange(d),e.Promise.reject({code:d._errorCode,message:d._errorString})):d._innerFunV2("GetImageSize",a.makeParams(u,o,l))},n.GetImageSizeWithSpecifiedTypeAsync=function(s,o){var l=this;if(l._resetErr(),!l._isValid())return e.Promise.reject({code:l._errorCode,message:l._errorString});if(l._isMobileMode())return l._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync");var d=parseInt(s);if(isNaN(d))return e.Errors.InvalidIndex(l),e.Promise.reject({code:l._errorCode,message:l._errorString});if(d<0||d>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString});var c=l._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("GetImageSizeWithSpecifiedType",a.makeParams(c,o))},n.GetImageXResolutionAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return e.Promise.resolve(parseInt(d.resolutionX))}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetImageXResolution",a.makeParams(c))},n.GetImageYResolutionAsync=function(s){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(l<0||l>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode()){var d=o._ImgManager._UIView.GetMetaDataByIndex(l);return e.Promise.resolve(parseInt(d.resolutionY))}var c=o._ImgManager.convertClientIndexToServerId(l);return-1==c?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("GetImageYResolution",a.makeParams(c))},n.ChangeBrightnessAsync=function(s,o){var l=this,d=parseInt(s);if(!l._isValid())return e.Promise.reject({code:l._errorCode,message:l._errorString});if(o<-1e3||o>1e3)return e.Errors.InvalidValue(l),e.Promise.reject({code:l._errorCode,message:l._errorString});if(l._isMobileMode())return l._innerSendToMobileV2("ChangeBrightness",T.Lib.MobileFuns.makeParams(d,o)).then(function(){a.refreshImageAfterInvokeFun(l,s),l._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var c=l._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("ChangeBrightness",a.makeParams(c,o))},n.ChangeContrastAsnyc=function(s,o){var l=this,d=parseInt(s);if(!l._isValid())return e.Promise.reject({code:l._errorCode,message:l._errorString});if(o<-1e3||o>1e3)return e.Errors.InvalidValue(l),e.Promise.reject({code:l._errorCode,message:l._errorString});if(l._isMobileMode())return l._innerSendToMobileV2("ChangeContrast",T.Lib.MobileFuns.makeParams(d,o)).then(function(){a.refreshImageAfterInvokeFun(l,s),l._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var c=l._ImgManager.convertClientIndexToServerId(d);return-1==c?(e.Errors.IndexOutOfRange(l),e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("ChangeContrast",a.makeParams(c,o))}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var n=e,a=e.html5.STwain,s=a.prototype,o=!1,l=!0,d=e.html5.Funs,c=function(_,C){return 0!=_._ImgManager.count()||(e.Errors.NoImage(_),e.isFunction(C)&&C(_.ErrorCode,_.ErrorString),!1)},u=function(_,C,A){return!(!c(_,A)||(isNaN(C)||!e.isNumber(C)||C<0||C>=_._ImgManager.count())&&(e.Errors.IndexOutOfRange(_),e.isFunction(A)&&A(_.ErrorCode,_.ErrorString),1))},h=function(_,C,A,M){if(0==_._ImgManager.count())return e.Errors.NoImage(_),e.isFunction(M)&&M(C),!1;if(e.isNumber(C)){if(isNaN(C)||C<-2||C>=_._ImgManager.count())return e.Errors.IndexOutOfRange(_),e.isFunction(M)&&M(C),!1}else{if(!e.isArray(C))return e.Errors.IndexOutOfRange(_),e.isFunction(M)&&M(C),!1;var E;for(E=0;E<C.length;E++){var R=C[E];if(isNaN(R)||!e.isNumber(R)||R<0||R>=_._ImgManager.count())return e.Errors.IndicesOutOfRange(_),e.isFunction(M)&&M(C),!1}}if(A==T.DWT.EnumDWT_ImageType.IT_BMP||A==T.DWT.EnumDWT_ImageType.IT_JPG||A==T.DWT.EnumDWT_ImageType.IT_PNG||A==T.DWT.EnumDWT_ImageType.IT_J2K)(-1==C&&_._ImgManager.count()>1||e.isArray(C)&&C.length>1)&&(e.Errors.UploadIndexMoreThanOne(_),e.isFunction(M)&&M(C));else if(A!=T.DWT.EnumDWT_ImageType.IT_TIF&&A!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(_),e.isFunction(M)&&M(C),!1;return!0},f=function(_){var A,M,E,C=[];return _._ImgManager.count()<=0||((M=_._ImgManager.getCurrentImageIndex())>=0&&(A=_._ImgManager.convertClientIndexToServerId(M)),E=_._ImgManager.getSelectedClientIndexArray(),e.isArray(E)&&e.each(E,function(R){var x=_._ImgManager.convertClientIndexToServerId(R);-1!=x&&C.push(x)}),-1!=A&&0==C.length&&C.push(A)),C},g=function(_){if(_._ImgManager.count()<=0)return[];var C=_._ImgManager.getSelectedClientIndexArray();if(e.isArray(C)){if(0==C.length){var A=_._ImgManager.getCurrentImageIndex();A>=0&&C.push(A)}return C}return[]},v=function(_,C){for(var A=_._ImgManager.GetAllServerIdList(),M=0;M<A.length;M++)C.push(A[M])},p=function(_,C,A,M,E){try{_(C,A,M,E)}catch(R){}C=A=M=E=null},m=function(_,C,A){try{_(C.ErrorCode,C.ErrorString,A)}catch(M){}C=A=null},I=function(_,C,A,M,E,R){try{_(C.ErrorCode,C.ErrorString,A,M,E,R)}catch(x){}C=A=M=E=R=null};s._asyncSaveImage=function(_,C,A,M,E){var R=this,x=e.isString(A)?A.toLowerCase():"",P=function(ue,X,pe){var B=_;if(n.isString(B)&&""!=B?(B=n.replaceAll(B,"\\\\","_"),B=n.replaceAll(B,":","_")):B="img"+n.getRandom()+"."+x,!L&&e.isString(ue)){var G=["png"==X?"data:image/png;base64,":"jpg"==X?"data:image/jpeg;base64,":"tiff"==X||"tif"==X?"data:image/tif;base64,":"pdf"==X?"data:application/pdf;base64,":"bmp"==X?"data:image/bmp;base64,":"jp2"==X?"data:image/jp2;base64,":"data:application/octet-stream;base64,",ue].join("");n.MobileFuns.saveLocal(G,B,x)}else n.MobileFuns.saveLocal(ue,B,x);d.refreshImageAfterInvokeFun(R,C),e.isFunction(M)&&setTimeout(M,30)},F=function(){e.isFunction(E)&&E(R.ErrorCode,R.ErrorString)},k=window,w=T.navInfo,L=!0;if((w.biPad||w.biPhone)&&!(k.requestFileSystem||k.webkitRequestFileSystem||k.mozRequestFileSystem)&&(w.bSafari&&parseFloat(w.strBrowserVersion)<13||!w.bSafari)){L=!1;var Z;Z="png"==x?T.DWT.EnumDWT_ImageType.IT_PNG:"jpg"==x?T.DWT.EnumDWT_ImageType.IT_JPG:"tiff"==x||"tif"==x?T.DWT.EnumDWT_ImageType.IT_TIF:"pdf"==x?T.DWT.EnumDWT_ImageType.IT_PDF:"bmp"==x?T.DWT.EnumDWT_ImageType.IT_BMP:"jp2"==x?T.DWT.EnumDWT_ImageType.IT_J2K:T.DWT.EnumDWT_ImageType.IT_PNG;var ne=[];return e.isArray(C)&&e.each(C,function(ue){var X=R._ImgManager.convertClientIndexToServerId(ue);-1!=X&&ne.push(X)}),R.__innerConvertToBase64ByMobile(_,ne,Z,1,function(ue){var X=ue&&ue.result;if(e.isArray(X)&&3==X.length)return P(X[0],X[1])},F)}return R._innerSendToMobile("SaveImage",T.Lib.MobileFuns.makeParams(_,C,x,1,L),0,P,F)},s.SaveAllAsMultiPageTIFF=function(_,C,A){var M=this;if(M._resetErr(),!M._isValid())return!1;if(!e.License.checkProductKey(M,{Core:!0})&&!e.License.checkProductKey(M,{Webcam:!0},!0))return e.isFunction(A)&&A(M.ErrorCode,M.ErrorString),!1;if(!c(M,A))return!1;var E=[],R=d.replaceLocalFilename(_);if(M._isMobileMode()){if(!R||""==R)return e.Errors.InvalidFile(M),e.isFunction(A)&&m(A,M),!1;for(var x=[],P=0;P<M.HowManyImagesInBuffer;P++)x.push(P);return M._asyncSaveImage(_,x,"tiff",C,A)}return v(M,E),M.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(R,E.join(",")),C,A)},s.SaveAllAsPDF=function(_,C,A){var M=this;if(M._resetErr(),!M._isValid())return!1;if(!e.License.checkProductKey(M,{Core:!0})&&!e.License.checkProductKey(M,{Webcam:!0},!0))return e.isFunction(A)&&A(M.ErrorCode,M.ErrorString),!1;if(!c(M,A))return!1;var E=[],R=d.replaceLocalFilename(_);if(M._isMobileMode()){if(!R||""==R)return e.Errors.InvalidFile(M),e.isFunction(A)&&m(A,M),!1;for(var x=[],P=0;P<M.HowManyImagesInBuffer;P++)x.push(P);return M._asyncSaveImage(_,x,"pdf",C,A)}return v(M,E),M.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(R,E.join(",")),C,A)},s.SaveAsBMP=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("SaveAsBMP",M);if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;var x,R=d.replaceLocalFilename(_);return!!u(E,C,M)&&(-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsBMP",d.makeParams(R,x),A,M))},s.SaveAsJPEG=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;if(!u(E,C,M))return!1;var x,R=d.replaceLocalFilename(_);return E._isMobileMode()?R&&""!=R?E._asyncSaveImage(_,[C],"jpg",A,M):(e.Errors.InvalidFile(E),e.isFunction(M)&&m(M,E),!1):-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsJPEG",d.makeParams(R,x),A,M)},s.SaveAsPDF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;if(!u(E,C,M))return!1;var x,R=d.replaceLocalFilename(_);return E._isMobileMode()?R&&""!=R?E._asyncSaveImage(_,[C],"pdf",A,M):(e.Errors.InvalidFile(E),e.isFunction(M)&&m(M,E),!1):-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsPDF",d.makeParams(R,x),A,M)},s.SaveAsPNG=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;if(!u(E,C,M))return!1;var x,R=d.replaceLocalFilename(_);return E._isMobileMode()?R&&""!=R?E._asyncSaveImage(_,[C],"png",A,M):(e.Errors.InvalidFile(E),e.isFunction(M)&&m(M,E),!1):-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsPNG",d.makeParams(R,x),A,M)},s.SaveAsTIFF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;if(!u(E,C,M))return!1;var x,R=d.replaceLocalFilename(_);return E._isMobileMode()?R&&""!=R?E._asyncSaveImage(_,[C],"tiff",A,M):(e.Errors.InvalidFile(E),e.isFunction(M)&&m(M,E),!1):-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsTIFF",d.makeParams(R,x),A,M)},s.SaveAsGIF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return e.Errors.HTML5NotSupport(E),e.isFunction(M)&&m(M,E),o;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;var x,R=d.replaceLocalFilename(_);return!!u(E,C,M)&&(-1==(x=E._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(E),e.isFunction(M)&&m(M,E),!1):E.__innerSaveImage("SaveAsGIF",d.makeParams(R,x),A,M))},s.SaveSelectedImagesAsMultiPagePDF=function(_,C,A){var M=this;if(M._resetErr(),!M._isValid())return!1;if(!e.License.checkProductKey(M,{Core:!0})&&!e.License.checkProductKey(M,{Webcam:!0},!0))return e.isFunction(A)&&A(M.ErrorCode,M.ErrorString),!1;var E=d.replaceLocalFilename(_);if(M._isMobileMode()){if(!E||""==E)return e.Errors.InvalidFile(M),e.isFunction(A)&&m(A,M),!1;var R=g(M);return M._asyncSaveImage(_,R,"pdf",C,A)}var x=f(M);return M.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(E,x.join(",")),C,A)},s.SaveSelectedImagesAsMultiPageTIFF=function(_,C,A){var M=this;if(M._resetErr(),!M._isValid())return!1;if(!e.License.checkProductKey(M,{Core:!0})&&!e.License.checkProductKey(M,{Webcam:!0},!0))return e.isFunction(A)&&A(M.ErrorCode,M.ErrorString),!1;var E=d.replaceLocalFilename(_);if(M._isMobileMode()){if(!E||""==E)return e.Errors.InvalidFile(M),e.isFunction(A)&&m(A,M),!1;var R=g(M);return M._asyncSaveImage(_,R,"tiff",C,A)}var x=f(M);return M.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(E,x.join(",")),C,A)},s.SaveSelectedImagesToBase64Binary=function(_,C){var A=this;if(A._resetErr(),!A._isValid())return!1;if(!e.License.checkProductKey(A,{Core:!0})&&!e.License.checkProductKey(A,{Webcam:!0},!0))return e.isFunction(C)&&C(A.ErrorCode,A.ErrorString),!1;if(A._isMobileMode())return A._mobileNotSupport("SaveSelectedImagesToBase64Binary",C);var M=f(A);return e.isFunction(_)?A._innerSend("SaveSelectedImagesToBase64Binary",d.makeParams(M.join(",")),!0,_,C):A._innerFun("SaveSelectedImagesToBase64Binary",d.makeParams(M.join(",")))},s.ShowFileDialog=function(_,C,A,M,E,R,x,P){var F=this;if(F._resetErr(),!F._isValid())return!1;if(F._isMobileMode())return F._mobileNotSupport("ShowFileDialog");var w,k=d.replaceLocalFilename(E);return w=F.__GetLoadEventsNum(),F._innerSend("ShowFileDialog",d.makeParams(_,C,A,M,k,R,x,P,w),!0)},s.FTPDownload=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPDownload",M);if(!_)return e.Errors.InvalidParameter(E),e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;var R=e.html5.Funs.getImageType(C);return E.__innerFTPDownload("FTPDownload",d.makeParams(_,C),R,A,M)},s.FTPDownloadEx=function(_,C,A,M,E){var R=this;return R._resetErr(),!!R._isValid()&&(R._isMobileMode()?R._mobileNotSupport("FTPDownloadEx",E):_?R.__innerFTPDownload("FTPDownloadEx",d.makeParams(_,C,A),A,M,E):(e.Errors.InvalidParameter(R),e.isFunction(E)&&E(R.ErrorCode,R.ErrorString),!1))},s.FTPUpload=function(_,C,A,M,E){var R=this;if(R._resetErr(),!R._isValid())return!1;if(R._isMobileMode())return R._mobileNotSupport("FTPUpload",E);var x=R._ImgManager.convertClientIndexToServerId(C);return!!u(R,C,E)&&(-1==x?(e.Errors.IndexOutOfRange(R),e.isFunction(E)&&m(E,R),!1):R.__innerFTPUpload("FTPUpload",d.makeParams(_,x,A),M,E))},s.FTPUploadEx=function(_,C,A,M,E,R){var P,x=this;return x._resetErr(),!!x._isValid()&&(x._isMobileMode()?x._mobileNotSupport("FTPUploadEx",R):!!u(x,C,R)&&(-1==(P=x._ImgManager.convertClientIndexToServerId(C))?(e.Errors.IndexOutOfRange(x),e.isFunction(R)&&m(R,x),!1):x.__innerFTPUpload("FTPUploadEx",d.makeParams(_,P,A,M),E,R)))},s.FTPUploadAllAsMultiPageTIFF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",M);var R=[];return v(E,R),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(_,C,R.join(",")),A,M)},s.FTPUploadAllAsPDF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAllAsPDF",M);var R=[];return v(E,R),E.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(_,C,R.join(",")),A,M)},s.FTPUploadAsMultiPagePDF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAsMultiPagePDF",M);var R=f(E);return E.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(_,C,R.join(",")),A,M)},s.FTPUploadAsMultiPageTIFF=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAsMultiPageTIFF",M);var R=f(E);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(_,C,R.join(",")),A,M)},s.HTTPDownload=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return e.Promise.reject({code:E.ErrorCode,message:E.ErrorString});var R=d.getImageType(C);return E.HTTPDownloadThroughGet(_,C,R,A,M)},a.prototype.HTTPDownloadEx=function(_,C,A,M,E){var R=this;return R._resetErr(),R._isValid()?R._isMobileMode()?R._mobileNotSupport("HTTPDownloadEx",E):R.HTTPDownloadThroughGet(_,C,A,M,E):e.Promise.reject({code:R.ErrorCode,message:R.ErrorString})},s.HTTPDownloadDirectly=function(_,C,A,M,E){var R=this;if(R._resetErr(),!R._isValid())return!1;if(!e.License.checkProductKey(R,{Core:!0}))return e.isFunction(E)&&E(R.ErrorCode,R.ErrorString),!1;if(R._isMobileMode())return R._mobileNotSupport("HTTPDownloadDirectly",E);var F,w,x=y.GetHttpHeadersAndClear(R),P=d.combineUrl(R,_,C);if(!1===P)return e.Errors.ParameterCannotEmpty(R),!1;if(!A||""==A)return e.Errors.InvalidLocalFilename(R,"HTTPDownloadDirectly"),e.isFunction(E)&&m(E,R),!1;if(F=e.html5.Funs.getImageType(A),d.isServerInvalid(R))return e.isFunction(E)&&m(E,R),!1;if(!e.License.checkPDFProductKeyWhenNeeds(R,F))return e.isFunction(E)&&E(R._errorCode,R._errorString),!1;e.cancelFrome=2,w=d.replaceLocalFilename(A),e.showProgress(R,"HTTPDownloadDirectly",!0);var L=!0;return R._OnPercentDone([0,-1,T.MSG.Downloading,"http"]),e.isFunction(M)||(L=!1),d.loadHttpBlob(R,"get",P,L,function(Z){return R._OnPercentDone([0,-1,T.MSG.Loading]),R.__LoadImageFromBytes(Z,3,w,L,M,E)},function(){return e.closeProgress("HTTPDownloadDirectly"),e.isFunction(E)&&m(E,R),!1},function(Z){var ne=0===Z.total?100:Math.round(100*Z.loaded/Z.total);[Z.loaded," / ",Z.total].join(""),R._OnPercentDone([0,ne,"","http"])},x)},s.HTTPUploadThroughPostDirectly=function(_,C,A,M,E,R){var x=this;if(x._resetErr(),!x._isValid())return!1;if(x._isMobileMode())return x._mobileNotSupport("HTTPUploadThroughPostDirectly",R);var P=d.combineUrl(x,_,A),F=function(){e.isFunction(R)&&m(R,x,x.__HTTPPostResponseString)};return x.__HTTPPostResponseString="",""===_?(e.Errors.HttpServerCannotEmpty(x),F(),!1):x._innerUploadDirectly(P,C,M,!0,!1,0,!0,!1,E,F)},s._innerUploadDirectly=function(_,C,A,M,E,R,x,P,F,k){var Z,w=this,S=y.GetHttpHeadersAndClear(w),L="HTTPUploadThroughPostDirectly",U=!0;if(!1===_||""===_)return e.Errors.ParameterCannotEmpty(w),e.isFunction(k)&&k(w.ErrorCode,w.ErrorString),!1;if(e.isFunction(F)||(U=!1),!e.License.checkProductKey(w,{Core:!0}))return e.isFunction(k)&&k(w.ErrorCode,w.ErrorString),!1;e.cancelFrome=1;var oe=function(){return e.needShowTwiceShowDialog=!1,M&&e.closeProgress(L),e.isFunction(k)&&k(w.ErrorCode,w.ErrorString),!1};return e.needShowTwiceShowDialog=!0,M&&e.showProgress(w,L,!1),(Z=d.replaceLocalFilename(C))&&""!=Z?P&&P.bCancel?(P.st=2,oe()):w.__SaveLocalFileToBytes(Z,U,E,function(ue){return e.needShowTwiceShowDialog=!1,P&&P.bCancel?(P.st=2,oe()):ue&&(e.dlgRef>0||0==w.__IfShowCancelDialogWhenImageTransfer||0==U||!1===M)?(ue instanceof File?ue.fileName=A:ue.name=A,d.setBtnCancelVisibleForProgress(w,!0),d.httpPostUpload(w,_,ue,U,0,S,!0,R,x,P,function(X){M&&e.closeProgress(L),e.isFunction(F)&&p(F,X)},oe)):(oe(),!1)},oe):(e.Errors.InvalidFile(w),oe(),!1)},s._innerUploadFilesDirectly=function(_,C,A,M,E,R,x,P,F){var Z,k=this,w=y.GetHttpHeadersAndClear(k),S="HTTPUploadThroughPostDirectly",L=!0,U=[];if(!1===_||""===_)return e.Errors.ParameterCannotEmpty(k),e.isFunction(F)&&F(k.ErrorCode,k.ErrorString,C),!1;if(e.isFunction(P)||(L=!1),!e.License.checkProductKey(k,{Core:!0}))return e.isFunction(F)&&F(k.ErrorCode,k.ErrorString,C),!1;e.cancelFrome=1;var ne=function(){return e.needShowTwiceShowDialog=!1,M&&e.closeProgress(S),e.isFunction(F)&&F(C),!1};e.needShowTwiceShowDialog=!0,M&&e.showProgress(k,S,!1),e.each(C,function(pe){var B=d.replaceLocalFilename(pe);if(!B||""==B)return e.Errors.InvalidFile(k),ne(),!1;U.push(B)});var oe=[],ue=U.length,X=0;return e.each(U,function(pe,B){Z=k.__SaveLocalFileToBytes(pe,L,E,function(K){if(e.needShowTwiceShowDialog=!1,!K||!(e.dlgRef>0||0==k.__IfShowCancelDialogWhenImageTransfer||0==L||!1===M))return M&&e.closeProgress(S),e.isFunction(ne)&&ne(),!1;var G=d.cformat(A,B+1);return K instanceof File?K.fileName=G:K.name=G,oe[B]=K,++X==ue?(d.setBtnCancelVisibleForProgress(k,!0),d.httpPostUploadFiles(k,_,oe,L,0,w,M,R,x,function(ee){M&&e.closeProgress(S),e.isFunction(P)&&p(P,ee)},function(){M&&e.closeProgress(S),e.isFunction(ne)&&ne()})):void 0},function(){M&&e.closeProgress(S),e.isFunction(ne)&&ne()})}),Z},s.HTTPUploadThroughPost=function(_,C,A,M,E,R,x){var P=this;if(P._resetErr(),!P._isValid())return!1;if(P._isMobileMode())return P._mobileNotSupport("HTTPUploadThroughPost",R);var F=d.getImageType(M),k=arguments,w=!1,S=function(L){return e.isFunction(R)&&I(R,P,P.__HTTPPostResponseString,L,k),!1};return e.isString(M)&&""!=M?(E&&e.isFunction(E)&&(w=function(L,U){return p(E,P.__HTTPPostResponseString,U,k),!0}),!!h(P,C,F,S)&&P.innerHTTPUploadPost(_,C,A,M,F,w,S,x)):(e.Errors.UploadFileCannotEmpty(P),S())},s.HTTPUploadThroughPostEx=function(_,C,A,M,E,R,x,P){var F=this;if(F._resetErr(),!F._isValid())return!1;if(F._isMobileMode())return F._mobileNotSupport("HTTPUploadThroughPostEx",x);var k=arguments,w=!1,S=function(L){return e.isFunction(x)&&I(x,F,F.__HTTPPostResponseString,L,k),!1};return e.isString(M)&&""!=M?(R&&e.isFunction(R)&&(w=function(L,U){return p(R,F.__HTTPPostResponseString,U,k),!0}),!!h(F,C,E,S)&&F.innerHTTPUploadPost(_,C,A,M,E,w,S,P)):(e.Errors.UploadFileCannotEmpty(F),S())},s.innerHTTPUploadPost=function(_,C,A,M,E,R,x,P){var ue,F=this,k="HTTPUploadThroughPostEx",w=d.combineUrl(F,_,A),S=!0,L=!1,Z=[],ne=function(ee){return e.isFunction(x)&&x(ee),!1};if(F.__HTTPPostResponseString="",e.isNumber(C)){if(C<-2)return e.Errors.IndexOutOfRange(F),ne(C)}else if(!e.isArray(C))return e.Errors.IndexOutOfRange(F),ne(C);if(!e.isString(M)||""==M)return e.Errors.UploadFileCannotEmpty(F),ne();if(e.isUndefined(E))return e.Errors.InvalidImageType(F),ne(C);if(E==T.DWT.EnumDWT_ImageType.IT_BMP||E==T.DWT.EnumDWT_ImageType.IT_JPG||E==T.DWT.EnumDWT_ImageType.IT_PNG||E==T.DWT.EnumDWT_ImageType.IT_J2K){if(-1==C&&F._ImgManager.count()>1||e.isArray(C)&&C.length>1)return e.Errors.UploadIndexMoreThanOne(F),ne(C);e.isArray(C)?Z.push(C[0]):Z.push(-1==C?0:C)}else{if(E!=T.DWT.EnumDWT_ImageType.IT_TIF&&E!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(F),ne(C);if(-1==C){if(0==F._ImgManager.count())return e.Errors.NoImage(F),ne();for(ue=0;ue<F._ImgManager.count();ue++)Z.push(ue)}else if(-2==C)Z=F._ImgManager.getSelectedClientIndexArray();else if(e.isArray(C))for(ue=0;ue<C.length;ue++)Z.push(C[ue]);else Z.push(C)}if(F._isMobileMode()?S=!0:e.isFunction(R)||(S=!1),""===_)return e.Errors.HttpServerCannotEmpty(F),ne(Z);if(e.isUndefined(w)||""===w)return e.Errors.ParameterCannotEmpty(F),ne(Z);if(!e.isString(w))return e.Errors.InvalidUrl(F),ne(Z);if(0!=w.indexOf("http://")&&0!=w.indexOf("https://")&&(w=e.detect.ssl?"https://"+w:"http://"+w),!F._isMobileMode()&&d.isServerInvalid(F)||!F._checkIndices(Z)&&-1!=Z)return ne(Z);var pe=[];if(e.isArray(Z)&&e.each(Z,function(ee){var ie=F._ImgManager.convertClientIndexToServerId(ee);-1!=ie&&pe.push(ie)}),F._resetErr(),!F._isValid())return!1;if(S)return e._asyncUploadCmd({bOnlyUploadForm:o,method:"HTTPUploadThroughPostEx",_this:F,url:w,serverIds:pe,enumImageType:E,saveSetup:!1,fileName:M,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:T.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:R,asyncFailureFunc:ne}),!0;e.cancelFrome=1;var B=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(k),ne(Z),!1};e.needShowTwiceShowDialog=!0,e.showProgress(F,k,!1);var K=y.GetHttpHeadersAndClear(F);return F._OnPercentDone([0,-1,T.MSG.Encoding,"http"]),F.__innerConvertToBlob(E,pe,!1,S,4,function(ee,ie,be){if(e.needShowTwiceShowDialog=!1,ee&&(e.dlgRef>0||0==F.__IfShowCancelDialogWhenImageTransfer||0==S)){var Te=F.MaxUploadImageSize,je=T.DWT;return ee.size>Te&&-1!=Te?(e.Errors.UploadExceededMaxSize(F),B()):(je.IfAddMD5InUploadHeader&&ie&&""!=ie&&(K["dwt-md5"]=ie),ee instanceof File?ee.fileName=M:ee.name=M,d.setBtnCancelVisibleForProgress(F,!0),d.httpPostUpload(F,w,ee,S,0,K,!0,0,!0,!1,function(V){return e.closeProgress(k),L=!0,!0},B))}return B()},B),L},s._checkIndices=function(_){var A,M,C=this;if(!e.isArray(_))return e.Errors.IndicesNotArray(C),!1;if(0==_.length)return e.Errors.IndicesCannotEmpty(C),!1;if(T.DWT.ConnectWithSocket)return!0;for(A=C._ImgManager.count(),M=0;M<_.length;M++){var E=_[M];if(e.isUndefined(E)||null===E)return e.Errors.IndexNullOrUndefined(C),!1;if(E=parseInt(E),isNaN(E))return e.Errors.InvalidIndex(C),!1;if(E<0||E>=A)return e.Errors.IndicesOutOfRange(C),!1}return!0},s.SetUploadSegment=function(_,C){var A=this;return A._resetErr(),!!A._isValid()&&(A._isMobileMode()?A._mobileNotSupport("SetUploadSegment"):!e.isNumber(_)||_<0?(e.Errors.InvalidSegmentUploadThreshold(A),!1):!e.isNumber(C)||C<=0?(e.Errors.InvalidModuleSize(A),!1):(A._segementUploadThreshold=1024*_*1024,A._moduleSize=1024*C,!0))},s.HTTPUpload=function(_,C,A,M,E,R,x){var P=this;if(P._resetErr(),!P._isValid())return!1;if(e.isUndefined(_))return e.Errors.InvalidParameter(P),e.isFunction(x)&&x(P.ErrorCode,P.ErrorString),!1;var F,k,w,S=arguments;if(arguments.length<=3)k=!!e.isFunction(C)&&function(){C(P.__HTTPPostResponseString,_,S)},F={bOnlyUploadForm:l,_this:P,url:_,asyncSuccessFunc:k,asyncFailureFunc:w=function(){e.isFunction(A)&&I(A,P,P.__HTTPPostResponseString,_,S)}};else{var L,U=[],Z=!1;if(e.isFunction(E)?(L="RemoteFile",k=function(ne,oe){E(P.__HTTPPostResponseString,oe,S)},w=function(ne){e.isFunction(R)&&I(R,P,P.__HTTPPostResponseString,ne,S)}):(L=e.isString(E)?E:"RemoteFile",k=!!e.isFunction(R)&&function(ne,oe){p(R,P.__HTTPPostResponseString,oe,S)},w=function(ne){e.isFunction(x)&&I(x,P,P.__HTTPPostResponseString,ne,S)}),!P._checkIndices(C))return w(C),!1;if(e.isArray(C)&&e.each(C,function(ne){var oe=P._ImgManager.convertClientIndexToServerId(ne);-1!=oe&&U.push(oe)}),0==U.length)return e.Errors.InvalidIndex(P),w(C),!1;if(e.isUndefined(A))return e.Errors.InvalidImageType(P),w(C),!1;if(A==T.DWT.EnumDWT_ImageType.IT_BMP||A==T.DWT.EnumDWT_ImageType.IT_JPG||A==T.DWT.EnumDWT_ImageType.IT_PNG){if(U.length>1)return e.Errors.UploadIndexMoreThanOne(P),w(C),!1}else if(A!=T.DWT.EnumDWT_ImageType.IT_TIF&&A!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(P),w(C),!1;if(e.isUndefined(M)||M!=T.DWT.EnumDWT_UploadDataFormat.Binary&&M!=T.DWT.EnumDWT_UploadDataFormat.Base64)return e.Errors.InvalidDataFormat(P),w(C),!1;F={bOnlyUploadForm:o,method:"HTTPUpload",_this:P,url:_,serverIds:U,enumImageType:A,saveSetup:Z,dataFormat:M,fileName:L,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:k,asyncFailureFunc:w}}return e._asyncUploadCmd(F),!0},s._innerHTTPUpload=function(_,C,A,M,E,R,x,P,F,k,w){var ie,S=this,L=parseInt(A),U=parseInt(M),Z=E,ne="HTTPUpload",oe=_,X=!1,pe=S._moduleSize,B=S._segementUploadThreshold;if(S.__HTTPPostResponseString="",e.isUndefined(A))return e.Errors.InvalidImageType(S),e.isFunction(w)&&w(),!1;e.cancelFrome=1;var be,Te=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(ne),e.isFunction(w)&&w(),!1};if(ie=function(V){var Q=0===V.total?100:Math.round(100*V.loaded/V.total);[V.loaded," / ",V.total].join(""),S._OnPercentDone([0,Q,"","http",Z])},Z=d.addImageFileExt(Z,L),e.needShowTwiceShowDialog=!0,e.showProgress(S,ne,!1),!S._isMobileMode()&&d.isServerInvalid(S))return Te();if(U==T.DWT.EnumDWT_UploadDataFormat.Binary){if(F&&F.bCancel)return F.st=2,Te();S._OnPercentDone([0,-1,T.MSG.Encoding,"http"]),X=S.__innerConvertToBlob(L,C,R,!0,4,function(V,Q,me){if(be=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(ne),e.isFunction(k)&&p(k,V),!0},F&&F.bCancel)return F.st=2,Te();if(!V||V.size<=0)return e.Errors.UploadFileCannotEmpty(S),Te();var H=S.MaxUploadImageSize;if(V.size>H&&-1!=H)return e.Errors.UploadExceededMaxSize(S),Te();if(0!=S._errorCode)return Te();if(B>0&&V.size>B){var re=y.GetHttpHeadersAndClear(S);T.DWT.IfAddMD5InUploadHeader&&Q&&""!=Q&&(re["dwt-md5"]=Q),S._OnPercentDone([0,-1,T.MSG.Uploading,"http",Z]),X=y.UploadBinary(S,oe,L,V,Z,re,0,pe,ie,x,P,F,be,Te)}else X=S.__innnerHTTPUploadBinaryFull(oe,Q,V,L,Z,x,P,F,be,Te)},Te)}else if(U==T.DWT.EnumDWT_UploadDataFormat.Base64){var ae;X=S._convertToBase64ByServerIds(C,L,R,4,function(V){if(!V||V.getLength()<=0)return e.Errors.UploadFileCannotEmpty(S),Te();if(be=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(ne),e.isFunction(k)&&p(k,V),!0},B>0&&V.getLength()>B){var me=y.GetHttpHeadersAndClear(S),H=T.DWT;ae=V.getMD5(),H.IfAddMD5InUploadHeader&&(me["dwt-md5"]=ae),S._OnPercentDone([0,-1,T.MSG.Uploading,"http"]),y.UploadBase64(S,oe,L,V,Z,me,0,pe,ie,be,Te)}else{var j;if(ae=V.getMD5(),!(j=V.getData(0,V.getLength()))||""==j)return e.Errors.UploadFileCannotEmpty(S),Te();S.__innnerHTTPUploadBase64Full(oe,ae,j,L,Z,x,P,be,Te)}},Te)}return X},s._innerFormFieldHTTPUpload=function(_,C,A){var E,M=this,R="HTTPUpload",x=_;if(M.__HTTPPostResponseString="",E=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(R),e.isFunction(A)&&m(A,M,M.__HTTPPostResponseString),!1},e.isUndefined(x)||""===x)return e.Errors.ParameterCannotEmpty(M),E();if(!e.isString(x))return e.Errors.InvalidUrl(M),E();0!=x.indexOf("http://")&&0!=x.indexOf("https://")&&(x=e.detect.ssl?"https://"+x:"http://"+x),M.__HTTPPostResponseString="",e.cancelFrome=1,e.showProgress(M,R,!1),e.needShowTwiceShowDialog=!0;var k=y.GetHttpHeadersAndClear(M);return M._OnPercentDone([0,-1,T.MSG.Uploading,"http"]),d.httpUploadByBIO(M,x,o,0,!0,k,!0,0,!0,!1,function(S){e.needShowTwiceShowDialog=!1,e.closeProgress(R),e.isFunction(C)&&p(C,S)},E)};var y={UploadBinary:function(_,C,A,M,E,R,x,P,F,k,w,S,L,U){var Z,ne,X,ue=M.size;return(Z=ue-x)>0?(Z>=P?(Z-=P,ne=P):(ne=Z,Z=0),(X=0==x&&ne==ue?M:M.slice(x,x+ne))?e.dlgRef>0||0==_.__IfShowCancelDialogWhenImageTransfer?(X.name=E,d.setBtnCancelVisibleForProgress(_,!0),R["Content-Range"]=["bytes ",x,"-",x+X.size-1,"/",ue].join(""),F({total:ue,loaded:x}),d.httpPostUpload(_,C,X,!0,0,R,!1,k,w,S,function(pe){0==Z?(e.needShowTwiceShowDialog=!1,F({total:ue,loaded:ue}),e.isFunction(L)&&p(L,pe)):(x+=ne,setTimeout(function(){e.cancelFrome=1,y.UploadBinary(_,C,A,M,E,R,x,P,F,k,w,S,L,U)},100))},U),!0):(e.Errors.UploadError(_,!0),U()):(e.Errors.UploadFileCannotEmpty(_),U())):(e.needShowTwiceShowDialog=!1,e.closeProgress("HttpUpload"),e.isFunction(L)&&L(""),!0)},UploadBase64:function(_,C,A,M,E,R,x,P,F,k,w){var U,Z,S=M.getLength();if((U=S-x)>0){U>=P?(U-=P,Z=P):(Z=U,U=0);var oe=M.getData(x,P);return oe&&""!=oe?e.dlgRef>0||0==_.__IfShowCancelDialogWhenImageTransfer?(d.setBtnCancelVisibleForProgress(_,!0),R["Content-Range"]=["bytes ",x,"-",x+Z-1,"/",S].join(""),F({total:S,loaded:x}),d.httpPostUploadString(_,C,oe,E,0,R,!1,0,!0,function(ue){0==U?(e.needShowTwiceShowDialog=!1,F({total:S,loaded:S}),e.isFunction(k)&&p(k,ue)):(x+=Z,setTimeout(function(){e.cancelFrome=1,y.UploadBase64(_,C,A,M,E,R,x,P,F,k,w)},100))},w),!0):(e.Errors.UploadError(_,!0),w()):(e.Errors.UploadFileCannotEmpty(_),w())}return e.needShowTwiceShowDialog=!1,e.closeProgress("HttpUpload"),e.isFunction(k)&&k(""),!0},GetHttpHeadersAndClear:function(_){var C=_.__httpHeaderMap;return _.__httpHeaderMap={},C||(C=_.__httpHeaderMap),C}};s.__innnerHTTPUploadBinaryFull=function(_,C,A,M,E,R,x,P,F,k){var w=this,S=y.GetHttpHeadersAndClear(w),U=E,Z=_;return T.DWT.IfAddMD5InUploadHeader&&C&&""!=C&&(S["dwt-md5"]=C),e.dlgRef>0||0==w.__IfShowCancelDialogWhenImageTransfer?(A instanceof File?A.fileName=U:A.name=U,d.setBtnCancelVisibleForProgress(w,!0),d.httpPostUpload(w,Z,A,!0,0,S,!0,R,x,P,function(ee){e.isFunction(F)&&p(F,ee)},k)):(e.Errors.UploadError(w,!0),k())},s.__innnerHTTPUploadBase64Full=function(_,C,A,M,E,R,x,P,F){var k=this,w=y.GetHttpHeadersAndClear(k),L=E,U=_;return e.dlgRef>0||0==k.__IfShowCancelDialogWhenImageTransfer?(T.DWT.IfAddMD5InUploadHeader&&w&&C&&""!=C&&(w["dwt-md5"]=C),d.setBtnCancelVisibleForProgress(k,!0),d.httpPostUploadString(k,U,A,L,0,w,!0,R,x,function(K){e.isFunction(P)&&p(P,K)},F)):(e.Errors.UploadError(k,!0),F())},s.ConvertToBase64=function(_,C,A,M){var E=this;if(E._resetErr(),!E._isValid())return!1;var R=[],x=arguments,P=parseInt(C),w=!1;if(!e.License.checkProductKey(E,{Core:!0}))return e.isFunction(M)&&M(E.ErrorCode,E.ErrorString),!1;if(!E._isMobileMode()&&d.isServerInvalid(E)||!E._checkIndices(_))return e.isFunction(M)&&I(M,E,_,C,x),!1;if(P==T.DWT.EnumDWT_ImageType.IT_BMP||P==T.DWT.EnumDWT_ImageType.IT_JPG||P==T.DWT.EnumDWT_ImageType.IT_PNG){if(_.length>1)return e.Errors.ConvertBase64IndexMoreThanOne(E),e.isFunction(M)&&I(M,E,_,C,x),!1}else if(P!=T.DWT.EnumDWT_ImageType.IT_TIF&&P!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(E),e.isFunction(M)&&I(M,E,_,C,x),!1;e.isArray(_)&&e.each(_,function(Z){var ne=E._ImgManager.convertClientIndexToServerId(Z);-1!=ne&&R.push(ne)});var S=function(Z){var ne=[];return e.isArray(R)&&e.each(R,function(oe){var ue=E._ImgManager.convertServerIdToClientIndex(oe);ue>-1&&ne.push(ue)}),e.isFunction(A)&&p(A,Z,ne,C,x),!1},L=function(){var Z=[];return e.isArray(R)&&e.each(R,function(ne){var oe=E._ImgManager.convertServerIdToClientIndex(ne);oe>-1&&Z.push(oe)}),e.isFunction(M)&&I(M,E,Z,C,x),!1},U=3;return E._convertToBase64ByServerIds(R,P,w,U,S,L)},s._convertToBase64ByServerIds=function(_,C,A,M,E,R){var x=this,P="ConvertToBase64",k=A;e.showProgress(x,P,!1);var w=function(){return e.closeProgress(P),e.isFunction(R)&&R(),!1},S=function(U){var pe,ue=U&&U.result,X=[];e.isArray(_)&&e.each(_,function(B){var K=x._ImgManager.convertServerIdToClientIndex(B);K>-1&&X.push(K)}),0==x.ErrorCode?ue&&e.isArray(ue)&&3==ue.length?(pe=new e.html5.Base64Result(x,ue[1],ue[2],ue[0]),e.closeProgress(P),e.isFunction(E)&&p(E,pe)):(e.Errors.ConvertBase64Failed(x),w()):w()};if(x._isMobileMode())return C==T.DWT.EnumDWT_ImageType.IT_BMP?(e.closeProgress(P),x._mobileNotSupport("Convert to bmp",R)):x.__innerConvertToBase64ByMobile("",_,C,M,S,w);(!e.isString(k)||""==k)&&(k="{}");var L=["[",C,',"',_.join(","),'",',k,",1]"].join("");return x._innerFunRaw(P,L,!0,!1,!0,S,w)},s.ClearAllHTTPFormField=function(){var _=this;return _._resetErr(),!!_._isValid()&&(_.httpFormFields={},!0)},s.SetHTTPFormField=function(_,C,A){var M=this;if(M._resetErr(),!M._isValid())return!1;var E=_;return e.isString(E)||(E=""+E),C instanceof Blob&&(C.name=A),M.httpFormFields[E]=C,!0},s.HTTPUploadAllThroughPostAsMultiPageTIFF=function(_,C,A,M,E,R){var x=this;if(x._resetErr(),!x._isValid())return!1;if(x._isMobileMode())return x._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",E);var P=-1,F=2,k=arguments,w=!1,S=function(L){return e.isFunction(E)&&I(E,x,x.__HTTPPostResponseString,L,k),!1};return e.isString(A)&&""!=A?(M&&e.isFunction(M)&&(w=function(L,U){return p(M,x.__HTTPPostResponseString,U,k),!0}),x.innerHTTPUploadPost(_,P,C,A,F,w,S,R)):(e.Errors.UploadFileCannotEmpty(x),S())},s.HTTPUploadThroughPostAsMultiPageTIFF=function(_,C,A,M,E,R){var x=this;if(x._resetErr(),!x._isValid())return!1;if(x._isMobileMode())return x._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",E);var P=-2,F=2,k=arguments,w=!1,S=function(L){return e.isFunction(E)&&I(E,x,x.__HTTPPostResponseString,L,k),!1};return e.isString(A)&&""!=A?(M&&e.isFunction(M)&&(w=function(L,U){return p(M,x.__HTTPPostResponseString,U,k),!0}),x.innerHTTPUploadPost(_,P,C,A,F,w,S,R)):(e.Errors.UploadFileCannotEmpty(x),S())},s.HTTPUploadAllThroughPostAsPDF=function(_,C,A,M,E,R){var x=this;if(x._resetErr(),!x._isValid())return!1;if(x._isMobileMode())return x._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",E);var P=-1,F=4,k=arguments,w=!1,S=function(L){return e.isFunction(E)&&I(E,x,x.__HTTPPostResponseString,L,k),!1};return e.isString(A)&&""!=A?(M&&e.isFunction(M)&&(w=function(L,U){return p(M,x.__HTTPPostResponseString,U,k),!0}),x.innerHTTPUploadPost(_,P,C,A,F,w,S,R)):(e.Errors.UploadFileCannotEmpty(x),S())},s.HTTPUploadThroughPostAsMultiPagePDF=function(_,C,A,M,E,R){var x=this;if(x._resetErr(),!x._isValid())return!1;if(x._isMobileMode())return x._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",E);var P=-2,F=4,k=arguments,w=!1,S=function(L){return e.isFunction(E)&&I(E,x,x.__HTTPPostResponseString,L,k),!1};return e.isString(A)&&""!=A?(M&&e.isFunction(M)&&(w=function(L,U){return p(M,x.__HTTPPostResponseString,U,k),!0}),x.innerHTTPUploadPost(_,P,C,A,F,w,S,R)):(e.Errors.UploadFileCannotEmpty(x),S())},s.HTTPDownloadThroughPost=function(_,C,A,M,E,R){var w,x=this,P=y.GetHttpHeadersAndClear(x),F=arguments,k=d.combineUrl(x,_,C);if(k===o)return e.Errors.ParameterCannotEmpty(x),o;if(d.isServerInvalid(x)||!e.License.checkProductKey(x,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(x,A))return e.isFunction(E)&&m(E,x,F),o;e.cancelFrome=2,e.showProgress(x,"HttpDownloadThroughPost",l),w="post";var L=function(Z){var ne=0===Z.total?100:Math.round(100*Z.loaded/Z.total);[Z.loaded," / ",Z.total].join(""),x._OnPercentDone([0,ne,"","http"])},U=l;return x._OnPercentDone([0,-1,T.MSG.Downloading,"http"]),e.isFunction(M)||(U=o),d.loadHttpBlob(x,w,k,U,function(Z){x._OnPercentDone([0,-1,T.MSG.Loading]);var oe=A;oe!=T.DWT.EnumDWT_ImageType.IT_BMP&&oe!=T.DWT.EnumDWT_ImageType.IT_JPG&&oe!=T.DWT.EnumDWT_ImageType.IT_TIF&&oe!=T.DWT.EnumDWT_ImageType.IT_PNG&&oe!=T.DWT.EnumDWT_ImageType.IT_PDF&&oe!=T.DWT.EnumDWT_ImageType.IT_J2K&&(oe=-1),x.__LoadImageFromBytes(Z,oe,"",U,M,E)},function(){e.closeProgress("HttpDownloadThroughPost"),e.isFunction(E)&&m(E,x,F)},L,P)},s.HTTPDownloadThroughGet=function(_,C,A,M,E){var R=this,x=y.GetHttpHeadersAndClear(R),P=d.combineUrl(R,_,C);if(P===o)return e.Errors.ParameterCannotEmpty(R),e.isFunction(E)&&m(E,R),o;if(R._isMobileMode()){if(!e.License.checkProductKey(R,{Core:!0}))return e.isFunction(E)&&m(E,R),o}else if(d.isServerInvalid(R)||!e.License.checkProductKey(R,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(R,A))return e.isFunction(E)&&m(E,R),o;e.cancelFrome=2,e.showProgress(R,"HTTPDownloadThroughGet",l);var w=function(U){var Z=0===U.total?100:Math.round(100*U.loaded/U.total);[U.loaded," / ",U.total].join(""),R._OnPercentDone([0,Z,"","http"])},S=l;R._OnPercentDone([0,-1,T.MSG.Downloading,"http"]),e.isFunction(M)||(S=o);var L=R.GetCurrentFileName();return""==L&&(L=R._ImgManager.getWebViewer().GetDefaultFileName()),R._isMobileMode()?d.loadHttpBlob(R,"get",P,S,function(U){R._OnPercentDone([0,-1,T.MSG.Loading]),U.currentFileName=L,R.LoadImageFromBinary(U,function(){T.Lib.closeProgress(""),e.isFunction(M)&&M()},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&m(E,R)})},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&m(E,R)},w,x):d.loadHttpBlob(R,"get",P,S,function(U){R._OnPercentDone([0,-1,T.MSG.Loading]);var ne=A;ne!=T.DWT.EnumDWT_ImageType.IT_BMP&&ne!=T.DWT.EnumDWT_ImageType.IT_JPG&&ne!=T.DWT.EnumDWT_ImageType.IT_TIF&&ne!=T.DWT.EnumDWT_ImageType.IT_PNG&&ne!=T.DWT.EnumDWT_ImageType.IT_PDF&&ne!=T.DWT.EnumDWT_ImageType.IT_J2K&&(ne=-1),U.currentFileName=L,R.__LoadImageFromBytes(U,ne,"",S,function(){T.Lib.closeProgress(""),e.isFunction(M)&&M()},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&m(E,R)})},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&m(E,R)},w,x)},s.HTTPUploadThroughPut=function(_,C,A,M,E){var R=d.getImageType(A);return this.HTTPUploadThroughPutEx(_,C,A,R,M,E)},s.HTTPUploadThroughPutEx=function(_,C,A,M,E,R){var x=this,P=y.GetHttpHeadersAndClear(x),F="HTTPUploadThroughPutEx",k=d.combineUrl(x,_,A),w=!0,S=[];if(!1===k)return e.Errors.ParameterCannotEmpty(x),e.isFunction(R)&&I(R,x,"",[C],A,M),!1;e.isFunction(E)||(w=!1),e.cancelFrome=1;var Z,U=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(F),e.isFunction(R)&&I(R,x,x.__HTTPPostResponseString,S,A,M),!1};switch(e.needShowTwiceShowDialog=!0,e.showProgress(x,F,!1),C){case-1:for(var ne=0;ne<x._ImgManager.count();ne++)S.push(ne);break;case-2:S=x._ImgManager.getSelectedClientIndexArray();break;default:if(S.push(C),!(C>=0))return e.Errors.IndexOutOfRange(x),U()}if(""===_)return e.Errors.HttpServerCannotEmpty(x),U();var oe=[];e.isArray(S)&&e.each(S,function(B){var K=x._ImgManager.convertClientIndexToServerId(B);-1!=K&&oe.push(K)});var ue=T.DWT;return x._OnPercentDone([0,-1,T.MSG.Encoding,"http"]),x.__innerConvertToBlob(M,oe,!1,w,4,function(B,K,G){if(ue.IfAddMD5InUploadHeader&&K&&""!=K&&(P["dwt-md5"]=K),e.needShowTwiceShowDialog=!1,B&&(e.dlgRef>0||0==x.__IfShowCancelDialogWhenImageTransfer||0==w)){var ee=x.MaxUploadImageSize;return B.size>ee&&-1!=ee?(e.Errors.UploadExceededMaxSize(x),U()):(Z=function(be){var Te=0===be.total?100:Math.round(100*be.loaded/be.total);[be.loaded," / ",be.total].join(""),x._OnPercentDone([0,Te,"","http"])},x._OnPercentDone([0,-1,T.MSG.Uploading,"http"]),d.setBtnCancelVisibleForProgress(x,!0),d.httpPutImage(x,k,B,w,function(be){if(x.__HTTPPostResponseString=be,e.closeProgress(F),e.isFunction(E)){var Te=[];e.isArray(oe)&&e.each(oe,function(Ge){var je=x._ImgManager.convertServerIdToClientIndex(Ge);je>-1&&Te.push(je)}),p(E,x.__HTTPPostResponseString,Te,A,M)}return!0},U,Z))}return e.closeProgress(F),!1},U)},s.HTTPUploadAllThroughPutAsMultiPageTIFF=function(_,C,A,M){return this.HTTPUploadThroughPutEx(_,-1,C,2,A,M)},s.HTTPUploadThroughPutAsMultiPageTIFF=function(_,C,A,M){return this.HTTPUploadThroughPutEx(_,-2,C,2,A,M)},s.HTTPUploadAllThroughPutAsPDF=function(_,C,A,M){return this.HTTPUploadThroughPutEx(_,-1,C,4,A,M)},s.HTTPUploadThroughPutAsMultiPagePDF=function(_,C,A,M){return this.HTTPUploadThroughPutEx(_,-2,C,4,A,M)},s.GetSelectedImagesSize=function(_){var C=this;if(C._resetErr(),!C._isValid())return!1;if(C._isMobileMode())return C._mobileNotSupport("GetSelectedImagesSize");var A=f(C);return C._innerFun("GetSelectedImagesSize",d.makeParams(_,A.join(",")))},s.SetHTTPHeader=function(_,C){var A=this;if(A._resetErr(),!A._isValid())return!1;var E,R,x=_;if(A.__httpHeaderMap||(A.__httpHeaderMap={}),!x||!e.isString(x))return e.isUndefined(x)?e.Errors.HttpHeaderIsUndefined(A):""===x?e.Errors.HttpHeaderIsEmpty(A):null===x?e.Errors.HttpHeaderIsNull(A):e.Errors.HttpHeaderIsInvalid(A),!1;for(E=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],x=x.toLowerCase(),R=0;R<E.length;R++)if(E[R]==x)return e.Errors.HttpHeaderNotAllowed(A),!1;return e.isUndefined(C)||null===C||""===C?(_ in A.__httpHeaderMap&&delete A.__httpHeaderMap[_],!0):(e.isNumber(C)&&(C=""+C),A.__httpHeaderMap[_]=C,!0)},e.html5.Base64Result=function(_,C,A,M){var E=this;E._stwain=_,E._md5=A,E._length=C,E._content=M},e.html5.Base64Result.prototype.getLength=function(){return this._length},e.html5.Base64Result.prototype.getMD5=function(){return this._md5},e.html5.Base64Result.prototype.getData=function(_,C){var A=this,M=C;return!e.isNumber(_)||!e.isNumber(C)||_<0||C<=0?"":0==_&&M==A._length?A._content:(_+M>A._length&&(M=A._length-_),A._content.substr(_,M))},s._ConvertToBlob=function(_,C,A,M,E){var R=this,x="ConvertToBlob",P=!0,k=arguments;e.isFunction(M)||(P=!1),e.cancelFrome=0,e.showProgress(R,x,!1);var w=function(){if(e.needShowTwiceShowDialog=!1,e.closeProgress(x),e.isFunction(E)){var L=[];e.isArray(_)&&e.each(_,function(U){var Z=R._ImgManager.convertServerIdToClientIndex(U);Z>-1&&L.push(Z)}),I(E,R,L,C,k)}return!1},S=2;return R._OnPercentDone([0,-1,T.MSG.Encoding]),R.__innerConvertToBlob(C,_,A,P,S,function(L,U,Z){if(!L||L.size<=0)return e.Errors.ConvertBlobIsEmpty(R),w();var ne=R.MaxUploadImageSize;if(L.size>ne&&-1!=ne)return e.Errors.UploadExceededMaxSize(R),w();if(e.needShowTwiceShowDialog=!1,e.closeProgress(x),e.isFunction(M)){var ue=[];e.isArray(_)&&e.each(_,function(X){var pe=R._ImgManager.convertServerIdToClientIndex(X);pe>-1&&ue.push(pe)});try{M(L,ue,k)}catch(X){}L=null}return!!P||L},w)},s.ConvertToBlob=function(_,C,A,M,E){var R=this;if(R._resetErr(),!R._isValid())return!1;var x=parseInt(C),P=arguments,F=function(L,U){return e.isFunction(A)&&p(A,L,U,C,P),L=U=null,!0},k=function(L){return e.isFunction(M)&&I(M,R,L,C,P),L=null,!1},w=!1;if(!e.License.checkProductKey(R,{Core:!0}))return e.isFunction(M)&&M(R.ErrorCode,R.ErrorString),!1;if(!R._isMobileMode()&&d.isServerInvalid(R)||!R._checkIndices(_))return k(_);if(x==T.DWT.EnumDWT_ImageType.IT_BMP||x==T.DWT.EnumDWT_ImageType.IT_JPG||x==T.DWT.EnumDWT_ImageType.IT_PNG||x==T.DWT.EnumDWT_ImageType.IT_J2K){if(_.length>1)return e.Errors.ConvertBinaryIndexMoreThanOne(R),k(_)}else if(x!=T.DWT.EnumDWT_ImageType.IT_TIF&&x!=T.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(R),k(_);var S=[];return e.isArray(_)&&e.each(_,function(L){var U=R._ImgManager.convertClientIndexToServerId(L);-1!=U&&S.push(U)}),e.isFunction(A)?(R._ConvertToBlob(S,x,w,F,k),!0):R._ConvertToBlob(S,x,w)},e._asyncUploadCmd=function(_){var C=_._this,M=_.url,E=_.asyncSuccessFunc,R=_.asyncFailureFunc;if(!_.bOnlyUploadForm){var x=_.serverIds,P=_.enumImageType,F=_.dataFormat,k=_.fileName,w=_.saveSetup,S=_.retry,L=_.bOnlyEmptyIsOK,U=_.objUploadFileStatus,Z=function(){if(e.isFunction(R)){var ne=[];e.isArray(x)&&e.each(x,function(oe){var ue=C._ImgManager.convertServerIdToClientIndex(oe);ue>-1&&ne.push(ue)});try{R(ne)}catch(oe){}}return!1};return e.isNumber(S)&&S>0||(S=0),0!=C._errorCode?Z():C._innerHTTPUpload(M,x,P,F,k,w,S,L,U,function(ne){if(e.isFunction(E)){var oe=[];e.isArray(x)&&e.each(x,function(ue){var X=C._ImgManager.convertServerIdToClientIndex(ue);X>-1&&oe.push(X)});try{p(E,ne,oe)}catch(ue){}}return!0},Z)}C._innerFormFieldHTTPUpload(M,function(){if(e.isFunction(E))try{E()}catch(ne){}},function(){if(e.isFunction(R))try{R()}catch(ne){}})},s._asyncUploadFilesCmd=function(_,C,A,M,E,R,x,P,F,k){var w=this,S=parseInt(A),L="HTTPUpload",U=_,ne=!1,X=[];w.__HTTPPostResponseString="",e.cancelFrome=1;var pe=function(){if(w._bServerPercentDone=!0,e.needShowTwiceShowDialog=!1,R&&e.closeProgress(L),X=null,e.isFunction(k)){var Ge=[];e.isArray(C)&&e.each(C,function(je){var he=w._ImgManager.convertServerIdToClientIndex(je);he>-1&&Ge.push(he)});try{k(Ge)}catch(je){}}return!1};if(e.needShowTwiceShowDialog=!0,R&&e.showProgress(w,L,!1),d.isServerInvalid(w))return pe();var G=C.length,ee=0,ie=0,Te="";return w._bServerPercentDone=!1,w._OnPercentDone([0,-1,T.MSG.Encoding,"http"]),e.each(C,function(Ge,je){ne=w.__innerConvertToBlob(S,[Ge],E,!0,4,function(he,ae,V){if(!he||he.size<=0)return e.Errors.UploadFileCannotEmpty(w),pe();var Q=w.MaxUploadImageSize;if(he.size>Q&&-1!=Q)return e.Errors.UploadExceededMaxSize(w),pe();var H=d.cformat(M,je+1);if(ie=(ee+1)/G*100,Te=[ee+1,"/",G].join(""),w._OnPercentDone([0,ie,Te,"http",H]),he.name=H,X.push(he),++ee>=G){var re=y.GetHttpHeadersAndClear(w);T.DWT.IfAddMD5InUploadHeader&&ae&&""!=ae&&(re["dwt-md5"]=ae),ne=d.httpPostUploadFiles(w,U,X,!0,0,re,R,x,P,function(we){!function(Ge){if(w._bServerPercentDone=!0,e.needShowTwiceShowDialog=!1,R&&e.closeProgress(L),X=null,e.isFunction(F)){var je=[];e.isArray(C)&&e.each(C,function(he){var ae=w._ImgManager.convertServerIdToClientIndex(he);ae>-1&&je.push(ae)}),p(F,Ge,je)}}(we)},pe)}},pe,[Ge,je])}),ne}}}),T.Ready(function(e,r){var o,i=T.navInfo,n=e.html5,s=n.Funs,l=T.DWT,d={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing..."};!e.product.bHTML5Edition||((o=n.STwain.prototype).RegisterEvent=function(c,u){var h=this;return h._resetErr(),!!h._isValid()&&(h[["__",c].join("")]=u,!0)},o.onEvent=function(c,u){this.RegisterEvent(c,u)},o.on=function(c,u){this.RegisterEvent(c,u)},o.OnRefreshUI=function(c,u,h,f){var g=this;return h&&g._ImgManager.refresh(c,g._ImgManager.count(),!0,f),T.Lib.isFunction(g.__OnRefreshUI)&&g.__OnRefreshUI(g._ImgManager.getCurrentImageIndex(),g._ImgManager.count()),!0},o._OnRemoteScanStatusAsync=function(c){var f,u=this;if(c&&c.length>=2){try{var g=new String(c[1]);f=e.parse(g)}catch(A){e.log(A.message),e.log("parse json failed: "+c[1])}f||(f={sequence:0,screen:[]})}if(f&&f.sequence)if(f.sequence>0&&f.screen&&f.screen.length>0){var p,m,I,y,_;if(m=f.sequence,y=f.wnds,e.isString(_=(p=f.screen[0]).img)&&""!=_&&(I=p.wnd),m&&I){var C=e.one(".ds-img-screen");C&&u._acquireDivEL&&(u._acquireDivEL.evtFun&&(e.removeEventListener(C[0],"mouseup",u._acquireDivEL.evtFun),u._acquireDivEL.evtFun=null),C[0].src=_,u._acquireDivEL.evtFun=function(A){y||(y="0");var M=e.stringify({sequence:m,wnds:y,wnd:I+"",type:2,x:A.offsetX,y:A.offsetY});u._innerSendCmd("SendEventToScannerUI",["[",M,"]"].join(""))},e.addEventListener(C[0],"mouseup",u._acquireDivEL.evtFun))}}else u.__closeRemoteScanUI(!1);return e.isFunction(u.__OnRemoteScanStatusAsync)&&u.__OnRemoteScanStatusAsync(f),!0},o._OnConsumed=function(c){},o._OnBitmapChanged=function(c,u,h){var f=this,g="10"==c[0],p="c2"==c[0],m="0"==c[0]||p||g,I=c[1].split(","),y=c[2],_=c[3],C=f.__maxImagesInBuffer,M=h,k=-1,w=[];if(M||""==(M=f.GetCurrentFileName())&&(M=f._ImgManager.getWebViewer().GetDefaultFileName()),g){if(c.length>5){var S=c[5];w.push(S),f._blts&&(1==y||2==y)&&(T.Lib.isUndef(S.verify)||(k=T.DWT.lgct(S.verify),e.isFunction(f.__OnLtsverify)&&f.__OnLtsverify(k,1,T.DWT.EnumInstance.dwt_browser),T.DWT.lavrf(k,1,T.DWT.EnumInstance.dwt_browser)))}}else if(p)c.length>5&&(w=c[5]),e.isArray(w)||(w=[]);else{var L={};if(c.length>5&&(L.width=c[5]),c.length>6&&(L.height=c[6]),c.length>7&&(L.bitDepth=c[7]),c.length>8&&(L.resolutionX=c[8]),c.length>9&&(L.resolutionY=c[9]),c.length>10&&(k=c[10]),w.push(L),k>-1&&f._blts&&(1==y||2==y)){var U=T.DWT.lgct(k);e.isFunction(f.__OnLtsverify)&&f.__OnLtsverify(U,1)}}if(e.log("OnBitmapChanged:"+c),2==y||1==y&&!f.__IfAppendImage)e.each(I,function(pe,B){var ee,K=parseInt(pe),G=f._ImgManager.getCurrentImageIndex();if((ee=B<w.length&&w[B]?w[B]:{}).currentFileName=M,isNaN(K)||K<0)return!0;if(m)f._aryBitmapCache.push(K);else for(var ie=0;ie<f._aryBitmapCache.length;ie++)if(f._aryBitmapCache[ie]==K)return f._aryBitmapCache.splice(ie,1),!0;if(f._ImgManager.exists(K))return!0;f.__insertingIndex>-1&&(G=f.__insertingIndex),-1==G&&(G=0),f._ImgManager.insertBefore(G,C,K,ee),f.__insertingIndex>-1&&(f.__insertingIndex=f.__insertingIndex+1)}),e.isFunction(f.__OnRefreshUI)&&f.__OnRefreshUI(f._ImgManager.getCurrentImageIndex(),f._ImgManager.count());else if(1==y&&f.__IfAppendImage)e.each(I,function(pe,B){var G,K=parseInt(pe);if(isNaN(K)||K<0)return!0;if((G=B<w.length&&w[B]?w[B]:{}).currentFileName=M,m)f._aryBitmapCache.push(K);else for(var ee=0;ee<f._aryBitmapCache.length;ee++)if(f._aryBitmapCache[ee]==K)return f._aryBitmapCache.splice(ee,1),!0;if(f._ImgManager.exists(K))return!0;f._ImgManager.append(C,K,G)}),e.isFunction(f.__OnRefreshUI)&&f.__OnRefreshUI(f._ImgManager.getCurrentImageIndex(),f._ImgManager.count());else if(3==y&&m){var Z=!1;1==I.length&&-1==I[0]?Z=!0:1==I.length&&f._ImgManager.count()<=1&&""!=I[0]&&(Z=f._ImgManager.convertClientIndexToServerId(0)==I[0]),Z?f._ImgManager.clear():e.each(I,function(pe,B){var K=parseInt(pe);if(isNaN(K)||K<0)return!0;f._ImgManager.removeByServerId(K)}),e.isFunction(f.__OnRefreshUI)&&f.__OnRefreshUI(f._ImgManager.getCurrentImageIndex(),f._ImgManager.count())}else if(4==y)e.each(I,function(pe,B){var G,K=parseInt(pe);if(isNaN(K)||K<0)return!0;if((G=B<w.length&&w[B]?w[B]:{}).currentFileName=M,K>=0&&!f.__bLoadingImage){f._isBindViewer()&&(0==f._ImgManager.bImageJustChangedInEditor?f._ImgManager.bImageChangedInViewer=!0:(f._ImgManager.bImageJustChangedInEditor=!1,f._ImgManager.bImageChangedInViewer=!1));var ee=f._ImgManager.convertServerIdToClientIndex(K);ee>-1&&f.OnRefreshUI(ee,f._ImgManager.count(),!0,G)}});else if(5==y&&_>=0&&!f.__bLoadingImage){var ne;(ne=0<w.length&&w[0]?w[0]:{}).currentFileName=M,0==f.__IfAppendImage&&f.OnRefreshUI(_,f._ImgManager.count(),!0,ne),f._ImgManager.refresh(_,f._ImgManager.count(),!1,ne)}if(e.isFunction(f.__OnBitmapChanged)){if(!g){if(T.navInfo.bFirefox&&!m)return!0;if(!T.navInfo.bFirefox&&m)return!0}var oe=[];e.each(I,function(pe){var K,B=parseInt(pe);if(isNaN(B)||B<0)return!0;(K=f._ImgManager.convertServerIdToClientIndex(B))>-1&&oe.push(K)});var ue=f._ImgManager.getCurrentImageIndex(),X=y;1==y&&(X=f.__IfAppendImage?1:2),f.__OnBitmapChanged(oe,X,ue,f._ImgManager.count())}},o._OnPostLoad=function(c,u){var g,p,m,I,h=this;void 0!==u&&void 0!==u.exception&&void 0!==u.description&&(h._errorCode=u.exception,h._errorString=u.description),e.log("OnPostLoad Results:"),p=c[1].split(","),g=e.base64.decode(p[0]),m=e.base64.decode(p[1]),e.log(g),e.log(m),e.log(p[2]),s.autoDiscardBlankImage(h,"On PostLoad"),(I=h._ImgManager.getCurrentImageIndex())>=0&&h.OnRefreshUI(I),e.isFunction(h.__OnPostLoad)&&h.__OnPostLoad(g,m,p[2])},o._OnPostTransfer=function(c){var u=this;e.log("On PostTransfer Results:"+c),s.autoDiscardBlankImage(u,"On PostTransfer"),e.isFunction(u.__OnPostTransfer)&&u.__OnPostTransfer()},o._OnPostTransferAsync=function(c){var u=this;if(e.log("On PostTransfer Async Results:"+c),e.isFunction(u.__OnPostTransferAsync)){var h;if(c&&c.length>=2)try{var g=String(c[1]).replace(/\\/g,"\\\\");(h=e.parse(g)).imageId&&(h.imageId=u.objImageIndexManager.convertServerIdToGuid(h.imageId))}catch(v){e.log(c)}h||(h={imageId:-1}),u.__OnPostTransferAsync(h)}},o._OnPreAllTransfersAsync=function(c){var u=this;if(e.isFunction(u.__OnPreAllTransfersAsync)){var h={event:"beforeAcquire",result:{}};try{e.isArray(c)&&c.length>1&&(h=e.parse(c[1]))}catch(f){}setTimeout(function(){u.__OnPreAllTransfersAsync(h)},10)}},o._OnPostAllTransfers=function(c){var u=this;c.length>=2&&0==u._errorCode&&(u._errorCode=c[1],u._errorString=c[2]),e.log("On PostAllTransfers Results:"+c),u.__bLoadingImage=!1,u.__bAcquireImageNow=!1,u.__closeRemoteScanUI(!0),e.isFunction(u.__OnPostAllTransfers)&&u.__OnPostAllTransfers(),e.License.isLTS()&&T.DWT.lcvrf(u)},o._OnResult=function(c){var h=c[1];e.isFunction(this.__OnResult)&&this.__OnResult(h)},o._OnTransferCancelled=function(c){var u=this;u._ImgManager.getCurrentImageIndex(),u._ImgManager.count(),u.__bLoadingImage=!1,u.__bAcquireImageNow=!1,e.isFunction(u.__OnTransferCancelled)&&u.__OnTransferCancelled()},o._OnTransferError=function(c){e.isFunction(this.__OnTransferError)&&this.__OnTransferError()},o._OnSourceUIClose=function(c){var u=this;u.__closeRemoteScanUI(!0),e.isFunction(u.__OnSourceUIClose)&&u.__OnSourceUIClose()},o._OnPreTransfer=function(c){e.isFunction(this.__OnPreTransfer)&&this.__OnPreTransfer()},o._OnPreAllTransfers=function(c){e.isFunction(this.__OnPreAllTransfers)&&this.__OnPreAllTransfers()},o._OnPercentDone=function(c){var f,p,I,y,_,u=this,h=!1,g=T.Lib,v=!1,m=0;if(g.isArray(c)&&c.length>2&&(p=c[0],I=c[2],c.length>3&&(y=c[3]),c.length>4&&(_=c[4]),f=m=c[1],m<0?f=0:m>100&&(f=100),f=Math.floor(f),(1==g.cancelFrome||2==g.cancelFrome||5==g.cancelFrome)&&(v=_)),u._bServerPercentDone||0==p){if((m>0||0==m)&&((1==g.cancelFrome||2==g.cancelFrome)&&"http"==y&&(h=!0),(3==g.cancelFrome||4==g.cancelFrome)&&"ftp"==_&&(h=!0)),0==g.cancelFrome&&1==u.__IfShowProgressBar||0!=g.cancelFrome&&1==u.__IfShowCancelDialogWhenImageTransfer){var x,A=g.one(".dynamsoft-progressBar"),M=g.one(".dynamsoft-status"),E=g.one(".dynamsoft-finalMessage"),R=g.one(".dynamsoft-desc");if(3==g.cancelFrome||4==g.cancelFrome){var P=y;0==P?s.setBtnCancelVisibleForProgress(u,!1):1==P&&s.setBtnCancelVisibleForProgress(u,!0)}if(m<0?(g.progressMessage=I,x=g.progressMessage):x=""!=I&&"1/1"!=I?g.progressMessage+"("+I+")":g.progressMessage,E&&E.getEL()){var F="",k="";x.indexOf(" ...")&&(x=x.replace(" ...","...")),-1!=x.indexOf("(")?(F=x.substr(0,x.indexOf("(")),k=x.substr(x.indexOf("("))):F=x,g.each(d,function(S,L){-1!=S.indexOf(F)&&(x=l.CustomizableDisplayInfo.customProgressText[L]+k)}),""==x&&(x="&nbsp;"),E.html(x)}0!=v?(""==v||g.isUndef(v)?v="&nbsp;":g.isString(v)&&v.length>30&&(v=v.substring(0,30)+"..."),R.html(v)):R.html("&nbsp;"),(f||0===f)&&(M&&M.getEL()&&M.html(f+"%"),A&&A.getEL()&&(i.bIE?A[0].objProgressBar?A[0].objProgressBar.setValue(f):A[0].value=f:(i.bEdge&&(A[0].style.display=""),A[0].value=f))),f&&(f>=100||g.dlgRef<=0)&&(setTimeout(function(){A&&A.getEL()&&(i.bIE?A[0].objProgressBar?A[0].objProgressBar.setValue(0):A[0].value=0:(i.bEdge&&(A[0].style.display="none"),A[0].value=0))},1e3),g.dlgRef<=0)&&g.closeProgress("OnPercentDone")}1==h&&(g.isFunction(u.__OnInternetTransferPercentage)&&u.__OnInternetTransferPercentage(f,!1),g.isFunction(u.__OnInternetTransferPercentageEx)&&u.__OnInternetTransferPercentageEx(f,!1)),g.isFunction(u.__OnPercentDone)&&u.__OnPercentDone()}},o._OnGetFilePath=function(c){var g,v,p,u=this;g=c[1].split(","),e.log("On GetFilePath Results:"+c),v=e.base64.decode(g[3]),p=e.base64.decode(g[4]),"-1032"==g[2]&&(g[2]="-1",v=p=""),e.isFunction(u.__OnGetFilePath)&&u.__OnGetFilePath(1*g[0],1*g[1],1*g[2],v,p),u.__bOpenFileNow=!1},o.checkErrorString=function(){var u=this.ErrorCode;return-2115===u||(-2003!==u||T.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(this.__HTTPPostResponseString),0===u)},o.__GetLoadEventsNum=function(){var u=0;return e.isFunction(this.__OnPostLoad)&&(u|=1),e.isFunction(this.__OnGetFilePath)&&(u|=2),u},o._OnPageFocus=function(c){var u=this;if(u.bPageFocus=!0,!u._isMobileMode()&&!u.bReady)return T.Lib.connectToWS(u);if(i.bWin&&!u._isMobileMode()&&l.IfAlwaysFocusOnPopupWindow){var h=e.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0});(u.__bAcquireImageNow||c||u.__bOpenFileNow)&&(u.bServerAlwaysFocusOnPopupWindow=!0,u._innerSendCmd("SendEventToScannerUI",["[",h,"]"].join("")))}},o._OnPageBlur=function(c){var u=this;if(i.bWin&&!u._isMobileMode()){if(!u.bReady)return T.Lib.connectToWS(u);var h=e.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});(0!=u.bPageFocus||c)&&(u.bPageFocus=!1,(u.__bAcquireImageNow||c||u.__bOpenFileNow)&&(u.bServerAlwaysFocusOnPopupWindow=!1,u._innerSendCmd("SendEventToScannerUI",["[",h,"]"].join(""))))}})}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var n=e.html5.STwain.prototype,a=e,s=e.html5.Funs,l=!1,d=!0;n.SetCookie=function(c){return this._cookie=c,document.cookie=c,d},n.LoadImageFromBase64Binary=function(c,u,h,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!c)return e.Errors.InvalidParameter(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1;var y,_,v=c,p=l,m="LoadImageFromBase64Binary",I=u,C=1;if(v instanceof T.Lib.html5.Base64Result&&e.isFunction(v.getLength)&&e.isFunction(v.getData)&&(v=v.getData(0,v.getLength())),e.isString(v))if(-1!=v.indexOf("data:image/bmp"))I=0;else if(-1!=v.indexOf("data:image/jpeg"))I=1;else if(-1!=v.indexOf("data:image/tif"))I=2;else if(-1!=v.indexOf("data:image/png"))I=3;else if(-1!=v.indexOf("data:application/pdf"))I=4;else if(-1!=v.indexOf("data:image/jp2"))I=14;else{var A=v.substr(0,64),M=T.Lib.base64.decode(A,!0);I=e.html5.Funs.GetFileType(M)}if(I!=T.DWT.EnumDWT_ImageType.IT_BMP&&I!=T.DWT.EnumDWT_ImageType.IT_JPG&&I!=T.DWT.EnumDWT_ImageType.IT_TIF&&I!=T.DWT.EnumDWT_ImageType.IT_PNG&&I!=T.DWT.EnumDWT_ImageType.IT_PDF&&I!=T.DWT.EnumDWT_ImageType.IT_J2K&&(I=-1),!e.License.checkProductKey(g,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(g,I))return e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),l;if(g._isMobileMode()){e.cancelFrome=2,e.showProgress(g,m,d),g.__bLoadingImage=d;var E=v;if(a.isString(v)){if(v.indexOf("blob:")>=0||v.indexOf("data:")>=0||(v=[I==T.DWT.EnumDWT_ImageType.IT_PNG?"data:image/png;base64,":I==T.DWT.EnumDWT_ImageType.IT_JPG?"data:image/jpeg;base64,":I==T.DWT.EnumDWT_ImageType.IT_TIF?"data:image/tif;base64,":I==T.DWT.EnumDWT_ImageType.IT_PDF?"data:application/pdf;base64,":I==T.DWT.EnumDWT_ImageType.IT_BMP?"data:image/bmp;base64,":I==T.DWT.EnumDWT_ImageType.IT_J2K?"data:image/jp2;base64,":"data:application/octet-stream;base64,",v].join("")),v.indexOf("data:")>=0&&0==(E=a.MobileFuns.dataURLtoBlob(v)))return T.Lib.closeProgress(m),g.__bLoadingImage=!1,e.Errors.ConvertFromBase64Failed(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString,v,u),!1}else if(v instanceof ArrayBuffer){var x="image/png";I==T.DWT.EnumDWT_ImageType.IT_PNG?x="image/png":I==T.DWT.EnumDWT_ImageType.IT_JPG?x="image/jpeg":I==T.DWT.EnumDWT_ImageType.IT_TIF?x="image/tiff":I==T.DWT.EnumDWT_ImageType.IT_PDF?x="application/pdf":I==T.DWT.EnumDWT_ImageType.IT_BMP?x="image/bmp":I==T.DWT.EnumDWT_ImageType.IT_J2K&&(x="image/jp2"),E=new Blob([v],{type:x})}var P=g.GetCurrentFileName();return""==P&&(P=g._ImgManager.getWebViewer().GetDefaultFileName()),y=g._innerSendToMobile("LoadImageFromBinary",a.MobileFuns.makeParams(E,!1,null,P),0,function(){if(T.Lib.closeProgress(m),g.__bLoadingImage=!1,g._isBindViewer()){var F=g._ImgManager.getCurrentImageIndex();F>=0&&g.OnRefreshUI(F)}return h&&h(v,u),!0},function(){T.Lib.closeProgress(m),g.__bLoadingImage=!1,e.isFunction(f)&&f(g.ErrorCode,g.ErrorString,v,u)}),!0}if(e.isFunction(h)&&(p=d),e.isString(v)&&-1!=v.indexOf("base64,")&&(v=v.substr(v.indexOf("base64,")+7)),_=g.__GetLoadEventsNum(),p){if(s.isServerInvalid(g))return e.isFunction(f)&&f(g.ErrorCode,g.ErrorString,v,u),l;e.cancelFrome=2,e.showProgress(g,m,d),g.__bLoadingImage=d,y=g._innerSend(m,s.makeParams(v,I,_,C=0),d,function(){if(T.Lib.closeProgress(m),g.__bLoadingImage=!1,g._isBindViewer()){var F=g._ImgManager.getCurrentImageIndex();F>=0&&g.OnRefreshUI(F)}return h&&h(v,u),!0},function(){T.Lib.closeProgress(m),g.__bLoadingImage=!1,e.isFunction(f)&&f(g.ErrorCode,g.ErrorString,v,u)})}else y=g.__innerLoadImageFun(m,s.makeParams(v,I,_,C),C,P);return y},n.SaveSelectedImagesToBytes=function(c,u){return e.Errors.HTML5NotSupport(this),l},n.LoadImageFromBytes=function(c,u,h){return e.Errors.HTML5NotSupport(this),l},n.UnregisterEvent=function(c,u){var h=this;return h._resetErr(),!!h._isValid()&&(h[["__",c].join("")]=null,d)},n.SetCancel=function(c,u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("SetCancel",u):this._innerSend("SetCancel",null,d,c,u))},n._asyncSetImageWidth=function(c,u,h,f){var g=this,m=parseInt(c);return g._innerSendToMobile("SetImageWidth",a.MobileFuns.makeParams(m,u),0,function(){s.refreshImageAfterInvokeFun(g,c),e.isFunction(h)&&setTimeout(h,30)},function(){e.isFunction(f)&&f(g.ErrorCode,g.ErrorString)})},n.SetImageWidth=function(c,u,h,f){var p,g=this;if(g._resetErr(),!g._isValid())return!1;var m=parseInt(c);if(isNaN(m))return e.Errors.InvalidIndex(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1;if(m<0||m>=g._ImgManager.count())return e.Errors.IndexOutOfRange(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1;if(e.isUndefined(u))return e.Errors.InvalidParameter(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1;if(g._isMobileMode())return g._asyncSetImageWidth(m,u,h,f);var I=g._ImgManager.convertClientIndexToServerId(m);return-1==I?(e.Errors.IndexOutOfRange(g),e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),!1):((p=1==g._innerFun("SetImageWidth",s.makeParams(I,u)))?e.isFunction(h)&&h():e.isFunction(f)&&f(g.ErrorCode,g.ErrorString),p)},n.HTTPDownloadStreamThroughPost=function(c,u){return e.Errors.HTML5NotSupport(this),l},n.HTTPUploadStreamThroughPost=function(c,u,h,f,g){return e.Errors.HTML5NotSupport(this),l},n.HTTPUploadThroughPutDirectly=function(c,u,h,f,g){return e.Errors.HTML5NotSupport(this),!1},n.SetCustomDSDataEx=function(c){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("SetCustomDSDataEx"):this._innerFun("SetCustomDSDataEx",s.makeParams(c)))},n.SetCustomDSData=function(c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("SetCustomDSData");var h=s.replaceLocalFilename(c);return this._innerFun("SetCustomDSData",s.makeParams(h))},n.GetCustomDSDataEx=function(){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("GetCustomDSDataEx"):c._innerFun("GetCustomDSDataEx"))},n.GetCustomDSData=function(c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("GetCustomDSData");var h=s.replaceLocalFilename(c);return u._innerFun("GetCustomDSData",s.makeParams(h))},n._asyncConvertToBW=function(c,u,h){var f=this,p=parseInt(c);return f._innerSendToMobile("ConvertToBWScale",a.MobileFuns.makeParams(p),0,function(){s.refreshImageAfterInvokeFun(f,c),e.isFunction(u)&&u()},function(){e.isFunction(h)&&h(f.ErrorCode,f.ErrorString)})},n.ConvertToBW=function(c,u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!e.License.checkProductKey(f,{Core:!0}))return e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;var g=parseInt(c);if(isNaN(g))return e.Errors.InvalidIndex(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(g<0||g>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncConvertToBW(g,u,h);var v=f.ChangeBitDepth(c,1,!0);return v?e.isFunction(u)&&u():e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),v},n.LoadImageFromBinary=function(c,u,h){var g,f=this;if(!e.License.checkProductKey(f,{Core:!0}))return e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(!c||""==c)return e.Errors.ParameterCannotEmpty(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;var v=c.currentFileName;if(v||(v=f.GetCurrentFileName())||(v=f._ImgManager.getWebViewer().GetDefaultFileName()),c instanceof FileList){if(1==c.length)return c[0].currentFileName=v,f.LoadImageFromBinary(c[0],u,h);if(c.length>1){var p;for(p=0;p<c.length;p++)c[p].currentFileName=v,e.asyncQueue.pushToDo(f,"LoadImageFromBinary",[c[p],u,h]);return e.asyncQueue.start(),!0}return e.Errors.ParameterCannotEmpty(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1}if(window.ReadableStream&&c instanceof ReadableStream?g=new Response(c):window.Response&&c instanceof Response&&(g=c),f._bLocalService)if(g)g.arrayBuffer().then(function(A){var M=new Blob([A]);f.__LoadImageFromBytes(M,-1,"",!0,u,h)});else{var m=c;(m instanceof ArrayBuffer||m instanceof Uint8Array)&&((m=new Blob([c])).currentFileName=c.currentFileName);var y=-1,C=T.DWT.EnumDWT_ImageType;e.isString(m.type)&&("application/pdf"==m.type?y=C.IT_PDF:"image/png"==m.type?y=C.IT_PNG:"image/jpeg"==m.type||"image/jpg"==m.type?y=C.IT_JPG:"image/bmp"==m.type?y=C.IT_BMP:"image/tiff"==m.type||"image/tif"==m.type?y=C.IT_TIF:"image/jp2"==m.type&&(y=C.IT_J2K)),f.__LoadImageFromBytes(m,y,"",!0,u,h)}else g?g.arrayBuffer().then(function(A){f._innerSendToMobile("LoadImageFromBinary",a.MobileFuns.makeParams(A,!1,null,v),0,u,h)}):f._innerSendToMobile("LoadImageFromBinary",a.MobileFuns.makeParams(c,!1,null,v),0,u,h);return!0},n.EnableSourceUI=function(c,u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isMobileMode()?h._mobileNotSupport("EnableSourceUI",u):h._innerSend("EnableSourceUI",null,!0,c,u))},n.getCapabilities=function(c,u){var h=this;return h._bLocalService?h._innerFunRaw("GetCapabilities",null,!0,!1,!1,function(f){var g,v;f.length>0&&(v=f[0]);try{a.isString(v)?(v=a.removeNonPrintableChar(v),v=a.replaceAll(v,"\\\\","\\\\"),g=JSON.parse(v)):g={}}catch(p){return h._errorCode=-2302,h._errorString=p,void(a.isFunction(u)&&u(h.ErrorCode,h.ErrorString))}0==g.errorCode?a.isFunction(c)&&c(g.response):(h._errorCode=g.errorCode,h._errorString=g.errorString,a.isFunction(u)&&u(h.ErrorCode,h.ErrorString))},u):h._mobileNotSupport("GetCapabilities",u)},n.setCapabilities=function(c,u,h){var f=this;if(f._bLocalService){if(e.isObject(c)&&!e.isArray(c)){var g=["[",e.stringify(c),"]"].join("");return f._innerSend("SetCapabilities",g,0,function(p){e.isFunction(u)&&u(p)},h)}return e.Errors.InvalidParameter(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1}return f._mobileNotSupport("SetCapabilities",h)},n.BindViewer=function(c){var u=this,h=!1,f=c;return T.DWT.UseDefaultViewer?(e.isString(c)&&(f=e.get(c)),u.config.container!=f&&(u.config.container=f,u.config.ifBindViewer=!0,e.html5.ui.init(u,u.config)),h=u._ImgManager.BindView(c),u._bBindViewer=!0,u.config.ifBindViewer=!1,h):(e.Errors.CannotBindViewerWhenNoViewerJS(u),!1)},n.UnbindViewer=function(){var c=this;return c.__funResize&&(e.removeEventListener(window,"resize",c.__funResize),c.__funResize=l),c._bBindViewer=!1,c.config.container=null,c._ImgManager?c._ImgManager.UnbindView():l},n.GetIfShowVideoContainer=function(){return this._ImgManager.GetIfShowVideoContainer()},n.ShowVideoContainer=function(c){return this._ImgManager.ShowVideoContainer(c)},n.UpdateVideoContainer=function(c){return this._ImgManager.UpdateVideoContainer(c)},n.ChangeBitDepth=function(c,u,h){var g,f=this;if(f._resetErr(),!f._isValid())return!1;if(f._isMobileMode())return f._mobileNotSupport("ChangeBitDepth");if(g=parseInt(c),isNaN(g))return e.Errors.InvalidIndex(f),!1;if(g<0||g>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),!1;var v=f._ImgManager.convertClientIndexToServerId(g);return-1==v?(e.Errors.IndexOutOfRange(f),!1):f._innerFun("ChangeBitDepth",s.makeParams(v,u,h))},n._asyncConvertToGrayScale=function(c,u,h){var f=this,v=function(){e.isFunction(h)&&h(f.ErrorCode,f.ErrorString)};if(!e.License.checkProductKey(f,{Core:!0}))return v(),!1;var p=parseInt(c);return f._innerSendToMobile("ConvertToGrayScale",a.MobileFuns.makeParams(p),0,function(){s.refreshImageAfterInvokeFun(f,c),e.isFunction(u)&&setTimeout(u,30)},v)},n.ConvertToGrayScale=function(c,u,h){var v,f=this;if(f._resetErr(),!f._isValid())return!1;var p=parseInt(c);if(isNaN(p))return e.Errors.InvalidIndex(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(p<0||p>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncConvertToGrayScale(p,u,h);var m=f._ImgManager.convertClientIndexToServerId(p);return-1==m?(e.Errors.IndexOutOfRange(f),e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1):((v=1==f._innerFun("ConvertToGrayScale",s.makeParams(m)))?(s.refreshImageAfterInvokeFun(f,p),e.isFunction(u)&&u()):e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),v)},n.ClearTiffCustomTag=function(){var c=this;return c._resetErr(),!!c._isValid()&&(c._aryTiffTag.splice(0,c._aryTiffTag.length),!!c._isMobileMode()||c._innerFun("ClearTiffCustomTag"))},n.SetTiffCustomTag=function(c,u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;if(e.isUndef(c)||e.isUndef(u))return e.Errors.InvalidParameter(f),!1;var g,v=1*c;if(g=e.isString(u)?e.replaceAll(u,'"','\\"'):u,v<=0||v>2147483647)return e.Errors.InvalidTiffTagError(f),!1;var m,p=0,I=!1,y=f._aryTiffTag.length;for(p=0;p<y;p++)(m=f._aryTiffTag[p]).tag==v&&(m.Content=u,m.UseBase64Encoding=h,I=!0);return!I&&y>=32?(e.Errors.TiffTagCountExceedError(f),!1):f._isMobileMode()?(I||f._aryTiffTag.push({tag:c,content:u,UseBase64Encoding:h}),!0):f._innerFun("SetTiffCustomTag",s.makeParams(v,g,h))},n.IsBlankImage=function(c){var h,u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("IsBlankImage");if(h=parseInt(c),isNaN(h))return e.Errors.InvalidIndex(u),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),!1;var f=u._ImgManager.convertClientIndexToServerId(h);return-1==f?(e.Errors.IndexOutOfRange(u),!1):u._innerFun("IsBlankImage",s.makeParams(f,l))},n.IsBlankImageExpress=function(c){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("IsBlankImageExpress");var h=parseInt(c);if(isNaN(h))return e.Errors.InvalidIndex(u),!1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),!1;var f=u._ImgManager.convertClientIndexToServerId(h);return-1==f?(e.Errors.IndexOutOfRange(u),!1):u._innerFun("IsBlankImage",s.makeParams(f,d))},n.SetOpenSourceTimeout=function(c){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("SetOpenSourceTimeout"):u._innerFun("SetOpenSourceTimeout",s.makeParams(c)))},n.GetImageURL=function(c,u,h,f,g){var v=this;if(v._resetErr(),!v._isValid())return!1;if(v._isMobileMode()){if(!e.isFunction(u))return v._mobileNotSupport("GetImageURL");v._ImgManager.getWebViewer().GetImageData(v._ImgManager.getWebViewer().GetUidByIndex(c)).then(function(M){u(M.oriData)},function(M){h(M.message)})}var y,_,C,p=c,m=parseInt(u),I=parseInt(h);if(f?(y="",_="dwt://"):(y=v.httpUrl,_="dwt/"),C=[y,_,e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/img?id=",v.clientId],e.isUndefined(p)||null===p)return e.Errors.IndexNullOrUndefined(v),"";if(g)C.push("&index=-1&width=-1&height=-1&webcam="),C.push(g);else{if(p=parseInt(p),isNaN(p))return e.Errors.InvalidIndex(v),"";if(p<-1||p>=v._ImgManager.count())return e.Errors.IndexOutOfRange(v),"";var A=v._ImgManager.convertClientIndexToServerId(p);if(-1==A)return"";C.push("&index="),C.push(A),m>0&&I>0&&(C.push("&width="),C.push(m),C.push("&height="),C.push(I))}return C.push("&t="),C.push((new Date).getTime()),C.join("")},n.GetImagePartURL=function(c,u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;if(f._isMobileMode())return f._mobileNotSupport("GetImagePartURL");var g=parseInt(c);return isNaN(g)?(e.Errors.InvalidIndex(f),""):g<0||g>=f._ImgManager.count()?(e.Errors.IndexOutOfRange(f),""):this.GetImageURL(g,u,h,!0)},n.SetLanguage=function(c){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("SetLanguage"):u._innerFun("SetLanguageForSecurity",s.makeParams(c)))},n._wasmGetLicenseInfo=function(c,u){var h=this;return h._innerSendToMobile("GetLicenseInfo",a.MobileFuns.makeParams(),0,function(g){g?g.exception?u&&u(g.exception):(h.__licenseInfo=g,c&&c(h.__licenseInfo)):u&&u()},u)},n.GetLicenseInfo=function(c,u){var h=this;if(h.__licenseInfo)e.isFunction(c)&&c(h.__licenseInfo);else{if(h._isMobileMode())return h._wasmGetLicenseInfo(c,u);if(s.isHttpServerInvalid(h))return l;h._innerFunRaw("GetLicenseInfo",null,d,l,d,function(g){g?g.exception?e.isFunction(u)&&u(g.exception):(h.__licenseInfo=g,e.isFunction(c)&&c(h.__licenseInfo)):e.isFunction(u)&&u()},u)}return d},n.IndexToImageID=function(c){var u=this;if(u._resetErr(),!u._isValid())return!1;var h=parseInt(c);if(isNaN(h))return e.Errors.InvalidIndex(u),-1;if(h<0||h>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),-1;var f=u._ImgManager.convertClientIndexToServerId(h);return u.objImageIndexManager.convertServerIdToGuid(f)},n.ImageIDToIndex=function(c){var h,u=this,f=-1;return u._resetErr(),!!u._isValid()&&((h=u.objImageIndexManager.convertGuidToServerId(c))>0&&(f=u._ImgManager.convertServerIdToClientIndex(h)),-1==f&&e.Errors.InvalidImageID(u),f)},n._setProductKeyV2=function(c){var u=this,h=c;if(u._resetErr(),!u._isValid())return!1;if(s.isHttpServerInvalid(u))return e.Promise.reject({code:u._errorCode,message:u._errorString});if(!e.isString(h)||"******"==h)return e.Errors.LicenseEmptyOrInvalid(u),e.Promise.reject({code:u._errorCode,message:u._errorString});var f,g=T.DWT.ProductKey;return(f=(f=u._innerFunRawV2("ProductKey",s.makeParams(h))).then(function(v){if(v){if(void 0!==v.exception&&void 0!==v.description)throw u._errorCode=v.exception,u._errorString=v.description,T.DWT.ProductKey=g,f.context=null,{code:u._errorCode,message:u._errorString};return T.DWT.ProductKey=f.context.productKey,f.context=null,u._innerFunRawV2("GetLicenseInfo")}throw e.Errors.LicenseEmptyOrInvalid(u),T.DWT.ProductKey=g,f.context=null,{code:u._errorCode,message:u._errorString}})).context={productKey:h},f},n.SetProductKeyAsync=function(c){var u=this;return u._resetErr(),u._isValid()?e.isUndefined(c)?(e.Errors.LicenseEmptyOrInvalid(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):(u._isMobileMode()?u._innerSendToMobileV2("GetLicenseInfo",a.MobileFuns.makeParams(c)):u._setProductKeyV2(c)).then(function(f){var g=f;if(!g||g.message)throw e.Errors.LicenseEmptyOrInvalid(u),g&&g.message&&(u._errorString=g.message),{code:u._errorCode,message:u._errorString};return e.License.isLTS()||(T.DWT.ProductKey=c),u.__licenseInfo=g,g}):e.Promise.reject({code:u.ErrorCode,message:u.ErrorString})},n.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")},n.isUsingActiveX=function(){return!1},n._setLTSLic=function(c){var u=this,h=c;return u._resetErr(),!!u._isValid()&&(s.isHttpServerInvalid(u)?e.Promise.reject({code:u._errorCode,message:u._errorString}):e.isString(h)?u._innerFunRawV2("LTSLicense",s.makeParams(h)).then(function(f){if(f){if(void 0!==f.exception&&void 0!==f.description)throw u._errorCode=f.exception,u._errorString=f.description,{code:u._errorCode,message:u._errorString};return u._innerFunRawV2("GetLicenseInfo")}throw e.Errors.LicenseEmptyOrInvalid(u),{code:u._errorCode,message:u._errorString}}):(e.Errors.LicenseEmptyOrInvalid(u),e.Promise.reject({code:u._errorCode,message:u._errorString})))},n.SetLTSLicenseAsync=function(c){var u=this;return u._resetErr(),u._isValid()?e.isString(c)?(u._isMobileMode()?u._innerSendToMobileV2("GetLicenseInfo",a.MobileFuns.makeParams(c)):u._setLTSLic(c)).then(function(f){var g=f;if(!g||g.message)throw e.Errors.LicenseEmptyOrInvalid(u),g&&g.message&&(u._errorString=g.message),{code:u._errorCode,message:u._errorString};return u.__licenseInfo=g,u.__licenseInfo&&(u.__licenseInfo.LTS=!0),g}):(e.Errors.LicenseEmptyOrInvalid(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):e.Promise.reject({code:u._errorCode,message:u._errorString})}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.navInfo,n=e.html5.Funs2={getImageUrl:function(h,f,g,v,p){var m=[h];return e.isNumber(f)&&f<0?"":(null!=f&&(m.push("&index="),m.push(f)),m.push("&width="),m.push(g),m.push("&height="),m.push(v),m.push("&ticks="),m.push(p||Date.now()),m.join(""))},getUrlByAct:function(h,f,g){var v=[h];return null!=f&&(v.push("&index="),v.push(f)),g&&(v.push("&act="),v.push(g)),v.push("&ticks="),v.push(Date.now()),v.join("")},output:function(h,f){T.DWT.Debug&&e.log(f)},print:function(h){var g=850,v=1120,p=0,m=0,I=0,y="";for(e.product.bHTML5Edition&&(i.bIE&&(v=1160),i.bFirefox&&(v=1150)),p=0;p<h.length;p++){var _=v,C=h[p],A=C.Width,M=C.Height,E=C.Url;A<=0&&(A=g),M<=0&&(M=_);var R=g/A,x=_/M;R<x?_=parseInt(M*R):R>x&&(g=parseInt(A*x)),m+=A,I+=M,y=y+'<div style="width:850px;height:'+v+'px"><img id="D_img'+p+'" src="'+E+'" style="position:relative;left:0px;top:0px;width: '+g+"px;height: "+_+'px" /></div>'}var P,F=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",m,",height=",I].join(""),k=window.open("about:blank","_blank",F);k&&(k.document.write('<html><body id="D_img">'+y+"</body></html>"),k.document.close(),k.focus(),(P=k.document.getElementById("D_img"))?P.onload=function(){k.print(),e.log("print image...ok")}:e.log("cannot find image"))}},o_output=function(h){T.DWT.Debug&&e.log(h)},d=l.prototype;d._Init=function(h,f){var g=this;f.mapModelImageControl=h._ifBindViewer?g.getView().mapModelImageControl:{},f.onTopImageInTheViewChanged=function(v){T.Lib.isFunction(h.__OnTopImageInTheViewChanged)&&h.__OnTopImageInTheViewChanged(v.index,v.bByScrollBar)},f.onGetImageInfo=function(v){return{width:g.GetImageWidth(v),height:-1}},g._UIView?g._UIView._Init(f):g._UIView=new e.UI.ImageUIView(g,f)},d.getUidByIndex=function(h){return this.getWebViewer().GetUidByIndex(h)},d.getIndexByUid=function(h){return this.getWebViewer().GetIndexByUid(h)},d.getCurrentImageIndex=function(){return this.getWebViewer().GetCurrentIndex()},d.convertServerIdToClientIndex=function(h){var v,p,g=-1;return(p=this._UIView.GetDataImageControl(h))&&(v=p.uuid),v&&(g=this.getWebViewer().GetIndexByUid(v)),e.isNumber(g)||(g=-1),g},d.convertClientIndexToServerId=function(h){var g=this.getWebViewer().GetCustomDataByIndex(h);return g?g.imageId:-1},d.getWebViewer=function(){return this.getView()._webViewer},d.getTwain=function(){return this._stwain},d.getView=function(){return this._UIView},d.OnReady=function(){return this.getView().BaseUrl=[(h=this._stwain).httpUrl,"dwt/",e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/img?id=",h.clientId].join(""),!0;var h},d.count=function(){return this.getView().GetWebViewer().GetHowManyImagesInBuffer()},d.clear=function(){return this.getView().RemoveAllImages(),!0},d.dispose=function(){var h=this;return h._UIView&&(h._UIView.dispose(),h._UIView=null),!0},d.unshift=function(h,f,g){return this.getView(),this._updateUIAfterAdd(0,f,g)},d.append=function(h,f,g){var m,I,y,_,v=this,p=v.getView();I=p.GetWebViewer().GetHowManyImagesInBuffer(),y=p.GetWebViewer().GetCurrentIndex();for(var C=I-1;C>=h;C--)_=v.convertClientIndexToServerId(C),p.RemoveImage(C,_);return I<h?v._updateUIAfterAdd(m=I,f,g,!0):(_=v.convertClientIndexToServerId(m=y>=I-1?0:y+1),p.RemoveImage(m,_),v._updateUIAfterAdd(m,f,g,m==h-1))},d.exists=function(h){return this.getView().exists(h)},d.insertBefore=function(h,f,g,v){var y,I=1*h;return(I<0||I>f)&&(I=-1),I>=(y=this.getView().GetWebViewer().GetHowManyImagesInBuffer())&&(I=y),this._updateUIAfterAdd(I,g,v,!1)},d.insert=function(h,f,g,v){var y,I=1*h;return(I<0||I>f)&&(I=-1),I>=(y=this.getView().GetWebViewer().GetHowManyImagesInBuffer())&&(I=y),this._updateUIAfterAdd(I,g,v,!1)},d._updateUIAfterAdd=function(h,f,g,v){var m=this.getView();return!(f<0)&&m.AddImage(h,f,g,v)},d.removeByServerId=function(h){return this.getView(),this.remove(h)},d.remove=function(h){var g=this.getView(),v=this.convertServerIdToClientIndex(h);return g.RemoveImage(v,h)},d.MoveImage=function(h,f){return this.getView().MoveImage(h,f)},d.SwitchImage=function(h,f){return this.getView().SwitchImage(h,f)},d.GetImageHeight=function(h){var v,p,m,y,f=this,g=1*h;if(p=f.getView(),v=f.count(),g<0||g>v)return 0;if(f._stwain._isMobileMode()){var _=p._webViewer.GetMetaDataByIndex(g);return _&&_.height?_.height:0}return y=f.convertClientIndexToServerId(g),(m=p.GetDataImageControl(y))&&m.imageHeight?m.imageHeight:f._stwain.GetImageHeight(g)},d.GetImageWidth=function(h){var v,p,m,y,f=this,g=1*h;if(p=f.getView(),v=f.count(),g<0||g>v)return 0;if(f._stwain._isMobileMode()){var _=p._webViewer.GetMetaDataByIndex(g);return _&&_.width?_.width:0}return y=f.convertClientIndexToServerId(g),(m=p.GetDataImageControl(y))&&m.imageWidth?m.imageWidth:f._stwain.GetImageWidth(g)},d.get=function(h){var v,p,m,f=this,g=parseInt(h);return p=f.getView(),v=f.count(),!(g<0||g>v)&&(m=f.convertClientIndexToServerId(g),p.GetDataImageControl(m))},d.refresh=function(h,f,g,v){var I,p=this,m=1*h;if(g){var y,_;if(_=p.getView(),y=p.count(),m<0||m>y)return!1;I=p.convertClientIndexToServerId(m),_.SetDataImageControl(m,I,v)}return!0},d.Go=function(h){return this.getView().Go(h)},d.__Next=function(){return this.getView().__Next()},d.__Previous=function(){return this.getView().__Previous()},d.SetSelectedClientIndexArray=function(h){return this.getView().SetSelectedindexes(h)},d.getSelectedClientIndexArray=function(){return this.getView().GetSelectedindexes()},d.GetZoom=function(){return this.getView().GetZoom()},d.SetZoom=function(h){return this.getView().SetZoom(h)},d.__GetPrintUrl=function(h,f,g){var I,_,v=this,p=0,m=0;return!(I=v.getView().GetDataImageControl(f)).width||I.width<=0?I.width=v.GetImageWidth(g):p=I.width,!I.height||I.height<=0?I.height=v.GetImageHeight(g):m=I.height,_=new e.UI.PrintUrl(h,I.width,I.height),I.width=p,I.height=m,_},d.__GetPrintUrlforHttp=function(h,f){var g=this,v=g.getView();e.each(h,function(p){var m=g.convertClientIndexToServerId(p);if(-1!=m){var I=n.getImageUrl(v.BaseUrl,m,-1,-1),y=g.__GetPrintUrl(I,m,p);f.push(y)}}),n.print(f)},d.__GetPrintUrlforSocket=function(h,f){var v,g=this,p=e.Promise.resolve(0),m=0;return e.each(h,function(I){p=p.then(function(){var y=g.convertClientIndexToServerId(I);if(-1!=y){var _=g.getWebViewer().GetUidByIndex(I);g.getWebViewer().GetImageData(_).then(function(C){m++,v=C.oriData instanceof ArrayBuffer?URL.createObjectURL(new Blob([C.oriData])):C.oriData instanceof Blob?URL.createObjectURL(C.oriData):C.oriData;var A=g.__GetPrintUrl(v,y,I);f.push(A),h.length==m&&n.print(f)})}})}),!0},d.__GetPrintUrlforMobileEx=function(h,f){var v,g=this,p=e.Promise.resolve(0),m=0;return e.each(h,function(I){p=p.then(function(){var y=g.convertClientIndexToServerId(I);if(-1!=y){var _=g.getWebViewer().GetUidByIndex(I);g.getWebViewer().GetImageData(_).then(function(C){m++,v=C.oriData instanceof ArrayBuffer?URL.createObjectURL(new Blob([C.oriData])):C.oriData instanceof Blob?URL.createObjectURL(C.oriData):C.oriData;var A=g.__GetPrintUrl(v,y,I);f.push(A),h.length==m&&n.print(f)})}})}),!0},d.PrintEx=function(h){var f=this;if(!(f.count()<=0)){var g=[];return f._stwain._isMobileMode()?f.__GetPrintUrlforMobileEx(h,g):T.DWT.ConnectWithSocket?f.__GetPrintUrlforSocket(h,g):f.__GetPrintUrlforHttp(h,g),!0}},d.Print=function(){var h=this;if(h.count()<=0)return!1;var f,g=[];for(f=0;f<h.count();f++)g.push(f);return h.PrintEx(g)},d._isNoViewer=function(){return!this._stwain._bBindViewer},d.ChangeSize=function(h,f){return this.getView().ChangeImageViewSize(h,f)},d.GetWidth=function(){return this.getView().GetWidth()},d.SetWidth=function(h,f){return!!this._isNoViewer()||this.getView().SetWidth(h)},d.GetHeight=function(){return this.getView().GetHeight()},d.SetHeight=function(h,f){return!!this._isNoViewer()||this.getView().SetHeight(h)},d.SetViewMode=function(h,f){var g=this;return g._isNoViewer()?g._nouiNotSupport("SetViewMode"):g.getView().SetViewMode(h,f)},d.ShowImageEditorEx=function(h,f,g,v,p,m,I,y){var _=this;if(_._isNoViewer())return _._nouiNotSupport("ShowImageEditorEx");switch(p){case 0:case 1:case 2:break;case 3:if(_.getWebViewer().OnCloseImageEditor())return!0}var R,P,M=document;P=_.getView(),_.getTwain()._containerElement==I&&(m=!1,o_output("warning: cannot use the same DIV for the main viewer and the editor viewer."));for(var F=0;F<T.DWT.DynamicContainers.length;F++)if(T.DWT.DynamicContainers[F].ContainerId==I){m=!1,o_output("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}if(m&&I&&(e.isDOM(I)?R=I:e.isShadowRoot(I)?(R=document.createElement("div"),I.appendChild(R)):(R=M.getElementById(I))&&"DIV"!=R.nodeName&&(o_output("warning: cannot create the editor viewer in a non-DIV element."),m=!1)),m&&I&&e.isDOM(I)){var k=e.getShadowRoot(I);if(k){var S,L,w=T.Lib.timestamp;return(S=M.createElement("link")).href=[T.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",w].join(""),S.rel="stylesheet",S.async=!0,(L=M.createElement("link")).href=[T.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",w].join(""),L.rel="stylesheet",L.async=!0,e.scriptOnload(S,function(){e.scriptOnload(L,function(){return P.GetWebViewer().ShowImageEditor(R,m,g,v)}),k.appendChild(L)}),k.appendChild(S),!0}}return P.GetWebViewer().ShowImageEditor(R,m,g,v)},d.SetSelectionRectAspectRatio=function(h){return this.getView().SetSelectionRectAspectRatio(h)},d.GetSelectionRectAspectRatio=function(){return this.getView().GetSelectionRectAspectRatio()},d.GetSelectionImageBorderColor=function(){return this.getView().GetSelectionImageBorderColor()},d.SetSelectionImageBorderColor=function(h){var g=h;return this.getView().SetSelectionImageBorderColor(g)},d.GetBackgroundColor=function(){return this.getView().GetBackgroundColor()},d.SetBackgroundColor=function(h,f){var m;return!!this._isNoViewer()||(m=this.getView(),f?m.SetBackgroundColor(h,!0):m.SetBackgroundColor(h))},d.GetAllowMultiSelect=function(){var f=this.getView();return!this._isNoViewer()&&f.GetAllowMultiSelect()},d.SetAllowMultiSelect=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetAllowMultiSelect(h)},d.GetFitWindowType=function(){var f=this.getView();return this._isNoViewer()?0:f.GetFitWindowType()},d.SetFitWindowType=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetFitWindowType(h)},d.GetIfFitWindow=function(){var f=this.getView();return!!this._isNoViewer()||f.GetIfFitWindow()},d.SetIfFitWindow=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetIfFitWindow(h)},d.GetImageMargin=function(){var f=this.getView();return this._isNoViewer()?0:f.GetImageMargin()},d.SetImageMargin=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetImageMargin(h)},d.GetMouseShape=function(){var f=this.getView();return this._isNoViewer()?0:f.GetMouseShape()},d.SetMouseShape=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetMouseShape(h)},d.GetShowPageNumber=function(){var f=this.getView();return!this._isNoViewer()&&f.GetShowPageNumber()},d.SetShowPageNumber=function(h){var g=this.getView();return!!this._isNoViewer()||g.SetShowPageNumber(h)},d.GetIfAutoScroll=function(){return this.getView().GetIfAutoScroll()},d.SetIfAutoScroll=function(h){return this.getView().SetIfAutoScroll(h)},d.OverlayRectangle=function(h,f,g,v,p,m,I){return!!this._isNoViewer()||this.getView().OverlayRectangle(h,f,g,v,p,m,I)},d.SetSelectedImageArea=function(h,f,g,v,p){var I=this.getView();return h==I.GetWebViewer().GetCurrentIndex()&&(!!this._isNoViewer()||I.SetSelectedImageArea(f,g,v,p))},d.ShowImagesByFilter=function(h,f,g){return this.getView().FilterImagesByTag(h,f,g)},d.ClearFilter=function(){return this.getView().ClearFilter()},d.GetServerIdListByTag=function(h){return this.getView().GetServerIdListByTag(h)},d.GetAllServerIdList=function(){return this.getView().GetServerIdList()},d.RemoveImageTag=function(h){return this.getView().RemoveImageTag(h)},d.SetDefaultTag=function(h){return this.getView().SetDefaultTag(h)},d.AddImageTag=function(h,f){return this.getView().AddImageTag(h,f)},d.GetCurrentTag=function(){return this.getView().GetCurrentTag()},d.RenameTag=function(h,f){return this.getView().RenameTag(h,f)},d.RemoveTag=function(h,f){return this.getView().RemoveTag(h,f)},d.GetTagList=function(){return this.getView().GetTagList()},d.GetTagListByIndex=function(h){return this.getView().GetTagListByIndex(h)},d.OpenFile=function(h){return this.getView().OpenFile(h)},d.CreateFile=function(h){return this.getView().CreateFile(h)},d.GetCurrentFileName=function(){return this.getView().GetCurrentFileName()},d.RemoveFile=function(h){return this.getView().RemoveFile(h)},d.GetFileInfoList=function(){return this.getView().GetFileInfoList()},d.GetImageIdsByFileName=function(h){return this.getView().GetImageIdsByFileName(h)},d.BindView=function(h){var g=this.getView(),v=h;return e.isString(h)?v=e.get(h):e.isDOM(v)&&(!v.id||""==v.id)&&(v.id=["dwt_",e.getRandom()].join("")),g.BindView(v)},d.UnbindView=function(){return this.getView().UnbindView()},d.GetIfShowVideoContainer=function(){return this.getView().GetIfShowVideoContainer()},d.ShowVideoContainer=function(h){return this.getView().ShowVideoContainer(h)},d.UpdateVideoContainer=function(h){return this.getView().UpdateVideoContainer(h)},d.GetImageData=function(h){var f=this,g=f.getView(),v=f.convertServerIdToClientIndex(h);return v>=0?g.GetImageData(f.getUidByIndex(v)):NaN},d.RegistLoadCallback=function(h){return this.getView().RegistLoadCallback(h)},c.prototype.Clear=function(){var h=this;h.imageUrl="",h.minImageUrl="",h.serverId=-1,h.aryOverlayRectangleData=[]},e.UI=e.UI||{},e.UI.ImageManager=l,e.UI.ModelImageControl=c,e.UI.PrintUrl=function(h,f,g){var v=this;v.Url=h,v.Width=f,v.Height=g}}function l(h,f){var g=this;g._stwain=h,g.__BackgroundFillColor=16777215,g.bImageJustChangedInEditor=!1,g.bImageChangedInViewer=!1,g._Init(h,f)}function c(){var h=this;h.bIsDirty=!1,h.imageWidth=0,h.imageHeight=0,h.iImageControlWidth=0,h.iImageControlHeight=0,h.imageUrl="",h.minImageUrl="",h.uuid=-1,h.serverId=-1,h.aryOverlayRectangleData=[],h.ticks=Date.now()}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=e.html5.STwain,n=e.html5.Funs,s={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14},o=function(l,d){if(!e.isUndef(l)&&!e.isUndef(d)&&null!=l&&null!=d){for(var c in d)l.hasOwnProperty(c)?"object"==typeof l[c]&&o(l[c],d[c]):l[c]=d[c];return l}};i.prototype.checkStartScanParams=function(l,d){var c=this;if(!l)return e.Errors.ScanUploader_InvalidScanSetup(c),!1;if(!e.isUndefined(d.transferMode)&&0!=l.transferMode&&1!=l.transferMode&&2!=l.transferMode)return e.Errors.ScanUploader_InvalidTransferMode(c),!1;if(l.transferMode==T.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!l.fileXfer)return e.Errors.ScanUploader_InvalidFileXfer(c),!1;if(!e.isString(l.fileXfer.fileName)||""==l.fileXfer.fileName)return e.Errors.ScanUploader_InvalidFileXferFilename(c),!1;if(!e.isNumber(l.fileXfer.fileFormat)||l.fileXfer.fileFormat<0||l.fileXfer.fileFormat>16)return e.Errors.ScanUploader_InvalidFileXferFileFormat(c),!1}if(d){if(!e.isString(d.type)||""==d.type)return e.Errors.ScanUploader_InvalidHttpType(c),!1;if(!d.httpParams)return e.Errors.ScanUploader_InvalidHttpParams(c),!1;if(l.transferMode!=T.DWT.EnumDWT_TransferMode.TWSX_FILE&&e.isUndefined(d.format))return e.Errors.ScanUploader_InvalidOutputFormat(c),!1;if(!e.isString(d.httpParams.url)||""==d.httpParams.url)return e.Errors.ScanUploader_InvalidHttpUrl(c),!1;if(!e.isString(d.httpParams.fileName)||""==d.httpParams.fileName)return e.Errors.ScanUploader_InvalidHttpFilename(c),!1}return!0},i.prototype.startScan=function(l){var d=this,c=l;if(d._resetErr(),!d._isValid())return!1;if(d._isMobileMode())return d._mobileNotSupportAsync("startScan");if(1==d.startScanFlag)return e.Errors.StartScanFailed(d),e.Promise.reject({code:d.ErrorCode,message:d.ErrorString});d.startScanFlag=!0,e.isObject(c)||(c={});var M,E,R,u=!1,h=!1,f=!0,g=!0,v=!0,p=!1,m=c.onFinally,I=[],y=[],_=0,C=1,A=[],x={type:"http",format:T.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},P=e.clone(c),F=c;if(R=P.funcScanStatus,delete P.funcScanStatus,P.bfuncScanStatus=!!e.isFunction(R),P.outputSetup){var k={pdfSetup:{},tiffSetup:{}};o(P.outputSetup,x),E=P.outputSetup,delete P.outputSetup,E.pdfSetup&&(E.format==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||E.format==T.DWT.EnumDWT_ImageType.IT_PDF)&&e.mix(k.pdfSetup,E.pdfSetup),E.tiffSetup&&(E.format==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||E.format==T.DWT.EnumDWT_ImageType.IT_TIF)&&e.mix(k.tiffSetup,E.tiffSetup),(E.format==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||E.format==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)&&(E.singlePost=!0),e.isNumber(E.httpParams.threads)&&(C=E.httpParams.threads),u=e.stringify(k),h=d.checkStartScanParams(P,E)}else(E=x).type="",h=d.checkStartScanParams(P,!1);if(!h)return new e.Promise(function(Q,me){f&&(me({code:d.ErrorCode,message:d.ErrorString,response:""}),f=!1,d.startScanFlag=!1)});E.funcHttpUploadStatus&&(p=E.funcHttpUploadStatus);var w=d.HttpFieldNameOfUploadedImage,S=d.MaxUploadImageSize,L=d.IfShowProgressBar,U=d.__IfShowCancelDialogWhenImageTransfer,Z=d.__OnPostTransferAsync,ne=d.__OnPostAllTransfers,oe=d.__OnHttpUploadStatus,ue=d.__insertingIndex,X=d.__IfAppendImage,pe=d.httpFormFields,B=d._tiffCompressionType,K=!1,G=E.showProgressBar,ee=function(Q){var me=!0;e.each(A,function(H,j){-1==H.st&&(me=!1)}),me?ie(Q):setTimeout(function(){ee(Q)},200)},ie=function(Q){Q.__OnPostTransferAsync=Z,Q.__OnPostAllTransfers=ne,Q.__OnHttpUploadStatus=oe,Q.HttpFieldNameOfUploadedImage=w,Q.__maxUploadImageSize=S,Q.IfShowProgressBar=L,Q.__IfShowCancelDialogWhenImageTransfer=U,Q.__insertingIndex=ue,Q.__IfAppendImage=X,Q.httpFormFields=pe,Q._tiffCompressionType=B,Q.__OnCancel=!1,T.FileUploader&&(T.FileUploader.nextLoopTime=600),Q.startScanFlag=!1},be=function(Q,me,H){g?(me(H),ee(Q)):setTimeout(function(){be(Q,me,H)},200)},Te=function(Q,me){K=!0,f&&(f=!1,g||d._innerSendCmd("CancelAllPendingTransfers"),be(d,Q,me))},Ge=function(Q,me,H,j){if(e.isFunction(p)){var de,q=me,re=0;e.isNumber(j)&&j>0&&(re=j),de={fileName:q,percentage:H,statusCode:re,responseString:Q.__HTTPPostResponseString},setTimeout(function(){p(de)},10)}};if(d.__OnCancel=!1,d.__HTTPPostResponseString="",d.IfShowProgressBar=G,d.__IfShowCancelDialogWhenImageTransfer=G,e.isNumber(P.insertingIndex)&&P.insertingIndex>-1&&(d.__insertingIndex=P.insertingIndex,d.__IfAppendImage=!1),d.__OnHttpUploadStatus=!!e.isFunction(p)&&p,E.useUploader&&!T.FileUploader)return new e.Promise(function(me,H){e.Errors.Uploader_ModuleError(d),g=!0,Te(H,{code:d.ErrorCode,message:d.ErrorString,response:""})});if(M=E.reTries,E.useUploader){var je=E.httpParams.url;if(!e.startsWith(je,"http://")&&!e.startsWith(je,"https://")){var he=window.location.href,ae=he.lastIndexOf("/");he=he.substring(0,ae+1),E.httpParams.url=he+je}}else e.each(E.httpParams.headers,function(Q,me){d.SetHTTPHeader(me,Q)}),e.each(E.httpParams.formFields,function(Q,me){d.SetHTTPFormField(me,Q)});return""!==E.httpParams.remoteName&&(d.HttpFieldNameOfUploadedImage=E.httpParams.remoteName),new e.Promise(function(Q,me){E.useUploader?T.FileUploader.Init(0,function(H){Q({uploadManager:H})},function(H,j){d._errorCode=H,d._errorString=j,g=!0,Te(me,{code:H,message:j,response:d.__HTTPPostResponseString})}):Q({})}).then(function(Q){return new e.Promise(function(me,H){var j=function(){(P.transferMode==T.DWT.EnumDWT_TransferMode.TWSX_FILE?_==y.length:_==I.length)?(e.closeProgress("Scan Upload"),K=!0,me(F),ie(d)):setTimeout(j,100)};R&&e.isFunction(R)&&(d.__OnPreAllTransfersAsync=function(re){R(re)}),d.RegisterEvent("OnPostTransferAsync",function(re){var de,Ve,ke,Le,fe,le=E.httpParams.url,we=d.objImageIndexManager.convertGuidToServerId(re.imageId),Ae=E.singlePost,Se=P.transferMode==T.DWT.EnumDWT_TransferMode.TWSX_FILE,ye=E.removeAfterOutput,Fe=0;if(v&&(g=!1,v=!1),Se?(Fe=y.length,y.push(re.path)):(Fe=I.length,I.push(we)),R&&e.isFunction(R)){var $e={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:Fe+1}};setTimeout(function(){R($e)},10)}if(K)return!1;if("http"==E.type&&(Ve=n.cformat(E.httpParams.fileName,Fe+1),ke=n.cformat(E.httpParams.remoteName,Fe+1),!Ae&&"http"==E.type))if(e.isNumber(E.httpParams.maxSizeLimit)&&(d.__maxUploadImageSize=E.httpParams.maxSizeLimit),E.useUploader){G&&(T.FileUploader.nextLoopTime=300,e.showProgress(d,"Scan Upload",!0)),Le=function(Be,Qe){return d.__HTTPPostResponseString=Qe,Ge(d,Be._fileName,100,200),d._OnPercentDone([0,100,"","http",Be._fileName]),G&&e.closeProgress("Scan Upload"),!Se&&E.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1?d._removeImageById(we,function(){_++},function(){_++}):_++},100):_++,!0};var De,Oe,Ne=Q.uploadManager;if(De=function(){if(G){var Qe,Be;for(Be=Se?y.length:I.length,Qe=0;Qe<Be;Qe++)e.closeProgress("Scan Upload")}return!Se&&E.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1&&d._removeImageById(we)},100),Ne.CancelAllUpload(),Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString}),!1},fe=function(Be,Qe,Ze,tt){var lt=303;Qe==s.TRANS_SERVICE_ERROR_404?lt=404:Qe==s.TRANS_SERVICE_ERROR_500?lt=500:Qe==s.TRANS_SERVICE_ERROR_503&&(lt=503),d._errorCode=Qe,d._errorString=Ze,d.__HTTPPostResponseString=tt,Ge(d,Ve,100,lt),De()},d.__OnCancel=function(){fe(null,-1032,"User cancelled the operation.","")},Oe=function(){d.__HTTPPostResponseString="",Ge(d,Ve,100,303),De()},Se){var Pe=Ne.CreateJob(),ze=Pe.FormField;e.each(E.httpParams.headers,function(Be,Qe){Pe.HttpHeader[Qe]=Be}),e.each(E.httpParams.formFields,function(Be,Qe){ze.Add(Qe,Be)}),Pe.ServerUrl=le,Pe.bDeleteFile=ye,Pe.reTries=M,e.isNumber(E.httpParams.maxSizeLimit)&&(Pe.maxSizeLimit=E.httpParams.maxSizeLimit),Pe._fileName=Ve,Pe.SourceValue.Add(re.path,Ve,ke),Pe.ImageType=P.fileXfer.fileFormat,Pe.ThreadNum=C,Pe.OnRunSuccess=Le,Pe.OnRunFailure=fe,(G||e.isFunction(p))&&(Pe.OnUploadTransferPercentage=function(Be,Qe){Qe>0&&Qe<=100&&(100==Qe&&(Qe=99),G&&d._OnPercentDone([0,Qe,"","http",Be._fileName]),e.isFunction(p)&&Ge(d,Be._fileName,Qe,0))},e.cancelFrome=5,G&&d._OnPercentDone([0,-1,T.MSG.Uploading,"http",Ve]),Ge(d,Ve,0,0)),Ne.Run(Pe)}else(de=E.format)==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?de=T.DWT.EnumDWT_ImageType.IT_PDF:de==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(de=T.DWT.EnumDWT_ImageType.IT_TIF),G&&(e.cancelFrome=5,d._OnPercentDone([0,-1,T.MSG.Encoding,"http",Ve])),d._asyncGenerateURLForUploadData([we],de,u,function(Be){var Qe=Ne.CreateJob(),Ze=Qe.FormField;e.each(E.httpParams.headers,function(tt,lt){Qe.HttpHeader[lt]=tt}),e.each(E.httpParams.formFields,function(tt,lt){Ze.Add(lt,tt)}),Qe.ServerUrl=le,Qe.bDeleteFile=ye,Qe.reTries=M,e.isNumber(E.httpParams.maxSizeLimit)&&(Qe.maxSizeLimit=E.httpParams.maxSizeLimit),Qe._fileName=Ve,Qe.SourceValue.Add(Be,Ve,ke),Qe.ImageType=de,Qe.ThreadNum=C,Qe.OnRunSuccess=Le,Qe.OnRunFailure=fe,(G||e.isFunction(p))&&(Qe.OnUploadTransferPercentage=function(tt,lt){lt>0&&lt<=100&&(100==lt&&(lt=99),G&&d._OnPercentDone([0,lt,"","http",tt._fileName]),e.isFunction(p)&&Ge(d,tt._fileName,lt,0))},e.cancelFrome=5,G&&d._OnPercentDone([0,-1,T.MSG.Uploading,"http",Ve]),Ge(d,Ve,0,0)),Ne.Run(Qe)},Oe)}else{var ge={id:we,st:-1,bCancel:!1};if(A.push(ge),0==Fe&&e.showProgress(d,"Scan Upload",!0),Se)Le=function(Be){return ge.st=0,!Se&&E.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1?d._removeImageById(we,function(){_++},function(){_++}):_++},100):_++,!0},fe=function(){!Se&&E.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1&&d._removeImageById(we)},100);var Be={code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString};return e.closeProgress("Scan Upload"),2==ge.st||(ge.st=1,e.each(A,function(Qe,Ze){-1==Qe.st&&(Qe.bCancel=!0)}),Te(H,Be)),!1},d._innerUploadDirectly(le,re.path,Ve,G,ye,M,!1,ge,Le,fe);else{if(Le=function(Be,Qe){return ge.st=0,!Se&&E.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1?d._removeImageById(we,function(){_++},function(){_++}):_++},100):_++,!0},fe=function(Be){!Se&&E.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(we)>-1&&d._removeImageById(we)},100);var Qe={code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString};return e.closeProgress("Scan Upload"),2==ge.st||(ge.st=1,e.each(A,function(Ze,tt){-1==Ze.st&&(Ze.bCancel=!0)}),Te(H,Qe)),!1},e.isUndefined(de=E.format)){var Ee=d._ImgManager.convertServerIdToClientIndex(we);return e.Errors.InvalidImageType(d),fe([Ee]),!1}de==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?de=T.DWT.EnumDWT_ImageType.IT_PDF:de==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(de=T.DWT.EnumDWT_ImageType.IT_TIF),e._asyncUploadCmd({bOnlyUploadForm:!1,method:"startScan",_this:d,url:le,serverIds:[we],enumImageType:de,saveSetup:u,fileName:Ve,dataFormat:T.DWT.EnumDWT_UploadDataFormat.Binary,retry:M,bOnlyEmptyIsOK:!1,objUploadFileStatus:ge,asyncSuccessFunc:Le,asyncFailureFunc:fe})}}}),d.__OnPostAllTransfers=function(){var re,ye,Fe,de=T.DWT.EnumDWT_UploadDataFormat.Binary,le=E.httpParams.url,we=E.singlePost,Ae=P.transferMode==T.DWT.EnumDWT_TransferMode.TWSX_FILE,Se=E.removeAfterOutput;if(R&&e.isFunction(R)&&(Fe={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:ye=Ae?y.length:I.length}},setTimeout(function(){R(Fe)},10)),0==ye)return e.Errors.SourceHasNothingToCapture(d),void setTimeout(function(){g=!0,m&&e.isFunction(m)&&m(),Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString})},1e3);if(ye>0&&-1029==d.ErrorCode)d._errorCode=0;else if(0!=d.ErrorCode)return g=!0,m&&e.isFunction(m)&&m(),void Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString});if("http"==E.type&&we&&"http"==E.type){var ke,$e,fe=I;if(e.isNumber(E.httpParams.maxSizeLimit)&&(d.__maxUploadImageSize=E.httpParams.maxSizeLimit),E.useUploader){var ze,ge,Oe=Q.uploadManager,Ne=Oe.CreateJob(),Pe=Ne.FormField;if(G&&(T.FileUploader.nextLoopTime=300,e.showProgress(d,"Scan Upload",!0)),ke=function(dt,_t){var Rt=dt._fileName;return Rt||(Rt=""),d._bServerPercentDone=!0,d.__HTTPPostResponseString=_t,Ge(d,Rt,100,200),d._OnPercentDone([0,100,"","http"]),G&&e.closeProgress("Scan Upload"),!Ae&&E.removeAfterOutput?setTimeout(function(){_=0,e.each(fe,function(xt){d._ImgManager.convertServerIdToClientIndex(xt)>-1?d._removeImageById(xt,function(){_++},function(){_++}):_++}),setTimeout(j,100)},100):(K=!0,me(F),ie(d)),!0},ze=function(){return d._OnPercentDone([0,100,"","http"]),G&&e.closeProgress("Scan Upload"),d._bServerPercentDone=!0,Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString}),!Ae&&E.removeAfterOutput&&setTimeout(function(){e.each(fe,function(_t){d._ImgManager.convertServerIdToClientIndex(_t)>-1&&d._removeImageById(_t)})},100),!1},$e=function(dt,_t,Rt,xt){var Pt=303;_t==s.TRANS_SERVICE_ERROR_404?Pt=404:_t==s.TRANS_SERVICE_ERROR_500?Pt=500:_t==s.TRANS_SERVICE_ERROR_503&&(Pt=503),d._errorCode=_t,d._errorString=Rt,d.__HTTPPostResponseString=xt,Ge(d,"",100,Pt),ze()},d.__OnCancel=function(){$e(null,-1032,"User cancelled the operation.","")},ge=function(){d.__HTTPPostResponseString="",Ge(d,"",100,303),ze()},Ae)e.each(E.httpParams.headers,function(dt,_t){Ne.HttpHeader[_t]=dt}),e.each(E.httpParams.formFields,function(dt,_t){Pe.Add(_t,dt)}),Ne.ServerUrl=le,Ne.bDeleteFile=Se,Ne.reTries=M,e.isNumber(E.httpParams.maxSizeLimit)&&(Ne.maxSizeLimit=E.httpParams.maxSizeLimit),e.each(y,function(dt,_t){var Rt=n.cformat(E.httpParams.fileName,_t+1),xt=n.cformat(E.httpParams.remoteName,_t+1);Ne.SourceValue.Add(dt,Rt,xt)}),Ne.ImageType=P.fileXfer.fileFormat,Ne.ThreadNum=C,Ne.OnRunSuccess=ke,Ne.OnRunFailure=$e,(G||e.isFunction(p))&&(Ne.OnUploadTransferPercentage=function(dt,_t){_t>0&&_t<=100&&(100==_t&&(_t=99),G&&d._OnPercentDone([0,_t,"","http"]),e.isFunction(p)&&(_t>99&&(_t=99),Ge(d,"",_t,0)))},G&&d._OnPercentDone([0,-1,T.MSG.Uploading,"http"]),Ge(d,"",0,0)),Oe.Run(Ne);else if((re=E.format)==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?re=T.DWT.EnumDWT_ImageType.IT_PDF:re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(re=T.DWT.EnumDWT_ImageType.IT_TIF),G&&d._OnPercentDone([0,-1,T.MSG.Encoding,"http"]),d._asyncGenerateURLForUploadData(fe,re,u,function(dt){e.each(E.httpParams.headers,function(xt,Pt){Ne.HttpHeader[Pt]=xt}),e.each(E.httpParams.formFields,function(xt,Pt){Pe.Add(Pt,xt)}),Ne.ServerUrl=le,Ne.bDeleteFile=Se,Ne.reTries=M,e.isNumber(E.httpParams.maxSizeLimit)&&(Ne.maxSizeLimit=E.httpParams.maxSizeLimit);var _t=n.cformat(E.httpParams.fileName,1),Rt=n.cformat(E.httpParams.remoteName,1);Ne._fileName=_t,Ne.SourceValue.Add(dt,_t,Rt),Ne.ImageType=re,Ne.ThreadNum=C,Ne.OnRunSuccess=ke,Ne.OnRunFailure=$e,(G||e.isFunction(p))&&(Ne.OnUploadTransferPercentage=function(xt,Pt){Pt>0&&Pt<=100&&(100==Pt&&(Pt=99),G&&d._OnPercentDone([0,Pt,"","http",_t]),e.isFunction(p)&&Ge(d,_t,Pt,0))},e.cancelFrome=5,G&&d._OnPercentDone([0,-1,T.MSG.Uploading,"http",_t])),Oe.Run(Ne)},ge);else{var Ee=fe.length,Ue=0,Be=0,Qe="";G&&(d._bServerPercentDone=!1,d._OnPercentDone([0,-1,T.MSG.Encoding,"http"])),e.each(fe,function(dt,_t){var Rt=n.cformat(E.httpParams.fileName,_t+1),xt=n.cformat(E.httpParams.remoteName,_t+1);d._asyncGenerateURLForUploadData([dt],re,u,function(Pt){Be=(Ue+1)/Ee*100,Qe=[Ue+1,"/",Ee].join(""),d._OnPercentDone([0,Be,Qe,"http"]),Ne.SourceValue.Add(Pt,Rt,xt),++Ue>=Ee&&(G&&(d._bServerPercentDone=!0),e.each(E.httpParams.headers,function(jt,Ir){Ne.HttpHeader[Ir]=jt}),e.each(E.httpParams.formFields,function(jt,Ir){Pe.Add(Ir,jt)}),Ne.ServerUrl=le,Ne.bDeleteFile=Se,Ne.reTries=M,e.isNumber(E.httpParams.maxSizeLimit)&&(Ne.maxSizeLimit=E.httpParams.maxSizeLimit),Ne.ImageType=re,Ne.ThreadNum=C,Ne.OnRunSuccess=ke,Ne.OnRunFailure=$e,(G||e.isFunction(p))&&(Ne.OnUploadTransferPercentage=function(jt,Ir){Ir>0&&Ir<=100&&(100==Ir&&(Ir=99),G&&d._OnPercentDone([0,Ir,"","http"]),e.isFunction(p)&&(Ir>99&&(Ir=99),Ge(d,"",Ir,0)))},G&&d._OnPercentDone([0,-1,T.MSG.Uploading,"http"])),Oe.Run(Ne))},ge)})}}else if(Ae)ke=function(dt){return d._bServerPercentDone=!0,!Ae&&E.removeAfterOutput?setTimeout(function(){_=0,e.each(fe,function(_t){d._ImgManager.convertServerIdToClientIndex(_t)>-1?d._removeImageById(_t,function(){_++},function(){_++}):_++}),setTimeout(j,100)},100):(K=!0,me(F),ie(d)),!0},$e=function(dt){return d._bServerPercentDone=!0,Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString}),!Ae&&E.removeAfterOutput&&setTimeout(function(){e.each(fe,function(Rt){d._ImgManager.convertServerIdToClientIndex(Rt)>-1&&d._removeImageById(Rt)})},100),!1},d._innerUploadFilesDirectly(le,y,E.httpParams.fileName,G,Se,M,!1,ke,$e);else if(ke=function(dt,_t){return d._bServerPercentDone=!0,!Ae&&E.removeAfterOutput?setTimeout(function(){_=0,e.each(fe,function(Rt){d._ImgManager.convertServerIdToClientIndex(Rt)>-1?d._removeImageById(Rt,function(){_++},function(){_++}):_++}),setTimeout(j,100)},100):(K=!0,me(F),ie(d)),!0},$e=function(dt){return d._bServerPercentDone=!0,Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString}),!Ae&&E.removeAfterOutput&&setTimeout(function(){e.each(fe,function(Rt){d._ImgManager.convertServerIdToClientIndex(Rt)>-1&&d._removeImageById(Rt)})},100),!1},(re=E.format)==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?re=T.DWT.EnumDWT_ImageType.IT_PDF:re==T.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(re=T.DWT.EnumDWT_ImageType.IT_TIF);var Ze=n.cformat(E.httpParams.fileName,1);n.cformat(E.httpParams.remoteName,1),e._asyncUploadCmd({bOnlyUploadForm:!1,method:"startScan",_this:d,url:le,serverIds:fe,enumImageType:re,saveSetup:u,fileName:Ze,dataFormat:de,retry:M,bOnlyEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:ke,asyncFailureFunc:$e})}else d._asyncUploadFilesCmd(le,fe,re,E.httpParams.fileName,u,G,M,!1,ke,$e)}g=!0,m&&e.isFunction(m)&&m()};var q=function(){"http"!=E.type?(K=!0,me(F),ie(d)):E.singlePost||setTimeout(j,100)};d._startScan(P,q,function(re){if(-1029==d.ErrorCode&&(P.transferMode==T.DWT.EnumDWT_TransferMode.TWSX_FILE?y.length>0:I.length>0))return d._errorCode=0,q();Te(H,{code:d.ErrorCode,message:d.ErrorString,response:d.__HTTPPostResponseString})})})})}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=T.DWT,a=T.navInfo,s=e.each;e.env.WSVersion="12.0.0",e.env.WSSession=(new Date).getTime(),e.getHttpUrl=function(l){return l.ssl?["https://",l.host,":",l.port,"/"].join(""):["http://",l.host,":",l.port,"/"].join("")},e.getWSUrl=function(l,d,c){return c?["wss://",l,":",d].join(""):["ws://",l,":",d].join("")},e.getWS_bywsurl=function(l){var c,u=e.product.wsProtocol,h=window.MozWebSocket;if(this.detect.OnCreatWS&&this.detect.OnCreatWS(l,u),void 0!==h)c=u?new h(l,u):new h(l);else{var f=window.WebSocket;if(a.bEdge){var g=window,v=parent;try{for(;g!=v&&v.WebSocket;)f=v.WebSocket,g=v.window,v=v.parent}catch(p){f=window.WebSocket}}c=u?new f(l,u):new f(l)}return T.DWT.globalWS.push(c),c},e.getWS=function(l,d,c){var u=e.getWSUrl(l,d,c);return e.getWS_bywsurl(u)},e._init=function(l){var f,d=T.Lib,c=T.dcp,u=d.LS.item("DWT_port"),h=d.LS.item("DWT_ssl");if(c.bEnhancedMode||(d.detect.urls.splice(0),d.detect.cUrlIndex=0,!l.bLocalService))return!0;u!==r&&h!==r&&(f={port:u,ssl:"true"==h});var g=function(m){return!(f&&(!m||m.port==f.port&&m.ssl==f.ssl))};1===d.detect.detectType?(f!==r&&f.ssl&&d.detect.urls.push(f),s(d.detect.ports,function(m){m.ssl&&g(m)&&d.detect.urls.push(m)})):0===d.detect.detectType?(f!==r&&!f.ssl&&d.detect.urls.push(f),s(d.detect.ports,function(m){!1===m.ssl&&g(m)&&d.detect.urls.push(m)})):(f!==r&&d.detect.urls.push(f),s(d.detect.ports,function(m){g(m)&&d.detect.urls.push(m)}))},e._reconnect=function(){var l=i.ContainerMap;l&&e.each(l,function(d,c){e._reconnectDWT(d)})},e._reconnectDWT=function(l){var d,c,u;if(l&&!l.__bConnecting&&!l.bReady){var h;l.__bConnecting=!0,d=l._host,u=l._ssl,c=l._port;try{(h=e.getWS(d,c,u)).onopen=function(){1==h.readyState?(l._objWS=h,h.clientId=l.clientId,l.bReady||l._OnReady(!0),l.__bConnecting=!1,e.detect.hideMask(),e.detect.bOK=!0):0==h.readyState?setTimeout(h.onopen,100):l.__bConnecting=!1},h.onclose=h.onerror=function(){h.onopen=null,l.__bConnecting=!1,l.bReady?(e.closeProgress("Reconnect"),e.detect.hideMask()):(l.__wsRetry++,l.__wsRetry<5?setTimeout(e._reconnect,500):(e.closeProgress("Reconnect"),e.Errors.Server_Restarted(l))),T.Lib.each(T.DWT.globalWS,function(f,g){if(f==h)return T.DWT.globalWS.splice(g,1),!1})}}catch(f){e.log(f),h&&T.Lib.each(T.DWT.globalWS,function(g,v){if(g==h)return T.DWT.globalWS.splice(v,1),!1}),l.__bConnecting=!1,l.bReady?e.detect.hideMask():(l.__wsRetry++,l.__wsRetry<5&&setTimeout(e._reconnect,500))}}},e._checkAndReconnect=function(l,d){T.DWT.CheckConnectToTheService(l,d,function(){setTimeout(e._reconnect,500)},function(){setTimeout(function(){e._checkAndReconnect(l,d)},500)})},e.connectToWS=function(l){if(!l.bReady&&!l.__bConnecting){var d;l.__bConnecting=!0;try{d=e.getWS(e.product.host,l._port,l._ssl),e.log(["connecting ... [port:",l._port,"]"].join("")),d.onopen=function(){l.__bConnecting=!1,1==d.readyState?(l._objWS=d,d.clientId=l.clientId,l.bReady||l._OnReady(!0)):0==d.readyState&&setTimeout(d.onopen,100)},d.onclose=d.onerror=function(){d.onopen=null,l.__bConnecting=!1,l.bReady&&e.detect.hideMask(),T.Lib.each(T.DWT.globalWS,function(c,u){if(c==d)return T.DWT.globalWS.splice(u,1),!1})}}catch(c){e.log(c),d&&T.Lib.each(T.DWT.globalWS,function(u,h){if(u==d)return T.DWT.globalWS.splice(h,1),!1}),l.__bConnecting=!1,l.bReady&&e.detect.hideMask()}}},e.startWS=function(){var d,l=e.detect,c=!0;if(e.product.bHTML5Edition)if(e.IsNeedLoadWasm()&&(c=!1),c&&l.tryTimes>5)e.log("Failed more than 5 times.");else{var u,h,f;if(l.OnDetectNext&&l.OnDetectNext(),0==l.tryTimes&&l.cUrlIndex>0&&l.arySTwains.length>0&&!l.bNoControlEvent)l.hideMask(),e.isFunction(l.onNoControl)&&((h=(u=l.arySTwains[0])._width)<=0&&(h=270),(f=u._height)<=0&&(f=350),l.onNoControl(u._containerElement,h,f,u)),l.bNoControlEvent=!0;if(c&&l.cUrlIndex>=l.urls.length&&(l.cUrlIndex=0,l.tryTimes++),!(l.arySTwains.length>0))return e.closeLoadingMsg(),void(l.bOK=!0);var g=(d=l.arySTwains[0])._getWebTwainId();if(i.ContainerMap[g]?(d._OnReady(),d.dispose()):0==d._bLocalService&&(d.bReady=!0,d._OnReady()),d.bReady||d._destroy)return l.arySTwains.splice(0,1),void(l.arySTwains.length<=0?l.bOK=!0:setTimeout(e.startWS,100));if(l.bNoControlEvent||l.showMask(),!d.__bConnecting){d.__bConnecting=!0;var v=l.urls[l.cUrlIndex];return o(e.product.host,v.port,v.ssl).then(function(p){d.__bConnecting=!1,d._objWS=p.ws,p.ws.clientId=d.clientId,d._host=p.host,d._port=p.port,d._ssl=p.ssl,T.DWT.IfUseWSPool&&e._addToWSPool(d),d.bReady||(d.bReady=!0,d._OnReady()),l.arySTwains.splice(0,1),l.arySTwains.length<=0?(l.hideMask(),l.bOK=!0):setTimeout(e.startWS,100)},function(p){e.log(p),d.__bConnecting=!1,d.bReady?l.hideMask():(l.cUrlIndex++,setTimeout(e.startWS,100))})}}else e.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},e.startWSByIP=function(){var d,l=e.detect;if(e.product.bHTML5Edition){if(!(l.arySTwainsByIP.length>0))return l.hideMask(),void(l.bOK=!0);var c=(d=l.arySTwainsByIP[0])._getWebTwainId();if(i.ContainerMap[c]?(d._OnReady(),d.dispose()):0==d._bLocalService&&(d.bReady=!0,d._OnReady()),d.bReady||d._destroy)return l.arySTwainsByIP.splice(0,1),void(l.arySTwainsByIP.length<=0?(l.hideMask(),l.bOK=!0):setTimeout(e.startWSByIP,100));if(l.bNoControlEvent||l.showMask(),!d.__bConnecting){var u,h;if(d.__wsRetry>0&&!l.bNoControlEvent)l.hideMask(),e.isFunction(l.onNoControl)&&((u=d._width)<=0&&(u=270),(h=d._height)<=0&&(h=350),l.onNoControl(d._containerElement,u,h,d)),l.bNoControlEvent=!0;return d.__bConnecting=!0,o(d._host,d._port,d._ssl).then(function(f){d.__bConnecting=!1,d._objWS=f.ws,f.ws.clientId=d.clientId,T.DWT.IfUseWSPool&&e._addToWSPool(d),d.bReady||(d.bReady=!0,d._OnReady()),l.arySTwainsByIP.splice(0,1),l.arySTwainsByIP.length<=0?(l.hideMask(),l.bOK=!0):setTimeout(e.startWSByIP,100)},function(f){e.log(f),d.__bConnecting=!1,d.bReady?l.hideMask():(d.__wsRetry++,setTimeout(e.startWSByIP,100))})}}else e.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},e.html5.closeAll=function(){var l,d,c,u,h,f,g,v;for(e.dlgProgress=!1,e.detect.bOK=!1,e.detect.bFirst=!0,l=e.detect.arySTwains.length-1;l>=0;l--)if(c=e.detect.arySTwains[l]){for(f=c._id,c._containerElement&&(h=c._containerElement,u=c._containerElement.id),v=!1,d=0;d<T.DWT.Containers.length;d++)if((g=T.DWT.Containers[d])&&(f==g.WebTwainId||u&&u==g.ContainerId||h==g.Container)){v=!0;break}v&&(c.__unload(),e.detect.arySTwains.splice(l,1)),c._isMobileMode()}},e.bio=!1,e.progressMessage="",e.dialogShowStatus=!1,e.needShowTwiceShowDialog=!1,e.dlgProgress=!1,e.cancelFrome=0,e.dlgRef=0,e.initProgress=function(){var d,c;if(!e.dlgProgress){(c=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),c.push('<h3 class="dynamsoft-finalMessage"> </h3>'),c.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),c.push(a.bIE?'<div class="dynamsoft-progressBar" value="" max="100"></div>':'<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),c.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),c.push("</div></dialog>"),(d=e.one(".dynamsoft-dwt-dialogProgress"))&&d.getEL()&&d.remove();var u=e.parseHTML(c.join(""));if(u&&u.length>0&&document.body.appendChild(u[0]),a.bIE){var h=e.one(".dynamsoft-progressBar"),f=h&&h.getEL();f&&(f.objProgressBar=new e.ProgressBar(f,{width:280,height:20}))}(d=e.one(".dynamsoft-dwt-dialogProgress"))&&d.getEL()&&(e.dlgProgress=d[0],e.dialog.setup(e.dlgProgress)),e.dlgRef=0,e.dialogShowStatus=!1,e.cancelFrome=0}},e.setBtnCancelVisibleForProgress=function(l){if(!(e.dlgRef<=0||0==e.dialogShowStatus)){var d=e.one(".dynamsoft-btnCancel"),c=d&&d.getEL();c&&(c.style.display=l?"":"none")}},e.showProgressMsg=function(l,d,c){if(!(e.dlgRef<=0||0==e.dialogShowStatus)){var u=e.one(".dynamsoft-progressBar"),h=e.one(".dynamsoft-status"),f=e.one(".dynamsoft-finalMessage"),g=e.one(".dynamsoft-desc"),v=l;l<0?v=0:l>100&&(v=100),v=Math.floor(v),f&&f.getEL()&&f.html(d),g&&g.getEL()&&g.html(c),(v||0===v)&&(h&&h.getEL()&&h.html(v+"%"),u&&u.getEL()&&(a.bIE?u[0].objProgressBar?u[0].objProgressBar.setValue(v):u[0].value=v:(a.bEdge&&(u[0].style.display=""),u[0].value=v))),v&&(v>=100||e.dlgRef<=0)&&(setTimeout(function(){u&&u.getEL()&&(a.bIE?u[0].objProgressBar?u[0].objProgressBar.setValue(0):u[0].value=0:(a.bEdge&&(u[0].style.display="none"),u[0].value=0))},300),e.dlgRef<=0)&&e.closeProgress("OnPercentDone")}},e.showProgress=function(l,d,c){var u=l;if(e.log("showProgress:"+d+",bCancel:"+c),0==e.cancelFrome&&1==u.__IfShowProgressBar||0!=e.cancelFrome&&1==u.__IfShowCancelDialogWhenImageTransfer){var h=e.one(".dynamsoft-btnCancel"),f=h&&h.getEL();if(f&&(f.style.display=0==c?"none":""),0==e.dialogShowStatus){e.dlgProgress&&e.dlgProgress.showModal(),e.dialogShowStatus=!0;var g=e.one(".dynamsoft-finalMessage"),v=e.one(".dynamsoft-progressBar"),p=v&&v.getEL(),m=e.one(".dynamsoft-status");g&&g.getEL()&&g.html(""),m&&m.getEL()&&m.html("0%"),p&&(a.bIE&&p.objProgressBar?p.objProgressBar.setValue(0):p.value=0)}e.dlgRef++}},e.closeProgress=function(l){e.log("closeProgress:"+l);var d=e.one(".dynamsoft-btnCancel");e.dlgRef--,e.dlgRef<=0&&(e.dlgRef=0),1==e.needShowTwiceShowDialog&&1==e.cancelFrome?d&&d.getEL()&&(d[0].innerHTML="Cancel"):(d&&d.getEL()&&(d[0].innerHTML="Cancel"),0==e.dlgRef&&(1==e.dialogShowStatus&&(e.dlgProgress&&e.dlgProgress.close(),e.dialogShowStatus=!1),e.needShowTwiceShowDialog=!1,e.cancelFrome=0))},e.html5.CreateDWTObject=function(l){var d,c;for(c=0;c<e.detect.arySTwains.length;c++)if(e.detect.arySTwains[c]._id==l.id)return!1;return d=new e.html5.STwain(l),l.customIP?(e.detect.arySTwainsByIP.push(d),d):(e.detect.arySTwains.push(d),e.detect.bFirst&&e._init(l),e.detect.bFirst=!1,d)},i.RemoveAllAuthorizations=function(){var h,l=e.LS.item("DWT_port"),c="http://";return"true"==e.LS.item("DWT_ssl")&&(c="https://"),h=[c,e.product.host,":",l,"/dwt/",e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",e.now()].join(""),e.ajax({method:"GET",url:h,async:!0}),!0},e._reconnectWSPool=function(){e.each(e.detect.aryWSPool,function(l){l&&!l.bOK&&!l.__bConnecting&&e._reconnectWSElement(l)})},e._reconnectWSElement=function(l){var d,c;if(l&&!l.bOK&&!l.__bConnecting){d=l.wsurl,l.__bConnecting=!0,l.__wsRetry=0;var u=function(){c&&(T.Lib.each(T.DWT.globalWS,function(h,f){if(h==c)return T.DWT.globalWS.splice(f,1),!1}),c.onopen=null),l.__wsRetry++,l.__wsRetry<5?setTimeout(e._reconnectWSPool,500):(l.__bConnecting=!1,e.closeProgress("Reconnect"),e.each(l.list,function(h,f){e.Errors.Server_Restarted(h)}))};try{(c=e.getWS_bywsurl(d)).onopen=function(){1==c.readyState?(c.onopen=null,e.each(l.list,function(h,f){h._objWS=c,c.clientId=h.clientId,h.bReady||h._OnReady(!0)}),l.__bConnecting=!1,l.bOK=!0,e.detect.hideMask()):0==c.readyState?setTimeout(c.onopen,300):l.__bConnecting=!1},c.onclose=u}catch(h){e.log(h),c&&T.Lib.each(T.DWT.globalWS,function(f,g){if(f==c)return T.DWT.globalWS.splice(g,1),!1}),setTimeout(u,500)}}},e._deliverMsg=function(l,d){var c=d.id,u=[];d.indexOf('"method" : "EnableBuffer"')>=0||d.indexOf('"method" : "GetBuffer"')>=0?T.DWT.lwsproc(d):(e.each(e.detect.aryWSPool,function(h,f){if(h.wsurl==l)return u=h.list,!1}),e.each(u,function(h,f){if(h.clientId==c)return h._OnRecieveMsg&&h._OnRecieveMsg(d),!1}))},e._addToWSPool=function(l){var d,c=l._objWS.url;e.each(e.detect.aryWSPool,function(u,h){if(u.wsurl==c)return d=u,!1}),d&&e.isArray(d.list)?d.list.push(l):e.detect.aryWSPool.push({wsurl:c,list:[l]})},e._removeFromWSPool=function(l){var d,c,u;l&&l._objWS&&(c=l._objWS.url),e.each(e.detect.aryWSPool,function(h,f){if(h.wsurl==c)return d=h,!1}),d&&e.isArray(d.list)&&((u=d.list.indexOf(l))>-1&&d.list.splice(u,1),0==d.list.length&&(d.ws.close(),d.wsurl="",delete d.ws,(u=e.detect.aryWSPool.indexOf(d))>-1&&e.detect.aryWSPool.splice(u,1)))}}function o(l,d,c){var u={host:l,port:d,ssl:c,ws:null};return new Promise(function(h,f){if(e.product.bHTML5Edition)try{u.ws=e.getWS(u.host,u.port,u.ssl),e.log(["connecting ... [host ssl port:",u.host,u.ssl,u.port,"]"].join(" ")),u.ws.onopen=function(){1==u.ws.readyState?h(u):0==u.ws.readyState&&setTimeout(u.ws.onopen,100)},u.ws.onclose=u.ws.onerror=function(){T.Lib.each(T.DWT.globalWS,function(v,p){if(v==u.ws)return T.DWT.globalWS.splice(p,1),!1}),u.ws.onopen=null,u.ws.onclose=null,u.ws.onerror=null,u.ws=null,f("WebSocket closed.")}}catch(v){e.log(v),u.ws&&(T.Lib.each(T.DWT.globalWS,function(p,m){if(p==u.ws)return T.DWT.globalWS.splice(m,1),!1}),u.ws.onopen=null,u.ws.onclose=null,u.ws.onerror=null,u.ws=null),f(v.message)}else f("This browser is currently not supported. Please try Chrome or Firefox!")})}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var f,i=document,a=window,s=T.DWT,l=s.CustomizableDisplayInfo.dialogText,d=e.html5.Funs2,c="transparent",u="#F0EFF4",g={isFunction:function(m){return m&&"function"==typeof m},addClass:function(m,I){var y=e.one(m);y&&y.length>0&&y.addClass(I)},removeClass:function(m,I){var y=e.one(m);y&&y.length>0&&y.removeClass(I)},output:function(m,I){T.DWT.Debug&&e.log(I)},getTop:function(m){var I=m.offsetTop;return null!=m.offsetParent&&(I+=g.getTop(m.offsetParent)),I},getLeft:function(m){var I=m.offsetLeft;return null!=m.offsetParent&&(I+=g.getLeft(m.offsetParent)),I}};e._safePromptCustomMsg(function(){l=s.CustomizableDisplayInfo.dialogText,s.CustomizableDisplayInfo.buttons,f={toolbars:{header:!1,bottomMenu:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},dynamsoftDocumentTopGroup:{visibility:!0,location:"topMenu",sequence:1},dynamsoftDocumentBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},close:{visibility:!0,location:"dynamsoftDocumentTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left ds-dwt-ui-mobile-icon-left",sequence:1,onButtonClick:"OnClose"},rotateLeft:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage ds-dwt-ui-icon-color",sequence:1,onButtonClick:"OnRotateLeft"},flip:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage ds-dwt-ui-icon-color",sequence:1,onButtonClick:"OnFlip"},mirror:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"OnMirror"},crop:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-cropImage-grey",sequence:3,onButtonClick:"OnCrop"},cut:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-erase-grey",sequence:4,onButtonClick:"OnErase"},hand:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand ds-dwt-ui-icon-color",sequence:5,onButtonClick:"OnHand"},select:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select ds-dwt-ui-icon-color",sequence:6,onButtonClick:"OnSelect"},save:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:7,onButtonClick:"OnSave"},restore:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore ds-dwt-ui-icon-color",sequence:8,onButtonClick:"OnRestore"},documentCrop:{visibility:!0,location:"dynamsoftDocumentTopGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-cropImage ds-dwt-ui-icon-right",sequence:2,onButtonClick:"OnDocumentCrop"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)",backgroundColor:"#fff"},tipsConfig:{},canvasConfig:{selectedPageBackground:c,selectedPageBorder:"",hoverPageBackground:c,canvasBorder:"",canvasBackground:u},allowSlide:!1,outerBorder:"",topMenuBorder:""}}),v.prototype.show=function(){return this._documentEditorInner.show()},v.prototype.hide=function(){return this._documentEditorInner.hide()},v.prototype.dispose=function(){return this._documentEditorInner.OnCloseInner(!0)},e.UI=e.UI||{},e.UI.DocumentEditor=v,p.prototype.showMenu=function(m){var I=this,y=document.getElementById("documentCrop"+I.myDocumentEditor.postfix),_=document.getElementById("crop"+I.myDocumentEditor.postfix),C=document.getElementById("cut"+I.myDocumentEditor.postfix),A=document.getElementById("hand"+I.myDocumentEditor.postfix),M=document.getElementById("select"+I.myDocumentEditor.postfix),E=document.getElementById("restore"+I.myDocumentEditor.postfix);m?(y&&(y.style.display=""),_&&(_.style.display="none"),C&&(C.style.display="none"),A&&(A.style.display="none"),M&&(M.style.display="none"),E&&(E.style.display="none")):(y&&(y.style.display="none"),_&&(_.style.display=""),C&&(C.style.display=""),A&&(A.style.display=""),M&&(M.style.display=""),E&&(E.style.display=""))},p.prototype.updateWebviewerConfig=function(m,I,y){var C=m;return I&&(this.editorSettings=I,e.isUndefined(I.dialogText)||(s.CustomizableDisplayInfo.dialogText=l=I.dialogText),e.isUndefined(I.promptToSaveChange)||(this.promptToSaveChange=I.promptToSaveChange),e.isUndefined(I.border)||(C.outerBorder=I.border),e.isUndefined(I.topMenuBorder)||(C.topMenuBorder=I.topMenuBorder),e.isUndefined(I.innerBorder)||(C.canvasConfig.canvasBorder=I.innerBorder),e.isUndefined(I.background)||(C.canvasConfig.canvasBackground=I.background)),C},p.prototype._bindView=function(){var I,m=this;if(!m.myDocumentEditor)return m.bDispose?e.Errors.DocumentEditorDispose(m._stwain):e.Errors.DocumentEditorNotExist(m._stwain),!1;var y=e.one(".dynamsoft-cvs-container");if(y&&y.getEL()?(m.cvsContainer=y,m.cvsParentId=y.parent()[0].id,m._stwain&&m._stwain.Addon&&m._stwain.Addon.Camera&&(m.cvsStatus=m._stwain.Addon.Camera.getStatus())):(m.cvsContainer="",m.cvsParentId="",m.cvsStatus=""),m.editorSettings&&m.editorSettings.element&&0==m.editorSettings.bFullScreen){if(I=i.createElement("div"),m.editorSettings.element.appendChild(I),m.editorSettings.element.insertBefore(I,m.editorSettings.element.firstElementChild),m.UIEditor=I,m.bFullScreen=!1,I.style.float="left",I.style.position="absolute",I.style.zIndex="9999",m.myDocumentEditor.width=m.editorSettings.width,m.myDocumentEditor.height=m.editorSettings.height,m.SetWidthInner(m.editorSettings.width,!0),m.SetHeightInner(m.editorSettings.height,!0),m.myDocumentEditor.bindView(m.UIEditor),m.hide(),m.cvsParentId){var _=document.getElementById(m.cvsParentId);_&&_.appendChild(m.cvsContainer[0])}}else I=i.createElement("div"),i.body.appendChild(I),document.body.insertBefore(I,document.body.firstElementChild),m.UIEditor=I,m.bFullScreen=!0,m.UIEditor.className="D_ImageUIEditor",m.UIEditor.style.width="100%",m.UIEditor.style.height="100%",m.UIEditor.style.position="fixed",m.UIEditor.style.left="0px",m.UIEditor.style.top="0px",m.UIEditor.style.zIndex="9999",m.UIEditor.style.display="none",m.SetWidthInner("100%",!0),m.SetHeightInner("100%",!0),m.myDocumentEditor.bindView(m.UIEditor),m.hide();if(m.updateMode(),m.SetSelectionRectAspectRatio(m.editorSettings&&m.editorSettings.selectionRectAspectRatio?m.editorSettings.selectionRectAspectRatio:0),m.HideEditorButtonForPad(),m.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],m._stwain._isMobileMode()){var C,A=e.one(".ds-dwt-ui-icon-acquire");if(A&&A.getEL()&&(A[0].style.display="none"),m.dwtMobileFileId="dwtmobilefile",m.UIEditor&&"DIV"==m.UIEditor.nodeName)(C=document.createElement("div")).innerHTML=m.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+m.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+m.dwtMobileFileId+"' type='file' style='display:none' />",m.UIEditor.appendChild(C);else{var M=document.getElementById(m.UIEditor);(C=document.createElement("div")).innerHTML=m.bMobile?"<input id ='"+m.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+m.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",M.appendChild(C)}}return m.myDocumentEditor.off("slideSwitch"),m.myDocumentEditor.on("slideSwitch",function(E){"left"==E?m._webViewer.myViewer.previous():"right"==E&&m._webViewer.myViewer.next()}),!0},p.prototype.dispose=function(){var I,m=this;return(I=m.mydvs.ViewControl.removeViewer(m.myDocumentEditor))&&(m.UIEditor.lastChild&&m.UIEditor.removeChild(m.UIEditor.lastChild),m.myDocumentEditor=void 0,m._webViewer._documentEditor=void 0,m._webViewer._documentEditorInner=void 0,m.mydvs=null,m._stwain=null,m.bDispose=!0),I},p.prototype.show=function(){var m=this;return m.myDocumentEditor?(m.bFullScreen&&(m.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),m.myDocumentEditor.showViewer=!0,!0):(m.bDispose?e.Errors.DocumentEditorDispose(m._webViewer._stwain):e.Errors.DocumentEditorNotExist(m._webViewer._stwain),!1)},p.prototype.hide=function(){var m=this;return m.myDocumentEditor?(m.myDocumentEditor.showViewer=!1,m.bFullScreen&&(m.UIEditor.style.display="none"),!0):(m.bDispose?e.Errors.DocumentEditorDispose(m._webViewer._stwain):e.Errors.DocumentEditorNotExist(m._webViewer._stwain),!1)},p.prototype._BindDocumentEditorEvents=function(){var m=this;e.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","OnDocumentCrop","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(I){m.myDocumentEditor.on(I,function(y,_){m[I](y,_)})})},p.prototype.HideEditorButtonForPad=function(){var I=this.myDocumentEditor,y=this.bPadViewer,_=document.getElementById("rotateBtn"+I.postfix);_&&(_.style.display=y?"none":"");var C=document.getElementById("deskewBtn"+I.postfix);C&&(C.style.display=y?"none":"");var A=document.getElementById("changeImageSizeBtn"+I.postfix);A&&(A.style.display=y?"none":"")},p.prototype.BackImageData=function(){var m=this;if(m._stwain._isMobileMode()){var I=m._webViewer.GetCurrentIndex();I>=0&&m._webViewer.GetImageData(m._webViewer.GetUidByIndex(I)).then(function(y){m.BackImageBuffer=y.oriData;var _=m._webViewer.GetMetaDataByIndex(I);_&&(m.BackModelImageControl={},m.BackModelImageControl.width=_.width,m.BackModelImageControl.height=_.height,m.BackModelImageControl.bitDepth=_.bitDepth,m.BackModelImageControl.resolutionX=_.resolutionX,m.BackModelImageControl.resolutionY=_.resolutionY)})}},p.prototype.CloseShowDocumentEditor=function(){var m=this;if(!m.myDocumentEditor)return m.bDispose?e.Errors.DocumentEditorDispose(m._stwain):e.Errors.DocumentEditorNotExist(m._stwain),!1;if(m.cvsContainer&&""!=m.cvsContainer&&m.cvsParentId&&""!=m.cvsParentId){var I=document.getElementById(m.cvsParentId);I&&I.appendChild(m.cvsContainer[0]),"playing"==m.cvsStatus&&m._stwain&&m._stwain.Addon&&m._stwain.Addon.Camera&&m._stwain.Addon.Camera.resume()}return!0},p.prototype.UpdateInfo=function(){T.Lib.hideMask()},p.prototype.clearSelectedAreas=function(){var m=this,I=!1;return m._webViewer.GetHowManyImagesInBuffer()<=0||((I=m.myDocumentEditor.clearSelectedBoxes())||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I)},p.prototype.SetSelectionRectAspectRatio=function(m){return this.myDocumentEditor.selectionBoxAspectRatio=m,!0},p.prototype.ZoomIn=function(){var I,m=this;return(I=m.myDocumentEditor.zoomIn())||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I},p.prototype.ZoomOut=function(){var I,m=this;return(I=m.myDocumentEditor.zoomOut())||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I},p.prototype.SetZoom=function(m,I,y){var C,_=this;return(C=I&y?_.myDocumentEditor.zoomTo(m,I,y):_.myDocumentEditor.zoomTo(m))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),C},p.prototype.GetZoom=function(){return this.myDocumentEditor.zoom},p.prototype.SetFitType=function(m){var y="window";return e.isUndefined(m)||("width"==m||"height"==m)&&(y=m),this.myDocumentEditor.fitType=y,!0},p.prototype.SetMouseShape=function(m){var y;switch(m){case T.DWT.EnumDWT_MouseShape.Default:y="default";break;case T.DWT.EnumDWT_MouseShape.Hand:y="pointer";break;case T.DWT.EnumDWT_MouseShape.Crosshair:y="crosshair";break;case T.DWT.EnumDWT_MouseShape.Zoom:y="zoom-in";break;default:y="crosshair"}return this.SetCursor(y),!0},p.prototype.SetCursor=function(m){var I=this;if(!I._webViewer._NouiNotSupport("cursor"))return!1;var y="default";switch(m){case"default":y="default",I.SetOperationMode(1);break;case"pointer":y="pointer",I.SetOperationMode(0);break;case"crosshair":y="crosshair",I.SetOperationMode(1);break;case"zoom-in":y="zoom-in",I.SetOperationMode(2);break;default:y="crosshair"}return I.myDocumentEditor.canvasMouseShape=y,!0},p.prototype.SetSelectionImageBorderColor=function(m){return this.myDocumentEditor.selectedPageBorderColor=m,!0},p.prototype.SetBackgroundColor=function(m){return this.myDocumentEditor.imageBackgroundColor=m,!0},p.prototype.SetWidth=function(m){return this.myDocumentEditor.width=m,!0},p.prototype.SetWidthInner=function(m,I){var y=this;if(I)y.myDocumentEditor.width=m;else if(e.isString(m)&&m.indexOf("%")>=0){var _=e.one("#"+y._stwain._containerID);y.myDocumentEditor.width=parseInt(e.css(_,"width")*parseInt(m)/100)}else y.myDocumentEditor.width=m;return!0},p.prototype.SetHeight=function(m){return this.myDocumentEditor.height=m,!0},p.prototype.SetHeightInner=function(m,I){var y=this;if(I)y.myDocumentEditor.height=m;else if(e.isString(m)&&m.indexOf("%")>=0){var _=e.one(y._stwain._containerElement);y.myDocumentEditor.height=parseInt(e.css(_,"height")*parseInt(m)/100)}else y.myDocumentEditor.height=m;return!0},p.prototype.SetIfAutoScroll=function(m){return this.myDocumentEditor.showLatestPage=m,!0},p.prototype.ChangeButtonClass=function(m,I){return this.myDocumentEditor.setButtonClass(m,I)},p.prototype.SetOperationMode=function(m){this.myDocumentEditor.operationMode=m},p.prototype.UnbindContent=function(m){this.myDocumentEditor.unbindContent()},p.prototype.SetSelectedPageBackground=function(m){this.myDocumentEditor.selectedPageBackground=m},p.prototype.GetRealTimeMetadataByIndex=function(m){var I=this;if(!(m<0||m>=I._webViewer.GetHowManyImagesInBuffer()))return I.myDocumentEditor.getRealTimeMetadataByIndex(m);e.Errors.IndexOutOfRange(I._stwain)},p.prototype.DVSRotate=function(m){var y,I=this;return I.myDocumentEditor.rotateMode=0,(y=I.myDocumentEditor.rotate(m))||e.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode),y},p.prototype.DVSFlip=function(){var I,m=this;return(I=m.myDocumentEditor.flip())||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I},p.prototype.DVSMirror=function(){var I,m=this;return(I=m.myDocumentEditor.mirror())||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I},p.prototype.DVSCrop=function(m,I,y,_){var A,C=this;return(A=C.myDocumentEditor.crop(m,I,y-m,_-I))||e.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode),A},p.prototype.DVSErase=function(m,I,y,_){var A,C=this;return(A=C.myDocumentEditor.erase(m,I,y-m,_-I,C._webViewer._UIView.BackgroundFillColor))||e.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode),A},p.prototype.DVSSaveTransformResult=function(m){var I=this;return I.myDocumentEditor.saveTransformation().then(function(){m(null,-1,null)},function(y){e.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}),!0},p.prototype.DVSRotateEx=function(m,I){var _,y=this;return y.myDocumentEditor.rotateMode=I?1:0,(_=y.myDocumentEditor.rotate(m))||e.Errors.WebviewerError(y._stwain,y.mydvs.Error.errorMessage,y.mydvs.Error.errorCode),_},p.prototype.DVSChangeImageSize=function(m,I,y){var C,_=this;return(C=_.myDocumentEditor.changePageSize(parseInt(m),parseInt(I),y))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),C},p.prototype.DVSSkewAngle=function(){var m=this;return m._stwain._asyncGetSkewAngleOnly(m._webViewer.GetCurrentIndex(),function(I){m.DVSRotateEx(I,!0),m.UpdateInfo(),m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()}),!0},p.prototype.updateButtons=function(){var m=this;1==m._IfChangedWithinTheEditor?(m.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),m.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(m.ChangeButtonClass("save","ds-dwt-ui-icon-color-grey"),m.ChangeButtonClass("restore","ds-dwt-ui-icon-color-grey"))},p.prototype.updateMode=function(m){var _,I=this;switch((_=I._webViewer.GetHowManyImagesInBuffer())>1?(I._webViewer.GetCurrentIndex()==_-1||I._webViewer.GetHowManyImagesInBuffer()<=1?I.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):I.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),I._webViewer.GetCurrentIndex()<=0||I._webViewer.GetHowManyImagesInBuffer()<=1?I.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):I.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(I.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),I.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),I.updateButtons(),I.__SetCropButtonGrey(!0),I.__SetEraseButtonGrey(!0),I.cursorStatus){case"rectselect":I.OnSelect();break;case"zoom":I.OnClicktozoomin();break;default:I.OnHand()}if(m){var C=I._webViewer.GetCurrentIndex();1==I._IfChangedWithinTheEditor&&C!=I.iChangedIndex&&I.ShowDialogForSaveImage(I._webViewer.GetCurrentIndex(),!1)}},p.prototype.__SaveImageInner=function(m,I){var y=this;if(-1==y.iChangedIndex&&0==y._IfSaveChangesOutSideOfTheEditor)return y._IfChangedWithinTheEditor=!1,I&&I(),!1;if(1!=y._IfChangedWithinTheEditor&&0==y._IfSaveChangesOutSideOfTheEditor)return alert(s.CustomizableDisplayInfo.errorMessages.imageNotChanged),y._IfChangedWithinTheEditor=!1,I&&I(),!1;y._IfSaveChangesOutSideOfTheEditor&&(y.iChangedIndex=y._webViewer.GetCurrentIndex());var A=!0;if(1==y._IfChangedWithinTheEditor||1==y._IfSaveChangesOutSideOfTheEditor){var M=y.getImageManager().convertClientIndexToServerId(y.iChangedIndex);if(-1==M)return I&&I(),!1;y.OnGetImageFromServerForEdit(y._webViewer._UIView.mapModelImageControl[M],y.iChangedIndex,2,function(E,R,x){if(E){if(1==m&&(e.log("__SaveImageInner: "+[E.guid].join(",")),y._webViewer.GetCurrentIndex()==R&&(y._stwain._isMobileMode()?y._webViewer.MobileUpdateImage(E,x):y._webViewer.UpdateImage(E,x))),y._IfChangedWithinTheEditor=!1,y.iChangedIndex=-1,-1==E.serverId)return I&&I(),!1}else y._IfChangedWithinTheEditor=!1,y.iChangedIndex=-1;return y.updateButtons(),I&&I(),!0}),A=!1}return y._IfSaveChangesOutSideOfTheEditor=!1,A&&(y._IfChangedWithinTheEditor=!1,I&&I()),!0},p.prototype.ShowDialogForSaveImage=function(m,I,y,_){var C=this,A=function(){C.__SaveImageInner(!0,function(){a.DCP_DWT_OnClickCloseInstall(C._stwain._containerID),e.bChangeImage=1,-1==m?C.OnClose():C._webViewer.__goInner(m),I&&(document.body.style.overflow=""),g.isFunction(y)&&y()})};if(C.promptToSaveChange){T.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"<div>",l.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',l.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',l.saveChangedImage[2],'" /></div>',"</div>"].join(""),C.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1});var E=e.one(".dynamsoft_btnSave").getEL();E&&(E.onclick=function(){A()});var R=e.one(".dynamsoft_btnCancel").getEL();R&&(R.onclick=function(){C.__RestoreImageInner(m,function(){a.DCP_DWT_OnClickCloseInstall(C._stwain._containerElement),e.bChangeImage=0,-1==m?C.OnClose():C._webViewer.__goInner(m),I&&(document.body.style.overflow=""),g.isFunction(_)&&_()})})}else A()},p.prototype.__SetCropButtonGrey=function(m){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),m&&this.clearSelectedAreas()},p.prototype.__SetEraseButtonGrey=function(m){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),m&&this.clearSelectedAreas()},p.prototype.__SetZoomInButtonEnable=function(m){this.ChangeButtonClass("zoomin",1==m?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")},p.prototype.__SetZoomOutButtonEnable=function(m){this.ChangeButtonClass("zoomout",1==m?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")},p.prototype.pageChange=function(m){var y,I=this,_=I._webViewer.GetHowManyImagesInBuffer();e.log("OnPagination"),_<=0?g.output(I,"No image in Buffer"):1!=_&&(!/^\d+$/.test(m)||m<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((y=parseInt(m)-1)<0?y=0:y>=_&&(y=_-1),y!=I._webViewer.GetCurrentIndex()&&I.go(y)))},p.prototype.bufferChanged=function(m){var I=this,y=I._webViewer.GetCurrentIndex();return I.updateMode(),"shift"!=m.action||1!=I._IfChangedWithinTheEditor||(I.ShowDialogForSaveImage(y,!1),!1)},p.prototype.pageRendered=function(m){},p.prototype.OnFirstImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()},p.prototype.OnLastImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()},p.prototype.OnPreviousImage=function(){var I=e.one(".ds-dwt-ui-icon-preImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!I||!I.getEL())&&this._webViewer.previous()},p.prototype.OnNextImage=function(){var I=e.one(".ds-dwt-ui-icon-nextImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!I||!I.getEL())&&this._webViewer.next()},p.prototype.go=function(m){var I=this;if(I._webViewer.GetHowManyImagesInBuffer()<=0)return g.output(I,"No image in Buffer"),!1;if(1==I._IfChangedWithinTheEditor)return I.ShowDialogForSaveImage(m,!1),!1;if(void 0!==m){if(-1==m)return!1;I.bCouldBeTimeConsuming=!0,I.myDocumentEditor.gotoPage(m),I.updateMode()}return!0},p.prototype.OnAcquire=function(){var m=this,I=function(){m._stwain.SelectSource(function(){m._stwain.CloseSource(),m._stwain.OpenSource(),m._stwain.IfShowUI=!0,1==T.DWT.IfConfineMaskWithinTheViewer?(T.DWT.IfConfineMaskWithinTheViewer=!1,m._stwain.AcquireImage({},function(){T.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){m._stwain.ShowDocumentEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){m._stwain.ShowDocumentEditorEx(-1,-1,-1,-1)})})):m._stwain.AcquireImage()},function(){e.log("User did not select a source")})};e.Errors.ClearErrorInfo(m._stwain),m._IfChangedWithinTheEditor?m.ShowDialogForSaveImage(m._webViewer.GetCurrentIndex(),!1,I,I):I()},p.prototype.OnLoadImage=function(){var m=this,I=null,y=function(){if(m._stwain._isMobileMode()){var _=document.getElementById(m.dwtMobileFileId);return _.value="",void _.click()}if(m._stwain.IfShowFileDialog=!0,m._stwain.Addon&&m._stwain.Addon.PDF){var E,M=!1;(m._stwain._isMobileMode()?e.License.checkProductKey(m._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(m._stwain,{PDFRasterizer:!0},!0))&&(I=m._stwain.Addon.PDF.GetConvertMode(),E=m._stwain._innerFun("GetAddOnVersion",T.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&E==T.DWT.PdfMacVersion||e.env.bLinux&&E==T.DWT.PdfLinuxVersion||E==T.DWT.PdfVersion)&&(M=!0),M&&m._stwain.Addon.PDF.SetConvertMode(3))}m._stwain.LoadImageEx("",5,function(){e.log("Loaded an image successfully."),null!=I&&m._stwain.Addon.PDF.SetConvertMode(I)},function(x,P){e.log("Loading failed with the error: "+P),null!=I&&m._stwain.Addon.PDF.SetConvertMode(I)})};e.Errors.ClearErrorInfo(m._stwain),m._IfChangedWithinTheEditor?m.ShowDialogForSaveImage(m._webViewer.GetCurrentIndex(),!1,y,y):y()},p.prototype.OnPrint=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetCurrentIndex()<0?g.output(m,"No image in Buffer"):m._webViewer._UIView.Print()},p.prototype.OnRemoveAll=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):m._stwain.RemoveAllImages()},p.prototype.OnRemove=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):m._stwain.RemoveAllSelectedImages()},p.prototype.OnRotateLeft=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(1==m._webViewer._ImgManager.bImageChangedInViewer?(m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._stwain._isMobileMode()?(m.DVSRotate(270),m.UpdateInfo()):m._stwain.RotateLeft(m._webViewer.GetCurrentIndex()),m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()})):(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode()?(m.DVSRotate(270),m.UpdateInfo()):m._stwain.RotateLeft(m._webViewer.GetCurrentIndex())),m.updateMode())},p.prototype.RotateEx=function(m,I,y){var _=this;_._webViewer.GetHowManyImagesInBuffer()<=0?g.output(_,"No image in Buffer"):(void 0===m||void 0===I||void 0===y?alert(s.CustomizableDisplayInfo.errorMessages.insufficientParas):1==_._webViewer._ImgManager.bImageChangedInViewer?(_._IfSaveChangesOutSideOfTheEditor=!0,_._webViewer._ImgManager.bImageChangedInViewer=!1,_.__SaveImageInner(!1,function(){_.bCouldBeTimeConsuming=!0,T.Lib.showMask(),_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._stwain._isMobileMode()?(_.DVSRotateEx(m,I,y),_.UpdateInfo()):_._stwain.RotateEx(_._webViewer.GetCurrentIndex(),m,I,y),_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_.updateButtons()})):(_.bCouldBeTimeConsuming=!0,T.Lib.showMask(),_._IfSaveChangesOutSideOfTheEditor=!1,_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_._stwain._isMobileMode()?(_.DVSRotateEx(m,I,y),_.UpdateInfo()):_._stwain.RotateEx(_._webViewer.GetCurrentIndex(),m,I,y)),_.updateMode())},p.prototype.OnRotate=function(m){var I=this;if(e.Errors.ClearErrorInfo(I._stwain),I._webViewer.GetHowManyImagesInBuffer()<=0)g.output(I,"No image in Buffer");else{if(e.hide("dynamsoft_ImgSizeEditor"),!e.get("dynamsoft_RotateAnyAngle")){var y=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',l.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',l.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',l.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',l.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',l.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];e.one("body").append(y.join(""))}var _=e.get("dynamsoft_Angle_InterpolationMethod");_.options.length=0,_.options.add(new Option("NearestNeighbor",1)),_.options.add(new Option("Bilinear",2)),_.options.add(new Option("Bicubic",3)),_=null,e.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var F=e.get("dynamsoft_Angle").value;if(e.get("dynamsoft_Angle").className="",!/^\d+$/.test(F)||F<=0)return e.get("dynamsoft_Angle").className+=" invalid",e.get("dynamsoft_Angle").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidAngle);var S=e.get("dynamsoft_KeepSize").checked;I.bCouldBeTimeConsuming=!0,T.Lib.showMask();var L=parseInt(F);I.RotateEx(L,S,e.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0!=I._stwain.ErrorCode||e.hide("dynamsoft_RotateAnyAngle")},e.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){e.hide("dynamsoft_RotateAnyAngle")};var M=e.get("dynamsoft_RotateAnyAngle");e.toggle("dynamsoft_RotateAnyAngle");var E=m.srcElement||m.target,R=E.y;R||(R=E.offsetTop+1);var x=E.x;if(x||(x=E.offsetLeft+1),I.UIEditor&&"DIV"==I.UIEditor.nodeName)M.style.top=m.clientY+document.documentElement.scrollTop+"px",M.style.left=m.clientX+document.documentElement.scrollLeft+"px";else{var P=i.getElementById(I.UIEditor);M.style.top=R+E.offsetHeight+g.getTop(P)+"px",M.style.left=x+g.getLeft(P)+"px"}e.get("dynamsoft_Angle").value="45"}},p.prototype.OnRotateRight=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(1==m._webViewer._ImgManager.bImageChangedInViewer?(m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSRotate(90),m.UpdateInfo()):m._stwain.RotateRight(m._webViewer.GetCurrentIndex()),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()})):(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode()?(m.DVSRotate(90),m.UpdateInfo()):m._stwain.RotateRight(m._webViewer.GetCurrentIndex())),m.updateMode())},p.prototype.OnDeskew=function(){var m=this;if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)g.output(m,"No image in Buffer");else if(1==m._webViewer._ImgManager.bImageChangedInViewer)m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){if(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._stwain._isMobileMode())m.DVSSkewAngle();else{var y=m._webViewer.GetCurrentIndex();y>=0&&m._stwain.GetSkewAngleAsync(y).then(function(_){m.RotateEx(_,!0,1)}),m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()}});else if(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode())m.DVSSkewAngle();else{var I=m._webViewer.GetCurrentIndex();I>=0&&m._stwain.GetSkewAngleAsync(I).then(function(y){m.RotateEx(y,!0,1)})}},p.prototype.OnCrop=function(){e.Errors.ClearErrorInfo(this._stwain);var y=e.one(".ds-dwt-ui-icon-template-cropImage");y&&y.getEL()&&this.Crop()},p.prototype.Crop=function(){var m=this;if(m._webViewer.GetHowManyImagesInBuffer()<=0)g.output(m,"No image in Buffer");else{var I=m.actualSelectedCanvasAreas;if(2==I.length){var y=I[1],_=y.left,C=y.top,A=y.right,M=y.bottom;parseInt(_)-parseInt(A)!=0&&parseInt(C)-parseInt(M)!=0&&(1==m._webViewer._ImgManager.bImageChangedInViewer?(m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSCrop(parseInt(_),parseInt(C),parseInt(A),parseInt(M)),m.UpdateInfo()):m._stwain.Crop(m._webViewer.GetCurrentIndex(),parseInt(_),parseInt(C),parseInt(A),parseInt(M)),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0),m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()})):(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode()?(m.DVSCrop(parseInt(_),parseInt(C),parseInt(A),parseInt(M)),m.UpdateInfo()):m._stwain.Crop(m._webViewer.GetCurrentIndex(),parseInt(_),parseInt(C),parseInt(A),parseInt(M)),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0)),m.updateMode())}else g.output(m,"No area selected for cropping")}},p.prototype.OnErase=function(){var y=e.one(".ds-dwt-ui-icon-template-erase");e.Errors.ClearErrorInfo(this._stwain),y&&y.getEL()&&this.Erase()},p.prototype.Erase=function(){var m=this,I=!1;if(m._webViewer.GetHowManyImagesInBuffer()<=0)g.output(m,"No image in Buffer");else{var y=m.actualSelectedCanvasAreas;if(1!=y.length){if(1==m._webViewer._ImgManager.bImageChangedInViewer)m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){for(var x=1;x<y.length;x++){var P=y[x],F=P.left,k=P.top,w=P.right,S=P.bottom;parseInt(F)-parseInt(w)!=0&&parseInt(k)-parseInt(S)!=0&&(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSErase(parseInt(F),parseInt(k),parseInt(w),parseInt(S)),m.UpdateInfo()):m._stwain.CutFrameToClipboard(m._webViewer.GetCurrentIndex(),parseInt(F),parseInt(k),parseInt(w),parseInt(S)),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons(),I=!0)}m.__SetEraseButtonGrey(I),m.__SetCropButtonGrey(I)});else{m._IfSaveChangesOutSideOfTheEditor=!1,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex();for(var _=1;_<y.length;_++){var C=y[_],A=C.left,M=C.top,E=C.right,R=C.bottom;parseInt(A)-parseInt(E)!=0&&parseInt(M)-parseInt(R)!=0&&(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSErase(parseInt(A),parseInt(M),parseInt(E),parseInt(R)),m.UpdateInfo()):m._stwain.CutFrameToClipboard(m._webViewer.GetCurrentIndex(),parseInt(A),parseInt(M),parseInt(E),parseInt(R)),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),I=!0)}m.__SetEraseButtonGrey(I),m.__SetCropButtonGrey(I)}m.updateMode()}else g.output(m,"No area selected for erasing")}},p.prototype.ChangeImageSize=function(m,I,y){var _=this;_._webViewer.GetHowManyImagesInBuffer()<=0?g.output(_,"No image in Buffer"):(1==_._webViewer._ImgManager.bImageChangedInViewer?(_._IfSaveChangesOutSideOfTheEditor=!0,_._webViewer._ImgManager.bImageChangedInViewer=!1,_.__SaveImageInner(!1,function(){_.bCouldBeTimeConsuming=!0,T.Lib.showMask(),_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._stwain._isMobileMode()?(_.DVSChangeImageSize(m,I,y),_.UpdateInfo()):_._stwain.ChangeImageSize(_._webViewer.GetCurrentIndex(),m,I,y),_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_.updateButtons()})):(_.bCouldBeTimeConsuming=!0,T.Lib.showMask(),_._IfSaveChangesOutSideOfTheEditor=!1,_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_._stwain._isMobileMode()?(_.DVSChangeImageSize(m,I,y),_.UpdateInfo()):_._stwain.ChangeImageSize(_._webViewer.GetCurrentIndex(),m,I,y)),_.updateMode())},p.prototype.OnChangeImageSize=function(m){var I=this;if(e.Errors.ClearErrorInfo(I._stwain),!(I._webViewer.GetHowManyImagesInBuffer()<=0)){if(e.hide("dynamsoft_RotateAnyAngle"),!e.get("dynamsoft_ImgSizeEditor")){var y=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',l.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',l.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",l.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',l.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',l.dlgChangeImageSize[4],'"/></span></div>',"</div>"];e.one("body").append(y.join(""))}var _=e.get("dynamsoft_InterpolationMethod");_.options.length=0,_.options.add(new Option("NearestNeighbor",1)),_.options.add(new Option("Bilinear",2)),_.options.add(new Option("Bicubic",3)),_=null,e.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var Z=e.get("dynamsoft_img_width").value,ne=e.get("dynamsoft_img_height").value;e.get("dynamsoft_img_width").className="",e.get("dynamsoft_img_height").className="";var oe=/^\d+$/;return!oe.test(ne)||ne<=0?(e.get("dynamsoft_img_height").className+=" invalid",e.get("dynamsoft_img_height").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!oe.test(Z)||Z<=0?(e.get("dynamsoft_img_width").className+=" invalid",e.get("dynamsoft_img_width").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(I.ChangeImageSize(Z,ne,e.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0!=I._stwain.ErrorCode||e.hide("dynamsoft_ImgSizeEditor")))},e.get("dynamsoft_btnCancelChange").onclick=function(){e.hide("dynamsoft_ImgSizeEditor")};var M=e.get("dynamsoft_ImgSizeEditor");e.toggle("dynamsoft_ImgSizeEditor");var R=m.srcElement||m.target,x=R.y;x||(x=R.offsetTop+1);var P=R.x;if(P||(P=R.offsetLeft+1),I.UIEditor&&"DIV"==I.UIEditor.nodeName)M.style.top=m.clientY+document.documentElement.scrollTop+"px",M.style.left=m.clientX+document.documentElement.scrollLeft+"px";else{var F=i.getElementById(I.UIEditor);M.style.top=x+R.offsetHeight+g.getTop(F)+"px",M.style.left=P+g.getLeft(F)+"px"}var k=I._webViewer.GetCurrentIndex(),w=I.getImageManager().convertClientIndexToServerId(k);if(-1==w)return!1;if(I._webViewer._UIView.mapModelImageControl[w]){if(I._stwain._isMobileMode()){var S,L=0,U=0;(S=I.GetRealTimeMetadataByIndex())&&S.width&&(L=S.width),S&&S.height&&(U=S.height),e.get("dynamsoft_img_width").value=parseInt(L),e.get("dynamsoft_img_height").value=parseInt(U)}else e.get("dynamsoft_img_width").value=parseInt(I.getImageManager().GetImageWidth(k)),e.get("dynamsoft_img_height").value=parseInt(I.getImageManager().GetImageHeight(k));return!0}return!1}g.output(I,"No image in Buffer")},p.prototype.OnFlip=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(1==m._webViewer._ImgManager.bImageChangedInViewer?(m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSFlip(),m.UpdateInfo()):m._stwain.Flip(m._webViewer.GetCurrentIndex()),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()})):(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode()?(m.DVSFlip(),m.UpdateInfo()):m._stwain.Flip(m._webViewer.GetCurrentIndex())),m.updateMode())},p.prototype.OnMirror=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(1==m._webViewer._ImgManager.bImageChangedInViewer?(m._IfSaveChangesOutSideOfTheEditor=!0,m._webViewer._ImgManager.bImageChangedInViewer=!1,m.__SaveImageInner(!1,function(){m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._stwain._isMobileMode()?(m.DVSMirror(),m.UpdateInfo()):m._stwain.Mirror(m._webViewer.GetCurrentIndex()),m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m.updateButtons()})):(m.bCouldBeTimeConsuming=!0,T.Lib.showMask(),m._IfSaveChangesOutSideOfTheEditor=!1,m._webViewer._ImgManager.bImageJustChangedInEditor=!0,m._IfChangedWithinTheEditor=!0,m.iChangedIndex=m._webViewer.GetCurrentIndex(),m._stwain._isMobileMode()?(m.DVSMirror(),m.UpdateInfo()):m._stwain.Mirror(m._webViewer.GetCurrentIndex())),m.updateMode())},p.prototype.OnZoomin=function(){var m=this,I=e.one(".ds-dwt-ui-icon-zoomin-grey");if(!I||!I.getEL()){if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)return void g.output(m,"No image in Buffer");var y=Math.floor(100*m.GetZoom()*m._webViewer._UIView.zoomInStep)+1;!y||1<y&&y<2501?(m.ZoomIn(),m.__SetZoomInButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),m.__SetZoomInButtonEnable(!1)),m.__SetZoomOutButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0)}},p.prototype.OnOriginalsize=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(m.SetZoom(1),m.__SetZoomInButtonEnable(!0),m.__SetZoomOutButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0))},p.prototype.OnZoomout=function(){var m=this,I=e.one(".ds-dwt-ui-icon-zoomout-grey");if(!I||!I.getEL()){if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)return void g.output(m,"No image in Buffer");var y=Math.floor(100*m.GetZoom()*m._webViewer._UIView.zoomOutStep)-1;!y||1<y&&y<6501?(m.ZoomOut(),m.__SetZoomOutButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),m.__SetZoomOutButtonEnable(!1)),m.__SetZoomInButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0)}},p.prototype.OnFitPage=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(m.SetFitType(),m.__SetZoomInButtonEnable(!0),m.__SetZoomOutButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0))},p.prototype.OnFitWidth=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(m.SetFitType("width"),m.__SetZoomInButtonEnable(!0),m.__SetZoomOutButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0))},p.prototype.OnFitHeight=function(){var m=this;e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0?g.output(m,"No image in Buffer"):(m.SetFitType("height"),m.__SetZoomInButtonEnable(!0),m.__SetZoomOutButtonEnable(!0),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0))},p.prototype.OnHand=function(){var I=T.DWT.EnumDWT_MouseShape.Hand;this.clearSelectedAreas(),this.SetMouseSelectInner(I)},p.prototype.OnSelect=function(){this.SetMouseSelectInner(T.DWT.EnumDWT_MouseShape.Crosshair)},p.prototype.OnClicktozoomin=function(){var I=T.DWT.EnumDWT_MouseShape.Zoom;this.clearSelectedAreas(),this.SetMouseSelectInner(I)},p.prototype.SetMouseSelectInner=function(m){var I=this;if(e.Errors.ClearErrorInfo(I._stwain),I._webViewer.GetHowManyImagesInBuffer()<=0)g.output(I,"No image in Buffer");else if(I.SetMouseShape(m),I.__EnableMouseShapButtons(m),I.bMobile)switch(m){case T.DWT.EnumDWT_MouseShape.Crosshair:I.cursorStatus="rectselect";break;case T.DWT.EnumDWT_MouseShape.Zoom:I.cursorStatus="zoom";break;default:I.cursorStatus="hand"}else switch(m){case T.DWT.EnumDWT_MouseShape.Hand:I.cursorStatus="hand";break;case T.DWT.EnumDWT_MouseShape.Zoom:I.cursorStatus="zoom";break;default:I.cursorStatus="rectselect"}},p.prototype.OnRestore=function(){var m=this,I=e.one(".ds-dwt-ui-icon-color-grey");if(!I||!I.getEL()){if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)return void g.output(m,"No image in Buffer");m.__RestoreImageInner(-1)}},p.prototype.OnDocumentCrop=function(){var I,m=this;(I=m._webViewer.GetUidByIndex(m._webViewer.GetCurrentIndex()))&&(m.editorSettings&&m.editorSettings.element&&0==m.editorSettings.bFullScreen?(m.editorSettings.element.style.width=m._webViewer.GetWidth()+"px",m.editorSettings.element.style.height=m._webViewer.GetHeight()+"px",m._webViewer.showEditPage(I,{element:m.editorSettings.element,filterViewer:{filter:{valueList:m._webViewer.getDefaultFilterValueList()}}})):m._webViewer.showEditPage(I))},p.prototype.__RestoreImageInner=function(m,I){var y=this;if(-1==y.iChangedIndex)return y._IfChangedWithinTheEditor=!1,void(I&&I());if(y._stwain._isMobileMode())y.Reset(),y._IfChangedWithinTheEditor=!1,y.iChangedIndex=-1,y.updateButtons(),I&&I();else{var A=!0;if(1==y._IfChangedWithinTheEditor){var M=y.getImageManager().convertClientIndexToServerId(y.iChangedIndex);-1!=M&&y.OnGetImageFromServerForEdit(y._webViewer._UIView.mapModelImageControl[M],y.iChangedIndex,1,function(E,R,x){E&&(e.log("__RestoreImageInner: "+[E.guid].join(",")),y._stwain._isMobileMode()?y._webViewer.MobileUpdateImage(E,x):y._webViewer.UpdateImage(E,x)),y._IfChangedWithinTheEditor=!1,y.iChangedIndex=-1;var P=E&&E.serverId;return-1==P?(y.updateButtons(),I&&I(),!1):(y.updateButtons(),-1==m&&-1==(P=y.getImageManager().convertClientIndexToServerId(y._webViewer.GetCurrentIndex()))?(e.Errors.IndexOutOfRange(y._stwain),I&&I(),!1):void(I&&I()))}),A=!1}A&&(y._IfChangedWithinTheEditor=!1,I&&I())}},p.prototype.OnGetImageFromServerForEdit=function(m,I,y,_){var A,C=this;if(_&&C._webViewer._UIView.BaseUrl){var E=C.getImageManager().convertClientIndexToServerId(I);if(-1==E)return!1;if(C._stwain._isMobileMode())if(1==y){var R=C._webViewer.GetMetaDataByIndex(I);R&&(R.width=C.BackModelImageControl.width,R.height=C.BackModelImageControl.height,R.bitDepth=C.BackModelImageControl.bitDepth,R.resolutionX=C.BackModelImageControl.resolutionX,R.resolutionY=C.BackModelImageControl.resolutionY),m.ticks=Date.now(),m.imageUrl=C.BackImageBuffer,_(m,I,{metaData:R})}else C.DVSSaveTransformResult(_);else T.DWT.ConnectWithSocket?_():(A=d.getUrlByAct(C._webViewer._UIView.BaseUrl,E,y),e.ajax({method:"GET",url:A,onSuccess:function(x){m.ticks=Date.now(),m.imageUrl=d.getImageUrl(C._webViewer._UIView.BaseUrl,E,-1,-1,m.ticks),m.minImageUrl=d.getImageUrl(C._webViewer._UIView.BaseUrl,E,parseInt(m.iImageControlWidth),parseInt(m.iImageControlHeight),m.ticks);var P=C._webViewer.GetMetaDataByIndex(I);if(P){var F=C._webViewer._UIView.GetDataImageControl(E);P.width=F&&F.width?F.width:C._stwain.GetImageWidth(I),P.height=F&&F.height?F.height:C._stwain.GetImageHeight(I)}_(m,I,P)},onError:function(){}}))}return!0},p.prototype.OnSave=function(){var m=this,I=e.one(".ds-dwt-ui-icon-color-grey");if(!I||!I.getEL()){if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)return void g.output(m,"No image in Buffer");m.__SaveImageInner(!0,function(){if(-1==m.getImageManager().convertClientIndexToServerId(m._webViewer.GetCurrentIndex()))return e.Errors.IndexOutOfRange(m._stwain),!1})}},p.prototype.OnClose=function(){var m=this;return e.Errors.ClearErrorInfo(m._stwain),1==m._IfChangedWithinTheEditor?(m.ShowDialogForSaveImage(-1,!0),!1):m.OnCloseInner()},p.prototype.OnCloseInstall=function(){0==this._IfChangedWithinTheEditor&&a.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)},p.prototype.Reset=function(m){return this.myDocumentEditor.reset()},p.prototype.OnCloseInner=function(m){var _,I=this;if(e.Errors.ClearErrorInfo(I._stwain),1==I._IfChangedWithinTheEditor){if(!m)return I.ShowDialogForSaveImage(-1,!0),!1;a.DCP_DWT_OnClickCloseInstall(I._stwain._containerElement),e.bChangeImage=0,I.__RestoreImageInner(-1)}return I.UIEditor&&1==I.bFullScreen?I.UIEditor.childNodes.length>0&&I.UIEditor.parentNode.removeChild(I.UIEditor):(I.UIEditor.childNodes.length>0&&I.UIEditor.parentNode.removeChild(I.UIEditor),I.myDocumentEditor&&I.myDocumentEditor.unbindView(I.UIEditor)),I.CloseShowDocumentEditor(),e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle"),(_=e.get("dynamsoft_ImgSizeEditor"))&&_.parentNode.removeChild(_),(_=e.get("dynamsoft_RotateAnyAngle"))&&_.parentNode.removeChild(_),T.Lib.dialog.selectsourcedlg&&T.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",e.isFunction(I._stwain.__CloseDocumentEditorUI)&&I._stwain.__CloseDocumentEditorUI(),I.dispose()},p.prototype.__EnableMouseShapButtons=function(m){var I=this;I.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),I.ChangeButtonClass("select","ds-dwt-ui-icon-select"),I.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),m==T.DWT.EnumDWT_MouseShape.Hand?I.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):m==T.DWT.EnumDWT_MouseShape.Crosshair?I.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):m==T.DWT.EnumDWT_MouseShape.Zoom&&I.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")},p.prototype.click=function(m){e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle")},p.prototype.imageClick=function(m,I){this.UpdateInfo()},p.prototype.pageAreaSelected=function(m,I){var y=this,_=1;if(I&&I.length>0){var C=I[I.length-1];C.index&&(_=parseInt(C.index)+1),_>0&&_<y.actualSelectedCanvasAreas.length?y.actualSelectedCanvasAreas[_]={left:C.x,top:C.y,right:C.x+C.width,bottom:C.y+C.height}:_==y.actualSelectedCanvasAreas.length&&y.actualSelectedCanvasAreas.push({left:C.x,top:C.y,right:C.x+C.width,bottom:C.y+C.height}),2==y.actualSelectedCanvasAreas.length&&C.width>0&&C.height>0?(y.ChangeButtonClass("crop","ds-dwt-ui-icon-template-cropImage"),y.ChangeButtonClass("cut","ds-dwt-ui-icon-template-erase")):(y.__SetCropButtonGrey(!1),y.__SetEraseButtonGrey(!1))}},p.prototype.pageAreaUnselected=function(m){var I=this;I.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],I.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),I.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")},p.prototype.onDrop=function(m){this._webViewer.dropEvent(m)},p.prototype.getImageManager=function(){return this._webViewer._ImgManager},e.UI=e.UI||{},e.UI.DocumentEditorInner=p}function v(m,I){var y=this;y._documentEditorInner=new e.UI.DocumentEditorInner(m,I),y.myDocumentEditor=y._documentEditorInner.myDocumentEditor}function p(m,I){var y=this;y._webViewer=m,y.mydvs=m.mydvs,y._stwain=m._stwain,y.bCouldBeTimeConsuming=!1,y.promptToSaveChange=!0;var _=f;y.bMobile=!1;var C=!1;y._stwain._isPC()||(y.bPadViewer||(_=f,C=!0),y.bMobile=!0),_=y.updateWebviewerConfig(_,I,C),y.myDocumentEditor=y.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:_,scrollerConfig:{}},y._webViewer.myViewer.uid),0!=y._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(y._webViewer._stwain,y._webViewer.mydvs.Error.errorMessage,y._webViewer.mydvs.Error.errorCode),y.bDispose=!1,y._BindDocumentEditorEvents(),y._bindView(),y.showMenu(!0);var M=document.getElementById("bottomMenu"+y.myDocumentEditor.postfix);M&&(M.style.border="0")}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var u,h,i=document,a=window,s=T.DWT,o=s.CustomizableDisplayInfo.buttons,l=s.CustomizableDisplayInfo.dialogText,d=e.html5.Funs2,c="transparent",f={isFunction:function(p){return p&&"function"==typeof p},addClass:function(p,m){var I=e.one(p);I&&I.length>0&&I.addClass(m)},removeClass:function(p,m){var I=e.one(p);I&&I.length>0&&I.removeClass(m)},output:function(p,m){T.DWT.Debug&&e.log(m)},getTop:function(p){var m=p.offsetTop;return null!=p.offsetParent&&(m+=f.getTop(p.offsetParent)),m},getLeft:function(p){var m=p.offsetLeft;return null!=p.offsetParent&&(m+=f.getLeft(p.offsetParent)),m}};e._safePromptCustomMsg(function(){l=s.CustomizableDisplayInfo.dialogText,u={toolbars:{bottomMenu:!1,header:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:22,minSize:16},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},previousImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:!0,location:"myGroup",sequence:3},acquire:{visibility:1==(o=s.CustomizableDisplayInfo.buttons).visibility.scan,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:1==o.visibility.load,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:1==o.visibility.print,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:!!(o.visibility.scan||o.visibility.load||o.visibility.print),location:"myGroup",sequence:7},removeAll:{visibility:1==o.visibility.removeall,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:1==o.visibility.removeselected,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:!(!o.visibility.removeall&&!o.visibility.removeselected),location:"myGroup",sequence:10},rotateLeft:{visibility:1==o.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:1==o.visibility.rotate,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:1==o.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:1==o.visibility.deskew,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:!!(o.visibility.rotateleft||o.visibility.rotate||o.visibility.rotateright||o.visibility.deskew),location:"myGroup",sequence:15},crop:{visibility:1==o.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:1==o.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:1==o.visibility.changeimagesize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:1==o.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:1==o.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:!!(o.visibility.crop||o.visibility.cut||o.visibility.changeimagesize||o.visibility.flip||o.visibility.mirror),location:"myGroup",sequence:21},zoomin:{visibility:1==o.visibility.zoomin,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:1==o.visibility.originalsize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:1==o.visibility.zoomout,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:!!(o.visibility.zoomin||o.visibility.originalsize||o.visibility.zoomout||o.visibility.stretch),location:"myGroup",sequence:26},fitPage:{visibility:1==o.visibility.fit,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:1==o.visibility.fitw,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:1==o.visibility.fith,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:!!(o.visibility.fit||o.visibility.fitw||o.visibility.fith),location:"myGroup",sequence:30},hand:{visibility:1==o.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:1==o.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:1==o.visibility.zoom,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:!!(o.visibility.hand||o.visibility.rectselect||o.visibility.zoom),location:"myGroup",sequence:34},restore:{visibility:1==o.visibility.restore,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:1==o.visibility.save,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:1==o.visibility.close,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:o.titles.previous,nextImage:o.titles.next,acquire:o.titles.scan,loadImages:o.titles.load,print:o.titles.print,removeAll:o.titles.removeall,remove:o.titles.removeselected,rotateLeft:o.titles.rotateleft,rotate:o.titles.rotate,rotateRight:o.titles.rotateright,deskew:o.titles.deskew,crop:o.titles.crop,cut:o.titles.cut,changeImageSize:o.titles.changeimagesize,flip:o.titles.flip,mirror:o.titles.mirror,zoomin:o.titles.zoomin,originalsize:o.titles.originalsize,zoomout:o.titles.zoomout,stretch:o.titles.stretch,fitPage:o.titles.fit,fitWidth:o.titles.fitw,fitHeight:o.titles.fith,hand:o.titles.hand,select:o.titles.rectselect,clicktozoomin:o.titles.zoom,restore:o.titles.restore,save:o.titles.save,close:o.titles.close},canvasConfig:{selectedPageBackground:c,selectedPageBorder:"",hoverPageBackground:c,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""},h={toolbars:{header:!0,bottomMenu:!0,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1},myGroup2:{visibility:!0,location:"bottomMenu",sequence:1},myGroup3:{visibility:!0,location:"header",sequence:1},myGroup4:{visibility:!0,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},loadImages:{visibility:1==o.visibility.load,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:1==o.visibility.close,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:1==o.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:1==o.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:1==o.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:1==o.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:1==o.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:1==o.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:1==o.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:1==o.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:!0,location:"myGroup2",sequence:3},nextPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:1==o.visibility.removeall,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:1==o.visibility.removeselected,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:1==o.visibility.restore,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:1==o.visibility.save,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:o.titles.previous,nextImage:o.titles.next,acquire:o.titles.scan,loadImages:o.titles.load,print:o.titles.print,removeAll:o.titles.removeall,remove:o.titles.removeselected,rotateLeft:o.titles.rotateleft,rotate:o.titles.rotate,rotateRight:o.titles.rotateright,deskew:o.titles.deskew,crop:o.titles.crop,cut:o.titles.cut,changeImageSize:o.titles.changeimagesize,flip:o.titles.flip,mirror:o.titles.mirror,zoomin:o.titles.zoomin,originalsize:o.titles.originalsize,zoomout:o.titles.zoomout,stretch:o.titles.stretch,fitPage:o.titles.fit,fitWidth:o.titles.fitw,fitHeight:o.titles.fith,hand:o.titles.hand,select:o.titles.rectselect,clicktozoomin:o.titles.zoom,restore:o.titles.restore,save:o.titles.save,close:o.titles.close},canvasConfig:{selectedPageBackground:c,selectedPageBorder:"",hoverPageBackground:c,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}}),g.prototype.show=function(){return this._imageEditorInner.show()},g.prototype.hide=function(){return this._imageEditorInner.hide()},g.prototype.dispose=function(){return this._imageEditorInner.OnCloseInner(!0)},e.UI=e.UI||{},e.UI.ImageEditor=g,v.prototype.updateWebviewerConfig=function(p,m,I){var _=p;return m&&(this.editorSettings=m,e.isUndefined(m.buttons)||(e.isUndefined(m.buttons.titles)||(e.isUndefined(m.buttons.titles.previous)||(_.tipsConfig.previousImage=m.buttons.titles.previous),e.isUndefined(m.buttons.titles.next)||(_.tipsConfig.nextImage=m.buttons.titles.next),e.isUndefined(m.buttons.titles.print)||(_.tipsConfig.print=m.buttons.titles.print),e.isUndefined(m.buttons.titles.scan)||(_.tipsConfig.acquire=m.buttons.titles.scan),e.isUndefined(m.buttons.titles.load)||(_.tipsConfig.loadImages=m.buttons.titles.load),e.isUndefined(m.buttons.titles.rotateleft)||(_.tipsConfig.rotateLeft=m.buttons.titles.rotateleft),e.isUndefined(m.buttons.titles.rotate)||(_.tipsConfig.rotate=m.buttons.titles.rotate),e.isUndefined(m.buttons.titles.rotateright)||(_.tipsConfig.rotateRight=m.buttons.titles.rotateright),e.isUndefined(m.buttons.titles.deskew)||(_.tipsConfig.deskew=m.buttons.titles.deskew),e.isUndefined(m.buttons.titles.crop)||(_.tipsConfig.crop=m.buttons.titles.crop),e.isUndefined(m.buttons.titles.cut)||(_.tipsConfig.cut=m.buttons.titles.cut),e.isUndefined(m.buttons.titles.changeimagesize)||(_.tipsConfig.changeImageSize=m.buttons.titles.changeimagesize),e.isUndefined(m.buttons.titles.flip)||(_.tipsConfig.flip=m.buttons.titles.flip),e.isUndefined(m.buttons.titles.mirror)||(_.tipsConfig.mirror=m.buttons.titles.mirror),e.isUndefined(m.buttons.titles.zoomin)||(_.tipsConfig.zoomin=m.buttons.titles.zoomin),e.isUndefined(m.buttons.titles.originalsize)||(_.tipsConfig.originalsize=m.buttons.titles.originalsize),e.isUndefined(m.buttons.titles.zoomout)||(_.tipsConfig.zoomout=m.buttons.titles.zoomout),e.isUndefined(m.buttons.titles.stretch)||(_.tipsConfig.stretch=m.buttons.titles.stretch),e.isUndefined(m.buttons.titles.fit)||(_.tipsConfig.fitPage=m.buttons.titles.fit),e.isUndefined(m.buttons.titles.fitw)||(_.tipsConfig.fitWidth=m.buttons.titles.fitw),e.isUndefined(m.buttons.titles.fith)||(_.tipsConfig.fitHeight=m.buttons.titles.fith),e.isUndefined(m.buttons.titles.hand)||(_.tipsConfig.hand=m.buttons.titles.hand),e.isUndefined(m.buttons.titles.rectselect)||(_.tipsConfig.select=m.buttons.titles.rectselect),e.isUndefined(m.buttons.titles.zoom)||(_.tipsConfig.clicktozoomin=m.buttons.titles.zoom),e.isUndefined(m.buttons.titles.restore)||(_.tipsConfig.restore=m.buttons.titles.restore),e.isUndefined(m.buttons.titles.save)||(_.tipsConfig.save=m.buttons.titles.save),e.isUndefined(m.buttons.titles.close)||(_.tipsConfig.close=m.buttons.titles.close),e.isUndefined(m.buttons.titles.removeall)||(_.tipsConfig.removeAll=m.buttons.titles.removeall),e.isUndefined(m.buttons.titles.removeselected)||(_.tipsConfig.remove=m.buttons.titles.removeselected)),e.isUndefined(m.buttons.visibility)||(I?(_.buttons.loadImages.visibility=!!e.isUndefined(m.buttons.visibility.load)||1==m.buttons.visibility.load,_.buttons.close.visibility=!!e.isUndefined(m.buttons.visibility.close)||1==m.buttons.visibility.close,_.buttons.rotateLeft.visibility=!!e.isUndefined(m.buttons.visibility.rotateleft)||1==m.buttons.visibility.rotateleft,_.buttons.rotateRight.visibility=!!e.isUndefined(m.buttons.visibility.rotateright)||1==m.buttons.visibility.rotateright,_.buttons.flip.visibility=!!e.isUndefined(m.buttons.visibility.flip)||1==m.buttons.visibility.flip,_.buttons.mirror.visibility=!!e.isUndefined(m.buttons.visibility.mirror)||1==m.buttons.visibility.mirror,_.buttons.crop.visibility=!!e.isUndefined(m.buttons.visibility.crop)||1==m.buttons.visibility.crop,_.buttons.cut.visibility=!!e.isUndefined(m.buttons.visibility.cut)||1==m.buttons.visibility.cut,_.buttons.hand.visibility=!!e.isUndefined(m.buttons.visibility.hand)||1==m.buttons.visibility.hand,_.buttons.select.visibility=!!e.isUndefined(m.buttons.visibility.rectselect)||1==m.buttons.visibility.rectselect,_.buttons.removeAll.visibility=!!e.isUndefined(m.buttons.visibility.removeall)||1==m.buttons.visibility.removeall,_.buttons.remove.visibility=!!e.isUndefined(m.buttons.visibility.removeselected)||1==m.buttons.visibility.removeselected,_.buttons.restore.visibility=!!e.isUndefined(m.buttons.visibility.restore)||1==m.buttons.visibility.restore,_.buttons.save.visibility=!!e.isUndefined(m.buttons.visibility.save)||1==m.buttons.visibility.save):(_.buttons.acquire.visibility=!!e.isUndefined(m.buttons.visibility.scan)||1==m.buttons.visibility.scan,_.buttons.loadImages.visibility=!!e.isUndefined(m.buttons.visibility.load)||1==m.buttons.visibility.load,_.buttons.print.visibility=!!e.isUndefined(m.buttons.visibility.print)||1==m.buttons.visibility.print,_.buttons.blank2.visibility=!!(_.buttons.acquire.visibility||_.buttons.loadImages.visibility||_.buttons.print.visibility),_.buttons.removeAll.visibility=!!e.isUndefined(m.buttons.visibility.removeall)||1==m.buttons.visibility.removeall,_.buttons.remove.visibility=!!e.isUndefined(m.buttons.visibility.removeselected)||1==m.buttons.visibility.removeselected,_.buttons.blank3.visibility=!(!_.buttons.removeAll.visibility&&!_.buttons.remove.visibility),_.buttons.rotateLeft.visibility=!!e.isUndefined(m.buttons.visibility.rotateleft)||1==m.buttons.visibility.rotateleft,_.buttons.rotate.visibility=!!e.isUndefined(m.buttons.visibility.rotate)||1==m.buttons.visibility.rotate,_.buttons.rotateRight.visibility=!!e.isUndefined(m.buttons.visibility.rotateright)||1==m.buttons.visibility.rotateright,_.buttons.deskew.visibility=!!e.isUndefined(m.buttons.visibility.deskew)||1==m.buttons.visibility.deskew,_.buttons.blank4.visibility=!!(_.buttons.rotateLeft.visibility||_.buttons.rotate.visibility||_.buttons.rotateRight.visibility||_.buttons.deskew.visibility),_.buttons.crop.visibility=!!e.isUndefined(m.buttons.visibility.crop)||1==m.buttons.visibility.crop,_.buttons.cut.visibility=!!e.isUndefined(m.buttons.visibility.cut)||1==m.buttons.visibility.cut,_.buttons.changeImageSize.visibility=!!e.isUndefined(m.buttons.visibility.changeimagesize)||1==m.buttons.visibility.changeimagesize,_.buttons.flip.visibility=!!e.isUndefined(m.buttons.visibility.flip)||1==m.buttons.visibility.flip,_.buttons.mirror.visibility=!!e.isUndefined(m.buttons.visibility.mirror)||1==m.buttons.visibility.mirror,_.buttons.blank5.visibility=!!(_.buttons.crop.visibility||_.buttons.cut.visibility||_.buttons.changeImageSize.visibility||_.buttons.flip.visibility||_.buttons.mirror.visibility),_.buttons.zoomin.visibility=!!e.isUndefined(m.buttons.visibility.zoomin)||1==m.buttons.visibility.zoomin,_.buttons.originalsize.visibility=!!e.isUndefined(m.buttons.visibility.originalsize)||1==m.buttons.visibility.originalsize,_.buttons.zoomout.visibility=!!e.isUndefined(m.buttons.visibility.zoomout)||1==m.buttons.visibility.zoomout,_.buttons.blank6.visibility=!!(_.buttons.zoomin.visibility||_.buttons.originalsize.visibility||_.buttons.zoomout.visibility),_.buttons.fitPage.visibility=!!e.isUndefined(m.buttons.visibility.fit)||1==m.buttons.visibility.fit,_.buttons.fitWidth.visibility=!!e.isUndefined(m.buttons.visibility.fitw)||1==m.buttons.visibility.fitw,_.buttons.fitHeight.visibility=!!e.isUndefined(m.buttons.visibility.fith)||1==m.buttons.visibility.fith,_.buttons.blank7.visibility=!!(_.buttons.fitPage.visibility||_.buttons.fitWidth.visibility||_.buttons.fitHeight.visibility),_.buttons.hand.visibility=!!e.isUndefined(m.buttons.visibility.hand)||1==m.buttons.visibility.hand,_.buttons.select.visibility=!!e.isUndefined(m.buttons.visibility.rectselect)||1==m.buttons.visibility.rectselect,_.buttons.clicktozoomin.visibility=!!e.isUndefined(m.buttons.visibility.zoom)||1==m.buttons.visibility.zoom,_.buttons.blank7.visibility=!!(_.buttons.hand.visibility||_.buttons.select.visibility||_.buttons.clicktozoomin.visibility),_.buttons.restore.visibility=!!e.isUndefined(m.buttons.visibility.restore)||1==m.buttons.visibility.restore,_.buttons.save.visibility=!!e.isUndefined(m.buttons.visibility.save)||1==m.buttons.visibility.save,_.buttons.close.visibility=!!e.isUndefined(m.buttons.visibility.close)||1==m.buttons.visibility.close))),e.isUndefined(m.dialogText)||(s.CustomizableDisplayInfo.dialogText=l=m.dialogText),e.isUndefined(m.promptToSaveChange)||(this.promptToSaveChange=m.promptToSaveChange),e.isUndefined(m.border)||(_.outerBorder=m.border),e.isUndefined(m.topMenuBorder)||(_.topMenuBorder=m.topMenuBorder),e.isUndefined(m.innerBorder)||(_.canvasConfig.canvasBorder=m.innerBorder),e.isUndefined(m.background)||(_.canvasConfig.canvasBackground=m.background)),_},v.prototype._bindView=function(){var p=this;if(p.bShowImageEdit)return!0;if(!p.myImageEditor)return p.bDispose?e.Errors.ImageEditorDispose(p._stwain):e.Errors.ImageEditorNotExist(p._stwain),!1;var m=e.one(".dynamsoft-cvs-container");if(m&&m.getEL()?(p.cvsContainer=m,p.cvsParentId=m.parent()[0].id,p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera&&(p.cvsStatus=p._stwain.Addon.Camera.getStatus())):(p.cvsContainer="",p.cvsParentId="",p.cvsStatus=""),p.bShowImageEdit=!0,p.editorSettings&&p.editorSettings.element&&p.editorSettings.width&&p.editorSettings.height){if(p.UIEditor=p.editorSettings.element,p.bFullScreen=!1,p.myImageEditor.width=p.editorSettings.width,p.myImageEditor.height=p.editorSettings.height,p.SetWidthInner(p.editorSettings.width,!0),p.SetHeightInner(p.editorSettings.height,!0),p.myImageEditor.bindView(p.UIEditor),p.hide(),p.cvsParentId){var I=document.getElementById(p.cvsParentId);I&&I.appendChild(p.cvsContainer[0])}}else{var y=i.createElement("div");i.body.appendChild(y),document.body.insertBefore(y,document.body.firstElementChild),p.UIEditor=y,p.bFullScreen=!0,p.UIEditor.className="D_ImageUIEditor",p.UIEditor.style.width="100%",p.UIEditor.style.height="100%",p.UIEditor.style.position="fixed",p.UIEditor.style.left="0px",p.UIEditor.style.top="0px",p.UIEditor.style.zIndex="9999",p.UIEditor.style.display="none",p.SetWidthInner("100%",!0),p.SetHeightInner("100%",!0),p.myImageEditor.bindView(p.UIEditor),p.hide(),p.bShowImageEditForFullScreen=!0}if(p.updateMode(),p.SetSelectionRectAspectRatio(p.editorSettings&&p.editorSettings.selectionRectAspectRatio?p.editorSettings.selectionRectAspectRatio:0),p.HideEditorButtonForPad(),p.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],p._stwain._isMobileMode()){var _,C=e.one(".ds-dwt-ui-icon-acquire");if(C&&C.getEL()&&(C[0].style.display="none"),p.dwtMobileFileId="dwtmobilefile",p.UIEditor&&"DIV"==p.UIEditor.nodeName)(_=document.createElement("div")).innerHTML=p.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+p.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+p.dwtMobileFileId+"' type='file' style='display:none' />",p.UIEditor.appendChild(_);else{var A=document.getElementById(p.UIEditor);(_=document.createElement("div")).innerHTML=p.bMobile?"<input id ='"+p.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+p.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",A.appendChild(_)}e.get(p.dwtMobileFileId).onchange=function(){for(var E=0;E<this.files.length;E++)p._stwain.LoadImageFromBinary(this.files[E]);document.getElementById(p.dwtMobileFileId).value=""}}return p.myImageEditor.off("slideSwitch"),p.myImageEditor.on("slideSwitch",function(E){"left"==E?p._webViewer.myViewer.previous():"right"==E&&p._webViewer.myViewer.next()}),!0},v.prototype.dispose=function(){var m,p=this;return(m=p.mydvs.ViewControl.removeViewer(p.myImageEditor))&&(p.UIEditor.lastChild&&p.UIEditor.removeChild(p.UIEditor.lastChild),p.myImageEditor=void 0,p._webViewer._imageEditor=void 0,p._webViewer._imageEditorInner=void 0,p.mydvs=null,p._stwain=null,p.bDispose=!0),m},v.prototype.show=function(){var p=this;return p.myImageEditor?(p.bFullScreen&&(p.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),p.myImageEditor.showViewer=!0,!0):(p.bDispose?e.Errors.ImageEditorDispose(p._webViewer._stwain):e.Errors.ImageEditorNotExist(p._webViewer._stwain),!1)},v.prototype.hide=function(){var p=this;return p.myImageEditor?(p.myImageEditor.showViewer=!1,p.bFullScreen&&(p.UIEditor.style.display="none"),!0):(p.bDispose?e.Errors.ImageEditorDispose(p._webViewer._stwain):e.Errors.ImageEditorNotExist(p._webViewer._stwain),!1)},v.prototype._BindImageEditorEvents=function(){var p=this;e.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(m){p.myImageEditor.on(m,function(I,y){p[m](I,y)})})},v.prototype.HideEditorButtonForPad=function(){var m=this.myImageEditor,I=this.bPadViewer,y=document.getElementById("rotateBtn"+m.postfix);y&&(y.style.display=I?"none":"");var _=document.getElementById("deskewBtn"+m.postfix);_&&(_.style.display=I?"none":"");var C=document.getElementById("changeImageSizeBtn"+m.postfix);C&&(C.style.display=I?"none":"")},v.prototype.BackImageData=function(){var p=this;if(p._stwain._isMobileMode()&&p.bShowImageEdit){var m=p._webViewer.GetCurrentIndex();m>=0&&p._webViewer.GetImageData(p._webViewer.GetUidByIndex(m)).then(function(I){p.BackImageBuffer=I.oriData;var y=p._webViewer.GetMetaDataByIndex(m);y&&(p.BackModelImageControl={},p.BackModelImageControl.width=y.width,p.BackModelImageControl.height=y.height,p.BackModelImageControl.bitDepth=y.bitDepth,p.BackModelImageControl.resolutionX=y.resolutionX,p.BackModelImageControl.resolutionY=y.resolutionY)})}},v.prototype.CloseShowImageEditor=function(){var p=this;if(!p.myImageEditor)return p.bDispose?e.Errors.ImageEditorDispose(p._stwain):e.Errors.ImageEditorNotExist(p._stwain),!1;if(p.cvsContainer&&""!=p.cvsContainer&&p.cvsParentId&&""!=p.cvsParentId){var m=document.getElementById(p.cvsParentId);m&&m.appendChild(p.cvsContainer[0]),"playing"==p.cvsStatus&&p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera&&p._stwain.Addon.Camera.resume()}return!0},v.prototype.UpdateInfo=function(){T.Lib.hideMask()},v.prototype.clearSelectedAreas=function(){var p=this,m=!1;return p._webViewer.GetHowManyImagesInBuffer()<=0||((m=p.myImageEditor.clearSelectedBoxes())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),m)},v.prototype.SetSelectionRectAspectRatio=function(p){return this.myImageEditor.selectionBoxAspectRatio=p,!0},v.prototype.ZoomIn=function(){var m,p=this;return(m=p.myImageEditor.zoomIn())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),m},v.prototype.ZoomOut=function(){var m,p=this;return(m=p.myImageEditor.zoomOut())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),m},v.prototype.SetZoom=function(p,m,I){var _,y=this;return(_=m&I?y.myImageEditor.zoomTo(p,m,I):y.myImageEditor.zoomTo(p))||e.Errors.WebviewerError(y._stwain,y.mydvs.Error.errorMessage,y.mydvs.Error.errorCode),_},v.prototype.GetZoom=function(){return this.myImageEditor.zoom},v.prototype.SetFitType=function(p){var I="window";return e.isUndefined(p)||("width"==p||"height"==p)&&(I=p),this.myImageEditor.fitType=I,!0},v.prototype.SetMouseShape=function(p){var I;switch(p){case T.DWT.EnumDWT_MouseShape.Default:I="default";break;case T.DWT.EnumDWT_MouseShape.Hand:I="pointer";break;case T.DWT.EnumDWT_MouseShape.Crosshair:I="crosshair";break;case T.DWT.EnumDWT_MouseShape.Zoom:I="zoom-in";break;default:I="crosshair"}return this.SetCursor(I),!0},v.prototype.SetCursor=function(p){var m=this;if(!m._webViewer._NouiNotSupport("cursor"))return!1;var I="default";switch(p){case"default":I="default",m.SetOperationMode(1);break;case"pointer":I="pointer",m.SetOperationMode(0);break;case"crosshair":I="crosshair",m.SetOperationMode(1);break;case"zoom-in":I="zoom-in",m.SetOperationMode(2);break;default:I="crosshair"}return m.myImageEditor.canvasMouseShape=I,!0},v.prototype.SetSelectionImageBorderColor=function(p){return this.myImageEditor.selectedPageBorderColor=p,!0},v.prototype.SetBackgroundColor=function(p){return this.myImageEditor.imageBackgroundColor=p,!0},v.prototype.SetWidth=function(p){return this.myImageEditor.width=p,!0},v.prototype.SetWidthInner=function(p,m){var I=this;if(m)I.myImageEditor.width=p;else if(e.isString(p)&&p.indexOf("%")>=0){var y=e.one("#"+I._stwain._containerID);I.myImageEditor.width=parseInt(e.css(y,"width")*parseInt(p)/100)}else I.myImageEditor.width=p;return!0},v.prototype.SetHeight=function(p){return this.myImageEditor.height=p,!0},v.prototype.SetHeightInner=function(p,m){var I=this;if(m)I.myImageEditor.height=p;else if(e.isString(p)&&p.indexOf("%")>=0){var y=e.one(I._stwain._containerElement);I.myImageEditor.height=parseInt(e.css(y,"height")*parseInt(p)/100)}else I.myImageEditor.height=p;return!0},v.prototype.SetIfAutoScroll=function(p){return this.myImageEditor.showLatestPage=p,!0},v.prototype.ChangeButtonClass=function(p,m){var y;return this.myImageEditor&&(y=this.myImageEditor.setButtonClass(p,m)),y},v.prototype.SetOperationMode=function(p){this.myImageEditor.operationMode=p},v.prototype.UnbindContent=function(p){this.myImageEditor.unbindContent()},v.prototype.SetSelectedPageBackground=function(p){this.myImageEditor.selectedPageBackground=p},v.prototype.GetRealTimeMetadataByIndex=function(p){var m=this;if(!(p<0||p>=m._webViewer.GetHowManyImagesInBuffer()))return m.myImageEditor.getRealTimeMetadataByIndex(p);e.Errors.IndexOutOfRange(m._stwain)},v.prototype.DVSRotate=function(p){var I,m=this;return m.myImageEditor.rotateMode=0,(I=m.myImageEditor.rotate(p))||e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode),I},v.prototype.DVSFlip=function(){var m,p=this;return(m=p.myImageEditor.flip())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),m},v.prototype.DVSMirror=function(){var m,p=this;return(m=p.myImageEditor.mirror())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),m},v.prototype.DVSCrop=function(p,m,I,y){var C,_=this;return(C=_.myImageEditor.crop(p,m,I-p,y-m))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),C},v.prototype.DVSErase=function(p,m,I,y){var C,_=this;return(C=_.myImageEditor.erase(p,m,I-p,y-m,_._webViewer._UIView.BackgroundFillColor))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),C},v.prototype.DVSSaveTransformResult=function(p){var m=this;return m.myImageEditor.saveTransformation().then(function(){p(null,-1,null)},function(I){e.Errors.WebviewerError(m._stwain,m.mydvs.Error.errorMessage,m.mydvs.Error.errorCode)}),!0},v.prototype.DVSRotateEx=function(p,m){var y,I=this;return I.myImageEditor.rotateMode=m?1:0,(y=I.myImageEditor.rotate(p))||e.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode),y},v.prototype.DVSChangeImageSize=function(p,m,I){var _,y=this;return(_=y.myImageEditor.changePageSize(parseInt(p),parseInt(m),I))||e.Errors.WebviewerError(y._stwain,y.mydvs.Error.errorMessage,y.mydvs.Error.errorCode),_},v.prototype.DVSSkewAngle=function(){var p=this;return p._stwain._asyncGetSkewAngleOnly(p._webViewer.GetCurrentIndex(),function(m){p.DVSRotateEx(m,!0),p.UpdateInfo(),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()}),!0},v.prototype.updateButtons=function(){var p=this;1==p._IfChangedWithinTheEditor?(p.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),p.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(p.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey"),p.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey"))},v.prototype.updateMode=function(p){var y,m=this;if(m.bShowImageEdit){if((y=m._webViewer.GetHowManyImagesInBuffer())>1?(m._webViewer.GetCurrentIndex()==y-1||m._webViewer.GetHowManyImagesInBuffer()<=1?m.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):m.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),m._webViewer.GetCurrentIndex()<=0||m._webViewer.GetHowManyImagesInBuffer()<=1?m.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):m.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(m.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),m.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),m.updateButtons(),m.__SetCropButtonGrey(!0),m.__SetEraseButtonGrey(!0),m.bMobile)switch(m.cursorStatus){case"rectselect":m.OnSelect();break;case"zoom":m.OnClicktozoomin();break;default:m.OnHand()}else switch(m.cursorStatus){case"hand":m.OnHand();break;case"zoom":m.OnClicktozoomin();break;default:m.OnSelect()}if(p){var _=m._webViewer.GetCurrentIndex();1==m._IfChangedWithinTheEditor&&_!=m.iChangedIndex&&m.ShowDialogForSaveImage(m._webViewer.GetCurrentIndex(),!1)}}},v.prototype.__SaveImageInner=function(p,m){var I=this;if(-1==I.iChangedIndex&&0==I._IfSaveChangesOutSideOfTheEditor)return I._IfChangedWithinTheEditor=!1,m&&m(),!1;if(1!=I._IfChangedWithinTheEditor&&0==I._IfSaveChangesOutSideOfTheEditor)return alert(s.CustomizableDisplayInfo.errorMessages.imageNotChanged),I._IfChangedWithinTheEditor=!1,m&&m(),!1;I._IfSaveChangesOutSideOfTheEditor&&(I.iChangedIndex=I._webViewer.GetCurrentIndex());var C=!0;if(1==I._IfChangedWithinTheEditor||1==I._IfSaveChangesOutSideOfTheEditor){var A=I.getImageManager().convertClientIndexToServerId(I.iChangedIndex);if(-1==A)return m&&m(),!1;I.OnGetImageFromServerForEdit(I._webViewer._UIView.mapModelImageControl[A],I.iChangedIndex,2,function(M,E,R){if(M){if(1==p&&(e.log("__SaveImageInner: "+[M.guid].join(",")),I._webViewer.GetCurrentIndex()==E&&(I._stwain._isMobileMode()?I._webViewer.MobileUpdateImage(M,R):I._webViewer.UpdateImage(M,R))),I._IfChangedWithinTheEditor=!1,I.iChangedIndex=-1,-1==M.serverId)return m&&m(),!1}else I._IfChangedWithinTheEditor=!1,I.iChangedIndex=-1;return I.updateButtons(),m&&m(),!0}),C=!1}return I._IfSaveChangesOutSideOfTheEditor=!1,C&&(I._IfChangedWithinTheEditor=!1,m&&m()),!0},v.prototype.ShowDialogForSaveImage=function(p,m,I,y){var _=this,C=function(){_.__SaveImageInner(!0,function(){a.DCP_DWT_OnClickCloseInstall(_._stwain._containerID),e.bChangeImage=1,-1==p?_.OnClose():_._webViewer.__goInner(p),m&&(document.body.style.overflow=""),f.isFunction(I)&&I()})};if(_.promptToSaveChange){T.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"<div>",l.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',l.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',l.saveChangedImage[2],'" /></div>',"</div>"].join(""),_.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1});var M=e.one(".dynamsoft_btnSave").getEL();M&&(M.onclick=function(){C()});var E=e.one(".dynamsoft_btnCancel").getEL();E&&(E.onclick=function(){_.__RestoreImageInner(p,function(){a.DCP_DWT_OnClickCloseInstall(_._stwain._containerElement),e.bChangeImage=0,-1==p?_.OnClose():_._webViewer.__goInner(p),m&&(document.body.style.overflow=""),f.isFunction(y)&&y()})})}else C()},v.prototype.__SetCropButtonGrey=function(p){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),p&&this.clearSelectedAreas()},v.prototype.__SetEraseButtonGrey=function(p){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),p&&this.clearSelectedAreas()},v.prototype.__SetZoomInButtonEnable=function(p){this.ChangeButtonClass("zoomin",1==p?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")},v.prototype.__SetZoomOutButtonEnable=function(p){this.ChangeButtonClass("zoomout",1==p?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")},v.prototype.pageChange=function(p){var I,m=this,y=m._webViewer.GetHowManyImagesInBuffer();e.log("OnPagination"),y<=0?f.output(m,"No image in Buffer"):1!=y&&(!/^\d+$/.test(p)||p<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((I=parseInt(p)-1)<0?I=0:I>=y&&(I=y-1),I!=m._webViewer.GetCurrentIndex()&&m.go(I)))},v.prototype.bufferChanged=function(p){var m=this,I=m._webViewer.GetCurrentIndex();return m.updateMode(),"shift"!=p.action||1!=m._IfChangedWithinTheEditor||(m.ShowDialogForSaveImage(I,!1),!1)},v.prototype.pageRendered=function(p){},v.prototype.OnFirstImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()},v.prototype.OnLastImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()},v.prototype.OnPreviousImage=function(){var m=e.one(".ds-dwt-ui-icon-preImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!m||!m.getEL())&&this._webViewer.previous()},v.prototype.OnNextImage=function(){var m=e.one(".ds-dwt-ui-icon-nextImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!m||!m.getEL())&&this._webViewer.next()},v.prototype.go=function(p){var m=this;if(m._webViewer.GetHowManyImagesInBuffer()<=0)return f.output(m,"No image in Buffer"),!1;if(1==m._IfChangedWithinTheEditor)return m.ShowDialogForSaveImage(p,!1),!1;if(m.bShowImageEdit&&void 0!==p){if(-1==p)return!1;m.bCouldBeTimeConsuming=!0,m.myImageEditor.gotoPage(p),m.updateMode()}return!0},v.prototype.OnAcquire=function(){var p=this,m=function(){p._stwain.SelectSource(function(){p._stwain.CloseSource(),p._stwain.OpenSource(),p._stwain.IfShowUI=!0,1==T.DWT.IfConfineMaskWithinTheViewer?(T.DWT.IfConfineMaskWithinTheViewer=!1,p._stwain.AcquireImage({},function(){T.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){p._stwain.ShowImageEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){p._stwain.ShowImageEditorEx(-1,-1,-1,-1)})})):p._stwain.AcquireImage()},function(){e.log("User did not select a source")})};e.Errors.ClearErrorInfo(p._stwain),p._IfChangedWithinTheEditor?p.ShowDialogForSaveImage(p._webViewer.GetCurrentIndex(),!1,m,m):m()},v.prototype.OnLoadImage=function(){var p=this,m=null,I=function(){if(p._stwain._isMobileMode()){var y=document.getElementById(p.dwtMobileFileId);return y.value="",void y.click()}if(p._stwain.IfShowFileDialog=!0,p._stwain.Addon&&p._stwain.Addon.PDF){var M,A=!1;(p._stwain._isMobileMode()?e.License.checkProductKey(p._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(p._stwain,{PDFRasterizer:!0},!0))&&(m=p._stwain.Addon.PDF.GetConvertMode(),M=p._stwain._innerFun("GetAddOnVersion",T.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&M==T.DWT.PdfMacVersion||e.env.bLinux&&M==T.DWT.PdfLinuxVersion||M==T.DWT.PdfVersion)&&(A=!0),A&&p._stwain.Addon.PDF.SetConvertMode(3))}p._stwain.LoadImageEx("",5,function(){e.log("Loaded an image successfully."),null!=m&&p._stwain.Addon.PDF.SetConvertMode(m)},function(R,x){e.log("Loading failed with the error: "+x),null!=m&&p._stwain.Addon.PDF.SetConvertMode(m)})};e.Errors.ClearErrorInfo(p._stwain),p._IfChangedWithinTheEditor?p.ShowDialogForSaveImage(p._webViewer.GetCurrentIndex(),!1,I,I):I()},v.prototype.OnPrint=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetCurrentIndex()<0?f.output(p,"No image in Buffer"):p._webViewer._UIView.Print()},v.prototype.OnRemoveAll=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):p._stwain.RemoveAllImages()},v.prototype.OnRemove=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):p._stwain.RemoveAllSelectedImages()},v.prototype.OnRotateLeft=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._stwain._isMobileMode()?(p.DVSRotate(270),p.UpdateInfo()):p._stwain.RotateLeft(p._webViewer.GetCurrentIndex()),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSRotate(270),p.UpdateInfo()):p._stwain.RotateLeft(p._webViewer.GetCurrentIndex())),p.updateMode())},v.prototype.RotateEx=function(p,m,I){var y=this;y._webViewer.GetHowManyImagesInBuffer()<=0?f.output(y,"No image in Buffer"):(void 0===p||void 0===m||void 0===I?alert(s.CustomizableDisplayInfo.errorMessages.insufficientParas):1==y._webViewer._ImgManager.bImageChangedInViewer?(y._IfSaveChangesOutSideOfTheEditor=!0,y._webViewer._ImgManager.bImageChangedInViewer=!1,y.__SaveImageInner(!1,function(){y.bCouldBeTimeConsuming=!0,T.Lib.showMask(),y._webViewer._ImgManager.bImageJustChangedInEditor=!0,y._stwain._isMobileMode()?(y.DVSRotateEx(p,m,I),y.UpdateInfo()):y._stwain.RotateEx(y._webViewer.GetCurrentIndex(),p,m,I),y._IfChangedWithinTheEditor=!0,y.iChangedIndex=y._webViewer.GetCurrentIndex(),y.updateButtons()})):(y.bCouldBeTimeConsuming=!0,T.Lib.showMask(),y._IfSaveChangesOutSideOfTheEditor=!1,y._webViewer._ImgManager.bImageJustChangedInEditor=!0,y._IfChangedWithinTheEditor=!0,y.iChangedIndex=y._webViewer.GetCurrentIndex(),y._stwain._isMobileMode()?(y.DVSRotateEx(p,m,I),y.UpdateInfo()):y._stwain.RotateEx(y._webViewer.GetCurrentIndex(),p,m,I)),y.updateMode())},v.prototype.OnRotate=function(p){var m=this;if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)f.output(m,"No image in Buffer");else{if(e.hide("dynamsoft_ImgSizeEditor"),!e.get("dynamsoft_RotateAnyAngle")){var I=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',l.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',l.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',l.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',l.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',l.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];e.one("body").append(I.join(""))}var y=e.get("dynamsoft_Angle_InterpolationMethod");y.options.length=0,y.options.add(new Option("NearestNeighbor",1)),y.options.add(new Option("Bilinear",2)),y.options.add(new Option("Bicubic",3)),y=null,e.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var P=e.get("dynamsoft_Angle").value;if(e.get("dynamsoft_Angle").className="",!/^\d+$/.test(P)||P<=0)return e.get("dynamsoft_Angle").className+=" invalid",e.get("dynamsoft_Angle").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidAngle);var w=e.get("dynamsoft_KeepSize").checked;m.bCouldBeTimeConsuming=!0,T.Lib.showMask();var S=parseInt(P);m.RotateEx(S,w,e.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0!=m._stwain.ErrorCode||e.hide("dynamsoft_RotateAnyAngle")},e.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){e.hide("dynamsoft_RotateAnyAngle")};var A=e.get("dynamsoft_RotateAnyAngle");e.toggle("dynamsoft_RotateAnyAngle");var M=p.srcElement||p.target,E=M.y;E||(E=M.offsetTop+1);var R=M.x;if(R||(R=M.offsetLeft+1),m.UIEditor&&"DIV"==m.UIEditor.nodeName)A.style.top=p.clientY+document.documentElement.scrollTop+"px",A.style.left=p.clientX+document.documentElement.scrollLeft+"px";else{var x=i.getElementById(m.UIEditor);A.style.top=E+M.offsetHeight+f.getTop(x)+"px",A.style.left=R+f.getLeft(x)+"px"}e.get("dynamsoft_Angle").value="45"}},v.prototype.OnRotateRight=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSRotate(90),p.UpdateInfo()):p._stwain.RotateRight(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSRotate(90),p.UpdateInfo()):p._stwain.RotateRight(p._webViewer.GetCurrentIndex())),p.updateMode())},v.prototype.OnDeskew=function(){var p=this;if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)f.output(p,"No image in Buffer");else if(1==p._webViewer._ImgManager.bImageChangedInViewer)p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){if(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._stwain._isMobileMode())p.DVSSkewAngle();else{var I=p._webViewer.GetCurrentIndex();I>=0&&p._stwain.GetSkewAngleAsync(I).then(function(y){p.RotateEx(y,!0,1)}),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()}});else if(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode())p.DVSSkewAngle();else{var m=p._webViewer.GetCurrentIndex();m>=0&&p._stwain.GetSkewAngleAsync(m).then(function(I){p.RotateEx(I,!0,1)})}},v.prototype.OnCrop=function(){e.Errors.ClearErrorInfo(this._stwain);var I=e.one(".ds-dwt-ui-icon-cropImage");I&&I.getEL()&&this.Crop()},v.prototype.Crop=function(){var p=this;if(p._webViewer.GetHowManyImagesInBuffer()<=0)f.output(p,"No image in Buffer");else{var m=p.actualSelectedCanvasAreas;if(2==m.length){var I=m[1],y=I.left,_=I.top,C=I.right,A=I.bottom;parseInt(y)-parseInt(C)!=0&&parseInt(_)-parseInt(A)!=0&&(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSCrop(parseInt(y),parseInt(_),parseInt(C),parseInt(A)),p.UpdateInfo()):p._stwain.Crop(p._webViewer.GetCurrentIndex(),parseInt(y),parseInt(_),parseInt(C),parseInt(A)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSCrop(parseInt(y),parseInt(_),parseInt(C),parseInt(A)),p.UpdateInfo()):p._stwain.Crop(p._webViewer.GetCurrentIndex(),parseInt(y),parseInt(_),parseInt(C),parseInt(A)),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)),p.updateMode())}else f.output(p,"No area selected for cropping")}},v.prototype.OnErase=function(){var I=e.one(".ds-dwt-ui-icon-erase");e.Errors.ClearErrorInfo(this._stwain),I&&I.getEL()&&this.Erase()},v.prototype.Erase=function(){var p=this,m=!1;if(p._webViewer.GetHowManyImagesInBuffer()<=0)f.output(p,"No image in Buffer");else{var I=p.actualSelectedCanvasAreas;if(1!=I.length){if(1==p._webViewer._ImgManager.bImageChangedInViewer)p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){for(var R=1;R<I.length;R++){var x=I[R],P=x.left,F=x.top,k=x.right,w=x.bottom;parseInt(P)-parseInt(k)!=0&&parseInt(F)-parseInt(w)!=0&&(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSErase(parseInt(P),parseInt(F),parseInt(k),parseInt(w)),p.UpdateInfo()):p._stwain.CutFrameToClipboard(p._webViewer.GetCurrentIndex(),parseInt(P),parseInt(F),parseInt(k),parseInt(w)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons(),m=!0)}p.__SetEraseButtonGrey(m),p.__SetCropButtonGrey(m)});else{p._IfSaveChangesOutSideOfTheEditor=!1,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex();for(var y=1;y<I.length;y++){var _=I[y],C=_.left,A=_.top,M=_.right,E=_.bottom;parseInt(C)-parseInt(M)!=0&&parseInt(A)-parseInt(E)!=0&&(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSErase(parseInt(C),parseInt(A),parseInt(M),parseInt(E)),p.UpdateInfo()):p._stwain.CutFrameToClipboard(p._webViewer.GetCurrentIndex(),parseInt(C),parseInt(A),parseInt(M),parseInt(E)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),m=!0)}p.__SetEraseButtonGrey(m),p.__SetCropButtonGrey(m)}p.updateMode()}else f.output(p,"No area selected for erasing")}},v.prototype.ChangeImageSize=function(p,m,I){var y=this;y._webViewer.GetHowManyImagesInBuffer()<=0?f.output(y,"No image in Buffer"):(1==y._webViewer._ImgManager.bImageChangedInViewer?(y._IfSaveChangesOutSideOfTheEditor=!0,y._webViewer._ImgManager.bImageChangedInViewer=!1,y.__SaveImageInner(!1,function(){y.bCouldBeTimeConsuming=!0,T.Lib.showMask(),y._webViewer._ImgManager.bImageJustChangedInEditor=!0,y._stwain._isMobileMode()?(y.DVSChangeImageSize(p,m,I),y.UpdateInfo()):y._stwain.ChangeImageSize(y._webViewer.GetCurrentIndex(),p,m,I),y._IfChangedWithinTheEditor=!0,y.iChangedIndex=y._webViewer.GetCurrentIndex(),y.updateButtons()})):(y.bCouldBeTimeConsuming=!0,T.Lib.showMask(),y._IfSaveChangesOutSideOfTheEditor=!1,y._webViewer._ImgManager.bImageJustChangedInEditor=!0,y._IfChangedWithinTheEditor=!0,y.iChangedIndex=y._webViewer.GetCurrentIndex(),y._stwain._isMobileMode()?(y.DVSChangeImageSize(p,m,I),y.UpdateInfo()):y._stwain.ChangeImageSize(y._webViewer.GetCurrentIndex(),p,m,I)),y.updateMode())},v.prototype.OnChangeImageSize=function(p){var m=this;if(e.Errors.ClearErrorInfo(m._stwain),!(m._webViewer.GetHowManyImagesInBuffer()<=0)){if(e.hide("dynamsoft_RotateAnyAngle"),!e.get("dynamsoft_ImgSizeEditor")){var I=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',l.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',l.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",l.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',l.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',l.dlgChangeImageSize[4],'"/></span></div>',"</div>"];e.one("body").append(I.join(""))}var y=e.get("dynamsoft_InterpolationMethod");y.options.length=0,y.options.add(new Option("NearestNeighbor",1)),y.options.add(new Option("Bilinear",2)),y.options.add(new Option("Bicubic",3)),y=null,e.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var U=e.get("dynamsoft_img_width").value,Z=e.get("dynamsoft_img_height").value;e.get("dynamsoft_img_width").className="",e.get("dynamsoft_img_height").className="";var ne=/^\d+$/;return!ne.test(Z)||Z<=0?(e.get("dynamsoft_img_height").className+=" invalid",e.get("dynamsoft_img_height").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!ne.test(U)||U<=0?(e.get("dynamsoft_img_width").className+=" invalid",e.get("dynamsoft_img_width").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(m.ChangeImageSize(U,Z,e.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0!=m._stwain.ErrorCode||e.hide("dynamsoft_ImgSizeEditor")))},e.get("dynamsoft_btnCancelChange").onclick=function(){e.hide("dynamsoft_ImgSizeEditor")};var A=e.get("dynamsoft_ImgSizeEditor");e.toggle("dynamsoft_ImgSizeEditor");var E=p.srcElement||p.target,R=E.y;R||(R=E.offsetTop+1);var x=E.x;if(x||(x=E.offsetLeft+1),m.UIEditor&&"DIV"==m.UIEditor.nodeName)A.style.top=p.clientY+document.documentElement.scrollTop+"px",A.style.left=p.clientX+document.documentElement.scrollLeft+"px";else{var P=i.getElementById(m.UIEditor);A.style.top=R+E.offsetHeight+f.getTop(P)+"px",A.style.left=x+f.getLeft(P)+"px"}var F=m._webViewer.GetCurrentIndex(),k=m.getImageManager().convertClientIndexToServerId(F);if(-1==k)return!1;if(m._webViewer._UIView.mapModelImageControl[k]){if(m._stwain._isMobileMode()){var w,S=0,L=0;(w=m.GetRealTimeMetadataByIndex())&&w.width&&(S=w.width),w&&w.height&&(L=w.height),e.get("dynamsoft_img_width").value=parseInt(S),e.get("dynamsoft_img_height").value=parseInt(L)}else e.get("dynamsoft_img_width").value=parseInt(m.getImageManager().GetImageWidth(F)),e.get("dynamsoft_img_height").value=parseInt(m.getImageManager().GetImageHeight(F));return!0}return!1}f.output(m,"No image in Buffer")},v.prototype.OnFlip=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSFlip(),p.UpdateInfo()):p._stwain.Flip(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSFlip(),p.UpdateInfo()):p._stwain.Flip(p._webViewer.GetCurrentIndex())),p.updateMode())},v.prototype.OnMirror=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSMirror(),p.UpdateInfo()):p._stwain.Mirror(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,T.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSMirror(),p.UpdateInfo()):p._stwain.Mirror(p._webViewer.GetCurrentIndex())),p.updateMode())},v.prototype.OnZoomin=function(){var p=this,m=e.one(".ds-dwt-ui-icon-zoomin-grey");if(!m||!m.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void f.output(p,"No image in Buffer");var I=Math.floor(100*p.GetZoom()*p._webViewer._UIView.zoomInStep)+1;!I||1<I&&I<2501?(p.ZoomIn(),p.__SetZoomInButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),p.__SetZoomInButtonEnable(!1)),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)}},v.prototype.OnOriginalsize=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(p.SetZoom(1),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},v.prototype.OnZoomout=function(){var p=this,m=e.one(".ds-dwt-ui-icon-zoomout-grey");if(!m||!m.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void f.output(p,"No image in Buffer");var I=Math.floor(100*p.GetZoom()*p._webViewer._UIView.zoomOutStep)-1;!I||1<I&&I<6501?(p.ZoomOut(),p.__SetZoomOutButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),p.__SetZoomOutButtonEnable(!1)),p.__SetZoomInButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)}},v.prototype.OnFitPage=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(p.SetFitType(),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},v.prototype.OnFitWidth=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(p.SetFitType("width"),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},v.prototype.OnFitHeight=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?f.output(p,"No image in Buffer"):(p.SetFitType("height"),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},v.prototype.OnHand=function(){var m=T.DWT.EnumDWT_MouseShape.Hand;this.clearSelectedAreas(),this.SetMouseSelectInner(m)},v.prototype.OnSelect=function(){this.SetMouseSelectInner(T.DWT.EnumDWT_MouseShape.Crosshair)},v.prototype.OnClicktozoomin=function(){var m=T.DWT.EnumDWT_MouseShape.Zoom;this.clearSelectedAreas(),this.SetMouseSelectInner(m)},v.prototype.SetMouseSelectInner=function(p){var m=this;if(e.Errors.ClearErrorInfo(m._stwain),m._webViewer.GetHowManyImagesInBuffer()<=0)f.output(m,"No image in Buffer");else if(m.SetMouseShape(p),m.__EnableMouseShapButtons(p),m.bMobile)switch(p){case T.DWT.EnumDWT_MouseShape.Crosshair:m.cursorStatus="rectselect";break;case T.DWT.EnumDWT_MouseShape.Zoom:m.cursorStatus="zoom";break;default:m.cursorStatus="hand"}else switch(p){case T.DWT.EnumDWT_MouseShape.Hand:m.cursorStatus="hand";break;case T.DWT.EnumDWT_MouseShape.Zoom:m.cursorStatus="zoom";break;default:m.cursorStatus="rectselect"}},v.prototype.OnRestore=function(){var p=this,m=e.one(".ds-dwt-ui-icon-saveImage-grey");if(!m||!m.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void f.output(p,"No image in Buffer");p.__RestoreImageInner(-1)}},v.prototype.__RestoreImageInner=function(p,m){var I=this;if(-1==I.iChangedIndex)return I._IfChangedWithinTheEditor=!1,void(m&&m());if(I._stwain._isMobileMode())I.Reset(),I._IfChangedWithinTheEditor=!1,I.iChangedIndex=-1,I.updateButtons(),m&&m();else{var C=!0;if(1==I._IfChangedWithinTheEditor){var A=I.getImageManager().convertClientIndexToServerId(I.iChangedIndex);-1!=A&&I.OnGetImageFromServerForEdit(I._webViewer._UIView.mapModelImageControl[A],I.iChangedIndex,1,function(M,E,R){M&&(e.log("__RestoreImageInner: "+[M.guid].join(",")),I._stwain._isMobileMode()?I._webViewer.MobileUpdateImage(M,R):I._webViewer.UpdateImage(M,R)),I._IfChangedWithinTheEditor=!1,I.iChangedIndex=-1;var x=M&&M.serverId;return-1==x?(I.updateButtons(),m&&m(),!1):(I.updateButtons(),-1==p&&-1==(x=I.getImageManager().convertClientIndexToServerId(I._webViewer.GetCurrentIndex()))?(e.Errors.IndexOutOfRange(I._stwain),m&&m(),!1):void(m&&m()))}),C=!1}C&&(I._IfChangedWithinTheEditor=!1,m&&m())}},v.prototype.OnGetImageFromServerForEdit=function(p,m,I,y){var C,_=this;if(y&&_._webViewer._UIView.BaseUrl){var M=_.getImageManager().convertClientIndexToServerId(m);if(-1==M)return!1;if(_._stwain._isMobileMode())if(1==I){var E=_._webViewer.GetMetaDataByIndex(m);E&&(E.width=_.BackModelImageControl.width,E.height=_.BackModelImageControl.height,E.bitDepth=_.BackModelImageControl.bitDepth,E.resolutionX=_.BackModelImageControl.resolutionX,E.resolutionY=_.BackModelImageControl.resolutionY),p.ticks=Date.now(),p.imageUrl=_.BackImageBuffer,y(p,m,{metaData:E})}else _.DVSSaveTransformResult(y);else T.DWT.ConnectWithSocket?y():(C=d.getUrlByAct(_._webViewer._UIView.BaseUrl,M,I),e.ajax({method:"GET",url:C,onSuccess:function(R){p.ticks=Date.now(),p.imageUrl=d.getImageUrl(_._webViewer._UIView.BaseUrl,M,-1,-1,p.ticks),p.minImageUrl=d.getImageUrl(_._webViewer._UIView.BaseUrl,M,parseInt(p.iImageControlWidth),parseInt(p.iImageControlHeight),p.ticks);var x=_._webViewer.GetMetaDataByIndex(m);if(x){var P=_._webViewer._UIView.GetDataImageControl(M);x.width=P&&P.width?P.width:_._stwain.GetImageWidth(m),x.height=P&&P.height?P.height:_._stwain.GetImageHeight(m)}y(p,m,x)},onError:function(){}}))}return!0},v.prototype.OnSave=function(){var p=this,m=e.one(".ds-dwt-ui-icon-saveImage-grey");if(!m||!m.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void f.output(p,"No image in Buffer");p.__SaveImageInner(!0,function(){if(-1==p.getImageManager().convertClientIndexToServerId(p._webViewer.GetCurrentIndex()))return e.Errors.IndexOutOfRange(p._stwain),!1})}},v.prototype.OnClose=function(){var p=this;return e.Errors.ClearErrorInfo(p._stwain),1==p._IfChangedWithinTheEditor?(p.ShowDialogForSaveImage(-1,!0),!1):p.OnCloseInner()},v.prototype.OnCloseInstall=function(){0==this._IfChangedWithinTheEditor&&a.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)},v.prototype.Reset=function(p){return this.myImageEditor.reset()},v.prototype.OnCloseInner=function(p){var y,m=this;if(e.Errors.ClearErrorInfo(m._stwain),1==m._IfChangedWithinTheEditor){if(!p)return m.ShowDialogForSaveImage(-1,!0),!1;a.DCP_DWT_OnClickCloseInstall(m._stwain._containerElement),e.bChangeImage=0,m.__RestoreImageInner(-1)}return m.UIEditor&&1==m.bFullScreen?m.UIEditor.childNodes.length>0&&m.UIEditor.parentNode.removeChild(m.UIEditor):m.myImageEditor&&m.myImageEditor.unbindView(m.UIEditor),m.bShowImageEdit=!1,m._webViewer.bShowImageEdit=!1,m.bShowImageEditForFullScreen=!1,m.CloseShowImageEditor(),e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle"),(y=e.get("dynamsoft_ImgSizeEditor"))&&y.parentNode.removeChild(y),(y=e.get("dynamsoft_RotateAnyAngle"))&&y.parentNode.removeChild(y),T.Lib.dialog.selectsourcedlg&&T.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",e.isFunction(m._stwain.__CloseImageEditorUI)&&m._stwain.__CloseImageEditorUI(),m.dispose()},v.prototype.__EnableMouseShapButtons=function(p){var m=this;m.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),m.ChangeButtonClass("select","ds-dwt-ui-icon-select"),m.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),p==T.DWT.EnumDWT_MouseShape.Hand?m.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):p==T.DWT.EnumDWT_MouseShape.Crosshair?m.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):p==T.DWT.EnumDWT_MouseShape.Zoom&&m.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")},v.prototype.click=function(p){e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle")},v.prototype.imageClick=function(p,m){this.UpdateInfo()},v.prototype.pageAreaSelected=function(p,m){var I=this,y=1;if(m&&m.length>0){var _=m[m.length-1];_.index&&(y=parseInt(_.index)+1),y>0&&y<I.actualSelectedCanvasAreas.length?I.actualSelectedCanvasAreas[y]={left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height}:y==I.actualSelectedCanvasAreas.length&&I.actualSelectedCanvasAreas.push({left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height}),2==I.actualSelectedCanvasAreas.length&&_.width>0&&_.height>0?(I.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage"),I.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")):(I.__SetCropButtonGrey(!1),I.__SetEraseButtonGrey(!1))}},v.prototype.pageAreaUnselected=function(p){var m=this;m.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],m.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),m.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")},v.prototype.onDrop=function(p){this._webViewer.dropEvent(p)},v.prototype.getImageManager=function(){return this._webViewer._ImgManager},e.UI=e.UI||{},e.UI.ImageEditorInner=v}function g(p,m){var I=this;I._imageEditorInner=new e.UI.ImageEditorInner(p,m),I.myImageEditor=I._imageEditorInner.myImageEditor}function v(p,m){var I=this;I._webViewer=p,I.mydvs=p.mydvs,I._stwain=p._stwain,I.bShowImageEditForFullScreen=!1,I.bCouldBeTimeConsuming=!1,I.bShowImageEdit=!1,I.promptToSaveChange=!0;var y=u;I.bMobile=!1;var _=!1;I._stwain._isPC()||(I.bPadViewer||(y=h,_=!0),I.bMobile=!0),y=I.updateWebviewerConfig(y,m,_),I.myImageEditor=I.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:y,scrollerConfig:{}},I._webViewer.myViewer.uid),0!=I._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(I._webViewer._stwain,I._webViewer.mydvs.Error.errorMessage,I._webViewer.mydvs.Error.errorCode),I.bDispose=!1,I._BindImageEditorEvents(),I._bindView()}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var g="#F0EFF4",v="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4",p=["click","onExitFunc","onMultiSelectionFunc","onAddDocumentFunc","onMultiSelectionCencelFunc","onAllSelectionFunc","onCancelAllSelectionFunc","onSaveFunc","onUploadFunc","bufferChanged","onRemoveSelectedFunc"],m={toolbars:{topMenu:!0,bottomMenu:!0},groups:{viewMenu:!1,global:!1,viewChange:!1,viewerCorner:!1,pager:!1,myMainTopGroup:{visibility:!0,location:"topMenu",sequence:1},myMainBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1},myMultiSelectionTopGroup:{visibility:!0,location:"topMenu",sequence:2},myMultiSelectionBottomGroup:{visibility:!0,location:"bottomMenu",sequence:2},myGroup3:{visibility:!0,location:"header",sequence:1}},cropStyle:{cropMask:!1,cropBar:!1},buttonResize:{ifResize:!0,maxSize:18,minSize:12},buttons:{exit:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onExitFunc"},fileName:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color",sequence:2,text:""},addDocument:{visibility:!0,location:"myMainBottomGroup",iconClass:"ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color",sequence:1,onButtonClick:"onAddDocumentFunc"},multiSelection:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onMultiSelectionFunc"},cancel:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onMultiSelectionCencelFunc"},selectCount:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color",sequence:2,text:"selected count: "},selectAll:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:2,onButtonClick:"onAllSelectionFunc"},cancelAllSelect:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onCancelAllSelectionFunc"},save:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onSaveFunc"},upload:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onUploadFunc"},removeSelected:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onRemoveSelectedFunc"}},content:{besides:{visibility:!1,sequence:4},thumbnail:{backgroundColor:"#fff"}},canvasConfig:{columns:2,rows:2,background:g,pageBackground:"rgb(255,255,255)",checkboxColor:"#FE8E14",showPageNumber:!0,allowPageDragging:!0},thumbnail:{showThumbnailControl:!1,selectedBorderColor:"#7DA2CE",selectedBackgroundColor:"rgb(199, 222, 252)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)"}};I.prototype.getCustomElement=function(){return this._documentTemplate.getCustomElement()},I.prototype.onExitFunc=function(){this._webViewer.hide()},I.prototype.onAddDocumentFunc=function(){var _=this;""==_._webViewer._documentScanConfiguration?0==_._documentTemplate.bFullScreen?(_._documentTemplate.newContainer.style.width=_._webViewer.GetWidth()+"px",_._documentTemplate.newContainer.style.height=_._webViewer.GetHeight()+"px",_._webViewer.showVideoInner({element:_._documentTemplate.newContainer})):_._webViewer.showVideoInner():_._webViewer.showVideoInner(_._webViewer._documentScanConfiguration)},I.prototype.onRemoveSelectedFunc=function(){this._ImgManager._stwain.SelectedImagesIndices.length>0&&this._ImgManager._stwain.RemoveAllSelectedImages()},e.UI=e.UI||{},e.UI.Template=I,y.prototype.BindView=function(_){var M,C=this;M=_&&"DIV"==_.nodeName?_:document.getElementById(_),e.isUndefined(M)||e.isNull(M)?(C.newContainer=document.createElement("div"),document.body.appendChild(C.newContainer),document.body.insertBefore(C.newContainer,document.body.firstElementChild),C.newContainer.style.width="100%",C.newContainer.style.height="100%",C.newContainer.style.position="fixed",C.newContainer.style.left="0px",C.newContainer.style.top="0px",C.bFullScreen=!0):(C.newContainer=M,C.bFullScreen=!1);var E=document.createElement("div");E.id="btnCapture"+C._webViewer.myViewer.postfix,E.className="ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture",E.onclick=function(){C._webViewer.myViewer.emit("onAddDocumentFunc")},C._webViewer.BindView(C.newContainer),C._webViewer.updateUISettings(m),0==C._webViewer.GetHowManyImagesInBuffer()&&C._webViewer.SetBackground(v);var R=document.getElementById("WebViewer"+C._webViewer.myViewer.postfix);R&&R.appendChild(E),C.setMultiSelectMode(!1),C.__bindButtonEvents(),C._webViewer.SetCursor("pointer"),C.DWTCustomWrapper=document.createElement("div");var x=T.Lib.env.isMobileViewer(),P=T.Lib.env.isPadViewer();x||P?C.customElement=C._webViewer.createCustomElement(C.DWTCustomWrapper,"right",!0):(C.DWTCustomWrapper.style.height="100%",C.DWTCustomWrapper.style.width="20%",C.customElement=C._webViewer.createCustomElement(C.DWTCustomWrapper,"right",!1));var F=document.getElementById("fileName"+C._webViewer.myViewer.postfix);F&&(F.style.width="80%",F.style.whiteSpace="nowrap");var k=document.getElementById("selectCount"+C._webViewer.myViewer.postfix);k&&(k.style.width="200px",k.style.whiteSpace="nowrap");var w=document.getElementById("bottomMenu"+C._webViewer.myViewer.postfix);w&&(w.style.border="0",w.style.display="none")},y.prototype.UnbindView=function(){var _=this;_._unbindButtonEvents(),_._documentEditor&&_._documentEditor.dispose();var A=document.getElementById("btnCapture"+_._webViewer.myViewer.postfix);return A&&(A.onclick=function(){}),_.newContainer&&1==_.bFullScreen&&_.newContainer.childNodes.length>0&&_.newContainer.parentNode.removeChild(_.newContainer),_.newContainer="",_.DWTCustomWrapper="",!0},y.prototype.setMultiSelectMode=function(_){var C=this,A=document.getElementById("myMainTopGroup"+C._webViewer.GetIdPostfix()),M=document.getElementById("myMainBottomGroup"+C._webViewer.GetIdPostfix()),E=document.getElementById("myMultiSelectionTopGroup"+C._webViewer.GetIdPostfix()),R=document.getElementById("myMultiSelectionBottomGroup"+C._webViewer.GetIdPostfix());_?(A.style.display="none",M.style.display="none",E.style.display="",R.style.display=""):(A.style.display="",M.style.display="",E.style.display="none",R.style.display="none")},y.prototype.__bindButtonEvents=function(){var _=this;T.Lib.each(p,function(C){_._webViewer.on(C,function(A,M){_[C](A,M)})})},y.prototype._unbindButtonEvents=function(){var _=this;e.each(p,function(C){_._webViewer.off(C)})},y.prototype.bufferChanged=function(_){var C=this;if("shift"==_.action||"remove"==_.action||"add"==_.action){var A=document.getElementById("selectCount"+C._webViewer.GetIdPostfix());A&&(A.innerText="selected count: "+_.selectedIds.length),C.setSelectAllButtonEnable(_.selectedIds.length!=C._stwain.HowManyImagesInBuffer||0==C._stwain.HowManyImagesInBuffer)}0==_.selectedIds.length?(C._webViewer.setButtonClass("save","ds-dwt-ui-icon-color-grey"),C._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color-grey"),C._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color-grey")):(C._webViewer.setButtonClass("save","ds-dwt-ui-icon-color"),C._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color"),C._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color"));var M=document.getElementById("btnCapture"+C._webViewer.myViewer.postfix);M&&""==M.style.display&&(e.isUndefined(_.imageIds)||_.imageIds&&0==_.imageIds.length)?C._webViewer.SetBackground(v):C._webViewer.SetBackground(g)},y.prototype.Dynamsoft_DocumentTemplate_OnVideoClosed=function(){this._webViewer.OpenFile(this._webViewer.currentFileName)},y.prototype.click=function(_){var C=this;if(-1!=_.index&&1!=C._webViewer.GetMultipleMode()&&C._stwain.HowManyImagesInBuffer>0){var A=C._webViewer.createDocumentEditor({element:C.newContainer,bFullScreen:C.bFullScreen,width:C._webViewer.GetWidth(),height:C._webViewer.GetHeight()});A&&A.show()}},y.prototype.onExitFunc=function(){this._template.onExitFunc()},y.prototype.ifShowDocumentTemplate=function(_){this.newContainer&&(this.newContainer.style.display=_?"":"none")},y.prototype.setTemplateTitle=function(_){var A=document.getElementById("fileName"+this._webViewer.myViewer.postfix);A&&(A.innerText=_.length>25?_.substring(0,10)+"..."+_.substring(_.length-14,_.length):_)},y.prototype.onMultiSelectionFunc=function(){this._MultiSelectionInner([])},y.prototype._MultiSelectionInner=function(_){var C=this,A=document.getElementById("bottomMenu"+C._webViewer.myViewer.postfix);if(A&&(A.style.display=""),C._stwain.SelectImages(_),C.setMultiSelectMode(!0),!C._webViewer.GetMultipleMode()){document.getElementById("selectCount"+C._webViewer.GetIdPostfix()).innerText="selected count: "+C._stwain.SelectedImagesIndices.length,C._webViewer.SetMultipleMode(!0),C.setSelectAllButtonEnable(C._stwain.SelectedImagesIndices.length!=C._stwain.HowManyImagesInBuffer||0==C._stwain.HowManyImagesInBuffer);var E=document.getElementById("btnCapture"+C._webViewer.myViewer.postfix);if(E&&(E.style.display="none",C._webViewer.SetBackground(g)),C._template&&!T.Lib.isFunction(C._template.onSaveFunc)){var R=document.getElementById("save"+C._webViewer.myViewer.postfix);R&&(R.style.display="none")}if(C._template&&!T.Lib.isFunction(C._template.onUploadFunc)){var x=document.getElementById("upload"+C._webViewer.myViewer.postfix);x&&(x.style.display="none")}}},y.prototype.onAddDocumentFunc=function(){this._template.onAddDocumentFunc()},y.prototype.onMultiSelectionCencelFunc=function(){var _=this;_.setMultiSelectMode(!1),_._webViewer.SetMultipleMode(!1),_._stwain.SelectImages([]);var C=document.getElementById("bottomMenu"+_._webViewer.myViewer.postfix);C&&(C.style.border="0",C.style.display="none");var A=document.getElementById("btnCapture"+_._webViewer.myViewer.postfix);A&&(A.style.display="",0==_._webViewer.GetHowManyImagesInBuffer()?_._webViewer.SetBackground(v):_._webViewer.SetBackground(g))},y.prototype.onAllSelectionFunc=function(){this._stwain.SelectAllImages(),this.setSelectAllButtonEnable(!1)},y.prototype.onCancelAllSelectionFunc=function(){this._stwain.SelectImages([]),this.setSelectAllButtonEnable(!0)},y.prototype.setSelectAllButtonEnable=function(_){var A=document.getElementById("cancelAllSelect"+this._webViewer.GetIdPostfix()),M=document.getElementById("selectAll"+this._webViewer.GetIdPostfix());M&&A&&(_?(M.style.display="",A.style.display="none"):(M.style.display="none",A.style.display=""))},y.prototype.onSaveFunc=function(){var _=this;_._stwain.SelectedImagesIndices.length>0&&T.Lib.isFunction(_._template.onSaveFunc)&&_._template.onSaveFunc()},y.prototype.onUploadFunc=function(){var _=this;_._stwain.SelectedImagesIndices.length>0&&T.Lib.isFunction(_._template.onUploadFunc)&&_._template.onUploadFunc()},y.prototype.onRemoveSelectedFunc=function(){this._stwain.SelectedImagesIndices.length>0&&this._template.onRemoveSelectedFunc()},y.prototype.getCustomElement=function(){return this.customElement},e.UI=e.UI||{},e.UI.DocumentTemplate=y}function I(_,C){var A=this;A._webViewer=_,A._ImgManager=C,A._documentTemplate=new e.UI.DocumentTemplate(_,C,A)}function y(_,C,A){var M=this;M._ImgManager=C,M._stwain=C._stwain,M._webViewer=_,M._template=A}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=document,s=(window,T.DWT),o=e.html5.Funs.DEF,l="dynamsoft-dvs-file",u="rgb(255, 255, 255)",h="transparent",f="1px solid rgb(238, 238, 238)",g="rgb(239, 246, 253)",v="1px solid rgb(238, 238, 238)",p="rgb(251, 236, 136)",m="1px solid rgb(125,162,206)",I="rgb(199, 222, 252)",_=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],C={toolbars:{header:!1,topMenu:!1,asideMenu:!1,bottomMenu:!1},groups:{},buttons:{},thumbnail:{showThumbnailControl:!1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,showPageNumber:!1,border:"",background:u,pageBackground:h,pageBorder:f,hoverPageBackground:g,hoverPageBorder:v,placeholderBackground:p,selectedPageBorder:m,selectedPageBackground:I,autoChangeIndex:!1},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:u,canvasBorder:"",selectedPageBorder:m,pageBorder:f,pageMargin:10,pageBackground:h,selectedPageBackground:I,hoverPageBorder:v,hoverPageBackground:g,placeholderBackground:p,autoChangeIndex:!1,allowPageDragging:!0,showPageNumber:!1,columns:1,rows:1,scrollDirection:"vertical"},showSidebar:!1,showMain:!0,showViewer:!0,sidebarWidth:"180",outerBorder:"1px solid rgb(204, 204, 204)",topMenuBorder:"",selectedAreaBorderColor:"rgb(42, 29, 43)",selectionRectAspectRatio:0,ifAutoScroll:!0,useOuterDrop:!0,allowSlide:!0},A={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:s.CustomizableDisplayInfo.buttons,dialogText:s.CustomizableDisplayInfo.dialogText},M={background:"#F0EFF4",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:s.CustomizableDisplayInfo.buttons,dialogText:s.CustomizableDisplayInfo.dialogText},E={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:h,pageBorder:f,hoverPageBackground:g,hoverPageBorder:v,placeholderBackground:p,autoChangeIndex:!1},R={scannerViewer:{fullScreen:!1,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},resolution:{visibility:!0,valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoScan:{visibility:!0,enableAutoScan:!1},autoDetect:{visibility:!0,enableAutoDetect:!1,acceptedPolygonConfidence:80,fpsLimit:3,acceptedBlurryScore:0,autoCaptureDelay:1e3},continuousScan:{visibility:!0,enableContinuousScan:!0},switchCamera:{visibility:!0},loadLocalFile:{visibility:!0}},filterViewer:{visibility:!0,insert:{visibility:!0,position:"before"},remove:{visibility:!0},rotateLeft:{visibility:!0},filter:{visibility:!0,valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original"},exitDocumentScanAfterSave:!1},cropViewer:{visibility:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},rotateLeft:{visibility:!0},rotateRight:{visibility:!0},autoDetectBorder:{visibility:!0}}},x={isFunction:function(w){return w&&"function"==typeof w},addClass:function(w,S){var L=e.one(w);L&&L.length>0&&L.addClass(S)},removeClass:function(w,S){var L=e.one(w);L&&L.length>0&&L.removeClass(S)},output:function(w,S){T.DWT.Debug&&e.log(S)},getTop:function(w){var S=w.offsetTop;return null!=w.offsetParent&&(S+=x.getTop(w.offsetParent)),S},getLeft:function(w){var S=w.offsetLeft;return null!=w.offsetParent&&(S+=x.getLeft(w.offsetParent)),S}};e._safePromptCustomMsg(function(){A.buttons=s.CustomizableDisplayInfo.buttons,A.dialogText=s.CustomizableDisplayInfo.dialogText}),P.prototype.dispose=function(){var w=this;w.containerElement=null,w.myViewer&&(w.myViewer.off("bufferChanged"),w.mydvs.ViewControl.removeViewer(w.myViewer),w.myViewer=null),w.mydvs&&(w.mydvs.dispose(),w.mydvs=null),w._UIView=null,w._ImgManager=null,w._stwain.Viewer&&(w._stwain.Viewer.dispose(),w._stwain.Viewer=null),w._stwain=null},P.prototype._Init=function(w){var S=this;w.Container&&(e.isNodeList(w.Container)||e.isArray(w.Container)&&w.Container.length>0)?S.containerElement=w.Container[0]||"":S.containerElement="";if(S.mydvs)""!=S.containerElement&&(S.BindView(S.containerElement),S.show());else{S.initWidth=w.Width,S.initHeight=w.Height;var U=C;U.width=S.initWidth,U.height=S.initHeight,S._stwain._isPC()||(U.canvasConfig.canvasMouseShape="pointer"),S.mydvs=new T.ViewModel({uiConfig:U,displayMode:"continuous",fitType:"window",scrollerConfig:{}}),S._bindViewUi=!1,S.myViewer=S.mydvs.ViewControl.getViewerByUid(),T.DWT.UseDefaultViewer&&S.containerElement&&S.mydvs.ViewControl&&(S.mydvs.ViewControl.bindViewUiConstructor(T.ViewUi),S.myViewer.bindView(S.containerElement),S._bindViewUi=!0),S.myViewer&&(S._stwain._isPC()?S.SetOperationMode(1):S.SetOperationMode(0)),S.containerElement&&S._InitDVS();try{S.mydvs&&(S.mydvs.bindLicenseCallback&&S.mydvs.bindLicenseCallback(function(){return S._stwain._checkWebcamWasmLicense()}),S.mydvs.bindSavePhotoCallback&&S.mydvs.bindSavePhotoCallback(function(Z){return S._stwain._saveImageCallback(Z)}))}catch(Z){}S._bindViewUi?S._BindViewerEvents():S.myViewer.on("bufferChanged",function(Z,ne){e.isFunction(S.bufferChanged)&&S.bufferChanged(Z,ne)}),S._bRegistedLoad=!1}},P.prototype.BindView=function(w){var L,U,S=this;return S.OnCloseImageEditor(),U=w&&"DIV"==w.nodeName?w:i.getElementById(w),0==S._bindViewUi&&S.mydvs.ViewControl&&(S.mydvs.ViewControl.bindViewUiConstructor(T.ViewUi),S.myViewer.bindView(S.containerElement),e.html5.ui.initProgress(S._stwain),S._bindViewUi=!0),e.isUndefined(S.myViewer.width)&&(S.initWidth=100),e.isUndefined(S.myViewer.height)&&(S.initHeight=100),(L=S.myViewer.bindView(w))?(S.myViewer.showViewer=!1,S.containerElement=U,S._stwain._containerElement=U,S._stwain._bBindViewer=!0,S._InitDVS(),S.SetAcceptDrop(!0),S.SetAllowSlide(!0),S.myViewer.off("bufferChanged"),S.resetUISettingsInner(!1,S.GetWidth(),S.GetHeight()),S._BindViewerEvents(),S.hide(),L):(e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),!1)},P.prototype.CreateTemplate=function(w){var S=this;return S._stwain.Template=new e.UI.Template(S,S._ImgManager),S._stwain.Template},P.prototype.BindTemplate=function(w,S){var U=!1;return S&&S._documentTemplate&&(U=S._documentTemplate.BindView(w)),U},P.prototype.show=function(){var w=this;if(!w._NouiNotSupport("show"))return!1;if(w._stwain.Template&&w._stwain.Template._documentTemplate){w._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0);var S=document.getElementById("btnCapture"+w.myViewer.postfix);S&&(S.style.display="")}return w.myViewer.showViewer=!0,!0},P.prototype.hide=function(){var w=this;if(!w._NouiNotSupport("hide"))return!1;if(w._stwain.Template&&w._stwain.Template._documentTemplate){w._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1);var S=document.getElementById("btnCapture"+w.myViewer.postfix);S&&(S.style.display="none")}return w.myViewer.showViewer=!1,!0},P.prototype.UnbindView=function(){var S,w=this;return w._stwain&&w._stwain.Addon&&w._stwain.Addon.Camera&&w._stwain.Addon.Camera._viewer&&""!=w._stwain.Addon.Camera.getStatus()&&w._stwain.Addon.Camera.closeSource(),(S=w.myViewer.unbindView())?(w._bindViewUi=!1,w._UnbindViewerEvents(),w._imageEditor&&w._imageEditor.dispose(),w._documentEditor&&w._documentEditor.dispose(),w._thumbnailViewer&&w._thumbnailViewer.dispose(),w._customElement&&w._customElement.dispose(),w.containerElement=""):e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),w._stwain._bBindViewer=!1,S},P.prototype.SetUIView=function(w){this._UIView=w},P.prototype._BindViewerEvents=function(){var w=this;!w.myViewer||(w.myViewer.off("bufferChanged"),e.each(_,function(S){w.myViewer.on(S,function(L,U){w[S](L,U)})}))},P.prototype._UnbindViewerEvents=function(){var w=this;e.each(_,function(S){"bufferChanged"!=S&&w.myViewer.off(S)})},P.prototype._InitDVS=function(){var w=this;w.ifWebviewerInit=!0,w.myViewer.showHeader=!1,w.myViewer.showTopMenu=!1,w.myViewer.showFooter=!1,w.myViewer.showMain=!0,w.myViewer.bOnlyShowThumbnailsView=!1,w.myViewer.showThumbnailControl=!1,w.myViewer.showLatestPage=!0,w.myViewer.minZoom=w._UIView.MIN_ZOOM,w.myViewer.maxZoom=w._UIView.MAX_ZOOM},P.prototype.ShowImageEditor=function(w,S,L,U){var Z=this;return w&&L&&U?(A.element=w,A.width=L,A.height=U):(A.element=void 0,A.width=void 0,A.height=void 0),A.border=Z.GetBorder(),A.selectionRectAspectRatio=Z.GetSelectionRectAspectRatio(),Z.createImageEditor(A),0!=Z._stwain._errorCode&&(Z._imageEditor.dispose(),Z.createImageEditor(A)),Z._imageEditor.show(),!0},P.prototype.OnCloseImageEditor=function(){var w=this;return!!w.bShowImageEdit&&(w._imageEditor&&w._imageEditor.dispose(),w.bShowImageEdit=!1,w._imageEditor=void 0,w._imageEditorInner=void 0,!0)},P.prototype.GetUidByIndex=function(w){var S=this;return w<0||w>=S.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(S._stwain),-1):S.myViewer.getUidByIndex(w)},P.prototype.GetIndexByUid=function(w){return w&&""!=w&&-1!=w?this.myViewer.getIndexByUid(w):(e.Errors.IndexOutOfRange(this._stwain),-1)},P.prototype.SetMetaDataByIndex=function(w,S){var L=this;if(!(w<0||w>=L.GetHowManyImagesInBuffer()))return L.myViewer.setMetadataByIndex(w,S);e.Errors.IndexOutOfRange(L._stwain)},P.prototype.GetMetaDataByIndex=function(w){var S=this;if(!(w<0||w>=S.GetHowManyImagesInBuffer()))return S.myViewer.getMetadataByIndex(w);e.Errors.IndexOutOfRange(S._stwain)},P.prototype.GetCustomDataByIndex=function(w){var L,S=this;if(!(w<0||w>=S.GetHowManyImagesInBuffer()))return L=e.isArray(w)?w[0]:w,S.myViewer.getCustomDataByIndex(L);e.Errors.IndexOutOfRange(S._stwain)},P.prototype.GetHowManyImagesInBuffer=function(){return e.isUndefined(this.myViewer.currentPageCount)?0:this.myViewer.currentPageCount},P.prototype.UpdateInfo=function(w,S,L){var U=this;S&&T.Lib.hideMask(),w&&U.bShowImageEdit&&U._imageEditorInner&&U._imageEditorInner.updateMode(L)},P.prototype.AppendImage=function(w,S){var X,B,L=this,U=w.imageUrl,Z=w.minImageUrl,ne=w.serverId,oe=w.bAppendImage,ue=w.index,pe={},K=L.currentFileName;if(S&&(e.isUndef(S.currentFileName)||(K=S.currentFileName),e.isUndef(S.width)||(pe.width=S.width),e.isUndef(S.height)||(pe.height=S.height),e.isUndef(S.bitDepth)||(pe.bitDepth=S.bitDepth),e.isUndef(S.resolutionX)||(pe.resolutionX=S.resolutionX),e.isUndef(S.resolutionY)||(pe.resolutionY=S.resolutionY),e.isUndef(S.oriBlobData)||(B=S.oriBlobData)),0==L.ifFileNameExist(K))return!1;if(e.log("AppendImage_oriData:"+U),oe||0==oe&&0==L.GetHowManyImagesInBuffer()){if(B){var ee,G={imageId:ne};for(ee in B)B.hasOwnProperty(ee)&&(G[ee]=B[ee]);X=L.mydvs.DataControl.appendSync(K,[{oriData:U,minData:Z,metadata:pe,customData:G}])}else X=L.mydvs.DataControl.appendSync(K,[{oriData:U,minData:Z,metadata:pe,customData:{imageId:ne}}]);return w.uuid=X[0],L.UpdateInfo(!0),X[0]}return X=L.mydvs.DataControl.insertSync(K,[{oriData:U,minData:Z,metadata:pe,customData:{imageId:ne}}],ue),w.uuid=X[0],L.UpdateInfo(!0),X[0]},P.prototype.MobileAppendImage=function(w,S){var oe,L=this,U=w.bAppendImage,Z=w.index,ne={},ue=L.currentFileName;return S.imageId=w.serverId,S&&S.currentFileName&&(ue=S.currentFileName),0!=L.ifFileNameExist(ue)&&(S&&S.metadata&&(e.isUndef(S.metadata.width)||(ne.width=S.metadata.width),e.isUndef(S.metadata.imageWidth)||(ne.width=S.metadata.imageWidth),e.isUndef(S.metadata.height)||(ne.height=S.metadata.height),e.isUndef(S.metadata.imageHeight)||(ne.height=S.metadata.imageHeight),e.isUndef(S.metadata.bitDepth)||(ne.bitDepth=S.metadata.bitDepth),e.isUndef(S.metadata.imageBitDepth)||(ne.bitDepth=S.metadata.imageBitDepth),e.isUndef(S.metadata.resolutionX)||(ne.resolutionX=S.metadata.resolutionX),e.isUndef(S.metadata.imageXResolution)||(ne.resolutionX=S.metadata.imageXResolution),e.isUndef(S.metadata.resolutionY)||(ne.resolutionY=S.metadata.resolutionY),e.isUndef(S.metadata.imageYResolution)||(ne.resolutionY=S.metadata.imageYResolution),e.isUndef(S.metadata.oriBlobData)||(ne.oriBlobData=S.metadata.oriBlobData),delete S.metadata),"url"!=S.dataType&&"srcId"in S?0==U&&0==L.GetHowManyImagesInBuffer()?(oe=L.mydvs.DataControl.appendSync(ue,[{oriData:null,minData:null,metadata:ne,customData:S}]),w.uuid=oe[0],L.UpdateInfo(!0),oe[0]):(oe=L.mydvs.DataControl.insertSync(ue,[{oriData:null,minData:null,metadata:ne,customData:S}],Z),w.uuid=oe[0],L.UpdateInfo(!0),oe[0]):("src"in S&&(w.imageUrl=S.src,delete S.src),"imageUrl"in S&&(w.imageUrl=S.imageUrl,delete S.imageUrl),ne.currentFileName=ue,L.AppendImage(w,ne)))},P.prototype.UpdateImage=function(w,S){var L=this,U=w.imageUrl,Z=w.minImageUrl,ne=w.serverId,oe=w.uuid,ue={};return S&&(e.isUndef(S.width)||(ue.width=S.width),e.isUndef(S.height)||(ue.height=S.height),e.isUndef(S.bitDepth)||(ue.bitDepth=S.bitDepth),e.isUndef(S.resolutionX)||(ue.resolutionX=S.resolutionX),e.isUndef(S.resolutionY)||(ue.resolutionY=S.resolutionY)),oe&&""!=oe&&-1!=oe?(L._UpdateImageInner(oe,{oriData:U,minData:Z,customData:{imageId:ne},metadata:ue}),L.UpdateInfo(!1,!0),oe):(e.Errors.IndexOutOfRange(L._stwain),!1)},P.prototype.MobileUpdateImage=function(w,S){var L=this,U=w.index,Z=w.uuid,ne={},oe={};if(!Z||""==Z||-1==Z)return e.Errors.IndexOutOfRange(L._stwain),!1;if((ne=L.GetMetaDataByIndex(U))&&"metadata"in S&&S.metadata&&(e.isUndef(S.metadata.width)||(ne.width=S.metadata.width),e.isUndef(S.metadata.imageWidth)||(ne.width=S.metadata.imageWidth),e.isUndef(S.metadata.height)||(ne.height=S.metadata.height),e.isUndef(S.metadata.imageHeight)||(ne.height=S.metadata.imageHeight),e.isUndef(S.metadata.bitDepth)||(ne.bitDepth=S.metadata.bitDepth),e.isUndef(S.metadata.imageBitDepth)||(ne.bitDepth=S.metadata.imageBitDepth),e.isUndef(S.metadata.resolutionX)||(ne.resolutionX=S.metadata.resolutionX),e.isUndef(S.metadata.imageXResolution)||(ne.resolutionX=S.metadata.imageXResolution),e.isUndef(S.metadata.resolutionY)||(ne.resolutionY=S.metadata.resolutionY),e.isUndef(S.metadata.imageYResolution)||(ne.resolutionY=S.metadata.imageYResolution)),"url"==S.dataType||!("srcId"in S))return"src"in S&&(w.imageUrl=S.src),"imageUrl"in S&&(w.imageUrl=S.imageUrl),L.UpdateImage(w,ne);if(S&&S.src&&S.srcId){if(oe=L.myViewer.getCustomDataByIndex(U)){oe.src=S.src,oe.srcId=S.srcId,e.isUndef(S.imgType)||(oe.imgType=S.imgType);var ue={};oe&&(ue.customData=oe,ue.metadata=ne,L._UpdateImageInner(Z,ue))}L.UpdateInfo(!1,!0)}return Z},P.prototype._UpdateImageInner=function(w,S){this.mydvs.DataControl.updateSync(w,S)},P.prototype.RemoveByIndex=function(w){var L,S=this;if(w<0||w>=S.GetHowManyImagesInBuffer())return e.Errors.IndexOutOfRange(S._stwain),!1;S.bShowImageEdit&&S._imageEditorInner&&1==S._imageEditorInner._IfChangedWithinTheEditor&&(S._imageEditorInner.iChangedIndex!=w?S._imageEditorInner.iChangedIndex>w&&S._imageEditorInner.iChangedIndex--:(S._imageEditorInner._IfChangedWithinTheEditor=!1,S._imageEditorInner.iChangedIndex=-1,S._imageEditorInner.OnCloseInstall()));var U=[];return U.push(w),(L=S.myViewer.removeSync(U))?S.UpdateInfo(!0):e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.RemoveAllImages=function(){var S,w=this;return w.bShowImageEdit&&w._imageEditorInner&&1==w._imageEditorInner._IfChangedWithinTheEditor&&(w._imageEditorInner._IfChangedWithinTheEditor=!1,w._imageEditorInner.iChangedIndex=-1,w._imageEditorInner.OnCloseInstall()),(S=w.myViewer.removeAllSync())?(w.UpdateInfo(),w.bShowImageEdit&&w._imageEditorInner&&w._imageEditorInner.updateMode()):e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S},P.prototype.SetCurrentIndex=function(w){var S=this,L=!1;return w<0||w>=S.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(S._stwain),T.Lib.hideMask(),!1):!/^(\d+)$/.test(w)||w<0?(e.Errors.MobileServer_InvalidIndex(S._stwain),T.Lib.hideMask(),!1):((L=S.myViewer.setCurrentIndex(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),S.UpdateInfo(!0,!0),L)},P.prototype.OnlySetCurrentIndex=function(w){var S=this,L=!1;return w<0||w>=S.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(S._stwain),!1):((L=S.myViewer.setCurrentIndex(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L)},P.prototype.GetCurrentIndex=function(){var w=this,S=-1;return w.GetHowManyImagesInBuffer()>0&&(S=w.myViewer.getCurrentIndex(),(e.isUndef(S)||S<0)&&e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode)),S},P.prototype.SetSelectedindexes=function(w){var L,S=this;return(L=S.myViewer.setSelectedIndexes(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.GetSelectedindexes=function(){return this.myViewer.getSelectedIndexes()},P.prototype.GoToPage=function(w){var S=this,L=!1;return w<0||w>=S.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(S._stwain),T.Lib.hideMask(),-1):!/^(\d+)$/.test(w)||w<0?(e.Errors.MobileServer_InvalidIndex(S._stwain),T.Lib.hideMask(),-1):((L=S.myViewer.gotoPage(w))<0&&e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),S.UpdateInfo(!0,!0),L)},P.prototype.SetSelectedImageArea=function(w,S,L,U){var ne,Z=this,oe=[];if(!Z._NouiNotSupport("setSelectedAreas"))return!1;var ue={};return ue.left=w,ue.top=S,ue.width=L-w,ue.height=U-S,oe.push(ue),(ne=Z.myViewer.setSelectedBoxes(oe,!1))||e.Errors.WebviewerError(Z._stwain,Z.mydvs.Error.errorMessage,Z.mydvs.Error.errorCode),ne},P.prototype.SetSelectionRectAspectRatio=function(w){return!!this._NouiNotSupport("selectionRectAspectRatio")&&(this.myViewer.selectionBoxAspectRatio=w,!0)},P.prototype.GetSelectionRectAspectRatio=function(){return this._NouiNotSupport("selectionRectAspectRatio")?this.myViewer.selectionBoxAspectRatio:""},P.prototype.ZoomIn=function(){var S,w=this;return(S=w.myViewer.zoomIn())||e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S},P.prototype.ZoomOut=function(){var S,w=this;return(S=w.myViewer.zoomOut())||e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S},P.prototype.SetZoom=function(w,S,L){var U=this,Z=!1;return!!U._NouiNotSupport("zoom")&&((Z=S&L?U.myViewer.zoomTo(w,S,L):U.myViewer.zoom=w)||e.Errors.WebviewerError(U._stwain,U.mydvs.Error.errorMessage,U.mydvs.Error.errorCode),Z)},P.prototype.GetZoom=function(){return this._NouiNotSupport("zoom")?this.myViewer.zoom:""},P.prototype.SetFitType=function(w){var S=this,L="window";if(!S._NouiNotSupport("fitType"))return!1;if(!e.isUndefined(w)){if("width"!=w&&"height"!=w&&"window"!=w)return e.Errors.InvalidValue(S._stwain),!1;L=w}return S.myViewer.fitType=L,!0},P.prototype.GetMouseShape=function(){var S;switch(this.GetCursor()){case"default":S=T.DWT.EnumDWT_MouseShape.Default;break;case"pointer":S=T.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":S=T.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":S=T.DWT.EnumDWT_MouseShape.Zoom;break;default:S=T.DWT.EnumDWT_MouseShape.Crosshair}return S},P.prototype.SetMouseShape=function(w){var L;switch(w){case T.DWT.EnumDWT_MouseShape.Default:L="default";break;case T.DWT.EnumDWT_MouseShape.Hand:L="pointer";break;case T.DWT.EnumDWT_MouseShape.Crosshair:L="crosshair";break;case T.DWT.EnumDWT_MouseShape.Zoom:L="zoom-in";break;default:L="crosshair"}return this.SetCursor(L),!0},P.prototype.SetImageMargin=function(w){return this.SetPageMargin(w)},P.prototype.GetImageMargin=function(){return this.GetPageMargin()},P.prototype.SetSelectionImageBorderColor=function(w){var L=w;return T.Lib.isNumber(L)&&(L=T.Lib.getColor(L)),-1==L.indexOf("1px solid")&&(L="1px solid "+L),this.SetSelectedPageBorder(L)},P.prototype.GetSelectedPageBorder=function(){return this._NouiNotSupport("selectedPageBorder")?this.myViewer.selectedPageBorder:""},P.prototype.SetSelectedPageBorder=function(w){var S=this;return!!S._NouiNotSupport("selectedPageBorder")&&(S.myViewer.selectedPageBorder=w,S._thumbnailViewer&&S.SetThumSelectedPageBorder(w),!0)},P.prototype.GetSelectedPageBackground=function(){return this._NouiNotSupport("selectedPageBackground")?this.myViewer.selectedPageBackground:""},P.prototype.SetSelectedPageBackgroundInner=function(w){return this.myViewer.selectedPageBackground=w,!0},P.prototype.SetSelectedPageBackground=function(w){var S=this;return!!S._NouiNotSupport("selectedPageBackground")&&(S.SetSelectedPageBackgroundInner(w),S._thumbnailViewer&&S.SetThumSelectedPageBackground(w),!0)},P.prototype.GetShowPageNumber=function(){return this._NouiNotSupport("showPageNumber")?this.myViewer.showPageNumber:""},P.prototype.SetShowPageNumberInner=function(w){return this.myViewer.showPageNumber=w,!0},P.prototype.SetShowPageNumber=function(w){var S=this;return!!S._NouiNotSupport("showPageNumber")&&(e.isBoolean(w)?(S.SetShowPageNumberInner(w),S._thumbnailViewer&&S.SetThumShowPageNumber(w),!0):(e.Errors.InvalidValue(S._stwain),!1))},P.prototype.GetAutoChangeIndex=function(){return this._NouiNotSupport("autoChangeIndex")?this.myViewer.autoChangeIndex:""},P.prototype.SetAutoChangeIndex=function(w){var S=this;return!!S._NouiNotSupport("autoChangeIndex")&&(e.isBoolean(w)?(S.myViewer.autoChangeIndex=w,!0):(e.Errors.InvalidValue(S._stwain),!1))},P.prototype.GetMultipleMode=function(){return this._NouiNotSupport("multipleMode")?this.myViewer.multipleMode:0},P.prototype.SetMultipleMode=function(w){var S=this;return!!S._NouiNotSupport("multipleMode")&&(S.myViewer.multipleMode=w,S._thumbnailViewer&&S.SetThumMultipleMode(w),!0)},P.prototype.SetHoverPageBackground=function(w){return this.myViewer.hoverPageBackground=w,!0},P.prototype.SetBackground=function(w){var S=this,L=w;return!!S._NouiNotSupport("background")&&(T.Lib.isNumber(L)&&(L=T.Lib.getColor(L)),S.myViewer.canvasBackground=L,S._thumbnailViewer&&S.SetThumBackground(L),!0)},P.prototype.GetBackground=function(){return this._NouiNotSupport("background")?this.myViewer.canvasBackground:""},P.prototype.SetViewerBorder=function(w){return this.SetBorder("1px solid"+w)},P.prototype.SetWidth=function(w){var S=this;return!!S._NouiNotSupport("width")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(w)||w<=0?(e.Errors.MobileServer_InvalidWidth(S._stwain),!1):(S.myViewer.width=w,!0))},P.prototype.GetWidth=function(){return this._NouiNotSupport("width")?this.myViewer.width:""},P.prototype.SetWidthInner=function(w,S){var L=this;if(S)L.myViewer.width=w;else if(e.isString(w)&&w.indexOf("%")>=0){var U=e.one("#"+L._stwain._containerID);L.myViewer.width=parseInt(e.css(U,"width")*parseInt(w)/100)}else L.myViewer.width=w;return!0},P.prototype.GetHeight=function(){return this._NouiNotSupport("height")?this.myViewer.height:""},P.prototype.SetHeight=function(w){var S=this;return!!S._NouiNotSupport("height")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(w)||w<=0?(e.Errors.MobileServer_InvalidHeight(S._stwain),!1):(S.myViewer.height=w,!0))},P.prototype.GetIdPostfix=function(){return this._NouiNotSupport("idPostfix")?this.myViewer.postfix:""},P.prototype.SetHeightInner=function(w,S){var L=this;if(S)L.myViewer.height=w;else if(e.isString(w)&&w.indexOf("%")>=0){var U=e.one("#"+L._stwain._containerID);L.myViewer.height=parseInt(e.css(U,"height")*parseInt(w)/100)}else L.myViewer.height=w;return!0},P.prototype.SwitchImage=function(w,S){var L=this,U=!1;return w<0||w>=L.GetHowManyImagesInBuffer()||S<0||S>=L.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(L._stwain),!1):((U=L.myViewer.switchPage(w,S))||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U)},P.prototype.MoveImage=function(w,S){var L=this,U=!1;return w<0||w>=L.GetHowManyImagesInBuffer()||S<0||S>=L.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(L._stwain),!1):((U=L.myViewer.movePage(w,S))||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U)},P.prototype.SetIfSinglePageMode=function(w){return!!this._NouiNotSupport("singlePageMode")&&(this.myViewer.displayMode=w?"single":"continuous",!0)},P.prototype.GetIfSinglePageMode=function(){return!(!this._NouiNotSupport("singlePageMode")||"continuous"==this.myViewer.displayMode)},P.prototype.SetAcceptDrop=function(w){var S=this;return!!S._NouiNotSupport("acceptDrop")&&(e.isBoolean(w)?(S.acceptDrop=w,!0):(e.Errors.InvalidValue(S._stwain),!1))},P.prototype.GetAcceptDrop=function(){return this._NouiNotSupport("acceptDrop")?this.acceptDrop:""},P.prototype.SetAllowSlide=function(w){var S=this;return!!S._NouiNotSupport("allowSlide")&&(e.isBoolean(w)?(S.myViewer.allowSlide=w,!0):(e.Errors.InvalidValue(S._stwain),!1))},P.prototype.GetAllowSlide=function(){return this._NouiNotSupport("allowSlide")?this.myViewer.allowSlide:""},P.prototype.SetViewMode=function(w,S){var L=this,U=!1,Z="vertical";return!!L._NouiNotSupport("setViewMode")&&(e.isNumber(w)&&e.isNumber(S)?(L._thumbnailViewer&&L._thumbnailViewer.hide(),L.clearSelectedAreas(),-1==w&&-1==S?(L.SetIfSinglePageMode(!0),S=0-S,w=0-w,U=!0):(S<0&&(Z="horizontal",S=0-S),w<0&&(w=0-w),L.myViewer.scrollDirection=Z,(U=L.myViewer.setViewMode(w,S))||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),L.SetIfSinglePageMode(!1),"zoom-in"==L.GetCursor()&&L.SetCursor("crosshair")),U):(e.Errors.InvalidValue(L._stwain),!1))},P.prototype.RemoveImageTag=function(w){var L,S=this,U=!1;return w<0||w>=S.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(S._stwain),!1):(L=S.GetUidByIndex(w))&&""!=L&&-1!=L?((U=S.mydvs.Tag.removePageTag(L))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),U):(e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),!1)},P.prototype.FilterImagesByTag=function(w,S,L){var U=this;if(e.isUndefined(w)||0==w.length){U._currentTag="";var ne=U.GetCurrentFileName();0==ne.length&&(ne=l),U.mydvs.File.openFile(ne)?(U.mydvs.Tag.setDefaultTag(""),e.isFunction(S)&&S()):(e.Errors.WebviewerError(U._stwain,U.mydvs.Error.errorMessage,U.mydvs.Error.errorCode),e.isFunction(L)&&L(U.mydvs.Error.errorCode,U.mydvs.Error.errorMessage))}else U._currentTag=w,U.mydvs.Tag.openTag(w)?e.isFunction(S)&&S():(e.Errors.WebviewerError(U._stwain,U.mydvs.Error.errorMessage,U.mydvs.Error.errorCode),e.isFunction(L)&&L(U.mydvs.Error.errorCode,U.mydvs.Error.errorMessage));return!0},P.prototype.ClearFilter=function(){var S,w=this;w._currentTag="";var L=w.GetCurrentFileName();return 0==L.length&&(L=l),(S=w.mydvs.File.openFile(L))||e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S},P.prototype.GetServerIdList=function(){var S,L,U,w=this,Z=[];if(S=w.myViewer.getCurrentPageUids())for(var ne=0;ne<S.length;ne++)(L=S[ne])&&(U=w.myViewer.getCustomDataByUid(L))&&Z.push(U.imageId);else e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode);return Z},P.prototype.GetTagContents=function(w){var L,S=this;return(L=w&&w.length>0?S.mydvs.Tag.getTagContents(w):S.myViewer.getCurrentPageUids())||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.SetDefaultTag=function(w){var L,S=this;return S._currentTag=w,S.mydvs.Tag.addTag(w),(L=S.mydvs.Tag.setDefaultTag(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.AddImageTag=function(w,S){var U,Z,L=this;L.mydvs.Tag.addTag(S);for(var ne=0;ne<w.length;ne++)(U=w[ne])>=0&&(Z=L.GetUidByIndex(U))&&""!=Z&&-1!=Z&&L.mydvs.Tag.addPageTag(Z,S);return!0},P.prototype.GetCurrentTag=function(){return this._currentTag},P.prototype.RenameTag=function(w,S){var U,L=this;return L._currentTag=S,(U=L.mydvs.Tag.renameTag(w,S))?L.mydvs.Tag.setDefaultTag(S):e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U},P.prototype.RemoveTag=function(w,S){var ne,L=this,U=!1,Z=!1;if((ne=L.mydvs.Tag.getCurrentTag())&&(Z=ne.name==w),e.isUndefined(S))U=L.mydvs.Tag.removeTag(w),Z&&L.ClearFilter();else{if(!e.isArray(S))return e.Errors.IndicesNotArray(L),!1;if(!L._stwain._checkIndices(S))return!1;var oe=[];e.each(S,function(ue){var X=L.GetUidByIndex(ue);-1!=X&&oe.push(X)}),e.each(oe,function(ue){if(!(U=L.mydvs.Tag.removePageTag(ue,w)))return!1})}return U||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U},P.prototype.GetTagList=function(){var S,U,Z,w=this,L=[];return(S=w.mydvs.Tag.getTagList())?e.each(S,function(ne){if(U=[],Z={},ne.uids)for(var oe=0;oe<ne.uids.length;oe++){var ue=ne.uids[oe];ue&&(Z=w.myViewer.getCustomDataByUid(ue))&&U.push(w._stwain.objImageIndexManager.convertServerIdToGuid(Z.imageId))}ne.imageIds=U,delete ne.uids,L.push(ne)}):L=[],L},P.prototype.GetTagListByIndex=function(w){var L=[],U=[],Z=this.GetUidByIndex(w);return Z&&((L=this.mydvs.Tag.getTagList())?e.each(L,function(ne){if(ne.uids)for(var oe=0;oe<ne.uids.length;oe++){var ue=ne.uids[oe];ue&&ue==Z&&U.push(ne.name)}}):U=[]),U},P.prototype.CreateFile=function(w){var S=this,L=!1;return w&&(S.mydvs.File.createFile(w)?80032==S.mydvs.Error.errorCode?e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode):L=!0:e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode)),L},P.prototype.OpenFile=function(w){var S=this,L=!1;return S.mydvs.File.openFile(w)?(L=!0,S.currentFileName=w,S._stwain.Template&&S._stwain.Template._documentTemplate&&S._stwain.Template._documentTemplate.setTemplateTitle(S.currentFileName)):e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.GetCurrentFileName=function(){var S,w=this,L="";return(S=w.mydvs.File.getCurrentFileList())&&e.each(S,function(U){U.name==w.currentFileName&&(L=w.currentFileName)}),L},P.prototype.GetDefaultFileName=function(){return l},P.prototype.RemoveFile=function(w){var L,S=this;return(L=S.mydvs.File.removeFile(w))?S.currentFileName==w&&(S.currentFileName=l,S._stwain.Template&&S._stwain.Template._documentTemplate&&S._stwain.Template._documentTemplate.setTemplateTitle("")):e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.GetFileInfoList=function(){var S,U,Z,ne,w=this,L=[];return(S=w.mydvs.File.getCurrentFileList())?e.each(S,function(oe){if(U=[],Z={},ne={},oe.chs)for(var ue=0;ue<oe.chs.length;ue++){var X=oe.chs[ue];X&&(Z=w.myViewer.getCustomDataByUid(X))&&U.push(w._stwain.objImageIndexManager.convertServerIdToGuid(Z.imageId))}ne.imageIds=U,ne.name=oe.name,L.push(ne)}):L=[],L},P.prototype.GetImageIdsByFileName=function(w){var L,Z,S=this,U=[];return(L=S.mydvs.File.getCurrentFileList())?e.each(L,function(ne){if(w==ne.name){if(Z={},ne.chs)for(var oe=0;oe<ne.chs.length;oe++){var ue=ne.chs[oe];ue&&(Z=S.myViewer.getCustomDataByUid(ue))&&U.push(Z.imageId)}return!1}}):U=[],U},P.prototype.ifFileNameExist=function(w){var L,U=!1;return(L=this.mydvs.File.getCurrentFileList())&&(0==L.length?w==l&&(U=!0):(e.each(L,function(Z){if(Z.name==w)return U=!0,!0}),0==U&&w==l&&(U=!0))),U},P.prototype.OverlayRectangle=function(w,S,L,U,Z,ne,oe){var ue=this,X=!1,pe=ne;return w<0||w>=ue.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(ue._stwain),!1):(e.isNumber(pe)&&(pe=e.getColor(pe)),(X=ue.myViewer.overlayRectangle(w,S,L,U-S,Z-L,pe,oe))||e.Errors.WebviewerError(ue._stwain,ue.mydvs.Error.errorMessage,ue.mydvs.Error.errorCode),X)},P.prototype.SetOperationMode=function(w){this.myViewer.operationMode=w},P.prototype.GetIfShowVideoContainer=function(){return this.myViewer.showVideoContainer},P.prototype.ShowVideoContainer=function(w){var S=this;return S.myViewer.showVideoContainer==w||(S._thumbnailViewer&&(w?(S.OldShowThumbnail=S.myThumbnailViewer.showThumbnail,S.myThumbnailViewer.showThumbnail=!1):S.myThumbnailViewer.showThumbnail=S.OldShowThumbnail),S.myViewer.showVideoContainer=w),!0},P.prototype.UpdateVideoContainer=function(w){var L,S=this;return(L=S.myViewer.updateVideoContainer(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.GetImageData=function(w){return this.mydvs.DataControl.getData(w)},P.prototype.UpdateImageData=function(w,S){return this.mydvs.DataControl.updateData(w,S)},P.prototype.GetMinPageData=function(w){return this._imageEditorInner?this._imageEditorInner.myImageEditor.getMinPageData():NaN},P.prototype.SetLogLevel=function(w){this.mydvs.Log.setLogLevel(w)},P.prototype.SetLogFunc=function(w){this.mydvs.Log.setLogFunc(w)},P.prototype.SetThumLocation=function(w){var S=this;if(!S._NouiNotSupport("ThumbnailViewer.location"))return!1;if(S.myThumbnailViewer){switch(w){case"left":S.myThumbnailViewer.location="horizontal",S.myThumbnailViewer.sequence=-1;break;case"right":S.myThumbnailViewer.location="horizontal",S.myThumbnailViewer.sequence=1;break;case"top":S.myThumbnailViewer.location="vertical",S.myThumbnailViewer.sequence=-1;break;case"bottom":S.myThumbnailViewer.location="vertical",S.myThumbnailViewer.sequence=1;break;default:S.myThumbnailViewer.location="horizontal",S.myThumbnailViewer.sequence=-1}return!0}return S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1},P.prototype.GetThumLocation=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.location")&&(w.myThumbnailViewer?"vertical"==w.myThumbnailViewer.location?w.myThumbnailViewer.sequence>0?"bottom":"top":w.myThumbnailViewer.sequence>0?"right":"left":(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumSize=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.size")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(w)||w<0?(e.Errors.InvalidValue(S._stwain),!1):S.myThumbnailViewer?(S.myThumbnailViewer.size=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumSize=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.size")&&(w.myThumbnailViewer?w.myThumbnailViewer.size:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),0))},P.prototype.SetThumScrollDirection=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.scrollDirection")&&("horizontal"!=w&&(w="vertical"),S.myThumbnailViewer?(S.myThumbnailViewer.scrollDirection=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumScrollDirection=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.scrollDirection")&&(w.myThumbnailViewer?w.myThumbnailViewer.scrollDirection:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumShowPageNumber=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.showPageNumber")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.showPageNumber=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumShowPageNumber=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.showPageNumber")&&(w.myThumbnailViewer?w.myThumbnailViewer.showPageNumber:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),-1))},P.prototype.SetThumMultipleMode=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.showCheckbox")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.multipleMode=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumMultipleMode=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(w.myThumbnailViewer?w.myThumbnailViewer.multipleMode:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),-1))},P.prototype.SetThumMargin=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.margin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(w)||w<0?(e.Errors.InvalidValue(S._stwain),!1):S.myThumbnailViewer?(S.myThumbnailViewer.pageMargin=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumMargin=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.margin")&&(w.myThumbnailViewer?w.myThumbnailViewer.columns==w.myThumbnailViewer.rows&&1==w.myThumbnailViewer.rows?0:w.myThumbnailViewer.pageMargin:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),0))},P.prototype.SetThumBorder=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.border")&&(S.myThumbnailViewer?(S.myThumbnailViewer.border=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumBorder=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.border")&&(w.myThumbnailViewer?w.myThumbnailViewer.border:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumBackground=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.background")&&(S.myThumbnailViewer?(S.myThumbnailViewer.background=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumBackground=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.background")&&(w.myThumbnailViewer?w.myThumbnailViewer.background:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumPageBackground=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.pageBackground")&&(S.myThumbnailViewer?(S.myThumbnailViewer.pageBackground=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumPageBackground=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.pageBackground")&&(w.myThumbnailViewer?w.myThumbnailViewer.pageBackground:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumPageBorder=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.pageBorder")&&(S.myThumbnailViewer?(S.myThumbnailViewer.pageBorder=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumPageBorder=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.pageBorder")&&(w.myThumbnailViewer?w.myThumbnailViewer.pageBorder:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumHoverBackground=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(S.myThumbnailViewer?(S.myThumbnailViewer.hoverPageBackground=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),""))},P.prototype.GetThumHoverBackground=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(w.myThumbnailViewer?w.myThumbnailViewer.hoverPageBackground:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumHoverBorder=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(S.myThumbnailViewer?(S.myThumbnailViewer.hoverPageBorder=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumHoverBorder=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(w.myThumbnailViewer?w.myThumbnailViewer.hoverPageBorder:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumPlaceholderBackground=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(S.myThumbnailViewer?(S.myThumbnailViewer.placeholderBackground=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumPlaceholderBackground=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(w.myThumbnailViewer?w.myThumbnailViewer.placeholderBackground:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumSelectedPageBorder=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(S.myThumbnailViewer?(S.myThumbnailViewer.selectedPageBorder=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumSelectedPageBorder=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(w.myThumbnailViewer?w.myThumbnailViewer.selectedPageBorder:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumSelectedPageBackground=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(S.myThumbnailViewer?(S.myThumbnailViewer.selectedPageBackground=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumSelectedPageBackground=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(w.myThumbnailViewer?w.myThumbnailViewer.selectedPageBackground:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumAllowKeyboardControl=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.allowKeyboardControl=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumAllowKeyboardControl=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(w.myThumbnailViewer?w.myThumbnailViewer.allowKeyboardControl:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),!1))},P.prototype.SetThumAllowDrag=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.allowDrag")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.allowPageDragging=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumAllowDrag=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.allowPageDragging")&&(w.myThumbnailViewer?w.myThumbnailViewer.allowPageDragging:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),!1))},P.prototype.SetThumAllowResize=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.allowResizing")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.allowResizing=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumAllowResize=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.allowResizing")&&(w.myThumbnailViewer?w.myThumbnailViewer.allowResizing:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),!1))},P.prototype.SetThumAutoChangeIndex=function(w){var S=this;return!!S._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(S.myThumbnailViewer?(S.myThumbnailViewer.autoChangeIndex=w,!0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),!1))},P.prototype.GetThumAutoChangeIndex=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(w.myThumbnailViewer?w.myThumbnailViewer.autoChangeIndex:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),""))},P.prototype.SetThumMultipleMode=function(w){var S=this;return!(!S._NouiNotSupport("ThumbnailViewer.multipleMode")||(e.isBoolean(w)?S.myThumbnailViewer?(S.myThumbnailViewer.multipleMode=w,0):(S.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(S._stwain):e.Errors.ThumbnailViewerNotExist(S._stwain),1):(e.Errors.InvalidValue(S._stwain),1)))},P.prototype.GetThumMultipleMode=function(){var w=this;return!!w._NouiNotSupport("ThumbnailViewer.multipleMode")&&(w.myThumbnailViewer?w.myThumbnailViewer.multipleMode:(w.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(w._stwain):e.Errors.ThumbnailViewerNotExist(w._stwain),-1))},P.prototype.render=function(){return!!this._NouiNotSupport("render")&&this.myViewer.render()},P.prototype.getUISettings=function(){if(!this._NouiNotSupport("getUISettings"))return!1;var S=T.Lib.clone(this.myViewer.uiConfig);return delete S.tag,delete S.tree,delete S.cropStyle,delete S.thumbnail,S},P.prototype.resetUISettings=function(){var L={};return this.resetUISettingsInner(!0)&&(L=this.getUISettings()),L},P.prototype.resetUISettingsInner=function(w,S,L){var Z,U=this;if(!U._NouiNotSupport("resetUISetting"))return!1;var oe=C;w?(oe.width=U.initWidth,oe.height=U.initHeight):(oe.width=e.isUndefined(S)?U.initWidth:S,oe.height=e.isUndefined(L)?U.initHeight:L);var ue=U.myViewer.showViewer;return(Z=U.myViewer.updateUISetting(oe))?(ue||U.hide(),U.SetFitType("window"),U.SetIfSinglePageMode(!1),U._stwain._isPC()?U.SetOperationMode(1):U.SetOperationMode(0),U.OnlySetCurrentIndex(U.GetCurrentIndex())):e.Errors.WebviewerError(U._stwain,U.mydvs.Error.errorMessage,U.mydvs.Error.errorCode),Z},P.prototype.updateUISettings=function(w){var S=this,U={};if(!S._NouiNotSupport("updateUISettings"))return!1;var Z=S.myViewer.showViewer;return S.myViewer.updateUISetting(w)?(Z||S.hide(),U=S.getUISettings(),S.SetOperationMode("crosshair"==U.canvasConfig.canvasMouseShape?1:0)):e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),U},P.prototype.bindCamera=function(){var S,w=this;if(!T.CameraViewer)return e.Errors.CameraRequired(w._stwain),!1;if(S=w.mydvs.bindCamera(T.CameraViewer,T.ViewUi)){if(w.mydvs){var L=e.html5.STwain;w.mydvs.bindAreaDetectFunction&&w.mydvs.bindAreaDetectFunction(L._areaDetectCallback),w.mydvs.bindPerspectiveFunction&&w.mydvs.bindPerspectiveFunction(L._perspectiveCallback),w.mydvs.bindFilterHandleList&&w.mydvs.bindFilterHandleList([{label:"grayscale",handler:L._convertToGrayScaleFilterCallback},{label:"blackAndWhite",handler:L._convertToBWScaleFilterCallback},{label:"saveToner",handler:L._saveTonerFilterCallback},{label:"clean",handler:L._cleanFilterCallback},{label:"brightening",handler:L._brightenFilterCallback}]),w.mydvs.bindImageDataToBlobHandle&&w.mydvs.bindImageDataToBlobHandle(L._imageDataToBlob),w.mydvs.bindFreeHandle&&w.mydvs.bindFreeHandle(L._freeCallback)}}else e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode);return S},P.prototype.showVideo=function(w,S,L,U){var ne,Z=this;if(!Z._NouiNotSupport("showVideo"))return!1;var oe={scannerViewer:{devicedId:w,fullScreen:U,enableBorderDetection:!0,resolution:{visibility:!1},autoScan:{visibility:!1},autoDetect:{visibility:!0,enableAutoDetect:!1},continuousScan:{visibility:!1,enableContinuousScan:!1},switchCamera:{visibility:!1},loadLocalFile:{visibility:!1}},filterViewer:{rotateLeft:{visibility:!1},filter:{visibility:!1,valueList:[]},exitDocumentScanAfterSave:!1},cropViewer:{visibility:!0,rotateLeft:{visibility:!1},rotateRight:{visibility:!1},autoDetectBorder:{visibility:!1}}};return S&&(oe.scannerViewer.resolution.valueList=[],oe.scannerViewer.resolution.valueList.push({label:"resolution",value:S}),oe.scannerViewer.resolution.defaultValue=S),L&&"document"==L?oe.scannerViewer.enableBorderDetection=!0:(oe.scannerViewer.enableBorderDetection=!1,oe.scannerViewer.autoDetect.visibility=!1,oe.cropViewer.visibility=!1),e.isUndefined(Z.mydvs.camera)&&Z.bindCamera(),(ne=Z.showVideoEx(oe))||e.Errors.WebviewerError(Z._stwain,Z.mydvs.Error.errorMessage,Z.mydvs.Error.errorCode),ne},P.prototype.getDefaultFilterValueList=function(w){return R.filterViewer.filter.valueList},P.prototype.showVideoEx=function(w){var U=T.Lib.clone(w);return w&&w.element&&(U.element=w.element),this.showVideoInner(U)},P.prototype.showVideoInner=function(w){var L,S=this;if(!S._NouiNotSupport("scanDocument"))return!1;if(T.navInfo.bMobile&&0==S.addCSSForShowVideo){var U=document.createElement("style"),Z="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";U.type="text/css";try{U.appendChild(document.createTextNode(Z))}catch(Ge){U.styleSheet.cssText=Z}document.body.appendChild(U),S.addCSSForShowVideo=!0}if(S._stwain.Template&&S._stwain.Template._documentTemplate&&S._stwain.Template._documentTemplate.setTemplateTitle(S.currentFileName),w){if(w.scannerViewer){if(e.isUndefined(w.scannerViewer.fullScreen)&&(w.scannerViewer.fullScreen=R.scannerViewer.fullScreen),e.isUndefined(w.scannerViewer.enableBorderDetection)&&(w.scannerViewer.enableBorderDetection=R.scannerViewer.enableBorderDetection),e.isUndefined(w.scannerViewer.polygonStyle)?w.scannerViewer.polygonStyle=R.scannerViewer.polygonStyle:(e.isUndefined(w.scannerViewer.polygonStyle.stroke)&&(w.scannerViewer.polygonStyle.stroke=R.scannerViewer.polygonStyle.stroke),e.isUndefined(w.scannerViewer.polygonStyle.strokeWidth)&&(w.scannerViewer.polygonStyle.strokeWidth=R.scannerViewer.polygonStyle.strokeWidth),e.isUndefined(w.scannerViewer.polygonStyle.dash)&&(w.scannerViewer.polygonStyle.dash=R.scannerViewer.polygonStyle.dash)),e.isUndefined(w.scannerViewer.resolution)?w.scannerViewer.resolution=R.scannerViewer.resolution:(e.isUndefined(w.scannerViewer.resolution.visibility)&&(w.scannerViewer.resolution.visibility=R.scannerViewer.resolution.visibility),e.isUndefined(w.scannerViewer.resolution.valueList)&&(w.scannerViewer.resolution.valueList=R.scannerViewer.resolution.valueList),e.isUndefined(w.scannerViewer.resolution.defaultValue)&&w.scannerViewer.resolution.valueList&&w.scannerViewer.resolution.valueList.length>0&&(w.scannerViewer.resolution.defaultValue=w.scannerViewer.resolution.valueList[0].value)),e.isUndefined(w.scannerViewer.autoScan)?w.scannerViewer.autoScan=R.scannerViewer.autoScan:(e.isUndefined(w.scannerViewer.autoScan.visibility)&&(w.scannerViewer.autoScan.visibility=R.scannerViewer.autoScan.visibility),e.isUndefined(w.scannerViewer.autoScan.enableAutoScan)&&(w.scannerViewer.autoScan.enableAutoScan=R.scannerViewer.autoScan.enableAutoScan)),e.isUndefined(w.scannerViewer.autoDetect))w.scannerViewer.autoDetect=R.scannerViewer.autoDetect;else{if(e.isUndefined(w.scannerViewer.autoDetect.visibility)&&(w.scannerViewer.autoDetect.visibility=R.scannerViewer.autoDetect.visibility),e.isUndefined(w.scannerViewer.autoDetect.enableAutoDetect)&&(w.scannerViewer.autoDetect.enableAutoDetect=R.scannerViewer.autoDetect.enableAutoDetect),e.isUndefined(w.scannerViewer.autoDetect.fpsLimit)&&(w.scannerViewer.autoDetect.fpsLimit=R.scannerViewer.autoDetect.fpsLimit),e.isUndefined(w.scannerViewer.autoDetect.acceptedPolygonConfidence))w.scannerViewer.autoDetect.acceptedPolygonConfidence=R.scannerViewer.autoDetect.acceptedPolygonConfidence;else{var ne=parseInt(w.scannerViewer.autoDetect.acceptedPolygonConfidence);w.scannerViewer.autoDetect.acceptedPolygonConfidence=ne>=0?ne:R.scannerViewer.autoDetect.acceptedPolygonConfidence}if(e.isUndefined(w.scannerViewer.autoDetect.acceptedBlurryScore))w.scannerViewer.autoDetect.acceptedBlurryScore=R.scannerViewer.autoDetect.acceptedBlurryScore;else{var oe=parseInt(w.scannerViewer.autoDetect.acceptedBlurryScore);w.scannerViewer.autoDetect.acceptedBlurryScore=oe>=0?oe:R.scannerViewer.autoDetect.acceptedBlurryScore}if(e.isUndefined(w.scannerViewer.autoDetect.autoCaptureDelay))w.scannerViewer.autoDetect.autoCaptureDelay=R.scannerViewer.autoDetect.autoCaptureDelay;else{var ue=parseInt(w.scannerViewer.autoDetect.autoCaptureDelay);w.scannerViewer.autoDetect.autoCaptureDelay=ue>=0?ue:R.scannerViewer.autoDetect.autoCaptureDelay}}e.isUndefined(w.scannerViewer.continuousScan)?w.scannerViewer.continuousScan=R.scannerViewer.continuousScan:(e.isUndefined(w.scannerViewer.continuousScan.visibility)&&(w.scannerViewer.continuousScan.visibility=R.scannerViewer.continuousScan.visibility),e.isUndefined(w.scannerViewer.continuousScan.enableContinuousScan)&&(w.scannerViewer.continuousScan.enableContinuousScan=R.scannerViewer.continuousScan.enableContinuousScan)),e.isUndefined(w.scannerViewer.switchCamera)?w.scannerViewer.switchCamera=R.scannerViewer.switchCamera:e.isUndefined(w.scannerViewer.switchCamera.visibility)&&(w.scannerViewer.switchCamera.visibility=R.scannerViewer.switchCamera.visibility),e.isUndefined(w.scannerViewer.loadLocalFile)?w.scannerViewer.loadLocalFile=R.scannerViewer.loadLocalFile:e.isUndefined(w.scannerViewer.loadLocalFile.visibility)&&(w.scannerViewer.loadLocalFile.visibility=R.scannerViewer.loadLocalFile.visibility)}else w.scannerViewer=R.scannerViewer;if(w.filterViewer)if(e.isUndefined(w.filterViewer.visibility)&&(w.filterViewer.visibility=R.filterViewer.visibility),e.isUndefined(w.filterViewer.insert)?w.filterViewer.insert=R.filterViewer.insert:(e.isUndefined(w.filterViewer.insert.visibility)&&(w.filterViewer.insert.visibility=R.filterViewer.insert.visibility),e.isUndefined(w.filterViewer.insert.position)&&(w.filterViewer.insert.position=R.filterViewer.insert.position)),e.isUndefined(w.filterViewer.remove)?w.filterViewer.remove=R.filterViewer.remove:e.isUndefined(w.filterViewer.remove.visibility)&&(w.filterViewer.remove.visibility=R.filterViewer.remove.visibility),e.isUndefined(w.filterViewer.rotateLeft)?w.filterViewer.rotateLeft=R.filterViewer.rotateLeft:e.isUndefined(w.filterViewer.rotateLeft.visibility)&&(w.filterViewer.rotateLeft.visibility=R.filterViewer.rotateLeft.visibility),e.isUndefined(w.filterViewer.exitDocumentScanAfterSave)&&(w.filterViewer.exitDocumentScanAfterSave=R.filterViewer.exitDocumentScanAfterSave),e.isUndefined(w.filterViewer.filter))w.filterViewer.filter=R.filterViewer.filter;else{if(e.isUndefined(w.filterViewer.filter.visibility)&&(w.filterViewer.filter.visibility=R.filterViewer.filter.visibility),e.isUndefined(w.filterViewer.filter.valueList))w.filterViewer.filter.valueList=R.filterViewer.filter.valueList;else{for(var X=[],pe=0;pe<w.filterViewer.filter.valueList.length;pe++){for(var B=!1,K=w.filterViewer.filter.valueList[pe].value,G=0;G<R.filterViewer.filter.valueList.length;G++)if(K==R.filterViewer.filter.valueList[G].value){B=!0;break}B&&(e.isUndefined(w.filterViewer.filter.valueList[pe].option)&&(w.filterViewer.filter.valueList[pe].option=R.filterViewer.filter.valueList[0].option),X.push(w.filterViewer.filter.valueList[pe]))}w.filterViewer.filter.valueList=X}if(e.isUndefined(w.filterViewer.filter.defaultValue))w.filterViewer.filter.defaultValue=R.filterViewer.filter.defaultValue;else{var ie=!1,be=w.filterViewer.filter.defaultValue;for(pe=0;pe<w.filterViewer.filter.valueList.length;pe++)if(be==w.filterViewer.filter.valueList[pe].value){ie=!0;break}0==ie&&(w.filterViewer.filter.defaultValue=R.filterViewer.filter.defaultValue)}}else w.filterViewer=R.filterViewer;w.cropViewer?(e.isUndefined(w.cropViewer.visibility)&&(w.cropViewer.visibility=R.cropViewer.visibility),e.isUndefined(w.cropViewer.polygonStyle)?w.cropViewer.polygonStyle=R.cropViewer.polygonStyle:(e.isUndefined(w.cropViewer.polygonStyle.stroke)&&(w.cropViewer.polygonStyle.stroke=R.cropViewer.polygonStyle.stroke),e.isUndefined(w.cropViewer.polygonStyle.strokeWidth)&&(w.cropViewer.polygonStyle.strokeWidth=R.cropViewer.polygonStyle.strokeWidth),e.isUndefined(w.cropViewer.polygonStyle.dash)&&(w.cropViewer.polygonStyle.dash=R.cropViewer.polygonStyle.dash)),e.isUndefined(w.cropViewer.rotateLeft)?w.cropViewer.rotateLeft=R.cropViewer.rotateLeft:e.isUndefined(w.cropViewer.rotateLeft.visibility)&&(w.cropViewer.rotateLeft.visibility=R.cropViewer.rotateLeft.visibility),e.isUndefined(w.cropViewer.rotateRight)?w.cropViewer.rotateRight=R.cropViewer.rotateRight:e.isUndefined(w.cropViewer.rotateRight.visibility)&&(w.cropViewer.rotateRight.visibility=R.cropViewer.rotateRight.visibility),e.isUndefined(w.cropViewer.autoDetectBorder)?w.cropViewer.autoDetectBorder=R.cropViewer.autoDetectBorder:e.isUndefined(w.cropViewer.autoDetectBorder.visibility)&&(w.cropViewer.autoDetectBorder.visibility=R.cropViewer.autoDetectBorder.visibility)):w.cropViewer=R.cropViewer}else w=R;return e.isUndefined(w.scannerViewer.maxDocuments)&&(w.scannerViewer.maxDocuments=S._stwain.MaxImagesInBuffer-S.GetHowManyImagesInBuffer()),S._documentScanConfiguration=w,e.isUndefined(S.mydvs.camera)&&S.bindCamera(),0==S.GetCurrentFileName().length&&(S.CreateFile(l),S.OpenFile(l)),(L=S.mydvs.showVideo(w))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L},P.prototype.closeVideo=function(){var S,w=this;return!!w._NouiNotSupport("closeVideo")&&((S=w.mydvs.closeVideo())||e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S)},P.prototype.camera_on=function(w,S){if(w){if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(this._stwain);this.mydvs.on(w,S)}},P.prototype.camera_off=function(w,S){var L=this;if(w)if(e.isUndefined(S))L.mydvs.off(w),_.indexOf(w)>=0&&L.mydvs.on(w,function(U,Z){e.isFunction(L[w])&&L[w](U,Z)});else{if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(L._stwain);L.mydvs.off(w,S)}},P.prototype.showEditPage=function(w,S){var U,L=this;return!!L._NouiNotSupport("showEditPage")&&(e.isUndefined(L.mydvs.camera)&&L.bindCamera(),(U=L.mydvs.camera.showEditPage(w,S))||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U)},P.prototype.GetBorder=function(){return this._NouiNotSupport("border")?this.myViewer.outerBorder:""},P.prototype.SetBorder=function(w){return!!this._NouiNotSupport("border")&&(this.myViewer.outerBorder=w,!0)},P.prototype.GetInnerBorder=function(){return this._NouiNotSupport("innerBorder")?this.myViewer.canvasBorder:""},P.prototype.SetInnerBorder=function(w){return!!this._NouiNotSupport("innerBorder")&&(this.myViewer.canvasBorder=w,!0)},P.prototype.GetSelectedAreaBorderColor=function(){return this._NouiNotSupport("selectedAreaBorderColor")?this.myViewer.selectedBoxLineColor:""},P.prototype.SetSelectedAreaBorderColor=function(w){return!!this._NouiNotSupport("selectedAreaBorderColor")&&(this.myViewer.selectedBoxLineColor=w,!0)},P.prototype.GetCursor=function(){return this._NouiNotSupport("cursor")?this.myViewer.canvasMouseShape:""},P.prototype.SetCursor=function(w){var S=this;if(!S._NouiNotSupport("cursor"))return!1;if("zoom-in"==w&&!S.GetIfSinglePageMode())return e.Errors.CursorInvalidMode(S._stwain),!1;var L="default";switch(w){case"default":L="default",S.SetOperationMode(0);break;case"pointer":L="pointer",S.SetOperationMode(0);break;case"crosshair":L="crosshair",S.SetOperationMode(1);break;case"zoom-in":L="zoom-in",S.SetOperationMode(2);break;default:L="crosshair",S.SetOperationMode(1)}return S.myViewer.canvasMouseShape=L,!0},P.prototype.GetIfAutoScroll=function(){return this._NouiNotSupport("ifAutoScroll")?this.myViewer.showLatestPage:""},P.prototype.SetIfAutoScroll=function(w){var S=this;return!!S._NouiNotSupport("ifAutoScroll")&&(e.isBoolean(w)?(S.myViewer.showLatestPage=w,S._imageEditorInner&&S._imageEditorInner.SetIfAutoScroll(),!0):(e.Errors.InvalidValue(S._stwain),!1))},P.prototype.GetPageMargin=function(){return this._NouiNotSupport("pageMargin")?this.myViewer.pageMargin:0},P.prototype.SetPageMargin=function(w){var S=this;return!!S._NouiNotSupport("pageMargin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(w)||w<0?(e.Errors.InvalidValue(S._stwain),!1):(S.myViewer.pageMargin=w,!0))},P.prototype.setButtonClass=function(w,S){var U,L=this;return!!L._NouiNotSupport("setButtonClass")&&((U=L.myViewer.setButtonClass(w,S))||e.Errors.WebviewerError(L._stwain,L.mydvs.Error.errorMessage,L.mydvs.Error.errorCode),U)},P.prototype.clearSelectedAreas=function(){var S,w=this;return!!w._NouiNotSupport("clearSelectedAreas")&&(w.GetHowManyImagesInBuffer()<=0||((S=w.myViewer.clearSelectedBoxes())||e.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),S))},P.prototype.setSelectedAreas=function(w){var L,Z,S=this,U=[];if(!S._NouiNotSupport("setSelectedAreas"))return!1;if(e.isUndefined(w)||0==w.length)return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(S._stwain),!1;if(w.length&&w.length>0){for(var ne=0;ne<w.length;ne++)if(Z={},!(e.isUndefined(w[ne])||e.isUndefined(w[ne].left)||e.isUndefined(w[ne].top)||e.isUndefined(w[ne].right)||e.isUndefined(w[ne].bottom))){if(w[ne].left<0||w[ne].top<0||w[ne].right<0||w[ne].bottom<0||(Z.left=w[ne].left,Z.top=w[ne].top,w[ne].right-w[ne].left<0||w[ne].bottom-w[ne].top<0))continue;Z.width=w[ne].right-w[ne].left,Z.height=w[ne].bottom-w[ne].top,U.push(Z)}}else if(Z={},!(e.isUndefined(w)||e.isUndefined(w.left)||e.isUndefined(w.top)||e.isUndefined(w.right)||e.isUndefined(w.bottom))){if(w.left<0||w.top<0||w.right<0||w.bottom<0||(Z.left=w.left,Z.top=w.top,w.right-w.left<0||w.bottom-w.top<0))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(S._stwain),!1;Z.width=w.right-w.left,Z.height=w.bottom-w.top,U.push(Z)}return 0==U.length?(e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(S._stwain),!1):((L=S.myViewer.setSelectedBoxes(U,!0))||e.Errors.WebviewerError(S._stwain,S.mydvs.Error.errorMessage,S.mydvs.Error.errorCode),L)},P.prototype._NouiNotSupport=function(w){var S=this;return S._stwain._resetErr(),!(!S._stwain._isValid()||S._stwain._isNoViewer()&&(S._stwain._nouiNotSupport(w),1))},P.prototype.pageChange=function(w){var L,S=this,U=S.GetHowManyImagesInBuffer();if(e.log("OnPagination"),U<=0)return e.Errors.NoImage(S._stwain),void x.output(S,"No image in Buffer");1!=U&&(!/^\d+$/.test(w)||w<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((L=parseInt(w)-1)<0?L=0:L>=U&&(L=U-1),L!=S.GetCurrentIndex()&&S.go(L)))},P.prototype.first=function(){var w=this,L=w.GetHowManyImagesInBuffer();return w._NouiNotSupport("first")?L<=0?(e.Errors.NoImage(w._stwain),x.output(w,"No image in Buffer"),-1):(1==L||w.go(0),0):-1},P.prototype.last=function(){var S,w=this,L=w.GetHowManyImagesInBuffer();return w._NouiNotSupport("last")?L<=0?(e.Errors.NoImage(w._stwain),x.output(w,"No image in Buffer"),-1):1==L?0:(w.go(S=L-1),S):-1},P.prototype.previous=function(){var S,w=this,L=w.GetHowManyImagesInBuffer();return w._NouiNotSupport("previous")?L<=0?(e.Errors.NoImage(w._stwain),x.output(w,"No image in Buffer"),-1):1==L?0:((S=w.GetCurrentIndex()-1)<0&&(S=0),w.go(S),S):-1},P.prototype.next=function(){var S,w=this,L=w.GetHowManyImagesInBuffer();return w._NouiNotSupport("next")?L<=0?(e.Errors.NoImage(w._stwain),x.output(w,"No image in Buffer"),-1):1==L?0:((S=w.GetCurrentIndex()+1)>=L&&(S=L-1),w.go(S),S):-1},P.prototype.go=function(w){var S=this,U=w;return S._NouiNotSupport("go")?S.GetHowManyImagesInBuffer()<=0?(e.Errors.NoImage(S._stwain),x.output(S,"No image in Buffer"),-1):(S._imageEditorInner?S._imageEditorInner.go(w):U=S.__goInner(w),U):-1},P.prototype.__goInner=function(w){var L;if(void 0!==w){if(-1==w)return e.Errors.IndexOutOfRange(this._stwain),-1;T.Lib.showMask(),L=this.GoToPage(w)}return L},P.prototype.topPageChanged=function(w,S){this._UIView.__fireEvent("onTopImageInTheViewChanged",{index:w,bByScrollBar:S})},P.prototype.bufferChanged=function(w){for(var L,S=this,U=[],Z=-1,ne=[],oe=0;oe<S.GetHowManyImagesInBuffer();oe++)(L=S.GetCustomDataByIndex(oe))&&L.imageId&&U.push(S._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId));if(U.length>0&&(w.imageIds=U),w.currentUid){var ue=S.GetIndexByUid(w.currentUid);if(ue>=0&&(L=S.GetCustomDataByIndex(ue))&&L.imageId){Z=S._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId);var X=S._stwain._ImgManager._UIView.GetDataImageControl(L.imageId);-1==X.uuid&&(X.uuid=w.currentUid)}}if(w.currentId=Z,w.selectedUids)for(var pe=0;pe<w.selectedUids.length;pe++)if(w.selectedUids[pe]){var K=S.GetIndexByUid(w.selectedUids[pe]);if(K>=0&&(L=S.GetCustomDataByIndex(K))&&L.imageId){ne.push(S._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId));var G=S._stwain._ImgManager._UIView.GetDataImageControl(L.imageId);-1==G.uuid&&(G.uuid=w.currentUid)}}w.selectedIds=ne,delete w.uids,delete w.currentUid,delete w.selectedUids,S._UIView.__fireEvent("onBufferChanged",w)},P.prototype.click=function(w){var S=this;S.UpdateInfo(!0,!1,!0),S._UIView.__fireEvent("onMouseClick",{e:w,x:w.imageX,y:w.imageY,index:S.GetCurrentIndex()})},P.prototype.rightclick=function(w){this._UIView.__fireEvent("onMouseRightClick",{e:w,x:w.imageX,y:w.imageY,index:this.GetCurrentIndex()})},P.prototype.dblclick=function(w){this._UIView.__fireEvent("onMouseDoubleClick",{e:w,x:w.imageX,y:w.imageY,index:this.GetCurrentIndex()})},P.prototype.mousemove=function(w){this._UIView.__fireEvent("onMouseMove",{e:w,x:w.imageX,y:w.imageY,index:this.GetCurrentIndex()})},P.prototype.pageAreaSelected=function(w,S){var U=1;if(S&&S.length>0){var Z=S[S.length-1];Z.index&&(U=parseInt(Z.index)+1),this._UIView.__fireEvent("onImageAreaSelected",{index:w,left:parseInt(Z.x),top:parseInt(Z.y),right:parseInt(Z.x+Z.width),bottom:parseInt(Z.y+Z.height),areaIndex:U})}},P.prototype.pageAreaUnselected=function(w){this._UIView.__fireEvent("onImageAreaDeSelected",w)},P.prototype.dragdone=function(w){e.isFunction(this._stwain.__OnIndexChangeDragDropDone)&&this._stwain.__OnIndexChangeDragDropDone(w)},P.prototype.RegistLoadCallback=function(w){return this._bRegistedLoad||(this._bRegistedLoad=!0),!0},P.prototype.onDrop=function(w){this.acceptDrop&&this.dropEvent(w)},P.prototype.dropEvent=function(w){var L,U,S=this,Z=null,ne=function(be){be&&e.html5.Funs2.output(null,be+" was loaded successfully!"),null!=Z&&S._stwain.Addon.PDF.SetConvertMode(Z)},oe=function(be,Te,Ge){Ge&&e.html5.Funs2.output(null,Ge+" failed to load. Error code: "+be+"Error String: "+Te),null!=Z&&S._stwain.Addon.PDF.SetConvertMode(Z)};try{for(var ue=w.dataTransfer.files,X=0;X<ue.length;X++){if(0==(L=ue[X]).type.length){var pe,B=L.name.indexOf(".");switch(B>0&&(pe=L.name.substring(B+1)),pe){case"bmp":U=T.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":U=T.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":U=T.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":U=T.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":U=T.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":U=T.DWT.EnumDWT_ImageType.IT_J2K;break;default:e.html5.Funs2.output(null,L.name+" failed to load because the file type is not supported!"),U=-1,e.Errors.UnrecognizedExt(S._stwain)}}else switch(L.type){case"image/bmp":U=T.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":U=T.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":U=T.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":U=T.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":U=T.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":U=T.DWT.EnumDWT_ImageType.IT_J2K;break;default:e.html5.Funs2.output(null,L.name+" failed to load because the file type is not supported!"),U=-1,e.Errors.UnrecognizedExt(S._stwain)}if(-1!=U){if(e.showProgress(S._stwain,"DropLoading",!0),S._stwain._OnPercentDone([0,-1,T.MSG.Loading]),S._stwain.Addon&&S._stwain.Addon.PDF){var G,K=!1;(S._stwain._isMobileMode()?e.License.checkProductKey(S._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(S._stwain,{PDFRasterizer:!0},!0))&&(S._stwain._isMobileMode()?K=!0:(Z=S._stwain.Addon.PDF.GetConvertMode(),G=S._stwain._innerFun("GetAddOnVersion",T.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&G==T.DWT.PdfMacVersion||e.env.bLinux&&G==T.DWT.PdfLinuxVersion||G==T.DWT.PdfVersion)&&(K=!0)),K&&S._stwain.Addon.PDF.SetConvertMode(3))}S._stwain._isMobileMode()?S._stwain.LoadImageFromBinary(L,function(){T.Lib.closeProgress()},function(){T.Lib.closeProgress()}):function(be){var Te=new FileReader;Te.readAsDataURL(be),Te.onload=function(){S._stwain.__LoadImageFromBytes(be,U,"",!0,ne,oe,0,be.size)},Te.onerror=function(Ge){T.Lib.closeProgress(),T.Lib.Errors.InvalidFile(S._stwain),S._stwain._errorString=this.error,oe({code:S._stwain._errorCode,message:S._stwain._errorString})}}(ue[X])}}}catch(be){e.log(be.stack||be,"error"),setTimeout(function(){throw be},0)}},P.prototype.getImageManager=function(){return this._ImgManager},P.prototype.on=function(w,S){if(w){if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(this._stwain);this.myViewer.on(w,S)}},P.prototype.off=function(w,S){var L=this;if(w)if(e.isUndefined(S))L.myViewer.off(w),_.indexOf(w)>=0&&L.myViewer.on(w,function(U,Z){e.isFunction(L[w])&&L[w](U,Z)});else{if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(L._stwain);L.myViewer.off(w,S)}},P.prototype.initDialogText=function(w,S){var U=w;return e.isUndefined(U)?U=S:(e.isUndefined(U.dlgChangeImageSize)?U.dlgChangeImageSize=S.dlgChangeImageSize:(0==U.dlgChangeImageSize[0].length&&(U.dlgChangeImageSize[0]=S.dlgChangeImageSize[0]),0==U.dlgChangeImageSize[1].length&&(U.dlgChangeImageSize[1]=S.dlgChangeImageSize[1]),0==U.dlgChangeImageSize[2].length&&(U.dlgChangeImageSize[2]=S.dlgChangeImageSize[2]),0==U.dlgChangeImageSize[3].length&&(U.dlgChangeImageSize[3]=S.dlgChangeImageSize[3]),0==U.dlgChangeImageSize[4].length&&(U.dlgChangeImageSize[4]=S.dlgChangeImageSize[4])),e.isUndefined(U.dlgRotateAnyAngle)?U.dlgRotateAnyAngle=S.dlgRotateAnyAngle:(0==U.dlgRotateAnyAngle[0].length&&(U.dlgRotateAnyAngle[0]=S.dlgRotateAnyAngle[0]),0==U.dlgRotateAnyAngle[1].length&&(U.dlgRotateAnyAngle[1]=S.dlgRotateAnyAngle[1]),0==U.dlgRotateAnyAngle[2].length&&(U.dlgRotateAnyAngle[2]=S.dlgRotateAnyAngle[2]),0==U.dlgRotateAnyAngle[3].length&&(U.dlgRotateAnyAngle[3]=S.dlgRotateAnyAngle[3]),0==U.dlgRotateAnyAngle[4].length&&(U.dlgRotateAnyAngle[4]=S.dlgRotateAnyAngle[4])),e.isUndefined(U.saveChangedImage)?U.saveChangedImage=S.saveChangedImage:(0==U.saveChangedImage[0].length&&(U.saveChangedImage[0]=S.saveChangedImage[0]),0==U.saveChangedImage[1].length&&(U.saveChangedImage[1]=S.saveChangedImage[1]),0==U.saveChangedImage[2].length&&(U.saveChangedImage[2]=S.saveChangedImage[2])),e.isUndefined(U.selectSource)?U.selectSource=S.selectSource:(0==U.selectSource[0].length&&(U.selectSource[0]=S.selectSource[0]),0==U.selectSource[1].length&&(U.selectSource[1]=S.selectSource[1]),0==U.selectSource[2].length&&(U.selectSource[2]=S.selectSource[2]),0==U.selectSource[3].length&&(U.selectSource[3]=S.selectSource[3]))),U},P.prototype.createDocumentEditor=function(w){var S=this;return S._NouiNotSupport("createImageEditor")?(S._documentEditor?e.Errors.DocumentEditorExist(S._stwain):(w?(e.isUndefined(w.border)&&(w.border=S.GetBorder()),e.isUndefined(w.selectionRectAspectRatio)&&(w.selectionRectAspectRatio=S.GetSelectionRectAspectRatio()),e.isUndefined(w.background)&&(w.background=A.background),e.isUndefined(w.topMenuBorder)&&(w.topMenuBorder=A.topMenuBorder),e.isUndefined(w.innerBorder)&&(w.innerBorder=A.innerBorder),e.isUndefined(w.promptToSaveChange)&&(w.promptToSaveChange=A.promptToSaveChange),e.isUndefined(w.buttons)&&(w.buttons=A.buttons),w.dialogText=S.initDialogText(w.dialogText,A.dialogText)):((w=M).border=S.GetBorder(),w.selectionRectAspectRatio=S.GetSelectionRectAspectRatio()),S._documentEditor=new e.UI.DocumentEditor(S,w)),S._documentEditorInner=S._documentEditor._documentEditorInner,S.bShowDocumentEdit=S._documentEditorInner.bShowDocumentEdit,S._documentEditor):NaN},P.prototype.createImageEditor=function(w){var S=this;return S._NouiNotSupport("createImageEditor")?(S._imageEditor?e.Errors.ImageEditorExist(S._stwain):(w?(e.isUndefined(w.border)&&(w.border=S.GetBorder()),e.isUndefined(w.selectionRectAspectRatio)&&(w.selectionRectAspectRatio=S.GetSelectionRectAspectRatio()),e.isUndefined(w.background)&&(w.background=A.background),e.isUndefined(w.topMenuBorder)&&(w.topMenuBorder=A.topMenuBorder),e.isUndefined(w.innerBorder)&&(w.innerBorder=A.innerBorder),e.isUndefined(w.promptToSaveChange)&&(w.promptToSaveChange=A.promptToSaveChange),e.isUndefined(w.buttons)&&(w.buttons=A.buttons),w.dialogText=S.initDialogText(w.dialogText,A.dialogText)):((w=A).border=S.GetBorder(),w.selectionRectAspectRatio=S.GetSelectionRectAspectRatio()),S._imageEditor=new e.UI.ImageEditor(S,w)),S._imageEditorInner=S._imageEditor._imageEditorInner,S.bShowImageEdit=S._imageEditorInner.bShowImageEdit,S._imageEditor):NaN},P.prototype.createThumbnailViewer=function(w){var S=this;return S._NouiNotSupport("createThumbnailViewer")?(w&&!e.isUndefined(w.showCheckbox)&&(w.multipleMode=w.showCheckbox),S._thumbnailViewer?e.Errors.ThumbnailViewerExist(S._stwain):S._thumbnailViewer=new e.UI.ThumbnailViewer(S,w),S.myThumbnailViewer=S._thumbnailViewer.myThumbnailViewer,S.myThumbnailViewer.on("click",function(L,U){S.UpdateInfo(!0,!1,!0)}),S._thumbnailViewer):NaN},P.prototype.createCustomElement=function(w,S,L){var U=this,Z="right",ne=!1;return U._NouiNotSupport("createCustomElement")?e.isUndefined(w)?(e.Errors.ElementRequired(U._stwain),NaN):w?(e.isUndefined(S)||(Z=S),!e.isUndefined(L)&&e.isBoolean(L)&&(ne=L),U._customElement?e.Errors.CustomElementExist(U._stwain):(U._customElement=new e.UI.CustomElement(U,w,Z,ne),U._customElement.myCustomElemet||(U._customElement=void 0)),U._customElement):(e.Errors.ElementNotExist(U._stwain),NaN):NaN},e.UI=e.UI||{},e.UI.WebViewer=P,F.prototype.show=function(){var w=this;return!!w._webViewer._NouiNotSupport("show")&&(w.myThumbnailViewer?(w._webViewer.myViewer.setViewMode(1,1),w._webViewer.SetIfSinglePageMode(!0),w.myThumbnailViewer.showThumbnail=!0,!0):(w.bDispose?e.Errors.ThumbnailViewerDispose(w._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(w._webViewer._stwain),!1))},F.prototype.hide=function(){var w=this;return!!w._webViewer._NouiNotSupport("hide")&&(w.myThumbnailViewer?(w.myThumbnailViewer.showThumbnail=!1,!0):(w.bDispose?e.Errors.ThumbnailViewerDispose(w._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(w._webViewer._stwain),!1))},F.prototype.dispose=function(){var w=this,S=!1;return!!w.bDispose||((S=w._webViewer.myViewer.removeThumbnailView(w.myThumbnailViewer))&&(w.bDispose=!0,w._webViewer._thumbnailViewer=void 0,w._webViewer.myThumbnailViewer=void 0,w.myThumbnailViewer=void 0,w._webViewer.bThumbnailDispose=!0),S)},F.prototype.updateViewMode=function(w){var S=this;if(!S.myThumbnailViewer)return S.bDispose?e.Errors.ThumbnailViewerDispose(S._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(S._webViewer._stwain),!1;if(w&&w.columns&&w.rows){if(w.columns<0||w.rows<0)return e.Errors.InvalidPropertyValue(S._webViewer._stwain),!1;S.myThumbnailViewer.showThumbnail=!1,S.myThumbnailViewer.setViewMode(w.columns,w.rows),w.scrollDirection&&("horizontal"==w.scrollDirection||"vertical"==w.scrollDirection)&&(S.myThumbnailViewer.scrollDirection=w.scrollDirection),S.myThumbnailViewer.showThumbnail=!0}},e.attachViewerPropertyThumbnailUI=function(w){o(w,"location",{get:function(){return w._webViewer.GetThumLocation()},set:function(S){return w._webViewer.SetThumLocation(S)}}),o(w,"size",{get:function(){return w._webViewer.GetThumSize()},set:function(S){return w._webViewer.SetThumSize(S)}}),o(w,"scrollDirection",{get:function(){return w._webViewer.GetThumScrollDirection()},set:function(S){return w._webViewer.SetThumScrollDirection(S)}}),o(w,"showPageNumber",{get:function(){return w._webViewer.GetThumShowPageNumber()},set:function(S){return w._webViewer.SetThumShowPageNumber(S)}}),o(w,"showCheckbox",{get:function(){return w._webViewer.GetThumMultipleMode()},set:function(S){return w._webViewer.SetThumMultipleMode(S)}}),o(w,"pageMargin",{get:function(){return w._webViewer.GetThumMargin()},set:function(S){return w._webViewer.SetThumMargin(S)}}),o(w,"border",{get:function(){return w._webViewer.GetThumBorder()},set:function(S){return w._webViewer.SetThumBorder(S)}}),o(w,"background",{get:function(){return w._webViewer.GetThumBackground()},set:function(S){return w._webViewer.SetThumBackground(S)}}),o(w,"pageBackground",{get:function(){return w._webViewer.GetThumPageBackground()},set:function(S){return w._webViewer.SetThumPageBackground(S)}}),o(w,"pageBorder",{get:function(){return w._webViewer.GetThumPageBorder()},set:function(S){return w._webViewer.SetThumPageBorder(S)}}),o(w,"hoverPageBackground",{get:function(){return w._webViewer.GetThumHoverBackground()},set:function(S){return w._webViewer.SetThumHoverBackground(S)}}),o(w,"hoverPageBorder",{get:function(){return w._webViewer.GetThumHoverBorder()},set:function(S){return w._webViewer.SetThumHoverBorder(S)}}),o(w,"placeholderBackground",{get:function(){return w._webViewer.GetThumPlaceholderBackground()},set:function(S){return w._webViewer.SetThumPlaceholderBackground(S)}}),o(w,"selectedPageBorder",{get:function(){return w._webViewer.GetThumSelectedPageBorder()},set:function(S){return w._webViewer.SetThumSelectedPageBorder(S)}}),o(w,"selectedPageBackground",{get:function(){return w._webViewer.GetThumSelectedPageBackground()},set:function(S){return w._webViewer.SetThumSelectedPageBackground(S)}}),o(w,"allowKeyboardControl",{get:function(){return w._webViewer.GetThumAllowKeyboardControl()},set:function(S){return w._webViewer.SetThumAllowKeyboardControl(S)}}),o(w,"allowPageDragging",{get:function(){return w._webViewer.GetThumAllowDrag()},set:function(S){return w._webViewer.SetThumAllowDrag(S)}}),o(w,"allowResizing",{get:function(){return w._webViewer.GetThumAllowResize()},set:function(S){return w._webViewer.SetThumAllowResize(S)}}),o(w,"autoChangeIndex",{get:function(){return w._webViewer.GetThumAutoChangeIndex()},set:function(S){return w._webViewer.SetThumAutoChangeIndex(S)}}),o(w,"multipleMode",{get:function(){return w._webViewer.GetThumMultipleMode()},set:function(S){return w._webViewer.SetThumMultipleMode(S)}})},F.prototype.on=function(w,S){if(w){if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(this._webViewer._stwain);this.myThumbnailViewer.on(w,S)}},F.prototype.off=function(w,S){var L=this;if(w)if(e.isUndefined(S))L.myThumbnailViewer.off(w),"click"==w&&L.myThumbnailViewer.on("click",function(U,Z){L._webViewer.UpdateInfo(!0,!1,!0)});else{if(!e.isFunction(S))return void e.Errors.CallbackNotAFunction(L._webViewer._stwain);L.myThumbnailViewer.off(w,S)}},e.UI=e.UI||{},e.UI.ThumbnailViewer=F,k.prototype.show=function(){var w=this;return w.myCustomElemet?(w.myCustomElemet.show(),!0):(w.bDispose?e.Errors.CustomElementDispose(w._webViewer._stwain):e.Errors.CustomElementNotExist(w._webViewer._stwain),!1)},k.prototype.hide=function(){var w=this;return w.myCustomElemet?(w.myCustomElemet.hide(),!0):(w.bDispose?e.Errors.CustomElementDispose(w._webViewer._stwain):e.Errors.CustomElementNotExist(w._webViewer._stwain),!1)},k.prototype.dispose=function(){var w=this,S=!1;return!!w.bDispose||(w.myCustomElemet?(S=w.myCustomElemet.dispose())&&(w.bDispose=!0,w._webViewer._customElement=void 0,w.myCustomElemet=void 0,w.myViewer=null,w.element=null):(w.bDispose=!0,S=!0),S)},e.UI=e.UI||{},e.UI.CustomElement=k}function P(w,S,L){var U=this;U._ImgManager=w,U._stwain=w._stwain,U._UIView=L,U._currentTag="",U.bShowImageEdit=!1,U.acceptDrop=!0,U.currentFileName=l,U._documentScanConfiguration="",U.addCSSForShowVideo=!1,U.ifWebviewerInit=!1,U._Init(S),e.UI.DWTViewer&&T.DWT.UseDefaultViewer&&(U._stwain.Viewer=new e.UI.DWTViewer(U,w))}function F(w,S){var L=this;if(L._webViewer=w,S){if(S.location)switch(S.location){case"left":S.location="horizontal",S.sequence=-1;break;case"right":S.location="horizontal",S.sequence=1;break;case"top":S.location="vertical",S.sequence=-1;break;case"bottom":S.location="vertical",S.sequence=1;break;default:S.location="horizontal",S.sequence=-1}else S.location="horizontal",S.sequence=-1;e.isUndefined(S.size)&&(S.size=E.size),e.isUndefined(S.columns)&&(S.columns=E.columns),e.isUndefined(S.rows)&&(S.rows=E.rows),(e.isUndefined(S.scrollDirection)||"horizontal"!=S.scrollDirection)&&(S.scrollDirection=E.scrollDirection),e.isUndefined(S.pageMargin)&&(S.pageMargin=E.pageMargin),e.isUndefined(S.allowKeyboardControl)&&(S.allowKeyboardControl=E.allowKeyboardControl),e.isUndefined(S.allowPageDragging)&&(S.allowPageDragging=E.allowPageDragging),e.isUndefined(S.allowResizing)&&(S.allowResizing=E.allowResizing),e.isUndefined(S.border)&&(S.border=E.border),e.isUndefined(S.pageBackground)&&(S.pageBackground=E.pageBackground),e.isUndefined(S.pageBorder)&&(S.pageBorder=E.pageBorder),e.isUndefined(S.hoverPageBackground)&&(S.hoverPageBackground=E.hoverPageBackground),e.isUndefined(S.hoverPageBorder)&&(S.hoverPageBorder=E.hoverPageBorder),e.isUndefined(S.placeholderBackground)&&(S.placeholderBackground=E.placeholderBackground),e.isUndefined(S.autoChangeIndex)&&(S.autoChangeIndex=E.autoChangeIndex)}else S=E;if(e.isUndefined(S.background)&&(S.background=L._webViewer.GetBackground()),e.isUndefined(S.showPageNumber)&&(S.showPageNumber=L._webViewer.GetShowPageNumber()),e.isUndefined(S.multipleMode)&&(S.multipleMode=L._webViewer.GetMultipleMode()),e.isUndefined(S.selectedPageBorder)){var Z=L._webViewer.GetSelectedPageBorder();S.selectedPageBorder=e.isUndef(Z)?E.selectedPageBorder:Z}if(e.isUndefined(S.selectedPageBackground)){var ne=L._webViewer.GetSelectedPageBackground();S.selectedPageBackground=e.isUndef(ne)?E.selectedPageBackground:ne}S.showThumbnail=!1,L.myThumbnailViewer=L._webViewer.myViewer.createThumbnailView(S),0!=L._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(L._webViewer._stwain,L._webViewer.mydvs.Error.errorMessage,L._webViewer.mydvs.Error.errorCode),e.attachViewerPropertyThumbnailUI(L),L.bDispose=!1,L._webViewer.bThumbnailDispose=!1}function k(w,S,L,U){var Z=this,ne=1;Z._webViewer=w,Z.myViewer=Z._webViewer.myViewer,Z.element=S,e.isUndefined(L)||(ne="left"==L?-1:1),e.isUndefined(U)&&(U=!1),Z.myCustomElemet=Z.myViewer.createCustomElement(S,ne,U),Z.myCustomElemet&&(Z.hide(),Z.bDispose=!1)}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var d=e.html5.Funs.DEF;c.prototype.dispose=function(){var u=this;u._stwain=null,u._ImgManager=null,u._webViewer&&(u._webViewer=null),u._elements=[]},e.attachViewerPropertyUI=function(u){d(u,"width",{get:function(){return u._webViewer.GetWidth()},set:function(h){return u._webViewer.SetWidth(h)}}),d(u,"height",{get:function(){return u._webViewer.GetHeight()},set:function(h){return u._webViewer.SetHeight(h)}}),d(u,"idPostfix",{get:function(){return u._webViewer.GetIdPostfix()}}),d(u,"background",{get:function(){return u._webViewer.GetBackground()},set:function(h){return u._webViewer.SetBackground(h)}}),d(u,"border",{get:function(){return u._webViewer.GetBorder()},set:function(h){return u._webViewer.SetBorder(h)}}),d(u,"innerBorder",{get:function(){return u._webViewer.GetInnerBorder()},set:function(h){return u._webViewer.SetInnerBorder(h)}}),d(u,"selectedPageBorder",{get:function(){return u._webViewer.GetSelectedPageBorder()},set:function(h){return u._webViewer.SetSelectedPageBorder(h)}}),d(u,"selectedPageBackground",{get:function(){return u._webViewer.GetSelectedPageBackground()},set:function(h){return u._webViewer.SetSelectedPageBackground(h)}}),d(u,"showPageNumber",{get:function(){return u._webViewer.GetShowPageNumber()},set:function(h){return u._webViewer.SetShowPageNumber(h)}}),d(u,"selectedAreaBorderColor",{get:function(){return u._webViewer.GetSelectedAreaBorderColor()},set:function(h){return u._webViewer.SetSelectedAreaBorderColor(h)}}),d(u,"selectionRectAspectRatio",{get:function(){return u._webViewer.GetSelectionRectAspectRatio()},set:function(h){return u._webViewer.SetSelectionRectAspectRatio(h)}}),d(u,"cursor",{get:function(){return u._webViewer.GetCursor()},set:function(h){return u._webViewer.SetCursor(h)}}),d(u,"ifAutoScroll",{get:function(){return u._webViewer.GetIfAutoScroll()},set:function(h){return u._webViewer.SetIfAutoScroll(h)}}),d(u,"pageMargin",{get:function(){return u._webViewer.GetPageMargin()},set:function(h){return u._webViewer.SetPageMargin(h)}}),d(u,"zoom",{get:function(){return u._webViewer.GetZoom()},set:function(h){return u._webViewer.SetZoom(h)}}),d(u,"singlePageMode",{get:function(){return u._webViewer.GetIfSinglePageMode()},set:function(h){return u._webViewer.SetIfSinglePageMode(h)}}),d(u,"acceptDrop",{get:function(){return u._webViewer.GetAcceptDrop()},set:function(h){return u._webViewer.SetAcceptDrop(h)}}),d(u,"allowSlide",{get:function(){return u._webViewer.GetAllowSlide()},set:function(h){return u._webViewer.SetAllowSlide(h)}}),d(u,"autoChangeIndex",{get:function(){return u._webViewer.GetAutoChangeIndex()},set:function(h){return u._webViewer.SetAutoChangeIndex(h)}}),d(u,"showCheckbox",{get:function(){return u._webViewer.GetMultipleMode()},set:function(h){return u._webViewer.SetMultipleMode(h)}})},c.prototype.next=function(){return this._webViewer.next()},c.prototype.previous=function(){return this._webViewer.previous()},c.prototype.first=function(){return this._webViewer.first()},c.prototype.last=function(){return this._webViewer.last()},c.prototype.gotoPage=function(u){return this._webViewer.go(u)},c.prototype.render=function(){return this._webViewer.render()},c.prototype.createDocumentEditor=function(u){return this._webViewer.createDocumentEditor(u)},c.prototype.createImageEditor=function(u){return this._webViewer.createImageEditor(u)},c.prototype.createThumbnailViewer=function(u){return this._webViewer.createThumbnailViewer(u)},c.prototype.getUISettings=function(){return this._webViewer.getUISettings()},c.prototype.resetUISettings=function(){return this._webViewer.resetUISettings()},c.prototype.updateUISettings=function(u){return this._webViewer.updateUISettings(u)},c.prototype.clearSelectedAreas=function(){return this._webViewer.clearSelectedAreas()},c.prototype.setSelectedAreas=function(u){return this._webViewer.setSelectedAreas(u)},c.prototype.createCustomElement=function(u,h,f){return this._webViewer.createCustomElement(u,h,f)},c.prototype.fitWindow=function(u){return this._webViewer.SetFitType(u)},c.prototype.setButtonClass=function(u,h){return this._webViewer.setButtonClass(u,h)},c.prototype.setViewMode=function(u,h){return this._webViewer.SetViewMode(u,h)},c.prototype.bind=function(u,h){var f=this,g=u;if(e.isShadowRoot(g)){var v=document.createElement("div");g.appendChild(v),f._elements.push(v),g=v}if(e.isDOM(g)){var p=e.getShadowRoot(g);if(p){var m=T.Lib.timestamp,I=document.createElement("style");I.innerHTML=['@import url("',T.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",m,'")'].join(""),p.appendChild(I),f._elements.push(I)}else p=!1;(!g.id||""==g.id)&&(g.id=["dwt_",e.getRandom()].join(""))}return h?f._webViewer.BindTemplate(g,h):f._webViewer.BindView(g)},c.prototype.createTemplate=function(u){return this._webViewer.CreateTemplate(u)},c.prototype.show=function(){return this._webViewer.show()},c.prototype.hide=function(){return this._webViewer.hide()},c.prototype.unbind=function(){var u=this;return u._webViewer._stwain.Template&&u._stwain.Template._documentTemplate.UnbindView(),e.each(u._elements,function(h){h.parentNode&&h.parentNode.removeChild(h)}),u._webViewer.UnbindView()},c.prototype.on=function(u,h){this._webViewer.on(u,h)},c.prototype.off=function(u,h){this._webViewer.off(u,h)},e.UI=e.UI||{},e.UI.DWTViewer=c}function c(u,h){var f=this;f._ImgManager=h,f._stwain=h._stwain,f._webViewer=u,f._elements=[],e.attachViewerPropertyUI(f)}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){document;var a=e.html5.Funs2,s=T.DWT;l.prototype._Init=function(d){var c=this;c.borderWidth=e.isUndefined(d.borderWidth)?1:d.borderWidth,c.BackgroundColorByDefault=d.BackgroundColor?d.BackgroundColor:"#FFFFFF",d.BackgroundColor=c.BackgroundColorByDefault,c.BackgroundFillColor=c.BackgroundColorByDefault,c._webViewer?c._webViewer._Init(d):c._webViewer=new e.UI.WebViewer(c._ImgManager,d,c),c.mapModelImageControl=d.mapModelImageControl,c.__InitEvents(d)},l.prototype.dispose=function(){var d=this;d._webViewer&&(d._webViewer.dispose(),d._webViewer=null)},l.prototype.__InitEvents=function(d){var c=this;e.isFunction(d.onTopImageInTheViewChanged)&&(c.onTopImageInTheViewChanged=d.onTopImageInTheViewChanged),e.isFunction(d.onGetImageInfo)&&(c.onGetImageInfo=d.onGetImageInfo),e.isFunction(d.onZoomChanged)&&(c.onZoomChanged=d.onZoomChanged),e.isFunction(d.onMouseMove)&&(c.onMouseMove=d.onMouseMove),e.isFunction(d.onMouseClick)&&(c.onMouseClick=d.onMouseClick),e.isFunction(d.onMouseRightClick)&&(c.onMouseRightClick=d.onMouseRightClick),e.isFunction(d.onMouseDoubleClick)&&(c.onMouseDoubleClick=d.onMouseDoubleClick),e.isFunction(d.onImageAreaDeSelected)&&(c.onImageAreaDeSelected=d.onImageAreaDeSelected),e.isFunction(d.onImageAreaSelected)&&(c.onImageAreaSelected=d.onImageAreaSelected),e.isFunction(d.onBufferChanged)&&(c.onBufferChanged=d.onBufferChanged),e.isFunction(d.onSelected)&&(c.onSelected=d.onSelected),e.isFunction(d.onRefreshUI)&&(c.onRefreshUI=d.onRefreshUI),e.isFunction(d.onResetCurrentIndex)&&(c.onResetCurrentIndex=d.onResetCurrentIndex)},l.prototype.SetMetaDataByIndex=function(d,c){return this.GetWebViewer().SetMetaDataByIndex(d,c)},l.prototype.GetMetaDataByIndex=function(d){return this.GetWebViewer().GetMetaDataByIndex(d)},l.prototype.GetDataImageControl=function(d){return this.mapModelImageControl[d]},l.prototype.SetDataImageControl=function(d,c,u){var f,h=this;return-1!=c&&((f=h.mapModelImageControl[c])||((f=new e.UI.ModelImageControl).serverId=c,h.mapModelImageControl[c]=f),null!=f&&(f.bIsDirty=!0),h.__GetImageAndAttach(f,c,!0,!1,!1,d,u),!0)},l.prototype.AttachImagesForControl=function(d,c){var h=this.GetWebViewer();return d.bAddImage?h.AppendImage(d,c):h.UpdateImage(d,c),h._ImageEditorInner&&h._ImageEditorInner.bCouldBeTimeConsuming&&(h._ImageEditorInner.bCouldBeTimeConsuming=!1,T.Lib.hideMask()),!0},l.prototype.MobileAttachImagesForControl=function(d,c){var h=this.GetWebViewer();return d.bAddImage?h.MobileAppendImage(d,c):h.MobileUpdateImage(d,c),h._ImageEditorInner&&h._ImageEditorInner.bCouldBeTimeConsuming&&(h._ImageEditorInner.bCouldBeTimeConsuming=!1,T.Lib.hideMask()),!0},l.prototype.GetWebViewer=function(){return this._webViewer},l.prototype.__GetWebViewerUuid=function(d){return this.mapModelImageControl[d].uuid},l.prototype.SetSelectedImageArea=function(d,c,u,h){var g=this.GetWebViewer();return null!=g&&g.SetSelectedImageArea(d,c,u,h)},l.prototype.OverlayRectangle=function(d,c,u,h,f,g,v){var m=this.GetWebViewer();return null!=m&&m.OverlayRectangle(d,c,u,h,f,g,v)},l.prototype.ChangeImageViewSize=function(d,c){var f=this.GetWebViewer();return d>=0&&(f.GetWidth(),f.SetWidth(d)),c>=0&&(f.GetHeight(),this.GetWebViewer().SetHeight(c)),!0},l.prototype.GetWidth=function(){return this.GetWebViewer().GetWidth()},l.prototype.SetWidth=function(d){var u=d;return this.GetWebViewer().SetWidth(u),!0},l.prototype.GetHeight=function(){return this.GetWebViewer().GetHeight()},l.prototype.SetHeight=function(d){var u=d;return this.GetWebViewer().SetHeight(u),!0},l.prototype.RefreshAllImages=function(d,c){var h,f,g,u=this,v=u.GetWebViewer();if(!u._stwain._isMobileMode()&&u.mapModelImageControl)for(var p=0;p<v.GetHowManyImagesInBuffer();p++){h=u.getImageManager().convertClientIndexToServerId(p);var m=u.mapModelImageControl[h];m&&(f=a.getImageUrl(u.BaseUrl,h,d,c,Date.now()),m.minImageUrl=f,g=v.GetMetaDataByIndex(p),v.UpdateImage(m,g))}},l.prototype.SetViewMode=function(d,c){return this.GetWebViewer().SetViewMode(d,c)},l.prototype.RemoveAllImages=function(){var c,u,h,f,d=this;for(h=d._ImgManager.count(),f=Object.keys(d.mapModelImageControl).length,c=0;c<h;c++)-1!=(u=d.getImageManager().convertClientIndexToServerId(c))&&d.mapModelImageControl[u]&&(d.mapModelImageControl[u].Clear(),delete d.mapModelImageControl[u]);return h==f&&(d.mapModelImageControl={}),d.GetWebViewer().RemoveAllImages(),!0},l.prototype.__GetImageAndAttach=function(d,c,u,h,f,g,v){var y,p=this,m=p.GetWebViewer().GetWidth(),I=p.GetWebViewer().GetHeight();y=!(!u&&1!=d.bIsDirty);var _=p.__GetWebViewerUuid(c);_&&d.iImageControlWidth==m&&d.iImageControlHeight==I&&0==d.bIsDirty||p.__SetArrayControlLoadImage(_,c,d,m,I,p.AttachImagesForControl,y,h,f,g,v)},l.prototype.__SetArrayControlLoadImage=function(d,c,u,h,f,g,v,p,m,I,y){var _=this;_._stwain._isMobileMode()?_.OnGetImageFromMobileServer(c,u,h,f,p,m,I,y):v?_.OnGetImageFromServer(c,u,h,f,p,m,I,y):_.OnGetImageByURL(c,u,h,f,p,m,I,y)},l.prototype.OnGetImageByURL=function(d,c,u,h,f,g,v,p){var m=this;return c.imageUrl&&""!=c.imageUrl?(c.iImageControlWidth=u,c.iImageControlHeight=h,c.bAddImage=f,c.bAppendImage=g,c.index=v,m._stwain._isMobileMode()?m.MobileAttachImagesForControl(c,p):m.AttachImagesForControl(c,p),!0):m.OnGetImageFromServer(d,c,u,h,f,g,v,p)},l.prototype.OnGetImageFromMobileServer=function(d,c,u,h,f,g,v,p){c.iImageControlWidth=u,c.iImageControlHeight=h,c.bAddImage=f,c.bAppendImage=g,c.index=v,this.MobileAttachImagesForControl(c,p)},l.prototype.OnGetImageFromServer=function(d,c,u,h,f,g,v,p){var I,y,m=this,_=m.BaseUrl;if(_){if(-1==d)return!1;c.bIsDirty&&(c.ticks=Date.now()),e.isUndefined(u)&&(u=-1),e.isUndefined(h)&&(h=-1),c.iImageControlWidth=u,c.iImageControlHeight=h,c.bAddImage=f,c.bAppendImage=g,c.index=v,T.DWT.ConnectWithSocket&&m._stwain._bBindViewer?m._stwain.__innerConvertToBlob(T.DWT.EnumDWT_ImageType.IT_PNG,[d],!1,!0,4,function(C){c.imageUrl=URL.createObjectURL(C),c.minImageUrl=URL.createObjectURL(C),m.AttachImagesForControl(c,p)},function(C){}):(I=a.getImageUrl(_,d,-1,-1,c.ticks),y=a.getImageUrl(_,d,u,h,c.ticks),c.imageUrl=I,c.minImageUrl=y,m.AttachImagesForControl(c,p))}return!0},l.prototype.SetIfFitWindowAndType=function(d){var u,h=this.GetWebViewer();if(null!=h){switch(d){case 1:u="height";break;case 2:u="width";break;default:u="window"}h.SetFitType(u)}return!0},l.prototype.GetAllowMultiSelect=function(){return this.AllowMultiSelect},l.prototype.SetAllowMultiSelect=function(d){return this.AllowMultiSelect=d,!0},l.prototype.GetFitWindowType=function(){return 0},l.prototype.SetSelectionRectAspectRatio=function(d){return this.GetWebViewer().SetSelectionRectAspectRatio(d),!0},l.prototype.GetSelectionRectAspectRatio=function(d){return this.GetWebViewer().GetSelectionRectAspectRatio()},l.prototype.SetFitWindowType=function(d){return this.SetIfFitWindowAndType(d),!0},l.prototype.GetIfFitWindow=function(){return!0},l.prototype.SetIfFitWindow=function(d){return d?this.GetWebViewer().SetFitType():this.GetWebViewer().SetZoom(1),!0},l.prototype.GetImageMargin=function(){return this.GetWebViewer().GetImageMargin()},l.prototype.SetImageMargin=function(d){return this.GetWebViewer().SetImageMargin(d),!0},l.prototype.GetSelectionImageBorderColor=function(){return this.GetWebViewer().GetSelectedPageBorder()},l.prototype.SetSelectionImageBorderColor=function(d){var u=d;return this.GetWebViewer().SetSelectionImageBorderColor(u),!0},l.prototype.GetZoom=function(){return this.GetWebViewer().GetZoom()},l.prototype.SetZoom=function(d){var c=this;d<c.MIN_ZOOM&&(d=c.MIN_ZOOM),d>c.MAX_ZOOM&&(d=c.MAX_ZOOM);var u=c.GetWebViewer();return null!=u&&u.SetZoom(d),!0},l.prototype.ZoomIn=function(d,c){var u=this,f=u.mapModelImageControl[u.getImageManager().convertClientIndexToServerId(u._webViewer.GetCurrentIndex())],g=u.GetWebViewer().GetZoom(),v=Math.floor(100*g*u.zoomInStep)+1;return 1<v&&v<2501?parseInt(f.imageWidth*g)>15e3||parseInt(f.imageHeight*g)>15e3?(a.output(u,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1):(u.SetZoom(v/100,d,c),!0):(a.output(u,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1)},l.prototype.ZoomOut=function(){var d=this,c=d.GetWebViewer().GetZoom(),u=Math.floor(100*c*d.zoomOutStep)-1;return 1<u&&u<6501?(d.SetZoom(u/100),!0):(a.output(d,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),!1)},l.prototype.GetMouseShape=function(){return this.GetWebViewer().GetMouseShape()},l.prototype.SetMouseShape=function(d){return this.GetWebViewer().SetMouseShape(d),!0},l.prototype.GetShowPageNumber=function(){return this.GetWebViewer().GetShowPageNumber()},l.prototype.SetShowPageNumber=function(d){return this.GetWebViewer().SetShowPageNumber(d),!0},l.prototype.SetBackgroundFillColor=function(d){return this.BackgroundFillColor=d,!0},l.prototype.GetBackgroundColor=function(){return this.GetWebViewer().GetBackground()},l.prototype.SetBackgroundColor=function(d){var u=d;return this.GetWebViewer().SetBackground(u),!0},l.prototype.Go=function(d){return this.GetWebViewer().go(d)},l.prototype.SetSelectedindexes=function(d){return this.GetWebViewer().SetSelectedindexes(d)},l.prototype.GetSelectedindexes=function(d){return this.GetWebViewer().GetSelectedindexes()},l.prototype.__Previous=function(){return this.Go(this.GetWebViewer().GetCurrentIndex()-1),!0},l.prototype.__Next=function(){return this.Go(this.GetWebViewer().GetCurrentIndex()+1),!0},l.prototype.__fireEvent=function(d,c){return!e.isFunction(this[d])||this[d](c)},l.prototype.AddImage=function(d,c,u,h){var p,g=1*d;return-1!=c&&((p=new e.UI.ModelImageControl).bIsDirty=!0,p.serverId=c,this.mapModelImageControl[c]=p,c>=0&&this.__GetImageAndAttach(p,c,!1,!0,h,g,u),!0)},l.prototype.RemoveImage=function(d,c){var u=this,f=parseInt(d);return isNaN(f)?(e.Errors.InvalidIndex(u),!1):f<0||f>=u._ImgManager.count()?(e.Errors.IndexOutOfRange(u),!1):(u._ImgManager.count(),-1!=c&&u.mapModelImageControl[c]&&(u.mapModelImageControl[c].Clear(),delete u.mapModelImageControl[c]),u.GetWebViewer().RemoveByIndex(f))},l.prototype.MoveImage=function(d,c,u){return this.GetWebViewer().MoveImage(d,c)},l.prototype.SwitchImage=function(d,c){return this.GetWebViewer().SwitchImage(d,c)},l.prototype.GetIfAutoScroll=function(){return this._webViewer.GetIfAutoScroll()},l.prototype.SetIfAutoScroll=function(d){return this._webViewer.SetIfAutoScroll(d),!0},l.prototype.Print=function(){var c,d=this;if(!((c=d.GetWebViewer().GetCurrentIndex())<0)){var u,h;if(-1==(h=d.getImageManager().convertClientIndexToServerId(c)))return e.Errors.IndexOutOfRange(d),!1;if(!d._stwain._isMobileMode())return u=a.getImageUrl(d.BaseUrl,h,-1,-1),d.__PrintInner(u,h,c);var f=d.GetWebViewer().GetUidByIndex(c);return d.GetWebViewer().GetImageData(f).then(function(g){return g.oriData instanceof ArrayBuffer?d.__PrintInner(URL.createObjectURL(new Blob([g.oriData])),h,c):g.oriData instanceof Blob?d.__PrintInner(URL.createObjectURL(g.oriData),h,c):d.__PrintInner(g.oriData,h,c)}),!0}},l.prototype.__PrintInner=function(d,c,u){var h=this,f=h.mapModelImageControl[c],g=[];if(!f)return!1;f.width<=0&&(f.width=h.getImageManager().GetImageWidth(u)),f.height<=0&&(f.height=h.getImageManager().GetImageHeight(u));var v=new e.UI.PrintUrl(d,f.width,f.height);return g.push(v),a.print(g),!0},l.prototype.GetHowManyImagesInBuffer=function(){return this.GetWebViewer().GetHowManyImagesInBuffer()},l.prototype.RemoveImageTag=function(d){return this.GetWebViewer().RemoveImageTag(d)},l.prototype.FilterImagesByTag=function(d,c,u){return this.GetWebViewer().FilterImagesByTag(d,c,u)},l.prototype.ClearFilter=function(){return this.GetWebViewer().ClearFilter()},l.prototype.GetServerIdList=function(){return this.GetWebViewer().GetServerIdList()},l.prototype.GetServerIdListByTag=function(d){var u,f,g,v,c=this,h=[];if(d&&0==d.length)for(f=0;f<c.GetHowManyImagesInBuffer();f++)(v=c.GetWebViewer().GetCustomDataByIndex(f))&&h.push(v.imageId);else if(u=c.GetWebViewer().GetTagContents(d))for(f=0;f<u.length;f++)(g=c.GetWebViewer().GetIndexByUid(u[f]))>=0&&(v=c.GetWebViewer().GetCustomDataByIndex(g))&&h.push(v.imageId);return h},l.prototype.SetDefaultTag=function(d){return this.GetWebViewer().SetDefaultTag(d)},l.prototype.AddImageTag=function(d,c){return this.GetWebViewer().AddImageTag(d,c)},l.prototype.GetCurrentTag=function(){var c;return 0==(c=this.GetWebViewer().GetCurrentTag())?"":c},l.prototype.RenameTag=function(d,c){return this.GetWebViewer().RenameTag(d,c)},l.prototype.RemoveTag=function(d,c){return this.GetWebViewer().RemoveTag(d,c)},l.prototype.GetTagList=function(){return this.GetWebViewer().GetTagList()},l.prototype.GetTagListByIndex=function(d){return this.GetWebViewer().GetTagListByIndex(d)},l.prototype.CreateFile=function(d){return this.GetWebViewer().CreateFile(d)},l.prototype.OpenFile=function(d){return this.GetWebViewer().OpenFile(d)},l.prototype.GetCurrentFileName=function(){return this.GetWebViewer().GetCurrentFileName()},l.prototype.RemoveFile=function(d){return this.GetWebViewer().RemoveFile(d)},l.prototype.GetFileInfoList=function(){return this.GetWebViewer().GetFileInfoList()},l.prototype.GetImageIdsByFileName=function(d){return this.GetWebViewer().GetImageIdsByFileName(d)},l.prototype.BindView=function(d){var u,h=this.GetWebViewer();return(u=h.BindView(d))&&h.show(),u},l.prototype.UnbindView=function(){return this.GetWebViewer().UnbindView()},l.prototype.GetIfShowVideoContainer=function(){return this.GetWebViewer().GetIfShowVideoContainer()},l.prototype.ShowVideoContainer=function(d){return this.GetWebViewer().ShowVideoContainer(d)},l.prototype.UpdateVideoContainer=function(d){return this.GetWebViewer().UpdateVideoContainer(d)},l.prototype.__AttachImages=function(){var c,u,d=this;u=d.GetWebViewer().GetHowManyImagesInBuffer();for(var f=0;f<u;f++)(c=d._ImgManager.convertClientIndexToServerId(f))>=0&&d.__GetImageAndAttach(d.mapModelImageControl[c],c,!0,!1,!1,0)},l.prototype.exists=function(d){return!e.isUndefined(this.mapModelImageControl[d])},l.prototype.getImageManager=function(){return this._ImgManager},l.prototype.GetImageData=function(d){this.GetWebViewer().GetImageData(d)},l.prototype.RegistLoadCallback=function(d){return this.GetWebViewer().RegistLoadCallback(d)},l.prototype.UpdateData=function(d,c){var h=this.GetWebViewer(),f=this.GetDataImageControl(d);return f&&h.UpdateImage(f,c),!0},e.UI=e.UI||{},e.UI.ImageUIView=l}function l(d,c){var u=this;u._ImgManager=d,u._stwain=d._stwain,u.zoomInStep=1.2,u.zoomOutStep=.8,u.MIN_ZOOM=.02,u.MAX_ZOOM=65,u.BaseUrl=!1,u.MAX_ROWS=128,u.MAX_COLUMNS=128,u.AllowMultiSelect=!0,u.__MousewheelValue=0,this._Init(c)}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){e.getNavInfo();var n=e.html5.Funs,a=!1,s=!0,o=function(c){e.dlgProgress||e.initProgress();var u=e.one(".dynamsoft-btnCancel");u&&u.getEL()&&e.addEventListener(u[0],"mousedown",function(){var f=e.cancelFrome;e.closeProgress(0),1==f||2==f?e.bio&&(e.bio.abort(),e.bio=a):3==f||4==f?c.SetCancel():5==f&&e.isFunction(c.__OnCancel)&&c.__OnCancel()})};e.mix(n,{changeImageUISize:function(c,u,h){var f,g,_,C,m=u,I=h,y=a;f=e.one(c._containerElement),e.isString(u)&&u.indexOf("%")>=0?(0==(_=e.css(f,"width"))&&(f[0].style.width="100%"),_=e.css(f,"width")*parseInt(u)/100,y=s):m=[(_=parseInt(u))+2,"px"].join(""),e.isString(h)&&h.indexOf("%")>=0?(0==(C=e.css(f,"height"))&&(f[0].style.height="100%"),C=e.css(f,"height")*parseInt(h)/100,y=s):I=[(C=parseInt(h))+2,"px"].join(""),f&&(g=e.one(".dynamsoft-dwt-container-box",f))&&g.getEL()&&(g.style("width",m),g.style("height",I)),y?(c.__funResize||(c.__funResize=function(){if(c._ImgManager&&c._containerElement){var M=n.__innerGetUIViewRealSize(c._containerElement,c._width,c._height);return c._ImgManager.ChangeSize(M.width,M.height)}return s}),e.removeEventListener(window,"resize",c.__funResize),e.addEventListener(window,"resize",c.__funResize)):c.__funResize&&(e.removeEventListener(window,"resize",c.__funResize),c.__funResize=a);var A=n.__innerGetUIViewRealSize(c._containerElement,_,C);return c._ImgManager?c._ImgManager.ChangeSize(A.width,A.height):s},__innerGetUIViewRealSize:function(c,u,h){var f,g=-1,v=-1;return f=e.one(c),e.isString(u)&&u.indexOf("%")>=0&&(g=e.css(f,"width")*parseInt(u)/100),g<0&&u&&(g=parseInt(u)),e.isString(h)&&h.indexOf("%")>=0&&(v=e.css(f,"height")*parseInt(h)/100),v<0&&h&&(v=parseInt(h)),{width:g,height:v}},bindUIViewEvents:function(c,u){var h=c;u.onSelected=function(g){if(!h._isNoViewer()){var p,v=g.length;v>0&&(h._ImgManager.SetSelectedImageCount(v),p=g[v-1],e.isFunction(h.__OnRefreshUI)&&h.__OnRefreshUI(p))}},u.onRefreshUI=function(g){h._isNoViewer()||n.__innerRefreshFromUIView(h,g)},u.onResetCurrentIndex=function(g){if(!h._isNoViewer()){var v=h._ImgManager.getCurrentImageIndex();g>=0&&g<h._ImgManager.count()&&v!=g&&e.isFunction(h.__OnIndexChangeDuringDragDrop)&&h.__OnIndexChangeDuringDragDrop(v,g)}},u.onMouseMove=function(g){if(!h._isNoViewer()){var v=g.index;if(g){var m=g.y;h.__MouseX=g.x,h.__MouseY=m}e.isFunction(h.__OnMouseMove)&&h.__OnMouseMove(v)}},u.onMouseClick=function(g){if(!h._isNoViewer()){var v=g.index;if(g){var m=g.y;h.__MouseX=g.x,h.__MouseY=m}e.isFunction(h.__OnMouseClick)&&h.__OnMouseClick(v)}},u.onMouseDoubleClick=function(g){if(!h._isNoViewer()){var v=g.index;e.isFunction(h.__OnMouseDoubleClick)&&h.__OnMouseDoubleClick(v)}},u.onMouseRightClick=function(g){if(!h._isNoViewer()){var v=g.index;if(g){var m=g.y;h.__MouseX=g.x,h.__MouseY=m}return e.isFunction(h.__OnMouseRightClick)?h.__OnMouseRightClick(v):s}},u.onImageAreaSelected=function(g){h._isNoViewer()||e.isFunction(h.__OnImageAreaSelected)&&h.__OnImageAreaSelected(g.index,g.left,g.top,g.right,g.bottom,g.areaIndex)},u.onImageAreaDeSelected=function(g){h._isNoViewer()||e.isFunction(h.__OnImageAreaDeSelected)&&h.__OnImageAreaDeSelected(g)},u.onBufferChanged=function(g){e.isFunction(h.__OnBufferChanged)&&h.__OnBufferChanged(g)}},__innerRefreshFromUIView:function(c,u){var h=c;e.isFunction(h.__OnRefreshUI)&&h.__OnRefreshUI(u)}}),e.html5.ui={init:function(c,u){var h;c._isBindViewer()?(u.container?c._containerElement=u.container:u.containerID&&(c._containerElement=e.get(u.containerID)),c._width=u.width,c._height=u.height,o(c),h=e.one(c._containerElement)):c._containerElement=null,c._ifBindViewer=u.ifBindViewer,function(c,u){var h={Stwain:c};if(c._isBindViewer()){var f,g=c._width,v=c._height,p=a;f=e.one(c._containerElement),e.isString(g)&&g.indexOf("%")>=0?(g=e.css(f,"width")*parseInt(g)/100,p=s):g=parseInt(g),e.isString(v)&&v.indexOf("%")>=0?(v=e.css(f,"height")*parseInt(v)/100,p=s):v=parseInt(v),h={Stwain:c,Container:u,Width:g,Height:v}}n.bindUIViewEvents(c,h),c._ImgManager?(c._ImgManager&&c._ImgManager._UIView&&c._ImgManager._UIView.BackgroundColor&&(h.BackgroundColor=c._ImgManager._UIView.BackgroundColor),c._ImgManager._Init(c,h)):c._ImgManager=new e.UI.ImageManager(c,h),p&&n.changeImageUISize(c,c._width,c._height)}(c,h),c._ifBindViewer||(function(c,u){var h=u||{};c.__OnImageAreaDeSelected=h.onImageAreaDeSelected||"",c.__OnImageAreaSelected=h.onImageAreaSelected||"",c.__OnMouseClick=h.onMouseClick||"",c.__OnMouseDoubleClick=h.onMouseDoubleClick||"",c.__OnMouseMove=h.onMouseMove||"",c.__OnMouseRightClick=h.onMouseRightClick||"",c.__OnTopImageInTheViewChanged=h.onTopImageInTheViewChanged||"",c.__OnBufferChanged=h.onBufferChanged||""}(c,c.config),c.__OnMouseClick=u.onMouseClick||"",c.__OnThumbnailMouseClick="",c.__OnKeyDown=u.onKeyDown||"",c.__OnMouseWheel=u.onMouseWheel||"",c.__OnMouseDoubleClick=u.onMouseDoubleClick||"",c.__OnMouseRightClick=u.onMouseRightClick||"",c.__OnMouseMove=u.onMouseMove||"",c.__OnImageAreaSelected=u.onImageAreaSelected||"",c.__OnImageAreaDeSelected=u.onImageAreaDeSelected||"",c.__OnRefreshUI=u.onRefreshUI||"",c.__OnBufferChanged=u.onBufferChanged||"",c.__MouseX=0,c.__MouseY=0,c.__style=new e.html5.STwainStyle(c),c.__fSelectionRectAspectRatio=0)},unLoad:function(c){var u=c._containerElement;u&&(u.innerHTML="")},initProgress:function(c){o(c)},addMethods:function(c){e.mix(c,{OverlayRectangle:function(u,h,f,g,v,p,m){var y,I=this;return I._resetErr(),!!I._isValid()&&(I._isNoViewer()?I._nouiNotSupport("OverlayRectangle"):h>g||f>v||h==g&&f==v?(e.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(I),!1):(y=e.isNumber(p)?e.getColor(p):p,I._ImgManager.OverlayRectangle(u,h,f,g,v,y,m)))},SetViewMode:function(u,h){var f=this;if(f._resetErr(),!f._isValid())return!1;if(f._isNoViewer())return f._nouiNotSupport("SetViewMode");if(e.isString(u)||e.isString(h)||u<-1&&h<-1)return e.Errors.InvalidValue(f),a;var g=Math.floor(u),v=Math.floor(h);return f._ImgManager.SetViewMode(g,v),!0},Print:function(u){var h=this;return h._resetErr(),!!h._isValid()&&(h._isNoViewer()?h._nouiNotSupport("Print"):!h._isMobileMode()&&u?h._innerSend("PrintEx",n.makeParams(!0),!0,function(){},function(){}):(h._ImgManager.Print(),!0))},PrintEx:function(u){var h=this;return h._resetErr(),!!h._isValid()&&(e.isArray(u)?h._isNoViewer()?h._nouiNotSupport("Print"):!!h._checkIndices(u)&&(h._ImgManager.PrintEx(u),!0):(e.Errors.IndicesNotArray(h),!1))},ShowImageEditor:function(u,h,f,g){var v=this;return v._resetErr(),!!v._isValid()&&(v._isNoViewer()?v._nouiNotSupport("ShowImageEditor"):!v._isMobileMode()&&n.isServerInvalid(v)?a:v._ImgManager.getWebViewer().bShowImageEdit?v.ShowImageEditorEx(-1,-1,-1,-1,3):u&&h&&f?v.ShowImageEditorEx(-1,-1,h,f,0,!0,u,g):v.ShowImageEditorEx(-1,-1,-1,-1,0,!1))},ShowImageEditorEx:function(u,h,f,g,v,p,m,I){var y=this;return y._resetErr(),!!y._isValid()&&(y._isNoViewer()?y._nouiNotSupport("ShowImageEditorEx"):y._ImgManager.ShowImageEditorEx(u,h,f,g,v,p,m,I))},SetSelectedImageArea:function(u,h,f,g,v){var p=this;if(p._resetErr(),!p._isValid())return!1;if(p._isNoViewer())return p._nouiNotSupport("SetSelectedImageArea");var m=parseInt(u);return isNaN(m)||m<0||m>=p._ImgManager.count()?(e.Errors.IndexOutOfRange(p),!1):!(!p._isMobileMode()&&n.isServerInvalid(p))&&p._ImgManager.SetSelectedImageArea(m,h,f,g,v)},first:function(){var u=this,h=u._ImgManager.count();return u._resetErr(),!!u._isValid()&&(u._isNoViewer()?u._nouiNotSupport("first"):(h>0&&(u._ImgManager.Go(0),n.__innerRefreshFromUIView(u,u._ImgManager.getCurrentImageIndex())),s))},previous:function(){var u=this,h=u._ImgManager.count();return u._resetErr(),!!u._isValid()&&(u._isNoViewer()?u._nouiNotSupport("previous"):(h>0&&(u._ImgManager.__Previous(),n.__innerRefreshFromUIView(u,u._ImgManager.getCurrentImageIndex())),s))},next:function(){var u=this,h=u._ImgManager.count();return u._resetErr(),!!u._isValid()&&(u._isNoViewer()?u._nouiNotSupport("next"):(h>0&&(u._ImgManager.__Next(),n.__innerRefreshFromUIView(u,u._ImgManager.getCurrentImageIndex())),s))},last:function(){var u=this,h=u._ImgManager.count();return u._resetErr(),!!u._isValid()&&(u._isNoViewer()?u._nouiNotSupport("last"):(h>0&&(u._ImgManager.Go(h-1),n.__innerRefreshFromUIView(u,u._ImgManager.getCurrentImageIndex())),s))}})}}}}),T.Ready(function(e,r){if(e.product.bHTML5Edition){var i=e.html5.Funs,d=i.DEF;e.attachPropertyUI=function(c){d(c,"Width",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("Width"),""):c._ImgManager.GetWidth():""},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("Width"):c._ImgManager.SetWidth(u))}}),d(c,"Height",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("Height"),""):c._ImgManager.GetHeight():""},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("Height"):c._ImgManager.SetHeight(u))}}),d(c,"AllowMultiSelect",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?c._nouiNotSupport("AllowMultiSelect"):c._ImgManager.GetAllowMultiSelect():""},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("AllowMultiSelect"):void c._ImgManager.SetAllowMultiSelect(u))}}),d(c,"BackgroundColor",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("BackgroundColor"),""):c._ImgManager.GetBackgroundColor():""},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("BackgroundColor"):c._ImgManager.SetBackgroundColor(u))}}),d(c,"BackgroundFillColor",{get:function(){if(c._resetErr(),!c._isValid())return"";if(c._isNoViewer())return c._nouiNotSupport("BackgroundFillColor"),"";if(c._isMobileMode()){var u=c.__BackgroundFillColor;return e.isUndefined(u)&&(u=c._ImgManager._UIView.BackgroundFillColor),e.isNumber(u)?e.getColor(u):parseInt(u.slice(1),16)}var f=c._innerFun("BackgroundFillColor");return e.BGR2RGB(f)},set:function(u){if(c._resetErr(),!c._isValid())return!1;if(c._isNoViewer())return c._nouiNotSupport("BackgroundFillColor");var f,h=1*u;return!e.isNumber(h)||isNaN(h)?(e.Errors.InvalidValue(c),!1):c._isMobileMode()?(c._ImgManager._UIView.SetBackgroundFillColor(e.getColor(h)),c.__BackgroundFillColor=e.getColor(h),!0):(f=e.RGB2BGR(h),c._innerFun("BackgroundFillColor",i.makeParams(f)))}}),d(c,"FitWindowType",{get:function(){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?(c._nouiNotSupport("FitWindowType"),0):c._ImgManager.GetFitWindowType())},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("FitWindowType"):c._ImgManager.SetFitWindowType(1*u))}}),d(c,"IfFitWindow",{get:function(){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("IfFitWindow"):c._ImgManager.GetIfFitWindow())},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("IfFitWindow"):c._ImgManager.SetIfFitWindow(!!u))}}),d(c,"ImageMargin",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("ImageMargin"),0):c._ImgManager.GetImageMargin():0},set:function(u){if(c._resetErr(),!c._isValid())return!1;if(c._isNoViewer())return c._nouiNotSupport("ImageMargin");var h=parseInt(u);return!isNaN(h)&&c._ImgManager.SetImageMargin(h)}}),d(c,"MouseX",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("MouseX"),0):c.__MouseX:0}}),d(c,"MouseY",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("MouseY"),0):c.__MouseY:0}}),d(c,"SelectionImageBorderColor",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("SelectionImageBorderColor"),""):c._ImgManager.GetSelectionImageBorderColor():""},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("SelectionImageBorderColor"):c._ImgManager.SetSelectionImageBorderColor(u))}}),d(c,"Zoom",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("Zoom"),0):c._ImgManager.GetZoom():0},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("Zoom"):c._ImgManager.SetZoom(u))}}),d(c,"MouseShape",{get:function(){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("MouseShape"):c._ImgManager.GetMouseShape()==T.DWT.EnumDWT_MouseShape.Hand)},set:function(u){if(c._resetErr(),!c._isValid())return!1;if(c._isNoViewer())return c._nouiNotSupport("MouseShape");var h=T.DWT.EnumDWT_MouseShape.Crosshair;return u&&(h=T.DWT.EnumDWT_MouseShape.Hand),c._ImgManager.SetMouseShape(h)}}),d(c,"SelectionRectAspectRatio",{get:function(){return c._resetErr(),c._isValid()?c._isNoViewer()?(c._nouiNotSupport("SelectionRectAspectRatio"),0):c._ImgManager.GetSelectionRectAspectRatio():0},set:function(u){if(c._resetErr(),!c._isValid())return!1;if(c._isNoViewer())return c._nouiNotSupport("SelectionRectAspectRatio");var h=parseFloat(u);return h>=0&&(c._ImgManager.SetSelectionRectAspectRatio(h),!0)}}),d(c,"ShowPageNumber",{get:function(){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("ShowPageNumber"):c._ImgManager.GetShowPageNumber())},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("ShowPageNumber"):c._ImgManager.SetShowPageNumber(u))}}),d(c,"IfAutoScroll",{get:function(){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("IfAutoScroll"):c._ImgManager.GetIfAutoScroll())},set:function(u){return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("IfAutoScroll"):c._ImgManager.SetIfAutoScroll(u))}})},e.detect.viewerScriptLoaded=!0}}),T.Ready(function(e,r){if(e.product.bPluginEdition||e.product.bActiveXEdition){var i=T.navInfo,n=!0,a=!1,s={isFunction:function(h){return h&&"function"==typeof h},isReturnSuccess:function(h){return-2115===h._errorCode?n:(-2003!==h._errorCode||T.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(h.HTTPPostResponseString),0==h._errorCode?n:a)},setErrorString:function(h){h._errorCode=h.getSWebTwain().ErrorCode,h._errorString=h.getSWebTwain().ErrorString},checkErrorString:function(h){return s.setErrorString(h),s.isReturnSuccess(h)},wrapperRet:function(h,f,g,v,p,m){if(s.checkErrorString(h)){if(s.isFunction(g))if(p)g(h.getSWebTwain().HTTPPostResponseString);else{if(m)return g(f),!0;g()}}else s.isFunction(v)&&(p?v(h._errorCode,h._errorString,h.getSWebTwain().HTTPPostResponseString):v(h._errorCode,h._errorString));return f},wrapperPromise:function(h,f){return f?e.Promise.resolve(!0):e.Promise.reject({errorCode:h._errorCode,errorString:h._errorString})},getImageType:function(h){if(h.length<4)return-1;var g=h.lastIndexOf(".");if(-1===g)return-1;var v=h.slice(g).toLowerCase();return".bmp"===v||".dib"===v?0:".jpg"===v||".jpe"===v||".jpeg"===v||".jfif"===v?1:".tif"===v||".tiff"===v?2:".png"===v?3:".pdf"===v?4:".gif"===v?5:-1},replaceLocalFilename:function(h){var f=h;return T.navInfoSync.bFileSystem&&(f=decodeURI(f)),f},makeParams:function(){var h=arguments;if(void 0!==h&&0!==h.length)return h}};e.checkErrorString=s.checkErrorString,e.wrapperRet=s.wrapperRet,e.setErrorString=s.setErrorString,e.DynamicLoadAddonFuns=[],e.attachAddon=function(h){if(i.bWin){var p,f=navigator.userAgent.toLowerCase(),g=!i.bOSx64||f.indexOf("wow64")>=0,v=h.getSWebTwain();p=g?"DynamicPdfCore_"+T.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+T.DWT.PdfVersion+".dll";try{v.GetAddOnVersion("pdf",p)}catch(m){}}e.each(e.DynamicLoadAddonFuns,function(m){e.isFunction(m)&&m(h)})},e.attachProperty=function(h){var f=h,g=function(v,p,m){var I;0!==p&&1!==p?I=p:(I={},p&&(I.set=1==m?function(y){return!e.isNumber(y*=1)||isNaN(y)?(e.Errors.InvalidValue(f),a):(f.getSWebTwain()[v]=y,s.checkErrorString(f))}:2==m?function(y){return e.isBoolean(y)?(f.getSWebTwain()[v]=y,s.checkErrorString(f)):(e.Errors.InvalidValue(f),a)}:function(y){return e.isString(y)?(f.getSWebTwain()[v]=y,s.checkErrorString(f)):(e.Errors.InvalidValue(f),a)})),I.get||(I.get=function(){var y=f.getSWebTwain()[v];return f._errorCode=f.getSWebTwain().ErrorCode,f._errorString=f.getSWebTwain().ErrorString,y}),v in f||Object.defineProperty(f,v,I)};g("ErrorCode",{get:function(v){return f._errorCode}}),g("ErrorString",{get:function(v){return f._errorString}}),g("LogLevel",1,1),g("Manufacturer",1),g("ProductFamily",1),g("ProductKey",{get:function(){return T.DWT.ProductKey},set:function(v){var p=n,m=v,I=T.DWT;return(!e.isString(m)||"******"==m)&&(m=""),I.ProductKey=m,f.__licenseInfo=a,""==m?(p=a,e.License.checkProductKey(f,{Core:n},a,n)):(f.GetLicenseInfo(m),p=s.checkErrorString(f)),p}}),g("ProductName",1),g("VersionInfo",1),g("BitDepth",1,1),g("Brightness",1,1),g("Contrast",1,1),g("CurrentSourceName",0),g("DataSourceStatus",0),g("DefaultSourceName",0),g("Duplex",0),g("IfAppendImage",1,2),g("IfAutoBright",1,2),g("IfAutoDiscardBlankpages",1,2),g("IfAutoFeed",1,2),g("IfAutomaticBorderDetection",1,2),g("IfAutomaticDeskew",1,2),g("IfAutoScan",1,2),g("IfDisableSourceAfterAcquire",1,2),g("IfDuplexEnabled",1,2),g("IfFeederEnabled",1,2),g("IfModalUI",1,2),g("IfScanInNewThread",1,2),g("IfShowCancelDialogWhenImageTransfer",1,2),g("IfShowUI",1,2),g("IfShowIndicator",1,2),g("IfUseTwainDSM",1,2),g("IfFeederLoaded",0,2),g("IfPaperDetectable",0,2),g("IfUIControllable",0,2),g("ImageBitsPerPixel",0),g("ImageCaptureDriverType",1,1),g("ImageLayoutDocumentNumber",0),g("ImageLayoutFrameBottom",0),g("ImageLayoutFrameLeft",0),g("ImageLayoutFrameNumber",0),g("ImageLayoutFrameRight",0),g("ImageLayoutFrameTop",0),g("ImageLayoutPageNumber",0),g("ImageLength",0),g("ImagePixelType",0),g("ImageWidth",0),g("ImageXResolution",0),g("ImageYResolution",0),g("MagData",0),g("MagType",0),g("PageSize",1,1),g("PendingXfers",0),g("PixelFlavor",1,1),g("PixelType",1,1),g("Resolution",1,1),g("SourceCount",0),g("TransferMode",1,1),g("Unit",1,1),g("XferCount",1,1),g("Capability",1,1),g("CapCurrentIndex",1,1),g("CapCurrentValue",1,1),g("CapDefaultIndex",0),g("CapDefaultValue",0),g("CapDescription",1),g("CapMaxValue",1,1),g("CapMinValue",1,1),g("CapNumItems",1,1),g("CapStepSize",1,1),g("CapType",1,1),g("CapValue",1,1),g("CapValueString",1),g("CapValueType",1,1),g("AllowMultiSelect",1,2),g("BackgroundColor",1,1),g("BackgroundFillColor",1,1),g("BlankImageCurrentStdDev",0),g("BlankImageMaxStdDev",1,1),g("BlankImageThreshold",1,1),g("CurrentImageIndexInBuffer",{set:function(v){return v!=f.getSWebTwain().CurrentImageIndexInBuffer&&(f.getSWebTwain().CurrentImageIndexInBuffer=v),s.checkErrorString(f)}}),g("FitWindowType",1,1),g("HowManyImagesInBuffer",0),g("IfFitWindow",1,2),g("ImageMargin",1,1),g("MaxImagesInBuffer",1,1),g("MouseX",0),g("MouseY",0),g("SelectionImageBorderColor",1),g("Zoom",1,1),g("MouseShape",1,2),g("SelectedImagesIndices",{get:function(){for(var v=[],p=f.getSWebTwain().SelectedImagesCount,m=0;m<p;m++)v.push(f.getSWebTwain().GetSelectedImageIndex(m));return v}}),g("HTTPPostResponseString",0),g("AsyncMode",1,2),g("FTPPassword",1),g("FTPPort",{set:function(v){return""!==v?(v*=1,f.getSWebTwain().FTPPort=v,s.checkErrorString(f)):a}}),g("FTPUserName",1),g("HTTPPort",{set:function(v){return""!==v?(v*=1,f.getSWebTwain().HTTPPort=v,s.checkErrorString(f)):(v=e.detect.ssl?443:80,f.getSWebTwain().HTTPPort=v,s.checkErrorString(f))}}),g("HTTPPassword",1),g("HTTPUserName",1),g("IfPASVMode",1,2),g("IfShowProgressBar",1,2),g("ProxyServer",1),g("IfShowFileDialog",1,2),g("IfTiffMultiPage",1,2),g("PDFAuthor",1),g("PDFCompressionType",1,1),g("PDFCreationDate",1),g("PDFCreator",1),g("PDFKeywords",1),g("PDFModifiedDate",1),g("PDFProducer",1),g("PDFSubject",1),g("PDFTitle",1),g("PDFVersion",1),g("TIFFCompressionType",1,1),g("JPEGQuality",{set:function(v){return(v*=1)>=100?v=100:v<0&&(v=0),f.getSWebTwain().JPEGQuality=v,s.checkErrorString(f)}}),g("HttpContentTypeFieldValue",1),g("SelectionRectAspectRatio",1,1),g("IfAllowLocalCache",1,2),g("_AutoCropMethod",1,2),g("BrokerProcessType",1,1),g("BorderStyle",1,1),g("IfShowPrintUI",1,2),g("VScrollBar",1,2),g("EnableInteractiveZoom",1,2),g("ImageEditorIfEnableEnumerator",1,2),g("ImageEditorIfReadonly",1,2),g("ImageEditorIfModal",1,2),g("ImageEditorWindowTitle",1),g("IfSSL",1,2),g("AllowPluginAuthentication",1,2),g("HttpFieldNameOfUploadedImage",1),g("MaxInternetTransferThreads",1,1),g("MaxUploadImageSize",1,1),g("IfOpenImageWithGDIPlus",1,2),g("BufferMemoryLimit",1,1),g("Width",{get:function(){return f.getSWebTwain().style.width},set:function(v){return f._ChangeWidth(v),s.checkErrorString(f)}}),g("Height",{get:function(){return f.getSWebTwain().style.height},set:function(v){return f._ChangeHeight(v),s.checkErrorString(f)}}),g("IfThrowException",1,2),g("IfAutoScroll",1,2),g("ShowPageNumber",{get:function(){return a},set:function(v){return a}}),g("UseLocalService",{get:function(){return!0}})},e.attachMethod=function(h){var f=h,g=function(y){return e.License.checkProductKey(f,{Core:n})?n:(e.isFunction(y)&&y(f.ErrorCode,f.ErrorString),a)},v=function(y,_){return e.License.checkPDFProductKeyWhenNeeds(f,y)?n:(e.isFunction(_)&&_(f.ErrorCode,f.ErrorString),a)},p=function(y,_){return 0!=y.HowManyImagesInBuffer||(e.Errors.NoImage(y),e.isFunction(_)&&_(y.ErrorCode,y.ErrorString),!1)},m=function(y,_,C){return!(!p(y,C)||(isNaN(_)||!e.isNumber(_)||_<0||_>=y.HowManyImagesInBuffer)&&(e.Errors.IndexOutOfRange(y),e.isFunction(C)&&C(y.ErrorCode,y.ErrorString),1))};h.RegisterEvent=function(y,_){if(!e.isString(y)||"onwsmessage"===y.toLowerCase())return e.Errors.InvalidEventName(f),!1;if("onpostalltransfers"===y.toLowerCase())return e.isFunction(_)&&(f.__OnPostAllTransfers=_),!0;var C=["__",y].join("");return f[C]=_,f.getSWebTwain().RegisterEvent(y,_),s.checkErrorString(f)},h.onEvent=function(y,_){return f.RegisterEvent(y,_)},h.on=function(y,_){return f.RegisterEvent(y,_)},h._isMobileMode=function(){return!1},h.CancelAllPendingTransfers=function(){return f.getSWebTwain().CancelAllPendingTransfers(),s.checkErrorString(f)},h.CloseSource=function(){return f.getSWebTwain().CloseSource(),s.checkErrorString(f)},h.CloseSourceManager=function(){return f.getSWebTwain().CloseSourceManager(),s.checkErrorString(f)},h.DisableSource=function(){return f.getSWebTwain().DisableSource(),s.checkErrorString(f)},h.FeedPage=function(){return f.getSWebTwain().FeedPage(),s.checkErrorString(f)},h.GetDeviceType=function(){var y=f.getSWebTwain().GetDeviceType();return s.setErrorString(f),y},h.GetSourceNameItems=function(y){var _=f.getSWebTwain().GetSourceNameItems(y);return s.setErrorString(f),_},h.SourceNameItems=function(y){var _=f.getSWebTwain().GetSourceNameItems(y);return s.setErrorString(f),_},h.GetSourceNames=function(){return e.Errors.ActiveXNotSupport(f),[]},h.GetSourceType=function(y){var _=f.getSWebTwain().GetSourceType(y);return s.setErrorString(f),_},h.OpenSource=function(){return f.getSWebTwain().OpenSource(),s.checkErrorString(f)},h.OpenSourceManager=function(){return f.getSWebTwain().OpenSourceManager(),s.checkErrorString(f)},h.ResetImageLayout=function(){return f.getSWebTwain().ResetImageLayout(),s.checkErrorString(f)},h.RewindPage=function(){return f.getSWebTwain().RewindPage(),s.checkErrorString(f)},h.SelectSource=function(y,_){return e.isUndefined(y)?(f.getSWebTwain().SelectSource(),s.checkErrorString(f)):(f.getSWebTwain().SelectSource(),s.checkErrorString(f)?(y(),!0):(_(),!1))},h.SelectSourceByIndex=function(y){return f.getSWebTwain().SelectSourceByIndex(y),s.checkErrorString(f)},h.CloseSourceAsync=function(){return s.wrapperPromise(f,f.CloseSource())},h.CloseSourceManagerAsync=function(){return s.wrapperPromise(f,f.CloseSourceManager())},h.GetSourceNamesAsync=function(){return s.wrapperPromise(f,f.GetSourceNames())},h.GetSourceTypeAsync=function(y){return s.wrapperPromise(f,f.GetSourceType(y))},h.OpenSourceAsync=function(){return s.wrapperPromise(f,f.OpenSource())},h.OpenSourceManagerAsync=function(){return s.wrapperPromise(f,f.OpenSourceManager())},h.SelectSourceAsync=function(){return s.wrapperPromise(f,f.SelectSource())},h.SelectSourceByIndexAsync=function(y){return s.wrapperPromise(f,f.SelectSourceByIndex(y))},h.SetFileXferInfo=function(y,_){var C=s.replaceLocalFilename(y);return f.getSWebTwain().SetFileXferInfo(C,_),s.checkErrorString(f)},h.SetImageLayout=function(y,_,C,A){return f.getSWebTwain().SetImageLayout(y,_,C,A),s.checkErrorString(f)},h.CapGet=function(){var y=f.getSWebTwain().CapGet();return s.setErrorString(f),y},h.CapGetCurrent=function(){var y=f.getSWebTwain().CapGetCurrent();return s.setErrorString(f),y},h.CapGetDefault=function(){var y=f.getSWebTwain().CapGetDefault();return s.setErrorString(f),y},h.CapGetFrameBottom=function(y){var _=f.getSWebTwain().CapGetFrameBottom(y);return s.setErrorString(f),_},h.CapGetFrameLeft=function(y){var _=f.getSWebTwain().CapGetFrameLeft(y);return s.setErrorString(f),_},h.CapGetFrameRight=function(y){var _=f.getSWebTwain().CapGetFrameRight(y);return s.setErrorString(f),_},h.CapGetFrameTop=function(y){var _=f.getSWebTwain().CapGetFrameTop(y);return s.setErrorString(f),_},h.CapGetHelp=function(){var y=f.getSWebTwain().CapGetHelp();return s.setErrorString(f),y},h.CapGetLabel=function(){var y=f.getSWebTwain().CapGetLabel();return s.setErrorString(f),y},h.CapGetLabels=function(){var y=f.getSWebTwain().CapGetLabels();return s.setErrorString(f),y},h.CapIfSupported=function(y){var _=f.getSWebTwain().CapIfSupported(y);return s.setErrorString(f),_},h.CapReset=function(){return f.getSWebTwain().CapReset(),s.checkErrorString(f)},h.CapSet=function(){return f.getSWebTwain().CapSet(),s.checkErrorString(f)},h.CapSetFrame=function(y,_,C,A,M){return f.getSWebTwain().CapSetFrame(y,_,C,A,M),s.checkErrorString(f)},h.GetCapItems=function(y){var _=f.getSWebTwain().GetCapItems(y);return s.setErrorString(f),_},h.GetCapItemsString=function(y){var _=f.getSWebTwain().GetCapItemsString(y);return s.setErrorString(f),_},h.SetCapItems=function(y,_){return f.getSWebTwain().SetCapItems(y,_),s.checkErrorString(f)},h.SetCapItemsString=function(y,_){return f.getSWebTwain().SetCapItemsString(y,_),s.checkErrorString(f)},h.AddText=function(y,_,C,A,M,E,R,x){var P=parseInt(y);return isNaN(P)||P<0||P>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().AddText(P,_,C,A,M,E,R,x),s.checkErrorString(f))},h.CreateTextFont=function(y,_,C,A,M,E,R,x,P,F,k,w,S,L){return f.getSWebTwain().CreateTextFont(y,_,C,A,M,E,R,x,P,F,k,w,S,L),s.checkErrorString(f)},h.CopyToClipboard=function(y){var _=parseInt(y);return isNaN(_)||_<0||_>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CopyToClipboard(_),s.checkErrorString(f))},h.Erase=function(y,_,C,A,M,E,R){var P,x=parseInt(y);return isNaN(x)||x<0||x>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(R)&&R(f.ErrorCode,f.ErrorString),!1):(P=f.getSWebTwain().Erase(x,_,C,A,M),s.wrapperRet(f,P,E,R))},h.GetImageBitDepth=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().GetImageBitDepth(_);return s.setErrorString(f),C},h.GetImageWidth=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().GetImageWidth(_);return s.setErrorString(f),C},h.GetImageHeight=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().GetImageHeight(_);return s.setErrorString(f),C},h.GetImageSize=function(y,_,C){var A=parseInt(y);if(isNaN(A)||A<0||A>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var M=f.getSWebTwain().GetImageSize(A,_,C);return s.setErrorString(f),M},h.GetImageSizeWithSpecifiedType=function(y,_){var C=parseInt(y);if(isNaN(C)||C<0||C>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var A=f.getSWebTwain().GetImageSizeWithSpecifiedType(C,_);return s.setErrorString(f),A},h.GetImageXResolution=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().GetImageXResolution(_);return s.setErrorString(f),C},h.GetImageYResolution=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().GetImageYResolution(_);return s.setErrorString(f),C},h.CopyToClipboardAsync=function(y){return s.wrapperPromise(f,f.CopyToClipboard(y))},h.EraseAsync=function(y,_,C,A,M){return s.wrapperPromise(f,f.Erase(y,_,C,A,M))},h.GetImageBitDepthAsync=function(y){return s.wrapperPromise(f,f.GetImageBitDepth(y))},h.GetImageWidthAsync=function(y){return s.wrapperPromise(f,f.GetImageWidth(y))},h.GetImageHeightAsync=function(y){return s.wrapperPromise(f,f.GetImageHeight(y))},h.GetImageSizeAsync=function(y,_,C){return s.wrapperPromise(f,f.GetImageSize(y,_,C))},h.GetImageSizeWithSpecifiedTypeAsync=function(y,_){return s.wrapperPromise(f,f.GetImageSizeWithSpecifiedType(y,_))},h.GetImageXResolutionAsync=function(y){return s.wrapperPromise(f,f.GetImageXResolution(y))},h.GetImageYResolutionAsync=function(y){return s.wrapperPromise(f,f.GetImageYResolution(y))},h.SelectAllImages=function(){var _,y=f.getSWebTwain().HowManyImagesInBuffer,C=[];for(f.getSWebTwain().SelectedImagesCount=y,_=0;_<y;_++)f.getSWebTwain().SetSelectedImageIndex(_,_),C.push(_);return s.checkErrorString(f),C},h.SelectImages=function(y){var _=y.length;f.getSWebTwain().SelectedImagesCount=_;for(var C=0;C<_;C++)f.getSWebTwain().SetSelectedImageIndex(C,y[C]);return s.checkErrorString(f)},h.GetSelectedImagesSize=function(y){var _=f.getSWebTwain().GetSelectedImagesSize(y);return s.setErrorString(f),_},h.GetSkewAngle=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().GetSkewAngle(A),s.wrapperRet(f,M,_,C,!1,!0))},h.GetSkewAngleEx=function(y,_,C,A,M,E,R){var P,x=parseInt(y);return isNaN(x)||x<0||x>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(R)&&R(f.ErrorCode,f.ErrorString),!1):(P=f.getSWebTwain().GetSkewAngleEx(x,_,C,A,M),s.wrapperRet(f,P,E,R))},h.IsBlankImage=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().IsBlankImage(_);return s.setErrorString(f),C},h.IsBlankImageEx=function(y,_,C,A,M,E){var R=parseInt(y);if(isNaN(R)||R<0||R>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var x=f.getSWebTwain().IsBlankImageEx(R,_,C,A,M,E);return s.setErrorString(f),x},h.Mirror=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().Mirror(A),s.wrapperRet(f,M,_,C))},h.OverlayRectangle=function(y,_,C,A,M,E,R){return f.getSWebTwain().OverlayRectangle(y,_,C,A,M,E,R),s.checkErrorString(f)},h.RemoveAllImages=function(){var y;return f.getSWebTwain().RemoveAllImages(),(y=s.checkErrorString(f))&&f.__innerRefreshImage(),f.Width=parseInt(f.Width)+2,y},h.RemoveAllSelectedImages=function(){var y;return f.getSWebTwain().RemoveAllSelectedImages(),(y=s.checkErrorString(f))&&f.__innerRefreshImage(),y},h.RemoveImage=function(y){var _=parseInt(y);return isNaN(_)||_<0||_>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().RemoveImage(_),s.checkErrorString(f))},h.MirrorAsync=function(y){return s.wrapperPromise(f,f.Mirror(y))},h.RemoveAllImagesAsync=function(){return s.wrapperPromise(f,f.RemoveAllImages())},h.RemoveAllSelectedImagesAsync=function(){return s.wrapperPromise(f,f.RemoveAllSelectedImages())},h.RemoveImageAsync=function(y){return s.wrapperPromise(f,f.RemoveImage(y))},h.Rotate=function(y,_,C,A,M){var R,E=parseInt(y);return isNaN(E)||E<0||E>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(M)&&M(f.ErrorCode,f.ErrorString),!1):(R=f.getSWebTwain().Rotate(E,_,C),s.wrapperRet(f,R,A,M))},h.RotateEx=function(y,_,C,A,M,E){var x,R=parseInt(y);return isNaN(R)||R<0||R>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(E)&&E(f.ErrorCode,f.ErrorString),!1):(x=f.getSWebTwain().RotateEx(R,_,C,A),s.wrapperRet(f,x,M,E))},h.RotateLeft=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().RotateLeft(A),s.wrapperRet(f,M,_,C))},h.RotateRight=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().RotateRight(A),s.wrapperRet(f,M,_,C))},h.ChangeImageSize=function(y,_,C,A,M,E){var x,R=parseInt(y);return isNaN(R)||R<0||R>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(E)&&E(f.ErrorCode,f.ErrorString),!1):_<=0||C<=0?(e.Errors.InvalidWidthOrHeight(f),e.isFunction(E)&&E(f.ErrorCode,f.ErrorString),!1):(x=f.getSWebTwain().ChangeImageSize(R,_,C,A),s.wrapperRet(f,x,M,E))},h.Flip=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().Flip(A),s.wrapperRet(f,M,_,C))},h.Crop=function(y,_,C,A,M,E,R){var P,x=parseInt(y);return isNaN(x)||x<0||x>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(R)&&R(f.ErrorCode,f.ErrorString),!1):(P=f.getSWebTwain().Crop(x,_,C,A,M),s.wrapperRet(f,P,E,R))},h.CropToClipboard=function(y,_,C,A,M){var E=parseInt(y);return isNaN(E)||E<0||E>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CropToClipboard(E,_,C,A,M),s.checkErrorString(f))},h.CutFrameToClipboard=function(y,_,C,A,M){var E=parseInt(y);return isNaN(E)||E<0||E>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CutFrameToClipboard(E,_,C,A,M),s.checkErrorString(f))},h.CutToClipboard=function(y){var _=parseInt(y);return isNaN(_)||_<0||_>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().CutToClipboard(_),s.checkErrorString(f))},h.RotateAsync=function(y,_,C){return s.wrapperPromise(f,f.Rotate(y,_,C))},h.RotateExAsync=function(y,_,C,A){return s.wrapperPromise(f,f.RotateEx(y,_,C,A))},h.RotateLeftAsync=function(y){return s.wrapperPromise(f,f.RotateLeft(y))},h.RotateRightAsync=function(y){return s.wrapperPromise(f,f.RotateRight(y))},h.ChangeImageSizeAsync=function(y,_,C,A){return s.wrapperPromise(f,f.ChangeImageSize(y,_,C,A))},h.FlipAsync=function(y){return s.wrapperPromise(f,f.Flip(y))},h.CropAsync=function(y,_,C,A,M){return s.wrapperPromise(f,f.Crop(y,_,C,A,M))},h.CropToClipboardAsync=function(y,_,C,A,M){return s.wrapperPromise(f,f.CropToClipboard(y,_,C,A,M))},h.CutFrameToClipboardAsync=function(y,_,C,A,M){return s.wrapperPromise(f,f.CutFrameToClipboard(y,_,C,A,M))},h.CutToClipboardAsync=function(y){return s.wrapperPromise(f,f.CutToClipboard(y))},h.InvertAsync=function(y){return s.wrapperPromise(f,f.Invert(y))},h.Invert=function(y){var _=parseInt(y);return isNaN(_)||_<0||_>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(e.Errors.ActiveXNotSupport(f),!1)},h.SetDPI=function(y,_,C,A,M,E,R){var P,x=parseInt(y);return isNaN(x)||x<0||x>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(R)&&R(f.ErrorCode,f.ErrorString),!1):(P=f.getSWebTwain().SetDPI(x,_,C,A,M),s.wrapperRet(f,P,E,R))},h.SetViewMode=function(y,_){return f.getSWebTwain().SetViewMode(y,_),s.checkErrorString(f)},h.GetViewModeH=function(){var y=f.getSWebTwain().GetViewModeH();return s.setErrorString(f),y},h.GetViewModeV=function(){var y=f.getSWebTwain().GetViewModeV();return s.setErrorString(f),y},h.MoveImage=function(y,_){var C=parseInt(y),A=parseInt(_);return isNaN(C)||C<0||C>=f.HowManyImagesInBuffer||isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().MoveImage(C,A),s.checkErrorString(f))},h.SwitchImage=function(y,_){var C=parseInt(y),A=parseInt(_);return isNaN(C)||C<0||C>=f.HowManyImagesInBuffer||isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().SwitchImage(C,A),s.checkErrorString(f))},h.Print=function(){return f.getSWebTwain().Print(),s.checkErrorString(f)},h.checkErrorString=function(){return s.isReturnSuccess(f)},h.FileExists=function(y){var _=s.replaceLocalFilename(y),C=f.getSWebTwain().FileExists(_);return s.setErrorString(f),C},h.SaveAllAsMultiPageTIFF=function(y,_,C){if(!p(f,C))return!1;var M,A=s.replaceLocalFilename(y);return M=f.getSWebTwain().SaveAllAsMultiPageTIFF(A),s.wrapperRet(f,M,_,C)},h.SaveAllAsPDF=function(y,_,C){if(!p(f,C))return!1;var M,A=s.replaceLocalFilename(y);return M=f.getSWebTwain().SaveAllAsPDF(A),s.wrapperRet(f,M,_,C)},h.SaveAsBMP=function(y,_,C,A){if(!m(f,_,A))return!1;var E,M=s.replaceLocalFilename(y);return E=f.getSWebTwain().SaveAsBMP(M,_),s.wrapperRet(f,E,C,A)},h.SaveAsJPEG=function(y,_,C,A){if(!m(f,_,A))return!1;var E,M=s.replaceLocalFilename(y);return E=f.getSWebTwain().SaveAsJPEG(M,_),s.wrapperRet(f,E,C,A)},h.SaveAsPDF=function(y,_,C,A){if(!m(f,_,A))return!1;var E,M=s.replaceLocalFilename(y);return E=f.getSWebTwain().SaveAsPDF(M,_),s.wrapperRet(f,E,C,A)},h.SaveAsPNG=function(y,_,C,A){if(!m(f,_,A))return!1;var E,M=s.replaceLocalFilename(y);return E=f.getSWebTwain().SaveAsPNG(M,_),s.wrapperRet(f,E,C,A)},h.SaveAsTIFF=function(y,_,C,A){if(!m(f,_,A))return!1;var E,M=s.replaceLocalFilename(y);return E=f.getSWebTwain().SaveAsTIFF(M,_),s.wrapperRet(f,E,C,A)},h.SaveSelectedImagesAsMultiPagePDF=function(y,_,C){var M,A=s.replaceLocalFilename(y);return M=f.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(A),s.wrapperRet(f,M,_,C)},h.SaveSelectedImagesAsMultiPageTIFF=function(y,_,C){var M,A=s.replaceLocalFilename(y);return M=f.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(A),s.wrapperRet(f,M,_,C)},h.SaveSelectedImagesToBase64Binary=function(y,_){var C=f.getSWebTwain().SaveSelectedImagesToBase64Binary();return s.wrapperRet(f,C,y,_)},h.ShowFileDialog=function(y,_,C,A,M,E,R,x){return f.getSWebTwain().ShowFileDialog(y,_,C,A,M,E,R,x),s.checkErrorString(f)},h.FTPDownload=function(y,_,C,A){if(!g(A))return!1;var M=f.getSWebTwain().FTPDownload(y,_);return M&&e.License.isLTS()&&T.DWT.lcvrf(f),s.wrapperRet(f,M,C,A)},h.FTPDownloadDirectly=function(y,_,C,A,M){if(!g(M))return!1;var E=f.getSWebTwain().FTPDownloadDirectly(y,_,C);return s.wrapperRet(f,E,A,M)},h.FTPDownloadEx=function(y,_,C,A,M){if(!g(M))return!1;if(C!=T.DWT.EnumDWT_ImageType.IT_BMP&&C!=T.DWT.EnumDWT_ImageType.IT_JPG&&C!=T.DWT.EnumDWT_ImageType.IT_TIF&&C!=T.DWT.EnumDWT_ImageType.IT_PNG&&C!=T.DWT.EnumDWT_ImageType.IT_PDF&&C!=T.DWT.EnumDWT_ImageType.IT_J2K&&(C=-1),!v(C,M))return a;var E=f.getSWebTwain().FTPDownloadEx(y,_,C);return s.wrapperRet(f,E,A,M)},h.FTPUpload=function(y,_,C,A,M){if(!g(M))return!1;var E=f.getSWebTwain().FTPUpload(y,_,C);return s.wrapperRet(f,E,A,M)},h.FTPUploadDirectly=function(y,_,C,A,M){if(!g(M))return!1;var E=f.getSWebTwain().FTPUploadDirectly(y,_,C);return s.wrapperRet(f,E,A,M)},h.FTPUploadEx=function(y,_,C,A,M,E){if(!g(E))return!1;var R=f.getSWebTwain().FTPUploadEx(y,_,C,A);return s.wrapperRet(f,R,M,E)},h.FTPUploadAllAsMultiPageTIFF=function(y,_,C,A){if(!g(A))return!1;var M=f.getSWebTwain().FTPUploadAllAsMultiPageTIFF(y,_);return s.wrapperRet(f,M,C,A)},h.FTPUploadAllAsPDF=function(y,_,C,A){if(!g(A))return!1;var M=f.getSWebTwain().FTPUploadAllAsPDF(y,_);return s.wrapperRet(f,M,C,A)},h.FTPUploadAsMultiPagePDF=function(y,_,C,A){var M=f.getSWebTwain().FTPUploadAsMultiPagePDF(y,_);return s.wrapperRet(f,M,C,A)},h.FTPUploadAsMultiPageTIFF=function(y,_,C,A){var M=f.getSWebTwain().FTPUploadAsMultiPageTIFF(y,_);return s.wrapperRet(f,M,C,A)},h.HTTPDownloadDirectly=function(y,_,C,A,M){if(!g(M))return!1;var E=f.getSWebTwain().HTTPDownloadDirectly(y,_,C);return s.wrapperRet(f,E,A,M)},h.HTTPDownload=function(y,_,C,A){var E=s.getImageType(_);return f.HTTPDownloadEx(y,_,E,C,A)},h.HTTPDownloadEx=function(y,_,C,A,M){if(!g(M)||(C!=T.DWT.EnumDWT_ImageType.IT_BMP&&C!=T.DWT.EnumDWT_ImageType.IT_JPG&&C!=T.DWT.EnumDWT_ImageType.IT_TIF&&C!=T.DWT.EnumDWT_ImageType.IT_PNG&&C!=T.DWT.EnumDWT_ImageType.IT_PDF&&C!=T.DWT.EnumDWT_ImageType.IT_J2K&&(C=-1),!v(C,M)))return a;var E=f.getSWebTwain().HTTPDownloadEx(y,_,C);return E&&e.License.isLTS()&&T.DWT.lcvrf(f),s.wrapperRet(f,E,A,M)},h.HTTPDownloadThroughGet=h.HTTPDownloadEx,h.HTTPUploadThroughPostDirectly=function(y,_,C,A,M,E){if(!g(E))return!1;var R=f.getSWebTwain().HTTPUploadThroughPostDirectly(y,_,C,A);return s.wrapperRet(f,R,M,E,!0)},h.HTTPUploadThroughPost=function(y,_,C,A,M,E){if(!e.isNumber(_)||isNaN(_)||_<-2)return e.Errors.IndexOutOfRange(f),e.isFunction(E)&&E(f.ErrorCode,f.ErrorString),!1;var R=f.getSWebTwain().HTTPUploadThroughPost(y,_,C,A);return s.wrapperRet(f,R,M,E,!0)},h.HTTPUploadThroughPostEx=function(y,_,C,A,M,E,R){if(!e.isNumber(_)||isNaN(_)||_<-2)return e.Errors.IndexOutOfRange(f),e.isFunction(R)&&R(f.ErrorCode,f.ErrorString),!1;var x=f.getSWebTwain().HTTPUploadThroughPostEx(y,_,C,A,M);return s.wrapperRet(f,x,E,R,!0)},h.ClearAllHTTPFormField=function(){return f.getSWebTwain().ClearAllHTTPFormField(),s.checkErrorString(f)},h.SetHTTPFormField=function(y,_){return f.getSWebTwain().SetHTTPFormField(y,_),s.checkErrorString(f)},h.HTTPUploadAllThroughPostAsMultiPageTIFF=function(y,_,C,A,M){var E;return E=f.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(y,_,C),s.wrapperRet(f,E,A,M,!0)},h.HTTPUploadThroughPostAsMultiPageTIFF=function(y,_,C,A,M){var E;return E=f.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(y,_,C),s.wrapperRet(f,E,A,M,!0)},h.HTTPUploadAllThroughPostAsPDF=function(y,_,C,A,M){var E;return E=f.getSWebTwain().HTTPUploadAllThroughPostAsPDF(y,_,C),s.wrapperRet(f,E,A,M,!0)},h.HTTPUploadThroughPostAsMultiPagePDF=function(y,_,C,A,M){var E;return E=f.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(y,_,C),s.wrapperRet(f,E,A,M,!0)},h.HTTPUploadThroughPutDirectly=function(y,_,C,A,M){var E;return E=f.getSWebTwain().HTTPUploadThroughPutDirectly(y,_,C),s.wrapperRet(f,E,A,M)},h.HTTPUploadThroughPut=function(y,_,C,A,M){var E=s.getImageType(C);return f.HTTPUploadThroughPutEx(y,_,C,E,A,M)},h.HTTPUploadThroughPutEx=function(y,_,C,A,M,E){var R;return R=f.getSWebTwain().HTTPUploadThroughPutEx(y,_,C,A),s.wrapperRet(f,R,M,E)},h.HTTPUploadAllThroughPutAsMultiPageTIFF=function(y,_,C,A){return f.HTTPUploadThroughPutEx(y,-1,_,2,C,A)},h.HTTPUploadThroughPutAsMultiPageTIFF=function(y,_,C,A){return f.HTTPUploadThroughPutEx(y,-2,_,2,C,A)},h.HTTPUploadAllThroughPutAsPDF=function(y,_,C,A){return f.HTTPUploadThroughPutEx(y,-1,_,4,C,A)},h.HTTPUploadThroughPutAsMultiPagePDF=function(y,_,C,A){return f.HTTPUploadThroughPutEx(y,-2,_,4,C,A)},h.ShowImageEditor=function(){return f.getSWebTwain().ShowImageEditor(),s.checkErrorString(f)},h.SetCookie=function(y){return f.getSWebTwain().SetCookie(y),s.checkErrorString(f)},h.LoadImageFromBase64Binary=function(y,_){if(!g()||(_!=T.DWT.EnumDWT_ImageType.IT_BMP&&_!=T.DWT.EnumDWT_ImageType.IT_JPG&&_!=T.DWT.EnumDWT_ImageType.IT_TIF&&_!=T.DWT.EnumDWT_ImageType.IT_PNG&&_!=T.DWT.EnumDWT_ImageType.IT_PDF&&_!=T.DWT.EnumDWT_ImageType.IT_J2K&&(_=-1),!v(_)))return a;var C=f.getSWebTwain().LoadImageFromBase64Binary(y,_);return s.setErrorString(f),C},h.SaveSelectedImagesToBytes=function(y,_){var C=f.getSWebTwain().SaveSelectedImagesToBytes(y,_);return s.setErrorString(f),C},h.LoadImageFromBytes=function(y,_,C){if(!g()||(C!=T.DWT.EnumDWT_ImageType.IT_BMP&&C!=T.DWT.EnumDWT_ImageType.IT_JPG&&C!=T.DWT.EnumDWT_ImageType.IT_TIF&&C!=T.DWT.EnumDWT_ImageType.IT_PNG&&C!=T.DWT.EnumDWT_ImageType.IT_PDF&&C!=T.DWT.EnumDWT_ImageType.IT_J2K&&(C=-1),!v(C)))return a;var A=f.getSWebTwain().LoadImageFromBytes(y,_,C);return s.setErrorString(f),A},h.UnregisterEvent=function(y,_){return f.getSWebTwain().UnregisterEvent(y,_),s.checkErrorString(f)},h.SetImageWidth=function(y,_,C,A){var E,M=parseInt(y);return isNaN(M)||M<0||M>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(A)&&A(f.ErrorCode,f.ErrorString),!1):(E=f.getSWebTwain().SetImageWidth(M,_),s.wrapperRet(f,E,C,A))},h.HTTPDownloadThroughPost=function(y,_,C,A,M){if(!g(M))return!1;if(C!=T.DWT.EnumDWT_ImageType.IT_BMP&&C!=T.DWT.EnumDWT_ImageType.IT_JPG&&C!=T.DWT.EnumDWT_ImageType.IT_TIF&&C!=T.DWT.EnumDWT_ImageType.IT_PNG&&C!=T.DWT.EnumDWT_ImageType.IT_PDF&&C!=T.DWT.EnumDWT_ImageType.IT_J2K&&(C=-1),!v(C,M))return a;var E=f.getSWebTwain().HTTPDownloadThroughPost(y,_,C);return s.wrapperRet(f,E,A,M)},h.SetCustomDSDataEx=function(y){return f.getSWebTwain().SetCustomDSDataEx(y),s.checkErrorString(f)},h.SetCustomDSData=function(y){return f.getSWebTwain().SetCustomDSData(y),s.checkErrorString(f)},h.GetCustomDSDataEx=function(){var y=f.getSWebTwain().GetCustomDSDataEx();return s.setErrorString(f),y},h.GetCustomDSData=function(y){var _=f.getSWebTwain().GetCustomDSData(y);return s.setErrorString(f),_},h.ChangeBitDepth=function(y,_,C){var A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),!1):(f.getSWebTwain().ChangeBitDepth(A,_,C),s.checkErrorString(f))},h.ConvertToGrayScale=function(y,_,C){var M,A=parseInt(y);return isNaN(A)||A<0||A>=f.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(f),e.isFunction(C)&&C(f.ErrorCode,f.ErrorString),!1):(M=f.getSWebTwain().ConvertToGrayScale(y),s.wrapperRet(f,M,_,C))},h.ShowImageEditorEx=function(y,_,C,A,M){return f.getSWebTwain().ShowImageEditorEx(y,_,C,A,M),s.checkErrorString(f)},h.ClearTiffCustomTag=function(){return f.getSWebTwain().ClearTiffCustomTag(),s.checkErrorString(f)},h.SetTiffCustomTag=function(y,_,C){var A=1*y;return T.Lib.isUndef(y)||T.Lib.isUndef(_)?(T.Lib.Errors.InvalidParameter(f),!1):A<=0||A>2147483647?(T.Lib.Errors.InvalidTiffTagError(f),!1):(f.getSWebTwain().SetTiffCustomTag(y,_,C),s.checkErrorString(f))},h.IsBlankImageExpress=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),!1;var C=f.getSWebTwain().IsBlankImageExpress(_);return s.setErrorString(f),C},h._ChangeWidth=function(y){var C,_=document.getElementById(f._strDWTInnerContainerID);if(e.isString(y)&&y.length>0&&"%"===y.charAt(y.length-1)&&(C=y),!C){var A=parseInt(y);A&&A>2&&(C=A-2+"px")}return C&&(f._strWidth=C,f.getSWebTwain().style.width=C,_&&(_.style.width=C)),n},h._ChangeHeight=function(y){var C,_=document.getElementById(f._strDWTInnerContainerID);if(e.isString(y)&&y.length>0&&"%"===y.charAt(y.length-1)&&(C=y),!C){var A=parseInt(y);A&&(C=A+"px")}return C&&(f._strHeight=C,f.getSWebTwain().style.height=C,_&&(_.style.height=C)),n},h.SetSize=function(y,_){return this._ChangeWidth(y),this._ChangeHeight(_),n},h.SetSelectedImageArea=function(y,_,C,A,M){return f.getSWebTwain().SetSelectedImageArea(y,_,C,A,M),s.checkErrorString(f)},h.SetVideoRotateMode=function(y){return f.getSWebTwain().SetVideoRotateMode(y),s.checkErrorString(f)},h.SetOpenSourceTimeout=function(y){return f.getSWebTwain().SetOpenSourceTimeout(y),s.checkErrorString(f)},h.SetHTTPHeader=function(y,_){return!1},h.GetImageURL=function(y,_,C){return""},h.GetImagePartURL=function(y){var _=parseInt(y);if(isNaN(_)||_<0||_>=f.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(f),"";var C=f.getSWebTwain().GetDIB(_);return s.setErrorString(f),C},h.GetLicenseInfo=function(y){try{var _=!1;e.License.isLTS()?_=!0:f.getSWebTwain().ProductKey=y;var C=f.getSWebTwain().GetLicenseInfo();if(s.checkErrorString(f)){var A=e.parse(C);A&&A.message?(e.Errors.LicenseEmptyOrInvalid(f),f._errorString=A.message,A=void 0):_&&(A&&e.isArray(A.Detail)&&A.Detail.length>0&&T.DWT.lsexp(T.DWT.EnumInstance.dwt_desktop,A.Detail[0].ExpireDate),A.LTS=!0),f.__licenseInfo=A}else f.__licenseInfo=void 0}catch(E){f.__licenseInfo=void 0}return Promise.resolve(f.__licenseInfo)},h.LoadDibFromClipboard=function(y,_){var C=f.getSWebTwain().LoadDibFromClipboard();return C&&e.License.isLTS()&&T.DWT.lcvrf(f),s.wrapperRet(f,C,y,_)},h.LoadImage=function(y,_,C){if(!g(C))return!1;var M,A=s.replaceLocalFilename(y);return(M=f.getSWebTwain().LoadImage(A))&&e.License.isLTS()&&T.DWT.lcvrf(f),s.wrapperRet(f,M,_,C)},h.LoadImageEx=function(y,_,C,A){if(!g(A)||(_!=T.DWT.EnumDWT_ImageType.IT_BMP&&_!=T.DWT.EnumDWT_ImageType.IT_JPG&&_!=T.DWT.EnumDWT_ImageType.IT_TIF&&_!=T.DWT.EnumDWT_ImageType.IT_PNG&&_!=T.DWT.EnumDWT_ImageType.IT_PDF&&_!=T.DWT.EnumDWT_ImageType.IT_J2K&&(_=-1),!v(_,A)))return a;var R,M=s.replaceLocalFilename(y),E=_;return E==T.DWT.EnumDWT_ImageType.IT_ALL&&(E=-1),(R=f.getSWebTwain().LoadImageEx(M,E))&&e.License.isLTS()&&T.DWT.lcvrf(f),s.wrapperRet(f,R,C,A)},h.EnableSource=function(y,_,C){return f.AcquireImage(y,_,C),s.checkErrorString(f)},h.AcquireImage=function(y,_,C){var P,A=f.getSWebTwain(),E=null,R=null,x=null;return e.isUndefined(C)&&(e.isFunction(y)&&e.isFunction(_)||e.isFunction(y)&&e.isUndefined(_)||e.isFunction(y)&&null==_||null==y&&e.isFunction(_))?(E=null,e.isFunction(y)&&(R=y),e.isFunction(_)&&(x=_)):(E=e.isUndefined(y)||null==y?{}:e.clone(y),e.isFunction(_)&&(R=function(){_(E)}),e.isFunction(C)&&(x=function(){C(E,f._errorCode,f._errorString)})),!!g(x)&&(null!=E&&(null!=(P=E.SelectSourceByIndex)&&void 0!==P&&(A.SelectSourceByIndex(P),A.CloseSource(),A.OpenSource()),null!=(P=E.IfShowUI)&&void 0!==P&&(A.IfShowUI=P),null!=(P=E.PixelType)&&void 0!==P&&(A.PixelType=P),null!=(P=E.Resolution)&&void 0!==P&&(A.Resolution=P),null!=(P=E.IfFeederEnabled)&&void 0!==P&&(A.IfFeederEnabled=P),null!=(P=E.IfDuplexEnabled)&&void 0!==P&&(A.IfDuplexEnabled=P),null!=(P=E.IfDisableSourceAfterAcquire)&&void 0!==P&&(A.IfDisableSourceAfterAcquire=P)),f.getSWebTwain().RegisterEvent("OnPostTransferAsync",function(F){var k;F&&e.isString(F)&&(k=e.parse(F)),e.isFunction(f.__OnPostTransferAsync)&&f.__OnPostTransferAsync(k)}),f.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){s.checkErrorString(f)?(e.License.isLTS()&&T.DWT.lcvrf(f),e.isFunction(R)&&R()):e.isFunction(x)&&x(f._errorCode,f._errorString),e.isFunction(f.__OnPostAllTransfers)&&f.__OnPostAllTransfers()}),A.AcquireImage(),s.checkErrorString(f))},h.GenerateURLForUploadData=function(y,_,C){return s.wrapperRet(f,!0,_,C)},h._innerFun=function(y,_,C){var A=f.getSWebTwain(),M=A[y];return"function"==typeof M?M.apply(A,_):M},h.ActiveUI=function(y,_){},h.startScan=function(){return new Promise(function(y,_){})},h.IndexToImageID=function(y){return y},h.ImageIDToIndex=function(y){return y},h.first=function(){return f.HowManyImagesInBuffer>0&&(f.CurrentImageIndexInBuffer=0,f.__innerRefreshImage()),n},h.previous=function(){var _;return f.HowManyImagesInBuffer>0&&(_=f.CurrentImageIndexInBuffer)>0&&(f.CurrentImageIndexInBuffer=_-1,f.__innerRefreshImage()),n},h.next=function(){var _,y=f.HowManyImagesInBuffer;return y>0&&(_=f.CurrentImageIndexInBuffer)>=0&&_<y-1&&(f.CurrentImageIndexInBuffer=_+1,f.__innerRefreshImage()),n},h.last=function(){var y=f.HowManyImagesInBuffer;return y>0&&(f.CurrentImageIndexInBuffer=y-1,f.__innerRefreshImage()),n},h.isUsingActiveX=function(){return!0},h.show=function(){return h.ShowImageEditor()},h.SetLTSInfo=function(y,_){return f.getSWebTwain().SetLTSInfo(y,_)},h.EnableBuffer=function(y){return f.getSWebTwain().Encrypt(y,0)},h.GetBuffer=function(y){return f.getSWebTwain().GetBuffer(y)},h.GetUUID=function(){return f.getSWebTwain().GetUUID()},h.__OnDispatchThumbnailEvt=function(y,_,C){1==C?e.isFunction(h["__"+y+"_Thumbnail"])&&("OnMouseClick"==y||"OnMouseDoubleClick"==y||"OnMouseMove"==y||"OnMouseWheel"==y||"OnKeyDown"==y?h["__"+y+"_Thumbnail"]():h["__"+y+"_Thumbnail"](_)):e.isFunction(h["__"+y])&&h["__"+y](_)},h._OnImageAreaSelected=function(y,_,C,A,M,E){var R="OnImageAreaSelected";1==E?e.isFunction(h["__"+R+"_Thumbnail"])&&h["__"+R+"_Thumbnail"](y,_,C,A,M):e.isFunction(h["__"+R])&&h["__"+R](y,_,C,A,M)};var I=function(y,_){(e.isFunction(y["__"+_])||e.isFunction(y["__"+_+"_Thumbnail"]))&&("OnImageAreaSelected"==_?y.getSWebTwain().RegisterEvent(_,y._OnImageAreaSelected):y.getSWebTwain().RegisterEvent(_,function(C,A){return y.__OnDispatchThumbnailEvt(_,C,A)}))};h.getSourceCount=function(y){return e.Errors.ActiveXNotSupport(f),e.Promise.resolve(f.getSWebTwain().SourceCount)},h.GetSourceCountAsync=function(y){return e.Errors.ActiveXNotSupport(f),e.Promise.resolve(f.getSWebTwain().SourceCount)},h._resetErr=function(){this._errorCode=0,this._errorString="";var y=T.DWT.licenseException;y.code=0,y.message=""},h._setConvertModeInner=function(y){if(!e.License.checkProductKey(f,{Core:!0}))return!1;var _=1*y;return f._resetErr(),isNaN(_)?(e.Errors.ParameterCannotEmpty(f),!1):1!=_&&2!=_&&3!=_&&4!=_?(e.Errors.InvalidValue(f),!1):(f._pdfConvertMode=_,f._pdfRealConvertMode=2==_||e.License.hasPDFRProductKey(f)?_:2,!0)},h._setConvertMode=function(y){return!!f._setConvertModeInner(y)&&(f.getSWebTwain().SetPDFConvertMode(f._pdfRealConvertMode),!(2==f._pdfRealConvertMode&&1==f._pdfConvertMode||2==f._pdfRealConvertMode&&4==f._pdfConvertMode)||(e.Errors.LicenseNoPDF(f),!1))},h.__innerRefreshImage=function(){var y=f.HowManyImagesInBuffer;y>0&&f.__OnRefreshUI&&f.__OnRefreshUI(f.CurrentImageIndexInBuffer,y)},h.__OnBitmapChangedEx=function(y,_,C,A,M){if(M>-1&&h._blts&&(1==_||2==_)){var w=T.DWT.lgct(M);e.isFunction(f.__OnLtsverify)&&f.__OnLtsverify(w,1)}},h._attachEvents=function(){var _,y=f.getSWebTwain();!((_=T.Lib.detect.getVersionArray(String(f.VersionInfo))).length<=2||_[0]<9||9==_[0]&&_[1]<=2)&&(""!=f.__OnPostTransfer&&y.RegisterEvent("OnPostTransfer",f.__OnPostTransfer),""!=f.__OnPostAllTransfers&&y.RegisterEvent("OnPostAllTransfers",f.__OnPostAllTransfers),""!=f.__OnPostLoad&&y.RegisterEvent("OnPostLoad",f.__OnPostLoad),I(f,"OnMouseClick"),I(f,"OnImageAreaSelected"),I(f,"OnTopImageInTheViewChanged"),I(f,"OnImageAreaDeSelected"),I(f,"OnMouseDoubleClick"),I(f,"OnMouseRightClick"),I(f,"OnMouseMove"),""!=f.__OnGetFilePath&&y.RegisterEvent("OnGetFilePath",f.__OnGetFilePath),""!=f.__OnAfterOperate&&y.RegisterEvent("OnAfterOperate",f.__OnAfterOperate),""!=f.__OnBeforeOperate&&y.RegisterEvent("OnBeforeOperate",f.__OnBeforeOperate),""!=f.__OnOperateStatus&&y.RegisterEvent("OnOperateStatus",f.__OnOperateStatus),""!=f.__OnBitmapChanged&&y.RegisterEvent("OnBitmapChanged",f.__OnBitmapChanged),""!=f.__OnBitmapChangedEx&&y.RegisterEvent("OnBitmapChangedEx",f.__OnBitmapChangedEx),""!=f.__OnPreAllTransfers&&y.RegisterEvent("OnPreAllTransfers",f.__OnPreAllTransfers),""!=f.__OnPreTransfer&&y.RegisterEvent("OnPreTransfer",f.__OnPreTransfer),""!=f.__OnSourceUIClose&&y.RegisterEvent("OnSourceUIClose",f.__OnSourceUIClose),""!=f.__OnTransferCancelled&&y.RegisterEvent("OnTransferCancelled",f.__OnTransferCancelled),""!=f.__OnTransferError&&y.RegisterEvent("OnTransferError",f.__OnTransferError),""!=f.__OnInternetTransferPercentage&&y.RegisterEvent("OnInternetTransferPercentage",f.__OnInternetTransferPercentage),""!=f.__OnInternetTransferPercentageEx&&y.RegisterEvent("OnInternetTransferPercentageEx",f.__OnInternetTransferPercentageEx),I(f,"OnMouseWheel"),I(f,"OnKeyDown"),I(f,"OnPaintDone"))}},e.noControl=function(h){if(T.DWT.IfUseEmbeddedDownloadNoticeForActiveX)if(e.isFunction(e.detect.onNoControl))e.detect.onNoControl(e.get(h._containerID),h._strWidth,h._strHeight);else for(var f=e.detect.arySTwains,g=0;g<f.length;g++){var v=f[g];v._vPluginExist||(u(v),e.show(v._strDWTNonInstallInnerContainerID),e.hide(v._strDWTInnerContainerID))}else{window;var m=e.product,I="";e.isFunction(T.OnWebTwainNotFoundOnWindowsCallback)&&(I=i.bIE||m.bHTML5Edition?T.dcp.getDSPath():m.getMSIPath(),T.OnWebTwainNotFoundOnWindowsCallback(m.name,I,m.bHTML5Edition,i.bIE,i.bSafari,e.detect.ssl,e.env.strIEVersion))}}}function u(h){var p,f=h,g=e.get(f._strDWTNonInstallInnerContainerID),v="";""==g.innerHTML&&(T.DWT.ActiveXInstallWithCAB&&i.bIE?p=["<div style='display: block; border:solid black 1px; text-align:center; width:",f._strWidth,";height:",f._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join(""):(location,v=e.product.bHTML5Edition||i.bIE?T.dcp.getDSPath():i.bWin?e.product.getMSIPath():e.product.getPKGPath(),p=["<div style='display: block; border:solid black 1px; text-align:center; width:",f._strWidth,";height:",f._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",v,"'>Download</a></li>","</ul></div>"].join("")),g.innerHTML=p)}}),T.Ready(function(e,r){var i=T.navInfoSync.IEVersion<=8;if(e.product.bPluginEdition||e.product.bActiveXEdition){e.attachAxViewerPropertyUI=function(h){var f=function(g,v){g in h||Object.defineProperty(h,g,v)};f("width",{get:function(){return h._stwain.Width},set:function(g){return h._stwain.Width=g,e.checkErrorString(h._stwain)}}),f("height",{get:function(){return h._stwain.Height},set:function(g){return h._stwain.Height=g,e.checkErrorString(h._stwain)}}),f("background",{get:function(){return h._stwain.BackgroundColor},set:function(g){return h._stwain.BackgroundColor=g,g}}),f("cursor",{get:function(){return h._stwain.MouseShape?"pointer":"crosshair"},set:function(g){return h._stwain.MouseShape="pointer"==g,g}}),f("showPageNumber",{get:function(){return!1},set:function(g){return!1}}),f("ifAutoScroll",{get:function(){return h._stwain.IfAutoScroll},set:function(g){return h._stwain.IfAutoScroll=g,g}}),f("pageMargin",{get:function(){return h._stwain.ImageMargin},set:function(g){return h._stwain.ImageMargin=g,g}}),f("zoom",{get:function(){return h._stwain.Zoom},set:function(g){return h._stwain.Zoom=g,g}})},e.attachAxViewerFunctions=function(h){h.next=function(){return this._stwain.next()},h.previous=function(){return this._stwain.previous()},h.first=function(){return this._stwain.first()},h.last=function(){return this._stwain.last()},h.gotoPage=function(f){var g=this,v=1*f;return e.isNaN(v)||!e.isNumber(v)?(e.Errors.InvalidIndex(g._stwain),!1):v<0||v>=g._stwain.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(g._stwain),!1):(g._stwain.CurrentImageIndexInBuffer=v,v)},h.setSelectedAreas=function(f){return this._stwain.SetSelectedImageArea(this._stwain.CurrentImageIndexInBuffer,f.left,f.top,f.right,f.bottom)},h.fitWindow=function(f){var g=this;return"height"==f?(g._stwain.IfFitWindow=!0,g._stwain.FitWindowType=T.DWT.EnumDWT_FitWindowType.enumFitWindowHeight):"width"==f?(g._stwain.IfFitWindow=!0,g._stwain.FitWindowType=T.DWT.EnumDWT_FitWindowType.enumFitWindowWidth):(g._stwain.IfFitWindow=!0,g._stwain.FitWindowType=T.DWT.EnumDWT_FitWindowType.enumFitWindow),!0},h.setViewMode=function(f,g){return this._stwain.SetViewMode(f,g)},h.createImageEditor=function(){return this._stwain},h.on=function(f,g){var p,v=this;return""!=(p=v._convertEvtName(f))&&("OnImageAreaSelected"==p?(v.OnImageAreaSelected=function(m,I,y,_,C){g(m,[{x:I,y,width:_-I,height:C-y}])},v._stwain.RegisterEvent(p,v.OnImageAreaSelected)):v._stwain.RegisterEvent(p,g))},h.off=function(f,g){var p,v=this;return""!=(p=v._convertEvtName(f))&&("OnImageAreaSelected"==p?v.OnImageAreaSelected?v._stwain.UnregisterEvent(p,v.OnImageAreaSelected):v._stwain.UnregisterEvent(p):v._stwain.UnregisterEvent(p,g))},h.createThumbnailViewer=function(f){var g=this;if(g._thumbnailViewer)e.Errors.ThumbnailViewerExist(g._stwain);else{var v=new e.UI.ThumbnailViewer(g._stwain,f);g._thumbnailViewer=v.getInstance()}return g._thumbnailViewer},h._convertEvtName=function(f){if(!e.isString(f))return"";var g=e.trim(f).toLowerCase();return"toppagechanged"==g?"OnTopImageInTheViewChanged":"click"==g?"OnMouseClick":"dblclick"==g?"OnMouseDoubleClick":"mousemove"==g?"OnMouseMove":"rightclick"==g?"OnMouseRightClick":"wheel"==g?"OnMouseWheel":"keydown"==g?"OnKeyDown":"pageareaselected"==g?"OnImageAreaSelected":"pageareaunselected"==g?"OnImageAreaDeSelected":e.trim(f)}},n.prototype.getInstance=function(){return i?this.fackControl:this};var c={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:"transparent",pageBorder:"1px solid rgb(238, 238, 238)",hoverPageBackground:"rgb(239, 246, 253)",hoverPageBorder:"1px solid rgb(238, 238, 238)",placeholderBackground:"rgb(251, 236, 136)",autoChangeIndex:!1};u.prototype.getInstance=function(){return i?this.fackControl:this},e.attachViewerFunctionsThumbnailUI=function(h){h.show=function(){h._stwain?(h._stwain.getSWebTwain().SetViewMode(-1,-1),h._stwain.getSWebTwain().ShowThumbnail('{"mode":"show"}')):e.Errors.ThumbnailViewerDispose(h._stwain)},h.hide=function(){h._stwain?h._stwain.getSWebTwain().ShowThumbnail('{"mode":"hide"}'):e.Errors.ThumbnailViewerDispose(h._stwain)},h.dispose=function(){h.hide(),h._stwain=null},h.updateViewMode=function(f){if(h._stwain){if(f&&f.columns&&f.rows){if(f.columns<0||f.rows<0)return e.Errors.InvalidPropertyValue(h._stwain),!1;h._stwain.getSWebTwain().ShowThumbnail('{"columns":'+f.columns+',"rows":'+f.rows+"}")}}else e.Errors.ThumbnailViewerDispose(h._stwain)},h.on=function(f,g){var v=f,p=!1;!e.isFunction(g)||("click"==v&&(v="OnMouseClick"),"rightclick"==v&&(v="OnMouseRightClick"),"dblclick"==v&&(v="OnMouseDoubleClick"),"mousemove"==v&&(v="OnMouseMove"),"wheel"==v&&(v="OnMouseWheel"),"keydown"==v&&(v="OnKeyDown"),"toppagechanged"==v&&(v="OnTopImageInTheViewChanged"),"pageareaselected"==v&&(v="OnImageAreaSelected"),"pageareaunselected"==v&&(v="OnImageAreaDeSelected"),"OnMouseClick"==v||"OnMouseDoubleClick"==v||"OnMouseRightClick"==v||"OnMouseMove"==v||"OnMouseWheel"==v||"OnKeyDown"==v||"OnPaintDone"==v||"OnImageAreaDeSelected"==v||"OnTopImageInTheViewChanged"==v?(!e.isFunction(h._stwain["__"+v])&&!e.isFunction(h._stwain["__"+v+"_Thumbnail"])&&(p=!0),h._stwain["__"+v+"_Thumbnail"]=g,p&&h._stwain.getSWebTwain().RegisterEvent(v,function(m,I){return h._stwain.__OnDispatchThumbnailEvt(v,m,I)})):"OnImageAreaSelected"==v&&(!e.isFunction(h._stwain["__"+v])&&!e.isFunction(h._stwain["__"+v+"_Thumbnail"])&&(p=!0),h._stwain["__"+v+"_Thumbnail"]=g,p&&h._stwain.getSWebTwain().RegisterEvent(v,h._stwain._OnImageAreaSelected)))},h.off=function(f,g){h._stwain["__"+f+"_Thumbnail"]=""}},e.attachViewerPropertyThumbnailUI=function(h){var f=function(g,v){g in h||Object.defineProperty(h,g,v)};f("location",{get:function(){return h._settings.location},set:function(g){h._settings.location=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"location":"'+g+'"}')}}),f("size",{get:function(){return h._settings.size},set:function(g){h._settings.size=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"size":"'+g+'"}')}}),f("pageMargin",{get:function(){return h._settings.pageMargin},set:function(g){h._settings.pageMargin=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"pageMargin":"'+g+'"}')}}),f("background",{get:function(){return h._settings.background},set:function(g){h._settings.background=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"background":"'+g+'"}')}}),f("pageBackground",{get:function(){return h._settings.pageBackground},set:function(g){h._settings.pageBackground=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"pageBackground":"'+g+'"}')}}),f("selectedPageBorder",{get:function(){return h._settings.selectedPageBorder},set:function(g){h._settings.selectedPageBorder=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBorder":"'+g+'"}')}}),f("selectedPageBackground",{get:function(){return h._settings.selectedPageBackground},set:function(g){h._settings.selectedPageBackground=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBackground":"'+g+'"}')}}),f("scrollDirection",{get:function(){return h._settings.scrollDirection},set:function(g){h._settings.scrollDirection=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"scrollDirection":"'+g+'"}')}}),f("showPageNumber",{get:function(){return h._settings.showPageNumber},set:function(g){h._settings.showPageNumber=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"showPageNumber":"'+g+'"}')}}),f("border",{get:function(){return h._settings.border},set:function(g){h._settings.border=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"border":"'+g+'"}')}}),f("pageBorder",{get:function(){return h._settings.pageBorder},set:function(g){h._settings.pageBorder=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"pageBorder":"'+g+'"}')}}),f("hoverPageBackground",{get:function(){return h._settings.hoverPageBackground},set:function(g){h._settings.hoverPageBackground=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBackground":"'+g+'"}')}}),f("hoverPageBorder",{get:function(){return h._settings.hoverPageBorder},set:function(g){h._settings.hoverPageBorder=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBorder":"'+g+'"}')}}),f("placeholderBackground",{get:function(){return h._settings.placeholderBackground},set:function(g){h._settings.placeholderBackground=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"placeholderBackground":"'+g+'"}')}}),f("allowKeyboardControl",{get:function(){return h._settings.allowKeyboardControl},set:function(g){h._settings.allowKeyboardControl=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"allowKeyboardControl":"'+g+'"}')}}),f("allowPageDragging",{get:function(){return h._settings.allowPageDragging},set:function(g){h._settings.allowPageDragging=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"allowPageDragging":"'+g+'"}')}}),f("allowResizing",{get:function(){return h._settings.allowResizing},set:function(g){h._settings.allowResizing=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"allowResizing":"'+g+'"}')}}),f("autoChangeIndex",{get:function(){return h._settings.autoChangeIndex},set:function(g){h._settings.autoChangeIndex=g,h._stwain&&h._stwain.getSWebTwain().ShowThumbnail('{"autoChangeIndex":"'+g+'"}')}})},e.UI=e.UI||{},e.UI.DWTAxViewer=n,e.UI.ThumbnailViewer=u}function n(h){var f=this;if(i){var g=document.createElement("div");document.body.appendChild(g),g._stwain=h._fakeControl,f.fackControl=g,e.attachAxViewerPropertyUI(f.fackControl),e.attachAxViewerFunctions(f.fackControl)}else f._stwain=h,e.attachAxViewerPropertyUI(f),e.attachAxViewerFunctions(f);f._thumbnailViewer=null}function u(h,f){var g=this,v=f;if(v){if(v.location)switch(v.location){case"left":v.location="horizontal",v.sequence=-1;break;case"right":v.location="horizontal",v.sequence=1;break;case"top":v.location="vertical",v.sequence=-1;break;case"bottom":v.location="vertical",v.sequence=1;break;default:v.location="horizontal",v.sequence=-1}else v.location="horizontal",v.sequence=-1;e.isUndefined(v.size)&&(v.size=c.size),e.isUndefined(v.columns)&&(v.columns=c.columns),e.isUndefined(v.rows)&&(v.rows=c.rows),(e.isUndefined(v.scrollDirection)||"horizontal"!=v.scrollDirection)&&(v.scrollDirection=c.scrollDirection),e.isUndefined(v.pageMargin)&&(v.pageMargin=c.pageMargin),e.isUndefined(v.allowKeyboardControl)&&(v.allowKeyboardControl=c.allowKeyboardControl),e.isUndefined(v.allowPageDragging)&&(v.allowPageDragging=c.allowPageDragging),e.isUndefined(v.allowResizing)&&(v.allowResizing=c.allowResizing),e.isUndefined(v.border)&&(v.border=c.border),e.isUndefined(v.pageBackground)&&(v.pageBackground=c.pageBackground),e.isUndefined(v.pageBorder)&&(v.pageBorder=c.pageBorder),e.isUndefined(v.hoverPageBackground)&&(v.hoverPageBackground=c.hoverPageBackground),e.isUndefined(v.hoverPageBorder)&&(v.hoverPageBorder=c.hoverPageBorder),e.isUndefined(v.placeholderBackground)&&(v.placeholderBackground=c.placeholderBackground),e.isUndefined(v.autoChangeIndex)&&(v.autoChangeIndex=c.autoChangeIndex)}else v=c;if(i){var p=document.createElement("div");document.body.appendChild(p),p._stwain=h,p._settings=v,g.fackControl=p,e.attachViewerPropertyThumbnailUI(g.fackControl),e.attachViewerFunctionsThumbnailUI(g.fackControl)}else g._stwain=h,g._settings=v,e.attachViewerPropertyThumbnailUI(g),e.attachViewerFunctionsThumbnailUI(g);h.getSWebTwain().SetViewMode(-1,-1),h.getSWebTwain().ShowThumbnail(JSON.stringify(v))}}),T.Ready(function(e,r){if(e.product.bActiveXEdition){var t=T.navInfo;i.prototype._createControl=function(){var n,l,a=this,s=a._strWidth,o=a._strHeight;e.isString(s)&&(s=s.indexOf("%")>0?"100%":parseInt(s)+2+"px"),e.isString(o)&&(o=o.indexOf("%")>0?"100%":parseInt(o)+2+"px"),(l=T.DWT.ActiveXInstallWithCAB?['<div id="',a._strDWTInnerContainerID,'" style="width:',s,";height:",o,'">','<object id="',a._strObjectName,'" style="width:',a._strWidth,";height:",a._strHeight,';border:1px solid #AAAAAA"',' codebase="',t.bWin64?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",T.DWT.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]:['<div id="',a._strDWTInnerContainerID,'" style="width:',s,";height:",o,'">','<object id="',a._strObjectName,'" style="width:',a._strWidth,";height:",a._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]).push('<div id="',a._strDWTNonInstallInnerContainerID,'" style="width: ',s,';display:none"></div>'),(n=document.getElementById(a._containerID))&&(n.innerHTML=l.join("")),a._fakeControl._objWebTwain=null,a._fakeControl.getSWebTwain=function(){var d=this;return null===d._objWebTwain&&(d._objWebTwain=document.getElementById(a._strObjectName)),d._objWebTwain}},i.prototype.getInstance=function(){return!!this._fakeControl.getSWebTwain()&&this._fakeControl},i.prototype._isMobileMode=function(){return!1},e.detect._controlDetect=function(){var n=e.detect.arySTwains,a=n[0],s=a&&a._fakeControl&&a._fakeControl.getSWebTwain();if(s){var o=T.DWT,d=!1;if(t.bIE){var h,c=navigator.userAgent.toLowerCase();h=!t.bOSx64||c.indexOf("wow64")>=0?"DynamicPdfCore_"+o.PdfVersion+".dll":"DynamicPdfCorex64_"+o.PdfVersion+".dll",0==s.ErrorCode&&""!=s.GetAddOnVersion("pdf",h)&&(d=!0)}else 0==s.ErrorCode&&(d=!0);if(d){clearInterval(e.detect._varSeed);var f=function(v,p,m){var I,y;for(I=0;I<n.length;I++)(y=n[I])._fakeControl.getSWebTwain(),e.__innerInitEvents(y._fakeControl,y.__config),y._fakeControl.__OnRefreshUI=y.__config.onRefreshUI||"",e.attachProperty(y._fakeControl),e.attachMethod(y._fakeControl),y._fakeControl._attachEvents(),e.detect.ssl&&(y._fakeControl.IfSSL=!0,y._fakeControl.HTTPPort=443),0==v?(y._fakeControl.GetLicenseInfo(p),y._setConvertMode(y._pdfConvertMode)):(y._fakeControl._blts=!0,""!=p&&""!=m?(y._fakeControl.SetLTSInfo(p,m),y._setConvertMode(y._pdfConvertMode),y._fakeControl.GetLicenseInfo().then(function(C){T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_desktop,C)})):y._fakeControl.__licenseInfo={LTS:!0,Detail:[]},T.DWT.laddDWTObj(y._fakeControl)),e.attachAddon(y._fakeControl),e.isFunction(y.__OnPluginReady)&&y.__OnPluginReady()};if(e.License.isLTS()){var g=T.DWT.li({instanceMode:T.DWT.EnumInstance.dwt_desktop,axInstance:s});if(!T.DWT.lisValidID(g))return void f(1,"","");T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(v){f(1,v.ar,v.cu)},function(v){v&&(T.DWT.lsetException(v.code||v.ltsErrorCode,v.message),T.DWT.OnLicenseException()),f(1,"","")})}else f(0,o.ProductKey,"")}else e.detect.bNoControlEvent||(e.noControl(a),e.detect.bNoControlEvent=!0),e.isFunction(s.__OnPluginNotReady)&&s.__OnPluginNotReady()}else clearInterval(e.detect._varSeed)},e.ie={},e.ie.DynamicWebTwain=function(n){var a=new i(n);return e.detect.arySTwains.push(a),a},e.ie.closeAll=function(){var a,s,o,n=e.detect.arySTwains;for(a=0;a<n.length;a++)(s=n[a])&&s._fakeControl&&(o=s._fakeControl.getSWebTwain())&&0==o.ErrorCode&&o.RemoveAllImages();e.detect.arySTwains=[]},T.DWT.RemoveAllAuthorizations=function(){return!1}}function i(n){var a=this,s=n||{};a._containerID=s.containerID||"dwtcontrolContainer",a._strWidth=s.width||270,a._strHeight=s.height||350,a._errorCode=0,a._errorString="",a.__licenseInfo=!1,e.isString(a._strWidth)&&a._strWidth.indexOf("%")>0||(a._strWidth=[parseInt(a._strWidth),"px"].join("")),e.isString(a._strHeight)&&a._strHeight.indexOf("%")>0||(a._strHeight=[parseInt(a._strHeight),"px"].join("")),a._strObjectName=a._containerID+"_Obj",a.__config=s,a.__OnPluginReady=s.onPluginReady,a.__OnPluginNotReady=s.onPluginNotReady,a.Addon={},a._pdfConvertMode=3,a._pdfRealConvertMode=3,a._strDWTInnerContainerID=a._containerID+"_CID",a._strDWTNonInstallInnerContainerID=a._containerID+"_NonInstallCID";var o=document.createElement("div");if(document.body.appendChild(o),a._fakeControl=o,e.UI.DWTAxViewer){var l=new e.UI.DWTAxViewer(a);o.Viewer=l.getInstance()}a._createControl()}}),T.Ready(function(e,r){if(e.product.bPluginEdition){var s,i=T.navInfo,n=document,a=navigator;(s=o.prototype).getSWebTwain=function(){return this._objectWebTwain},s._isMobileMode=function(){return!1},s.getInstance=function(){return!!this._objectWebTwain&&this},s._createControl=function(){var d,h,l=this,c=l._strWidth,u=l._strHeight;if(e.isString(c)&&(c=c.indexOf("%")>0?"100%":parseInt(c)+2+"px"),e.isString(u)&&(u=u.indexOf("%")>0?"100%":parseInt(u)+2+"px"),h=['<div id="',l._strDWTInnerContainerID,'" style="width:',c,";height:",u,'">'],i.bIE)T.DWT.ActiveXInstallWithCAB?h.push('<object id="',l._strObjectName,'" style="width:',l._strWidth,";height:",l._strHeight,';border:1px solid #AAAAAA"',' codebase="',i.bWin64?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",T.DWT.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):h.push('<object id="',l._strObjectName,'" style="width:',l._strWidth,";height:",l._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>");else{var f=l._strWidth;e.isString(f)&&-1==f.indexOf("%")&&(f=parseInt(f)-2+"px"),h.push('<embed id="',l._strObjectName,'" style="display: inline; width:',f,";height:",l._strHeight,'" type="',e.product.strMIMEType,'"',' pluginspage="',i.bWin?e.product.getMSIPath():e.product.getPKGPath(),'"></embed>')}h.push('</div><div id="',l._strDWTNonInstallInnerContainerID,'" style="width: ',c,';display:none"></div>'),(d=e.get(l._containerID))&&(d.innerHTML=h.join("")),l._objectWebTwain=e.get(l._strObjectName)},s._notAllowedForChrome=function(){if(!i.bIE){var d=this;a.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)&&(d.__OnNotAllowedForChrome?d.__OnNotAllowedForChrome(d._strDWTInnerContainerID):(d._createNonAllowedDivPlugin(),e.get(d._strDWTNonInstallInnerContainerID).style.display="inline",e.get(d._strDWTInnerContainerID).style.display="none"))}},s._createNonAllowedDivPlugin=function(){var l=this,d=e.get(l._strDWTNonInstallInnerContainerID);if(""==d.innerHTML){var c=l._strHeight;e.isString(c)&&-1==c.indexOf("%")&&(c=parseInt(c)-10+"px");var u=['<div style="display: block; border:1px solid black; width:',l._strWidth,";height:",c,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");d.innerHTML=u;for(var f=0;f<n.links.length;f++)"DWT_CloseNonAllowedDiv"==n.links[f].className&&(n.links[f].onclick=h)}function h(){e.get(l._strDWTNonInstallInnerContainerID).style.display="none",e.get(l._strDWTInnerContainerID).style.display="inline"}},e.detect._controlDetect=function(){var l=e.detect.arySTwains,d=l[0],c=d&&d._objectWebTwain;if(c){var u=T.DWT,h=!1;if(i.bIE){var v,f=navigator.userAgent.toLowerCase();v=!T.navInfo.bOSx64||f.indexOf("wow64")>=0?"DynamicPdfCore_"+u.PdfVersion+".dll":"DynamicPdfCorex64_"+u.PdfVersion+".dll",0==c.ErrorCode&&""!=c.GetAddOnVersion("pdf",v)&&(h=!0)}else 0==c.ErrorCode&&(h=!0);if(h){clearInterval(e.detect._varSeed);var p=function(M,E,R){var x,P;for(x=0;x<l.length;x++)e.attachProperty(P=l[x]),e.attachMethod(P),P._attachEvents(),e.detect.ssl&&(P.IfSSL=!0,P.HTTPPort=443),0==M?(P.GetLicenseInfo(E),P._setConvertMode(P._pdfConvertMode)):(P._blts=!0,""!=E&&""!=R?(P.SetLTSInfo(E,R),P._setConvertMode(P._pdfConvertMode),P.GetLicenseInfo().then(function(F){T.DWT.lcheckLic(T.DWT.EnumInstance.dwt_desktop,F)})):P.__licenseInfo={LTS:!0,Detail:[]},T.DWT.laddDWTObj(P)),e.attachAddon(P),P._objectWebTwain.BrokerProcessType=e.product._iBrokerProcessType,i.bWin||(P._objectWebTwain.ImageCaptureDriverType=e.product._iImageCaptureDriverType),e.isFunction(P.__OnPluginReady)&&P.__OnPluginReady()};if(e.License.isLTS()){var m=T.DWT.li({instanceMode:T.DWT.EnumInstance.dwt_desktop,axInstance:c});if(!T.DWT.lisValidID(m))return void p(1,"","");T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(M){p(1,M.ar,M.cu)},function(M){M&&(T.DWT.lsetException(M.code||M.ltsErrorCode,M.message),T.DWT.OnLicenseException()),p(1,"","")})}else p(0,u.ProductKey,"")}else{var I,y,_,C=a.mimeTypes;if(i.bIE)e.detect.bNoControlEvent||(e.noControl(d),e.detect.bNoControlEvent=!0);else{var A=!0;if(a.plugins.refresh(!1),e.env.iPluginLength!=a.plugins.length)for(I=0;I<C.length;I++)C[I].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1&&location.reload();for(I=0;I<C.length;I++)if(C[I].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1)for(_=0;_<l.length;_++)A=!1,(y=l[_])._vPluginExist=!0,0==y._vNotAllowedForChrome&&(y._notAllowedForChrome(),y._vNotAllowedForChrome=!0);A&&!e.detect.bNoControlEvent&&(e.noControl(d),e.detect.bNoControlEvent=!0)}e.isFunction(d.__OnPluginNotReady)&&d.__OnPluginNotReady()}}else clearInterval(e.detect._varSeed)},e.plugin={},e.plugin.DynamicWebTwain=function(l){var d=new o(l);return d._createControl(),e.detect.arySTwains.push(d),d},e.plugin.closeAll=function(){var d,c,u,l=e.detect.arySTwains;for(d=0;d<l.length;d++)(c=l[d])&&c._objectWebTwain&&(u=c._objectWebTwain)&&0==u.ErrorCode&&u.RemoveAllImages();e.detect.arySTwains=[]},T.DWT.RemoveAllAuthorizations=function(){return!1}}function o(l){var d=this,c=l||{};d._containerID=c.containerID||"dwtcontrolContainer",d._strWidth=c.width||270,d._strHeight=c.height||350,e.isString(d._strWidth)&&d._strWidth.indexOf("%")>0||(d._strWidth=[parseInt(d._strWidth),"px"].join("")),e.isString(d._strHeight)&&d._strHeight.indexOf("%")>0||(d._strHeight=[parseInt(d._strHeight),"px"].join("")),d._strObjectName=d._containerID+"_Obj",e.__innerInitEvents(d,c),d.__OnPluginReady=c.onPluginReady,d.__OnPluginNotReady=c.onPluginNotReady,d.__OnRefreshUI=c.onRefreshUI||"",d._objectWebTwain=null,d._strDWTInnerContainerID=d._containerID+"_CID",d._strDWTNonInstallInnerContainerID=d._containerID+"_NonInstallCID",d._vNotAllowedForChrome=!1,d._vPluginExist=!1,d.Addon={},d._pdfConvertMode=3,d._pdfRealConvertMode=3,e.UI.DWTAxViewer&&(d.Viewer=new e.UI.DWTAxViewer(d))}}),function(e,r,t){window.onbeforeunload=function(){T.DWT.Unload(),e.each(T.DWT.globalWS,function(j){try{j.close()}catch(q){}})};var i=T.navInfoSync,n=e,a=T.dcp,s=n.win,o=!0,l=!1,c=T.Lib.timestamp,u={bConnected:!1,_dwtVersionInfoSuccessCallback:function(j,q,re,de){if(e.isFunction(de)){var le=re[0],we=re.length>1?re[1]:"",Ae=re.length>2?re[2]:0,Se=re.length>3?re[3]:"",ye=re.length>4?re[4]:"";if(""!==we?(r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(we,T.DWT.EnumDWT_InitMsg.Error),_(de,2,r.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)):(r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage("The WebTwain version is: "+le,T.DWT.EnumDWT_InitMsg.Info),"64"==Ae&&(T.dcp.b64bit=!0),""!=Se&&T.DWT.lsmid(Se),u.bConnected=!0,de(0,j,q,le)),e.isFunction(T.OnSSLCertInfo)){var Ve=null;""!=ye&&(Ve=Date.parse(ye+"T00:00:00"),Ve=isNaN(Ve)?null:new Date(Ve)),T.OnSSLCertInfo(Ve)}}},versionInfo:function(j,q,re){var de,le=['{"id":"1","method":"VersionInfo","version":"',e.product.getDWTPrefix(),e.product.getServerVersionInfo(),'","parameter":[]}'].join(""),we=function(){u.bConnected=!1,r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,T.DWT.EnumDWT_InitMsg.NotInstalledError),re&&_(re,2,r.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)};r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.generalMessages.checkingDWTVersion,T.DWT.EnumDWT_InitMsg.Info),de=function(Se){var ye=a._getJSON(Se);ye&&"result"in ye&&e.isArray(ye=ye.result)&&ye.length>0?setTimeout(function(){u._dwtVersionInfoSuccessCallback(j,q,ye,re)},0):setTimeout(we,1e3)},T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition?a.postStringDataByWS(a.getWsUrl(j,q),le,de,we):e.ajax({method:"POST",url:[u._getPreUrl(j,q),"fa/VersionInfo?ts=",e.now()].join(""),data:le,onSuccess:de,onError:we})},_getPreUrl:function(j,q){return[i.bSSL?"https://":"http://",j,":",q,"/"].join("")}};e.DynamicWebTwain=l;var f,h=s.document,g=e.each,v="dwt",_=function(j,q,re,de){e.isFunction(j)&&setTimeout(function(){j(q,re,de)},10)};function C(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var j=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(j instanceof WebAssembly.Module)return new WebAssembly.Instance(j)instanceof WebAssembly.Instance}}catch(q){}return!1}e.__innerInitEvents=function(j,q){q&&g(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync","onKeyDown","onMouseWheel"],function(re){j["__O"+re.substring(1)]=q[re]||""})},e.replaceControl=function(j,q){r.ContainerMap[j]=q},f=function(j,q,re,de){var Ae,Se,le=e.product,we=n.getNavInfo();if(de&&de._customIP&&!e.isLocalIP(de._host))e.isFunction(T.OnRemoteWebTwainNotFoundCallback)&&T.OnRemoteWebTwainNotFoundCallback(le.name,de._host,de._port,de._ssl,e.env.bMobile);else if(we.bMac)j&&(e.one(j).before(e.install._strNonInstallDIV),(Ae=e.get(e.install._divDWTNonInstallContainerID))&&(Ae.style.width=q,Ae.style.height=re),e.show(e.install._divDWTNonInstallContainerID),e.hide(j)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(T.OnWebTwainNotFoundOnMacCallback)&&(Se=le.bHTML5Edition?T.dcp.getDSPath():e.product.getPKGPath(),T.OnWebTwainNotFoundOnMacCallback(le.name,Se,le.bHTML5Edition,we.bIE,we.bSafari,e.detect.ssl,e.env.strIEVersion));else if(we.bLinux||we.bArm64||we.bMips64||we.bChromeOS||we.bHarmonyOS){var Fe,Ve,ke;j&&(e.one(j).before(e.install._strNonInstallDIV),(Ae=e.get(e.install._divDWTNonInstallContainerID))&&(Ae.style.width=q,Ae.style.height=re),e.show(e.install._divDWTNonInstallContainerID),e.hide(j)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(T.OnWebTwainNotFoundOnLinuxCallback)&&(we.bArm64||we.bMips64||we.bChromeOS||we.bHarmonyOS?(Fe=T.dcp.getDSPath(),ke=we.bChromeOS?T.DWT.EnumDWT_PlatformType.enumChromeOS:we.bHarmonyOS?T.DWT.EnumDWT_PlatformType.enumHarmonyOS:T.DWT.EnumDWT_PlatformType.enumEmbed):(Fe=T.dcp.getLinuxHTML5DebPath(),Ve=T.dcp.getLinuxHTML5RpmPath(),ke=T.DWT.EnumDWT_PlatformType.enumLinux),T.OnWebTwainNotFoundOnLinuxCallback(le.name,Fe,Ve,le.bHTML5Edition,we.bIE,we.bSafari,e.detect.ssl,e.env.strIEVersion,ke))}else(we.bChrome||we.bSafari||we.bFirefox||we.bOpera||r.IfUseActiveXForIE10Plus==l||!r.ActiveXInstallWithCAB&&we.bIE)&&(j&&(e.one(j).before(e.install._strNonInstallDIV),(Ae=e.get(e.install._divDWTNonInstallContainerID))&&(Ae.style.width=q,Ae.style.height=re),e.show(e.install._divDWTNonInstallContainerID),e.hide(j)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(T.OnWebTwainNotFoundOnWindowsCallback)&&(Se="",Se=we.bIE||le.bHTML5Edition?T.dcp.getDSPath():le.getMSIPath(),T.OnWebTwainNotFoundOnWindowsCallback(le.name,Se,le.bHTML5Edition,we.bIE,we.bSafari,e.detect.ssl,e.env.strIEVersion)))},e.detect.getVersionArray=function(j){var q=j.toLowerCase().replace(e.product.name.toLowerCase()+" ","");return(q=e.replaceAll(q,"[.]",",")).split(",")},e.detect.isDWTVersionLatest=function(j){var q=n.getNavInfo();if(e.isUndefined(j))return l;var le,we,re=j.toString().toLowerCase(),de=e.detect.getVersionArray(re);le=q.bIE&&(e.product.bPluginEdition||e.product.bActiveXEdition)?r.ActiveXVersion:e.product.bPluginEdition?r.PluginVersion:e.product.getServerVersionInfo(!0),we=(le=e.replaceAll(String(le),"[.]",",")).split(",");for(var Ae=de.length>we.length?de.length:we.length,Se=0;Se<Ae;Se++){if(null==de[Se]&&(de[Se]=0),null==we[Se]&&(we[Se]=0),parseInt(de[Se])<parseInt(we[Se]))return l;if(parseInt(de[Se])>parseInt(we[Se]))return o}return o};var M=function(j){if(!e.detect.bNeedUpgradeEvent&&!e.detect.isDWTVersionLatest(j.VersionInfo)){if(e.detect.bNeedUpgradeEvent=o,!r.UseDefaultInstallUI&&e.isFunction(r.OnWebTwainNeedUpgrade))return void r.OnWebTwainNeedUpgrade();if(j&&j._customIP&&!e.isLocalIP(j._host))return void(e.isFunction(T.OnRemoteWebTwainNeedUpgradeCallback)&&T.OnRemoteWebTwainNeedUpgradeCallback(e.product.name,j._host,j._port,j._ssl));var re;(e.product.bHTML5Edition&&j._isBindViewer()||!e.product.bHTML5Edition)&&(e.product.bHTML5Edition?e.isString(re=j._containerElement)&&(re=e.get(re)):re=e.get(j._containerID),re&&(e.one(re).before(e.install._strNonInstallDIV),e.show(e.install._divDWTNonInstallContainerID),e.hide(re)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),function(j,q){var re=n.getNavInfo();if(e.isFunction(T.OnWebTwainNeedUpgradeCallback)){var le,we,Ae,Se,de={};if(re.bWin){if(re.bIE)we=T.dcp.getDSPath();else{var ye=e.product;we=ye.bHTML5Edition?T.dcp.getDSPath():ye.getMSIPath()}le=T.DWT.EnumDWT_PlatformType.enumWindow}else re.bArm64||re.bMips64||re.bChromeOS||re.bHarmonyOS?(we=Ae=T.dcp.getDSPath(),de.deb=Ae,le=re.bChromeOS?T.DWT.EnumDWT_PlatformType.enumChromeOS:re.bHarmonyOS?T.DWT.EnumDWT_PlatformType.enumHarmonyOS:T.DWT.EnumDWT_PlatformType.enumEmbed):re.bLinux?(Ae=T.dcp.getLinuxHTML5DebPath(),Se=T.dcp.getLinuxHTML5RpmPath(),we=Ae,de.deb=Ae,de.rpm=Se,le=T.DWT.EnumDWT_PlatformType.enumLinux):(we=e.product.bHTML5Edition?T.dcp.getDSPath():e.product.getPKGPath(),le=T.DWT.EnumDWT_PlatformType.enumMac);de.default=we;var Fe=e.one(".dynamsoft-dialog-license");Fe&&Fe.getEL()&&(Fe.getEL().style.display="none"),e.detect.needUpgrade=o,T.OnWebTwainNeedUpgradeCallback(e.product.name,de,e.product.bHTML5Edition,le,re.bIE,re.bSafari,e.detect.ssl,e.env.strIEVersion,e.detect.bPromptJSOrServerOutdated,j,q)}}())}},R=function(j){var de,le,we,Ae,ye,q=r.Containers,re=n.getNavInfo(),Fe=e.Promise.resolve(0),Ve=T.DWT.licenseException;if(q.length>0){if(0==Ve.code?s.DCP_DWT_OnClickCloseInstall(!1,!0):console&&console.error&&console.error(Ve.message),e.isUndefined(j))for(le=0;le<q.length;le++)if(e.product.bHTML5Edition){if(P(we=q[le].WebTwainId)&&(ye=r.ContainerMap[we]))break}else{if(q[le].Container?Ae=q[le].Container:q[le].ContainerId&&(Ae=e.get(q[le].ContainerId)),!F(Ae)||!Ae.id)continue;if((ye=r.ContainerMap[Ae.id])||(ye=r.ContainerMap[we=q[le].WebTwainId]))break}else ye=j;ye&&(e.product.bHTML5Edition?ye._bLocalService&&(Fe=ye._innerFunRawV2("LogLevel").then(function(){M(ye)},function(){-2207==ye.ErrorCode&&(!r.UseDefaultInstallUI&&e.isFunction(r.OnWebTwainNeedUpgradeWebJavascript)?r.OnWebTwainNeedUpgradeWebJavascript(ye.ErrorString):e.detect.bPromptJSOrServerOutdated||(e.detect.bPromptJSOrServerOutdated=o)),M(ye)})):M(ye))}var ke=[],$e=!1;for(e.License.isLTS()&&e.isNumber(Ve.code)&&0!==Ve.code&&!0===Ve.fromLTS&&($e=!0),le=0;le<q.length;le++)e.product.bHTML5Edition?we=q[le].WebTwainId:(de=r.ContainerMap[we=q[le].ContainerId])||(we=q[le].WebTwainId),(de=r.ContainerMap[we])&&($e?e.hide(e.product.bHTML5Edition?de._containerElement:de._containerID):e.product.bHTML5Edition?(de._isBindViewer()&&(de.Width<=0||de.Height<=0)&&(de.Width<=0&&(de.Width=270),de.Height<=0&&(de.Height=350)),de._bLocalService?ke.push(x(de)):e.License.checkProductKey(de,{Core:!0})):(de.IfAllowLocalCache=!0,de.IfShowFileDialog=!0,de.IfDisableSourceAfterAcquire=!0,de.BrokerProcessType=e.product._iBrokerProcessType,0==le&&(e.License.checkProductKey(de,{Core:!0})||e.License.checkProductKey(de,{Webcam:!0},!0)||e.License.checkProductKey(de,{Core:!0},!1,!0)),re.bWin||(de.ImageCaptureDriverType=e.product._iImageCaptureDriverType))),de=null,ke.length>0&&(Fe=Fe.then(function(){return T.Lib.Promise.all(ke)}));q=null;var Le=T.initOrder;Le[0]==v&&Le.splice(0,1),$e?(T.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)):Fe=Fe.then(function(){T.Lib.detect.bAutoLoadDone=!0,e.isFunction(r.OnWebTwainReady)?r.OnWebTwainReady():e.isFunction(s.Dynamsoft_OnReady)&&s.Dynamsoft_OnReady()},function(fe){console&&console.error&&console.error(fe)})},x=function(j){return e.showLoadingMsg(-1,"",T.MSG.Init_ConfiguringDWT),j._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var q=n.getNavInfo(),re=T.DWT.EnumDWT_Driver.TWAIN,le=!1,we=!1;j._bRemoteMode?j.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumWindow||(j.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumLinux?we=!0:j.__serverPlatform==T.DWT.EnumDWT_PlatformType.enumMac&&(le=!0)):(le=q.bMac,we=q.bLinux),le?re=T.DWT.EnumDWT_Driver.TWAIN_AND_ICA:we&&(re=T.DWT.EnumDWT_Driver.SANE),j._driverType=re}).then(function(){e.License.checkProductKey(j,{Core:!0})})},P=function(j){return""==j||!n.isString(j)&&!n.isNumber(j)?l:o},F=function(j){return j&&!e.isString(j)?o:l},k=function(j){var q;return j.Container?q=j.Container.id:j.ContainerId&&(q=j.ContainerId),F(e.get(q))?(e.isString(j.WebTwainId)?r.ContainerMap[j.WebTwainId]:r.ContainerMap[q])?l:o:l},w=function(){!e.detect.StartWSTimeoutId&&0==e.detect.arySTwains.length&&(e.detect.StartWSTimeoutId=setTimeout(function(){e.detect.StartWSTimeoutId=l,e.startWS()},100))};e.detect.__WebTwainMain=function(j,q,re){var Se,ye,Fe,Ve,de={id:j.WebTwainId,width:j.Width,height:j.Height};if(j.Container?(de.container=j.Container,de.containerID=j.Container.id):j.ContainerId&&(de.container=e.get(j.ContainerId),de.containerID=j.ContainerId),P(de.id)||(de.id=F(e.get(de.containerID))?de.containerID:de.containerID="dwtcontrolContainer"),r.UseDefaultInstallUI?de.onNoControl=f:(de.tAllowedForChrome=r.OnWebTwainOldPluginNotAllowed,de.onNoControl=r.OnWebTwainNotFound),function(j){var q=j||{};q.basePath&&(e.env.basePath=q.basePath),q.pathType&&(e.env.pathType=q.pathType),e.isUndefined(q.bDiscardBlankImage)||(e.config.bDiscardBlankImage=q.bDiscardBlankImage),q.msgPrefix&&(e.config.msgPrefix=q.msgPrefix),q.msgSuffix&&(e.config.msgSuffix=q.msgSuffix),q.detectType&&(e.detect.detectType=q.detectType),q.tryTimes&&(e.detect.tryTimes=q.tryTimes),q.onReady&&(r.OnWebTwainReady=q.onReady),q.onNotAllowedForChrome&&(e.detect.onNotAllowedForChrome=q.onNotAllowedForChrome),q.onNoControl&&(e.detect.onNoControl=q.onNoControl)}(de),e.product.bHTML5Edition){var le,we,Ae;for(n.mix(de,j.bLocalService?{port:j.port,HTTPPort:e.detect.ssl?443:80,bLocalService:!0}:{bLocalService:!1}),de.onReady=function($e){if(e.replaceControl(de.id,$e),e.isFunction(q)){var Le={stwain:$e};re&&e.mix(Le,re),q(Le)}},we=0;we<e.detect.arySTwains.length;we++)de.id==(Ae=e.detect.arySTwains[we])._id&&(de.id=de.id+"_"+n.getRandom()),Ae._containerElement&&(de.container==Ae._containerElement||de.containerID==Ae._containerElement.id)&&(de.containerID="");return de.bNoViewer=!F(e.get(de.containerID)),le=new e.html5.STwain(de),e.detect.arySTwains.push(le),e.detect.bFirst&&e._init(de),e.detect.bFirst=!1,le}for(de.onPluginReady=function(){e.replaceControl(de.id,Se.getInstance())},de.onPluginNotReady=function(){e.isFunction(s.Dynamsoft_OnNotReady)&&s.Dynamsoft_OnNotReady()},Se=new e.DynamicWebTwain(de),Fe=0,ye=(Ve=r.Containers).length-1;ye>=0;ye--){var ke=Ve[ye];ke.Container?F(ke.Container)&&Fe++:ke.ContainerId&&F(e.get(ke.ContainerId))&&Fe++}return e.detect.arySTwains.length==Fe&&(e.detect._varSeed=setInterval(e.detect._controlDetect,200)),Se},r.Unload=function(){var j,q,re,de,le,we,Ae=[r.Containers,r.DynamicContainers];for(T.DWT.lunload(),e.closeAll&&e.closeAll(),we=r.ContainerMap,q=0;q<2;q++)if(j=Ae[q])if(e.product.bHTML5Edition)for(re=0;re<j.length;re++)(le=j[re].WebTwainId)&&le in we&&(de=we[le])&&(de.__unload(),delete we[le]);else for(re=j.length-1;re>=0;re--)j[re].Container?le=(de=j[re].Container).id:(le=j[re].ContainerId)&&(de=e.get(le)),de&&(le in we&&we[le]&&delete we[le],de.innerHTML="");for(e.page.bUnload=o,e.page.OnUnload&&e.page.OnUnload(),r.initQueue.splice(0),re=0;re<T.unloadQueue.length;re++){var Se=T.unloadQueue[re];e.isFunction(Se)&&Se()}T.unloadQueue.splice(0),r.DynamicContainers.splice(0),e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0);try{e.closeLoadingMsg(),T.DWT.CloseDialog(),e._zdgb_xkz_dhk(),e.closeProgress(""),e.hideMask()}catch(ye){}return e.MobileFuns?e.MobileFuns.unloadWasm():e.Promise.resolve()};var L=function(){var re,j=r.Containers;for(re=0;re<j.length;re++){var le;if(F(e.get(j[re].ContainerId))&&(le=j[re].ContainerId,P(j[re].WebTwainId)&&(le=j[re].WebTwainId)),le&&!r.ContainerMap[le])return void setTimeout(L,200)}e.closeLoadingMsg(),j=null,R()},U=function(j){if(j&&"readyObj"in j){var q=j.readyObj;if(q){var re=j.stwain,de=q.totalCount;return q.readyCount=q.readyCount+1,void(q.readyCount>=de&&R(re))}}R(j)},Z=function(j){e.detect.urls.splice(0),e.detect.urls.push({port:j,ssl:i.bSSL}),e.detect.ports=[{port:j,ssl:i.bSSL}],e.detect.cUrlIndex=0,i.bSSL?T.DWT.SSLPort=j:T.DWT.Port=j},ne=function(j,q,re){var le,we,de=r.Containers;if(e.config.usingMainMode)e.closeLoadingMsg();else{if(!de||0===de.length)return e.closeLoadingMsg(),void e.log("DEnv.Containers was not set.");a.bEnhancedMode&&(e.isString(j)&&""!=j&&(e.product.host=j),Z(q)),w();var Ae={totalCount:de.length,readyCount:0};for(le=0;le<de.length;le++)F(e.get((we=de[le]).ContainerId))||(we.bNoViewer=!0),re?(we.bLocalService=!1,we.ip="",we.port=0):(we.bLocalService=!0,a.bEnhancedMode&&(we.port=q)),e.detect.__WebTwainMain(we,U,{readyObj:Ae})}},ue=function(j){var re=j.bNoViewer,de=j.id,le=j.container,we=j.containerID,Ae=j.host,Se=j.port,ye=Ae&&Se&&Se>0?{host:Ae,port:Se}:l,Fe=j.asyncSuccessFunc,Ve=j.asyncFailureFunc;if(e.detect.onNoControl||(e.detect.onNoControl=f),j.bNoViewer||e.isString(we)&&""!=we&&(le||e.get(we))){if(r.Containers&&!re){var ke,$e=r.Containers;for(ke=0;ke<$e.length;ke++)if($e[ke].ContainerId==we)return e.closeLoadingMsg(),e.isFunction(Ve)&&e._safePromptCustomMsg(function(){Ve(r.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)}),l}le||(le=e.get(we))}else re=!0,we=0;if(r.ContainerMap[de])return e.closeLoadingMsg(),e.isFunction(Ve)&&Ve(r.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),l;if(!j.bLocalService&&!T.WasmEnv)return e.closeLoadingMsg(),e._safePromptCustomMsg(function(){Ve(r.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)}),l;ye?!e.detect.StartWSByIPTimeoutId&&0==e.detect.arySTwainsByIP.length&&(e.detect.StartWSByIPTimeoutId=setTimeout(function(){e.detect.StartWSByIPTimeoutId=l,e.startWSByIP()},100)):w();var Le={id:de,container:le,customIP:!1,width:re?0:300,height:re?0:300,bNoViewer:re,bLocalService:j.bLocalService};return re||(le.style.width&&(Le.width=le.style.width),le.style.height&&(Le.height=le.style.height)),ye&&(Le.customIP=!0,Le.host=ye.host,Le.port=ye.port),Le.onReady=function(fe){if(s.DCP_DWT_OnClickCloseInstall(!1,!0),!fe)return e.closeLoadingMsg(),e.isFunction(Ve)&&Ve(r.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer),!1;if(r.ContainerMap[fe._id])return e.closeLoadingMsg(),fe.dispose(),e.isFunction(Ve)&&Ve(r.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;e.showLoadingMsg(-1,"",T.MSG.Init_ConfiguringDWT);var De={};return De.WebTwainId=fe._id,fe._containerElement&&fe._containerElement.id&&(De.ContainerId=fe._containerElement.id),r.DynamicContainers.push(De),r.ContainerMap[fe._id]=fe,!r.IfDisableDefaultSettings&&fe._bLocalService?x(fe).then(function(){e.closeLoadingMsg(),e.isFunction(Fe)&&Fe(fe),M(fe)},function(){e.closeLoadingMsg(),-2207==fe.ErrorCode&&(e.detect.bPromptJSOrServerOutdated||(e.detect.bPromptJSOrServerOutdated=o)),M(fe)}):(e.closeLoadingMsg(),e.isFunction(Fe)&&Fe(fe)),!0},new e.html5.CreateDWTObject(Le)};function X(){T.WasmEnv&&(T.WasmEnv.useFastcompEdition=T.Lib.env.isWasmUseFastcomp(),T.DWT.WasmConfig&&(T.DWT.WasmConfig.fetchOptions&&(T.WasmEnv.fetchOptions=T.DWT.WasmConfig.fetchOptions),T.DWT.WasmConfig.maxHeapSize&&(T.WasmEnv.maxHeapSize=T.DWT.WasmConfig.maxHeapSize)))}function pe(){T.DWT.ShowMessage(['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:30px;margin-left:10px">Error</span></div>','<div class="dynamsoft-dwt-ltsdlg-body">',T.MSG.Err_BrowserNotSupportWasm,"</div></div>"].join(""),{width:510,closeButton:!1})}function K(j,q,re){if(!e.product.bHTML5Edition)return e._safePromptCustomMsg(function(){re&&re(r.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),l;if(!1===j.UseLocalService&&!C())return e.closeLoadingMsg(),pe(),re&&re(T.MSG.Err_BrowserNotSupportWasm),l;G();var ye,Fe,de={},le=j.WebTwainId,we=j.Host,Ae=j.Port,Se=j.PortSSL;if(!r._srcUseLocalService&&j.UseLocalService&&(e.detect.dcpStatus=0,r._srcUseLocalService=!0),j.Container?(de.container=j.Container,de.bNoViewer=!1,((ye=de.container.id)===t||null===ye||""===ye)&&(de.container.id=["dwt_",n.getRandom()].join("")),de.containerID=de.container.id,(le===t||null===le||""===le)&&(de.id=de.container.id)):le===t||null===le||""===le?(de.id=["dwt_",n.getRandom()].join(""),de.bNoViewer=!0):n.get(le)?(de.id=le,de.containerID=le,de.bNoViewer=!1):(de.id=le,de.bNoViewer=!0),de.UseLocalService=j.UseLocalService,0==de.UseLocalService?(e.detect.bNeedWasm=!0,de.host="",de.port=0):((!e.isString(we)||""==we)&&(we=T.dcp.host),de.host=we,i.bSSL?(Se||(Se=T.DWT.SSLPort?T.DWT.SSLPort:18623),de.port=Se):(Ae||(Ae=T.DWT.Port?T.DWT.Port:18622),de.port=Ae)),q&&(de.asyncSuccessFunc=q),re&&(de.asyncFailureFunc=re),e.detect.wasmScriptLoaded&&T.WasmEnv&&!T.WasmEnv.wasmLoad)if(X(),e.License.isLTS())Fe=T.DWT.lglic(T.DWT.EnumInstance.dwt_browser).then(function(Ve){try{T.WasmEnv.load(Ve.ar,!0,Ve.cu),T.WasmEnv.wasmLoad=!0}catch(ke){ke&&console.log(ke.message)}},function(Ve){Ve&&(T.DWT.lsetException(Ve.code||Ve.ltsErrorCode,Ve.message),e.closeLoadingMsg(),T.DWT.OnLicenseException())});else{try{T.WasmEnv.load(r.ProductKey),T.WasmEnv.wasmLoad=!0}catch(Ve){Ve&&console.log(Ve.message)}Fe=Promise.resolve()}else Fe=Promise.resolve();return Fe.then(function(){return e.waitForScripts()}).then(function(){return new e.Promise(ae)}).then(function(){je({callback:function(){de.bLocalService=!0,ue(de)},docViewCallback:function(){de.bLocalService=!1,ue(de)},host:de.host,port:de.port,UseLocalService:de.UseLocalService,dcpFailedCallback:function(Ve){de.asyncFailureFunc(Ve),e.closeLoadingMsg()}})},function(){e.closeLoadingMsg()}),o}r.Load=function(){e.openLoadingMsg(),H(!0),e.waitForScripts().then(function(){return T.DWT.Unload()}).then(function(){if(T.Lib.detect.bNeedWasm=!1,T.Lib.detect.wasmScriptLoaded&&T.WasmEnv&&!T.WasmEnv.wasmLoad){if(X(),T.Lib.License.isLTS())return void T.DWT.lglic(T.DWT.EnumInstance.dwt_browser).then(function(j){try{T.WasmEnv.load(j.ar,!0,j.cu),T.WasmEnv.wasmLoad=!0}catch(q){q&&console.log(q.message)}_(he)},function(j){j&&(T.DWT.lsetException(j.code||j.ltsErrorCode,j.message),T.Lib.closeLoadingMsg(),T.DWT.OnLicenseException())});try{T.WasmEnv.load(r.ProductKey),T.WasmEnv.wasmLoad=!0}catch(j){j&&console.log(j.message)}}_(he)},function(){e.closeLoadingMsg()})},r.CheckConnectToTheService=function(j,q,re,de){if(e.detect.scriptLoaded)if(e.product.bHTML5Edition){var le=0,we=j,Ae=q,Se=re,ye=de;if(e.isFunction(we)&&e.isFunction(Ae)&&(Se=we,ye=Ae,we=null,Ae=null),we||(we=T.dcp.host),!Ae)for(le=0;le<T.Lib.detect.ports.length;le++)if(T.navInfoSync.bSSL&&T.Lib.detect.ports[le].ssl||!T.navInfoSync.bSSL&&!T.Lib.detect.ports[le].ssl){Ae=T.Lib.detect.ports[le].port;break}u.versionInfo(we,Ae,function(Fe,Ve,ke,$e){0===Fe&&$e&&$e.length>0&&ee($e,e.product.getServerVersionInfo(!0))?e.isFunction(Se)&&Se(Ve,ke):e.isFunction(ye)&&ye()},ye)}else e.isFunction(de)&&de();else setTimeout(function(){r.CheckConnectToTheService(j,q,re,de)},500)},r.ConnectToTheService=r.Load,r.CreateDWTObject=function(j,q,re,de,le,we){var ye,Ae=le,Se=we;if(e.openLoadingMsg(),T.Lib.detect.bAutoLoadDone){if(H(!0),arguments.length<=3?(Ae=q,Se=re,ye={WebTwainId:j}):ye={WebTwainId:j,Host:q,Port:re,PortSSL:de},!e.product.bHTML5Edition)return e.isFunction(Se)&&e._safePromptCustomMsg(function(){Se(r.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),l;var Fe=j;if(e.isShadowRoot(Fe)){var Ve=document.createElement("div");Fe.appendChild(Ve),Fe=Ve}if(e.isDOM(Fe)){var ke=e.getShadowRoot(Fe);if(ke){var $e=document.createElement("style");$e.innerHTML=['@import url("',T.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",c,'")'].join(""),ke.appendChild($e)}ye.Container=Fe,(!Fe.id||""==Fe.id)&&(Fe.id=["dwt_",e.getRandom()].join("")),ye.WebTwainId=Fe.id}else{if(!e.isString(j))return e.isFunction(Se)&&Se(e.Errors.container_id_not_string()),l;if(!e.get(j))return e.isFunction(Se)&&Se(e.Errors.container_id_not_exist(j)),l}return e.isUndefined(ye.UseLocalService)&&(ye.UseLocalService=e.isUndefined(r.UseLocalService)?!e.env.bMobile:r.UseLocalService),K(ye,Ae,Se)}T.Lib.domReady(function(){var Le=T.DWT.Containers;e.isArray(Le)&&Le.length>0&&T.DWT.AutoLoad||H(!0),setTimeout(function(){r.CreateDWTObject(j,q,re,de,le,we)},100)})},r.CreateDWTObjectEx=function(j,q,re){var de=j.Container;if(e.openLoadingMsg(),T.Lib.detect.bAutoLoadDone){if(H(!0),e.isShadowRoot(de)){var le=document.createElement("div");de.appendChild(le),de=le}if(e.isDOM(de)){var we=e.getShadowRoot(de);if(we){var Ae=document.createElement("style");Ae.innerHTML=['@import url("',T.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",c,'")'].join(""),we.appendChild(Ae)}we==de&&(de=document.createElement("div"),we.appendChild(de),j.Container=de),(!de.id||""==de.id)&&(de.id=["dwt_",e.getRandom()].join("")),e.isString(j.WebTwainId)||(j.WebTwainId=de.id)}else if(!e.isString(j.WebTwainId))return re&&re(e.Errors.webtwain_id_not_string()),l;return e.isUndefined(j.UseLocalService)&&(j.UseLocalService=e.isUndefined(r.UseLocalService)?!e.env.bMobile:r.UseLocalService),K(j,q,re)}T.Lib.domReady(function(){var Se=T.DWT.Containers;e.isArray(Se)&&Se.length>0&&T.DWT.AutoLoad||H(!0),setTimeout(function(){r.CreateDWTObjectEx(j,q,re)},100)})};var G=function(){for(var j=T.initOrder,q=l,re=0;re<j.length;re++)if(j[re]==v){q=o;break}q||j.push(v)},ee=function(j,q){var re=j.split(","),de=q.split(",");return re.length>3&&e.trim(re[0])==de[0]&&(e.trim(re[1])>de[1]||e.trim(re[1])==de[1]&&e.trim(re[2])>de[2]||e.trim(re[1])==de[1]&&e.trim(re[2])==de[2]&&parseInt(e.trim(re[3]))>=parseInt(de[3]))},ie=function(j,q){e.isLocalIP(j)&&(e.LS.item("DWT_port",q),e.LS.item("DWT_ssl",i.bSSL?"true":"false"))},Te=function(j,q,re){var de=function(j){var q,re="",de=j,le="",we=n.getNavInfo();return q=we.bMac?"mac/MacDWT_":we.bLinux?"linux/LinuxDWT_":"win/WinDWT_",i.bFileSystem||(re="?t="+e.getRandom()),de.length>0&&"/"!=de[de.length-1]&&(de+="/"),we.bWin&&a.b64bit&&(le="_x64"),[de,"dist/",q,e.product.getServerVersionInfo(),le,".zip",re].join("")}(r.ResourcesPath),we=function(Se){if(e.closeLoadingMsg(),r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED,T.DWT.EnumDWT_InitMsg.DownloadError),e.isFunction(T.OnWebTWAINDllDownloadFailure)){var Ve={};404==Se.httpCode?(e.Errors.WebTwainModuleNotExist(Ve),o):(e.Errors.WebTwainModuleDownloadFailure(Ve),l),T.OnWebTWAINDllDownloadFailure(e.product.name,Ve._errorCode,Ve._errorString)}e.detect.dcpStatus=3,e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback()};r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.generalMessages.downloadingDWTModule,T.DWT.EnumDWT_InitMsg.Info),e.fetch(de,{mode:"cors",dataType:"arraybuffer"}).then(function(Se){a.loadZip(Se,0,function(){var Fe=n.getNavInfo();if(e.closeLoadingMsg(),e.isFunction(T.OnWebTWAINDllDownloadSuccessful)&&T.OnWebTWAINDllDownloadSuccessful(),r.OnWebTwainInitMessage){if(i.bSSL&&Fe.bFirefox)return void r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.generalMessages.refreshNeeded,T.DWT.EnumDWT_InitMsg.DownloadNotRestartError);r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded,T.DWT.EnumDWT_InitMsg.Info)}setTimeout(q,3e3)},we)},we)},Ge=function(j,q,re){var ye,Ae=j.host,Se=j.port;if(!1===j.UseLocalService)return e.showLoadingMsg(-1,"",T.MSG.Init_CreatingDWT),e.detect.dcpStatus=2,e.product.host="",ie("",0),void _(j.docViewCallback);e.showLoadingMsg(-1,"",T.MSG.Init_CheckDWT),ye=re>0?re+1:1,Se||e.each(e.detect.ports,function(Fe){i.bSSL?Fe.ssl&&(Se=Fe.port):Fe.ssl||(Se=Fe.port)}),e.showLoadingMsg(-1,"",T.MSG.Init_CheckDWTVersion),u.versionInfo(Ae,Se,function(Fe,Ve,ke,$e){if(0===Fe&&$e&&$e.length>0&&ee($e,e.product.getServerVersionInfo(!0)))return e.detect.dcpStatus=2,e.product.host=Ve,ie(Ve,ke),e.showLoadingMsg(-1,"",T.MSG.Init_CreatingDWT),void(e.isFunction(j.callback)&&j.callback(Ve,ke));if(q){if(ye>3)return e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback({code:Fe,message:Ve}));setTimeout(function(){Ge(j,o,ye)},1e3)}else{if(!r.IfInstallDWTModuleWithZIP)return e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback({code:Fe,message:Ve}));Te(j,function(){Ge(j,o,ye)})}})},je=function(j){var q=T.initOrder,re=!1;if(q.length>0&&q[0]===v){var de=function(Ve){r.OnWebTwainInitMessage&&r.OnWebTwainInitMessage(r.CustomizableDisplayInfo.generalMessages.downloadNeeded,T.DWT.EnumDWT_InitMsg.Info),e.isLocalIP(j.host)?f():e.isFunction(T.OnRemoteWebTwainNotFoundCallback)&&T.OnRemoteWebTwainNotFoundCallback(e.product.name,j.host,j.port,i.bSSL,e.env.bMobile),e.isFunction(j.dcpFailedCallback)&&(j.dcpFailedCallback(Ve),T.DWT.ConnectToTheService=function(){je(j)})};if(!r.IfCheckDCP||0==j.UseLocalService)return j.dwtFailedCallback||(j.dwtFailedCallback=de),void Ge(j,l,0);var Fe=function(Ve){var ke=1;if(n.getNavInfo().bWin&&(ke=Ve>0?Ve+1:1)>3)return Fe=null,e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback());if(!re){if(j.dwtFailedCallback||(j.dwtFailedCallback=function(){var ze,ge,Pe=n.getNavInfo();e.closeLoadingMsg(),e.isFunction(T.OnWebTWAINModuleDownloadManually)&&(Pe.bLinux?(ze=T.DWT.EnumDWT_PlatformType.enumLinux,ge={default:T.dcp.getLinuxHTML5DebPath(),deb:T.dcp.getLinuxHTML5DebPath(),rpm:T.dcp.getLinuxHTML5RpmPath()}):Pe.bMac?(ze=T.DWT.EnumDWT_PlatformType.enumMac,ge={default:T.dcp.getDSPath()}):(ze=T.DWT.EnumDWT_PlatformType.enumWindow,ge={default:T.dcp.getDSPath()}),T.OnWebTWAINModuleDownloadManually(ge,ze,Pe.bIE,Pe.bSafari,e.detect.ssl,e.env.strIEVersion))}),a.bEnhancedMode){var Le=0,fe=function(Pe){if(e.isArray(Pe)&&Pe.length>1){e.closeLoadingMsg();var ge,Ee,ze=Pe[1];if(ze&&(a.currentUserPorts=ze,ze.dwt))return Ee=ze.dwt.sslPort,0==(ge=ze.dwt.port)||0==Ee?T.dcp.bEnhancedMode?(setTimeout(function(){a.getPorts(a.strSID,fe,De)},800),!0):++Le>5?(Fe(ke),!1):(setTimeout(function(){a.getPorts(a.strSID,fe,De)},300),!0):(j.port=i.bSSL?Ee:ge,Z(j.port),Ge(j,l,0),!0)}return r.IfInstallDWTModuleWithZIP?(Te(j,function(){Fe(ke)}),!0):(e.detect.dcpStatus=3,void(e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback()))},De=function(){return e.closeLoadingMsg(),r.IfInstallDWTModuleWithZIP?(Te(j,function(){Fe(ke)}),!0):(e.detect.dcpStatus=3,void(e.isFunction(j.dwtFailedCallback)&&j.dwtFailedCallback()))};return a.getPorts(a.strSID,fe,De),!0}return Fe=null,Ge(j,l,0),!0}var Oe=e.install._dlgInstall,Ne=500;(!Oe||!Oe.open)&&(re=!1,Ne=0),setTimeout(Fe,Ne)};T.managerEnv.IfUpdateService=T.DWT.IfUpdateService,T.managerEnv.IfDownload64bitService=T.DWT.IfDownload64bitService,a.host=j.host,a.checkDcpV3(r.ProductKey,de,Fe)}else e.env.stopCheckingForService||setTimeout(function(){je(j)},1e3)},he=function(j){if(e.page.bUnload=l,e.License.isLTS()&&e.isString(T.DWT.ProductKey)){var q={},re=T.DWT.licenseException;return e.Errors.LongKeyShortKeyMixed(q),re.code=q._errorCode,re.message=q._errorString,re.fromLTS=!1,e.closeLoadingMsg(),void function(j){T.DWT.ShowMessage(['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><i class="dynamsoft-dwt-error"></i></div>','<div class="dynamsoft-dwt-ltsdlg-body">',j,"</div></div>"].join(""),{width:510,closeButton:!1})}(q._errorString)}var le,we,Ae,ye,de=r.Containers,Se=[];for(le=0;le<de.length;le++)if(Ae=de[le],e.product.bHTML5Edition){if(e.isShadowRoot(ye=Ae.Container)){var Fe=document.createElement("div");ye.appendChild(Fe),ye=Fe}if(e.isDOM(ye)){var Ve=e.getShadowRoot(ye);if(Ve){var ke=document.createElement("style");ke.innerHTML=['@import url("',T.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",c,'")'].join(""),Ve.appendChild(ke)}(!ye.id||""==ye.id)&&(ye.id=["dwt_",e.getRandom()].join("")),Ae.ContainerId=ye.id}for((!e.isString(Ae.WebTwainId)&&!e.isNumber(Ae.WebTwainId)||""==Ae.WebTwainId)&&(Ae.WebTwainId=e.isString(Ae.ContainerId)&&""!=Ae.ContainerId?Ae.ContainerId:["dwt_",e.getRandom()].join("")),we=0;we<Se.length;we++)if(Ae.WebTwainId==Se[we]){Ae.WebTwainId=Ae.WebTwainId+"_"+n.getRandom();break}Se.push(Ae.WebTwainId)}else n.isString(Ae.WebTwainId)&&(!n.isString(Ae.ContainerId)||""==Ae.ContainerId)&&(Ae.ContainerId=Ae.WebTwainId);if(e.product.bHTML5Edition){if(e.IsNeedLoadWasm()){if(!C())return e.closeLoadingMsg(),void pe();e.detect.bNeedWasm=!0,e.showLoadingMsg(-1,"",T.MSG.Init_InitWasm)}else e.showLoadingMsg(-1,"",T.MSG.Init_InitH5);G(),e.waitForScripts().then(function(){return new e.Promise(ae)}).then(function(){var $e=!0;e.isString(r.Host)&&(a.host=r.Host),e.IsNeedLoadWasm()&&($e=!1),je({callback:ne,docViewCallback:function(){ne("",0,!0)},host:a.host,UseLocalService:$e})},function(){e.closeLoadingMsg()})}else e.showLoadingMsg(-1,"",T.MSG.Init_InitActiveX),function(){if(e.config.usingMainMode)e.closeLoadingMsg();else{var j,q=r.Containers;if(q===l||0===q.length)return e.log("DEnv.Containers was not set."),void e.closeLoadingMsg();for(j=0;j<q.length;j++){var re=q[j];k(re)&&e.detect.__WebTwainMain(re)}setTimeout(L,100)}}()},ae=function(j,q){var re=[T.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",c].join("");if(e.IsNeedLoadWasm()){if(!C())return void j();if(!e.detect.wasmScriptLoaded){e.showLoadingMsg(-1,"",T.MSG.Init_DownloadingWasm);var de=function(we){if(e.detect.wasmScriptLoaded=!0,X(),e.showLoadingMsg(-1,"",T.MSG.Init_CompilingWasm),e.License.isLTS())T.DWT.lglic(T.DWT.EnumInstance.dwt_browser).then(function(Ae){try{T.WasmEnv.load(Ae.ar,!0,Ae.cu),T.WasmEnv.wasmLoad=!0}catch(Se){Se&&console.log(Se.message)}j()},function(Ae){Ae&&(T.DWT.lsetException(Ae.code||Ae.ltsErrorCode,Ae.message),e.closeLoadingMsg(),T.DWT.OnLicenseException()),q(Ae)});else{try{T.WasmEnv.load(r.ProductKey),T.WasmEnv.wasmLoad=!0}catch(Ae){Ae&&console.log(Ae.message)}j()}};return void(T.DWT.bNpm?de():e.getScript(re,!0,de))}}else if(e.showLoadingMsg(-1,"",T.MSG.Init_InitDynamsoftService),!e.detect.wasmScriptLoaded&&!T.navInfoSync.bFileSystem&&T.DWT.UseCameraAddonWasm){if(!C())return void j();var le=function(we){if(e.detect.wasmScriptLoaded=!0,X(),e.License.isLTS())T.DWT.lglic(T.DWT.EnumInstance.dwt_browser).then(function(Ae){try{T.WasmEnv.load(Ae.ar,!0,Ae.cu),T.WasmEnv.wasmLoad=!0}catch(Se){Se&&console.log(Se.message)}j()},function(Ae){Ae&&(T.DWT.lsetException(Ae.code||Ae.ltsErrorCode,Ae.message),e.closeLoadingMsg(),T.DWT.OnLicenseException()),q(Ae)});else{try{T.WasmEnv.load(r.ProductKey),T.WasmEnv.wasmLoad=!0}catch(Ae){Ae&&console.log(Ae.message)}j()}};return void(T.DWT.bNpm?le():e.getScript(re,!0,le))}j()};r.DeleteDWTObject=function(j){var re,q=r.ContainerMap;if(!e.product.bHTML5Edition)return l;if(q&&j in q){var de=q[j];de&&(delete q[j],de.__unload())}for(re=0;re<r.DynamicContainers.length;re++)if(r.DynamicContainers[re].WebTwainId==j){r.DynamicContainers.splice(re,1);break}return e.closeLoadingMsg(),o},r.GetWebTwain=function(j){var q,re,de,le,we,Ae=j;if(q=r.Containers,e.isString(Ae))Ae=e.get(Ae);else if(!e.isDOM(Ae)&&!Ae&&q&&q.length>0)for(de=0;de<q.length;de++){if(q[de].Container){Ae=q[de].Container;break}if(q[de].ContainerId&&F(e.get(q[de].ContainerId))){Ae=e.get(q[de].ContainerId);break}}if(le=r.ContainerMap,Ae&&le&&q&&q.length>0)for(de=0;de<q.length;de++)if(we=!1,(re=q[de]).Container){if(re.Container==Ae&&(we=P(re.WebTwainId)?re.WebTwainId:re.Container.id)&&we in le)return le[we]}else if(re.ContainerId&&re.ContainerId==Ae.id&&(we=P(re.WebTwainId)?re.WebTwainId:re.ContainerId)&&we in le)return le[we];return r.GetWebTwainEx(j)},r.GetWebTwainEx=function(j){var re,de,q=j;if(re=r.DynamicContainers,e.isDOM(q))q=q.id;else if(!q&&re&&re.length>0)for(de=0;de<re.length;de++)if(P(re[de])){q=re[de];break}if(re=null,q){var we=r.ContainerMap;if(we&&q in we)return we[q]}return null};var me=function(){var j=T.DWT.Containers;e.product.loadResourcePath||e.product.loadingResourcePath||(e.isArray(j)?j.length>0&&T.DWT.AutoLoad&&H():setTimeout(me,100))},H=function(j){if(!e.product.loadResourcePath&&!e.product.loadingResourcePath){if(T.DWT.Port>0||T.DWT.SSLPort>0){var q=[];q.push(T.DWT.Port>0?{port:T.DWT.Port,ssl:!1}:{port:18622,ssl:!1}),q.push(T.DWT.SSLPort>0?{port:T.DWT.SSLPort,ssl:!0}:{port:18623,ssl:!0}),e.detect.ports=q,e.LS.removeItem("DWT_port"),e.LS.removeItem("DWT_ssl")}(function(){if(e.isArray(T.DWT.licenseServer)){if(T.DWT.licenseServer.length>0){var j=T.DWT.licenseServer[0];(""==j||0==j.indexOf("https://mlts.dynamsoft.com"))&&(T.DWT.licenseServer=void 0)}}else T.DWT.licenseServer=void 0;(!e.isString(T.DWT.organizationID)||""==T.DWT.organizationID||"undefined"==T.DWT.organizationID)&&(T.DWT.organizationID=e.isNumber(T.DWT.organizationID)?""+T.DWT.organizationID:void 0),(!e.isString(T.DWT.handshakeCode)||""==T.DWT.handshakeCode||"undefined"==T.DWT.handshakeCode)&&(T.DWT.handshakeCode=e.isNumber(T.DWT.handshakeCode)?""+T.DWT.handshakeCode:void 0),e.isString(T.DWT.ProductKey)||(T.DWT.ProductKey=void 0);var q=T.DWT.defaultEnv.CertificateConfig;if(T.DWT.CertificateConfig){var re=T.DWT.CertificateConfig;e.isString(re.URL)||(re.URL=q.URL),(!e.isNumber(re.UpdateDaysBeforeExpired)||re.UpdateDaysBeforeExpired<=0)&&(re.UpdateDaysBeforeExpired=q.UpdateDaysBeforeExpired)}else T.DWT.CertificateConfig=q})(),function(){var j=T.DWT.defaultEnv.CustomizableDisplayInfo,q=T.DWT.CustomizableDisplayInfo;e.isString(q.loaderBarSource)&&""!=q.loaderBarSource?e.loaderBarSource=q.loaderBarSource:i.bIE?e.loaderBarSourceIE=j.loaderBarSource:e.loaderBarSource=j.loaderBarSource,e.loaderBarClassName=e.isString(q.loaderBarClassName)&&""!=q.loaderBarClassName?q.loaderBarClassName:j.loaderBarClassName,e.loaderBarBackgroundColor=e.isString(q.loaderBarBackgroundColor)?q.loaderBarBackgroundColor:j.loaderBarBackgroundColor}(),e._safePromptCustomMsg(),e.each(e._funsAfterConfigLoaded,function(le){try{e.isFunction(le)&&le()}catch(we){}}),e.showLoadingMsg(-1,"",T.MSG.Init_LookingLicense);var re=e.one(".dynamsoft_waiting").getEL();re&&re.parentNode.removeChild(re),T.Ready(function(){!function(le){var we=n.getNavInfo(),Ae=i.bFileSystem,Se=e.env.basePath,ye=T.DWT.ResourcesPath;if(!e.product.loadResourcePath&&!e.product.loadingResourcePath){e.product.loadingResourcePath=!0,Ae||((void 0===ye||""==ye)&&(ye=Se),ye.length>0&&"/"==ye.charAt(ye.length-1)&&(ye=ye.substr(0,ye.length-1)),T.DWT.ResourcesPath=ye),T.managerEnv.resourcesPath=ye;var Ve=o,ke=[],$e=[[ye,"/src/dynamsoft.webtwain.css",c].join("")],Le=function(){e.detect.cssLoaded=o};e.product.bHTML5Edition&&T.DWT.UseDefaultViewer&&$e.push([ye,"/src/dynamsoft.viewer.css",c].join("")),we.bSafari?(e.getAllCss($e,Le),Le()):e.getAllCss($e,Le),we.bSafari&&(Ve=l),ke.push([ye,"/dynamsoft.webtwain.install.js",c].join("")),T.DWT.bNpm&&(ke=[]),e.product.bHTML5Edition&&T.DWT.UseDefaultViewer&&ke.push([ye,"/src/dynamsoft.viewer.js",c].join(""));var fe=!1;T.navInfo.bIE&&(fe=T.navInfo.strBrowserVersion<=7),!fe&&e.License.isLTS()&&ke.push([ye,"/src/dynamsoft.lts.js",c].join("")),ke.length>0&&e.showLoadingMsg(-1,"",T.MSG.Init_LoadingViewerJs),e.getScripts(ke,Ve,function(De){if(!De)return e.log("error: load js failed."),void(e.product.loadingResourcePath=!1);if(e.showLoadingMsg(-1,"",T.MSG.Init_AllJsLoaded),e.detect.scriptLoaded=o,e.isString(r.Host)&&(T.dcp.host=r.Host),e.product.bHTML5Edition?e.closeAll=e.html5.closeAll:e.product.bPluginEdition?(e.DynamicWebTwain=e.plugin.DynamicWebTwain,e.closeAll=e.plugin.closeAll):e.product.bActiveXEdition&&(e.DynamicWebTwain=e.ie.DynamicWebTwain,e.closeAll=e.ie.closeAll),e.isUndefined(r.UseLocalService)&&(r.UseLocalService=!e.env.bMobile),r._srcUseLocalService=r.UseLocalService,e.isArray(T.aryAddonReadyFun)){for(var Oe=0;Oe<T.aryAddonReadyFun.length;Oe++){var Ne=T.aryAddonReadyFun[Oe];if(e.isFunction(Ne))try{Ne(e)}catch(Pe){e.log(Pe.stack||Pe,"error"),setTimeout(function(){throw Pe},0)}}T.aryAddonReadyFun=[]}e.product.loadResourcePath=!0,e.product.loadingResourcePath=!1,le?T.Lib.detect.bAutoLoadDone=!0:(e.showLoadingMsg(-1,"",T.MSG.Init_FireBeforeInitEvt),r.OnWebTwainWillInit&&r.OnWebTwainWillInit(),_(he))})}}(j)})}};r.IsLocalServiceConnected=function(){return new e.Promise(function(j,q){var de,re=a.host;e.each(e.detect.ports,function(le){i.bSSL?le.ssl&&(de=le.port):le.ssl||(de=le.port)}),r.CheckConnectToTheService(re,de,function(le,we,Ae){j(!0)},function(){q(!1)})})},e.domReady(function(){me(),i.bIE&&s.addEventListener&&s.addEventListener("unload",r.Unload,!1)}),e.waitForScripts=function(){return e.waitForScripts._promise?e.waitForScripts._resolve&&e.detect.scriptLoaded?e.waitForScripts._resolve():setTimeout(e.waitForScripts,60):e.waitForScripts._promise=new Promise(function(j){e.waitForScripts._resolve=j,setTimeout(e.waitForScripts,60)}),e.waitForScripts._promise},s.Dynamsoft_OnClickInstallButton||(s.Dynamsoft_OnClickInstallButton=function(){e.hide("dwt-btn-install"),e.hide("dwt-install-url-div")}),s&&(e.addEventListener(s,"focus",function(){var j=r.ContainerMap;j&&e.each(j,function(q,re){q&&q._OnPageFocus&&q._OnPageFocus()})}),e.addEventListener(s,"blur",function(){if(n.getNavInfo().bWin){var q=r.ContainerMap;q&&e.each(q,function(re,de){re&&re._OnPageBlur&&re._OnPageBlur()})}}),e.addEventListener(h,"visibilitychange",function(){if(n.getNavInfo().bWin&&"hidden"==h.visibilityState){var q=r.ContainerMap;q&&e.each(q,function(re,de){re&&re._OnPageBlur&&re._OnPageBlur()})}}))}(T.Lib,T.DWT),T.DWT.bNpm=!0,T.DWT.dbrCanvasMaxWH=4096,T.aryAddonReadyFun=[],T.AddonReady=function(e){T.aryAddonReadyFun.push(e)},T.Lib.mix(T,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}),T.AddonReady(function(e,r){var o,t=window.Dynamsoft,i=i||{};i.scope={},i.arrayIteratorImpl=function(s){var o=0;return function(){return o<s.length?{done:!1,value:s[o++]}:{done:!0}}},i.arrayIterator=function(s){return{next:i.arrayIteratorImpl(s)}},i.makeIterator=function(s){var o="undefined"!=typeof Symbol&&Symbol.iterator&&s[Symbol.iterator];return o?o.call(s):i.arrayIterator(s)},i.getGlobal=function(s){s=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof Bt&&Bt,"object"==typeof global&&global,s];for(var o=0;o<s.length;++o){var l=s[o];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")},i.global=i.getGlobal(this),i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.defineProperty=i.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(s,o,l){s!=Array.prototype&&s!=Object.prototype&&(s[o]=l.value)},i.polyfill=function(s,o,l,d){if(o){for(l=i.global,s=s.split("."),d=0;d<s.length-1;d++){var c=s[d];c in l||(l[c]={}),l=l[c]}(o=o(d=l[s=s[s.length-1]]))!=d&&null!=o&&i.defineProperty(l,s,{configurable:!0,writable:!0,value:o})}},i.FORCE_POLYFILL_PROMISE=!1,i.polyfill("Promise",function(s){function o(){this.batch_=null}function l(h){return h instanceof c?h:new c(function(f,g){f(h)})}if(s&&!i.FORCE_POLYFILL_PROMISE)return s;o.prototype.asyncExecute=function(h){if(null==this.batch_){this.batch_=[];var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})}this.batch_.push(h)};var d=i.global.setTimeout;o.prototype.asyncExecuteFunction=function(h){d(h,0)},o.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var h=this.batch_;this.batch_=[];for(var f=0;f<h.length;++f){var g=h[f];h[f]=null;try{g()}catch(v){this.asyncThrow_(v)}}}this.batch_=null},o.prototype.asyncThrow_=function(h){this.asyncExecuteFunction(function(){throw h})};var c=function(h){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{h(f.resolve,f.reject)}catch(g){f.reject(g)}};c.prototype.createResolveAndReject_=function(){function h(v){return function(p){g||(g=!0,v.call(f,p))}}var f=this,g=!1;return{resolve:h(this.resolveTo_),reject:h(this.reject_)}},c.prototype.resolveTo_=function(h){if(h===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof c)this.settleSameAsPromise_(h);else{e:switch(typeof h){case"object":var f=null!=h;break e;case"function":f=!0;break e;default:f=!1}f?this.resolveToNonPromiseObj_(h):this.fulfill_(h)}},c.prototype.resolveToNonPromiseObj_=function(h){var f=void 0;try{f=h.then}catch(g){return void this.reject_(g)}"function"==typeof f?this.settleSameAsThenable_(f,h):this.fulfill_(h)},c.prototype.reject_=function(h){this.settle_(2,h)},c.prototype.fulfill_=function(h){this.settle_(1,h)},c.prototype.settle_=function(h,f){if(0!=this.state_)throw Error("Cannot settle("+h+", "+f+"): Promise already settled in state"+this.state_);this.state_=h,this.result_=f,this.executeOnSettledCallbacks_()},c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=0;h<this.onSettledCallbacks_.length;++h)u.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var u=new o;return c.prototype.settleSameAsPromise_=function(h){var f=this.createResolveAndReject_();h.callWhenSettled_(f.resolve,f.reject)},c.prototype.settleSameAsThenable_=function(h,f){var g=this.createResolveAndReject_();try{h.call(f,g.resolve,g.reject)}catch(v){g.reject(v)}},c.prototype.then=function(h,f){function g(I,y){return"function"==typeof I?function(_){try{v(I(_))}catch(C){p(C)}}:y}var v,p,m=new c(function(I,y){v=I,p=y});return this.callWhenSettled_(g(h,v),g(f,p)),m},c.prototype.catch=function(h){return this.then(void 0,h)},c.prototype.callWhenSettled_=function(h,f){function g(){switch(v.state_){case 1:h(v.result_);break;case 2:f(v.result_);break;default:throw Error("Unexpected state: "+v.state_)}}var v=this;null==this.onSettledCallbacks_?u.asyncExecute(g):this.onSettledCallbacks_.push(g)},c.resolve=l,c.reject=function(h){return new c(function(f,g){g(h)})},c.race=function(h){return new c(function(f,g){for(var v=i.makeIterator(h),p=v.next();!p.done;p=v.next())l(p.value).callWhenSettled_(f,g)})},c.all=function(h){var f=i.makeIterator(h),g=f.next();return g.done?l([]):new c(function(v,p){function m(_){return function(C){I[_]=C,0==--y&&v(I)}}var I=[],y=0;do{I.push(void 0),y++,l(g.value).callWhenSettled_(m(I.length-1),p),g=f.next()}while(!g.done)})},c},"es6","es3"),i.SYMBOL_PREFIX="jscomp_symbol_",i.initSymbol=function(){i.initSymbol=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.SymbolClass=function(s,o){this.$jscomp$symbol$id_=s,i.defineProperty(this,"description",{configurable:!0,writable:!0,value:o})},i.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_},i.Symbol=(o=0,function s(l){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new i.SymbolClass(i.SYMBOL_PREFIX+(l||"")+"_"+o++,l)}),i.initSymbolIterator=function(){i.initSymbol();var s=i.global.Symbol.iterator;s||(s=i.global.Symbol.iterator=i.global.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[s]&&i.defineProperty(Array.prototype,s,{configurable:!0,writable:!0,value:function(){return i.iteratorPrototype(i.arrayIteratorImpl(this))}}),i.initSymbolIterator=function(){}},i.initSymbolAsyncIterator=function(){i.initSymbol();var s=i.global.Symbol.asyncIterator;s||(s=i.global.Symbol.asyncIterator=i.global.Symbol("Symbol.asyncIterator")),i.initSymbolAsyncIterator=function(){}},i.iteratorPrototype=function(s){return i.initSymbolIterator(),(s={next:s})[i.global.Symbol.iterator]=function(){return this},s},i.underscoreProtoCanBeSet=function(){var o={};try{return o.__proto__={a:!0},o.a}catch(l){}return!1},i.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:i.underscoreProtoCanBeSet()?function(s,o){if(s.__proto__=o,s.__proto__!==o)throw new TypeError(s+" is not extensible");return s}:null,i.generator={},i.generator.ensureIteratorResultIsObject_=function(s){if(!(s instanceof Object))throw new TypeError("Iterator result "+s+" is not an object")},i.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},i.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},i.generator.Context.prototype.stop_=function(){this.isRunning_=!1},i.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},i.generator.Context.prototype.next_=function(s){this.yieldResult=s},i.generator.Context.prototype.throw_=function(s){this.abruptCompletion_={exception:s,isException:!0},this.jumpToErrorHandler_()},i.generator.Context.prototype.return=function(s){this.abruptCompletion_={return:s},this.nextAddress=this.finallyAddress_},i.generator.Context.prototype.jumpThroughFinallyBlocks=function(s){this.abruptCompletion_={jumpTo:s},this.nextAddress=this.finallyAddress_},i.generator.Context.prototype.yield=function(s,o){return this.nextAddress=o,{value:s}},i.generator.Context.prototype.yieldAll=function(s,o){var l=(s=i.makeIterator(s)).next();if(i.generator.ensureIteratorResultIsObject_(l),!l.done)return this.yieldAllIterator_=s,this.yield(l.value,o);this.yieldResult=l.value,this.nextAddress=o},i.generator.Context.prototype.jumpTo=function(s){this.nextAddress=s},i.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},i.generator.Context.prototype.setCatchFinallyBlocks=function(s,o){this.catchAddress_=s,null!=o&&(this.finallyAddress_=o)},i.generator.Context.prototype.setFinallyBlock=function(s){this.catchAddress_=0,this.finallyAddress_=s||0},i.generator.Context.prototype.leaveTryBlock=function(s,o){this.nextAddress=s,this.catchAddress_=o||0},i.generator.Context.prototype.enterCatchBlock=function(s){return this.catchAddress_=s||0,s=this.abruptCompletion_.exception,this.abruptCompletion_=null,s},i.generator.Context.prototype.enterFinallyBlock=function(s,o,l){l?this.finallyContexts_[l]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=s||0,this.finallyAddress_=o||0},i.generator.Context.prototype.leaveFinallyBlock=function(s,o){if(o=this.finallyContexts_.splice(o||0)[0],o=this.abruptCompletion_=this.abruptCompletion_||o){if(o.isException)return this.jumpToErrorHandler_();null!=o.jumpTo&&this.finallyAddress_<o.jumpTo?(this.nextAddress=o.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=s},i.generator.Context.prototype.forIn=function(s){return new i.generator.Context.PropertyIterator(s)},i.generator.Context.PropertyIterator=function(s){for(var o in this.object_=s,this.properties_=[],s)this.properties_.push(o);this.properties_.reverse()},i.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var s=this.properties_.pop();if(s in this.object_)return s}return null},i.generator.Engine_=function(s){this.context_=new i.generator.Context,this.program_=s},i.generator.Engine_.prototype.next_=function(s){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,s,this.context_.next_):(this.context_.next_(s),this.nextStep_())},i.generator.Engine_.prototype.return_=function(s){this.context_.start_();var o=this.context_.yieldAllIterator_;return o?this.yieldAllStep_("return"in o?o.return:function(l){return{value:l,done:!0}},s,this.context_.return):(this.context_.return(s),this.nextStep_())},i.generator.Engine_.prototype.throw_=function(s){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,s,this.context_.next_):(this.context_.throw_(s),this.nextStep_())},i.generator.Engine_.prototype.yieldAllStep_=function(s,o,l){try{var d=s.call(this.context_.yieldAllIterator_,o);if(i.generator.ensureIteratorResultIsObject_(d),!d.done)return this.context_.stop_(),d;var c=d.value}catch(u){return this.context_.yieldAllIterator_=null,this.context_.throw_(u),this.nextStep_()}return this.context_.yieldAllIterator_=null,l.call(this.context_,c),this.nextStep_()},i.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var s=this.program_(this.context_);if(s)return this.context_.stop_(),{value:s.value,done:!1}}catch(o){this.context_.yieldResult=void 0,this.context_.throw_(o)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(s=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,s.isException)throw s.exception;return{value:s.return,done:!0}}return{value:void 0,done:!0}},i.generator.Generator_=function(s){this.next=function(o){return s.next_(o)},this.throw=function(o){return s.throw_(o)},this.return=function(o){return s.return_(o)},i.initSymbolIterator(),this[Symbol.iterator]=function(){return this}},i.generator.createGenerator=function(s,o){return o=new i.generator.Generator_(new i.generator.Engine_(o)),i.setPrototypeOf&&i.setPrototypeOf(o,s.prototype),o},i.asyncExecutePromiseGenerator=function(s){function o(d){return s.next(d)}function l(d){return s.throw(d)}return new Promise(function(d,c){!function u(h){h.done?d(h.value):Promise.resolve(h.value).then(o,l).then(u,c)}(s.next())})},i.asyncExecutePromiseGeneratorFunction=function(s){return i.asyncExecutePromiseGenerator(s())},i.asyncExecutePromiseGeneratorProgram=function(s){return i.asyncExecutePromiseGenerator(new i.generator.Generator_(new i.generator.Engine_(s)))},i.iteratorFromArray=function(s,o){i.initSymbolIterator(),s instanceof String&&(s+="");var l=0,d={next:function(){if(l<s.length){var c=l++;return{value:o(c,s[c]),done:!1}}return d.next=function(){return{done:!0,value:void 0}},d.next()}};return d[Symbol.iterator]=function(){return d},d},i.polyfill("Array.prototype.keys",function(s){return s||function(){return i.iteratorFromArray(this,function(o){return o})}},"es6","es3"),i.checkStringArgs=function(s,o,l){if(null==s)throw new TypeError("The 'this' value for String.prototype."+l+" must not be null or undefined");if(o instanceof RegExp)throw new TypeError("First argument to String.prototype."+l+" must not be a regular expression");return s+""},i.polyfill("String.prototype.startsWith",function(s){return s||function(o,l){var d=i.checkStringArgs(this,o,"startsWith"),c=d.length,u=(o+="").length;l=Math.max(0,Math.min(0|l,d.length));for(var h=0;h<u&&l<c;)if(d[l++]!=o[h++])return!1;return h>=u}},"es6","es3"),i.polyfill("String.prototype.endsWith",function(s){return s||function(o,l){var d=i.checkStringArgs(this,o,"endsWith");o+="",void 0===l&&(l=d.length),l=Math.max(0,Math.min(0|l,d.length));for(var c=o.length;0<c&&0<l;)if(d[--l]!=o[--c])return!1;return 0>=c}},"es6","es3"),(t=void 0!==t?t:(void 0!==t?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}).error=t.error||{},t.error.code=t.error.code||{},t.error.code.wasmBase=-4e3,t.error.code.wasmException=t.error.code.wasmBase-1,t.error.code.wasmNoModule=t.error.code.wasmBase-1,t.error.code.wasmJsBase=-4100,t.error.code.wasmJsObjectNotInit=t.error.code.wasmJsBase-1,t.error.code.wasmJsObjectTerminated=t.error.code.wasmJsBase-1,t.error.code.wasmJsObjectInitFailed=t.error.code.wasmJsBase-1,t.error.code.wasmJsNotLoaded=t.error.code.wasmJsBase-1,t.error.code.wasmJsInvalidJson=t.error.code.wasmJsBase-1,t.error.code.wasmJsWorkerRunException=t.error.code.wasmJsBase-1,t.error.code.wasmJsWorkerRunFailed=t.error.code.wasmJsBase-1,t.error.code.wasmJsReadFileFailed=t.error.code.wasmJsBase-1,t.error.code.wasmJsCoreTaskException=t.error.code.wasmJsBase-1,t.error.code.wasmJsProcTaskException=t.error.code.wasmJsBase-1,t.error.code.wasmJsSavePdfFailed=t.error.code.wasmJsBase-1,t.error.code.wasmJsSaveTiffFailed=t.error.code.wasmJsBase-1,t.conststring={version:"1.7.2",logInfo:"logInfo",logDebug:"logDebug",logAll:"logAll",initPending:"pending",initReady:"ready",initFailed:"failed",imgIO:"imgIO",core:"imgCore",imgProc:"imgProc",pdfR:"pdfReader",pdfW:"pdfWriter",crypto:"crypto",binaryBlobType:"application/octet-stream",wasmExtension:".wasm"},t.constDefine={mainIndex:0,pdfReaderIndex:1,wasmDefHeapSize:28},t.WasmEnv={wasmJSs:["dynamsoft.imageio_wasm-"+t.conststring.version+".js","dynamsoft.pdfReader_wasm-"+t.conststring.version+".js"],wasmHeap:[{maxHeapSize:300,initHeapSize:280},{maxHeapSize:200,initHeapSize:t.constDefine.wasmDefHeapSize}],moduleNames:[t.conststring.imgIO,t.conststring.crypto,t.conststring.core,t.conststring.imgProc,t.conststring.pdfR,t.conststring.pdfW],imgIO:{name:t.conststring.imgIO,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.imageio-",wasmModule:null,wasmJSIndex:t.constDefine.mainIndex},imgCore:{name:t.conststring.core,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.imagecore-",wasmModule:null,wasmJSIndex:t.constDefine.mainIndex},imgProc:{name:t.conststring.imgProc,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.imageProc-",wasmModule:null,wasmJSIndex:t.constDefine.mainIndex},pdfReader:{name:t.conststring.pdfR,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.pdfReader-",wasmModule:null,wasmJSIndex:t.constDefine.pdfReaderIndex},pdfWriter:{name:t.conststring.pdfW,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.pdfWriter-",wasmModule:null,wasmJSIndex:t.constDefine.mainIndex},crypto:{name:t.conststring.crypto,autoLoad:!0,ver:t.conststring.version,status:"",prefixName:"dynamsoft.crypto-",wasmModule:null,wasmJSIndex:t.constDefine.mainIndex}},t.WasmEnv.buildWasmFileName=function(s,o,l,d){return s+(d?"sn-":"")+o+l},t.WasmEnv.fetchRetry=function(s,o,l,d){var c=o.retries,u=o.retryDelay;return new Promise(function(h,f){var v=function(p){fetch(s,o).then(function(m){h(m)}).catch(function(m){p<c?function(p,m,I){l&&l(d,m),setTimeout(function(){v(++p)},u)}(p,m):f(m)})};v(0)})},t.Enum_ImageType={IT_DIB:-1,IT_RGBA:-2,IT_BGRA:-3,IT_BMP:0,IT_JPG:1,IT_PNG:3,IT_ALL:5},t.Enum_ReturnType={RT_AUTO:-1,RT_BINARY:1,RT_BASE64:2},t.Enum_ErrorMessage={PARAMETER_TYPE_ERROR:"Parameter Type not Supported: ",TIMEOUT:"Timeout no Response: ",FILE_STREAM_ERROR:"File Stream Error: ",WASM_EXCEPTION_ERROR:"An WASM exception occurred."},t.Enum_SimdFlag={SF_DEF:0,SF_ENABLE:1,SF_DISABLE:2},t.Lib=t.Lib||{},t.Lib.env=t.Lib.env||{},t.b64ToUint6=function(s){return 64<s&&91>s?s-65:96<s&&123>s?s-71:47<s&&58>s?s+4:43===s?62:47===s?63:0},t.base64DecToArr=function(s,o){var l=(s=s.replace(/[^A-Za-z0-9\+\/]/g,"")).length;o=o?Math.ceil((3*l+1>>>2)/o)*o:3*l+1>>>2;for(var c,d=new Uint8Array(o),u=0,h=0,f=0;f<l;f++)if(c=3&f,u|=t.b64ToUint6(s.charCodeAt(f))<<18-6*c,3===c||l-f==1){for(c=0;3>c&&h<o;c++,h++)d[h]=u>>>(16>>>c&24)&255;u=0}return d},t.isWasmSupport=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var s=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(s instanceof WebAssembly.Module)return new WebAssembly.Instance(s)instanceof WebAssembly.Instance}}catch(o){}return!1},t.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)},t.readFile=function(s){return new Promise(function(o,l){var d=Object.prototype.toString.call(s);if("[object String]"===d)0===s.indexOf("blob:")||0<s.indexOf(".jpg")||0<s.indexOf(".jpeg")||0<s.indexOf(".png")||0<s.indexOf(".bmp")||0<s.indexOf(".dib")||0<s.indexOf(".pdf")||0<s.indexOf(".tiff")||0<s.indexOf(".tif")?fetch(s,{mode:"cors"}).then(function(u){return u.arrayBuffer()}).then(function(u){return o(u)}).catch(function(u){return Promise.reject(u)}):l("Error url: Can not read the file URL");else if("[object Blob]"===d||"[object FileList]"===d||"[object File]"===d){l=s,("[object FileList]"===d||"[object File]"===d)&&(l=s[0]?s[0]:s);var c=new FileReader;c.readAsArrayBuffer(l),c.onload=function(){o(c.result)}}else"[object ArrayBuffer]"===d||"[object Uint8ClampedArray]"===d?o(s):l("Not support source type: "+d)})},t.base64Decode=function(s){function o(d){var h,c=[],u=d.length;for(h=0;h<u;h++){var f=d.charCodeAt(h);if(0==(f>>7&255))c.push(d.charAt(h));else if(6==(f>>5&255)){var g=d.charCodeAt(++h);f=(31&f)<<6,f|=g&=63,c.push(String.fromCharCode(f))}else 14==(f>>4&255)&&(f=(255&(f=f<<4|(g=d.charCodeAt(++h))>>2&15))<<8|(g=(3&g)<<6|63&d.charCodeAt(++h)),c.push(String.fromCharCode(f)))}return c.join("")}var l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return function(d){for(var f,g,c=[],u=0,h=d.length;u<h;){do{f=l[255&d.charCodeAt(u++)]}while(u<h&&-1==f);if(-1==f)break;do{g=l[255&d.charCodeAt(u++)]}while(u<h&&-1==g);if(-1==g)break;c.push(String.fromCharCode(f<<2|(48&g)>>4));do{if(61==(f=255&d.charCodeAt(u++)))return o(c.join(""));f=l[f]}while(u<h&&-1==f);if(-1==f)break;c.push(String.fromCharCode((15&g)<<4|(60&f)>>2));do{if(61==(g=255&d.charCodeAt(u++)))return o(c.join(""));g=l[g]}while(u<h&&-1==g);if(-1==g)break;c.push(String.fromCharCode((3&f)<<6|g))}return o(c.join(""))}(s)},t.WasmEnv=t.WasmEnv||{},t.WasmEnv.lastInstanceId=0,t.WasmEnv.worker={maxWorkers:1,liveTime:60},t.WasmEnv.resourceDir=t.DWT.ResourcesPath+"/src/",t.WasmEnv.logLevel=t.DWT.Debug?t.conststring.logDebug:0,t.WasmEnv.logFunc=null,t.WasmEnv.productKey="",t.WasmEnv.licMode=0,t.WasmEnv.uuid="",t.WasmEnv.fetchOptions={mode:"cors",credentials:"same-origin",retries:3,retryDelay:500},t.WasmEnv.simdFlag=t.Enum_SimdFlag.SF_DEF,t.WasmEnv.useFastcompEdition=!1,t.WasmEnv.log=function(s,o){var l=t.WasmEnv;l.logLevel===o&&("function"==typeof l.logFunc?l.logFunc(s):console.log(s))},t.WasmEnv.clear=function(s){for(var o=i.makeIterator(t.WasmEnv.moduleNames),l=o.next();!l.done;l=o.next())(t.WasmEnv[l=l.value].wasmJSIndex==s||null==s)&&(t.WasmEnv[l].status="",delete t.WasmEnv[l].error)},t.WasmEnv.setLoglevel=function(s,o){t.WasmEnv.logLevel=1===s?t.conststring.logDebug:0,t.WasmEnv.logFunc=o},t.WorkerHandler=function(s,o){function l(c){d.terminated=!0,d.options.log("[js]["+Date.now()/1e3+"] worker error "+JSON.stringify(c),d.context),d.terminating&&d.terminationHandler&&d.terminationHandler(d),d.terminating=!1,d.cancelAllTasks()}var d=this;this.options=o||{},this.script=s,this.worker=function(c){if("function"!=typeof Worker&&("object"!=typeof Worker||"function"!=typeof Worker.prototype.constructor))throw Error("Web Workers not supported");return(c=new Worker(c)).on=function(u,h){this.addEventListener(u,function(f){h(f.data)})},c.send=function(u){if(null!=u&&null!=u.params&&null!=u.params.input){var h=Object.prototype.toString.call(u.params.input);if("[object Array]"===Object.prototype.toString.call(u.params.input)){if("[object ArrayBuffer]"===(h=Object.prototype.toString.call(u.params.input[0]))||"[object Uint8ClampedArray]"===h||"[object Uint8Array]"===h)return void this.postMessage(u,[null!=u.params.input[0].buffer?u.params.input[0].buffer:u.params.input[0]])}else if("[object ArrayBuffer]"===h||"[object Uint8ClampedArray]"===h||"[object Uint8Array]"===h)return void this.postMessage(u,[null!=u.params.input.buffer?u.params.input.buffer:u.params.input])}this.postMessage(u)},c}(this.script),this.requestQueue=[],this.terminated=this.terminating=!1,d.tasks=Object.create(null),this.objectToError=function(c){for(var u=Error(""),h=Object.keys(c),f=0;f<h.length;f++)u[h[f]]=c[h[f]];return u},this.dispatchQueuedRequests=function(){d.requestQueue.forEach(d.worker.send.bind(d.worker)),d.requestQueue=[]},this.logDebug=function(c){t.WasmEnv.logLevel===t.conststring.logDebug&&"function"==typeof d.options.log&&d.options.log("[js]["+Date.now()/1e3+"] "+c,d.context)},this.worker.on("message",function(c){if("function"==typeof d.options.log&&d.options.log(c.log?c.log:c,d.context),"string"==typeof c&&"ready"===c)d.worker.ready=!0,d.dispatchQueuedRequests();else if(!c.log){if("object"==typeof c){var u=c.result;"object"==typeof u?(null!=u.errorCode&&(u.code=u.errorCode,delete u.errorCode),null!=u.errorMessage&&(u.message=u.errorMessage,delete u.errorMessage)):"string"==typeof u&&(u=(u=(u=(u=u.replace('"errorCode"','"code"')).replace("'errorCode'","'code'")).replace('"errorMessage"','"message"')).replace("'errorMessage'","'message'"),c.result=u),null!=c.memSize&&(d.memSize=c.memSize)}var h=d.tasks[u=c.id];void 0!==h?(delete d.tasks[u],d.logDebug(c.func+" received"),!0===d.terminating&&d.terminate(),"loadWasm"===c.func&&null!=c.result&&(d.worker.wasmReady=!0,d.dispatchQueuedRequests()),c.error?h.resolver.reject(d.objectToError(c.error)):c.result&&h.resolver.resolve(c.result)):"loadWasm"===c.func&&null!=c.result&&t.WasmEnv._handleWasmLoad(c.result,d)}}),this.worker.on("error",l),this.worker.on("exit",function(c,u){c="Worker terminated Unexpectedly\n exitCode: `"+c+"`\n signalCode: `"+u+"`\n script: `"+d.script+"`\n",l(Error(c))}),this.terminated=this.terminating=!1,this.terminationHandler=null,this.lastTaskId=0},t.WorkerHandler.prototype.exec=function(s,o,l){l||((l={}).promise=new Promise(function(c,u){l.resolve=c,l.reject=u}));var d=++this.lastTaskId;return this.tasks[d]={id:d,resolver:l},o={id:d,func:s,params:o},t.WasmEnv.logLevel===t.conststring.logDebug&&(o.params.logLevel=t.conststring.logDebug,this.logDebug(s+" send")),this.terminated?l.reject(Error("Worker is terminated")):this.terminating?l.reject(Error("Worker is terminating")):this.worker.wasmReady||this.worker.ready&&"loadWasm"===s?this.worker.send(o):this.requestQueue.push(o),l.promise},t.WorkerHandler.prototype.busy=function(){return 0<this.howManyTasks()},t.WorkerHandler.prototype.howManyTasks=function(){return Object.keys(this.tasks).length},t.WorkerHandler.prototype.cancelAllTasks=function(s){for(var o in this.tasks)void 0!==this.tasks[o]&&this.tasks[o].resolver.reject(Error(s));this.tasks=Object.create(null)},t.WorkerHandler.prototype.alive=function(){return!(this.terminating||this.terminated)},t.WorkerHandler.prototype.terminate=function(s,o){if(this.logDebug("worker terminate "+s),s&&this.cancelAllTasks("Worker has been terminated"),"function"==typeof o&&(this.terminationHandler=o),this.busy())this.terminating=!0;else{if(this.worker){if("function"!=typeof this.worker.terminate)throw Error("Failed to terminate worker");this.worker.terminate(),this.worker=null}this.terminating=!1,this.terminated=!0,this.terminationHandler&&this.terminationHandler(this)}},t.WorkerHandler.prototype.setLogCallback=function(s,o){this.options.log=s,this.context=o},t.WorkerPool=function(s,o,l,d){var c=this;this.workers=[],this.options=s,this.maxWorkers=1,this.script=this.options.resourceDir+l,this.ready=!1,this.pdfReaderInstance=null,this.terminated=!1,this.wasmLoaderPromise=Object.create(null),this.poolIndex=d,this.crossScript=!1,this._getMaxWorkers=function(){var u=2;return"hardwareConcurrency"in Bt.navigator&&(u=Bt.navigator.hardwareConcurrency),Math.max(Math.min(c.options.worker.maxWorkers,Math.max(c.options.worker.maxWorkers,u/2)),1)},this._logAll=function(u){t.WasmEnv.log(u,t.conststring.logAll)},this._log=function(u,h){t.WasmEnv.log(u,t.conststring.logDebug)},this._createWorker=function(){c.ready&&(c.maxWorkers=c._getMaxWorkers());var u=c.workers;if(u.length<c.maxWorkers){var h=new t.WorkerHandler(c.script);return u.push(h),h.id=u.length,h.module={},h.module.modulesInfo=[],h.instances=Object.create(null),h.setLogCallback(this._log,c),c._logAll(u),c.log("get new worker "+h.id+" succeed!"),h}return null},this._getContainedModuleWorkers=function(u){c._removeTerminatedWorker();var h=c.workers;c._logAll(h);for(var f=[],g=i.makeIterator(h),v=g.next();!v.done;v=g.next())!(v=v.value).module.modulesInfo[u.name]||v.busy()&&h.length<c.maxWorkers||f.push(v);return c._logAll("get workers for module "+u.name),c._logAll(f),f},this._checkWorkerValid=function(){c._removeTerminatedWorker(),0==c.workers.length&&c.data&&(c.log("no worker ready, reinit"),c.crossScript?c._initAsync(c.data):c._init(c.data))},this._getIdleWorker=function(){c._removeTerminatedWorker();for(var u=i.makeIterator(c.workers),h=u.next();!h.done;h=u.next())if(!1===(h=h.value).busy())return h;return c._createWorker()},this._busy=function(){c._removeTerminatedWorker();for(var u=i.makeIterator(c.workers),h=u.next();!h.done;h=u.next())if(h.value.busy())return!0;return!1},this._removeTerminatedWorker=function(){c.workers=c.workers.filter(function(u){return!u.terminated})},this._getWorkerByIntanceId=function(u,h){c._logAll("_getWorkerByIntanceId"),c._logAll(u);for(var f=9007199254740991,g=null,v=i.makeIterator(u),p=v.next();!p.done;p=v.next()){if(null!=(p=p.value).instances[h]){g=p;break}var m=p.howManyTasks();m<f&&(g=p,f=m)}return g?(g.instances[h]="",c._logAll(u),c.log("get worker "+h+" in "+g.id+" succeed!"),g):(c._logAll("_getWorkerByIntanceId: no suitable worker"),null)},this._initWorkerInner=function(u,h,f){try{h.params&&(h.params.resourceDir=this.resourceDir,h.params.fetchOptions=t.WasmEnv.fetchOptions);for(var g=i.makeIterator(h.params.module.modulesInfo),v=g.next();!v.done;v=g.next())t.WasmEnv[v.value.name].status=t.conststring.initPending;u.exec(h.func,h.params).then(function(p){void 0===p.code||p.modules?t.WasmEnv._handleWasmLoad(p,u):c.log(p),f()}).catch(function(p){c.log(p),f()})}catch(p){c.log(p),f()}},this._removeInstanceInWorker=function(u,h){var f=c.workers;c._logAll("removeInstanceInWorker"),c._logAll(f);for(var g=i.makeIterator(f),v=g.next();!v.done;v=g.next())if((v=v.value)===u){null!=v.instances[h]?(delete v.instances[h],c._logAll(f),c.log("removeInstanceInWorker "+h+" in "+v.id+" succeed!")):c.log("not found instance "+h);break}},this._hasInstanceInWorker=function(){for(var u=i.makeIterator(c.workers),h=u.next();!h.done;h=u.next())if(0!=Object.keys(h.value.instances).length)return!0;return null!=c.pdfReaderInstance},this._getWorker=function(u,h){if(t.WasmEnv[u.name].status==t.conststring.initPending)return this._checkWorkerValid(),null;var f=c._getContainedModuleWorkers(u);if(0!=f.length)return c._getWorkerByIntanceId(f,h);if(f=c._getIdleWorker()){if(f.module.modulesInfo[u.name])return f;c.log("_getWorker: try to recreate worker "+h),u={id:0,func:"loadWasm",params:{priority:0,key:c.options.productKey,licMode:t.WasmEnv.licMode,uuid:t.WasmEnv.uuid,module:{modulesInfo:[],poolIndex:c.poolIndex,useFastcompEdition:t.WasmEnv.useFastcompEdition}}};for(var g=(h=i.makeIterator(t.WasmEnv.moduleNames)).next();!g.done;g=h.next())null!=t.WasmEnv[g=g.value].poolIndex&&t.WasmEnv[g].poolIndex==c.poolIndex&&u.params.module.modulesInfo.push({name:g,ver:t.WasmEnv[g].ver,wasmModule:t.WasmEnv[g].wasmModule,poolIndex:t.WasmEnv[g].poolIndex,useSimd:t.WasmEnv[g].useSimd});c._initWorkerInner(f,u,function(){})}return null},this._init=function(u){var h=c._createWorker();h&&(h.setLogCallback(function(f,g){g.log(f)},c),u.params.callback=null,c._initWorkerInner(h,u,function(f){c.maxWorkers=c._getMaxWorkers(),c.ready=!0}))},this._initAsync=function(u){var f,h=this;return i.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return f=c,g.yield(t.WasmEnv.fetchRetry(c.script,t.WasmEnv.fetchOptions,h._log,h).then(function(v){return v.blob()}).then(function(v){return URL.createObjectURL(v)}),2);f.script=g.yieldResult,c._init(u),g.jumpToEnd()})},this._getPath=function(){this.script.startsWith("http://")||this.script.startsWith("https://")?this.resourceDir=this.options.resourceDir:this.options.resourceDir.startsWith("/")?null!=location.origin&&(this.resourceDir=location.origin+this.options.resourceDir):null!=location.href&&(this.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+this.options.resourceDir),this.resourceDir.endsWith("/")||(this.resourceDir+="/"),d==t.constDefine.mainIndex&&t.WasmEnv.useFastcompEdition&&(this.resourceDir+="fastcomp/",this.script=this.resourceDir+l)},this._getPath(),o&&0<o.params.module.modulesInfo.length?(!this.script.startsWith("http://")&&!this.script.startsWith("https://")||this.script.startsWith(location.origin)||(this.crossScript=!0),this.data=o,this.crossScript?this._initAsync(o):this._init(o)):(c.maxWorkers=c._getMaxWorkers(),c.ready=!0)},t.WorkerPool.prototype.getWorker=function(s,o){if(!this.ready)return null;var l=s.name===t.WasmEnv.pdfReader.name;if(l&&this.pdfReaderInstance)return null;if((s=this._getWorker(s,o))&&l){if(this.pdfReaderInstance)return this._removeInstanceInWorker(s,o),null;this.pdfReaderInstance=o}return s},t.WorkerPool.prototype.removeInstanceInWorker=function(s,o,l,d){this._removeInstanceInWorker(o,l),s.name===t.WasmEnv.pdfReader.name&&this.pdfReaderInstance&&(this.pdfReaderInstance=null),d&&o&&null!=o.memSize&&(t.WasmEnv.log("current memSize="+o.memSize+", max="+(s=1048576*t.WasmEnv.wasmHeap[this.poolIndex].maxHeapSize),t.conststring.logDebug),o.memSize>s&&0!=s&&!this._hasInstanceInWorker()&&(t.WasmEnv.log("reload wasm auto",t.conststring.logDebug),t.WasmEnv.load(void 0,void 0,void 0,this.poolIndex)))},t.WorkerPool.prototype.log=function(s){t.WasmEnv.log(s,t.conststring.logDebug)},t.WorkerPool.prototype.terminate=function(s){t.WasmEnv.log("worker pool terminate "+s,t.conststring.logDebug),this.terminated=!0;var o=[],l=this.workers.slice();return this.workers=[],l.forEach(function(d){var c={};c.promise=new Promise(function(u,h){c.resolve=u,c.reject=h}),o.push(c.promise),d.terminate(s,function(u){c.resolve(u)})}),Promise.all(o)},t.WorkerPool.prototype.getMemoryUsed=function(){for(var s=[],o=0,l=i.makeIterator(this.workers),d=l.next();!d.done;d=l.next())(d=d.value)&&null!=d.memSize&&(s[o++]=d.memSize);return s},t.WasmEnv.loadPdfReader=function(s,o,l){t.WasmEnv.load(s,o,l,t.constDefine.pdfReaderIndex)},t.WasmEnv.loadMain=function(s,o,l){t.WasmEnv.load(s,o,l,t.constDefine.mainIndex)},t.WasmEnv.load=function(s,o,l,d){t.WasmEnv.unload(d),t.WasmEnv.productKey=null!=s?s:t.WasmEnv.productKey,null!=o&&(t.WasmEnv.licMode=o?1:0),t.WasmEnv.uuid=null!=l?l:t.WasmEnv.uuid,t.WasmEnv.licenseInfo=void 0,t.WasmEnv.loadingPromise={},t.WasmEnv.loadingPromise.promise=new Promise(function(u,h){t.WasmEnv.loadingPromise.resolve=u,t.WasmEnv.loadingPromise.reject=h});var c=t.WasmEnv;for(c.clear(d),void 0===t.WorkerPool.Instances&&(t.WorkerPool.Instances=[]),null!=d?t.WorkerPool.Instances[d]=null:t.WorkerPool.Instances=[],o=0;o<c.wasmJSs.length;o++)(null==d||d==o)&&(l={id:0,func:"loadWasm",params:{priority:0,key:s,licMode:t.WasmEnv.licMode,uuid:t.WasmEnv.uuid,module:{modulesInfo:[],poolIndex:o,useFastcompEdition:t.WasmEnv.useFastcompEdition},callback:function(u){c.logLevel===t.conststring.logDebug&&("function"==typeof c.logFunc?c.logFunc(u):console.log(u))}}},c.imgCore.autoLoad&&c.imgCore.wasmJSIndex==o&&(l.params.module.modulesInfo.push({name:c.imgIO.name,ver:c.imgIO.ver,wasmModule:c.imgIO.wasmModule,poolIndex:o}),c.imgIO.poolIndex=o,1===t.WasmEnv.licMode&&(l.params.module.modulesInfo.push({name:c.crypto.name,ver:c.crypto.ver,wasmModule:c.crypto.wasmModule,poolIndex:o}),c.crypto.poolIndex=o)),(c.imgCore.autoLoad||c.imgCore.wasmModule)&&c.imgCore.wasmJSIndex==o&&(l.params.module.modulesInfo.push({name:c.imgCore.name,ver:c.imgCore.ver,wasmModule:c.imgCore.wasmModule,poolIndex:o}),c.imgCore.poolIndex=o),(c.imgProc.autoLoad||c.imgProc.wasmModule)&&c.imgProc.wasmJSIndex==o&&(c.imgProc.useSimd=t.WasmEnv.getUseSimd(),l.params.module.modulesInfo.push({name:c.imgProc.name,ver:c.imgProc.ver,wasmModule:c.imgProc.wasmModule,poolIndex:o,useSimd:c.imgProc.useSimd}),c.imgProc.poolIndex=o),(c.pdfReader.autoLoad||c.pdfReader.wasmModule)&&c.pdfReader.wasmJSIndex==o&&(l.params.module.modulesInfo.push({name:c.pdfReader.name,ver:c.pdfReader.ver,wasmModule:c.pdfReader.wasmModule,poolIndex:o}),c.pdfReader.poolIndex=o),(c.pdfWriter.autoLoad||c.pdfWriter.wasmModule)&&c.pdfWriter.wasmJSIndex==o&&(l.params.module.modulesInfo.push({name:c.pdfWriter.name,ver:c.pdfWriter.ver,wasmModule:c.pdfWriter.wasmModule,poolIndex:o}),c.pdfWriter.poolIndex=o),t.WorkerPool.Instances[o]=0!=l.params.module.modulesInfo.length?new t.WorkerPool(c,l,c.wasmJSs[o],o,t.WasmEnv.maxHeapSize,t.WasmEnv.initH):null)},t.WasmEnv.unloadMain=function(){return t.WasmEnv.unload(t.constDefine.mainIndex)},t.WasmEnv.unloadPdfReader=function(){return t.WasmEnv.unload(t.constDefine.pdfReaderIndex)},t.WasmEnv.getUseSimd=function(){if(t.WasmEnv.useFastcompEdition)return!1;if(t.WasmEnv.simdFlag===t.Enum_SimdFlag.SF_DEF){if(null!=navigator.userAgentData&&null!=navigator.userAgentData.brands)for(var s=i.makeIterator(navigator.userAgentData.brands),o=s.next();!o.done;o=s.next())if((o=o.value).brand&&("Chromium"==o.brand||"Google Chrome"==o.brand)&&o.version&&94<=parseInt(o.version,10))return!0}else if(t.WasmEnv.simdFlag===t.Enum_SimdFlag.SF_ENABLE)return!0;return!1},t.WasmEnv.unload=function(s){var o=t.WorkerPool.Instances;if(null!=o){if(null!=s)return o[s].terminate(!0);s=[];for(var l=(o=i.makeIterator(o)).next();!l.done;l=o.next())s.push(l.value.terminate(!0));return s}return Promise.resolve()},t.WasmEnv.getWorkerPool=function(s){var o=t.WorkerPool.Instances;return o?(s=o[s]).terminated?null:s:null},t.WasmEnv.busy=function(s){var o=t.WorkerPool.Instances;if(o){if(null!=s)return o[s].busy();for(o=(s=i.makeIterator(o)).next();!o.done;o=s.next())if(o.value._busy())return!0}return!1},t.WasmEnv._handleWasmLoad=function(s,o){if(t.WasmEnv.log("handleWasmLoad:",t.conststring.logDebug),t.WasmEnv.log(s,t.conststring.logDebug),"object"!=typeof s||null==s.modules)"object"==typeof s&&t.WasmEnv.loadingPromise.reject({code:s.code,message:s.message});else{for(var l=i.makeIterator(s.modules),d=l.next();!d.done;d=l.next())d=d.value,s.code?(t.WasmEnv[d.name].error={code:s.code,message:s.message},o.module.modulesInfo[d.name]=!1):(delete t.WasmEnv[d.name].error,t.WasmEnv[d.name].status=t.conststring.initReady,t.WasmEnv[d.name].wasmModule=d.wasmModule,o.module.modulesInfo[d.name]=!0);s.licenseInfo&&("string"==typeof(s=s.licenseInfo)&&(s=JSON.parse(s),t.WasmEnv.licenseInfo=s),t.WasmEnv.loadingPromise.resolve(s)),null!=t.WasmEnv.imgIO.error&&t.WasmEnv.loadingPromise.reject(t.WasmEnv.imgIO.error)}},t.ImageIoBase=function(s,o,l,d){var c=this;this.moduleInfo=o,this.name=this.moduleInfo.name,this.outputType=t.Enum_ImageType.IT_JPG,this.inputType=t.Enum_ImageType.IT_ALL,this.tiffFormat=0,this.jpegQuality=80,this.tasksQueue=[],this.worker=null,this.lastTaskId=0,this.logFunc=l,this.context=d,this.instanceId=++t.WasmEnv.lastInstanceId,this.timer=null,this.nv=JSON.parse(JSON.stringify(t.navInfo)),this.mb=t.Lib.env.bMobile,this.dm=location.origin,this.initStatus="",this.terminated=!1,this.license=s||t.license,this.license||(this.license=""),this.licMode=t.WasmEnv.licMode,this.uuid=t.WasmEnv.uuid,this._getWorker=function(){if(c.timer&&clearTimeout(c.timer),c.worker&&c.worker.alive())return c.worker;var u=t.WasmEnv.getWorkerPool(c.moduleInfo.poolIndex);if(u){if(c.worker=u.getWorker(c.moduleInfo,c.instanceId),c.worker&&c.worker.alive())0<c.tasksQueue.length&&c._dispatchQueuedTasks();else{if(t.WasmEnv[c.name].error)return c._cancelAllTasks(t.error.code.wasmJsNotLoaded,t.WasmEnv[c.name].error),c.worker;0<c.tasksQueue.length&&(c.timer=setTimeout(c._getWorker,50))}return c.worker}c._cancelAllTasks(t.error.code.wasmJsNotLoaded,"wasm env not loaded")},this._dispatchQueuedTasks=function(){if(c._logAll(c.tasksQueue,c),c.worker&&c.worker.alive()){if(0<c.tasksQueue.length){var u=c.tasksQueue[0];(c.initStatus===t.conststring.initReady||"init"===u.func)&&(delete c.tasksQueue[0],c.tasksQueue.splice(0,1),c._exec(u))}}else c.worker&&!c.worker.alive()&&0<c.tasksQueue.length&&"init"!=c.tasksQueue[0].func?(c.worker=null,c._init()):0<c.tasksQueue.length&&c._getWorker()},this._log=function(u,h){"function"==typeof h.logFunc?h.logFunc(u,h.context):t.WasmEnv.log(u,t.conststring.logDebug)},this._logAll=function(u,h){t.WasmEnv.logLevel===t.conststring.logAll&&this._log(u,h)},this._handleReject=function(u,h,f){var g=h;return"object"!=typeof g&&((g={}).code=f,g.message=h),this.terminated?u.resolve(g):u.reject(g)},this._handleBasicResult=function(u,h){return delete u.code,delete u.message,u},this._handleBooleanResult=function(u,h){return!0},this._createImageResult=function(u,h,f){return f?null!=h?new Blob([u],{type:h}):new Blob([u]):u},this._handleImageData=function(u,h){if("object"==typeof u.imageData)if(null!=u.imageCount&&1<u.imageCount)for(var f=0;f<u.imageCount;f++)u.imageData[f]=h.context._createImageResult(u.imageData[f],u.blobType,h.params.returnBlob);else u.imageData=h.context._createImageResult(u.imageData,u.blobType,h.params.returnBlob);return"object"==typeof u.pdfData&&(u.pdfData=h.context._createImageResult(u.pdfData,u.blobType,h.params.returnBlob)),u},this._handleResult=function(u,h){void 0===(u=h.context._getResult(u)).code||!u.code&&"Successful."===u.message?(u=h.handleResult(u,h),c._dispatchQueuedTasks(),(h=h.resolve)(u)):(u={code:u.code,message:u.code===t.error.code.wasmException?t.Enum_ErrorMessage.WASM_EXCEPTION_ERROR:u.message},this.terminated?h.resolve(u):h.reject(u))},this._getResult=function(u){try{return"string"==typeof u?JSON.parse(u):u}catch(h){return u}},this._exec=function(u){var h=c.worker;h.setLogCallback(c._log,c),c._logAll(u,c);try{h.exec(u.func,u.params).then(function(f){c._log(f,c),c._handleResult(c._getResult(f),u)}).catch(function(f){c._log(f,c),c._dispatchQueuedTasks();var g=f;"object"==typeof f&&null!=f.message&&(g=f.message),f={code:t.error.code.wasmJsWorkerRunFailed,message:g},c.terminated?u.resolve(f):u.reject(f)})}catch(f){c._dispatchQueuedTasks(),c._log(f,c),h={code:t.error.code.wasmJsWorkerRunException,message:f.message,stack:f.stack},c.terminated?u.resolve(h):u.reject(h)}},this._cancelAllTasks=function(u,h){for(var f=i.makeIterator(c.tasksQueue),g=f.next();!g.done;g=f.next())if(void 0!==(g=g.value)){var v={code:u,message:h};c.terminated?g.resolve(v):g.reject(v)}c.tasksQueue=[]},this._createTask=function(u,h,f){var g={id:++this.lastTaskId};return g.promise=new Promise(function(v,p){g.resolve=v,g.reject=p}),g.func=u,g.params={moduleName:this.name,insId:this.instanceId,fetchOptions:t.WasmEnv.fetchOptions,initHeapSize:t.WasmEnv.wasmHeap[this.moduleInfo.poolIndex].initHeapSize},g.context=this,g.handleResult=void 0!==f&&f?f:this._handleBasicResult,g.params.input=void 0!==h&&h?h:"",g.params.returnType="",g.params.returnBlob=!0,g},this._addTask=function(u,h){return""===this.initStatus?u.reject({code:t.error.code.wasmJsObjectNotInit,message:this.terminated?"object has been disposed":"object not init"}):this.initStatus===t.conststring.initFailed?u.reject({code:t.error.code.wasmJsObjectInitFailed,message:c.initError}):(h?c.tasksQueue.unshift(u):c.tasksQueue.push(u),c._dispatchQueuedTasks()),u.promise},this._init=function(){var u=this._createTask("init");u.params.key=this.license,u.params.uuid=this.uuid,u.params.licMode=this.licMode,u.params.val={nv:this.nv,mb:this.mb,dm:this.dm},u.handleResult=function(h,f){return f.context.initStatus=t.conststring.initReady,h},this.initStatus=t.conststring.initPending,this._addTask(u,!0),u.promise.then(function(h){c._log(c.name+" init return: ",c),c._log(h,c)}).catch(function(h){c.initStatus=t.conststring.initFailed,c.initError=h.message,c._log(c.name+" init failed",c),c._log(h,c),c._cancelAllTasks(t.error.code.wasmJsObjectInitFailed,h.message)})},this._destroy=function(){var u=this._createTask("destroy");return this._addTask(u),u.promise},this._terminate=function(u){var h=this._destroy();this.terminated=!0;var f=t.WasmEnv.getWorkerPool(c.moduleInfo.poolIndex);f&&f.removeInstanceInWorker(c.moduleInfo,c.worker,c.instanceId,u),h.then(function(g){c.worker=null,c._log(c.name+" destroy return: ",c),c._log(g,c)}).catch(function(g){c.worker=null,c._log(c.name+" destroy failed",c),c._log(g,c)}),this.initStatus=""},this._readFile=function(u,h){return new Promise(function(f,g){t.readFile(u).then(function(v){f(v)},function(v){c._handleReject(h,v,t.error.code.wasmJsReadFileFailed)}).catch(function(v){c._handleReject(h,v,t.error.code.wasmJsReadFileFailed)})})},this._init()},t.ImageIoBase.prototype.terminate=function(s){this._terminate(null==s||s)},t.ImageIoBase.prototype.downloadData=function(s,o,l,d){return s=s||Date.now()+"",new Promise(function(c,u){if(o){if("base64"===l){var h=t.base64DecToArr(o).buffer;h=new Blob([h],{type:"pdf"==d?"application/pdf":"jpg"==d?"image/jpeg":"image/"+d}),h=URL.createObjectURL(h)}else"blob"===l?h=o:u(t.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!");s=s+"."+d,window.navigator.msSaveBlob&&fetch(h).then(function(f){return f.arrayBuffer()}).then(function(f){f=new Blob([f]),window.navigator.msSaveOrOpenBlob(f,s),c(s)}),(u=document.createElement("a")).href=h,u.download=s,u.click(),c(s)}else u(t.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!")}).catch(function(c){return Promise.reject(c)})},t.Imagecore=function(s,o,l){t.ImageIoBase.call(this,s=s||t.WasmEnv.productKey,t.WasmEnv.imgCore,o,l),this.saveImageInner=function(d,c,u,h,f,g,v,p,m,I){var y=this;c=null!=c?c:this.inputType,u=null!=u?u:0,h=null!=h?h:0,f=null!=f?f:24,g=null!=g?g:96,v=null!=v?v:96,p=null!=p?p:this.outputType,m=null!=m?m:this.jpegQuality,I=null!=I?I:t.Enum_ReturnType.RT_AUTO;var _=y._createTask("SaveImage");return y._readFile(d,_).then(function(C){_.params.input=[C,c,u,h,f,g,v,p,m],_.params.returnType=I,_.params.returnBlob=I!=t.Enum_ReturnType.RT_BASE64,_.handleResult=y._handleImageData,y._addTask(_)}),_.promise}},t.Imagecore.prototype=Object.create(t.ImageIoBase.prototype),t.Imagecore.prototype.constructor=t.Imagecore,t.Imagecore.prototype.getImageFormat=function(s){var o=this,l=o._createTask("GetImageFormat");return o._readFile(s,l).then(function(d){l.params.input=d,o._addTask(l)}),l.promise},t.Imagecore.prototype.readImageInfo=function(s){var o=this,l=o._createTask("ReadImageInfo");return o._readFile(s,l).then(function(d){l.params.input=d,o._addTask(l)}),l.promise},t.Imagecore.prototype.getMD5=function(s){var o=this,l=o._createTask("GetMD5");return o._readFile(s,l).then(function(d){l.params.input=d,l.handleResult=function(c,u){return c.MD5},o._addTask(l)}),l.promise},t.Imagecore.prototype.getLicenseInfo=function(){return this._addTask(this._createTask("GetLicenseInfo"))},t.Imagecore.prototype.getAesResult=function(s){return this._addTask(this._createTask("GetAesResult",[null!=s?s:""]))},t.Imagecore.prototype.saveImage=function(s,o,l,d){return this.saveImageInner(s,null,null,null,null,null,null,o,l,d)},t.Imagecore.prototype.readImage=function(s,o,l,d){o=null!=o?o:this.outputType,l=null!=l?l:this.jpegQuality,d=null!=d&&d;var c=this,u=c._createTask("ReadImage");return c._readFile(s,u).then(function(h){u.params.input=[h,o,l],u.params.returnType=d?t.Enum_ReturnType.RT_BASE64:t.Enum_ReturnType.RT_AUTO,u.params.returnBlob=!d,u.handleResult=c._handleImageData,c._addTask(u)}),u.promise},t.Imagecore.prototype.openTiff=function(s){var o=this,l=o._createTask("LoadTiff");return o._readFile(s,l).then(function(d){l.params.input=d,o._addTask(l)}),l.promise},t.Imagecore.prototype.readTiff=function(s,o,l){s=null!=s?s:0,o=null!=o?o:this.outputType,l=null!=l?l:this.returnImageAsBase64;var d=this._createTask("ReadTiffPage");return d.params.input=[s,o],d.params.returnType=l?t.Enum_ReturnType.RT_BASE64:t.Enum_ReturnType.RT_AUTO,d.params.returnBlob=!l,d.handleResult=this._handleImageData,this._addTask(d)},t.Imagecore.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))},t.Imagecore.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))},t.Imagecore.prototype.appendImage=function(s,o,l,d){o=null!=o?o:this.inputType,l=null!=l?l:this.tiffFormat,d=null!=d?d:this.jpegQuality;var c=this,u=c._createTask("AppendImageToTiff");return c._readFile(s,u).then(function(h){u.params.input=[h,o,l,d],u.handleResult=c._handleBooleanResult,c._addTask(u)}),u.promise},t.Imagecore.prototype.addTag=function(s,o,l){return this._addTask(this._createTask("AddTagToNextPage",[s,o,null!=l&&l],this._handleBooleanResult))},t.Imagecore.prototype.getTiff=function(s){var o=this._createTask("GetTiffStream");return o.handleResult=this._handleImageData,o.params.returnType=null!=s?s:t.Enum_ReturnType.RT_AUTO,o.params.returnBlob=s!=t.Enum_ReturnType.RT_AUTO,this._addTask(o)},t.Imagecore.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(s,o){return s.memoryUsed}))},t.Imagecore.prototype.getMultiPartFile=function(s,o){return this._addTask(this._createTask("ds_get_file",[s,o],function(l,d){return l}))},t.ImageProc=function(s,o,l){t.ImageIoBase.call(this,s=s||t.WasmEnv.productKey,t.WasmEnv.imgProc,o,l)},t.ImageProc.prototype=Object.create(t.ImageIoBase.prototype),t.ImageProc.prototype.constructor=t.ImageProc,t.ImageProc.prototype.initImage=function(s,o,l,d,c){o=null!=o&&o,l=null!=l?l:0,d=null!=d?d:0,c=null!=c&&c;var u=this,h=u._createTask("InitImageObject");return h.params.input=[s,l,d],o||c?(h.params.input.push(o?t.Enum_ImageType.IT_RGBA:t.Enum_ImageType.IT_BGRA),u._addTask(h)):u._readFile(s,h).then(function(f){h.params.input[0]=f,h.params.input.push(t.Enum_ImageType.IT_ALL),u._addTask(h)}),h.promise},t.ImageProc.prototype.rotate=function(s,o,l,d){return(0>(s=null!=s?s:0)||360<s)&&0>(s%=360)&&(s+=360),this._addTask(this._createTask("RotateEx",[s,null!=l&&l,null!=d?d:3,null!=o?o:"FFFFFF"],this._handleBooleanResult))},t.ImageProc.prototype.flip=function(s){s=null!=s?s:1;var o=this._createTask("");return o.handleResult=this._handleBooleanResult,1===s?o.func="Flip":-1===s&&(o.func="Mirror"),this._addTask(o),o.promise},t.ImageProc.prototype.erase=function(s,o,l,d,c){c=null!=c?c:"FFFFFF";var u=this._createTask("Erase");return u.handleResult=this._handleBooleanResult,u.params.input=[s,o,l,d,c],this._addTask(u),u.promise},t.ImageProc.prototype.crop=function(s,o,l,d){return this._addTask(this._createTask("Crop",[s,o,l,d],this._handleBooleanResult))},t.ImageProc.prototype.resize=function(s,o,l){return this._addTask(this._createTask("ChangeImageSize",[s,o,null!=l?l:5],this._handleBooleanResult))},t.ImageProc.prototype.toGrayscale=function(s){1>(s=null!=s?s:1)&&(s=1),3<s&&(s=3);var o="";return 1===s?o="0":2===s?o="3;3;720;1.05":3===s&&(o="3;5;1080;1.05"),this._addTask(this._createTask("ConvertToGrayScale",o,this._handleBooleanResult))},t.ImageProc.prototype.toBinary=function(s,o){1>(o=null!=o?o:1)&&(o=1),3<o&&(o=3);var l="";return null!=s&&(s?l="1":1===o?l="0":2===o?l="2;3;720;1.05":3===o&&(l="2;5;1080;1.05")),this._addTask(this._createTask("ConvertToBWScale",l,this._handleBooleanResult))},t.ImageProc.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))},t.ImageProc.prototype.setImageWidth=function(s,o){return this._addTask(this._createTask("SetImageWidth",[s,null!=o?o:"FFFFFF"],this._handleBooleanResult))},t.ImageProc.prototype.setImageHeight=function(s,o){return this._addTask(this._createTask("SetImageHeight",[s,null!=o?o:"FFFFFF"],this._handleBooleanResult))},t.ImageProc.prototype.setDPI=function(s,o,l,d,c,u){return this._addTask(this._createTask("SetDPI",[s,o,l,d,null!=c&&c,u],this._handleBooleanResult))},t.ImageProc.prototype.getImage=function(s,o,l,d,c,u,h,f){return s=null!=s?s:this.jpegQuality,o=null==o||o,d=null!=d?d:0,c=null!=c?c:0,u=null!=u?u:0,h=null==h||h,f=null!=l&&l&&null==f?t.Enum_ImageType.IT_JPG:null!=f?f:t.Enum_ImageType.IT_ALL,(l=this._createTask("GetCurrentImage")).params.input=[f,d,c,u,!1,s,o],l.params.returnBlob=h,l.handleResult=this._handleImageData,this._addTask(l)},t.ImageProc.prototype.getSkewAngle=function(s){return this._addTask(this._createTask("GetSkewAngle",[null!=s?s:""],function(o,l){return o.skewAngle}))},t.ImageProc.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))},t.ImageProc.prototype.detectDocument=function(s,o,l,d,c){return this._addTask(this._createTask("DocumentDetect",[null!=s?s:2,(null!=o?o:75)/100,null!=l?l:100,(null!=d?d:0)/255,null!=c?c:""]))},t.ImageProc.prototype.perspective=function(s,o,l,d,c,u,h,f){return this._addTask(this._createTask("Perspective",[s,o,l,d,c,u,h,f],this._handleBooleanResult))},t.ImageProc.prototype.changeBrightness=function(s,o){return s=null!=s?s:0,0!=(o=null!=o?o:1)&&1!=o&&(o=0),this._addTask(1===o?this._createTask("ChangeBrightnessAndContrast",[s,0],this._handleBooleanResult):this._createTask("ChangeBrightness",[Math.floor(s/1e3*255)],this._handleBooleanResult))},t.ImageProc.prototype.changeContrast=function(s,o){return s=null!=s?s:0,0!=(o=null!=o?o:1)&&1!=o&&(o=0),this._addTask(1===o?this._createTask("ChangeBrightnessAndContrast",[0,s],this._handleBooleanResult):this._createTask("ChangeContrast",[1+s/1e3],this._handleBooleanResult))},t.ImageProc.prototype.removeShadow=function(s,o){o=null!=o?o:1.05,1>(s=null!=s?s:1)&&(s=1),3<s&&(s=3);var l="5";return 1===s?l+=";3;720;"+o:2===s?l+=";5;1080;"+o:3===s&&(l+=";10;0;"+o),this._addTask(this._createTask("ShadowRemovel",[l],this._handleBooleanResult))},t.ImageProc.prototype.enhanceAndSharpenImage=function(){return this._addTask(this._createTask("EnhanceAndSharpen",[""],this._handleBooleanResult))},t.ImageProc.prototype.brighten=function(){return this._addTask(this._createTask("Brighten",[""],this._handleBooleanResult))},t.ImageProc.prototype.getBlurryScore=function(){return this._addTask(this._createTask("GetBlurScore",[""],function(s,o){return s.blurryScore}))},t.ImageProc.prototype.drawQuadrangle=function(s,o,l,d,c,u,h,f,g,v){return strParameter=(null!=g?g:"FFFFFF")+";"+(null!=v?v:5),this._addTask(this._createTask("DrawQuadrangle",[s,o,l,d,c,u,h,f,strParameter],this._handleBooleanResult))},t.ImageProcWrapper={},t.ImageProcWrapper.resize=function(s,o,l,d,c){var u=new t.ImageProc(t.WasmEnv.productKey);return u.initImage(s).then(function(){var f=o>l?o/d:l/d;return u.resize(o/f,l/f,null==c?5:c)}).then(function(){return u.getImage()}).then(function(h){return u.terminate(),h},function(h){return u.terminate(),h})},t.ImageProcWrapper.createImage=function(s){var o,l,d,c,u,h,f,g,v,p,m,M,E,R,x,P,F,k,S;return i.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return o=new t.ImageProc(t.WasmEnv.productKey),L.setFinallyBlock(2),l={src:null,result:null,preview:null},u=(d=s.source).imageWidth||d.width,h=d.imageHeight||d.height,f=d.imageData||d.data,null==(c=s.output)||null==c.orgImage&&null==c.previewImage?L.return(l):(p=null!=s.doPerspective&&s.doPerspective,m=d.angle||0,L.yield(o.initImage(f,g=null!=d.rgba&&d.rgba,u,h,v=null!=d.bgra&&d.bgra),4));case 4:if(l.src=L.yieldResult.srcBuffer,!p||!s.polygon){L.jumpTo(5);break}return L.yield(o.perspective(s.polygon.points[0],s.polygon.points[1],s.polygon.points[2],s.polygon.points[3],s.polygon.points[4],s.polygon.points[5],s.polygon.points[6],s.polygon.points[7]),5);case 5:if(0==m){L.jumpTo(7);break}return(0>m||360<m)&&0>(m%=360)&&(m+=360),L.yield(o.rotate(m),7);case 7:if(!c.orgImage){L.jumpTo(9);break}return L.yield(o.getImage(c.orgImage.quality,!1,g|v,null!=d.imageBitDepth?d.imageBitDepth:void 0,null!=d.imageXResolution?d.imageXResolution:void 0,null!=d.imageYResolution?d.imageYResolution:void 0,null==c.orgImage.returnBlob||c.orgImage.returnBlob,c.orgImage.returnType),10);case 10:M=L.yieldResult,c.orgImage.returnType==t.Enum_ImageType.IT_BGRA?M.bgra=!0:c.orgImage.returnType==t.Enum_ImageType.IT_RGBA&&(M.rgba=!0),l.result=M;case 9:if(!c.previewImage){L.jumpTo(11);break}return E=u,R=h,(90==m||270==m)&&(E=h,R=u),x=Math.min(c.previewImage.width/E,c.previewImage.height/R),90==m||270==m?(P=Math.floor(h*x),F=Math.floor(u*x)):(P=Math.floor(u*x),F=Math.floor(h*x)),L.yield(o.resize(P,F,c.previewImage.nInterplationMethod),12);case 12:if(!s.polygon||p){L.jumpTo(13);break}return k=s.polygon.points,0!=m&&(k=function(s,o,l,d){for(var c=[],u=0;u<s.length;u+=2){var h=s[u],f=s[u+1];if(90==o)var g=l-f;else 180==o?(g=l-h,h=d-f):270==o?(g=f,h=d-h):(g=h,h=f);c.push(g,h)}return c}(k,m,E,R)),L.yield(o.drawQuadrangle(Math.floor(k[0]*x),Math.floor(k[1]*x),Math.floor(k[2]*x),Math.floor(k[3]*x),Math.floor(k[4]*x),Math.floor(k[5]*x),Math.floor(k[6]*x),Math.floor(k[7]*x),s.polygon.strokeColor,s.polygon.lineWidth),13);case 13:return L.yield(o.getImage(c.previewImage.quality,!0,g|v,void 0,void 0,void 0,null==c.previewImage.returnBlob||c.previewImage.returnBlob,c.previewImage.returnType),15);case 15:S=L.yieldResult,c.previewImage.returnType==t.Enum_ImageType.IT_BGRA?S.bgra=!0:c.previewImage.returnType==t.Enum_ImageType.IT_RGBA&&(S.rgba=!0),l.preview=S;case 11:return L.return(l);case 2:L.enterFinallyBlock(),o.terminate(),L.leaveFinallyBlock(0)}})},t.PdfReader=function(s,o,l){t.ImageIoBase.call(this,s=s||t.WasmEnv.productKey,t.WasmEnv.pdfReader,o,l),this.resolution=200,this.readMode=3,this.outputType=t.Enum_ImageType.IT_ALL},t.PdfReader.prototype=Object.create(t.ImageIoBase.prototype),t.PdfReader.prototype.constructor=t.PdfReader,t.PdfReader.prototype.open=function(s,o){o=null!=o?o:"";var l=this,d=l._createTask("LoadPdf");return l._readFile(s,d).then(function(c){d.params.input=[c,o],d.handleResult=function(u,h){var f=t.base64Decode(u.infoBase64);try{try{f.replace(/\\/gi,"\\\\");var g=JSON.parse(f)}catch(v){g=f}return{PdfCount:u.pageCount,PdfInfo:g,isTextBased:u.isTextBased}}catch(v){h.reject({code:t.error.code.wasmJsInvalidJson,message:v.message,stack:v.stack})}},l._addTask(d)}),d.promise},t.PdfReader.prototype.readPage=function(s,o,l,d,c,u){s=null!=s?s:0,o=null!=o?o:this.resolution,l=null!=l?l:this.readMode,d=null!=d?d:this.outputType,u=null!=u?u:this.returnImageAsBase64,c=null!=c&&c;var h=this._createTask("ReadPdfPage");return h.params.input=[s,o,l,d,c],h.params.returnType=u?t.Enum_ReturnType.RT_BASE64:t.Enum_ReturnType.RT_AUTO,h.params.returnBlob=!u,h.handleResult=this._handleImageData,this._addTask(h)},t.PdfReader.prototype.close=function(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))},t.PdfWriter=function(s,o,l){t.ImageIoBase.call(this,s=s||t.WasmEnv.productKey,t.WasmEnv.pdfWriter,o,l),this._setPdfSettings=function(d){var c={};if(null!=d&&"object"==typeof d)for(var u in d)c[u]=d[u];return c}},t.PdfWriter.prototype=Object.create(t.ImageIoBase.prototype),t.PdfWriter.prototype.constructor=t.PdfWriter,t.PdfWriter.prototype.initPdfSetting=function(s){var o=this._createTask("InitPdfWriter");return o.params.input=JSON.stringify(this._setPdfSettings(s)),o.handleResult=this._handleBooleanResult,this._addTask(o)},t.PdfWriter.prototype.appendPage=function(s){var o=this,l=o._createTask("AddPageFromImageFileStream");return o._readFile(s,l).then(function(d){l.params.input=d,l.handleResult=o._handleBooleanResult,o._addTask(l)}),l.promise},t.PdfWriter.prototype.writePdf=function(s){var o=this._createTask("GetPdfContent");return o.params.returnType=null!=s?s:t.Enum_ReturnType.RT_AUTO,o.params.returnBlob=s!=t.Enum_ReturnType.RT_AUTO,o.handleResult=this._handleImageData,this._addTask(o)},t.pdf=t.pdf||{},t.pdf.IsModuleInstalled=function(){return!!t.isWasmSupport()&&t.WasmEnv.pdfReader.status==t.conststring.initReady&&t.WasmEnv.pdfWriter.status==t.conststring.initReady},t.WasmEnv.getLicenseInfo=function(s,o,l){return t.WasmEnv.productKey==s&&t.WasmEnv.licenseInfo?s=Promise.resolve(t.WasmEnv.licenseInfo):(t.WasmEnv.productKey=s,t.WasmEnv.licMode=null!=o&&o?1:0,t.WasmEnv.uuid=null!=l?l:"",s=new Promise(function(d,c){var u=new t.Imagecore(t.WasmEnv.productKey);u.getLicenseInfo().then(function(h){u.terminate(),t.WasmEnv.licenseInfo=h,d(h)},function(h){u.terminate(),c(h)})})),s},t.WasmEnv.getWorkerPoolSize=function(){var s=t.WorkerPool.Instances;return s?s.length:0},t.WasmEnv.getMemoryUsed=function(){var s=t.WorkerPool.Instances;if(s){for(var o=[],l=(s=i.makeIterator(s)).next();!l.done;l=s.next())o.push((l=l.value).terminated?0:l.getMemoryUsed());return o}return[]},t.WasmEnv.getWasmNames=function(){for(var s=[],o=i.makeIterator(t.WasmEnv.moduleNames),l=o.next();!l.done;l=o.next())s.push(t.WasmEnv.buildWasmFileName(t.WasmEnv[l=l.value].prefixName,t.WasmEnv[l].ver,t.conststring.wasmExtension,!1));return s}}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.DBR=T.DBR||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},function(){T.BarcodeReaderAddon=T.BarcodeReaderAddon||{};var e=T.BarcodeReaderAddon;e.Version="8.6.0.1026",e._decoding=!1,e._decodeQueue=[],e._decodeNext=function(){if(0!=e._decodeQueue.length){var r=e._decodeQueue[0],t=r.method,i=r.args;e._decodeQueue.splice(0,1),t.apply(null,i)}else e._decoding=!1},e._defaultRuntimeSettingsStr="",e._defaultTemplateStr="",e._wasmInstance=!1,e._activeXInstance=!1,e.BarcodeReaderException=function(){var t,i=arguments[0],n=arguments[1],a=T.DBR.EnumErrorCode.DBR_UNKNOWN;return"number"==typeof i?(a=i,t=new Error(n)):t=new Error(i),t.code=a,t},e.RemoveNonPrintableChar=function(r){return T.Lib.isString(r)?r.replace(/[^\x20-\x7E]|(\\")/g,""):r},e.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."},e._activeXMaxIEVersion=9,e.logLevel=3,T.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},T.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},T.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},T.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},T.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},T.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},T.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},T.DBR.EnumClarityFilterMode={CFM_GENERAL:1},T.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},T.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},T.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},T.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},T.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},T.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},T.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},T.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},T.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},T.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},T.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},T.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},T.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},T.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},T.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},T.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},T.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},T.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},T.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},T.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},T.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},T.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},T.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},T.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),T.AddonReady(function(e,r){var t,i=T.BarcodeReaderAddon;function n(o){return o&&o instanceof ArrayBuffer}i.Class=function(){var o=T.Lib,l=function(){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this.bWasm=!1};l.prototype._decodeBlob=function(p,m){var I=this;return new Promise(function(y){if(!(p instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");y()}).then(function(){return I._innerDecode(0,p,m)})},l.prototype._decodeArrayBuffer=function(p,m){var I=this;return new Promise(function(y){if(!(p instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");y()}).then(function(){return I._innerDecode(0,p,m)})},l.prototype._decodeUint8Array=function(p,m){var I=this;return new Promise(function(y){if(!(p instanceof Uint8Array||Bt.Uint8ClampedArray&&p instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");y()}).then(function(){return I._innerDecode(0,p,m)})},l.prototype._decodeImage=function(p,m){var I=this;return new Promise(function(y){if(!(p instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";m=m||"",y()}).then(function(){return"data:image/"==p.src.substring(0,11)?I._decodeBase64(p.src,m):I._decodeUrl(p.src,m).catch(function(y){if(i.logLevel>=3&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(y)),!Bt.HTMLCanvasElement)return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."));var _=document.createElement("canvas");return _.width=p.naturalWidth,_.height=p.naturalHeight,_.getContext("2d").drawImage(p,0,0),I._decodeCanvas(_,m)})})},l.prototype._decodeCanvas=function(p,m){var I=this;return new Promise(function(y){if(!(p instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";m=m||"",p.toBlob?p.toBlob(function(_){y(_)}):p.msToBlob?p.msToBlob(function(_){y(_)}):y(p.toDataURL())}).then(function(y){return p.toBlob||p.msToBlob?I._decodeBlob(y,m):I._decodeBase64(y,m)})},l.prototype._decodeVideo=function(p){var I,m=this,y=arguments;return new Promise(function(_){if(!(p instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";var C,A,M,E,R,x;y.length<=2?(C=A=0,M=R=p.videoWidth,E=x=p.videoHeight):y.length<=4?(C=A=0,M=p.videoWidth,E=p.videoHeight,R=y[1],x=y[2]):(C=y[1],A=y[2],M=y[3],E=y[4],R=y[5],x=y[6]),I="string"==typeof y[y.length-1]?y[y.length-1]:"";var P=document.createElement("canvas");P.width=R,P.height=x,P.getContext("2d").drawImage(p,C,A,M,E,0,0,R,x),_(P)}).then(function(_){return m._decodeCanvas(_,I)})},l.prototype._decodeBase64=l.prototype.decodeBase64String=function(p,m){var I=this;return new Promise(function(y){if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==p.substring(0,11)&&(p=p.substring(p.indexOf(",")+1)),y()}).then(function(){return I._innerDecode(1,p,m)})},l.prototype._decodeUrl=function(p,m){var I=this;return p&&p.indexOf&&(0==p.indexOf("dwt://")||0==p.indexOf("dcs://"))?I._decodeDynamsoftServiceInnerUrl(p,m):i._wasmInstance?i._wasmInstance.decode(p):new Promise(function(y,_){var C;if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");m=m||"",i._activeXInstance?((C=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",p,!0),C.overrideMimeType?C.overrideMimeType("text/plain; charset=x-user-defined"):C.setRequestHeader("Accept-Charset","x-user-defined"),C.onreadystatechange=function(){4==C.readyState&&y(new VBArray(C.responseBody).toArray())},C.send("")):((C=new XMLHttpRequest).open("GET",p,!0),C.responseType="arraybuffer",C.send(),C.onloadend=function(){y(this.response)},C.onerror=function(){_(Error(C.error))})}).then(function(y){return i._activeXInstance?I._activeXDecodeArray(y,m):I._decodeArrayBuffer(y,m)})},l.prototype._decodeDynamsoftServiceInnerUrl=function(p,m){var I=this;return new Promise(function(y){if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=p.indexOf("dwt://")&&0!=p.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");y()}).then(function(){return I._innerDecode(4e3,p,m)})},l.prototype._activeXDecodeArray=function(p,m){var I=this;return new Promise(function(y,_){if(!(p instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");m=m||"";try{y(T.Lib.btoa(String.fromCharCode.apply(String,p)))}catch(C){_(C)}}).then(function(y){return I._decodeBase64(y,m)})},l.prototype._activeXDecodeHandle=function(p,m){var I=this;return new Promise(function(y){m=m||"",y()}).then(function(){return I._innerDecode(4001,p,m)})},l.prototype._decode=l.prototype.decode=function(p,m){return i._activeXInstance?"string"==typeof p||p instanceof String?this._activeXDecodeHandle(p,m):Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):i._wasmInstance?i._wasmInstance.decode(p):Bt.Blob&&p instanceof Blob?this._decodeBlob(p,m):Bt.ArrayBuffer&&p instanceof ArrayBuffer?this._decodeArrayBuffer(p,m):Bt.Uint8Array&&p instanceof Uint8Array||Bt.Uint8ClampedArray&&p instanceof Uint8ClampedArray?this._decodeUint8Array(p,m):p instanceof Array?this._activeXDecodeArray(p,m):Bt.HTMLImageElement&&p instanceof HTMLImageElement?this._decodeImage(p,m):Bt.HTMLCanvasElement&&p instanceof HTMLCanvasElement?this._decodeCanvas(p,m):Bt.HTMLVideoElement&&p instanceof HTMLVideoElement?this._decodeVideo(p,m):isNaN(p)?"string"==typeof p||p instanceof String?"data:image/"==p.substring(0,11)?this._decodeBase64(p,m):this._decodeUrl(p,m):Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(p,m)},l.prototype._innerServiceCmd=function(p,m){return new Promise(function(I,y){var _={method:"ReadBarcode",parameter:[T.DWT.ProductKey,4002,"",""],updateSettings:p,initSettingsContent:m};i._activeXInstance?I(i._activeXInstance.Process(o.stringify(_),location.protocol+"//"+location.host)):(o.License.isLTS()?T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(A){return _.parameter.push(A.ar),_.parameter.push(A.cu),_.parameter.push(0),_.parameter.push(""),o.stringify(_)}):Promise.resolve(o.stringify(_))).then(function(A){return o.fetch(i._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:A,dataType:"arrayBuffer"})}).then(function(A){n(A)?I(String.fromCharCode.apply(null,new Uint8Array(A))):I(A)},function(A){var M="Init template & runtimeSettings failed.";A&&(M=[M," Http info: ",A.errorString," (",A.httpCode,")"].join("")),y(M)})})},l.prototype._innerDecode=function(p,m,I,y){var _=this;return _._runtimeSettings&&0==_._runtimeSettings.expectedBarcodesCount&&(_._runtimeSettings.expectedBarcodesCount=512),new Promise(function(C,A){var M={method:"ReadBarcode",parameter:[T.DWT.ProductKey,p,0!=p?m:null,I||""],updateSettings:_._runtimeSettings,conflictMode:1==_.conflictMode?"ignore":"overwrite",initSettingsContent:_._initSettingsContent,tplContent:function(){if(I)for(var P=0;P<_._tplContentArr.length;++P)if(I==_._tplContentArr[P].ImageParameter.Name)return o.stringify(_._tplContentArr[P]);return null}()},E=function(P,F,k){try{var w=u(P);if((!w||!w.textResults)&&A(new i.BarcodeReaderException(w.exception,w.description)),o.product.bHTML5Edition&&k&&k.config.data){var L,S=o.parse(k.config.data);if(o.isArray(S.parameter)&&S.parameter.length>2&&4e3==S.parameter[1])if(S.parameter.length>4&&S.parameter[4])w.textResults.imageid=S.parameter[4];else{var U,Z;(Z=(U=S.parameter[2]).indexOf("&index="))>=0&&(w.textResults.imageid=U.substring(Z+7,U.indexOf("&t=")))}}for(L=0;L<w.textResults.length;L++){var ne=w.textResults[L];ne.BarcodeText=ne.barcodeText,w.exception!=T.DBR.EnumErrorCode.DBR_SUCCESS&&(ne.exception=w.exception)}w.exception!=T.DBR.EnumErrorCode.DBR_SUCCESS&&(w.textResults.exception=w.exception,w.textResults.description=w.description),i._activeXInstance&&w.records&&(T.Lib.each(w.records,function(oe,ue){T.DWT.lavrf(ue,oe,T.DWT.EnumInstance.dwt_desktop)}),T.DWT.lavrf_(1,T.DWT.EnumInstance.dwt_desktop)),C(w.textResults)}catch(oe){A(oe)}};if(i._activeXInstance)o.License.isLTS()?T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(P){M.parameter.push(P.ar),M.parameter.push(P.cu),M.parameter.push(0),M.parameter.push(""),E(i._activeXInstance.Process(o.stringify(M),location.protocol+"//"+location.host))}):E(i._activeXInstance.Process(o.stringify(M),location.protocol+"//"+location.host));else{var R=i._urlRoot+"ReadBarcode";0==p&&(R+="/LoadZipFromBytes?cmd="+encodeURIComponent(o.stringify(M))),(0==p?Promise.resolve(m):o.License.isLTS()?T.DWT.lglic(T.DWT.EnumInstance.dwt_desktop).then(function(P){return M.parameter.push(P.ar),M.parameter.push(P.cu),M.parameter.push(0),M.parameter.push([o.product.getDWTPrefix(),o.product.getServerVersionInfo(),"/verify?id=",y,"&t=",o.getRandom()].join("")),o.stringify(M)}):Promise.resolve(o.stringify(M))).then(function(P){return o.fetch(R,{mode:"cors",method:"post",body:P,dataType:"arrayBuffer"})}).then(function(P,F,k){n(P)?E(String.fromCharCode.apply(null,new Uint8Array(P)),0,k):E(P,0,k)},function(P){var F="ReadBarcode request fail.";P&&(F=[F," Http info: ",P.errorString," (",P.httpCode,")"].join("")),A(Error(F))})}})};var u=i._handleRetJsonString=function(p){var m;if("string"==typeof p||"object"==typeof p&&p instanceof String)try{m=o.parse(p)}catch(I){m=o.parse(i.RemoveNonPrintableChar(p))}else m=p;if(!m)throw i.BarcodeReaderException(T.DBR.EnumErrorCode.DBR_UNKNOWN,i.errors.decodeResultEmpty);if(!("textResults"in m&&o.isArray(m.textResults)||m.exception==T.DBR.EnumErrorCode.DBR_SUCCESS))throw i.BarcodeReaderException(m.exception,m.description);return m};return l.prototype.getAllParameterTemplateNames=function(){for(var p=[],m=0;m<this._tplContentArr.length;++m)p.push(this._tplContentArr[m].ImageParameter.Name);return p},l.prototype.getRuntimeSettings=function(){var p=this;return p.bWasm?i._wasmInstance.getRuntimeSettings():(p._runtimeSettings||(p._runtimeSettings=o.parse(i._defaultRuntimeSettingsStr)),Promise.resolve(p._runtimeSettings))},l.prototype.updateRuntimeSettings=function(p){var I,m=this;if("string"==typeof p||"object"==typeof p&&p instanceof String){if("speed"==p||"balance"==p||"coverage"==p||"default"==p)return m.initRuntimeSettingsWithString("speed"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');I=p}else{if("object"!=typeof p)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");I=o.stringify(p)}var _=o.parse(I);return m.bWasm?i._wasmInstance.updateRuntimeSettings(_).then(function(){return i._wasmInstance.getRuntimeSettings()}):(m._runtimeSettings=_,m._initSettingsContent=null,m._innerServiceCmd(m._runtimeSettings,null).then(function(C){var A=i._handleRetJsonString(C);return m._runtimeSettings=A.settings,m._runtimeSettings||(m._runtimeSettings=o.parse(i._defaultRuntimeSettingsStr)),A.settings}))},l.prototype.resetRuntimeSettings=function(){var p=this;return p.bWasm?i._wasmInstance.resetRuntimeSettings().then(function(){return i._wasmInstance.getRuntimeSettings()}):(p._runtimeSettings=o.parse(i._defaultRuntimeSettingsStr),p._initSettingsContent=null,p._innerServiceCmd(p._runtimeSettings,null).then(function(m){var I=i._handleRetJsonString(m);return p._runtimeSettings=I.settings,p._runtimeSettings||(p._runtimeSettings=o.parse(i._defaultRuntimeSettingsStr)),I.settings}))},l.prototype.outputSettingsToString=function(p){if(!p)return i._defaultTemplateStr;for(var m=0;m<this._tplContentArr.length;++m)if(p==this._tplContentArr[m].ImageParameter.Name)return o.stringify(this._tplContentArr[m])},l.prototype.initRuntimeSettingsWithString=function(p){var m=this;if(!o.isString(p))throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.");return m.bWasm?i._wasmInstance.initRuntimeSettingsWithString(p).then(function(){return i._wasmInstance.getRuntimeSettings()}):(m._runtimeSettings=null,m._initSettingsContent=o.parse(p),m._innerServiceCmd(null,m._initSettingsContent).then(function(I){var y=i._handleRetJsonString(I);return m._runtimeSettings=y.settings,m._runtimeSettings||(m._runtimeSettings=o.parse(i._defaultRuntimeSettingsStr)),y.settings}))},l}(),i._dbr=!1,i._initH5=function(o,l){return new Promise(function(d,c){i._urlRoot=T.dcp._getPreUrl(T.dcp.detect.curPortIndex)+"dcp/dbr_"+i.Version.replace(/\./g,"")+"/",e.ajax({method:"POST",url:i._urlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){d()},onError:function(){return c("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.")},dataType:"json",async:!0,timeout:800})}).then(function(){return i._dbr=new i.Class,i._dbr._innerServiceCmd(null,null)}).then(function(d){try{var c=i._handleRetJsonString(d);i._dbr._runtimeSettings=c.settings,i._defaultRuntimeSettingsStr=e.stringify(c.settings),i._defaultTemplateStr=e.stringify(c.outputSettings),o(i._dbr)}catch(u){l(Error("Init template & runtimeSettings failed: "+u.message)||u)}},function(d){l(d)})},i.dbrInitPromiseFun=function(o,l){var d=T.BarcodeReaderAddon,c=function(){T.DBR&&T.DBR.BarcodeReader&&T.DBR.BarcodeReader.createInstance&&T.DBR.BarcodeReader.createInstance().then(function(p){return T.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==T.DBR.BarcodeReader.lastErrorCode&&(T.DWT.licenseException.code=T.DBR.BarcodeReader.lastErrorCode,T.DWT.licenseException.message=T.DBR.BarcodeReader.lastErrorString),T.DBR.BarcodeReader._bNeverShowDialog=!0,T.DWT.dbrCanvasMaxWH&&(p._canvasMaxWH=T.DWT.dbrCanvasMaxWH),d._wasmInstance=p,p.getRuntimeSettings()}).then(function(p){d._dbr._runtimeSettings=p,d._defaultRuntimeSettingsStr=e.stringify(p),o(d._dbr)},l)};if(d._dbr)d._dbr.bWasm&&!d._wasmInstance?c():o(d._dbr);else{var u=T.Lib.timestamp,h=T.DWT.ResourcesPath,f=!T.navInfo.bWin||e.product.bHTML5Edition&&(!T.DWT.UseLocalService||e.env.bMobile||T.DWT.UseBarcodeAddonWasm),g=function(){if(f){if(!(T.DBR&&T.DBR.BarcodeReader||T.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader))return;return T.DBR||(T.BarcodeReader?T.DBR={BarcodeReader:T.BarcodeReader}:window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader&&(T.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader})),T.DBR.BarcodeReader.engineResourcePath=T.DWT.ResourcesPath+"/addon/dbrjs/",e.isString(T.DWT.sessionPassword)&&(T.DBR.BarcodeReader.sessionPassword=T.DWT.sessionPassword),e.isArray(T.DWT.licenseServer)&&(T.DBR.BarcodeReader.licenseServer=T.DWT.licenseServer),e.isString(T.DWT.handshakeCode)?T.DBR.BarcodeReader.handshakeCode=T.DWT.handshakeCode:e.isString(T.DWT.organizationID)?T.DBR.BarcodeReader.organizationID=T.DWT.organizationID:e.isString(T.DWT.ProductKey)&&(T.DBR.BarcodeReader.productKeys=T.DWT.ProductKey),e.showLoadingMsg(-1,"",T.MSG.Init_CompilingWasm),T.DBR.BarcodeReader._bUseFullFeature=!0,T.DBR.BarcodeReader._bNeverShowDialog=!0,d._dbr=new d.Class,d._dbr.bWasm=!0,void c()}if(e.product.bHTML5Edition)d._initH5(o,l);else{var m={method:"ReadBarcode",parameter:[T.DWT.ProductKey,4002,"",""]};if(!T.navInfoSync.bIE)return l(Error("The DBR init error."));try{d._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var I=d._activeXInstance.Process(e.stringify(m),location.protocol+"//"+location.host),y=e.parse(I);if(!y)return l(Error("The DBR init error."));if(!("settings"in y))return l(Error(y.description||"The DBR init error."));d._dbr=new d.Class,d._dbr._runtimeSettings=y.settings,d._defaultRuntimeSettingsStr=e.stringify(y.settings),"outputSettings"in y&&(d._defaultTemplateStr=e.stringify(y.outputSettings)),o(d._dbr)}catch(C){return l(Error("The DBR .dll is missing or not accessible: "+(C.message||C)))}}};if(f)if(e.detect.dbrwasmScriptLoaded)g();else{if(!function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var o=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(o instanceof WebAssembly.Module)return new WebAssembly.Instance(o)instanceof WebAssembly.Instance}}catch(l){}return!1}())return void l(Error(T.MSG.Err_BrowserNotSupportWasm));var v=e.getScript([h,"/addon/dbrjs/dbr.js",u].join(""),!0,function(p){e.detect.dbrwasmScriptLoaded=!0,g()});e.isString(T.DWT.handshakeCode)?v.setAttribute("data-productKeys",T.DWT.handshakeCode):e.isString(T.DWT.organizationID)?v.setAttribute("data-organizationID",T.DWT.organizationID):e.isString(T.DWT.ProductKey)&&v.setAttribute("data-productKeys",T.DWT.ProductKey)}else g()}},e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(o){var d,l=e.html5.Funs;t=T.dcp.b64bit?"dbrx64_"+T.BarcodeReaderAddon.Version+".dll":"dbr_"+T.BarcodeReaderAddon.Version+".dll",e.product.bHTML5Edition&&!o._isMobileMode()&&o._innerSend("GetAddOnVersion",l.makeParams("barcodereader",t),!0,!1,!1),d={BarcodeReader:{decode:function(c){return e.License.checkProductKey(o,{Core:!0})?!e.isNumber(c)||c<0||c>=o.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(o),Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))):new Promise(function(h){i._decoding?i._decodeQueue.push({method:h,args:[c]}):(i._decoding=!0,h(c))}).then(function(h){var f;if(e.product.bHTML5Edition){if(-1==(f=o._ImgManager.convertClientIndexToServerId(h)))throw e.Errors.IndexOutOfRange(o),setTimeout(i._decodeNext,0),i.BarcodeReaderException(o._errorCode,o._errorString)}else f=h;return new Promise(function(g,v){i.dbrInitPromiseFun(function(p){if(p.bWasm){var m=p.getRuntimeSettings();m=m.then(function(C){if(0==C.expectedBarcodesCount)return C.expectedBarcodesCount=512,p.updateRuntimeSettings(C)}),(m=(m=o._isMobileMode()?(m=m.then(function(){var C=o._ImgManager.convertServerIdToClientIndex(f);return o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(C))})).then(function(C){return C.oriData?C.oriData:C.originalData}):m.then(function(){var C=o._ImgManager.convertServerIdToClientIndex(f);return o.GetImageURL(C,-1,-1)})).then(function(C){return C instanceof Blob||C instanceof ArrayBuffer?i._wasmInstance.decode(C):e.fetch(C,{mode:"cors",dataType:"blob"}).then(function(A){return i._wasmInstance.decode(A)})})).then(function(C){C.imageid=o.objImageIndexManager.convertServerIdToGuid(f),setTimeout(i._decodeNext,0),g(C)},function(C){var A="decode failed.";C&&(A=[A," ",C.errorString," (",C.httpCode,")"].join("")),setTimeout(i._decodeNext,0),v(Error(A))})}else{var I;if(!e.product.bHTML5Edition){var y=o.GetImagePartURL(I=f,-1,-1);return p._innerDecode(4001,y,"").then(function(C){C.imageid=o.IndexToImageID(I),setTimeout(i._decodeNext,0),g(C)},function(C){setTimeout(i._decodeNext,0),v(C)})}if(!p.bWasm){I=o._ImgManager.convertServerIdToClientIndex(f);var _=o.GetImagePartURL(I,-1,-1);return p._innerDecode(4e3,_,"",o.clientId).then(function(C){C.imageid=o.IndexToImageID(I),setTimeout(i._decodeNext,0),g(C),e.License.isLTS()&&T.DWT.lcvrf(o)},function(C){setTimeout(i._decodeNext,0),v(C)})}}},function(p){setTimeout(i._decodeNext,0),v(p)})})}):Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))},resetRuntimeSettings:function(){return e.License.checkProductKey(o,{Core:!0})?new Promise(i.dbrInitPromiseFun).then(function(c){return c.resetRuntimeSettings()}):Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))},getRuntimeSettings:function(c){return e.License.checkProductKey(o,{Core:!0})?!e.isString(c)||"speed"!=c&&"balance"!=c&&"coverage"!=c&&"default"!=c?new Promise(i.dbrInitPromiseFun).then(function(u){return u.getRuntimeSettings()}):this.updateRuntimeSettings(c):Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))},updateRuntimeSettings:function(c){return e.License.checkProductKey(o,{Core:!0})?new Promise(i.dbrInitPromiseFun).then(function(u){return u.updateRuntimeSettings(c)}):Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))},initRuntimeSettingsWithString:function(c){return e.License.checkProductKey(o,{Core:!0})?new Promise(i.dbrInitPromiseFun).then(function(u){return u.initRuntimeSettingsWithString(c)}):Promise.reject(i.BarcodeReaderException(o._errorCode,o._errorString))}}},e.product.bHTML5Edition?(o.__addon=o.__addon||{},e.mix(o.__addon,d)):(o.Addon=o.Addon||{},e.mix(o.Addon,d))}),T.unloadQueue.push(function(){i._wasmInstance&&(i._wasmInstance.destroy(),i._wasmInstance=!1)})}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},function(e){for(var r=[T.DWT],t=0;t<1;t++){var i=r[t];i.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},i.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBig2:7}}}("undefined"!=typeof window&&window),T.AddonReady(function(e,r){var t;e.product.bHTML5Edition&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(n){var s,a=e.html5.Funs;t=e.env.bMac?T.dcp.b64bit?"libDynamicPdfCorex64_"+T.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+T.DWT.PdfVersion+".dylib":e.env.bLinux?"libDynamicPdfCore_"+T.DWT.PdfVersion+".so":T.dcp.b64bit?"DynamicPdfCorex64_"+T.DWT.PdfVersion+".dll":"DynamicPdfCore_"+T.DWT.PdfVersion+".dll",n._isMobileMode()||n._innerSend("GetAddOnVersion",a.makeParams("pdf",t),!0,!1,!1),s={PDF:{IsModuleInstalled:function(){var o=n;return o._resetErr(),o._isMobileMode()?!!T.pdf&&T.pdf.IsModuleInstalled():""!=o._innerFun("GetAddOnVersion",a.makeParams("pdf",t))},IsModuleInstalledAsync:function(){var o=n;return o._resetErr(),o._isMobileMode()?e.Promise.resolve(!!T.pdf&&T.pdf.IsModuleInstalled()):o._innerFunV2("GetAddOnVersion",a.makeParams("pdf",t)).then(function(l){return""!=l})},ConvertToImage:function(o,l,d,c){var u=a.replaceLocalFilename(o),h="ConvertPDFToImage",v=n;return v._resetErr(),v._isMobileMode()||(a.showMask(h),v._innerSend(h,a.makeParams(u,l),!0,function(p){return a.hideMask(h),d&&d(),!0},function(p){return a.hideMask(h),c&&c(),!1})),!0},SetPassword:function(o){var l=n;return l._resetErr(),l._isMobileMode()?(l._pdfPassword=o,!0):l._innerFun("SetPDFPassword",a.makeParams(o))},SetConvertMode:function(o){return n._setConvertMode(o)},SetConvertModeAsync:function(o){return n._setConvertModeAsync(o)},GetConvertMode:function(){var o=n;return o._resetErr(),o._pdfConvertMode},SetResolution:function(o){var l=n;return l._resetErr(),l._isMobileMode()?(l._pdfResolution=1*o,!0):n._innerFun("SetPDFResolution",a.makeParams(o))},SetResolutionAsync:function(o){var l=n;return l._resetErr(),l._isMobileMode()?(l._pdfResolution=1*o,e.Promise.resolve(!0)):n._innerFunV2("SetPDFResolution",a.makeParams(o))},IsTextBasedPDF:function(o,l,d){var c=n;if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("IsTextBasedPDF",d);var u=a.replaceLocalFilename(o),h=n._innerFun("IsTextBasedPDF",a.makeParams(u));return 0==c.ErrorCode?e.isFunction(l)&&l(h):e.isFunction(d)&&d(c.ErrorCode,c.ErrorString),h},Write:{Setup:function(o){var l=o;l||(l={version:15}),e.stringify(l).length>2&&(e.isNumber(l.version)?l.version>=1&&l.version<2&&(l.version=parseInt(10*l.version)):l.version=15),e.isNumber(l.compression)&&l.compression==T.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(l.compression=T.DWT.EnumDWT_PDFCompressionType.PDF_FAX4);var d=n;if(d._resetErr(),d._isMobileMode())return d._pdfWriteSetting=l,!0;var c=e.stringify(l);return c=e.replaceAll(c,'"','\\"'),d._innerFun("SetPDFSettings",['["',c,'"]'].join(""))}}}},n.__addon=n.__addon||{},e.mix(n.__addon,s)}))}),T.AddonReady(function(e,r){(e.product.bPluginEdition||e.product.bActiveXEdition)&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(i){var n,a,s;if(!i.getSWebTwain()||!i.getSWebTwain().Addon)return!1;if(T.navInfo.bWin){var o=navigator.userAgent.toLowerCase(),l=!T.navInfo.bOSx64||o.indexOf("wow64")>=0;s=l?"DynamicPdfCore_"+T.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+T.DWT.PdfVersion+".dll"}a=i.getSWebTwain(),n={PDF:{IsModuleInstalled:function(){var d=a.GetAddOnVersion("pdf",s);return e.setErrorString(i),""!=d},IsModuleInstalledAsync:function(){var d=a.GetAddOnVersion("pdf",s);return e.setErrorString(i),e.Promise.resolve(""!=d)},ConvertToImage:function(d,c,u,h){var f=a.ConvertPDFToImage(d,c);return e.wrapperRet(i,f,u,h)},SetPassword:function(d){var c=a.SetPDFPassword(d);return e.wrapperRet(i,c)},SetConvertMode:function(d){return i._setConvertMode(d)},SetConvertModeAsync:function(d){return Promise.resolve(i._setConvertMode(d))},GetConvertMode:function(){return i._resetErr(),i._pdfConvertMode},SetResolution:function(d){var c=a.SetPDFResolution(d);return e.wrapperRet(i,c)},SetResolutionAsync:function(d){var c=a.SetPDFResolution(d);return e.Promise.resolve(e.wrapperRet(i,c))},IsTextBasedPDF:function(d){var c=a.IsTextBasedPDF(d);return e.wrapperRet(i,c)}}},i.Addon=i.Addon||{},e.mix(i.Addon,n)})}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},T.DWT.OCRVerInName="10.0.0.0618",function(e){for(var r=[T.DWT],t=0;t<1;t++){var i=r[t];i.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"},i.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10},i.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4},i.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}}("undefined"!=typeof window&&window),T.DWT.OCRLanguageData_eng="4113088",T.DWT.OCRLanguageData_ara="1432056",T.DWT.OCRLanguageData_chi_sim="2469156",T.DWT.OCRLanguageData_chi_tra="2366642",T.DWT.OCRLanguageData_hin="1122751",T.DWT.OCRLanguageData_urd="1398718",T.DWT.OCRLanguageData_spa="2294433",T.DWT.OCRLanguageData_fra="1130365",T.DWT.OCRLanguageData_msa="1747801",T.DWT.OCRLanguageData_ind="1122661",T.DWT.OCRLanguageData_rus="3861738",T.DWT.OCRLanguageData_ben="855841",T.DWT.OCRLanguageData_por="1982756",T.DWT.OCRLanguageData_pan="497721",T.DWT.OCRLanguageData_deu="1525436",T.DWT.OCRLanguageData_jpn="2471260",T.DWT.OCRLanguageData_fas="431500",T.DWT.OCRLanguageData_swa="2167651",T.DWT.OCRLanguageData_jav="2982741",T.DWT.OCRLanguageData_tel="2769654",T.DWT.OCRLanguageData_tur="4550554",T.DWT.OCRLanguageData_kor="1677415",T.DWT.OCRLanguageData_mar="2118233",T.DWT.OCRLanguageData_tam="3237963",T.DWT.OCRLanguageData_vie="531275",T.DWT.OCRLanguageData_ita="2701314",T.DWT.OCRLanguageData_tha="1072600",T.DWT.OCRLanguageData={},T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=T.DWT.OCRLanguageData_eng,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=T.DWT.OCRLanguageData_ara,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=T.DWT.OCRLanguageData_chi_tra,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=T.DWT.OCRLanguageData_chi_sim,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=T.DWT.OCRLanguageData_hin,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_URD]=T.DWT.OCRLanguageData_urd,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=T.DWT.OCRLanguageData_spa,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=T.DWT.OCRLanguageData_fra,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=T.DWT.OCRLanguageData_msa,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_IND]=T.DWT.OCRLanguageData_ind,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=T.DWT.OCRLanguageData_rus,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=T.DWT.OCRLanguageData_ben,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_POR]=T.DWT.OCRLanguageData_por,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=T.DWT.OCRLanguageData_pan,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=T.DWT.OCRLanguageData_deu,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=T.DWT.OCRLanguageData_jpn,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=T.DWT.OCRLanguageData_fas,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=T.DWT.OCRLanguageData_swa,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=T.DWT.OCRLanguageData_jav,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=T.DWT.OCRLanguageData_tel,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=T.DWT.OCRLanguageData_tur,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=T.DWT.OCRLanguageData_kor,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=T.DWT.OCRLanguageData_mar,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=T.DWT.OCRLanguageData_tam,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=T.DWT.OCRLanguageData_vie,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=T.DWT.OCRLanguageData_ita,T.DWT.OCRLanguageData[T.DWT.EnumDWT_OCRLanguage.OCRL_THA]=T.DWT.OCRLanguageData_tha,function(e){function r(){var t=this;t._text="",t._fontName="",t._fontSize="",t._left=0,t._top=0,t._right=0,t._bottom=0}r.prototype.GetText=function(){return this._text},r.prototype.GetFontName=function(){return this._fontName},r.prototype.GetFontSize=function(){return this._fontSize},r.prototype.GetWordRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewWordBasicResult=function(){return new r}}(T.Lib),function(e){function r(){var t=this;t._count=0,t._left=0,t._top=0,t._right=0,t._bottom=0,t._wordlist=[]}r.prototype.GetWordCount=function(){return this._count},r.prototype.GetLineRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},r.prototype.GetWordContent=function(t){var i=this;if(i._errorCode<0)return"";if(null==t||t>=i._wordlist.length||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetWordContent"),"";var a=T.Lib.NewWordBasicResult();return a._text=i._wordlist[t].text,a._fontName=i._wordlist[t].fontname,a._fontSize=i._wordlist[t].fontsize,a._left=i._wordlist[t].rect[0],a._top=i._wordlist[t].rect[1],a._right=i._wordlist[t].rect[2],a._bottom=i._wordlist[t].rect[3],a},e.NewLineBasicResult=function(){return new r}}(T.Lib),function(e){function r(){this._count=0,this._linelist=[]}r.prototype.GetLineCount=function(){return this._count},r.prototype.GetLineContent=function(t){var i=this;if(i._errorCode<0)return"";if(null==t||t>=i._linelist.length||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetLineContent"),"";var a=T.Lib.NewLineBasicResult();return a._count=i._linelist[t].words.length,a._left=i._linelist[t].rect[0],a._top=i._linelist[t].rect[1],a._right=i._linelist[t].rect[2],a._bottom=i._linelist[t].rect[3],a._wordlist=i._linelist[t].words,a},e.NewPageBasicResult=function(){return new r}}(T.Lib),function(e){function r(){this._count=0,this._pagelist=[]}r.prototype.GetPageCount=function(){return this._count},r.prototype.GetPageContent=function(t){var i=this;if(i._errorCode<0)return"";if(null==t||t>=i._pagelist.length||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetPageContent"),"";var a=T.Lib.NewPageBasicResult();return a._count=i._pagelist[t].lines.length,a._linelist=i._pagelist[t].lines,a},e.NewPageSetBasicResult=function(){return new r}}(T.Lib),function(e){function r(t){var i=this;i._errorCode=0,i._errorString="",i._resultlist=[],i._stwain=t}r.prototype.GetErrorCode=function(){return this._errorCode},r.prototype.GetErrorString=function(){return this._errorString},r.prototype.GetFormat=function(){return this._resultlist[0].format},r.prototype.GetInput=function(){var i=this._resultlist[0].input;if(i){var n=Number(i);if(!isNaN(n))return this._stwain._ImgManager.convertServerIdToClientIndex(n)}return i},r.prototype.GetPageSetCount=function(){return this._resultlist[0].pagesets.length},r.prototype.GetPageSetContent=function(t){var i=this;if(i._errorCode<0)return"";if(null==t||t>=i._resultlist[0].pagesets.length||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetPageSetContent"),"";var a=T.Lib.NewPageSetBasicResult();return a._count=i._resultlist[0].pagesets[t].pages.length,a._pagelist=i._resultlist[0].pagesets[t].pages,a},r.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},r.prototype.Save=function(t){var n=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(n))},e.NewOCRBasicResult=function(t){return new r(t)}}(T.Lib),function(e){function r(){var t=this;t.UnicodeFontName="",t.UseDetectedFont=!0,t.MinFontSizeforMoreAccurateResult=0,t.OCRLanguage=T.DWT.EnumDWT_OCRLanguage.OCRL_ENG,t.PageSetMode=T.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO,t.OutputFormat=T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}r.prototype.GetUnicodeFontName=function(){return this.UnicodeFontName},r.prototype.SetUnicodeFontName=function(t){var n=t;return e.isString(n)||(n=""),this.UnicodeFontName=n,!0},r.prototype.GetUseDetectedFont=function(){return!!this.UseDetectedFont},r.prototype.SetUseDetectedFont=function(t){return this.UseDetectedFont=!!t,!0},r.prototype.GetMinFontSizeforMoreAccurateResult=function(){return this.MinFontSizeforMoreAccurateResult},r.prototype.SetMinFontSizeforMoreAccurateResult=function(t){var n=1*t;return n<0&&(n=0),this.MinFontSizeforMoreAccurateResult=n,!0},r.prototype.GetOCRLanguage=function(){return this.OCRLanguage},r.prototype.SetOCRLanguage=function(t){var n=t;return e.isString(n)||(n=""),this.OCRLanguage=n,!0},r.prototype.GetPageSetMode=function(){return this.PageSetMode},r.prototype.SetPageSetMode=function(t){var n=1*t;return(n<0||n>T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR)&&(n=T.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO),this.PageSetMode=n,!0},r.prototype.GetOutputFormat=function(){return this.OutputFormat},r.prototype.SetOutputFormat=function(t){var n=1*t;return(n<0||n>T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX)&&(n=T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT),this.OutputFormat=n,!0},e.NewOptions=function(){return new r}}(T.Lib),T.AddonReady(function(e,r){var t;e.product.bHTML5Edition&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(s){var l,o=e.html5.Funs,d=e.NewOptions();(function(s){var o=e.html5.Funs;t=e.env.bMac?"DynamicOCR_"+T.DWT.OCRVerInName+".dylib":e.env.bLinux?"DynamicOCR_"+T.DWT.OCRVerInName+".so":T.dcp.b64bit?"DynamicOCRx64_"+T.DWT.OCRVerInName+".dll":"DynamicOCR_"+T.DWT.OCRVerInName+".dll",s._isMobileMode()||s._innerSend("GetAddOnVersion",o.makeParams("ocr",t),!0,!1,!1),s.__innerOCRBasicReadFunction=function(l,d,c,u,h,f,g,v,p,m,I){return e.isFunction(m)?this.__innerOCRBasicAsyncReadFunction(l,d,c,u,h,f,g,v,p,m,I):this.__innerOCRSyncReadFunction(l,p)},s.__innerGetOCRBasicResultAsyncFunction=function(l){var d=T.Lib.NewOCRBasicResult(this);return l&&(d._errorCode=l.exception,d._errorString=l.description,d._resultlist=l.result),d},s.__innerOCRBasicAsyncReadFunction=function(l,d,c,u,h,f,g,v,p,m,I){var y=this;return o.showMask(l),y._innerSend(l,p,!0,function(A){if(0==A.exception){if(e.isFunction(m))if(-1!=d){var M=y.objImageIndexManager.convertServerIdToGuid(d);1==u?m(M,h,f,g,v,y.__innerGetOCRBasicResultAsyncFunction(A)):m(M,y.__innerGetOCRBasicResultAsyncFunction(A))}else""!=c?m(c,y.__innerGetOCRBasicResultAsyncFunction(A)):m(y.__innerGetOCRBasicResultAsyncFunction(A));e.License.isLTS()&&T.DWT.lcvrf(s)}else e.isFunction(I)&&I(A.exception,A.description);o.hideMask(l)},function(A){o.hideMask(l)}),!0},s.__innerOCRSyncReadFunction=function(l,d){var u,h,c=this;return u=c._innerFunRaw(l,d,!1,!1),(h=e.NewOCRBasicResult())._errorCode=c._errorCode,h._errorString=c._errorString,u&&e.isArray(u)&&(h._resultlist=u,h._Count=u.length,e.License.isLTS()&&T.DWT.lcvrf(s)),h},s.__IsOCRBasicModuleInstalled=function(){return""!=s._innerFun("GetAddOnVersion",o.makeParams("ocr",t)).split("|")[0]},s.__innerBasicDownload=function(l,d,c,u,h){var f=s;e.cancelFrome=2,l=l.toString();var v=function(){return e.isFunction(u)&&u(),!0},p=function(){return e.isFunction(h)&&h(f.ErrorCode,f.ErrorString),!1};if(!e.License.checkProductKey(f,{Core:!0})||!e.License.checkProductKey(f,{OCR:!0},!0))return p();d!=T.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll&&f._innerFun("SetOCRLanguage",o.makeParams(c));var I=f._innerFun("GetAddOnVersion",o.makeParams("ocr",t)).split("|");if(d==T.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(""!=I[0])return v(),!0}else{var y=T.DWT.OCRLanguageData[c];if(y&&I[1]==y)return v(),!0}if(!l||""==l)return e.Errors.OCR_InvalidRemoteFilename(f),p(),!1;if(o.isServerInvalid(f))return p(),!1;e.showProgress(f,"Download",!0);var C=!0;f._OnPercentDone(d==T.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll?[0,-1,"Downloading OCR Module...","http"]:[0,-1,"Downloading OCR Language Data...","http"]),e.isFunction(u)||(C=!1),o.loadHttpBlob(f,"get",l,C,function(A){f._OnPercentDone([0,-1,"Loading..."]);var M=100;d==T.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE&&(M=101),f.__LoadImageFromBytes(A,M,"",C,v,p)},function(){e.closeProgress("Download"),p()},function(A){var M=0===A.total?100:Math.round(100*A.loaded/A.total);[A.loaded," / ",A.total].join(""),f._OnPercentDone([0,M,"","http"])})}})(s),l={OCR:{SetUnicodeFontName:function(c){var u=s;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.OCR.SetUnicodeFontName"):d.SetUnicodeFontName(c)},GetUnicodeFontName:function(){var c=s;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.OCR.GetUnicodeFontName"):d.GetUnicodeFontName()},SetIfUseDetectedFont:function(c){var u=s;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont"):d.SetUseDetectedFont(c)},GetIfUseDetectedFont:function(){var c=s;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont"):d.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(c){var u=s;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult"):d.SetMinFontSizeforMoreAccurateResult(c)},GetMinFontSizeforMoreAccurateResult:function(){var c=s;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult"):d.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(c){var u=s;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.OCR.SetLanguage"):d.SetOCRLanguage(c)},IsModuleInstalled:function(){var c=s;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.OCR.IsModuleInstalled"):c.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(c){var u=s;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.OCR.SetPageSetMode");var h=1*c;return h==T.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||h==T.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR?d.SetPageSetMode(h):(T.Lib.Errors.OCR_InvalidPageSetMode(u),!1)},SetOutputFormat:function(c){var u=s;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.OCR.SetOutputFormat");var h=1*c;return h==T.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||h==T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||h==T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||h==T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||h==T.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX?d.SetOutputFormat(h):(T.Lib.Errors.OCR_InvalidOutputFormat(u),!1)},Recognize:function(c,u,h){var f=s;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.OCR.Recognize");if(!e.License.checkProductKey(f,{OCR:!0},!0))return e.isFunction(h)&&h(f._errorCode,f._errorString),!1;var g=f._ImgManager.convertClientIndexToServerId(c);return f.__innerOCRBasicReadFunction("OCRRecognize",g,"",0,0,0,0,0,o.makeParams(0,g,"",0,0,0,0,d.GetUnicodeFontName(),d.GetUseDetectedFont(),d.GetMinFontSizeforMoreAccurateResult(),d.GetOCRLanguage(),d.GetPageSetMode(),d.GetOutputFormat(),""),u,h)},RecognizeRect:function(c,u,h,f,g,v,p){var m=s;if(m._resetErr(),m._isMobileMode())return m._mobileNotSupport("Addon.OCR.RecognizeRect");if(!u&&0!=u||!h&&0!=h||!f&&0!=f||!g&&0!=g){var I=T.Lib.NewOCRBasicResult(m);return T.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(I,"RecognizeRect"),void p(I.GetErrorCode(),I.GetErrorString())}if(!e.License.checkProductKey(m,{OCR:!0},!0))return e.isFunction(p)&&p(m._errorCode,m._errorString),!1;var y=m._ImgManager.convertClientIndexToServerId(c);return m.__innerOCRBasicReadFunction("OCRRecognize",y,"",1,u,h,f,g,o.makeParams(0,y,"",u,h,f,g,d.GetUnicodeFontName(),d.GetUseDetectedFont(),d.GetMinFontSizeforMoreAccurateResult(),d.GetOCRLanguage(),d.GetPageSetMode(),d.GetOutputFormat(),""),v,p)},RecognizeFile:function(c,u,h){var f=s;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.OCR.RecognizeFile");var g=o.replaceLocalFilename(c);return e.License.checkProductKey(f,{OCR:!0},!0)?f.__innerOCRBasicReadFunction("OCRRecognize",-1,g,0,0,0,0,0,o.makeParams(1,-1,g,0,0,0,0,d.GetUnicodeFontName(),d.GetUseDetectedFont(),d.GetMinFontSizeforMoreAccurateResult(),d.GetOCRLanguage(),d.GetPageSetMode(),d.GetOutputFormat(),""),u,h):(e.isFunction(h)&&h(f._errorCode,f._errorString),!1)},RecognizeSelectedImages:function(c,u){var h=s;if(h._resetErr(),h._isMobileMode())return h._mobileNotSupport("Addon.OCR.RecognizeSelectedImages");if(!e.License.checkProductKey(h,{OCR:!0},!0))return e.isFunction(u)&&u(h._errorCode,h._errorString),!1;var g=function(s){var d,c,o=[];return s._ImgManager.count()<=0||(d=s._ImgManager.getCurrentImageIndex(),s._ImgManager.convertClientIndexToServerId(d),c=s._ImgManager.getSelectedClientIndexArray(),e.isArray(c)&&e.each(c,function(u){var h=s._ImgManager.convertClientIndexToServerId(u);o.push(h)})),o}(h);return h.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,o.makeParams(2,-1,"",0,0,0,0,d.GetUnicodeFontName(),d.GetUseDetectedFont(),d.GetMinFontSizeforMoreAccurateResult(),d.GetOCRLanguage(),d.GetPageSetMode(),d.GetOutputFormat(),g.join(",")),c,u)},Download:function(c,u,h){var f=s;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.OCR.Download"):f.__innerBasicDownload(c,T.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,d.GetOCRLanguage(),u,h)},DownloadLangData:function(c,u,h){var f=s;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.OCR.DownloadLangData"):f.__innerBasicDownload(c,T.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,d.GetOCRLanguage(),u,h)}}},s.__addon=s.__addon||{},e.mix(s.__addon,l)}))}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},T.ProOCRVerInName="1.2.0.0806",function(e){function r(){var t=this;t._text="",t._left=0,t._top=0,t._right=0,t._bottom=0}r.prototype.GetText=function(){return this._text},r.prototype.GetLetterRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewLetterResult=function(){return new r}}(T.Lib),function(e){function r(){var t=this;t._count=0,t._letterlist=[],t._zoneCount=0,t._zoneWords=[]}r.prototype.GetLettersCount=function(){return this._count},r.prototype.GetZoneCount=function(){return this._zoneCount},r.prototype.GetLetterContent=function(t){var i=this;if(i._errorCode<0)return"";if(null==t||t>=i._count||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetLetterContent"),"";var a=T.Lib.NewLetterResult();return a._text=i._letterlist[t].letter,a._left=i._letterlist[t].boundary[0],a._top=i._letterlist[t].boundary[1],a._right=i._letterlist[t].boundary[2],a._bottom=i._letterlist[t].boundary[3],a},r.prototype.GetZoneContent=function(t){var i=this;return i._errorCode<0?"":null==t||t>=i._zoneCount||t<0?(T.Lib.Errors.OCR_InvalidIndex(i,"GetZoneContent"),""):i._zoneWords[t]},e.NewPageResult=function(){return new r}}(T.Lib),function(e){function r(){var t=this;t._input=0,t._message="",t._page=-1}r.prototype.GetInput=function(){return this._input},r.prototype.GetMessage=function(){return this._message},r.prototype.GetPage=function(){return this._page},e.NewErrorInfo=function(){return new r}}(T.Lib),function(e){function r(t){var i=this;i._errorCode=0,i._errorString="",i._errorlist=[],i._request="",i._ocrTotalCount=0,i._alreadyOCRCount=0,i._resultlist=[],i._resultZoneDetail=[],i._stwain=t}r.prototype.GetErrorCode=function(){return this._errorCode},r.prototype.GetErrorString=function(){return this._errorString},r.prototype.GetInput=function(){var t=this;if(t._request&&t._request.input){var i=t._request.input;if(i){var n=Number(i);if(!isNaN(n))return t._stwain._ImgManager.convertServerIdToClientIndex(n)}return i}return""},r.prototype.GetErrorDetailList=function(){var t=this,i=0;t._errorlist&&(i=t._errorlist.length);for(var n=[],a=0;a<i;a++){var s=T.Lib.NewErrorInfo();s._input=t._errorlist[a].input,s._message=t._errorlist[a].message,s._page=t._errorlist[a].page,n.push(s)}return n},r.prototype.GetOCRTotalCount=function(){return this._ocrTotalCount?this._ocrTotalCount:0},r.prototype.GetAlreadyOCRCount=function(){return this._alreadyOCRCount?this._alreadyOCRCount:0},r.prototype.GetPageCount=function(){var t=this;return t._resultlist&&t._resultlist.length?t._resultlist.length:0},r.prototype.GetPageContent=function(t){var i=this,n=0;if(i._resultlist&&(n=i._resultlist.length),null==t||t>=n||t<0)return T.Lib.Errors.OCR_InvalidIndex(i,"GetPageContent"),"";var a=T.Lib.NewPageResult();return i._resultlist?(a._count=i._resultlist[t].length,a._letterlist=i._resultlist[t]):a._count=0,i._resultZoneDetail?(a._zoneCount=i._resultZoneDetail[t].length,a._zoneWords=i._resultZoneDetail[t]):a._zoneCount=0,a},r.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},r.prototype.Save=function(t){var n=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(n))},e.NewOCRProResult=function(t){return new r(t)}}(T.Lib),function(e){for(var r=[T.DWT],t=0;t<1;t++){var i=r[t];i.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"},i.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"},i.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"},i.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"},i.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1},i.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4},i.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}}("undefined"!=typeof window&&window),function(e){function r(){var t=this;t.FindText="",t.FindTextFlags=T.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD,t.FindTextAction=T.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}e.NewRedaction=function(){return new r}}(T.Lib),T.WebTwain={Addon:{OCRPro:{}}},function(e){function r(){var t=this;t.RecognitionModule="",t.Languages="eng",t.OutputFormat="",t.PDFVersion="",t.PDFAVersion="",t.LicenseChecker="",t.Redaction=T.Lib.NewRedaction()}e.NewSettings=function(){return new r}}(T.WebTwain.Addon.OCRPro),function(){function e(r,t,i,n){var a=this;a.left=r,a.top=t,a.right=i,a.bottom=n}T.WebTwain.Addon.OCRPro.NewOCRZone=function(r,t,i,n){return new e(r,t,i,n)}}(),T.AddonReady(function(e,r){if(e.product.bHTML5Edition){var s=function(E,R,x,P){var F=e.NewOCRProResult(E);F._errorCode=R,F._errorString=x;var k=e.NewErrorInfo();return k.input=P,k.message=F._errorString,k.page=0,F._errorlist=[k],F};e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(E){var x,P,R=e.html5.Funs;P=e.env.bMac?"DynamicOCRPro_"+T.ProOCRVerInName+".dylib":e.env.bLinux?"DynamicOCRPro_"+T.ProOCRVerInName+".so":T.dcp.b64bit?"DynamicOCRProx64_"+T.ProOCRVerInName+".dll":"DynamicOCRPro_"+T.ProOCRVerInName+".dll",function(E){var R=e.html5.Funs;E.__innerGetOCRProResultAsyncFunction=function(x){var P=T.Lib.NewOCRProResult(this);return x&&(P._errorCode=x.code,P._errorString=x.message,P._request=x.request,P._errorlist=x.errorList,P._ocrTotalCount=x.ocrTotalCount,P._alreadyOCRCount=x.alreadyOCRCount,P._resultlist=x.resultDetail,P._resultZoneDetail=x.resultZoneDetail),P},E.__innerIsOCRTrial=function(x,P){var F=this,k=function(){var w=!1;if(F.__licenseInfo.Detail)for(var S=0;S<F.__licenseInfo.Detail.length;S++)"10"==F.__licenseInfo.Detail[S].EnumLicenseType&&"TRUE"==F.__licenseInfo.Detail[S].Trial&&(w=!0);return x(w)};return F.__licenseInfo&&F.__licenseInfo.Detail?k():F.GetLicenseInfo(k,P)},E.__innerOCRReadFunction=function(x,P,F,k,w,S,L,U){return this.__innerOCRAsyncReadFunction(x,P,F,k,w,S,L,U)},E.__innerOCRAsyncReadFunction=function(x,P,F,k,w,S,L,U){var Z=this;return R.showMask(x),Z._innerSend(x,S,!0,function(ue){0==ue.code?(e.isFunction(L)&&(-1!=P?1==k?L(P,w,Z.__innerGetOCRProResultAsyncFunction(ue)):L(P,Z.__innerGetOCRProResultAsyncFunction(ue)):""!=F?L(F,Z.__innerGetOCRProResultAsyncFunction(ue)):L(Z.__innerGetOCRProResultAsyncFunction(ue))),e.License.isLTS()&&T.DWT.lcvrf(E)):e.isFunction(U)&&U(ue.code,ue.message,Z.__innerGetOCRProResultAsyncFunction(ue)),R.hideMask(x)},function(ue){R.hideMask(x)}),!0},E.__innerGetRequestJson=function(x,P,F,k,w){var L,U="[{";for(U+='"id":"'+E.clientId+'",',U+='"method":"OCRProRecognize",',U+='"dllName":"'+w+'",',U+='"productkey":"'+T.DWT.ProductKey+'",',U+=x==T.DWT.EnumDWT_OCRProType.OCRDT_File?'"inputType":"file",':'"inputType":"index",',U+='"input":[',L=0;L<P.length;L++)U+=x==T.DWT.EnumDWT_OCRProType.OCRDT_File?'"'+P[L]+'"':P[L],L+1<P.length&&(U+="|");if(U+="],",U+='"settings":{',U+='"recognitionMethod": "Page"',F&&(F.RecognitionModule&&F.RecognitionModule.length>0&&(U+=',"recognitionModule":"'+F.RecognitionModule+'"'),F.Languages&&F.Languages.length>0&&(U+=',"languages":"'+F.Languages+'"'),F.OutputFormat&&F.OutputFormat.length>0&&(U+=',"outputFormat":"'+F.OutputFormat+'"'),F.PDFVersion&&F.PDFVersion.length>0&&(U+=',"pdfVersion":"'+F.PDFVersion+'"'),F.PDFAVersion&&F.PDFAVersion.length>0&&(U+=',"pdfAVersion":"'+F.PDFAVersion+'"'),F.Redaction&&F.Redaction.FindText&&F.Redaction.FindText.length>0)){var Z=parseInt(F.Redaction.FindTextFlags),ne=parseInt(F.Redaction.FindTextAction);if(!isNaN(Z)&&!isNaN(ne)){U+=',"redaction":{';var oe=F.Redaction.FindText;U+='"findText":"'+(oe=oe.replace(/\"/g,'\\"'))+'"',U+=',"findTextFlags":'+Z,U+=',"findTextAction":'+ne,U+="}"}}for(U+="},",U+='"zones":[',L=0;L<k.length;L++)U+="["+k[L].left+","+k[L].top+","+k[L].right+","+k[L].bottom+"]",L+1<k.length&&(U+=",");return U+="],",(U+='"outputFile":""')+"}]"},E.__LoadImageFromBytesForDownloadInner=function(x,P,F,k,w,S,L,U,Z){var oe,X,ne=E;X=x>=k?P.slice(oe=S*k,w):P.slice(oe=x*S,(x+1)*S),ne.__LoadImageFromBytes(X,F,"",L,function(){x>=k?T.Lib.isFunction(U)&&U():ne.__LoadImageFromBytesForDownloadInner(x+=1,P,F,k,w,S,L,U,Z)},function(){T.Lib.isFunction(Z)&&Z()},oe,w)},E.__LoadImageFromBytesForDownload=function(x,P,F,k,w,S){var L=E,U=2e6,Z=x.size||x.length,ne=parseInt(Z/U);0==Z%U&&(ne-=1),L.__LoadImageFromBytesForDownloadInner(0,x,P,ne,Z,U,k,w,S)}}(E),x={OCRPro:{Settings:!1,Recognize:function(F,k,w){var L,U,S=[],oe=E;if(oe._resetErr(),oe._isMobileMode())return oe._mobileNotSupport("Addon.OCRPro.Recognize");if(L=parseInt(F),e.isNaN(L)||!e.isNumber(L))return U=s(E,-2201,"Invalid parameter type.",F),e.isFunction(w)?w(U._errorCode,U._errorString,U):e.Errors.WebviewerError(E,U._errorString,U._errorCode),!1;var ue=E._ImgManager.convertClientIndexToServerId(L);if(-1==ue)return e.isFunction(w)&&(e.Errors.IndexOutOfRange(E),U=s(E,E._errorCode,E._errorString,F),w(U._errorCode,U._errorString,U)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(w)&&(U=s(E,E._errorCode,E._errorString,F),w(U._errorCode,U._errorString,U)),!1;S.push(ue);var X=[],pe=this.Settings,B=E.__innerGetRequestJson(T.DWT.EnumDWT_OCRProType.OCRDT_Index,S,pe,X,P);return E.__innerIsOCRTrial(function(K){return K||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",F,"",0,X,B,k,w):c(pe.LicenseChecker,E,"OCRProRecognize",F,"",0,X,B,k,w)},w)},RecognizeRect:function(F,k,w,S){var U,Z,L=[],ue=E;if(ue._resetErr(),ue._isMobileMode())return ue._mobileNotSupport("Addon.OCRPro.RecognizeRect");if(U=parseInt(F),e.isNaN(U)||!e.isNumber(U))return Z=s(E,-2201,"Invalid parameter type.",F),e.isFunction(S)?S(Z._errorCode,Z._errorString,Z):e.Errors.WebviewerError(E,Z._errorString,Z._errorCode),!1;var X=E._ImgManager.convertClientIndexToServerId(U),pe=E._ImgManager.GetImageWidth(U),B=E.GetImageHeight(U);if(-1==X)return e.isFunction(S)&&(e.Errors.IndexOutOfRange(E),Z=s(E,E._errorCode,E._errorString,F),S(Z._errorCode,Z._errorString,Z)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(S)&&(Z=s(E,E._errorCode,E._errorString,F),S(Z._errorCode,Z._errorString,Z)),!1;if(pe>0&&B>0)for(var K,G,ee,ie,be,Te,Ge=0;Ge<k.length;Ge++)(G=(K=k[Ge]).left)<0&&(G=0),(ee=K.top)<0&&(ee=0),(ie=K.right)<0&&(ie=0),(be=K.bottom)<0&&(be=0),G>ie&&(Te=G,G=ie,ie=Te),ee>be&&(Te=ee,ee=be,be=Te),ie>pe&&(ie=pe),be>B&&(be=B),K.left=G,K.top=ee,K.right=ie,K.bottom=be;L.push(X);var je=this.Settings,he=E.__innerGetRequestJson(T.DWT.EnumDWT_OCRProType.OCRDT_Index,L,je,k,P);return E.__innerIsOCRTrial(function(ae){return ae||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",F,"",1,k,he,w,S):c(je.LicenseChecker,E,"OCRProRecognize",F,"",1,k,he,w,S)},S)},RecognizeFile:function(F,k,w){var L,U,Z,S=E;if(S._resetErr(),S._isMobileMode())return S._mobileNotSupport("Addon.OCRPro.RecognizeFile");if(0==F.length)return e.isFunction(w)&&((L=T.Lib.NewOCRProResult(E))._errorCode=-2201,L._errorString="File name cannot be empty.",Z=[],(U=T.Lib.NewErrorInfo()).input=F,U.message=L._errorString,U.page=0,Z.push(U),L._errorlist=Z,w(L._errorCode,L._errorString,L)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(w)&&((L=T.Lib.NewOCRProResult(E))._errorCode=E._errorCode,L._errorString=E._errorString,Z=[],(U=T.Lib.NewErrorInfo()).input=F,U.message=L._errorString,U.page=0,Z.push(U),L._errorlist=Z,w(L._errorCode,L._errorString,L)),!1;var ne=R.replaceLocalFilename(F),oe=[];ne.indexOf("|")>0?oe=ne.split("|"):ne.indexOf(";")>0?oe=ne.split(";"):ne.indexOf(",")>0&&(oe=ne.split(","));var ue=[];if(oe.length>0)for(var X=0;X<oe.length;X++)ue.push(oe[X]);else ue.push(ne);var pe=[],B=this.Settings,K=E.__innerGetRequestJson(T.DWT.EnumDWT_OCRProType.OCRDT_File,ue,B,pe,P);E.__innerIsOCRTrial(function(G){return G||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",-1,F,0,pe,K,k,w):c(B.LicenseChecker,E,"OCRProRecognize",-1,F,0,pe,K,k,w)},w)},RecognizeSelectedImages:function(F,k){var w,S,L,U=E;if(U._resetErr(),U._isMobileMode())return U._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");if(!e.License.checkProductKey(E,{OCRPro:!0},!0)){if(e.isFunction(k)){var Z=T.Lib.NewOCRProResult(E);Z._errorCode=E._errorCode,Z._errorString=E._errorString,S=[],(L=T.Lib.NewErrorInfo()).input="",L.message=Z._errorString,L.page=0,S.push(L),Z._errorlist=S,k(Z._errorCode,Z._errorString,Z)}return!1}var ne=[],oe=this.Settings,ue=function(E){var P,F,R=[];return E._ImgManager.count()<=0||(P=E._ImgManager.getCurrentImageIndex(),E._ImgManager.convertClientIndexToServerId(P),F=E._ImgManager.getSelectedClientIndexArray(),e.isArray(F)&&e.each(F,function(k){var w=E._ImgManager.convertClientIndexToServerId(k);R.push(w)})),R}(E),X=E.__innerGetRequestJson(T.DWT.EnumDWT_OCRProType.OCRDT_Index,ue,oe,ne,P);return E.__innerIsOCRTrial(function(pe){w=pe||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",-1,"",0,ne,X,F,k):c(oe.LicenseChecker,E,"OCRProRecognize",-1,"",0,ne,X,F,k)},k),w},IsModuleInstalled:function(){var F=E;return F._resetErr(),F._isMobileMode()?F._mobileNotSupport("Addon.OCRPro.IsModuleInstalled"):""!=F._innerFun("GetAddOnVersion",R.makeParams("proocr",P))},Download:function(F,k,w){var S=E;if(S._resetErr(),S._isMobileMode())return S._mobileNotSupport("Addon.OCRPro.Download");var U=function(){return e.isFunction(k)&&k(),!0},Z=function(){return e.isFunction(w)&&w(S.ErrorCode,S.ErrorString),!1};if(!e.License.checkProductKey(S,{Core:!0})||!e.License.checkProductKey(S,{OCRPro:!0},!0))return Z();if(this.IsModuleInstalled())return U(),!0;if(!F||""==F||!e.isString(F))return e.Errors.OCR_InvalidRemoteFilename(S),Z(),!1;if(R.isServerInvalid(S))return Z(),!1;e.cancelFrome=2,e.showProgress(S,"Download",!0);var oe=!0;return S._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]),e.isFunction(k)||(oe=!1),R.loadHttpBlob(S,"get",F,oe,function(ue){S._OnPercentDone([0,-1,"Loading..."]),S.__LoadImageFromBytesForDownload(ue,102,"",oe,U,Z)},function(){e.closeProgress("Download"),Z()},function(ue){var X=0===ue.total?100:Math.round(100*ue.loaded/ue.total);[ue.loaded," / ",ue.total].join(""),S._OnPercentDone([0,X,"","http"])})}}},E.__addon=E.__addon||{},e.mix(E.__addon,x)}),T.WebTwain.Addon.OCRPro.NewOCRReadPara=function(E,R,x,P,F,k,w,S,L,U){return new l(E,R,x,P,F,k,w,S,L,U)},T.WebTwain.Addon.OCRPro.NewOCRError=function(){return new f},T.Lib.mix(T.Lib.Errors,{OCR_LicenseCheckerEmpty:function(E){var x="LicenseChecker cannot be empty.";E.errorString=x,E.responseText=A("false;-2601;"+x+";")},OCR_LicenseCheckerNotConnect:function(E){var x="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";E.errorString=x,E.responseText=A("false;-2602;"+x+";")},OCR_AccessDenied:function(E){var x="Access denied.";E.errorString=x,E.responseText=A("false;-2603;"+x+";")},OCR_LicenseCheckerError:function(E,R){var P="Error occured in '"+R+"'.";E.errorString=P,E.responseText=A("false;-2604;"+P+";")},OCR_HTTPError:function(E,R){var P="HTTP Error "+R+".";E.errorString=P,E.responseText=A("false;-2605;"+P+";")},OCR_LicenseCheckerUnauthorized:function(E,R){var P="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+R+"'.";E.errorString=P,E.responseText=A("false;-2606;"+P+";")},__last:!1});var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}function l(E,R,x,P,F,k,w,S,L,U){var Z=this;Z.STWAIN=R,Z.AjaxFunctionUrl=E,Z.FunctionName=x,Z.ImageIndex=P,Z.FileNames=F,Z.Type=k,Z.AryZone=w,Z.JsonString=S,Z.OnSuccess=L,Z.OnFailure=U}function d(E,R){var P=E.responseText;if(0==P.length){var F=T.WebTwain.Addon.OCRPro.NewOCRError();T.Lib.Errors.OCR_LicenseCheckerError(F,R.AjaxFunctionUrl),P=F.responseText}var k=function(E){return function(E){var R,x,P,F,k,w;for(R="",P=E.length,x=0;x<P;)switch(F=E.charCodeAt(x++),F>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:R+=E.charAt(x-1);break;case 12:case 13:k=E.charCodeAt(x++),R+=String.fromCharCode((31&F)<<6|63&k);break;case 14:k=E.charCodeAt(x++),w=E.charCodeAt(x++),R+=String.fromCharCode((15&F)<<12|(63&k)<<6|(63&w)<<0)}return R}(function(E){var R,x,P,F,k,w,S;for(w=E.length,k=0,S="";k<w;){do{R=m[255&E.charCodeAt(k++)]}while(k<w&&-1==R);if(-1==R)break;do{x=m[255&E.charCodeAt(k++)]}while(k<w&&-1==x);if(-1==x)break;S+=String.fromCharCode(R<<2|(48&x)>>4);do{if(61==(P=255&E.charCodeAt(k++)))return S;P=m[P]}while(k<w&&-1==P);if(-1==P)break;S+=String.fromCharCode((15&x)<<4|(60&P)>>2);do{if(61==(F=255&E.charCodeAt(k++)))return S;F=m[F]}while(k<w&&-1==F);if(-1==F)break;S+=String.fromCharCode((3&P)<<6|F)}return S}(E))}(P).split(";");1==k.length?R.OnFailure(-1,P,T.Lib.NewOCRProResult()):"true"==k[0]?R.STWAIN.__innerOCRReadFunction(R.FunctionName,R.ImageIndex,R.FileNames,R.Type,R.AryZone,R.JsonString,function(S,L,U){T.Lib.isUndefined(U)?T.Lib.isUndefined(L)?(R.OnSuccess(S),u(R.AjaxFunctionUrl,S.GetPageCount())):(R.OnSuccess(S,L),u(R.AjaxFunctionUrl,L.GetPageCount())):(R.OnSuccess(S,L,U),u(R.AjaxFunctionUrl,U.GetPageCount()))},R.OnFailure):R.OnFailure(k[1],k[2],T.Lib.NewOCRProResult())}function c(E,R,x,P,F,k,w,S,L,U){return v(E,"DTW_AjaxMethod=CheckLicense&Productkey="+A(T.DWT.ProductKey),d,T.WebTwain.Addon.OCRPro.NewOCRReadPara(E,R,x,P,F,k,w,S,L,U))}function u(E,R){v(E,"DTW_AjaxMethod=WriteOCRCount&OCRCount="+A(R+""),h,null)}function h(E,R){}function f(){this.responseText="",this.errorString=""}function v(E,R,x,P){var F=T.WebTwain.Addon.OCRPro.NewOCRError();if(""==E)return T.Lib.Errors.OCR_LicenseCheckerEmpty(F),alert(F.errorString),x(F,P),!1;var k=function(){var E=null,R=window;try{E=new R.ActiveXObject("Msxml2.XMLHTTP")}catch(x){try{E=new R.ActiveXObject("Microsoft.XMLHTTP")}catch(P){E=new XMLHttpRequest}}return E}();return k.open("POST",E,!0),k.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),k.onreadystatechange=function(){if(4==k.readyState){if(200!=k.status)return 401==k.status?(T.Lib.Errors.OCR_LicenseCheckerUnauthorized(F,P.AjaxFunctionUrl),x(F,P),!1):404==k.status?(T.Lib.Errors.OCR_LicenseCheckerNotConnect(F),alert(F.errorString),x(F,P),!1):403==k.status?(T.Lib.Errors.OCR_AccessDenied(F),x(F,P),!1):(T.Lib.Errors.OCR_HTTPError(F,k.status),x(F,P),!1);null!=x&&"function"==typeof x&&x(k,P)}},k&&R&&k.send(R),!0}function A(E){return function(E){var R,x,P,F,k,w;for(P=E.length,x=0,R="";x<P;){if(F=255&E.charCodeAt(x++),x==P){R+=p.charAt(F>>2),R+=p.charAt((3&F)<<4),R+="==";break}if(k=E.charCodeAt(x++),x==P){R+=p.charAt(F>>2),R+=p.charAt((3&F)<<4|(240&k)>>4),R+=p.charAt((15&k)<<2),R+="=";break}w=E.charCodeAt(x++),R+=p.charAt(F>>2),R+=p.charAt((3&F)<<4|(240&k)>>4),R+=p.charAt((15&k)<<2|(192&w)>>6),R+=p.charAt(63&w)}return R}(function(E){var R,x,P,F;for(R="",P=E.length,x=0;x<P;x++)(F=E.charCodeAt(x))>=1&&F<=127?R+=E.charAt(x):F>2047?(R+=String.fromCharCode(224|F>>12&15),R+=String.fromCharCode(128|F>>6&63),R+=String.fromCharCode(128|F>>0&63)):(R+=String.fromCharCode(192|F>>6&31),R+=String.fromCharCode(128|F>>0&63));return R}(E))}}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},T.WebcamVerForActiveX="15.0.0.0625",T.WebcamVerInName="15.0.0.0625",function(e){for(var r=[T.DWT],t=0;t<1;t++){var i=r[t];i.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},i.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},i.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}("undefined"!=typeof window&&window),function(e){e.WebcamErrors={InvalidParameter:function(r){r._errorCode=-10001,r._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(r){r._errorCode=-10002,r._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(r){r._errorCode=-10003,r._errorString="To get the url for the current frame, the video must be playing."},Success:function(r){r._errorCode=0,r._errorString="Successful."}}}(T.Lib),function(e){function r(t){var i=this;i._Count=0,i._resultlist=[],i._stwain=t}r.prototype.GetCount=function(){return e.WebcamErrors.Success(this._stwain),this._Count-1},r.prototype.Get=function(t){var i=this;return t>=i._resultlist.length-1||t<0?(T.Lib.Errors.Webcam_InvalidIndex(i._stwain,"Get"),""):(e.WebcamErrors.Success(i._stwain),i._resultlist[t])},r.prototype.GetCurrent=function(){var t=this,i=t._resultlist.length;return 0==i?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,"GetCurrent"),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[i-1])},e.NewWebcamValue=function(t){return new r(t)}}(T.Lib),function(e){function r(t){var i=this;i._Count=0,i._resultlist=[],i._stwain=t}r.prototype.GetValue=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[0].current)},r.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):(e.WebcamErrors.Success(t._stwain),"true"==t._resultlist[0].auto)},e.NewWebcamSetting=function(t){return new r(t)}}(T.Lib),function(e){function r(t){var i=this;i._Count=0,i._resultlist=[],i._stwain=t}r.prototype.GetMinValue=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].min},r.prototype.GetMaxValue=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].max},r.prototype.GetSteppingDelta=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].step},r.prototype.GetDefaultValue=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].defaultValue},r.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(T.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):"true"==t._resultlist[0].auto},e.NewWebcamMoreSetting=function(t){return new r(t)}}(T.Lib),T.AddonReady(function(e,r){e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(i){i._innerSetWebcamValue=function(a){var o;return o=e.NewWebcamValue(i),a&&e.isArray(a)&&(o._resultlist=a,o._Count=a.length),o},i._innerSetWebcamSetting=function(a){var o;return o=e.NewWebcamSetting(i),a&&e.isArray(a)&&(o._resultlist=a,o._Count=a.length),o},i._innerSetWebcamMoreSetting=function(a){var o;return o=e.NewWebcamMoreSetting(i),a&&e.isArray(a)&&(o._resultlist=a,o._Count=a.length),o}}),e.Addon_Events.push("OnFrameCaptured"),e.Addon_Events.push("OnCaptureSuccess"),e.Addon_Events.push("OnCaptureError")}),T.AddonReady(function(e,r){function i(a,s){for(var o=s.length-1;o>=0&&s[o].p1>=a.p1&&!(s[o].p1==a.p1&&s[o].p2<a.p2);)s[o+1]=s[o],o--;s[o+1]=a}e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(a){var o,l,s=e.html5.Funs;l=e.env.bMac?"DynamicWebcam_"+T.WebcamVerInName+".dylib":e.env.bLinux?"DynamicWebcam_"+T.WebcamVerInName+".so":T.dcp.b64bit?"DynamicWebcamx64_"+T.WebcamVerInName+".dll":"DynamicWebcam_"+T.WebcamVerInName+".dll",a._isMobileMode()||a._innerSend("GetAddOnVersion",s.makeParams("webcam",l),!0,!1,!1),function(a){a._innerWebcamValueFunction=function(o,l){var c;return c=this._innerFunRaw(o,l,!1,!1),this._innerSetWebcamValue(c)},a._innerWebcamSettingFunction=function(o,l){var c;return c=this._innerFunRaw(o,l,!1,!1),this._innerSetWebcamSetting(c)},a._innerWebcamMoreSettingFunction=function(o,l){var c;return c=this._innerFunRaw(o,l,!1,!1),this._innerSetWebcamMoreSetting(c)},a._OnCaptureSuccess=function(o){T.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},a._OnCaptureError=function(o){var d=o[1],c=o[2];T.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(d,c)},a._OnFrameCaptured=function(o){var l=this,d=T.Lib;if(!l.__videoPause){var c=l.__videoQuality;c||(c=60),l.__videoDest&&l.__videoDest.UpdateVideoContainer(l.GetImageURL(-1,-1,-1,0,c))}d.isFunction(l.__OnFrameCaptured)&&l.__OnFrameCaptured(o)}}(a),o={Webcam:{IsModuleInstalled:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.IsModuleInstalled"):""!=d._innerFun("GetAddOnVersion",s.makeParams("webcam",l))},Download:function(d,c,u){var h=a;if(h._resetErr(),h._isMobileMode())return h._mobileNotSupport("Addon.Webcam.Download");T.Lib.cancelFrome=2;var g=function(){return T.Lib.isFunction(c)&&c(),!0},v=function(){return T.Lib.isFunction(u)&&u(a.ErrorCode,a.ErrorString),!1};if(!e.License.checkProductKey(a,{Webcam:!0},!0))return v();if(this.IsModuleInstalled())return g();if(!d||""==d)return T.Lib.Errors.Webcam_InvalidRemoteFilename(h),v();if(s.isServerInvalid(h))return v(),!1;T.Lib.showProgress(h,"Download",!0);var m=!0;return h._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),T.Lib.isFunction(c)||(m=!1),s.loadHttpBlob(h,"get",d,m,function(I){h._OnPercentDone([0,-1,"Loading..."]),h.__LoadImageFromBytes(I,100,"",m,g,v)},function(){T.Lib.closeProgress("Download"),v()},function(I){var y=0===I.total?100:Math.round(100*I.loaded/I.total);[I.loaded," / ",I.total].join(""),h._OnPercentDone([0,y,"","http"])})},GetSourceList:function(){var d=a;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.Webcam.GetSourceList");if(!e.License.checkProductKey(d,{Webcam:!0},!0))return[];var c=d._innerFunRaw("GetWebcamSourceList");return 0==d.ErrorCode&&c.splice(c.length-1,1),c},SelectSource:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SelectSource"):!!e.License.checkProductKey(c,{Webcam:!0},!0)&&c._innerFun("SelectWebcam",s.makeParams(d))},CloseSource:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.CloseSource"):(this._clear(),d._innerFun("StopCapture"))},GetFramePartURL:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.GetFramePartURL"):this._isPlaying()?d.GetImageURL(-1,-1,-1,!0,d.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(d),"")},GetFrameURL:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.GetFrameURL"):this._isPlaying()?d.GetImageURL(-1,-1,-1,0,d.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(d),"")},PlayVideo:function(d,c,u,h,f){var g=a;if(g._resetErr(),g._isMobileMode())return g._mobileNotSupport("Addon.Webcam.PlayVideo");var p=T.Lib,m=60,y=this,_=function(){return y._clear(),T.Lib.isFunction(f)&&f(a.ErrorCode,a.ErrorString),!1};return d?e.License.checkProductKey(a,{Webcam:!0},!0)?(g.__videoDest=d,g.__videoDest.ShowVideoContainer(!0),p.isFunction(u)&&(a.__OnFrameCaptured=u),a.__videoPause?(a.__videoPause=!1,e.isFunction(h)&&h(),!0):(a.__videoPause=!1,c?((m=1*c)<1&&(m=60),a.__videoQuality=m):a.__videoQuality=m,a._innerSend("PlayVideo",s.makeParams(!0),!0,h,_))):_():(T.Lib.Errors.ParameterCannotEmpty(a),_())},PauseVideo:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.PauseVideo"):(this._isPlaying()&&(d.__videoPause=!0),!0)},_clear:function(){var d=a;d.__videoPause=!1,d.__OnFrameCaptured=!1,d.__videoQuality=60,d.__videoDest&&d.__videoDest.ShowVideoContainer(!1),d.__videoDest=!1},_isPlaying:function(){return a.GetIfShowVideoContainer()},StopVideo:function(){var d=a;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.Webcam.StopVideo");this._clear();var c=d._innerFun("PlayVideo",s.makeParams(!1,0));return d._innerFun("StopCapture"),c},CaptureImage:function(d,c){var u=a;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.Webcam.CaptureImage"),e.isFunction(c)&&c(u._errorCode,u._errorString),!1;if(!e.License.checkProductKey(u,{Webcam:!0},!0))return e.isFunction(c)&&c(u._errorCode,u._errorString),!1;var h="CaptureImage",g=function(){s.hideMask(h),e.isFunction(c)&&c(u._errorCode,u._errorString)};return s.showMask(h),u.__OnCaptureError=g,u._innerSend(h,s.makeParams(!1),!0,function(){s.hideMask(),0==u.ErrorCode?(s.hideMask(h),e.isFunction(d)&&setTimeout(d,0),e.License.isLTS()&&T.DWT.lcvrf(a)):g()},g)},GetMediaType:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.GetMediaType"):d._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetMediaType"):e.isString(d)?c._innerFun("SetMediaType",s.makeParams(d)):(e.Errors.InvalidValue(c),!1)},GetResolution:function(){var d=a;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.Webcam.GetResolution");var c=d._innerWebcamValueFunction("GetResolution");if(c&&c._resultlist){var u,h,p,f=c._resultlist,g=[],v=[];for(f.length>0&&(p=f[f.length-1]),""==p&&f.length>0&&(p=f[0]),u=0;u<f.length-1;u++){var m=(h=f[u]).toLowerCase().split("x");i({value:h,p1:parseInt(m[0]),p2:parseInt(m[1])},g)}for(u=0;u<g.length;u++)v.push(h=g[u].value);p&&v.push(p),c._resultlist=v,g=null,v=null}return c},SetResolution:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetResolution"):e.isNumber(d)||e.isString(d)?c._innerFun("SetResolution",s.makeParams(d)):(e.Errors.InvalidValue(c),!1)},GetFrameRate:function(){var d=a;return d._resetErr(),d._isMobileMode()?d._mobileNotSupport("Addon.Webcam.GetFrameRate"):d._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetFrameRate"):e.isNumber(d)?a._innerFun("SetFrameRate",s.makeParams(d)):(e.Errors.InvalidValue(c),!1)},GetVideoPropertySetting:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting"):c._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",s.makeParams(d))},GetVideoPropertyMoreSetting:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting"):c._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",s.makeParams(d))},SetVideoPropertySetting:function(d,c,u){var h=a;return h._resetErr(),h._isMobileMode()?h._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting"):h._innerFun("SetWebcamVideoPropertySetting",s.makeParams(d,c,u))},SetVideoRotateMode:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetVideoRotateMode"):c._innerFun("SetVideoRotateMode",s.makeParams(d))},GetCameraControlPropertySetting:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting"):c._innerWebcamSettingFunction("GetWebcamCameraControlSetting",s.makeParams(d))},GetCameraControlPropertyMoreSetting:function(d){var c=a;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting"):c._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",s.makeParams(d))},SetCameraControlPropertySetting:function(d,c,u){var h=a;return h._resetErr(),h._isMobileMode()?h._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting"):h._innerFun("SetWebcamCameraControlPropertySetting",s.makeParams(d,c,u))}}},a.__addon=a.__addon||{},e.mix(a.__addon,o)})}),T.AddonReady(function(e,r){var t;(e.product.bPluginEdition||e.product.bActiveXEdition)&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(s){var o,l;if(!s.getSWebTwain()||!s.getSWebTwain().Addon)return!1;if(T.navInfo.bWin){var d=navigator.userAgent.toLowerCase(),c=!T.navInfo.bOSx64||d.indexOf("wow64")>=0;t=c?"DynamicWebcam_"+T.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+T.WebcamVerForActiveX+".dll"}o=s.getSWebTwain();try{o.GetAddOnVersion("webcam",t)}catch(u){}(function(s){s._innerRead=function(o){var d;try{d=T.Lib.parse(o)}catch(c){}return d.result},s._innerWebcamValueFunctionPlugin=function(o){var d;return d=this._innerRead(o),this._innerSetWebcamValue(d)},s._innerWebcamSettingFunctionPlugin=function(o){var d;return d=this._innerRead(o),this._innerSetWebcamSetting(d)},s._innerWebcamMoreSettingFunctionPlugin=function(o){var d;return d=this._innerRead(o),this._innerSetWebcamMoreSetting(d)}})(s),l={Webcam:{IsModuleInstalled:function(){var u=o.GetAddOnVersion("webcam",t);return e.setErrorString(s),""!=u},Download:function(u,h,f){var g=function(){return T.Lib.isFunction(h)&&h(),!0},v=function(){return T.Lib.isFunction(f)&&f(s.ErrorCode,s.ErrorString),!1};if(!e.License.checkProductKey(s,{Webcam:!0},!0))return v();if(this.IsModuleInstalled())return g();if(!u||""==u)return T.Lib.Errors.Webcam_InvalidRemoteFilename(s),v();var p=o.DownloadAddon(u);return e.wrapperRet(s,p,g,v)},GetSourceList:function(){if(!e.License.checkProductKey(s,{Webcam:!0},!0))return[];var u=o.GetWebcamSourceList(),h=[];return e.setErrorString(s),0==s.ErrorCode&&(h=s._innerRead(u))&&h.length>1&&h.splice(h.length-1,1),h},SelectSource:function(u){if(!e.License.checkProductKey(s,{Webcam:!0},!0))return!1;var h=o.SelectWebcam(u);return e.setErrorString(s),h},CloseSource:function(){s._playVideoDWT=null;var u=o.StopCapture();return e.setErrorString(s),u},GetFramePartURL:function(){if(!this._isPlaying())return e.WebcamErrors.VideoNotPlayingWhenGetURL(s),"";var u=o.GetDIB(-1);return e.setErrorString(s),u},GetFrameURL:function(){return""},PlayVideo:function(u,h,f,g,v){var p=function(){return s._playVideoDWT=null,T.Lib.isFunction(v)&&v(s.ErrorCode,s.ErrorString),!1};if(!u||!u.getSWebTwain())return T.Lib.WebcamErrors.InvalidParameter(s),p();if(!e.License.checkProductKey(s,{Webcam:!0},!0))return p();var m=u.getSWebTwain().CurrentHWND;return m?(s._playVideoDWT=u,setTimeout(function(){var I=o.RunWebcamCmd("PlayVideo",m,null,null,f);e.wrapperRet(s,I,g,p)},0),!0):(e.WebcamErrors.InvalidParameter(s),p())},PauseVideo:function(){return!0},StopVideo:function(){s._playVideoDWT=null;var u=o.RunWebcamCmd("StopVideo",0,null,null,null);return e.setErrorString(s),o.StopCapture(),u},CaptureImage:function(u,h){var g=function(){return T.Lib.isFunction(h)&&h(s.ErrorCode,s.ErrorString),!1};if(!e.License.checkProductKey(s,{Webcam:!0},!0))return g();var v=o.RunWebcamCmd("Capture",0,function(){e.isFunction(u)&&setTimeout(u,0),e.License.isLTS()&&T.DWT.lcvrf(s)},g,null);return e.setErrorString(s),v},GetMediaType:function(){var u=s._innerWebcamValueFunctionPlugin(o.GetMediaType());return e.setErrorString(s),u},SetMediaType:function(u){if(!e.isString(u))return e.Errors.InvalidValue(s),!1;var h=o.SetMediaType(u);return e.setErrorString(s),h},GetResolution:function(){var u=s._innerWebcamValueFunctionPlugin(o.GetResolution());if(e.setErrorString(s),u&&u._resultlist){var h,f,m,g=u._resultlist,v=[],p=[];for(g.length>0&&(m=g[g.length-1]),h=0;h<g.length-1;h++){var I=(f=g[h]).toLowerCase().split("x");n({value:f,p1:parseInt(I[0]),p2:parseInt(I[1])},v)}for(h=0;h<v.length;h++)p.push(f=v[h].value);m&&p.push(m),u._resultlist=p,v=null,p=null}return u},SetResolution:function(u){if(!e.isNumber(u)&&!e.isString(u))return e.Errors.InvalidValue(s),!1;var h=o.SetResolution(u);return e.setErrorString(s),h},GetFrameRate:function(){var u=s._innerWebcamValueFunctionPlugin(o.GetFrameRate());return e.setErrorString(s),u},SetFrameRate:function(u){if(!e.isNumber(u))return e.Errors.InvalidValue(s),!1;var h=o.SetFrameRate(u);return e.setErrorString(s),h},GetVideoPropertySetting:function(u){var h=o.GetWebcamVideoPropertySetting(u);return e.setErrorString(s),s._innerWebcamSettingFunctionPlugin(h)},GetVideoPropertyMoreSetting:function(u){var h=o.GetWebcamVideoPropertyMoreSetting(u);return e.setErrorString(s),s._innerWebcamMoreSettingFunctionPlugin(h)},SetVideoPropertySetting:function(u,h,f){var g=o.SetWebcamVideoPropertySetting(u,h,f);return e.setErrorString(s),g},SetVideoRotateMode:function(u){var h=o.SetVideoRotateMode(u);return e.setErrorString(s),h},GetCameraControlPropertySetting:function(u){var h=o.GetWebcamCameraControlSetting(u);return e.setErrorString(s),s._innerWebcamSettingFunctionPlugin(h)},GetCameraControlPropertyMoreSetting:function(u){var h=o.GetWebcamCameraControlMoreSetting(u);return e.setErrorString(s),s._innerWebcamMoreSettingFunctionPlugin(h)},SetCameraControlPropertySetting:function(u,h,f){var g=o.SetWebcamCameraControlPropertySetting(u,h,f);return e.setErrorString(s),g},_isPlaying:function(){return!!s._playVideoDWT}}},s.Addon=s.Addon||{},e.mix(s.Addon,l)}));function n(s,o){for(var l=o.length-1;l>=0&&o[l].p1>=s.p1&&!(o[l].p1==s.p1&&o[l].p2<s.p2);)o[l+1]=o[l],l--;o[l+1]=s}}),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},T.CameraVerInName="17.2.0.1026",T.AddonReady(function(e,r){e.product.bHTML5Edition&&!T.navInfoSync.bIE&&function(t){var i={};function n(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(a,s,o){n.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:o})},n.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,s){if(1&s&&(a=n(a)),8&s||4&s&&"object"==typeof a&&a&&a.__esModule)return a;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),2&s&&"string"!=typeof a)for(var l in a)n.d(o,l,function(d){return a[d]}.bind(null,l));return o},n.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(s,"a",s),s},n.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},n.p="",n(n.s=558)}([function(t,i,n){t.exports=n(312)},function(t,i,n){var a=n(189);function s(o,l,d,c,u,h,f){try{var g=o[h](f),v=g.value}catch(p){return void d(p)}g.done?l(v):a.resolve(v).then(c,u)}t.exports=function(o){return function(){var l=this,d=arguments;return new a(function(c,u){var h=o.apply(l,d);function f(v){s(h,c,u,f,g,"next",v)}function g(v){s(h,c,u,f,g,"throw",v)}f(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){(function(a){var s=function(o){return o&&o.Math==Math&&o};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof Bt&&Bt)||s("object"==typeof a&&a)||function(){return this}()||Function("return this")()}).call(this,n(192))},function(t,i,n){(function(a){var s=function(o){return o&&o.Math==Math&&o};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof Bt&&Bt)||s("object"==typeof a&&a)||function(){return this}()||Function("return this")()}).call(this,n(192))},function(t,i,n){var a=n(3),s=n(78),o=n(5),l=n(15),d=n(92).f,c=n(195),u=n(16),h=n(44),f=n(45),g=n(22),v=function(p){var m=function(I,y,_){if(this instanceof m){switch(arguments.length){case 0:return new p;case 1:return new p(I);case 2:return new p(I,y)}return new p(I,y,_)}return s(p,this,arguments)};return m.prototype=p.prototype,m};t.exports=function(p,m){var I,y,_,C,A,M,E,R,x=p.target,P=p.global,F=p.stat,k=p.proto,w=P?a:F?a[x]:(a[x]||{}).prototype,S=P?u:u[x]||f(u,x,{})[x],L=S.prototype;for(_ in m)I=!c(P?_:x+(F?".":"#")+_,p.forced)&&w&&g(w,_),A=S[_],I&&(M=p.noTargetGet?(R=d(w,_))&&R.value:w[_]),C=I&&M?M:m[_],I&&typeof A==typeof C||(E=p.bind&&I?h(C,a):p.wrap&&I?v(C):k&&l(C)?o(C):C,(p.sham||C&&C.sham||A&&A.sham)&&f(E,"sham",!0),f(S,_,E),k&&(g(u,y=x+"Prototype")||f(u,y,{}),f(u[y],_,C),p.real&&L&&!L[_]&&f(L,_,C)))}},function(t,i){var n=Function.prototype,a=n.bind,s=n.call,o=a&&a.bind(s);t.exports=a?function(l){return l&&o(s,l)}:function(l){return l&&function(){return s.apply(l,arguments)}}},function(t,i,n){t.exports=n(384)},function(t,i){var n=Function.prototype,a=n.bind,s=n.call,o=a&&a.bind(s);t.exports=a?function(l){return l&&o(s,l)}:function(l){return l&&function(){return s.apply(l,arguments)}}},function(t,i,n){t.exports=n(190)},function(t,i,n){var a,s,o,l=n(257),d=n(34),c=n(2),u=n(17),h=n(29),f=n(30),g=n(85),v=n(103),p=n(49),m=n(41),I=n(38).f,y=n(83),_=n(141),C=n(84),A=n(21),M=n(169),E=c.Int8Array,R=E&&E.prototype,x=c.Uint8ClampedArray,P=x&&x.prototype,F=E&&_(E),k=R&&_(R),w=Object.prototype,S=c.TypeError,L=A("toStringTag"),U=M("TYPED_ARRAY_TAG"),Z=M("TYPED_ARRAY_CONSTRUCTOR"),ne=l&&!!C&&"Opera"!==g(c.opera),oe=!1,ue={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},X={BigInt64Array:8,BigUint64Array:8},pe=function(B){if(!h(B))return!1;var K=g(B);return f(ue,K)||f(X,K)};for(a in ue)(o=(s=c[a])&&s.prototype)?p(o,Z,s):ne=!1;for(a in X)(o=(s=c[a])&&s.prototype)&&p(o,Z,s);if((!ne||!u(F)||F===Function.prototype)&&(F=function(){throw S("Incorrect invocation")},ne))for(a in ue)c[a]&&C(c[a],F);if((!ne||!k||k===w)&&(k=F.prototype,ne))for(a in ue)c[a]&&C(c[a].prototype,k);if(ne&&_(P)!==k&&C(P,k),d&&!f(k,L))for(a in oe=!0,I(k,L,{get:function(){return h(this)?this[U]:void 0}}),ue)c[a]&&p(c[a],U,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:ne,TYPED_ARRAY_CONSTRUCTOR:Z,TYPED_ARRAY_TAG:oe&&U,aTypedArray:function(B){if(pe(B))return B;throw S("Target is not a typed array")},aTypedArrayConstructor:function(B){if(u(B)&&(!C||y(F,B)))return B;throw S(v(B)+" is not a typed array constructor")},exportTypedArrayMethod:function(B,K,G){if(d){if(G)for(var ee in ue){var ie=c[ee];if(ie&&f(ie.prototype,B))try{delete ie.prototype[B]}catch(be){}}k[B]&&!G||m(k,B,G?K:ne&&R[B]||K)}},exportTypedArrayStaticMethod:function(B,K,G){var ee,ie;if(d){if(C){if(G)for(ee in ue)if((ie=c[ee])&&f(ie,B))try{delete ie[B]}catch(be){}if(F[B]&&!G)return;try{return m(F,B,G?K:ne&&F[B]||K)}catch(be){}}for(ee in ue)!(ie=c[ee])||ie[B]&&!G||m(ie,B,K)}},isView:function(B){if(!h(B))return!1;var K=g(B);return"DataView"===K||f(ue,K)||f(X,K)},isTypedArray:pe,TypedArray:F,TypedArrayPrototype:k}},function(t,i){t.exports=function(n){try{return!!n()}catch(a){return!0}}},function(t,i){t.exports=function(n){try{return!!n()}catch(a){return!0}}},function(t,i,n){var a=n(3),s=n(154),o=n(22),l=n(120),d=n(152),c=n(193),u=s("wks"),h=a.Symbol,f=h&&h.for,g=c?h:h&&h.withoutSetter||l;t.exports=function(v){if(!o(u,v)||!d&&"string"!=typeof u[v]){var p="Symbol."+v;u[v]=d&&o(h,v)?h[v]:c&&f?f(p):g(p)}return u[v]}},function(t,i,n){t.exports=n(335)},function(t,i,n){t.exports=n(332)},function(t,i){t.exports=function(n){return"function"==typeof n}},function(t,i){t.exports={}},function(t,i){t.exports=function(n){return"function"==typeof n}},function(t,i,n){var a=n(16),s=n(22),o=n(145),l=n(33).f;t.exports=function(d){var c=a.Symbol||(a.Symbol={});s(c,d)||l(c,d,{value:o.f(d)})}},function(t,i,n){var a=n(15);t.exports=function(s){return"object"==typeof s?null!==s:a(s)}},function(t,i,n){var a=n(5);t.exports=a({}.isPrototypeOf)},function(t,i,n){var a=n(2),s=n(166),o=n(30),l=n(169),d=n(218),c=n(217),u=s("wks"),h=a.Symbol,f=h&&h.for,g=c?h:h&&h.withoutSetter||l;t.exports=function(v){if(!o(u,v)||!d&&"string"!=typeof u[v]){var p="Symbol."+v;u[v]=d&&o(h,v)?h[v]:c&&f?f(p):g(p)}return u[v]}},function(t,i,n){var a=n(5),s=n(37),o=a({}.hasOwnProperty);t.exports=Object.hasOwn||function(l,d){return o(s(l),d)}},function(t,i){var n=Function.prototype.call;t.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},function(t,i,n){var a=n(16);t.exports=function(s){return a[s+"Prototype"]}},function(t,i,n){var a=n(11);t.exports=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,i,n){var a=n(3),s=n(19),o=a.String,l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not an object")}},function(t,i){var n=Function.prototype.call;t.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},function(t,i,n){var a=n(2),s=n(29),o=a.String,l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not an object")}},function(t,i,n){var a=n(17);t.exports=function(s){return"object"==typeof s?null!==s:a(s)}},function(t,i,n){var a=n(7),s=n(59),o=a({}.hasOwnProperty);t.exports=Object.hasOwn||function(l,d){return o(s(l),d)}},function(t,i,n){t.exports=n(388)},function(t,i,n){var a=n(16),s=n(3),o=n(15),l=function(d){return o(d)?d:void 0};t.exports=function(d,c){return arguments.length<2?l(a[d])||l(s[d]):a[d]&&a[d][c]||s[d]&&s[d][c]}},function(t,i,n){var a=n(3),s=n(25),o=n(194),l=n(26),d=n(118),c=a.TypeError,u=Object.defineProperty;i.f=s?u:function(h,f,g){if(l(h),f=d(f),l(g),o)try{return u(h,f,g)}catch(v){}if("get"in g||"set"in g)throw c("Accessors not supported");return"value"in g&&(h[f]=g.value),h}},function(t,i,n){var a=n(10);t.exports=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,i,n){var a,I,s=(I={},function(y){if(void 0===I[y]){var _=document.querySelector(y);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch(C){_=null}I[y]=_}return I[y]}),o=[];function l(I){for(var y=-1,_=0;_<o.length;_++)if(o[_].identifier===I){y=_;break}return y}function d(I,y){for(var _={},C=[],A=0;A<I.length;A++){var M=I[A],E=y.base?M[0]+y.base:M[0],R=_[E]||0,x="".concat(E," ").concat(R);_[E]=R+1;var P=l(x),F={css:M[1],media:M[2],sourceMap:M[3]};-1!==P?(o[P].references++,o[P].updater(F)):o.push({identifier:x,updater:m(F,y),references:1}),C.push(x)}return C}function c(I){var y=document.createElement("style"),_=I.attributes||{};if(void 0===_.nonce){var C=n.nc;C&&(_.nonce=C)}if(Object.keys(_).forEach(function(M){y.setAttribute(M,_[M])}),"function"==typeof I.insert)I.insert(y);else{var A=s(I.insert||"head");if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(y)}return y}var u,h=(u=[],function(I,y){return u[I]=y,u.filter(Boolean).join("\n")});function f(I,y,_,C){var A=_?"":C.media?"@media ".concat(C.media," {").concat(C.css,"}"):C.css;if(I.styleSheet)I.styleSheet.cssText=h(y,A);else{var M=document.createTextNode(A),E=I.childNodes;E[y]&&I.removeChild(E[y]),E.length?I.insertBefore(M,E[y]):I.appendChild(M)}}function g(I,y,_){var C=_.css,A=_.media,M=_.sourceMap;if(A?I.setAttribute("media",A):I.removeAttribute("media"),M&&"undefined"!=typeof btoa&&(C+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(M))))," */")),I.styleSheet)I.styleSheet.cssText=C;else{for(;I.firstChild;)I.removeChild(I.firstChild);I.appendChild(document.createTextNode(C))}}var v=null,p=0;function m(I,y){var _,C,A;if(y.singleton){var M=p++;_=v||(v=c(y)),C=f.bind(null,_,M,!1),A=f.bind(null,_,M,!0)}else _=c(y),C=g.bind(null,_,y),A=function(){!function(E){if(null===E.parentNode)return!1;E.parentNode.removeChild(E)}(_)};return C(I),function(E){if(E){if(E.css===I.css&&E.media===I.media&&E.sourceMap===I.sourceMap)return;C(I=E)}else A()}}t.exports=function(I,y){(y=y||{}).singleton||"boolean"==typeof y.singleton||(y.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var _=d(I=I||[],y);return function(C){if(C=C||[],"[object Array]"===Object.prototype.toString.call(C)){for(var A=0;A<_.length;A++){var M=l(_[A]);o[M].references--}for(var E=d(C,y),R=0;R<_.length;R++){var x=l(_[R]);0===o[x].references&&(o[x].updater(),o.splice(x,1))}_=E}}}},function(t,i,n){t.exports=function(a){var s=[];return s.toString=function(){return this.map(function(o){var l=a(o);return o[2]?"@media ".concat(o[2]," {").concat(l,"}"):l}).join("")},s.i=function(o,l,d){"string"==typeof o&&(o=[[null,o,""]]);var c={};if(d)for(var u=0;u<this.length;u++){var h=this[u][0];null!=h&&(c[h]=!0)}for(var f=0;f<o.length;f++){var g=[].concat(o[f]);d&&c[g[0]]||(l&&(g[2]=g[2]?"".concat(l," and ").concat(g[2]):l),s.push(g))}},s}},function(t,i,n){var a=n(3),s=n(93),o=a.Object;t.exports=function(l){return o(s(l))}},function(t,i,n){var a=n(2),s=n(34),o=n(219),l=n(28),d=n(164),c=a.TypeError,u=Object.defineProperty;i.f=s?u:function(h,f,g){if(l(h),f=d(f),l(g),o)try{return u(h,f,g)}catch(v){}if("get"in g||"set"in g)throw c("Accessors not supported");return"value"in g&&(h[f]=g.value),h}},function(t,i,n){t.exports=n(379)},function(t,i,n){var a,s,o,l=n(203),d=n(3),c=n(5),u=n(19),h=n(45),f=n(22),g=n(155),v=n(121),p=n(96),m="Object already initialized",I=d.TypeError;if(l||g.state){var _=g.state||(g.state=new(0,d.WeakMap)),C=c(_.get),A=c(_.has),M=c(_.set);a=function(R,x){if(A(_,R))throw new I(m);return x.facade=R,M(_,R,x),x},s=function(R){return C(_,R)||{}},o=function(R){return A(_,R)}}else{var E=v("state");p[E]=!0,a=function(R,x){if(f(R,E))throw new I(m);return x.facade=R,h(R,E,x),x},s=function(R){return f(R,E)?R[E]:{}},o=function(R){return f(R,E)}}t.exports={set:a,get:s,has:o,enforce:function(R){return o(R)?s(R):a(R,{})},getterFor:function(R){return function(x){var P;if(!u(x)||(P=s(x)).type!==R)throw I("Incompatible receiver, "+R+" required");return P}}}},function(t,i,n){var a=n(2),s=n(17),o=n(30),l=n(49),d=n(168),c=n(136),u=n(72),h=n(105).CONFIGURABLE,f=u.get,g=u.enforce,v=String(String).split("String");(t.exports=function(p,m,I,y){var _,C=!!y&&!!y.unsafe,A=!!y&&!!y.enumerable,M=!!y&&!!y.noTargetGet,E=y&&void 0!==y.name?y.name:m;s(I)&&("Symbol("===String(E).slice(0,7)&&(E="["+String(E).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(I,"name")||h&&I.name!==E)&&l(I,"name",E),(_=g(I)).source||(_.source=v.join("string"==typeof E?E:""))),p!==a?(C?!M&&p[m]&&(A=!0):delete p[m],A?p[m]=I:l(p,m,I)):A?p[m]=I:d(m,I)})(Function.prototype,"toString",function(){return s(this)&&f(this).source||c(this)})},function(t,i,n){var a=n(44),s=n(5),o=n(117),l=n(37),d=n(46),c=n(175),u=s([].push),h=function(f){var g=1==f,v=2==f,p=3==f,m=4==f,I=6==f,y=7==f,_=5==f||I;return function(C,A,M,E){for(var R,x,P=l(C),F=o(P),k=a(A,M),w=d(F),S=0,L=E||c,U=g?L(C,w):v||y?L(C,0):void 0;w>S;S++)if((_||S in F)&&(x=k(R=F[S],S,P),f))if(g)U[S]=x;else if(x)switch(f){case 3:return!0;case 5:return R;case 6:return S;case 2:u(U,R)}else switch(f){case 4:return!1;case 7:u(U,R)}return I?-1:p||m?m:U}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},function(t,i,n){var a=n(3),s=n(15),o=n(119),l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not a function")}},function(t,i,n){var a=n(5),s=n(43),o=a(a.bind);t.exports=function(l,d){return s(l),void 0===d?l:o?o(l,d):function(){return l.apply(d,arguments)}}},function(t,i,n){var a=n(25),s=n(33),o=n(53);t.exports=a?function(l,d,c){return s.f(l,d,o(1,c))}:function(l,d,c){return l[d]=c,l}},function(t,i,n){var a=n(198);t.exports=function(s){return a(s.length)}},function(t,i,n){var a=n(5);t.exports=a([].slice)},function(t,i,n){var a=n(3),s=n(65),o=a.String;t.exports=function(l){if("Symbol"===s(l))throw TypeError("Cannot convert a Symbol value to a string");return o(l)}},function(t,i,n){var a=n(34),s=n(38),o=n(131);t.exports=a?function(l,d,c){return s.f(l,d,o(1,c))}:function(l,d,c){return l[d]=c,l}},function(t,i,n){var a=n(74);t.exports=function(s){return a(s.length)}},function(t,i,n){t.exports=n(393)},function(t,i,n){t.exports=n(397)},function(t,i){t.exports=function(n,a){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:a}}},function(t,i,n){var a=n(117),s=n(93);t.exports=function(o){return a(s(o))}},function(t,i){t.exports=!0},function(t,i,n){var a=n(45);t.exports=function(s,o,l,d){d&&d.enumerable?s[o]=l:a(s,o,l)}},function(t,i,n){var a=n(161),s=n(33).f,o=n(45),l=n(22),d=n(291),c=n(12)("toStringTag");t.exports=function(u,h,f,g){if(u){var v=f?u:u.prototype;l(v,c)||s(v,c,{configurable:!0,value:h}),g&&!a&&o(v,"toString",d)}}},function(t,i,n){var a=n(2),s=n(17),o=function(l){return s(l)?l:void 0};t.exports=function(l,d){return arguments.length<2?o(a[l]):a[l]&&a[l][d]}},function(t,i,n){var a=n(2),s=n(102),o=a.Object;t.exports=function(l){return o(s(l))}},function(t,i,n){var a=n(112),s=n(7),o=n(132),l=n(59),d=n(50),c=n(499),u=s([].push),h=function(f){var g=1==f,v=2==f,p=3==f,m=4==f,I=6==f,y=7==f,_=5==f||I;return function(C,A,M,E){for(var R,x,P=l(C),F=o(P),k=a(A,M),w=d(F),S=0,L=E||c,U=g?L(C,w):v||y?L(C,0):void 0;w>S;S++)if((_||S in F)&&(x=k(R=F[S],S,P),f))if(g)U[S]=x;else if(x)switch(f){case 3:return!0;case 5:return R;case 6:return S;case 2:u(U,R)}else switch(f){case 4:return!1;case 7:u(U,R)}return I?-1:p||m?m:U}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},function(t,i,n){t.exports=n(244)},function(t,i,n){var a=n(5),s=a({}.toString),o=a("".slice);t.exports=function(l){return o(s(l),8,-1)}},function(t,i,n){var a,s=n(26),o=n(199),l=n(158),d=n(96),c=n(200),u=n(156),h=n(121)("IE_PROTO"),f=function(){},g=function(m){return"<script>"+m+"<\/script>"},v=function(m){m.write(g("")),m.close();var I=m.parentWindow.Object;return m=null,I},p=function(){try{a=new ActiveXObject("htmlfile")}catch(_){}var m,I;p="undefined"!=typeof document?document.domain&&a?v(a):((I=u("iframe")).style.display="none",c.appendChild(I),I.src=String("javascript:"),(m=I.contentWindow.document).open(),m.write(g("document.F=Object")),m.close(),m.F):v(a);for(var y=l.length;y--;)delete p.prototype[l[y]];return p()};d[h]=!0,t.exports=Object.create||function(m,I){var y;return null!==m?(f.prototype=s(m),y=new f,f.prototype=null,y[h]=m):y=p(),void 0===I?y:o(y,I)}},function(t,i,n){var a=n(3),s=n(44),o=n(23),l=n(26),d=n(119),c=n(201),u=n(46),h=n(20),f=n(160),g=n(97),v=n(202),p=a.TypeError,m=function(y,_){this.stopped=y,this.result=_},I=m.prototype;t.exports=function(y,_,C){var A,M,E,R,x,P,F,w=!(!C||!C.AS_ENTRIES),S=!(!C||!C.IS_ITERATOR),L=!(!C||!C.INTERRUPTED),U=s(_,C&&C.that),Z=function(oe){return A&&v(A,"normal",oe),new m(!0,oe)},ne=function(oe){return w?(l(oe),L?U(oe[0],oe[1],Z):U(oe[0],oe[1])):L?U(oe,Z):U(oe)};if(S)A=y;else{if(!(M=g(y)))throw p(d(y)+" is not iterable");if(c(M)){for(E=0,R=u(y);R>E;E++)if((x=ne(y[E]))&&h(I,x))return x;return new m(!1)}A=f(y,M)}for(P=A.next;!(F=o(P,A)).done;){try{x=ne(F.value)}catch(oe){v(A,"throw",oe)}if("object"==typeof x&&x&&h(I,x))return x}return new m(!1)}},function(t,i,n){var a=n(3),s=n(161),o=n(15),l=n(62),d=n(12)("toStringTag"),c=a.Object,u="Arguments"==l(function(){return arguments}());t.exports=s?l:function(h){var f,g,v;return void 0===h?"Undefined":null===h?"Null":"string"==typeof(g=function(p,m){try{return p[m]}catch(I){}}(f=c(h),d))?g:u?l(f):"Object"==(v=l(f))&&o(f.callee)?"Arguments":v}},function(t,i,n){var a=n(54),s=n(127),o=n(79),l=n(40),d=n(163),c="Array Iterator",u=l.set,h=l.getterFor(c);t.exports=d(Array,"Array",function(f,g){u(this,{type:c,target:a(f),index:0,kind:g})},function(){var f=h(this),g=f.target,v=f.kind,p=f.index++;return!g||p>=g.length?(f.target=void 0,{value:void 0,done:!0}):"keys"==v?{value:p,done:!1}:"values"==v?{value:g[p],done:!1}:{value:[p,g[p]],done:!1}},"values"),o.Arguments=o.Array,s("keys"),s("values"),s("entries")},function(t,i,n){n(66);var a=n(300),s=n(3),o=n(65),l=n(45),d=n(79),c=n(12)("toStringTag");for(var u in a){var h=s[u],f=h&&h.prototype;f&&o(f)!==c&&l(f,c,u),d[u]=d.Array}},function(t,i,n){var a=n(2),s=n(101).f,o=n(49),l=n(41),d=n(168),c=n(309),u=n(174);t.exports=function(h,f){var g,v,p,m,I,y=h.target,_=h.global,C=h.stat;if(g=_?a:C?a[y]||d(y,{}):(a[y]||{}).prototype)for(v in f){if(m=f[v],p=h.noTargetGet?(I=s(g,v))&&I.value:g[v],!u(_?v:y+(C?".":"#")+v,h.forced)&&void 0!==p){if(typeof m==typeof p)continue;c(m,p)}(h.sham||p&&p.sham)&&o(m,"sham",!0),l(g,v,m,h)}}},function(t,i,n){var a=n(132),s=n(102);t.exports=function(o){return a(s(o))}},function(t,i,n){var a=n(58);t.exports=a("navigator","userAgent")||""},function(t,i,n){var a=n(2),s=n(17),o=n(103),l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not a function")}},function(t,i,n){var a,s,o,l=n(308),d=n(2),c=n(7),u=n(29),h=n(49),f=n(30),g=n(167),v=n(170),p=n(171),m="Object already initialized",I=d.TypeError;if(l||g.state){var _=g.state||(g.state=new(0,d.WeakMap)),C=c(_.get),A=c(_.has),M=c(_.set);a=function(R,x){if(A(_,R))throw new I(m);return x.facade=R,M(_,R,x),x},s=function(R){return C(_,R)||{}},o=function(R){return A(_,R)}}else{var E=v("state");p[E]=!0,a=function(R,x){if(f(R,E))throw new I(m);return x.facade=R,h(R,E,x),x},s=function(R){return f(R,E)?R[E]:{}},o=function(R){return f(R,E)}}t.exports={set:a,get:s,has:o,enforce:function(R){return o(R)?s(R):a(R,{})},getterFor:function(R){return function(x){var P;if(!u(x)||(P=s(x)).type!==R)throw I("Incompatible receiver, "+R+" required");return P}}}},function(t,i){var n=Math.ceil,a=Math.floor;t.exports=function(s){var o=+s;return o!=o||0===o?0:(o>0?a:n)(o)}},function(t,i,n){var a=n(73),s=Math.min;t.exports=function(o){return o>0?s(a(o),9007199254740991):0}},function(t,i,n){var a=n(176),s=n(41),o=n(346);a||s(Object.prototype,"toString",o,{unsafe:!0})},function(t,i,n){t.exports=n(329)},function(t,i,n){t.exports=n(450)},function(t,i){var n=Function.prototype,a=n.apply,o=n.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n.bind?o.bind(a):function(){return o.apply(a,arguments)})},function(t,i){t.exports={}},function(t,i,n){var a=n(3),s=n(20),o=a.TypeError;t.exports=function(l,d){if(s(d,l))return l;throw o("Incorrect invocation")}},function(t,i,n){var a=n(215).charAt,s=n(48),o=n(40),l=n(163),d="String Iterator",c=o.set,u=o.getterFor(d);l(String,"String",function(h){c(this,{type:d,string:s(h),index:0})},function(){var h,f=u(this),g=f.string,v=f.index;return v>=g.length?{value:void 0,done:!0}:(h=a(g,v),f.index+=h.length,{value:h,done:!1})})},function(t,i,n){var a=n(7),s=a({}.toString),o=a("".slice);t.exports=function(l){return o(s(l),8,-1)}},function(t,i,n){var a=n(7);t.exports=a({}.isPrototypeOf)},function(t,i,n){var a=n(7),s=n(28),o=n(345);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,d=!1,c={};try{(l=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(c,[]),d=c instanceof Array}catch(u){}return function(u,h){return s(u),o(h),d?l(u,h):u.__proto__=h,u}}():void 0)},function(t,i,n){var a=n(2),s=n(176),o=n(17),l=n(82),d=n(21)("toStringTag"),c=a.Object,u="Arguments"==l(function(){return arguments}());t.exports=s?l:function(h){var f,g,v;return void 0===h?"Undefined":null===h?"Null":"string"==typeof(g=function(p,m){try{return p[m]}catch(I){}}(f=c(h),d))?g:u?l(f):"Object"==(v=l(f))&&o(f.callee)?"Arguments":v}},function(t,i,n){var a=n(7);t.exports=a([].slice)},function(t,i,n){var a=n(363),s=n(368);t.exports=function(o,l){o.prototype=a(l.prototype),o.prototype.constructor=o,s(o,l)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){t.exports=n(374)},function(t,i,n){t.exports=n(435)},function(t,i,n){t.exports=n(359)},function(t,i,n){t.exports=n(410)},function(t,i,n){var a=n(25),s=n(23),o=n(150),l=n(53),d=n(54),c=n(118),u=n(22),h=n(194),f=Object.getOwnPropertyDescriptor;i.f=a?f:function(g,v){if(g=d(g),v=c(v),h)try{return f(g,v)}catch(p){}if(u(g,v))return l(!s(o.f,g,v),g[v])}},function(t,i,n){var a=n(3).TypeError;t.exports=function(s){if(null==s)throw a("Can't call method on "+s);return s}},function(t,i,n){var a,s,o=n(3),l=n(95),d=o.process,c=o.Deno,u=d&&d.versions||c&&c.version,h=u&&u.v8;h&&(s=(a=h.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!s&&l&&(!(a=l.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=l.match(/Chrome\/(\d+)/))&&(s=+a[1]),t.exports=s},function(t,i,n){var a=n(32);t.exports=a("navigator","userAgent")||""},function(t,i){t.exports={}},function(t,i,n){var a=n(65),s=n(153),o=n(79),l=n(12)("iterator");t.exports=function(d){if(null!=d)return s(d,l)||s(d,"@@iterator")||o[a(d)]}},function(t,i){},function(t,i,n){var a=n(56);t.exports=function(s,o,l){for(var d in o)l&&l.unsafe&&s[d]?s[d]=o[d]:a(s,d,o[d],l);return s}},function(t,i,n){var a=n(43),s=function(o){var l,d;this.promise=new o(function(c,u){if(void 0!==l||void 0!==d)throw TypeError("Bad Promise constructor");l=c,d=u}),this.resolve=a(l),this.reject=a(d)};t.exports.f=function(o){return new s(o)}},function(t,i,n){var a=n(34),s=n(27),o=n(306),l=n(131),d=n(69),c=n(164),u=n(30),h=n(219),f=Object.getOwnPropertyDescriptor;i.f=a?f:function(g,v){if(g=d(g),v=c(v),h)try{return f(g,v)}catch(p){}if(u(g,v))return l(!s(o.f,g,v),g[v])}},function(t,i,n){var a=n(2).TypeError;t.exports=function(s){if(null==s)throw a("Can't call method on "+s);return s}},function(t,i,n){var a=n(2).String;t.exports=function(s){try{return a(s)}catch(o){return"Object"}}},function(t,i){t.exports=!1},function(t,i,n){var a=n(34),s=n(30),o=Function.prototype,l=a&&Object.getOwnPropertyDescriptor,d=s(o,"name"),c=d&&"something"===function(){}.name,u=d&&(!a||a&&l(o,"name").configurable);t.exports={EXISTS:d,PROPER:c,CONFIGURABLE:u}},function(t,i,n){var a=n(73),s=Math.max,o=Math.min;t.exports=function(l,d){var c=a(l);return c<0?s(c+d,0):o(c,d)}},function(t,i,n){var a=n(62);t.exports=Array.isArray||function(s){return"Array"==a(s)}},function(t,i,n){var a=n(11),s=n(12),o=n(94),l=s("species");t.exports=function(d){return o>=51||!a(function(){var c=[];return(c.constructor={})[l]=function(){return{foo:1}},1!==c[d](Boolean).foo})}},function(t,i,n){var a=n(11);t.exports=function(s,o){var l=[][s];return!!l&&a(function(){l.call(null,o||function(){throw 1},1)})}},function(t,i,n){var a,s=n(28),o=n(341),l=n(173),d=n(171),c=n(227),u=n(135),h=n(170)("IE_PROTO"),f=function(){},g=function(m){return"<script>"+m+"<\/script>"},v=function(m){m.write(g("")),m.close();var I=m.parentWindow.Object;return m=null,I},p=function(){try{a=new ActiveXObject("htmlfile")}catch(_){}var m,I;p="undefined"!=typeof document?document.domain&&a?v(a):((I=u("iframe")).style.display="none",c.appendChild(I),I.src=String("javascript:"),(m=I.contentWindow.document).open(),m.write(g("document.F=Object")),m.close(),m.F):v(a);for(var y=l.length;y--;)delete p.prototype[l[y]];return p()};d[h]=!0,t.exports=Object.create||function(m,I){var y;return null!==m?(f.prototype=s(m),y=new f,f.prototype=null,y[h]=m):y=p(),void 0===I?y:o(y,I)}},function(t,i){t.exports={}},function(t,i,n){var a=n(7),s=n(71),o=a(a.bind);t.exports=function(l,d){return s(l),void 0===d?l:o?o(l,d):function(){return l.apply(d,arguments)}}},function(t,i,n){var a=n(28),s=n(236),o=n(21)("species");t.exports=function(l,d){var c,u=a(l).constructor;return void 0===u||null==(c=a(u)[o])?d:s(c)}},function(t,i){var n=Function.prototype,a=n.apply,o=n.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n.bind?o.bind(a):function(){return o.apply(a,arguments)})},function(t,i,n){var a=n(2),s=n(85),o=a.String;t.exports=function(l){if("Symbol"===s(l))throw TypeError("Cannot convert a Symbol value to a string");return o(l)}},function(t,i,n){t.exports=n(320)},function(t,i,n){var a=n(3),s=n(5),o=n(11),l=n(62),d=a.Object,c=s("".split);t.exports=o(function(){return!d("z").propertyIsEnumerable(0)})?function(u){return"String"==l(u)?c(u,""):d(u)}:d},function(t,i,n){var a=n(279),s=n(151);t.exports=function(o){var l=a(o,"string");return s(l)?l:l+""}},function(t,i,n){var a=n(3).String;t.exports=function(s){try{return a(s)}catch(o){return"Object"}}},function(t,i,n){var a=n(5),s=0,o=Math.random(),l=a(1..toString);t.exports=function(d){return"Symbol("+(void 0===d?"":d)+")_"+l(++s+o,36)}},function(t,i,n){var a=n(154),s=n(120),o=a("keys");t.exports=function(l){return o[l]||(o[l]=s(l))}},function(t,i,n){var a=n(5),s=n(26),o=n(283);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,d=!1,c={};try{(l=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(c,[]),d=c instanceof Array}catch(u){}return function(u,h){return s(u),o(h),d?l(u,h):u.__proto__=h,u}}():void 0)},function(t,i,n){var a=n(196),s=n(158).concat("length","prototype");i.f=Object.getOwnPropertyNames||function(o){return a(o,s)}},function(t,i,n){var a=n(125),s=Math.max,o=Math.min;t.exports=function(l,d){var c=a(l);return c<0?s(c+d,0):o(c,d)}},function(t,i){var n=Math.ceil,a=Math.floor;t.exports=function(s){var o=+s;return o!=o||0===o?0:(o>0?a:n)(o)}},function(t,i,n){var a=n(196),s=n(158);t.exports=Object.keys||function(o){return a(o,s)}},function(t,i){t.exports=function(){}},function(t,i,n){var a=n(5),s=n(11),o=n(15),l=n(65),d=n(32),c=n(162),u=function(){},h=[],f=d("Reflect","construct"),g=/^\s*(?:class|function)\b/,v=a(g.exec),p=!g.exec(u),m=function(I){if(!o(I))return!1;try{return f(u,h,I),!0}catch(y){return!1}};t.exports=!f||s(function(){var I;return m(m.call)||!m(Object)||!m(function(){I=!0})||I})?function(I){if(!o(I))return!1;switch(l(I)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return p||!!v(g,c(I))}:m},function(t,i,n){var a=n(62),s=n(3);t.exports="process"==a(s.process)},function(t,i){t.exports=function(n){try{return{error:!1,value:n()}}catch(a){return{error:!0,value:a}}}},function(t,i){t.exports=function(n,a){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:a}}},function(t,i,n){var a=n(2),s=n(7),o=n(10),l=n(82),d=a.Object,c=s("".split);t.exports=o(function(){return!d("z").propertyIsEnumerable(0)})?function(u){return"String"==l(u)?c(u,""):d(u)}:d},function(t,i,n){var a=n(2),s=n(58),o=n(17),l=n(83),d=n(217),c=a.Object;t.exports=d?function(u){return"symbol"==typeof u}:function(u){var h=s("Symbol");return o(h)&&l(h.prototype,c(u))}},function(t,i,n){var a=n(71);t.exports=function(s,o){var l=s[o];return null==l?void 0:a(l)}},function(t,i,n){var a=n(2),s=n(29),o=a.document,l=s(o)&&s(o.createElement);t.exports=function(d){return l?o.createElement(d):{}}},function(t,i,n){var a=n(7),s=n(17),o=n(167),l=a(Function.toString);s(o.inspectSource)||(o.inspectSource=function(d){return l(d)}),t.exports=o.inspectSource},function(t,i,n){var a=n(220),s=n(173).concat("length","prototype");i.f=Object.getOwnPropertyNames||function(o){return a(o,s)}},function(t,i,n){var a=n(4),s=n(5),o=n(96),l=n(19),d=n(22),c=n(33).f,u=n(123),h=n(223),f=n(224),g=n(120),v=n(317),p=!1,m=g("meta"),I=0,y=function(C){c(C,m,{value:{objectID:"O"+I++,weakData:{}}})},_=t.exports={enable:function(){_.enable=function(){},p=!0;var C=u.f,A=s([].splice),M={};M[m]=1,C(M).length&&(u.f=function(E){for(var R=C(E),x=0,P=R.length;x<P;x++)if(R[x]===m){A(R,x,1);break}return R},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},fastKey:function(C,A){if(!l(C))return"symbol"==typeof C?C:("string"==typeof C?"S":"P")+C;if(!d(C,m)){if(!f(C))return"F";if(!A)return"E";y(C)}return C[m].objectID},getWeakData:function(C,A){if(!d(C,m)){if(!f(C))return!0;if(!A)return!1;y(C)}return C[m].weakData},onFreeze:function(C){return v&&p&&f(C)&&!d(C,m)&&y(C),C}};o[m]=!0},function(t,i,n){var a=n(118),s=n(33),o=n(53);t.exports=function(l,d,c){var u=a(d);u in l?s.f(l,u,o(0,c)):l[u]=c}},function(t,i,n){var a=n(69),s=n(340),o=n(111),l=n(72),d=n(228),c="Array Iterator",u=l.set,h=l.getterFor(c);t.exports=d(Array,"Array",function(f,g){u(this,{type:c,target:a(f),index:0,kind:g})},function(){var f=h(this),g=f.target,v=f.kind,p=f.index++;return!g||p>=g.length?(f.target=void 0,{value:void 0,done:!0}):"keys"==v?{value:p,done:!1}:"values"==v?{value:g[p],done:!1}:{value:[p,g[p]],done:!1}},"values"),o.Arguments=o.Array,s("keys"),s("values"),s("entries")},function(t,i,n){var a=n(2),s=n(30),o=n(17),l=n(59),d=n(170),c=n(344),u=d("IE_PROTO"),h=a.Object,f=h.prototype;t.exports=c?h.getPrototypeOf:function(g){var v=l(g);if(s(v,u))return v[u];var p=v.constructor;return o(p)&&v instanceof p?p.prototype:v instanceof h?f:null}},function(t,i,n){var a=n(38).f,s=n(30),o=n(21)("toStringTag");t.exports=function(l,d,c){l&&!s(l=c?l:l.prototype,o)&&a(l,o,{configurable:!0,value:d})}},function(t,i,n){var a,s,o=n(27),l=n(7),d=n(115),c=n(402),u=n(246),h=n(166),f=n(110),g=n(72).get,v=n(403),p=n(404),m=h("native-string-replace",String.prototype.replace),I=RegExp.prototype.exec,y=I,_=l("".charAt),C=l("".indexOf),A=l("".replace),M=l("".slice),E=(s=/b*/g,o(I,a=/a/,"a"),o(I,s,"a"),0!==a.lastIndex||0!==s.lastIndex),R=u.UNSUPPORTED_Y||u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(E||x||R||v||p)&&(y=function(P){var F,k,w,S,L,U,Z,ne=this,oe=g(ne),ue=d(P),X=oe.raw;if(X)return X.lastIndex=ne.lastIndex,F=o(y,X,ue),ne.lastIndex=X.lastIndex,F;var pe=oe.groups,B=R&&ne.sticky,K=o(c,ne),G=ne.source,ee=0,ie=ue;if(B&&(K=A(K,"y",""),-1===C(K,"g")&&(K+="g"),ie=M(ue,ne.lastIndex),ne.lastIndex>0&&(!ne.multiline||ne.multiline&&"\n"!==_(ue,ne.lastIndex-1))&&(G="(?: "+G+")",ie=" "+ie,ee++),k=new RegExp("^(?:"+G+")",K)),x&&(k=new RegExp("^"+G+"$(?!\\s)",K)),E&&(w=ne.lastIndex),S=o(I,B?k:ne,ie),B?S?(S.input=M(S.input,ee),S[0]=M(S[0],ee),S.index=ne.lastIndex,ne.lastIndex+=S[0].length):ne.lastIndex=0:E&&S&&(ne.lastIndex=ne.global?S.index+S[0].length:w),x&&S&&S.length>1&&o(m,S[0],k,function(){for(L=1;L<arguments.length-2;L++)void 0===arguments[L]&&(S[L]=void 0)}),S&&pe)for(S.groups=U=f(null),L=0;L<pe.length;L++)U[(Z=pe[L])[0]]=S[Z[1]];return S}),t.exports=y},function(t,i,n){var a=n(34),s=n(105).EXISTS,o=n(7),l=n(38).f,d=Function.prototype,c=o(d.toString),u=/^\s*function ([^ (]*)/,h=o(u.exec);a&&!s&&l(d,"name",{configurable:!0,get:function(){try{return h(u,c(this))[1]}catch(f){return""}}})},function(t,i,n){var a=n(12);i.f=a},function(t,i,n){var a=n(9),s=n(113),o=a.TYPED_ARRAY_CONSTRUCTOR,l=a.aTypedArrayConstructor;t.exports=function(d){return l(s(d,d[o]))}},function(t,i,n){t.exports=n(413)},function(t,i,n){t.exports=n(247)},function(t,i,n){t.exports=n(313)},function(t,i,n){var a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!a.call({1:2},1);i.f=o?function(l){var d=s(this,l);return!!d&&d.enumerable}:a},function(t,i,n){var a=n(3),s=n(32),o=n(15),l=n(20),d=n(193),c=a.Object;t.exports=d?function(u){return"symbol"==typeof u}:function(u){var h=s("Symbol");return o(h)&&l(h.prototype,c(u))}},function(t,i,n){var a=n(94),s=n(11);t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&a&&a<41})},function(t,i,n){var a=n(43);t.exports=function(s,o){var l=s[o];return null==l?void 0:a(l)}},function(t,i,n){var a=n(55),s=n(155);(t.exports=function(o,l){return s[o]||(s[o]=void 0!==l?l:{})})("versions",[]).push({version:"3.19.1",mode:a?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},function(t,i,n){var a=n(3),s=n(281),o="__core-js_shared__",l=a[o]||s(o,{});t.exports=l},function(t,i,n){var a=n(3),s=n(19),o=a.document,l=s(o)&&s(o.createElement);t.exports=function(d){return l?o.createElement(d):{}}},function(t,i,n){var a=n(3),s=n(22),o=n(15),l=n(37),d=n(121),c=n(282),u=d("IE_PROTO"),h=a.Object,f=h.prototype;t.exports=c?h.getPrototypeOf:function(g){var v=l(g);if(s(v,u))return v[u];var p=v.constructor;return o(p)&&v instanceof p?p.prototype:v instanceof h?f:null}},function(t,i){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,i){i.f=Object.getOwnPropertySymbols},function(t,i,n){var a=n(3),s=n(23),o=n(43),l=n(26),d=n(119),c=n(97),u=a.TypeError;t.exports=function(h,f){var g=arguments.length<2?c(h):f;if(o(g))return l(s(g,h));throw u(d(h)+" is not iterable")}},function(t,i,n){var a={};a[n(12)("toStringTag")]="z",t.exports="[object z]"===String(a)},function(t,i,n){var a=n(5),s=n(15),o=n(155),l=a(Function.toString);s(o.inspectSource)||(o.inspectSource=function(d){return l(d)}),t.exports=o.inspectSource},function(t,i,n){var a=n(4),s=n(23),o=n(55),l=n(290),d=n(15),c=n(204),u=n(157),h=n(122),f=n(57),g=n(45),v=n(56),p=n(12),m=n(79),I=n(205),y=l.PROPER,_=l.CONFIGURABLE,C=I.IteratorPrototype,A=I.BUGGY_SAFARI_ITERATORS,M=p("iterator"),E="keys",R="values",x="entries",P=function(){return this};t.exports=function(F,k,w,S,L,U,Z){c(w,k,S);var ne,oe,ue,X=function(be){if(be===L&&ee)return ee;if(!A&&be in K)return K[be];switch(be){case E:case R:case x:return function(){return new w(this,be)}}return function(){return new w(this)}},pe=k+" Iterator",B=!1,K=F.prototype,G=K[M]||K["@@iterator"]||L&&K[L],ee=!A&&G||X(L),ie="Array"==k&&K.entries||G;if(ie&&(ne=u(ie.call(new F)))!==Object.prototype&&ne.next&&(o||u(ne)===C||(h?h(ne,C):d(ne[M])||v(ne,M,P)),f(ne,pe,!0,!0),o&&(m[pe]=P)),y&&L==R&&G&&G.name!==R&&(!o&&_?g(K,"name",R):(B=!0,ee=function(){return s(G,this)})),L)if(oe={values:X(R),keys:U?ee:X(E),entries:X(x)},Z)for(ue in oe)(A||B||!(ue in K))&&v(K,ue,oe[ue]);else a({target:k,proto:!0,forced:A||B},oe);return o&&!Z||K[M]===ee||v(K,M,ee,{name:L}),m[k]=ee,oe}},function(t,i,n){var a=n(216),s=n(133);t.exports=function(o){var l=a(o,"string");return s(l)?l:l+""}},function(t,i,n){var a,s,o=n(2),l=n(70),d=o.process,c=o.Deno,u=d&&d.versions||c&&c.version,h=u&&u.v8;h&&(s=(a=h.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!s&&l&&(!(a=l.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=l.match(/Chrome\/(\d+)/))&&(s=+a[1]),t.exports=s},function(t,i,n){var a=n(104),s=n(167);(t.exports=function(o,l){return s[o]||(s[o]=void 0!==l?l:{})})("versions",[]).push({version:"3.19.1",mode:a?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},function(t,i,n){var a=n(2),s=n(168),o="__core-js_shared__",l=a[o]||s(o,{});t.exports=l},function(t,i,n){var a=n(2),s=Object.defineProperty;t.exports=function(o,l){try{s(a,o,{value:l,configurable:!0,writable:!0})}catch(d){a[o]=l}return l}},function(t,i,n){var a=n(7),s=0,o=Math.random(),l=a(1..toString);t.exports=function(d){return"Symbol("+(void 0===d?"":d)+")_"+l(++s+o,36)}},function(t,i,n){var a=n(166),s=n(169),o=a("keys");t.exports=function(l){return o[l]||(o[l]=s(l))}},function(t,i){t.exports={}},function(t,i,n){var a=n(69),s=n(106),o=n(50),l=function(d){return function(c,u,h){var f,g=a(c),v=o(g),p=s(h,v);if(d&&u!=u){for(;v>p;)if((f=g[p++])!=f)return!0}else for(;v>p;p++)if((d||p in g)&&g[p]===u)return d||p||0;return!d&&-1}};t.exports={includes:l(!0),indexOf:l(!1)}},function(t,i){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,i,n){var a=n(10),s=n(17),o=/#|\.prototype\./,l=function(f,g){var v=c[d(f)];return v==h||v!=u&&(s(g)?a(g):!!g)},d=l.normalize=function(f){return String(f).replace(o,".").toLowerCase()},c=l.data={},u=l.NATIVE="N",h=l.POLYFILL="P";t.exports=l},function(t,i,n){var a=n(318);t.exports=function(s,o){return new(a(s))(0===o?0:o)}},function(t,i,n){var a={};a[n(21)("toStringTag")]="z",t.exports="[object z]"===String(a)},function(t,i,n){var a,s,o,l,d=n(68),c=n(104),u=n(2),h=n(58),f=n(27),g=n(230),v=n(41),p=n(231),m=n(84),I=n(142),y=n(232),_=n(71),C=n(17),A=n(29),M=n(178),E=n(136),R=n(347),x=n(235),P=n(113),F=n(238).set,k=n(349),w=n(240),S=n(352),L=n(241),U=n(353),Z=n(72),ne=n(174),oe=n(21),ue=n(354),X=n(180),pe=n(165),B=oe("species"),K="Promise",G=Z.get,ee=Z.set,ie=Z.getterFor(K),be=g&&g.prototype,Te=g,Ge=be,je=u.TypeError,he=u.document,ae=u.process,V=L.f,Q=V,me=!!(he&&he.createEvent&&u.dispatchEvent),H=C(u.PromiseRejectionEvent),j="unhandledrejection",q=!1,re=ne(K,function(){var Le=E(Te),fe=Le!==String(Te);if(!fe&&66===pe||c&&!Ge.finally)return!0;if(pe>=51&&/native code/.test(Le))return!1;var De=new Te(function(Ne){Ne(1)}),Oe=function(Ne){Ne(function(){},function(){})};return(De.constructor={})[B]=Oe,!(q=De.then(function(){})instanceof Oe)||!fe&&ue&&!H}),de=re||!x(function(Le){Te.all(Le).catch(function(){})}),le=function(Le){var fe;return!(!A(Le)||!C(fe=Le.then))&&fe},we=function(Le,fe){if(!Le.notified){Le.notified=!0;var De=Le.reactions;k(function(){for(var Oe=Le.value,Ne=1==Le.state,Pe=0;De.length>Pe;){var ze,ge,Ee,Ue=De[Pe++],Be=Ne?Ue.ok:Ue.fail,Qe=Ue.resolve,Ze=Ue.reject,tt=Ue.domain;try{Be?(Ne||(2===Le.rejection&&Fe(Le),Le.rejection=1),!0===Be?ze=Oe:(tt&&tt.enter(),ze=Be(Oe),tt&&(tt.exit(),Ee=!0)),ze===Ue.promise?Ze(je("Promise-chain cycle")):(ge=le(ze))?f(ge,ze,Qe,Ze):Qe(ze)):Ze(Oe)}catch(lt){tt&&!Ee&&tt.exit(),Ze(lt)}}Le.reactions=[],Le.notified=!1,fe&&!Le.rejection&&Se(Le)})}},Ae=function(Le,fe,De){var Oe,Ne;me?((Oe=he.createEvent("Event")).promise=fe,Oe.reason=De,Oe.initEvent(Le,!1,!0),u.dispatchEvent(Oe)):Oe={promise:fe,reason:De},!H&&(Ne=u["on"+Le])?Ne(Oe):Le===j&&S("Unhandled promise rejection",De)},Se=function(Le){f(F,u,function(){var fe,De=Le.facade,Oe=Le.value;if(ye(Le)&&(fe=U(function(){X?ae.emit("unhandledRejection",Oe,De):Ae(j,De,Oe)}),Le.rejection=X||ye(Le)?2:1,fe.error))throw fe.value})},ye=function(Le){return 1!==Le.rejection&&!Le.parent},Fe=function(Le){f(F,u,function(){var fe=Le.facade;X?ae.emit("rejectionHandled",fe):Ae("rejectionhandled",fe,Le.value)})},Ve=function(Le,fe,De){return function(Oe){Le(fe,Oe,De)}},ke=function(Le,fe,De){Le.done||(Le.done=!0,De&&(Le=De),Le.value=fe,Le.state=2,we(Le,!0))},$e=function(Le,fe,De){if(!Le.done){Le.done=!0,De&&(Le=De);try{if(Le.facade===fe)throw je("Promise can't be resolved itself");var Oe=le(fe);Oe?k(function(){var Ne={done:!1};try{f(Oe,fe,Ve($e,Ne,Le),Ve(ke,Ne,Le))}catch(Pe){ke(Ne,Pe,Le)}}):(Le.value=fe,Le.state=1,we(Le,!1))}catch(Ne){ke({done:!1},Ne,Le)}}};if(re&&(Ge=(Te=function(Le){M(this,Ge),_(Le),f(a,this);var fe=G(this);try{Le(Ve($e,fe),Ve(ke,fe))}catch(De){ke(fe,De)}}).prototype,(a=function(Le){ee(this,{type:K,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(Ge,{then:function(Le,fe){var De=ie(this),Oe=De.reactions,Ne=V(P(this,Te));return Ne.ok=!C(Le)||Le,Ne.fail=C(fe)&&fe,Ne.domain=X?ae.domain:void 0,De.parent=!0,Oe[Oe.length]=Ne,0!=De.state&&we(De,!1),Ne.promise},catch:function(Le){return this.then(void 0,Le)}}),s=function(){var Le=new a,fe=G(Le);this.promise=Le,this.resolve=Ve($e,fe),this.reject=Ve(ke,fe)},L.f=V=function(Le){return Le===Te||Le===o?new s(Le):Q(Le)},!c&&C(g)&&be!==Object.prototype)){l=be.then,q||(v(be,"then",function(Le,fe){var De=this;return new Te(function(Oe,Ne){f(l,De,Oe,Ne)}).then(Le,fe)},{unsafe:!0}),v(be,"catch",Ge.catch,{unsafe:!0}));try{delete be.constructor}catch(Le){}m&&m(be,Ge)}d({global:!0,wrap:!0,forced:re},{Promise:Te}),I(Te,K,!1,!0),y(K),o=h(K),d({target:K,stat:!0,forced:re},{reject:function(Le){var fe=V(this);return f(fe.reject,void 0,Le),fe.promise}}),d({target:K,stat:!0,forced:c||re},{resolve:function(Le){return w(c&&this===o?Te:this,Le)}}),d({target:K,stat:!0,forced:de},{all:function(Le){var fe=this,De=V(fe),Oe=De.resolve,Ne=De.reject,Pe=U(function(){var ze=_(fe.resolve),ge=[],Ee=0,Ue=1;R(Le,function(Be){var Qe=Ee++,Ze=!1;Ue++,f(ze,fe,Be).then(function(tt){Ze||(Ze=!0,ge[Qe]=tt,--Ue||Oe(ge))},Ne)}),--Ue||Oe(ge)});return Pe.error&&Ne(Pe.value),De.promise},race:function(Le){var fe=this,De=V(fe),Oe=De.reject,Ne=U(function(){var Pe=_(fe.resolve);R(Le,function(ze){f(Pe,fe,ze).then(De.resolve,Oe)})});return Ne.error&&Oe(Ne.value),De.promise}})},function(t,i,n){var a=n(2),s=n(83),o=a.TypeError;t.exports=function(l,d){if(s(d,l))return l;throw o("Incorrect invocation")}},function(t,i,n){var a=n(85),s=n(134),o=n(111),l=n(21)("iterator");t.exports=function(d){if(null!=d)return s(d,l)||s(d,"@@iterator")||o[a(d)]}},function(t,i,n){var a=n(82),s=n(2);t.exports="process"==a(s.process)},function(t,i,n){t.exports=n(325)},function(t,i,n){t.exports=n(454)},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,".cameraEditPage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.cameraEditPage header {\n  width: 100%;\n  height: 40px;\n  flex: 0 0 40px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraEditPage header > div {\n  width: 24px;\n  height: 24px;\n  margin-right: auto;\n  margin-left: 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraEditPage header > div > i {\n  font-size: 18px;\n  color: #fff;\n}\n.cameraEditPage .resultContainer {\n  flex: 1;\n  background: #fff;\n  overflow: hidden;\n  position: relative;\n}\n.cameraEditPage .resultContainer canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n.cameraEditPage .resultContainer .dcs-cvsContainer {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  right: 20px;\n  bottom: 20px;\n}\n.cameraEditPage .footerButtons {\n  height: 48px;\n  flex: 0 0 48px;\n  width: 100%;\n  background: #000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n}\n.cameraEditPage .footerButtons div {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  width: 9.3333333333vw;\n  height: 9.3333333333vw;\n}\n.cameraEditPage .footerButtons div > p {\n  font-size: 12px;\n}\n.cameraEditPage .footerButtons div > i {\n  font-size: 24px;\n}",""]),i.a=s},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,'.cameraHomePage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.cameraHomePage header {\n  width: 100%;\n  height: 7.1964017991vh;\n  background: #000;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n.cameraHomePage header > div {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraHomePage header > div > i {\n  font-size: 24px;\n  color: #fff;\n}\n.cameraHomePage header > div:first-child {\n  margin-left: 18px;\n}\n.cameraHomePage header > div:last-child {\n  margin-right: 18px;\n}\n.cameraHomePage .videoContainer {\n  flex: 1;\n  background: #fff;\n}\n.cameraHomePage .buttonList {\n  height: 100px;\n  width: 100%;\n  background: #000000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n  position: relative;\n}\n.cameraHomePage .buttonList .modeTitle {\n  width: 12vw;\n  padding-top: 10px;\n  position: absolute;\n  left: 50%;\n  top: 0;\n  border-top: 0.7496251874vh solid #fe8e14;\n  transform: translate3d(-50%, 0, 0);\n}\n.cameraHomePage .buttonList > div {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  color: #fff;\n  width: 13.3333333333vw;\n}\n.cameraHomePage .buttonList > div i {\n  font-size: 26px;\n}\n.cameraHomePage .buttonList > div p {\n  display: none;\n  margin-top: 10px;\n}\n.cameraHomePage .buttonList .dcs-btn-captureBtn {\n  width: 80px;\n  height: 80px;\n  flex: 0 0 80px;\n  border-radius: 50%;\n  margin: 0 15px;\n  background: #fe8e14;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraHomePage .buttonList .dcs-btn-captureBtn > i {\n  font-size: 30px;\n}\n.cameraHomePage .buttonList .activeContinuous {\n  color: #fe8e14;\n}\n.cameraHomePage .buttonList .dcs-btn-multipleImg {\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  /*border: 2px solid #fe8e14;*/\n}\n.cameraHomePage .buttonList .dcs-btn-multipleImg .imgCount {\n  position: absolute;\n  right: -8px;\n  top: -8px;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background: #fe8e14;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraHomePage .buttonList .dcs-btn-multipleImg .previewImg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  background: #DDDDDD;\n}\n.cameraHomePage .buttonList .dcs-btn-multipleImg p,\n.cameraHomePage .buttonList .dcs-btn-multipleImg i {\n  display: none;\n}\n.cameraHomePage .buttonList .dcs-btn-multipleImg .nextArr {\n  position: absolute;\n  right: -16px;\n  top: 50%;\n  font-size: 12px;\n  color: #fe8e14;\n  transform: rotate(180deg) translate(0, 50%);\n}\n.cameraHomePage .resolutionList {\n  list-style: none;\n  position: absolute;\n  background: #292929;\n  left: 0;\n  top: 100%;\n  margin: 0;\n  z-index: 666;\n  padding: 0;\n  color: white;\n}\n.cameraHomePage .resolutionList .checkBox {\n  pointer-events: none;\n  width: 16px;\n  height: 16px;\n  border: 1px solid white;\n  border-radius: 50%;\n  margin: 0 10px;\n}\n.cameraHomePage .resolutionList li + li {\n  border-top: 1px solid #424141;\n}\n.cameraHomePage .resolutionList > li {\n  height: 35px;\n  display: flex;\n  align-items: center;\n  padding-right: 20px;\n  font-size: 14px;\n}\n.cameraHomePage .resolutionList > li p {\n  white-space: nowrap;\n  pointer-events: none;\n}\n.cameraHomePage .resolutionList .selectedItem .checkBox {\n  background-color: #fe8e14;\n}\n\n.dcs-capturing::after {\n  content: "";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  padding: 4px;\n  border-radius: 50%;\n  animation: glow 800ms ease-out infinite alternate;\n}\n\n@keyframes glow {\n  0% {\n    border: 3px solid transparent;\n  }\n  100% {\n    border: 3px solid #fe8e14;\n  }\n}',""]),i.a=s},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,'.cameraInsertPage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.cameraInsertPage header {\n  width: 100%;\n  height: 7.1964017991vh;\n  background: #000;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n.cameraInsertPage header > div {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraInsertPage header > div > i {\n  font-size: 24px;\n  color: #fff;\n}\n.cameraInsertPage header > div:first-child {\n  margin-left: 18px;\n}\n.cameraInsertPage header > div:last-child {\n  margin-right: 18px;\n}\n.cameraInsertPage .videoContainer {\n  flex: 1;\n  background: #fff;\n}\n.cameraInsertPage .buttonList {\n  height: 100px;\n  width: 100%;\n  background: #000000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n  position: relative;\n}\n.cameraInsertPage .buttonList .modeTitle {\n  width: 12vw;\n  padding-top: 10px;\n  position: absolute;\n  left: 50%;\n  top: 0;\n  border-top: 0.7496251874vh solid #fe8e14;\n  transform: translate3d(-50%, 0, 0);\n}\n.cameraInsertPage .buttonList > div {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  color: #fff;\n  width: 13.3333333333vw;\n}\n.cameraInsertPage .buttonList > div i {\n  font-size: 26px;\n}\n.cameraInsertPage .buttonList > div p {\n  display: none;\n  margin-top: 10px;\n}\n.cameraInsertPage .buttonList .dcs-btn-captureBtn {\n  width: 80px;\n  height: 80px;\n  flex: 0 0 80px;\n  border-radius: 50%;\n  margin: 0 15px;\n  background: #fe8e14;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraInsertPage .buttonList .dcs-btn-captureBtn > i {\n  font-size: 30px;\n}\n.cameraInsertPage .buttonList .activeContinuous {\n  color: #fe8e14;\n}\n.cameraInsertPage .buttonList .dcs-btn-multipleImg {\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  /*border: 2px solid #fe8e14;*/\n}\n.cameraInsertPage .buttonList .dcs-btn-multipleImg .imgCount {\n  position: absolute;\n  right: -8px;\n  top: -8px;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background: #fe8e14;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.cameraInsertPage .buttonList .dcs-btn-multipleImg .previewImg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  background: #DDDDDD;\n}\n.cameraInsertPage .buttonList .dcs-btn-multipleImg p,\n.cameraInsertPage .buttonList .dcs-btn-multipleImg i {\n  display: none;\n}\n.cameraInsertPage .buttonList .dcs-btn-multipleImg .nextArr {\n  position: absolute;\n  right: -16px;\n  top: 50%;\n  font-size: 12px;\n  color: #fe8e14;\n  transform: rotate(180deg) translate(0, 50%);\n}\n.cameraInsertPage .resolutionList {\n  list-style: none;\n  position: absolute;\n  background: #292929;\n  left: 0;\n  top: 100%;\n  margin: 0;\n  z-index: 666;\n  padding: 0;\n  color: white;\n}\n.cameraInsertPage .resolutionList .checkBox {\n  pointer-events: none;\n  width: 16px;\n  height: 16px;\n  border: 1px solid white;\n  border-radius: 50%;\n  margin: 0 10px;\n}\n.cameraInsertPage .resolutionList li + li {\n  border-top: 1px solid #424141;\n}\n.cameraInsertPage .resolutionList > li {\n  height: 35px;\n  display: flex;\n  align-items: center;\n  padding-right: 20px;\n  font-size: 14px;\n}\n.cameraInsertPage .resolutionList > li p {\n  white-space: nowrap;\n  pointer-events: none;\n}\n.cameraInsertPage .resolutionList .selectedItem .checkBox {\n  background-color: #fe8e14;\n}\n\n.dcs-capturing::after {\n  content: "";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  padding: 4px;\n  border-radius: 50%;\n  animation: glow 800ms ease-out infinite alternate;\n}\n\n@keyframes glow {\n  0% {\n    border: 3px solid transparent;\n  }\n  100% {\n    border: 3px solid #fe8e14;\n  }\n}',""]),i.a=s},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,".loadingContainer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 666666;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n\n@keyframes ldio-5z8jmalqic5 {\n  0% {\n    opacity: 1;\n    backface-visibility: hidden;\n    transform: translateZ(0) scale(1.5, 1.5);\n  }\n  100% {\n    opacity: 0;\n    backface-visibility: hidden;\n    transform: translateZ(0) scale(1, 1);\n  }\n}\n.ldio-5z8jmalqic5 div > div {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: #fe8e14;\n  animation: ldio-5z8jmalqic5 1s linear infinite;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(1) > div {\n  left: 148px;\n  top: 88px;\n  animation-delay: -0.875s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(1) {\n  transform: rotate(0deg);\n  transform-origin: 160px 100px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(2) > div {\n  left: 130px;\n  top: 130px;\n  animation-delay: -0.75s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(2) {\n  transform: rotate(45deg);\n  transform-origin: 142px 142px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(3) > div {\n  left: 88px;\n  top: 148px;\n  animation-delay: -0.625s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(3) {\n  transform: rotate(90deg);\n  transform-origin: 100px 160px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(4) > div {\n  left: 46px;\n  top: 130px;\n  animation-delay: -0.5s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(4) {\n  transform: rotate(135deg);\n  transform-origin: 58px 142px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(5) > div {\n  left: 28px;\n  top: 88px;\n  animation-delay: -0.375s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(5) {\n  transform: rotate(180deg);\n  transform-origin: 40px 100px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(6) > div {\n  left: 46px;\n  top: 46px;\n  animation-delay: -0.25s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(6) {\n  transform: rotate(225deg);\n  transform-origin: 58px 58px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(7) > div {\n  left: 88px;\n  top: 28px;\n  animation-delay: -0.125s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(7) {\n  transform: rotate(270deg);\n  transform-origin: 100px 40px;\n}\n\n.ldio-5z8jmalqic5 div:nth-child(8) > div {\n  left: 130px;\n  top: 46px;\n  animation-delay: 0s;\n}\n\n.ldio-5z8jmalqic5 > div:nth-child(8) {\n  transform: rotate(315deg);\n  transform-origin: 142px 58px;\n}\n\n.loadingio-spinner-spin-rvygg48s7pr {\n  width: 200px;\n  height: 200px;\n  display: inline-block;\n  overflow: hidden;\n  background: none;\n}\n\n.ldio-5z8jmalqic5 {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform: translateZ(0) scale(1);\n  backface-visibility: hidden;\n  transform-origin: 0 0;\n  /* see note above */\n}\n\n.ldio-5z8jmalqic5 div {\n  box-sizing: content-box;\n}",""]),i.a=s},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,".cameraContainer {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.cameraCvs, .cameraVideo {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n\np {\n  margin: 0;\n}\n\n.nodisplay {\n  display: none !important;\n}\n\n.hidden {\n  visibility: hidden !important;\n}\n\n.dcs-disable {\n  color: gray !important;\n  pointer-events: none;\n}\n.dcs-disable > i {\n  color: gray !important;\n}\n\n.dcs-overflowHidden {\n  overflow: hidden;\n}\n\n.dcs-relative {\n  position: relative;\n}\n\n.dcs-fixed-full {\n  position: fixed !important;\n  left: 0 !important;\n  top: 0 !important;\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.dropdownStyle, .filterDropDown, .footerButtons .dropdown {\n  list-style: none;\n  background: #292929;\n  bottom: 100%;\n  z-index: 666;\n  padding-left: 10px;\n  align-items: center;\n  display: flex;\n  bottom: 48px;\n  width: 100%;\n  height: 100px;\n  left: 0;\n  position: absolute;\n  overflow: auto;\n  box-sizing: border-box;\n  margin: 0;\n}\n.dropdownStyle .checkBox, .filterDropDown .checkBox, .footerButtons .dropdown .checkBox {\n  display: none;\n}\n.dropdownStyle img, .filterDropDown img, .footerButtons .dropdown img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.dropdownStyle > li, .filterDropDown > li, .footerButtons .dropdown > li {\n  box-sizing: border-box;\n  border: 2px solid #292929;\n  width: 70px;\n  flex: 0 0 70px;\n  height: 70px;\n  margin-right: 8px;\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  background: #fff;\n  position: relative;\n}\n.dropdownStyle > li p, .filterDropDown > li p, .footerButtons .dropdown > li p {\n  white-space: nowrap;\n  pointer-events: none;\n  position: absolute;\n  bottom: -2px;\n  width: calc(100% + 4px);\n  margin-left: -2px;\n  background: rgba(0, 0, 0, 0.5);\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.dropdownStyle > li img, .filterDropDown > li img, .footerButtons .dropdown > li img {\n  pointer-events: none;\n}\n.dropdownStyle .selectedItem, .filterDropDown .selectedItem, .footerButtons .dropdown .selectedItem {\n  border: 2px solid #fe8e14;\n}\n\n.dcs-selected i {\n  color: #fe8e14 !important;\n}\n\n.block {\n  visibility: hidden;\n}\n\n.disabled {\n  pointer-events: none;\n  color: gray !important;\n}",""]),i.a=s},function(t,i,n){var a=n(36),s=n.n(a)()(function(o){return o[1]});s.push([t.i,'@font-face {\n  font-family: "dcs-font";\n  /* Project id 2721323 */\n  src: url("data:font/ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwR1NVQiCLJXoAAAE4AAAAVE9TLzI8GUmLAAABjAAAAGBjbWFwtRi5hQAAAmgAAAMWZ2x5ZisdxxsAAAXAAAAdRGhlYWQh1NDqAAAA4AAAADZoaGVhCskGjAAAALwAAAAkaG10eIUm//YAAAHsAAAAfGxvY2GEUIqUAAAFgAAAAEBtYXhwATYA2QAAARgAAAAgbmFtZRCjPLAAACMEAAACZ3Bvc3QEYVVaAAAlbAAAAcEAAQAAA4D/gABcBu7//f/+Bu0AAQAAAAAAAAAAAAAAAAAAAB8AAQAAAAEAAEvuCuFfDzz1AAsEAAAAAADd5cZ3AAAAAN3lxnf//f99Bu0DggAAAAgAAgAAAAAAAAABAAAAHwDNAA0AAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAQESwGQAAUAAAKJAswAAACPAokCzAAAAesAMgEIAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOYB5nADgP+AAAAD3ACDAAAAAQAAAAAAAAAAAAAAAAACBAAAAAQAAAAEAP//BKz//QSq//8EAAAABAAAAAQAAAAFRwAABRAAAAbuAAAEPQAABAD//wQA//8GQv//BAX//wQAAAAEAAAABAAAAAQAAAAEAAAABAD//wQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAUAAAADAAAALAAAAAQAAAGeAAEAAAAAAJgAAwABAAAALAADAAoAAAGeAAQAbAAAAAgACAACAADmAeZa5nD//wAA5gHmUOZf//8AAAAAAAAAAQAIAAgAHAAAAAEAHgAdABoAGwAcABcAGAAZABQAFQAWABMAEgARAA4AEAAPAAwADQAJAAoACwAGAAQABQADAAgABwACAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAF4AAAAAAAAAB4AAOYBAADmAQAAAAEAAOZQAADmUAAAAB4AAOZRAADmUQAAAB0AAOZSAADmUgAAABoAAOZTAADmUwAAABsAAOZUAADmVAAAABwAAOZVAADmVQAAABcAAOZWAADmVgAAABgAAOZXAADmVwAAABkAAOZYAADmWAAAABQAAOZZAADmWQAAABUAAOZaAADmWgAAABYAAOZfAADmXwAAABMAAOZgAADmYAAAABIAAOZhAADmYQAAABEAAOZiAADmYgAAAA4AAOZjAADmYwAAABAAAOZkAADmZAAAAA8AAOZlAADmZQAAAAwAAOZmAADmZgAAAA0AAOZnAADmZwAAAAkAAOZoAADmaAAAAAoAAOZpAADmaQAAAAsAAOZqAADmagAAAAYAAOZrAADmawAAAAQAAOZsAADmbAAAAAUAAOZtAADmbQAAAAMAAOZuAADmbgAAAAgAAOZvAADmbwAAAAcAAOZwAADmcAAAAAIAAAAAAAAAsAG8AtoDdgQCBCIESAT0Bb4GfAeaCAwIuAm6CpgKzgr+CxYLeguwC+YMIAxWDHQNMg1kDbgN3A42DqIAAgAA/7YEAAOBACkAeAAAATY1NCcmJyYiBwYHBhUUFw4BBwYVFBcWFxYzMjY3HgEzMjc2NzY1NC4BAyImJyYnJjU0NzY3JicGBwYVFBYXDgEjBi4BNTQ2NzY/ATIWFxYXNjcmJy4BIyIHJjU0PgEyHgEVFAcGBw4BBwYHFhc2Nz4BNx4BFRQOAQM4AysqR0msSUcqKwM7WhkaKypHSlU3ZSkpZTdVSkcqKzNbrShJHiAWKQEFESYmDwYDIh4eSSdBbkBPQSMpEihJHiAWFiAYHillNxMVAUBtgm1AAQQSEj8oJCgRBSUmO1wZQFBAbgIXFhhVSkcqKysqR0pVGRUXWDk8QVZJSCorJCIiJCsqSElWQXVY/gMZFxghO0sMDigkAhAjJxYYNWEpFxgBQG5BSHcbEAMBGRcYICEXIBghJAMPDEFtQEBuQAwPJyQoPBEQAyMoBA8YWjscd0hAbkAAAA3///9/BAIDggAUACgAPABRAGEAcQB9AIkAmQCdAKkAtQDBAAATFjY9ATQ2OwEyPgEmKwEiBh0BFBYBIyIGFBY7ATIWHQEUFjI2PQE0JgEjIiY9ATQmIgYdARQWOwEyNjQmASYGHQEUBisBIgYUFjsBMjYnNTQmAREUFjMhMjY1ETQmIyEiBgURFAYjISImNREmNjMhMhYBITI2NCYjISIOARYXITI2NCYjISIOARY3MzI2PQE0JisBIgYdAR4BNzMVIzczMjY0JisBIgYeAQMhMjY0JiMhIg4BFhMzPgE0JisBIgYeARYJDRkS8AgMAQwJ9CEwDAOf9AkMDAn0ERkNEQ0z/Xj0ERkMEQwxIvQJDAwCmgkMGBLyCQwMCfQiMQIM/LMdFAJUFB0dFP2sFB0CjQUD/awDBQEGAwJUAwb+DwGJCAwMCP53CAwBDAkBiQgMDAj+dwgMAQwXVQ8UFA9VDhUBFBRJSb63CAwMCLcJDAEMygGJCAwMCP53CAwBDNu3CAwMCLcJDAEMAiUBDAn1EhkKEQwwIvUIDAFbDBEMGRH0CA0NCPUjMPwtGRHyCA0NCPUiMA0RDQEwAQ0I9RIYDRIMMiP1CA0BzP2tFB0dFAJTFR0dFf2tAwUEBAJTBAUF/rUMEQwMEQxiDBEMDBEMvhQOVQ8UFA9VDhRxSDgMEQwMEQz+fgwRDAwRDAEwAQwQDAwRDAAACP/9/30ErgOAAAcAFwA0AE8AZAB2AKEAxgAAEwMzNzMXMwMHNzY3ND8BNjcUHwEWHwIFFAcGBwYnBicmNzUjFQYXFhcWNzI+ATczFzM1IxciJyY3NTM1IzUjDwEVMxUGFx4BMxY2NzUOATcuAQYHBhcUFx4CPgI3NjU2JyYHDgEiJicmNSY3PgEXMhYXFhQTIyIvASYnJicmKwEiBwYHBg8CBgcjIgcGFREGHgI3IRY+AicRNCcmExQGIyEiJjURNDc2OwE+AT8BNjc2OwEyFhcWHwEeATsBMhcWFfl4IyV7JiR2QiQDBAICAgMCAgIEAyQBEQcGEBIWFxAPAiMBCgkTFRYQHBYHAwQdI7YPCwsBQ0MUDiAgAQkJHxEKEwgHENgZOzMMDQEHBxwoLSgcBwcBDg0SBiIqIgYIAhMJHQ8VIgYIQrAPCBkeDhQTFBj7FxMSFA0dCBcHDbJDHhcDECUwGQOzGTEjEQIXHgonKvxNKSgOEjCwER4KHSUNEhP7DhkRDBwXCR4RsDASDQHg/s9gYAExsmAHBQQHBQcKAgYHBwoJZBQXFhIKCwECEBMYk5YYFxIJCQEIEQsg5M0LDhKGHDUyDhGHFhQPDQECBBoCAsQOAR4ZHyEaGBUgEAEQIBQZGiEeGYkTGBgUFxgkHQ0MARcTFzEB1Q0mLBEaDA0MCxkPKQwiCwImHTH9lRowJREDAxIkMBoCazEdJv0hKikpKgJrIRAWARAOLDcPFBIWESohDhEWECIAAAAG////fwSrA4EADwAfADwASwBZAGUAAAEhIgYVERQWMyEyNjURNCYTFAYjISImNRE0NjMhMhYVAyMDJicmIgcGBwMnLgEOAQ8BIw4BFBYXIT4BNCYlPgEfARY2NxM2NxYXEyETMj4BLgIOARUUHgI3Mh4BDgIuATU0NgRV/AAjMjIjBAAkMjIHGRL8ABEZGREEABIZcFaeCA4KFgoPCnNcCh4iHAiVVQcJCQcDdAcJCf2WBRgGdAgZBIMCAgMBmP2ZNiQ7Gw0yRUInESEqFxYlEQgfKykYKgOAMiP8qiMyMiMDViMy/FURGRkRA1YRGRkR/RIBjxUKBwYJFf8Abw4PAhMP+QIMDwwCAgwPDOYLAQuMCgQLASAEBAQE/oABnydBRjIOGzsjFyshEbwYKCsfCREkFh4qAAAGAAD/gAOrA4AAGwAtAD8ASwBXAGMAAAEnJiMhIgYdASMiBhURFBYzITI2PQEzMjY1ESYDFAYjISImNRE0NjsBERQWMyE3FAYjISImNRE0NjMhMh8BFhUFMzI2NCYrASIGFBYFISIGFBYzITI2NCYHISIGFBYzITI2NCYDmJISG/48GiZAGiYmGgJWGiZAGiYBqgwJ/aoJDAwJQCYaAeuADAn9qgkMDAkBxAkGkgb+HN0JDQ0J3QkMDAFY/qoJDAwJAVYJDAwJ/qoJDAwJAVYJDAwC3JETJRtAJRv9ABslJRtAJRsCbxr89wkMDAkDAAkM/WsbJUAJDAwJAwAJDAaSBghADBINDRIMcg0SDAwSDasNEQ0NEQ0AAgAA/4AEAAOAAAQADQAAEyMRIREBBiIvATcXARcBAQQA/dYHFge8SIYBBUsDgPwABAD9QQgIvEuGAQhKAAAAAAEAAP9/Aw8DfgASAAAFIicmNDcJASY0NjIXARYUBwEGARERBggIAc3+MwgRFwgB5AgI/hwGgAYIFwkB0gHNCBcRCP4cCBcJ/h0GAAAEAAD/fwVGA4EARwBcAGUAdAAABSEiLgQ1ETQ+BDsBFjc+ATc2PwE2NzY3PgE3ITIXFhcWHwEWHwEWFx4BFzI7ATIeAhcVFhcWFREUDgEHBgcGKwEBIgcGBwYUFxYXHgE3Njc2NCcmJyYlIgYUFj4CJgEiLgE0PgIeARUWDgIEw/uyDyAcFg8FBQ8WHB8QoQ8QEiANDAYJAgQQIhAkEQErEhIkGg0JBgIFAgYMDSASCgqvEB8cFwcGAgMGDgsXIBAQDv3hUkhFKCopKEVHpUhFKSopKUVHATMRGBgiGAEY/mlDcUNCcYVyQgElRVuABQ8WHSAQAlsQHx0XDgUBAQQRDBUXGAgHIxIIBgEDBhsNEA8GDgcWEw0RBAUOFw4ECgwSEv2lEB8dCxcGAgLwKShFR6ZHRSkqASooREemR0YpKgQYIxgBFyIZ/dZCcYZxQgFCcUMxWkYmAAQAAP+ABQEDgQAkAEgAbgCSAAAlDgIrAS4BJxUUBiImPQE0NjsBMhYUBisBHgM+ATc+AR4BNxQGKwEiJjQ2OwEuAw4BBw4BLgE3PgIyHgEXNTQ2MhYVNyMiLwEmJyYnJiMhIgcGBwYPAQYrASIHBhURFBYzITI2NRE0JyYTFCMhIjURNDc2OwEyNj8BNjc+ATMhMhYXFh8BHgE7ATIXFhUDjxRPazsfUH0aDBINDQmhCQ0NCWwLPltpYEgRAxARBxoNCaEJDQ0JbAs+W2lgSBEEDw8IARROa3ZqTxMMEg3VvREJGyAOFxMWGv70GhcTFw8gGwkQvEggGERAA/hARBghDln8CFkOFDO+EiAKGR8MEhsPAQwQGhIOHhgKIBO9MxQOzzhVMApmTGEJDAwJogkMDBIMNFMyBydKMggIBhCUCQwMEgw0UzIHJksyBwYFDgg3Vi8vVjdiCQwMCdANJS0QGwwNDgwbES4iDSYdMf2UPUBAPQJsMR0m/SBSUgJsIRAWEQ4jKw8XEhIXECohDxAWECIABwAA/38G7QOBABcAJwA+AFMAXwBvAH8AAAEhIg4CFREUHgIzITI+AjURNC4CExYGIyEiJjURNDYzITIWFQUuAQcFDgEVERQWFwUWMzI3PgE1ETQmAxQOAiclLgE1ETQ2NyU2MzIeARUBIzUjETMRMxEzESMFJgcjETMWNzY3Nic1NicmAxQHBgcGJyMRMzYXFhcWBwQz/DEUJRwPDxwlFAPRFCQcDw8dJR4BHhX8MRUeHhUD0RUeAlcWNRf+1RodHhkBKxUXHRcWGRgVDBcaDP7SDQ8PDQEsCw0OFw37OK40NK40NAFoKzB3fC8oIgwPAQEPDRwGAxUdI0dDIh0WBggBA4APHCUU/MgUJRwPDxwlFAM4FCYcDvxkFh8dFQM7FR4eFSQOAgyWDTEc/ugcMA2XCw8OLRoCRhot/XMOFw4CBpgGGg4BGA4aBpcFDxYO/v70/dcBDf7zAikUGAL91QIYFSYsLtwsKiX+siUkHRQVAwHZAxIQGiMjAAAHAAD/fgQ9A4EAFwA2AG4ApgCzAL8AzAAABSEiJjURNDY7AT4BFzM2FhczMhYVERQGASIGBxEUFjMhPgE3ES4BJyMGLwEuASsBIgcGDwEGIwUiJjQ2Mz4BNxEuAScjIi8BJicmKwEiBwYPAQYrAQ4BBxQGIiY1NDY7AT4BFzM2FhczMhYVERQGNyImNDYzMjY1ETQmJyMiLwEmJyYrASIHBg8BBisBJgYXDgEiJic0NjsBPgE7ATIWFzMyFhURFAYBIi4BPgIeARUUDgEnIg4BHgI+ATU0JiUiJj0BNDYyFh0BFAYCkP2/IS4uIdoIKxyDGywHSiEuMP2dEBcBFxECQQ8WAQEWD1YMBwMMDxCDEAgHDAMGDQIJCQwMCQ8VAQEVD1cNBQMNBgkQghAJBg0DBQ3nEBUBDBEMLiHaCCwbgxssCEohLjGMCAwMCA8WFRBXDAYDDAcIEIMQCAcNAgYN5xEXAQILDgsCLyDbBywbgxwrCEohLjH9nSlFIBA7UUwuJT4lHTAWCyk4NiA3/rcIDAwRDAyALiEBWiEuGiABASAaLiH+piIuAdAWEP6mERcBFg8BXA8WAQEKBxgPCAcYBwvmDBEMARUPAVsPFgELBhkGCQkGGQUMARUPCQwMCSAuGiEBASEaLiD+pSIu6QwRDBYPAVoQFwELBhkHCAkGGQYLARgRBggIBiEuGiAgGi4h/qYiLv6nLkxROxAgRSklPyTnIDU5KQsWMB0nOHQMCFcIDQwJVwgMAAAAAAP///9/BAEDgQAbADQASQAAJRYUBiIvAQcGIiY0PwEnJjQ2Mh8BNzYyFhQPAQMiBw4BBwYUFx4BFxYyNz4BNzY0Jy4BJyYDIicmJyY0NzY3NjIXFhcWFRQOAgLPBg0SB6+vBxINBq+vBw4SB6+vBxIOB68gaF9cjicoKCeOXF/QX1yOJygoJ45cX2h/bmo+QEA+am7+bmo+QEeErdEHEg0Gr68GDRIHr68HEg4Hr68HDhIHrwIAKCeOXF/QX1yOJygoJ45cX9BfXI4nKPwrQD5qbv5uaj5AQD5qbn9drYRHAAAAAAb///9/BAADgQAzAEIATwBcAGkAdgAAJSEiJjURNDY7ATIWHwEeATMhMhYdARQGIiY9ATQmIyEiJi8BLgErAQ4BBxEeATMhMhYUBgEiLgE0PgEyHgEVFA4CAyIOARQeAj4CLgEDIiY1ETQ2MhYVERQGJy4BND8BNjIWFA8BBhciLwEmNDYyHwEWFAYBav7UGiQkGucRHggnAwwHAagaJAsQCw4K/lkSHggnAw0G5wkNAQEOCQErCAsLAXpLfkpKfpZ/SipOZTdAbEA/bIBtQAFAbEEICwsQCwtpBwwGYQUQCwZgBrkHBmAGCxAFYQULgSQaAoMaJBIQUQcHJBqrCAsLCKsKDhMQUQYGAQ0J/X0KDgsQC/7/Sn+WfkpKfks3ZU4qAgI/bIBtQAE/bIBtQf5/CwgBAQgLCwj+/wgLoAELDwZgBgsQBmAFAQZgBhALBmAGDwsAAAAADP///38GQwOAADsASABXAGAAagB9AJIApQCmAKkAqgCsAAAFISIuATURND4BNzM2PwE2NzMWHwEWFzMyFhcWDgEmJy4BKwEmLwEmJyMGDwEGByMOARURBhY3IR4BFAYlIi4BPgIeARUUDgEDIg4BFB4CPgE1NC4CBSImNDYyFhQGJyIGFRQyNTYmIwEiLgI0PgMeAhUGBwYHBgMiBwYHBhQXFhcWMjc2NzY0JyYnJgMiLgE3NSY+ATIfAR4BFAYPAQYnNxU3Fyc1A1X9ISA2IB41Ia0YE1oeKJQnH10TGKoYLBAFAQ4TBgkdD6snH10SGI8YE1seJqshLAEtHwLfBwkJ/tlKfDodapKKU0JxQzZcNjZdbVw3HzlK/mgQFhYgFhYQAwMMAgUDBCRFf2E1NGJ/iYBgNQEvLU5RXVFGQygpKShDRqJGQygoKChDRqMLFAkBAQoTFwrJCgwMCswJDQi1EMUrIDYgAjUhOCQDAQ9VGQICGVUPARUTBxIMAgcMDQIZVg4BAQ9WGAIDMSH9yx8tAQIMDwy+UoqTaR05fEpDcUIBwDZdbVw2ATZcNyhLOR9iFx8XFx8XKwQDBQUEBf1fNWCAiX5iNAE2YX5FXlBOLi8ChSknREWjRUQnKSknREWjRUQnKf47DBULwQsTDAdkBBIWEQRmBiu5tFoIbgIAAAAABv///38EAgOCABQAKAA8AFEAfQCpAAATFjY9ATQ2OwEyPgEmKwEiBh0BFBYBIyIGFBY7ATIWHQEUFjI2PQE0JgEjIiY9ATQmIgYdARQWOwEyNjQmASYGHQEUBisBIgYUFjsBMjYnNTQmJzMyNjQmKwEuAic1NCYiBh0BDgIHIyIGFBY7AR4CFxUUFjI2PQE+AiUzMjY0JisBPgI3FRQWMjY9AR4CFyMiBhQWOwEOAgc1NCYiBh0BLgIWCQ0ZEvAIDAEMCfQhMAwDn/QJDAwJ9BEZDRENM/149BEZDBEMMSL0CQwMApoJDBgS8gkMDAn0IjECDNNQCQ0NCVAFSXZHDBIMRndIBU8JDQ0JUAVJdkcMEgxGdkj98E8JDAwJTwU+YzwMEgw7ZD4EUAkMDAlPBT5jPAwSDDtjPQIlAQwJ9RIZChEMMCL1CAwBWwwRDBkR9AgNDQj1IzD8LRkR8ggNDQj1IjANEQ0BMAENCPUSGA0SDDIj9QgNjg0RDUZ2SQVPCQwMCVEFSXZGDBIMR3ZJBVAJDQ0JUAZJd0YNEQ07Yz4FUAkMDAlOBD5kOwwSDDxjPgVRCA0NCE8FPmMAAQAA/4ADHAOCABsAAAUiJicBIiYnLgE2NwE2FhcWBgcBBhcBHgEHDgEC4QkWCP5aBAYCGQ4XHAGmES0REAUR/loICAGsEAINDRSACQgBigkCHEZFGQGKEQIVEC0S/nYXEP52ES0RCQgAAAAAAwAA/4AEAAOAAAUAEAAbAAABESERAyEBIREjNTMnBzMVIwczFSMXNyM1MxMhAzP9ms0EAP0aAczATXNzTcAKyk1zc03KofzeAZQB7P4U/ewDs/6Hk3Nzk02aeXma/mAAAQAAAAAEAAL2AAgAAAkBBwEhFSEBFwQA/os2ARj8kwNt/ug2AYABdTb+50z+5zYACQAA/4AEAAOAABQAGAAcACgALAAwADUANgBCAAABIxUhNSMVMxEjFTM1IRUzNSMRMzUFNTMVESM1MyUVITUjETM1IRUzERcVIzUTIzUzAScHIS8BIxQeATI+ATU0JiIGA7Og/drtUFDtAibtUFD8TVNTUwJz/dpQUAImUFBTU1NT/ixdbAHdi5Q/ER0iHRElNCUDgFBQ7f3a7VBQ7QIm7aBTU/ztU01QUAImUFD92k1TUwLAU/3VcqrnWhEdEREdERolJQAAAAADAAD/gAQBA4AAFgAaAB4AAAE1NCcmJyYjIgc1DQE1NzYzMhYXFh0BASERIRchESEEADAvUVJgDQ3+8QEPARAJUIooKvw2Ayb82k0Cjf1zAQ50ZFdUMTMBjKuqigEBVEZIVHP+cgJtTf4tAAAD////gAQAA4AAFgAaAB4AAAEVLQEVJiMiBwYHBh0BMzU0NzY3NjMyBxEhEQMhESEBfAEP/vENDWBSUS8wNiooREZQDpYDJk39cwKNArWKqquMATMxVFdkcnBUSUYpK8r9kwJt/eAB0wAAAAAFAAD/gAQAA4AABAAMABAAFAAhAAABIREhESUzFTM1MxUjASE1ITUhNSETIxEhESMRMxEhETMXAxn85wQA/YNcbDL6AX3+AAIA/gACALNm/WZm6gGTL7oDgPwAAxadZma6/VTWTUP+mgGz/k0DZv76AQa9AAQAAP9/BAADgAAIABAAFgAaAAABFwEXAQYiLwEBNSERMxUhEQEjESEVIQEhESEBooMBAEr+yAcVCLcB1/zNzQMz/M2AApn95wLm/WcCmQFeggECSP7GCAi5AZ7N/M3NAzP95wKZgP0aApkAAAMAAP+ABAADgAADAAcACwAAATMRIwERIREDIREhA58BAfxhBABg/L8DQQMg/MADoPwABAD8YANAAAAAAA0AAP9/BAADgAAIABEAGgAjAC8ARABKAFMAYABkAGgAdQCCAAA3IiY0NjIWFAYzIiY0NjIWFAYDMhYUBiImNDYjMhYUBiImNDYBLwEHOQEXNxUzNRc3NSERIQYHIREhHgEzMjc2NzY1NCYBNSEVFBcBNSEVJiMiBgcTIi4BND4BMh4BFA4BEyERISchNSEBIgYVMRQWMjY1MTQmMyIGFTEUFjI2NTE0Jp0PFRUeFRVoDxUVHhUVDw8VFR4VFWgPFRUeFRUC5182lTY4TTmB/EAB1AUF/jYCKiZdM05DQSYoIvxqAXgr/l0DMEVTQ3co4jtkOztkdmQ6OmSl/EADwEj80AMw/SUPFRUeFRVoDxUVHhUVNBUdFRUdFRUdFRUdFQLaFB4VFR4UFB4VFR4U/aRfNpU2OLq6ONnh/tQNEP7UHyInJkFETjJd/tqcBVJFAUmcWiw7M/51OmR2ZDs7ZHZkOgO5/tRInP6MFQ8PFRUPDxUVDw8VFQ8PFQAAAwAA/4AEAAOAAAUAEAAbAAABIREhBREBIzUHFzUzFSERIQElNTMVNycVIzUlAez+FAHsAhT9xpNzc5P+hwF5Ae3+YJp5eZoBoAKz/ZrNBAD+Jk1zc03AAcz9iaHKTXNzTcqhAAkAAP+AA/8DgAADAAcACwAPABMAFwApAC4AMgAAATMRIwMzESMDMxEjETMRIxMzESMTMxEjEzUjNSEVIxUjFTMRIRUzETM1JTUhFSEBIREhAp1NTcNNTcBNTU1NwE1Nw01NYhb+KRP/cwLMTXP9TQFm/poB8/2BAn8CQf3AAkD9wAJA/cACQP3AAkD9wAJA/cAC2aUBAaVZ/QABAwFZJidN/PQCswAAAAIAAP9/BAADgAARABUAADcRIREzESEVMxEzMSEVMzUzNQEzFSPmAjRM/JqZOgJHTJr8mU1NZgI0/gACTU39gJqaTAMaZgAAAAUAAP+ABAADgQAPABQAIQAuADoAAAUhESE3ISIVERQzITI1EQcFByEDBwEiDgEUHgEyPgE0LgEDIi4BND4BMh4BFA4BNyM1IxUjFTMVMzUzA039AAGwIP3kAQEDlwFM/dmMAma3qgF6Pmo+Pmp9aj4+aj8yVDIyVGRVMjJVWnUudHQudTMDAE0B/GkBAQIbHVbdASPbAus+an1qPj5qfWo+/mEyVWRUMjJUZFUy0HR0LnV1AAcAAP+ABAADgAAMABkAGgAnADUAOQBFAAABIg4BFB4BMj4BNC4BAyIuATQ+ATIeARQOAQEjFB4BMj4BNC4BIg4BNychByMRITUhESEVMxEhNyEXEyMVIxUzFTM1MzUjAeA4YDg4YHBgODhgOCM6IiI7RDsiIjoBFDMOGBsYDg4YGxgON1z+gl3kAgD+TQNmTf02NAErNJ1MmppMmpoCEThfcWA4OGBxXzj+sSI6RTsiIjtFOiIBLA4YDQ0YGxgODhjBxMT9BEwCY88BHHd3/kSZTZqaTQAAAAAAEgDeAAEAAAAAAAAAEwAAAAEAAAAAAAEACAATAAEAAAAAAAIABwAbAAEAAAAAAAMACAAiAAEAAAAAAAQACAAqAAEAAAAAAAUACwAyAAEAAAAAAAYACAA9AAEAAAAAAAoAKwBFAAEAAAAAAAsAEwBwAAMAAQQJAAAAJgCDAAMAAQQJAAEAEACpAAMAAQQJAAIADgC5AAMAAQQJAAMAEADHAAMAAQQJAAQAEADXAAMAAQQJAAUAFgDnAAMAAQQJAAYAEAD9AAMAAQQJAAoAVgENAAMAAQQJAAsAJgFjQ3JlYXRlZCBieSBpY29uZm9udGljb25mb250UmVndWxhcmljb25mb250aWNvbmZvbnRWZXJzaW9uIDEuMGljb25mb250R2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwByAGUAYQB0AGUAZAAgAGIAeQAgAGkAYwBvAG4AZgBvAG4AdABpAGMAbwBuAGYAbwBuAHQAUgBlAGcAdQBsAGEAcgBpAGMAbwBuAGYAbwBuAHQAaQBjAG8AbgBmAG8AbgB0AFYAZQByAHMAaQBvAG4AIAAxAC4AMABpAGMAbwBuAGYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAACAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8BAgEDAQQBBQEGAQcBCAEJAQoBCwEMAQ0BDgEPARABEQESARMBFAEVARYBFwEYARkBGgEbARwBHQEeAR8BIAATYS1pb3MtY29sb3ItZmlsdGVyMRBib3JkZXItZGV0ZWN0aW9uDGF1dG8tY2FwdHVyZQ1pbWFnZS1nYWxsZXJ5CG11bHRpcGxlDWEtYWxsc2VsZWN0ZWQFYXJyb3cHY2FwdHVyZQxhLXR1cm5jYW1lcmEKcmVzb2x1dGlvbhFhLW11bHRpcGxlY2FwdHVyZQVjbG9zZQ1hLWxvY2FsdXBsb2FkDWEtYXV0b2NhcHR1cmUPYS1hdXRvZGV0ZWN0aW9uBWJhY2sxBm1pcnJvcgRuZXh0EmEtZnVsbGRldGV0ZWRpbWFnZQtyb3RhdGVfbGVmdAxyb3RhdGVfcmlnaHQEc2F2ZQpzZWxlY3RfYWxsCnVuc2VsZWN0ZWQSYS11cGxvYWRmcm9tc2VydmVyBGZsaXAGZGVsZXRlBGNyb3AKYS1hZGRpbWFnZRRhLWFkZGltYWdlZnJvbWNhbWVyYQAAAAAA") format("truetype");\n}\n.dcs-font {\n  font-family: "dcs-font" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.dcs-i-arrow:before {\n  content: "\\e66f";\n}\n\n.dcs-i-filter:before {\n  content: "\\e601";\n}\n\n.dcs-i-close1:before {\n  content: "\\e627";\n}\n\n.dcs-i-switch1:before {\n  content: "\\e70b";\n}\n\n.dcs-i-capture:before {\n  content: "\\e66e";\n}\n\n.dcs-i-insert:before {\n  content: "\\e651";\n}\n\n.dcs-i-delete:before {\n  content: "\\e653";\n}\n\n.dcs-i-crop:before {\n  content: "\\e654";\n}\n\n.dcs-i-rotateLeft:before {\n  content: "\\e658";\n}\n\n.dcs-i-rotateRight:before {\n  content: "\\e659";\n}\n\n.dcs-i-save:before {\n  content: "\\e65a";\n}\n\n.dcs-i-leftUnable:before {\n  content: "\\e65b";\n}\n\n.dcs-i-nextPage:before {\n  content: "\\e65c";\n}\n\n.dcs-i-prePage:before {\n  content: "\\e65d";\n}\n\n.dcs-i-nextUnable:before {\n  content: "\\e65e";\n}\n\n.dcs-i-fullCrop:before {\n  content: "\\e65f";\n}\n\n.dcs-i-next:before {\n  content: "\\e660";\n}\n\n.dcs-i-back:before {\n  content: "\\e663";\n}\n\n.dcs-i-old-autoCapture:before {\n  content: "\\e662";\n}\n\n.dcs-i-autoCapture:before {\n  content: "\\e66d";\n}\n\n.dcs-i-old-autoDetect:before {\n  content: "\\e664";\n}\n\n.dcs-i-autoDetect:before {\n  content: "\\e670";\n}\n\n.dcs-i-close:before {\n  content: "\\e665";\n}\n\n.dcs-i-old-load:before {\n  content: "\\e666";\n}\n\n.dcs-i-load:before {\n  content: "\\e66b";\n}\n\n.dcs-i-switch:before {\n  content: "\\e667";\n}\n\n.dcs-i-resolution:before {\n  content: "\\e668";\n}\n\n.dcs-i-old-continuous:before {\n  content: "\\e669";\n}\n\n.dcs-i-continuous:before {\n  content: "\\e66c";\n}',""]),i.a=s},function(t,i,n){t.exports=n(277)},function(t,i,n){var a=n(278);n(67),t.exports=a},function(t,i,n){var a=n(4),s=n(3),o=n(20),l=n(157),d=n(122),c=n(284),u=n(63),h=n(45),f=n(53),g=n(286),v=n(287),p=n(64),m=n(288),I=n(12),y=n(289),_=I("toStringTag"),C=s.Error,A=[].push,M=function(R,x){var P,F=arguments.length>2?arguments[2]:void 0,k=o(E,this);d?P=d(new C(void 0),k?l(this):E):(P=k?this:u(E),h(P,_,"Error")),h(P,"message",m(x,"")),y&&h(P,"stack",g(P.stack,1)),v(P,F);var w=[];return p(R,A,{that:w}),h(P,"errors",w),P};d?d(M,C):c(M,C);var E=M.prototype=u(C.prototype,{constructor:f(1,M),message:f(1,""),name:f(1,"AggregateError")});a({global:!0},{AggregateError:M})},function(t,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(a){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){var a=n(152);t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,i,n){var a=n(25),s=n(11),o=n(156);t.exports=!a&&!s(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,i,n){var a=n(11),s=n(15),o=/#|\.prototype\./,l=function(f,g){var v=c[d(f)];return v==h||v!=u&&(s(g)?a(g):!!g)},d=l.normalize=function(f){return String(f).replace(o,".").toLowerCase()},c=l.data={},u=l.NATIVE="N",h=l.POLYFILL="P";t.exports=l},function(t,i,n){var a=n(5),s=n(22),o=n(54),l=n(197).indexOf,d=n(96),c=a([].push);t.exports=function(u,h){var f,g=o(u),v=0,p=[];for(f in g)!s(d,f)&&s(g,f)&&c(p,f);for(;h.length>v;)s(g,f=h[v++])&&(~l(p,f)||c(p,f));return p}},function(t,i,n){var a=n(54),s=n(124),o=n(46),l=function(d){return function(c,u,h){var f,g=a(c),v=o(g),p=s(h,v);if(d&&u!=u){for(;v>p;)if((f=g[p++])!=f)return!0}else for(;v>p;p++)if((d||p in g)&&g[p]===u)return d||p||0;return!d&&-1}};t.exports={includes:l(!0),indexOf:l(!1)}},function(t,i,n){var a=n(125),s=Math.min;t.exports=function(o){return o>0?s(a(o),9007199254740991):0}},function(t,i,n){var a=n(25),s=n(33),o=n(26),l=n(54),d=n(126);t.exports=a?Object.defineProperties:function(c,u){o(c);for(var h,f=l(u),g=d(u),v=g.length,p=0;v>p;)s.f(c,h=g[p++],f[h]);return c}},function(t,i,n){var a=n(32);t.exports=a("document","documentElement")},function(t,i,n){var a=n(12),s=n(79),o=a("iterator"),l=Array.prototype;t.exports=function(d){return void 0!==d&&(s.Array===d||l[o]===d)}},function(t,i,n){var a=n(23),s=n(26),o=n(153);t.exports=function(l,d,c){var u,h;s(l);try{if(!(u=o(l,"return"))){if("throw"===d)throw c;return c}u=a(u,l)}catch(f){h=!0,u=f}if("throw"===d)throw c;if(h)throw u;return s(u),c}},function(t,i,n){var a=n(3),s=n(15),o=n(162),l=a.WeakMap;t.exports=s(l)&&/native code/.test(o(l))},function(t,i,n){var a=n(205).IteratorPrototype,s=n(63),o=n(53),l=n(57),d=n(79),c=function(){return this};t.exports=function(u,h,f){var g=h+" Iterator";return u.prototype=s(a,{next:o(1,f)}),l(u,g,!1,!0),d[g]=c,u}},function(t,i,n){var a,s,o,l=n(11),d=n(15),c=n(63),u=n(157),h=n(56),f=n(12),g=n(55),v=f("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(s=u(u(o)))!==Object.prototype&&(a=s):p=!0),null==a||l(function(){var m={};return a[v].call(m)!==m})?a={}:g&&(a=c(a)),d(a[v])||h(a,v,function(){return this}),t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},function(t,i,n){var a=n(3);t.exports=a.Promise},function(t,i,n){var a=n(32),s=n(33),o=n(12),l=n(25),d=o("species");t.exports=function(c){var u=a(c);l&&u&&!u[d]&&(0,s.f)(u,d,{configurable:!0,get:function(){return this}})}},function(t,i,n){var a=n(12)("iterator"),s=!1;try{var o=0,l={next:function(){return{done:!!o++}},return:function(){s=!0}};l[a]=function(){return this},Array.from(l,function(){throw 2})}catch(d){}t.exports=function(d,c){if(!c&&!s)return!1;var u=!1;try{var h={};h[a]=function(){return{next:function(){return{done:u=!0}}}},d(h)}catch(f){}return u}},function(t,i,n){var a=n(26),s=n(293),o=n(12)("species");t.exports=function(l,d){var c,u=a(l).constructor;return void 0===u||null==(c=a(u)[o])?d:s(c)}},function(t,i,n){var a,s,o,l,d=n(3),c=n(78),u=n(44),h=n(15),f=n(22),g=n(11),v=n(200),p=n(47),m=n(156),I=n(211),y=n(129),_=d.setImmediate,C=d.clearImmediate,A=d.process,M=d.Dispatch,E=d.Function,R=d.MessageChannel,x=d.String,P=0,F={};try{a=d.location}catch(U){}var k=function(U){if(f(F,U)){var Z=F[U];delete F[U],Z()}},w=function(U){return function(){k(U)}},S=function(U){k(U.data)},L=function(U){d.postMessage(x(U),a.protocol+"//"+a.host)};_&&C||(_=function(U){var Z=p(arguments,1);return F[++P]=function(){c(h(U)?U:E(U),void 0,Z)},s(P),P},C=function(U){delete F[U]},y?s=function(U){A.nextTick(w(U))}:M&&M.now?s=function(U){M.now(w(U))}:R&&!I?(l=(o=new R).port2,o.port1.onmessage=S,s=u(l.postMessage,l)):d.addEventListener&&h(d.postMessage)&&!d.importScripts&&a&&"file:"!==a.protocol&&!g(L)?(s=L,d.addEventListener("message",S,!1)):s="onreadystatechange"in m("script")?function(U){v.appendChild(m("script")).onreadystatechange=function(){v.removeChild(this),k(U)}}:function(U){setTimeout(w(U),0)}),t.exports={set:_,clear:C}},function(t,i,n){var a=n(95);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},function(t,i,n){var a=n(26),s=n(19),o=n(100);t.exports=function(l,d){if(a(l),s(d)&&d.constructor===l)return d;var c=o.f(l);return(0,c.resolve)(d),c.promise}},function(t,i,n){var a=n(4),s=n(23),o=n(43),l=n(100),d=n(130),c=n(64);a({target:"Promise",stat:!0},{allSettled:function(u){var h=this,f=l.f(h),g=f.resolve,v=f.reject,p=d(function(){var m=o(h.resolve),I=[],y=0,_=1;c(u,function(C){var A=y++,M=!1;_++,s(m,h,C).then(function(E){M||(M=!0,I[A]={status:"fulfilled",value:E},--_||g(I))},function(E){M||(M=!0,I[A]={status:"rejected",reason:E},--_||g(I))})}),--_||g(I)});return p.error&&v(p.value),f.promise}})},function(t,i,n){var a=n(4),s=n(43),o=n(32),l=n(23),d=n(100),c=n(130),u=n(64),h="No one promise resolved";a({target:"Promise",stat:!0},{any:function(f){var g=this,v=o("AggregateError"),p=d.f(g),m=p.resolve,I=p.reject,y=c(function(){var _=s(g.resolve),C=[],A=0,M=1,E=!1;u(f,function(R){var x=A++,P=!1;M++,l(_,g,R).then(function(F){P||E||(E=!0,m(F))},function(F){P||E||(P=!0,C[x]=F,--M||I(new v(C,h)))})}),--M||I(new v(C,h))});return y.error&&I(y.value),p.promise}})},function(t,i,n){var a=n(5),s=n(125),o=n(48),l=n(93),d=a("".charAt),c=a("".charCodeAt),u=a("".slice),h=function(f){return function(g,v){var p,m,I=o(l(g)),y=s(v),_=I.length;return y<0||y>=_?f?"":void 0:(p=c(I,y))<55296||p>56319||y+1===_||(m=c(I,y+1))<56320||m>57343?f?d(I,y):p:f?u(I,y,y+2):m-56320+(p-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},function(t,i,n){var a=n(2),s=n(27),o=n(29),l=n(133),d=n(134),c=n(307),u=n(21),h=a.TypeError,f=u("toPrimitive");t.exports=function(g,v){if(!o(g)||l(g))return g;var p,m=d(g,f);if(m){if(void 0===v&&(v="default"),p=s(m,g,v),!o(p)||l(p))return p;throw h("Can't convert object to primitive value")}return void 0===v&&(v="number"),c(g,v)}},function(t,i,n){var a=n(218);t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,i,n){var a=n(165),s=n(10);t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&a&&a<41})},function(t,i,n){var a=n(34),s=n(10),o=n(135);t.exports=!a&&!s(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,i,n){var a=n(7),s=n(30),o=n(69),l=n(172).indexOf,d=n(171),c=a([].push);t.exports=function(u,h){var f,g=o(u),v=0,p=[];for(f in g)!s(d,f)&&s(g,f)&&c(p,f);for(;h.length>v;)s(g,f=h[v++])&&(~l(p,f)||c(p,f));return p}},function(t,i,n){var a=n(10);t.exports=function(s,o){var l=[][s];return!!l&&a(function(){l.call(null,o||function(){throw 1},1)})}},function(t,i,n){var a=n(4),s=n(3),o=n(138),l=n(11),d=n(45),c=n(64),u=n(80),h=n(15),f=n(19),g=n(57),v=n(33).f,p=n(42).forEach,m=n(25),I=n(40),y=I.set,_=I.getterFor;t.exports=function(C,A,M){var E,R=-1!==C.indexOf("Map"),x=-1!==C.indexOf("Weak"),P=R?"set":"add",F=s[C],k=F&&F.prototype,w={};if(m&&h(F)&&(x||k.forEach&&!l(function(){(new F).entries().next()}))){var S=(E=A(function(U,Z){y(u(U,S),{type:C,collection:new F}),null!=Z&&c(Z,U[P],{that:U,AS_ENTRIES:R})})).prototype,L=_(C);p(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(U){var Z="add"==U||"set"==U;!(U in k)||x&&"clear"==U||d(S,U,function(ne,oe){var ue=L(this).collection;if(!Z&&x&&!f(ne))return"get"==U&&void 0;var X=ue[U](0===ne?0:ne,oe);return Z?this:X})}),x||v(S,"size",{configurable:!0,get:function(){return L(this).collection.size}})}else E=M.getConstructor(A,C,R,P),o.enable();return g(E,C,!1,!0),w[C]=E,a({global:!0,forced:!0},w),x||M.setStrong(E,C,R),E}},function(t,i,n){var a=n(62),s=n(54),o=n(123).f,l=n(47),d="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(c){return d&&"Window"==a(c)?function(u){try{return o(u)}catch(h){return l(d)}}(c):o(s(c))}},function(t,i,n){var a=n(11),s=n(19),o=n(62),l=n(316),d=Object.isExtensible,c=a(function(){d(1)});t.exports=c||l?function(u){return!!s(u)&&(!l||"ArrayBuffer"!=o(u))&&(!d||d(u))}:d},function(t,i,n){var a=n(25),s=n(5),o=n(23),l=n(11),d=n(126),c=n(159),u=n(150),h=n(37),f=n(117),g=Object.assign,v=Object.defineProperty,p=s([].concat);t.exports=!g||l(function(){if(a&&1!==g({b:1},g(v({},"a",{enumerable:!0,get:function(){v(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var m={},I={},y=Symbol(),_="abcdefghijklmnopqrst";return m[y]=7,_.split("").forEach(function(C){I[C]=C}),7!=g({},m)[y]||d(g({},I)).join("")!=_})?function(m,I){for(var y=h(m),_=arguments.length,C=1,A=c.f,M=u.f;_>C;)for(var E,R=f(arguments[C++]),x=A?p(d(R),A(R)):d(R),P=x.length,F=0;P>F;)E=x[F++],a&&!o(M,R,E)||(y[E]=R[E]);return y}:g},function(t,i,n){var a=n(4),s=n(3),o=n(11),l=n(107),d=n(19),c=n(37),u=n(46),h=n(139),f=n(175),g=n(108),v=n(12),p=n(94),m=v("isConcatSpreadable"),I=9007199254740991,y="Maximum allowed index exceeded",_=s.TypeError,C=p>=51||!o(function(){var E=[];return E[m]=!1,E.concat()[0]!==E}),A=g("concat"),M=function(E){if(!d(E))return!1;var R=E[m];return void 0!==R?!!R:l(E)};a({target:"Array",proto:!0,forced:!C||!A},{concat:function(E){var R,x,P,F,k,w=c(this),S=f(w,0),L=0;for(R=-1,P=arguments.length;R<P;R++)if(M(k=-1===R?w:arguments[R])){if(L+(F=u(k))>I)throw _(y);for(x=0;x<F;x++,L++)x in k&&h(S,L,k[x])}else{if(L>=I)throw _(y);h(S,L++,k)}return S.length=L,S}})},function(t,i,n){var a=n(58);t.exports=a("document","documentElement")},function(t,i,n){var a=n(68),s=n(27),o=n(104),l=n(105),d=n(17),c=n(343),u=n(141),h=n(84),f=n(142),g=n(49),v=n(41),p=n(21),m=n(111),I=n(229),y=l.PROPER,_=l.CONFIGURABLE,C=I.IteratorPrototype,A=I.BUGGY_SAFARI_ITERATORS,M=p("iterator"),E="keys",R="values",x="entries",P=function(){return this};t.exports=function(F,k,w,S,L,U,Z){c(w,k,S);var ne,oe,ue,X=function(be){if(be===L&&ee)return ee;if(!A&&be in K)return K[be];switch(be){case E:case R:case x:return function(){return new w(this,be)}}return function(){return new w(this)}},pe=k+" Iterator",B=!1,K=F.prototype,G=K[M]||K["@@iterator"]||L&&K[L],ee=!A&&G||X(L),ie="Array"==k&&K.entries||G;if(ie&&(ne=u(ie.call(new F)))!==Object.prototype&&ne.next&&(o||u(ne)===C||(h?h(ne,C):d(ne[M])||v(ne,M,P)),f(ne,pe,!0,!0),o&&(m[pe]=P)),y&&L==R&&G&&G.name!==R&&(!o&&_?g(K,"name",R):(B=!0,ee=function(){return s(G,this)})),L)if(oe={values:X(R),keys:U?ee:X(E),entries:X(x)},Z)for(ue in oe)(A||B||!(ue in K))&&v(K,ue,oe[ue]);else a({target:k,proto:!0,forced:A||B},oe);return o&&!Z||K[M]===ee||v(K,M,ee,{name:L}),m[k]=ee,oe}},function(t,i,n){var a,s,o,l=n(10),d=n(17),c=n(110),u=n(141),h=n(41),f=n(21),g=n(104),v=f("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(s=u(u(o)))!==Object.prototype&&(a=s):p=!0),null==a||l(function(){var m={};return a[v].call(m)!==m})?a={}:g&&(a=c(a)),d(a[v])||h(a,v,function(){return this}),t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},function(t,i,n){var a=n(2);t.exports=a.Promise},function(t,i,n){var a=n(41);t.exports=function(s,o,l){for(var d in o)a(s,d,o[d],l);return s}},function(t,i,n){var a=n(58),s=n(38),o=n(21),l=n(34),d=o("species");t.exports=function(c){var u=a(c);l&&u&&!u[d]&&(0,s.f)(u,d,{configurable:!0,get:function(){return this}})}},function(t,i,n){var a=n(21),s=n(111),o=a("iterator"),l=Array.prototype;t.exports=function(d){return void 0!==d&&(s.Array===d||l[o]===d)}},function(t,i,n){var a=n(2),s=n(27),o=n(71),l=n(28),d=n(103),c=n(179),u=a.TypeError;t.exports=function(h,f){var g=arguments.length<2?c(h):f;if(o(g))return l(s(g,h));throw u(d(h)+" is not iterable")}},function(t,i,n){var a=n(21)("iterator"),s=!1;try{var o=0,l={next:function(){return{done:!!o++}},return:function(){s=!0}};l[a]=function(){return this},Array.from(l,function(){throw 2})}catch(d){}t.exports=function(d,c){if(!c&&!s)return!1;var u=!1;try{var h={};h[a]=function(){return{next:function(){return{done:u=!0}}}},d(h)}catch(f){}return u}},function(t,i,n){var a=n(2),s=n(237),o=n(103),l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not a constructor")}},function(t,i,n){var a=n(7),s=n(10),o=n(17),l=n(85),d=n(58),c=n(136),u=function(){},h=[],f=d("Reflect","construct"),g=/^\s*(?:class|function)\b/,v=a(g.exec),p=!g.exec(u),m=function(I){if(!o(I))return!1;try{return f(u,h,I),!0}catch(y){return!1}};t.exports=!f||s(function(){var I;return m(m.call)||!m(Object)||!m(function(){I=!0})||I})?function(I){if(!o(I))return!1;switch(l(I)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return p||!!v(g,c(I))}:m},function(t,i,n){var a,s,o,l,d=n(2),c=n(114),u=n(112),h=n(17),f=n(30),g=n(10),v=n(227),p=n(86),m=n(135),I=n(239),y=n(180),_=d.setImmediate,C=d.clearImmediate,A=d.process,M=d.Dispatch,E=d.Function,R=d.MessageChannel,x=d.String,P=0,F={};try{a=d.location}catch(U){}var k=function(U){if(f(F,U)){var Z=F[U];delete F[U],Z()}},w=function(U){return function(){k(U)}},S=function(U){k(U.data)},L=function(U){d.postMessage(x(U),a.protocol+"//"+a.host)};_&&C||(_=function(U){var Z=p(arguments,1);return F[++P]=function(){c(h(U)?U:E(U),void 0,Z)},s(P),P},C=function(U){delete F[U]},y?s=function(U){A.nextTick(w(U))}:M&&M.now?s=function(U){M.now(w(U))}:R&&!I?(l=(o=new R).port2,o.port1.onmessage=S,s=u(l.postMessage,l)):d.addEventListener&&h(d.postMessage)&&!d.importScripts&&a&&"file:"!==a.protocol&&!g(L)?(s=L,d.addEventListener("message",S,!1)):s="onreadystatechange"in m("script")?function(U){v.appendChild(m("script")).onreadystatechange=function(){v.removeChild(this),k(U)}}:function(U){setTimeout(w(U),0)}),t.exports={set:_,clear:C}},function(t,i,n){var a=n(70);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},function(t,i,n){var a=n(28),s=n(29),o=n(241);t.exports=function(l,d){if(a(l),s(d)&&d.constructor===l)return d;var c=o.f(l);return(0,c.resolve)(d),c.promise}},function(t,i,n){var a=n(71),s=function(o){var l,d;this.promise=new o(function(c,u){if(void 0!==l||void 0!==d)throw TypeError("Bad Promise constructor");l=c,d=u}),this.resolve=a(l),this.reject=a(d)};t.exports.f=function(o){return new s(o)}},function(t,i,n){var a=n(7),s=n(73),o=n(115),l=n(102),d=a("".charAt),c=a("".charCodeAt),u=a("".slice),h=function(f){return function(g,v){var p,m,I=o(l(g)),y=s(v),_=I.length;return y<0||y>=_?f?"":void 0:(p=c(I,y))<55296||p>56319||y+1===_||(m=c(I,y+1))<56320||m>57343?f?d(I,y):p:f?u(I,y,y+2):m-56320+(p-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},function(t,i){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,i,n){var a=n(381);t.exports=a},function(t,i,n){var a=n(68),s=n(143);a({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},function(t,i,n){var a=n(10),s=n(2).RegExp;i.UNSUPPORTED_Y=a(function(){var o=s("a","y");return o.lastIndex=2,null!=o.exec("abcd")}),i.BROKEN_CARET=a(function(){var o=s("^r","gy");return o.lastIndex=2,null!=o.exec("str")})},function(t,i,n){var a=n(425);t.exports=a},function(t,i,n){var a=n(17),s=n(29),o=n(84);t.exports=function(l,d,c){var u,h;return o&&a(u=d.constructor)&&u!==c&&s(h=u.prototype)&&h!==c.prototype&&o(l,h),l}},function(t,i,n){var a=n(11),s=n(12),o=n(55),l=s("iterator");t.exports=!a(function(){var d=new URL("b?a=1&b=2&c=3","http://a"),c=d.searchParams,u="";return d.pathname="c%20d",c.forEach(function(h,f){c.delete("b"),u+=f+h}),o&&!d.toJSON||!c.sort||"http://a/c%20d?a=1&c=3"!==d.href||"3"!==c.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!c[l]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==u||"x"!==new URL("http://x",void 0).host})},function(t,i,n){var a=n(3),s=n(44),o=n(23),l=n(37),d=n(442),c=n(201),u=n(128),h=n(46),f=n(139),g=n(160),v=n(97),p=a.Array;t.exports=function(m){var I=l(m),y=u(this),_=arguments.length,C=_>1?arguments[1]:void 0,A=void 0!==C;A&&(C=s(C,_>2?arguments[2]:void 0));var M,E,R,x,P,F,k=v(I),w=0;if(!k||this==p&&c(k))for(M=h(I),E=y?new this(M):p(M);M>w;w++)F=A?C(I[w],w):I[w],f(E,w,F);else for(P=(x=g(I,k)).next,E=y?new this:[];!(R=o(P,x)).done;w++)F=A?d(x,C,[R.value,w],!0):R.value,f(E,w,F);return E.length=w,E}},function(t,i,n){n(66);var a=n(4),s=n(3),o=n(32),l=n(23),d=n(5),c=n(249),u=n(56),h=n(99),f=n(57),g=n(204),v=n(40),p=n(80),m=n(15),I=n(22),y=n(44),_=n(65),C=n(26),A=n(19),M=n(48),E=n(63),R=n(53),x=n(160),P=n(97),F=n(12),k=n(444),w=F("iterator"),S="URLSearchParams",L="URLSearchParamsIterator",U=v.set,Z=v.getterFor(S),ne=v.getterFor(L),oe=o("fetch"),ue=o("Request"),X=o("Headers"),pe=ue&&ue.prototype,B=X&&X.prototype,K=s.RegExp,G=s.TypeError,ee=s.decodeURIComponent,ie=s.encodeURIComponent,be=d("".charAt),Te=d([].join),Ge=d([].push),je=d("".replace),he=d([].shift),ae=d([].splice),V=d("".split),Q=d("".slice),me=/\+/g,H=Array(4),j=function(Ne){return H[Ne-1]||(H[Ne-1]=K("((?:%[\\da-f]{2}){"+Ne+"})","gi"))},q=function(Ne){try{return ee(Ne)}catch(Pe){return Ne}},re=function(Ne){var Pe=je(Ne,me," "),ze=4;try{return ee(Pe)}catch(ge){for(;ze;)Pe=je(Pe,j(ze--),q);return Pe}},de=/[!'()~]|%20/g,le={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},we=function(Ne){return le[Ne]},Ae=function(Ne){return je(ie(Ne),de,we)},Se=function(Ne,Pe){if(Pe)for(var ze,ge,Ee=V(Pe,"&"),Ue=0;Ue<Ee.length;)(ze=Ee[Ue++]).length&&(ge=V(ze,"="),Ge(Ne,{key:re(he(ge)),value:re(Te(ge,"="))}))},ye=function(Ne){this.entries.length=0,Se(this.entries,Ne)},Fe=function(Ne,Pe){if(Ne<Pe)throw G("Not enough arguments")},Ve=g(function(Ne,Pe){U(this,{type:L,iterator:x(Z(Ne).entries),kind:Pe})},"Iterator",function(){var Ne=ne(this),Pe=Ne.kind,ze=Ne.iterator.next(),ge=ze.value;return ze.done||(ze.value="keys"===Pe?ge.key:"values"===Pe?ge.value:[ge.key,ge.value]),ze}),ke=function(){p(this,$e);var Ne,Pe,ze,ge,Ee,Ue,Be,Qe,Ze,tt=arguments.length>0?arguments[0]:void 0,lt=this,dt=[];if(U(lt,{type:S,entries:dt,updateURL:function(){},updateSearchParams:ye}),void 0!==tt)if(A(tt))if(Ne=P(tt))for(ze=(Pe=x(tt,Ne)).next;!(ge=l(ze,Pe)).done;){if(Ue=(Ee=x(C(ge.value))).next,(Be=l(Ue,Ee)).done||(Qe=l(Ue,Ee)).done||!l(Ue,Ee).done)throw G("Expected sequence with length 2");Ge(dt,{key:M(Be.value),value:M(Qe.value)})}else for(Ze in tt)I(tt,Ze)&&Ge(dt,{key:Ze,value:M(tt[Ze])});else Se(dt,"string"==typeof tt?"?"===be(tt,0)?Q(tt,1):tt:M(tt))},$e=ke.prototype;if(h($e,{append:function(Ne,Pe){Fe(arguments.length,2);var ze=Z(this);Ge(ze.entries,{key:M(Ne),value:M(Pe)}),ze.updateURL()},delete:function(Ne){Fe(arguments.length,1);for(var Pe=Z(this),ze=Pe.entries,ge=M(Ne),Ee=0;Ee<ze.length;)ze[Ee].key===ge?ae(ze,Ee,1):Ee++;Pe.updateURL()},get:function(Ne){Fe(arguments.length,1);for(var Pe=Z(this).entries,ze=M(Ne),ge=0;ge<Pe.length;ge++)if(Pe[ge].key===ze)return Pe[ge].value;return null},getAll:function(Ne){Fe(arguments.length,1);for(var Pe=Z(this).entries,ze=M(Ne),ge=[],Ee=0;Ee<Pe.length;Ee++)Pe[Ee].key===ze&&Ge(ge,Pe[Ee].value);return ge},has:function(Ne){Fe(arguments.length,1);for(var Pe=Z(this).entries,ze=M(Ne),ge=0;ge<Pe.length;)if(Pe[ge++].key===ze)return!0;return!1},set:function(Ne,Pe){Fe(arguments.length,1);for(var ze,ge=Z(this),Ee=ge.entries,Ue=!1,Be=M(Ne),Qe=M(Pe),Ze=0;Ze<Ee.length;Ze++)(ze=Ee[Ze]).key===Be&&(Ue?ae(Ee,Ze--,1):(Ue=!0,ze.value=Qe));Ue||Ge(Ee,{key:Be,value:Qe}),ge.updateURL()},sort:function(){var Ne=Z(this);k(Ne.entries,function(Pe,ze){return Pe.key>ze.key?1:-1}),Ne.updateURL()},forEach:function(Ne){for(var Pe,ze=Z(this).entries,ge=y(Ne,arguments.length>1?arguments[1]:void 0),Ee=0;Ee<ze.length;)ge((Pe=ze[Ee++]).value,Pe.key,this)},keys:function(){return new Ve(this,"keys")},values:function(){return new Ve(this,"values")},entries:function(){return new Ve(this,"entries")}},{enumerable:!0}),u($e,w,$e.entries,{name:"entries"}),u($e,"toString",function(){for(var Ne,Pe=Z(this).entries,ze=[],ge=0;ge<Pe.length;)Ne=Pe[ge++],Ge(ze,Ae(Ne.key)+"="+Ae(Ne.value));return Te(ze,"&")},{enumerable:!0}),f(ke,S),a({global:!0,forced:!c},{URLSearchParams:ke}),!c&&m(X)){var Le=d(B.has),fe=d(B.set),De=function(Ne){if(A(Ne)){var Pe,ze=Ne.body;if(_(ze)===S)return Pe=Ne.headers?new X(Ne.headers):new X,Le(Pe,"content-type")||fe(Pe,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),E(Ne,{body:R(0,M(ze)),headers:R(0,Pe)})}return Ne};if(m(oe)&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(Ne){return oe(Ne,arguments.length>1?De(arguments[1]):{})}}),m(ue)){var Oe=function(Ne){return p(this,pe),new ue(Ne,arguments.length>1?De(arguments[1]):{})};pe.constructor=Oe,Oe.prototype=pe,a({global:!0,forced:!0},{Request:Oe})}}t.exports={URLSearchParams:ke,getState:Z}},function(t,i,n){var a=n(68),s=n(104),o=n(230),l=n(10),d=n(58),c=n(17),u=n(113),h=n(240),f=n(41);if(a({target:"Promise",proto:!0,real:!0,forced:!!o&&l(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(v){var p=u(this,d("Promise")),m=c(v);return this.then(m?function(I){return h(p,v()).then(function(){return I})}:v,m?function(I){return h(p,v()).then(function(){throw I})}:v)}}),!s&&c(o)){var g=d("Promise").prototype.finally;o.prototype.finally!==g&&f(o.prototype,"finally",g,{unsafe:!0})}},function(t,i,n){var a=n(460);n(67),t.exports=a},function(t,i,n){n(18)("asyncIterator")},function(t,i,n){n(18)("iterator")},function(t,i,n){var a=n(2),s=n(7),o=n(34),l=n(257),d=n(105),c=n(49),u=n(231),h=n(10),f=n(178),g=n(73),v=n(74),p=n(258),m=n(493),I=n(141),y=n(84),_=n(137).f,C=n(38).f,A=n(259),M=n(86),E=n(142),R=n(72),x=d.PROPER,P=d.CONFIGURABLE,F=R.get,k=R.set,w="ArrayBuffer",S="Wrong index",L=a.ArrayBuffer,U=L,Z=U&&U.prototype,ne=a.DataView,oe=ne&&ne.prototype,ue=Object.prototype,X=a.Array,pe=a.RangeError,B=s(A),K=s([].reverse),G=m.pack,ee=m.unpack,ie=function(le){return[255&le]},be=function(le){return[255&le,le>>8&255]},Te=function(le){return[255&le,le>>8&255,le>>16&255,le>>24&255]},Ge=function(le){return le[3]<<24|le[2]<<16|le[1]<<8|le[0]},je=function(le){return G(le,23,4)},he=function(le){return G(le,52,8)},ae=function(le,we){C(le.prototype,we,{get:function(){return F(this)[we]}})},V=function(le,we,Ae,Se){var ye=p(Ae),Fe=F(le);if(ye+we>Fe.byteLength)throw pe(S);var Ve=F(Fe.buffer).bytes,ke=ye+Fe.byteOffset,$e=M(Ve,ke,ke+we);return Se?$e:K($e)},Q=function(le,we,Ae,Se,ye,Fe){var Ve=p(Ae),ke=F(le);if(Ve+we>ke.byteLength)throw pe(S);for(var $e=F(ke.buffer).bytes,Le=Ve+ke.byteOffset,fe=Se(+ye),De=0;De<we;De++)$e[Le+De]=fe[Fe?De:we-De-1]};if(l){var me=x&&L.name!==w;if(h(function(){L(1)})&&h(function(){new L(-1)})&&!h(function(){return new L,new L(1.5),new L(NaN),me&&!P}))me&&P&&c(L,"name",w);else{(U=function(le){return f(this,Z),new L(p(le))}).prototype=Z;for(var H,j=_(L),q=0;j.length>q;)(H=j[q++])in U||c(U,H,L[H]);Z.constructor=U}y&&I(oe)!==ue&&y(oe,ue);var re=new ne(new U(2)),de=s(oe.setInt8);re.setInt8(0,2147483648),re.setInt8(1,2147483649),!re.getInt8(0)&&re.getInt8(1)||u(oe,{setInt8:function(le,we){de(this,le,we<<24>>24)},setUint8:function(le,we){de(this,le,we<<24>>24)}},{unsafe:!0})}else Z=(U=function(le){f(this,Z);var we=p(le);k(this,{bytes:B(X(we),0),byteLength:we}),o||(this.byteLength=we)}).prototype,oe=(ne=function(le,we,Ae){f(this,oe),f(le,Z);var Se=F(le).byteLength,ye=g(we);if(ye<0||ye>Se)throw pe("Wrong offset");if(ye+(Ae=void 0===Ae?Se-ye:v(Ae))>Se)throw pe("Wrong length");k(this,{buffer:le,byteLength:Ae,byteOffset:ye}),o||(this.buffer=le,this.byteLength=Ae,this.byteOffset=ye)}).prototype,o&&(ae(U,"byteLength"),ae(ne,"buffer"),ae(ne,"byteLength"),ae(ne,"byteOffset")),u(oe,{getInt8:function(le){return V(this,1,le)[0]<<24>>24},getUint8:function(le){return V(this,1,le)[0]},getInt16:function(le){var we=V(this,2,le,arguments.length>1?arguments[1]:void 0);return(we[1]<<8|we[0])<<16>>16},getUint16:function(le){var we=V(this,2,le,arguments.length>1?arguments[1]:void 0);return we[1]<<8|we[0]},getInt32:function(le){return Ge(V(this,4,le,arguments.length>1?arguments[1]:void 0))},getUint32:function(le){return Ge(V(this,4,le,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(le){return ee(V(this,4,le,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(le){return ee(V(this,8,le,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(le,we){Q(this,1,le,ie,we)},setUint8:function(le,we){Q(this,1,le,ie,we)},setInt16:function(le,we){Q(this,2,le,be,we,arguments.length>2?arguments[2]:void 0)},setUint16:function(le,we){Q(this,2,le,be,we,arguments.length>2?arguments[2]:void 0)},setInt32:function(le,we){Q(this,4,le,Te,we,arguments.length>2?arguments[2]:void 0)},setUint32:function(le,we){Q(this,4,le,Te,we,arguments.length>2?arguments[2]:void 0)},setFloat32:function(le,we){Q(this,4,le,je,we,arguments.length>2?arguments[2]:void 0)},setFloat64:function(le,we){Q(this,8,le,he,we,arguments.length>2?arguments[2]:void 0)}});E(U,w),E(ne,"DataView"),t.exports={ArrayBuffer:U,DataView:ne}},function(t,i){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,i,n){var a=n(2),s=n(73),o=n(74),l=a.RangeError;t.exports=function(d){if(void 0===d)return 0;var c=s(d),u=o(c);if(c!==u)throw l("Wrong length or index");return u}},function(t,i,n){var a=n(59),s=n(106),o=n(50);t.exports=function(l){for(var d=a(this),c=o(d),u=arguments.length,h=s(u>1?arguments[1]:void 0,c),f=u>2?arguments[2]:void 0,g=void 0===f?c:s(f,c);g>h;)d[h++]=l;return d}},function(t,i,n){var a=n(68),s=n(2),o=n(27),l=n(34),d=n(495),c=n(9),u=n(256),h=n(178),f=n(131),g=n(49),v=n(496),p=n(74),m=n(258),I=n(261),y=n(164),_=n(30),C=n(85),A=n(29),M=n(133),E=n(110),R=n(83),x=n(84),P=n(137).f,F=n(498),k=n(60).forEach,w=n(232),S=n(38),L=n(101),U=n(72),Z=n(248),ne=U.get,oe=U.set,ue=S.f,X=L.f,pe=Math.round,B=s.RangeError,K=u.ArrayBuffer,G=K.prototype,ee=u.DataView,ie=c.NATIVE_ARRAY_BUFFER_VIEWS,be=c.TYPED_ARRAY_CONSTRUCTOR,Te=c.TYPED_ARRAY_TAG,Ge=c.TypedArray,je=c.TypedArrayPrototype,he=c.aTypedArrayConstructor,ae=c.isTypedArray,V="BYTES_PER_ELEMENT",Q="Wrong length",me=function(le,we){he(le);for(var Ae=0,Se=we.length,ye=new le(Se);Se>Ae;)ye[Ae]=we[Ae++];return ye},H=function(le,we){ue(le,we,{get:function(){return ne(this)[we]}})},j=function(le){var we;return R(G,le)||"ArrayBuffer"==(we=C(le))||"SharedArrayBuffer"==we},q=function(le,we){return ae(le)&&!M(we)&&we in le&&v(+we)&&we>=0},re=function(le,we){return we=y(we),q(le,we)?f(2,le[we]):X(le,we)},de=function(le,we,Ae){return we=y(we),!(q(le,we)&&A(Ae)&&_(Ae,"value"))||_(Ae,"get")||_(Ae,"set")||Ae.configurable||_(Ae,"writable")&&!Ae.writable||_(Ae,"enumerable")&&!Ae.enumerable?ue(le,we,Ae):(le[we]=Ae.value,le)};l?(ie||(L.f=re,S.f=de,H(je,"buffer"),H(je,"byteOffset"),H(je,"byteLength"),H(je,"length")),a({target:"Object",stat:!0,forced:!ie},{getOwnPropertyDescriptor:re,defineProperty:de}),t.exports=function(le,we,Ae){var Se=le.match(/\d+$/)[0]/8,ye=le+(Ae?"Clamped":"")+"Array",Fe="get"+le,Ve="set"+le,ke=s[ye],$e=ke,Le=$e&&$e.prototype,fe={},De=function(Oe,Ne){ue(Oe,Ne,{get:function(){return ze=Ne,(ge=ne(this)).view[Fe](ze*Se+ge.byteOffset,!0);var ze,ge},set:function(Pe){return ge=Ne,Ee=Pe,Ue=ne(this),Ae&&(Ee=(Ee=pe(Ee))<0?0:Ee>255?255:255&Ee),void Ue.view[Ve](ge*Se+Ue.byteOffset,Ee,!0);var ge,Ee,Ue},enumerable:!0})};ie?d&&($e=we(function(Oe,Ne,Pe,ze){return h(Oe,Le),Z(A(Ne)?j(Ne)?void 0!==ze?new ke(Ne,I(Pe,Se),ze):void 0!==Pe?new ke(Ne,I(Pe,Se)):new ke(Ne):ae(Ne)?me($e,Ne):o(F,$e,Ne):new ke(m(Ne)),Oe,$e)}),x&&x($e,Ge),k(P(ke),function(Oe){Oe in $e||g($e,Oe,ke[Oe])}),$e.prototype=Le):($e=we(function(Oe,Ne,Pe,ze){h(Oe,Le);var ge,Ee,Ue,Be=0,Qe=0;if(A(Ne)){if(!j(Ne))return ae(Ne)?me($e,Ne):o(F,$e,Ne);ge=Ne,Qe=I(Pe,Se);var Ze=Ne.byteLength;if(void 0===ze){if(Ze%Se||(Ee=Ze-Qe)<0)throw B(Q)}else if((Ee=p(ze)*Se)+Qe>Ze)throw B(Q);Ue=Ee/Se}else Ue=m(Ne),ge=new K(Ee=Ue*Se);for(oe(Oe,{buffer:ge,byteOffset:Qe,byteLength:Ee,length:Ue,view:new ee(ge)});Be<Ue;)De(Oe,Be++)}),x&&x($e,Ge),Le=$e.prototype=E(je)),Le.constructor!==$e&&g(Le,"constructor",$e),g(Le,be,$e),Te&&g(Le,Te,ye),fe[ye]=$e,a({global:!0,forced:$e!=ke,sham:!ie},fe),V in $e||g($e,V,Se),V in Le||g(Le,V,Se),w(ye)}):t.exports=function(){}},function(t,i,n){var a=n(2),s=n(497),o=a.RangeError;t.exports=function(l,d){var c=s(l);if(c%d)throw o("Wrong offset");return c}},function(t,i,n){var a=n(2),s=n(71),o=n(59),l=n(132),d=n(50),c=a.TypeError,u=function(h){return function(f,g,v,p){s(g);var m=o(f),I=l(m),y=d(m),_=h?y-1:0,C=h?-1:1;if(v<2)for(;;){if(_ in I){p=I[_],_+=C;break}if(_+=C,h?_<0:y<=_)throw c("Reduce of empty array with no initial value")}for(;h?_>=0:y>_;_+=C)_ in I&&(p=g(p,I[_],_,m));return p}};t.exports={left:u(!1),right:u(!0)}},function(t,i){t.exports=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){t.exports=n(416)},function(t,i,n){t.exports=n(420)},function(t,i,n){var a=n(427),s=n(429);t.exports=function(o,l){if(null==o)return{};var d,c,u={},h=a(o);for(c=0;c<h.length;c++)d=h[c],s(l).call(l,d)>=0||(u[d]=o[d]);return u},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){t.exports=n(439)},function(t,i,n){t.exports=n(446)},function(t,i,n){var a=n(458),s=n(484),o=n(488),l=n(189);function d(c){function u(h){if(Object(h)!==h)return l.reject(new TypeError(h+" is not an object."));var f=h.done;return l.resolve(h.value).then(function(g){return{value:g,done:f}})}return(d=function(h){this.s=h,this.n=h.next}).prototype={s:null,n:null,next:function(){return u(this.n.apply(this.s,arguments))},return:function(h){var f=this.s.return;return void 0===f?l.resolve({value:h,done:!0}):u(f.apply(this.s,arguments))},throw:function(h){var f=this.s.return;return void 0===f?l.reject(h):u(f.apply(this.s,arguments))}},new d(c)}t.exports=function(c){var u,h,f,g=2;for(void 0!==a&&(h=s,f=o);g--;){if(h&&null!=(u=c[h]))return u.call(c);if(f&&null!=(u=c[f]))return new d(u.call(c));h="@@asyncIterator",f="@@iterator"}throw new TypeError("Object is not async iterable")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){t.exports=n(534)},function(t,i,n){t.exports=n(537)},function(t,i,n){t.exports=n(253)},function(t,i,n){t.exports=n(540)},function(t,i,n){t.exports=n(543)},function(t,i,n){t.exports=n(550)},function(t,i,n){var a=n(553);function s(o,l){for(var d=0;d<l.length;d++){var c=l[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),a(o,c.key,c)}}t.exports=function(o,l,d){return l&&s(o.prototype,l),d&&s(o,d),o},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){var a=n(190);n(301),n(302),n(303),n(304),t.exports=a},function(t,i,n){n(191),n(66),n(98),n(292),n(213),n(214),n(299),n(81);var a=n(16);t.exports=a.Promise},function(t,i,n){var a=n(3),s=n(23),o=n(19),l=n(151),d=n(153),c=n(280),u=n(12),h=a.TypeError,f=u("toPrimitive");t.exports=function(g,v){if(!o(g)||l(g))return g;var p,m=d(g,f);if(m){if(void 0===v&&(v="default"),p=s(m,g,v),!o(p)||l(p))return p;throw h("Can't convert object to primitive value")}return void 0===v&&(v="number"),c(g,v)}},function(t,i,n){var a=n(3),s=n(23),o=n(15),l=n(19),d=a.TypeError;t.exports=function(c,u){var h,f;if("string"===u&&o(h=c.toString)&&!l(f=s(h,c))||o(h=c.valueOf)&&!l(f=s(h,c))||"string"!==u&&o(h=c.toString)&&!l(f=s(h,c)))return f;throw d("Can't convert object to primitive value")}},function(t,i,n){var a=n(3),s=Object.defineProperty;t.exports=function(o,l){try{s(a,o,{value:l,configurable:!0,writable:!0})}catch(d){a[o]=l}return l}},function(t,i,n){var a=n(11);t.exports=!a(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},function(t,i,n){var a=n(3),s=n(15),o=a.String,l=a.TypeError;t.exports=function(d){if("object"==typeof d||s(d))return d;throw l("Can't set "+o(d)+" as a prototype")}},function(t,i,n){var a=n(22),s=n(285),o=n(92),l=n(33);t.exports=function(d,c){for(var u=s(c),h=l.f,f=o.f,g=0;g<u.length;g++){var v=u[g];a(d,v)||h(d,v,f(c,v))}}},function(t,i,n){var a=n(32),s=n(5),o=n(123),l=n(159),d=n(26),c=s([].concat);t.exports=a("Reflect","ownKeys")||function(u){var h=o.f(d(u)),f=l.f;return f?c(h,f(u)):h}},function(t,i,n){var a=n(5),s=n(47),o=a("".replace),l=a("".split),d=a([].join),c=String(Error("zxcasd").stack),u=/\n\s*at [^:]*:[^\n]*/,h=u.test(c),f=/@[^\n]*\n/.test(c)&&!/zxcasd/.test(c);t.exports=function(g,v){if("string"!=typeof g)return g;if(h)for(;v--;)g=o(g,u,"");else if(f)return d(s(l(g,"\n"),v),"\n");return g}},function(t,i,n){var a=n(19),s=n(45);t.exports=function(o,l){a(l)&&"cause"in l&&s(o,"cause",l.cause)}},function(t,i,n){var a=n(48);t.exports=function(s,o){return void 0===s?arguments.length<2?"":o:a(s)}},function(t,i,n){var a=n(11),s=n(53);t.exports=!a(function(){var o=Error("a");return!("stack"in o)||(Object.defineProperty(o,"stack",s(1,7)),7!==o.stack)})},function(t,i,n){var a=n(25),s=n(22),o=Function.prototype,l=a&&Object.getOwnPropertyDescriptor,d=s(o,"name"),c=d&&"something"===function(){}.name,u=d&&(!a||a&&l(o,"name").configurable);t.exports={EXISTS:d,PROPER:c,CONFIGURABLE:u}},function(t,i,n){var a=n(161),s=n(65);t.exports=a?{}.toString:function(){return"[object "+s(this)+"]"}},function(t,i,n){var a,s,o,l,d=n(4),c=n(55),u=n(3),h=n(32),f=n(23),g=n(206),v=n(56),p=n(99),m=n(122),I=n(57),y=n(207),_=n(43),C=n(15),A=n(19),M=n(80),E=n(162),R=n(64),x=n(208),P=n(209),F=n(210).set,k=n(294),w=n(212),S=n(297),L=n(100),U=n(130),Z=n(40),ne=n(195),oe=n(12),ue=n(298),X=n(129),pe=n(94),B=oe("species"),K="Promise",G=Z.get,ee=Z.set,ie=Z.getterFor(K),be=g&&g.prototype,Te=g,Ge=be,je=u.TypeError,he=u.document,ae=u.process,V=L.f,Q=V,me=!!(he&&he.createEvent&&u.dispatchEvent),H=C(u.PromiseRejectionEvent),j="unhandledrejection",q=!1,re=ne(K,function(){var Le=E(Te),fe=Le!==String(Te);if(!fe&&66===pe||c&&!Ge.finally)return!0;if(pe>=51&&/native code/.test(Le))return!1;var De=new Te(function(Ne){Ne(1)}),Oe=function(Ne){Ne(function(){},function(){})};return(De.constructor={})[B]=Oe,!(q=De.then(function(){})instanceof Oe)||!fe&&ue&&!H}),de=re||!x(function(Le){Te.all(Le).catch(function(){})}),le=function(Le){var fe;return!(!A(Le)||!C(fe=Le.then))&&fe},we=function(Le,fe){if(!Le.notified){Le.notified=!0;var De=Le.reactions;k(function(){for(var Oe=Le.value,Ne=1==Le.state,Pe=0;De.length>Pe;){var ze,ge,Ee,Ue=De[Pe++],Be=Ne?Ue.ok:Ue.fail,Qe=Ue.resolve,Ze=Ue.reject,tt=Ue.domain;try{Be?(Ne||(2===Le.rejection&&Fe(Le),Le.rejection=1),!0===Be?ze=Oe:(tt&&tt.enter(),ze=Be(Oe),tt&&(tt.exit(),Ee=!0)),ze===Ue.promise?Ze(je("Promise-chain cycle")):(ge=le(ze))?f(ge,ze,Qe,Ze):Qe(ze)):Ze(Oe)}catch(lt){tt&&!Ee&&tt.exit(),Ze(lt)}}Le.reactions=[],Le.notified=!1,fe&&!Le.rejection&&Se(Le)})}},Ae=function(Le,fe,De){var Oe,Ne;me?((Oe=he.createEvent("Event")).promise=fe,Oe.reason=De,Oe.initEvent(Le,!1,!0),u.dispatchEvent(Oe)):Oe={promise:fe,reason:De},!H&&(Ne=u["on"+Le])?Ne(Oe):Le===j&&S("Unhandled promise rejection",De)},Se=function(Le){f(F,u,function(){var fe,De=Le.facade,Oe=Le.value;if(ye(Le)&&(fe=U(function(){X?ae.emit("unhandledRejection",Oe,De):Ae(j,De,Oe)}),Le.rejection=X||ye(Le)?2:1,fe.error))throw fe.value})},ye=function(Le){return 1!==Le.rejection&&!Le.parent},Fe=function(Le){f(F,u,function(){var fe=Le.facade;X?ae.emit("rejectionHandled",fe):Ae("rejectionhandled",fe,Le.value)})},Ve=function(Le,fe,De){return function(Oe){Le(fe,Oe,De)}},ke=function(Le,fe,De){Le.done||(Le.done=!0,De&&(Le=De),Le.value=fe,Le.state=2,we(Le,!0))},$e=function(Le,fe,De){if(!Le.done){Le.done=!0,De&&(Le=De);try{if(Le.facade===fe)throw je("Promise can't be resolved itself");var Oe=le(fe);Oe?k(function(){var Ne={done:!1};try{f(Oe,fe,Ve($e,Ne,Le),Ve(ke,Ne,Le))}catch(Pe){ke(Ne,Pe,Le)}}):(Le.value=fe,Le.state=1,we(Le,!1))}catch(Ne){ke({done:!1},Ne,Le)}}};if(re&&(Ge=(Te=function(Le){M(this,Ge),_(Le),f(a,this);var fe=G(this);try{Le(Ve($e,fe),Ve(ke,fe))}catch(De){ke(fe,De)}}).prototype,(a=function(Le){ee(this,{type:K,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(Ge,{then:function(Le,fe){var De=ie(this),Oe=De.reactions,Ne=V(P(this,Te));return Ne.ok=!C(Le)||Le,Ne.fail=C(fe)&&fe,Ne.domain=X?ae.domain:void 0,De.parent=!0,Oe[Oe.length]=Ne,0!=De.state&&we(De,!1),Ne.promise},catch:function(Le){return this.then(void 0,Le)}}),s=function(){var Le=new a,fe=G(Le);this.promise=Le,this.resolve=Ve($e,fe),this.reject=Ve(ke,fe)},L.f=V=function(Le){return Le===Te||Le===o?new s(Le):Q(Le)},!c&&C(g)&&be!==Object.prototype)){l=be.then,q||(v(be,"then",function(Le,fe){var De=this;return new Te(function(Oe,Ne){f(l,De,Oe,Ne)}).then(Le,fe)},{unsafe:!0}),v(be,"catch",Ge.catch,{unsafe:!0}));try{delete be.constructor}catch(Le){}m&&m(be,Ge)}d({global:!0,wrap:!0,forced:re},{Promise:Te}),I(Te,K,!1,!0),y(K),o=h(K),d({target:K,stat:!0,forced:re},{reject:function(Le){var fe=V(this);return f(fe.reject,void 0,Le),fe.promise}}),d({target:K,stat:!0,forced:c||re},{resolve:function(Le){return w(c&&this===o?Te:this,Le)}}),d({target:K,stat:!0,forced:de},{all:function(Le){var fe=this,De=V(fe),Oe=De.resolve,Ne=De.reject,Pe=U(function(){var ze=_(fe.resolve),ge=[],Ee=0,Ue=1;R(Le,function(Be){var Qe=Ee++,Ze=!1;Ue++,f(ze,fe,Be).then(function(tt){Ze||(Ze=!0,ge[Qe]=tt,--Ue||Oe(ge))},Ne)}),--Ue||Oe(ge)});return Pe.error&&Ne(Pe.value),De.promise},race:function(Le){var fe=this,De=V(fe),Oe=De.reject,Ne=U(function(){var Pe=_(fe.resolve);R(Le,function(ze){f(Pe,fe,ze).then(De.resolve,Oe)})});return Ne.error&&Oe(Ne.value),De.promise}})},function(t,i,n){var a=n(3),s=n(128),o=n(119),l=a.TypeError;t.exports=function(d){if(s(d))return d;throw l(o(d)+" is not a constructor")}},function(t,i,n){var a,s,o,l,d,c,u,h,f=n(3),g=n(44),v=n(92).f,p=n(210).set,m=n(211),I=n(295),y=n(296),_=n(129),C=f.MutationObserver||f.WebKitMutationObserver,A=f.document,M=f.process,E=f.Promise,R=v(f,"queueMicrotask"),x=R&&R.value;x||(a=function(){var P,F;for(_&&(P=M.domain)&&P.exit();s;){F=s.fn,s=s.next;try{F()}catch(k){throw s?l():o=void 0,k}}o=void 0,P&&P.enter()},m||_||y||!C||!A?!I&&E&&E.resolve?((u=E.resolve(void 0)).constructor=E,h=g(u.then,u),l=function(){h(a)}):_?l=function(){M.nextTick(a)}:(p=g(p,f),l=function(){p(a)}):(d=!0,c=A.createTextNode(""),new C(a).observe(c,{characterData:!0}),l=function(){c.data=d=!d})),t.exports=x||function(P){var F={fn:P,next:void 0};o&&(o.next=F),s||(s=F,l()),o=F}},function(t,i,n){var a=n(95),s=n(3);t.exports=/ipad|iphone|ipod/i.test(a)&&void 0!==s.Pebble},function(t,i,n){var a=n(95);t.exports=/web0s(?!.*chrome)/i.test(a)},function(t,i,n){var a=n(3);t.exports=function(s,o){var l=a.console;l&&l.error&&(1==arguments.length?l.error(s):l.error(s,o))}},function(t,i){t.exports="object"==typeof window},function(t,i,n){var a=n(4),s=n(55),o=n(206),l=n(11),d=n(32),c=n(15),u=n(209),h=n(212),f=n(56);if(a({target:"Promise",proto:!0,real:!0,forced:!!o&&l(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(v){var p=u(this,d("Promise")),m=c(v);return this.then(m?function(I){return h(p,v()).then(function(){return I})}:v,m?function(I){return h(p,v()).then(function(){throw I})}:v)}}),!s&&c(o)){var g=d("Promise").prototype.finally;o.prototype.finally!==g&&f(o.prototype,"finally",g,{unsafe:!0})}},function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,i,n){n(191)},function(t,i,n){n(213)},function(t,i,n){var a=n(4),s=n(100),o=n(130);a({target:"Promise",stat:!0},{try:function(l){var d=s.f(this),c=o(l);return(c.error?d.reject:d.resolve)(c.value),d.promise}})},function(t,i,n){n(214)},function(t,i,n){var a=n(68),s=n(7),o=n(132),l=n(69),d=n(221),c=s([].join),u=o!=Object,h=d("join",",");a({target:"Array",proto:!0,forced:u||!h},{join:function(f){return c(l(this),void 0===f?",":f)}})},function(t,i,n){var a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!a.call({1:2},1);i.f=o?function(l){var d=s(this,l);return!!d&&d.enumerable}:a},function(t,i,n){var a=n(2),s=n(27),o=n(17),l=n(29),d=a.TypeError;t.exports=function(c,u){var h,f;if("string"===u&&o(h=c.toString)&&!l(f=s(h,c))||o(h=c.valueOf)&&!l(f=s(h,c))||"string"!==u&&o(h=c.toString)&&!l(f=s(h,c)))return f;throw d("Can't convert object to primitive value")}},function(t,i,n){var a=n(2),s=n(17),o=n(136),l=a.WeakMap;t.exports=s(l)&&/native code/.test(o(l))},function(t,i,n){var a=n(30),s=n(310),o=n(101),l=n(38);t.exports=function(d,c){for(var u=s(c),h=l.f,f=o.f,g=0;g<u.length;g++){var v=u[g];a(d,v)||h(d,v,f(c,v))}}},function(t,i,n){var a=n(58),s=n(7),o=n(137),l=n(311),d=n(28),c=s([].concat);t.exports=a("Reflect","ownKeys")||function(u){var h=o.f(d(u)),f=l.f;return f?c(h,f(u)):h}},function(t,i){i.f=Object.getOwnPropertySymbols},function(t,i,n){var a=function(s){var o,l=Object.prototype,d=l.hasOwnProperty,c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",h=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function g(ue,X,pe){return Object.defineProperty(ue,X,{value:pe,enumerable:!0,configurable:!0,writable:!0}),ue[X]}try{g({},"")}catch(ue){g=function(X,pe,B){return X[pe]=B}}function v(ue,X,pe,B){var ie,be,Te,Ge,G=Object.create((X&&X.prototype instanceof A?X:A).prototype),ee=new Z(B||[]);return G._invoke=(ie=ue,be=pe,Te=ee,Ge=m,function(je,he){if(Ge===y)throw new Error("Generator is already running");if(Ge===_){if("throw"===je)throw he;return oe()}for(Te.method=je,Te.arg=he;;){var ae=Te.delegate;if(ae){var V=S(ae,Te);if(V){if(V===C)continue;return V}}if("next"===Te.method)Te.sent=Te._sent=Te.arg;else if("throw"===Te.method){if(Ge===m)throw Ge=_,Te.arg;Te.dispatchException(Te.arg)}else"return"===Te.method&&Te.abrupt("return",Te.arg);Ge=y;var Q=p(ie,be,Te);if("normal"===Q.type){if(Ge=Te.done?_:I,Q.arg===C)continue;return{value:Q.arg,done:Te.done}}"throw"===Q.type&&(Ge=_,Te.method="throw",Te.arg=Q.arg)}}),G}function p(ue,X,pe){try{return{type:"normal",arg:ue.call(X,pe)}}catch(B){return{type:"throw",arg:B}}}s.wrap=v;var m="suspendedStart",I="suspendedYield",y="executing",_="completed",C={};function A(){}function M(){}function E(){}var R={};g(R,u,function(){return this});var x=Object.getPrototypeOf,P=x&&x(x(ne([])));P&&P!==l&&d.call(P,u)&&(R=P);var F=E.prototype=A.prototype=Object.create(R);function k(ue){["next","throw","return"].forEach(function(X){g(ue,X,function(pe){return this._invoke(X,pe)})})}function w(ue,X){function pe(K,G,ee,ie){var be=p(ue[K],ue,G);if("throw"!==be.type){var Te=be.arg,Ge=Te.value;return Ge&&"object"==typeof Ge&&d.call(Ge,"__await")?X.resolve(Ge.__await).then(function(je){pe("next",je,ee,ie)},function(je){pe("throw",je,ee,ie)}):X.resolve(Ge).then(function(je){Te.value=je,ee(Te)},function(je){return pe("throw",je,ee,ie)})}ie(be.arg)}var B;this._invoke=function(K,G){function ee(){return new X(function(ie,be){pe(K,G,ie,be)})}return B=B?B.then(ee,ee):ee()}}function S(ue,X){var pe=ue.iterator[X.method];if(pe===o){if(X.delegate=null,"throw"===X.method){if(ue.iterator.return&&(X.method="return",X.arg=o,S(ue,X),"throw"===X.method))return C;X.method="throw",X.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var B=p(pe,ue.iterator,X.arg);if("throw"===B.type)return X.method="throw",X.arg=B.arg,X.delegate=null,C;var K=B.arg;return K?K.done?(X[ue.resultName]=K.value,X.next=ue.nextLoc,"return"!==X.method&&(X.method="next",X.arg=o),X.delegate=null,C):K:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,C)}function L(ue){var X={tryLoc:ue[0]};1 in ue&&(X.catchLoc=ue[1]),2 in ue&&(X.finallyLoc=ue[2],X.afterLoc=ue[3]),this.tryEntries.push(X)}function U(ue){var X=ue.completion||{};X.type="normal",delete X.arg,ue.completion=X}function Z(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(L,this),this.reset(!0)}function ne(ue){if(ue){var X=ue[u];if(X)return X.call(ue);if("function"==typeof ue.next)return ue;if(!isNaN(ue.length)){var pe=-1,B=function K(){for(;++pe<ue.length;)if(d.call(ue,pe))return K.value=ue[pe],K.done=!1,K;return K.value=o,K.done=!0,K};return B.next=B}}return{next:oe}}function oe(){return{value:o,done:!0}}return M.prototype=E,g(F,"constructor",E),g(E,"constructor",M),M.displayName=g(E,f,"GeneratorFunction"),s.isGeneratorFunction=function(ue){var X="function"==typeof ue&&ue.constructor;return!!X&&(X===M||"GeneratorFunction"===(X.displayName||X.name))},s.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,E):(ue.__proto__=E,g(ue,f,"GeneratorFunction")),ue.prototype=Object.create(F),ue},s.awrap=function(ue){return{__await:ue}},k(w.prototype),g(w.prototype,h,function(){return this}),s.AsyncIterator=w,s.async=function(ue,X,pe,B,K){void 0===K&&(K=Promise);var G=new w(v(ue,X,pe,B),K);return s.isGeneratorFunction(X)?G:G.next().then(function(ee){return ee.done?ee.value:G.next()})},k(F),g(F,f,"Generator"),g(F,u,function(){return this}),g(F,"toString",function(){return"[object Generator]"}),s.keys=function(ue){var X=[];for(var pe in ue)X.push(pe);return X.reverse(),function B(){for(;X.length;){var K=X.pop();if(K in ue)return B.value=K,B.done=!1,B}return B.done=!0,B}},s.values=ne,Z.prototype={constructor:Z,reset:function(ue){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(U),!ue)for(var X in this)"t"===X.charAt(0)&&d.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=o)},stop:function(){this.done=!0;var ue=this.tryEntries[0].completion;if("throw"===ue.type)throw ue.arg;return this.rval},dispatchException:function(ue){if(this.done)throw ue;var X=this;function pe(be,Te){return G.type="throw",G.arg=ue,X.next=be,Te&&(X.method="next",X.arg=o),!!Te}for(var B=this.tryEntries.length-1;B>=0;--B){var K=this.tryEntries[B],G=K.completion;if("root"===K.tryLoc)return pe("end");if(K.tryLoc<=this.prev){var ee=d.call(K,"catchLoc"),ie=d.call(K,"finallyLoc");if(ee&&ie){if(this.prev<K.catchLoc)return pe(K.catchLoc,!0);if(this.prev<K.finallyLoc)return pe(K.finallyLoc)}else if(ee){if(this.prev<K.catchLoc)return pe(K.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return pe(K.finallyLoc)}}}},abrupt:function(ue,X){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var B=this.tryEntries[pe];if(B.tryLoc<=this.prev&&d.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var K=B;break}}K&&("break"===ue||"continue"===ue)&&K.tryLoc<=X&&X<=K.finallyLoc&&(K=null);var G=K?K.completion:{};return G.type=ue,G.arg=X,K?(this.method="next",this.next=K.finallyLoc,C):this.complete(G)},complete:function(ue,X){if("throw"===ue.type)throw ue.arg;return"break"===ue.type||"continue"===ue.type?this.next=ue.arg:"return"===ue.type?(this.rval=this.arg=ue.arg,this.method="return",this.next="end"):"normal"===ue.type&&X&&(this.next=X),C},finish:function(ue){for(var X=this.tryEntries.length-1;X>=0;--X){var pe=this.tryEntries[X];if(pe.finallyLoc===ue)return this.complete(pe.completion,pe.afterLoc),U(pe),C}},catch:function(ue){for(var X=this.tryEntries.length-1;X>=0;--X){var pe=this.tryEntries[X];if(pe.tryLoc===ue){var B=pe.completion;if("throw"===B.type){var K=B.arg;U(pe)}return K}}throw new Error("illegal catch attempt")},delegateYield:function(ue,X,pe){return this.delegate={iterator:ne(ue),resultName:X,nextLoc:pe},"next"===this.method&&(this.arg=o),C}},s}(t.exports);try{regeneratorRuntime=a}catch(s){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(t,i,n){var a=n(314);n(67),t.exports=a},function(t,i,n){n(66),n(315),n(98),n(81);var a=n(16);t.exports=a.Map},function(t,i,n){n(222)("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},n(319))},function(t,i,n){var a=n(11);t.exports=a(function(){if("function"==typeof ArrayBuffer){var s=new ArrayBuffer(8);Object.isExtensible(s)&&Object.defineProperty(s,"a",{value:8})}})},function(t,i,n){var a=n(11);t.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,i,n){var a=n(3),s=n(107),o=n(128),l=n(19),d=n(12)("species"),c=a.Array;t.exports=function(u){var h;return s(u)&&(o(h=u.constructor)&&(h===c||s(h.prototype))||l(h)&&null===(h=h[d]))&&(h=void 0),void 0===h?c:h}},function(t,i,n){var a=n(33).f,s=n(63),o=n(99),l=n(44),d=n(80),c=n(64),u=n(163),h=n(207),f=n(25),g=n(138).fastKey,v=n(40),p=v.set,m=v.getterFor;t.exports={getConstructor:function(I,y,_,C){var A=I(function(P,F){d(P,M),p(P,{type:y,index:s(null),first:void 0,last:void 0,size:0}),f||(P.size=0),null!=F&&c(F,P[C],{that:P,AS_ENTRIES:_})}),M=A.prototype,E=m(y),R=function(P,F,k){var w,S,L=E(P),U=x(P,F);return U?U.value=k:(L.last=U={index:S=g(F,!0),key:F,value:k,previous:w=L.last,next:void 0,removed:!1},L.first||(L.first=U),w&&(w.next=U),f?L.size++:P.size++,"F"!==S&&(L.index[S]=U)),P},x=function(P,F){var k,w=E(P),S=g(F);if("F"!==S)return w.index[S];for(k=w.first;k;k=k.next)if(k.key==F)return k};return o(M,{clear:function(){for(var P=E(this),F=P.index,k=P.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete F[k.index],k=k.next;P.first=P.last=void 0,f?P.size=0:this.size=0},delete:function(P){var F=this,k=E(F),w=x(F,P);if(w){var S=w.next,L=w.previous;delete k.index[w.index],w.removed=!0,L&&(L.next=S),S&&(S.previous=L),k.first==w&&(k.first=S),k.last==w&&(k.last=L),f?k.size--:F.size--}return!!w},forEach:function(P){for(var F,k=E(this),w=l(P,arguments.length>1?arguments[1]:void 0);F=F?F.next:k.first;)for(w(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(P){return!!x(this,P)}}),o(M,_?{get:function(P){var F=x(this,P);return F&&F.value},set:function(P,F){return R(this,0===P?0:P,F)}}:{add:function(P){return R(this,P=0===P?0:P,P)}}),f&&a(M,"size",{get:function(){return E(this).size}}),A},setStrong:function(I,y,_){var C=y+" Iterator",A=m(y),M=m(C);u(I,y,function(E,R){p(this,{type:C,target:E,state:A(E),kind:R,last:void 0})},function(){for(var E=M(this),R=E.kind,x=E.last;x&&x.removed;)x=x.previous;return E.target&&(E.last=x=x?x.next:E.state.first)?"keys"==R?{value:x.key,done:!1}:"values"==R?{value:x.value,done:!1}:{value:[x.key,x.value],done:!1}:(E.target=void 0,{value:void 0,done:!0})},_?"entries":"values",!_,!0),h(y)}}},function(t,i,n){var a=n(321);t.exports=a},function(t,i,n){var a=n(20),s=n(322),o=Array.prototype;t.exports=function(l){var d=l.fill;return l===o||a(o,l)&&d===o.fill?s:d}},function(t,i,n){n(323);var a=n(24);t.exports=a("Array").fill},function(t,i,n){var a=n(4),s=n(324),o=n(127);a({target:"Array",proto:!0},{fill:s}),o("fill")},function(t,i,n){var a=n(37),s=n(124),o=n(46);t.exports=function(l){for(var d=a(this),c=o(d),u=arguments.length,h=s(u>1?arguments[1]:void 0,c),f=u>2?arguments[2]:void 0,g=void 0===f?c:s(f,c);g>h;)d[h++]=l;return d}},function(t,i,n){var a=n(326);t.exports=a},function(t,i,n){var a=n(20),s=n(327),o=Array.prototype;t.exports=function(l){var d=l.filter;return l===o||a(o,l)&&d===o.filter?s:d}},function(t,i,n){n(328);var a=n(24);t.exports=a("Array").filter},function(t,i,n){var a=n(4),s=n(42).filter;a({target:"Array",proto:!0,forced:!n(108)("filter")},{filter:function(o){return s(this,o,arguments.length>1?arguments[1]:void 0)}})},function(t,i,n){var a=n(330);t.exports=a},function(t,i,n){n(331);var a=n(16);t.exports=a.Object.assign},function(t,i,n){var a=n(4),s=n(225);a({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},function(t,i,n){var a=n(333);t.exports=a},function(t,i,n){var a=n(20),s=n(334),o=Array.prototype;t.exports=function(l){var d=l.concat;return l===o||a(o,l)&&d===o.concat?s:d}},function(t,i,n){n(226);var a=n(24);t.exports=a("Array").concat},function(t,i,n){n(67);var a=n(65),s=n(22),o=n(20),l=n(336),d=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(u){var h=u.forEach;return u===d||o(d,u)&&h===d.forEach||s(c,a(u))?l:h}},function(t,i,n){var a=n(337);t.exports=a},function(t,i,n){n(338);var a=n(24);t.exports=a("Array").forEach},function(t,i,n){var a=n(4),s=n(339);a({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},function(t,i,n){var a=n(42).forEach,s=n(109)("forEach");t.exports=s?[].forEach:function(o){return a(this,o,arguments.length>1?arguments[1]:void 0)}},function(t,i,n){var a=n(21),s=n(110),o=n(38),l=a("unscopables"),d=Array.prototype;null==d[l]&&o.f(d,l,{configurable:!0,value:s(null)}),t.exports=function(c){d[l][c]=!0}},function(t,i,n){var a=n(34),s=n(38),o=n(28),l=n(69),d=n(342);t.exports=a?Object.defineProperties:function(c,u){o(c);for(var h,f=l(u),g=d(u),v=g.length,p=0;v>p;)s.f(c,h=g[p++],f[h]);return c}},function(t,i,n){var a=n(220),s=n(173);t.exports=Object.keys||function(o){return a(o,s)}},function(t,i,n){var a=n(229).IteratorPrototype,s=n(110),o=n(131),l=n(142),d=n(111),c=function(){return this};t.exports=function(u,h,f){var g=h+" Iterator";return u.prototype=s(a,{next:o(1,f)}),l(u,g,!1,!0),d[g]=c,u}},function(t,i,n){var a=n(10);t.exports=!a(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},function(t,i,n){var a=n(2),s=n(17),o=a.String,l=a.TypeError;t.exports=function(d){if("object"==typeof d||s(d))return d;throw l("Can't set "+o(d)+" as a prototype")}},function(t,i,n){var a=n(176),s=n(85);t.exports=a?{}.toString:function(){return"[object "+s(this)+"]"}},function(t,i,n){var a=n(2),s=n(112),o=n(27),l=n(28),d=n(103),c=n(233),u=n(50),h=n(83),f=n(234),g=n(179),v=n(348),p=a.TypeError,m=function(y,_){this.stopped=y,this.result=_},I=m.prototype;t.exports=function(y,_,C){var A,M,E,R,x,P,F,w=!(!C||!C.AS_ENTRIES),S=!(!C||!C.IS_ITERATOR),L=!(!C||!C.INTERRUPTED),U=s(_,C&&C.that),Z=function(oe){return A&&v(A,"normal",oe),new m(!0,oe)},ne=function(oe){return w?(l(oe),L?U(oe[0],oe[1],Z):U(oe[0],oe[1])):L?U(oe,Z):U(oe)};if(S)A=y;else{if(!(M=g(y)))throw p(d(y)+" is not iterable");if(c(M)){for(E=0,R=u(y);R>E;E++)if((x=ne(y[E]))&&h(I,x))return x;return new m(!1)}A=f(y,M)}for(P=A.next;!(F=o(P,A)).done;){try{x=ne(F.value)}catch(oe){v(A,"throw",oe)}if("object"==typeof x&&x&&h(I,x))return x}return new m(!1)}},function(t,i,n){var a=n(27),s=n(28),o=n(134);t.exports=function(l,d,c){var u,h;s(l);try{if(!(u=o(l,"return"))){if("throw"===d)throw c;return c}u=a(u,l)}catch(f){h=!0,u=f}if("throw"===d)throw c;if(h)throw u;return s(u),c}},function(t,i,n){var a,s,o,l,d,c,u,h,f=n(2),g=n(112),v=n(101).f,p=n(238).set,m=n(239),I=n(350),y=n(351),_=n(180),C=f.MutationObserver||f.WebKitMutationObserver,A=f.document,M=f.process,E=f.Promise,R=v(f,"queueMicrotask"),x=R&&R.value;x||(a=function(){var P,F;for(_&&(P=M.domain)&&P.exit();s;){F=s.fn,s=s.next;try{F()}catch(k){throw s?l():o=void 0,k}}o=void 0,P&&P.enter()},m||_||y||!C||!A?!I&&E&&E.resolve?((u=E.resolve(void 0)).constructor=E,h=g(u.then,u),l=function(){h(a)}):_?l=function(){M.nextTick(a)}:(p=g(p,f),l=function(){p(a)}):(d=!0,c=A.createTextNode(""),new C(a).observe(c,{characterData:!0}),l=function(){c.data=d=!d})),t.exports=x||function(P){var F={fn:P,next:void 0};o&&(o.next=F),s||(s=F,l()),o=F}},function(t,i,n){var a=n(70),s=n(2);t.exports=/ipad|iphone|ipod/i.test(a)&&void 0!==s.Pebble},function(t,i,n){var a=n(70);t.exports=/web0s(?!.*chrome)/i.test(a)},function(t,i,n){var a=n(2);t.exports=function(s,o){var l=a.console;l&&l.error&&(1==arguments.length?l.error(s):l.error(s,o))}},function(t,i){t.exports=function(n){try{return{error:!1,value:n()}}catch(a){return{error:!0,value:a}}}},function(t,i){t.exports="object"==typeof window},function(t,i,n){var a=n(242).charAt,s=n(115),o=n(72),l=n(228),d="String Iterator",c=o.set,u=o.getterFor(d);l(String,"String",function(h){c(this,{type:d,string:s(h),index:0})},function(){var h,f=u(this),g=f.string,v=f.index;return v>=g.length?{value:void 0,done:!0}:(h=a(g,v),f.index+=h.length,{value:h,done:!1})})},function(t,i,n){var a=n(2),s=n(357),o=n(358),l=n(140),d=n(49),c=n(21),u=c("iterator"),h=c("toStringTag"),f=l.values,g=function(p,m){if(p){if(p[u]!==f)try{d(p,u,f)}catch(y){p[u]=f}if(p[h]||d(p,h,m),s[m])for(var I in l)if(p[I]!==l[I])try{d(p,I,l[I])}catch(y){p[I]=l[I]}}};for(var v in s)g(a[v]&&a[v].prototype,v);g(o,"DOMTokenList")},function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,i,n){var a=n(135)("span").classList,s=a&&a.constructor&&a.constructor.prototype;t.exports=s===Object.prototype?void 0:s},function(t,i,n){var a=n(360);t.exports=a},function(t,i,n){var a=n(20),s=n(361),o=Array.prototype;t.exports=function(l){var d=l.splice;return l===o||a(o,l)&&d===o.splice?s:d}},function(t,i,n){n(362);var a=n(24);t.exports=a("Array").splice},function(t,i,n){var a=n(4),s=n(3),o=n(124),l=n(125),d=n(46),c=n(37),u=n(175),h=n(139),f=n(108)("splice"),g=s.TypeError,v=Math.max,p=Math.min,m=9007199254740991,I="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f},{splice:function(y,_){var C,A,M,E,R,x,P=c(this),F=d(P),k=o(y,F),w=arguments.length;if(0===w?C=A=0:1===w?(C=0,A=F-k):(C=w-2,A=p(v(l(_),0),F-k)),F+C-A>m)throw g(I);for(M=u(P,A),E=0;E<A;E++)(R=k+E)in P&&h(M,E,P[R]);if(M.length=A,C<A){for(E=k;E<F-A;E++)x=E+C,(R=E+A)in P?P[x]=P[R]:delete P[x];for(E=F;E>F-A+C;E--)delete P[E-1]}else if(C>A)for(E=F-A;E>k;E--)x=E+C-1,(R=E+A-1)in P?P[x]=P[R]:delete P[x];for(E=0;E<C;E++)P[E+k]=arguments[E+2];return P.length=F-A+C,M}})},function(t,i,n){t.exports=n(364)},function(t,i,n){var a=n(365);t.exports=a},function(t,i,n){var a=n(366);t.exports=a},function(t,i,n){n(367);var a=n(16).Object;t.exports=function(s,o){return a.create(s,o)}},function(t,i,n){n(4)({target:"Object",stat:!0,sham:!n(25)},{create:n(63)})},function(t,i,n){var a=n(369);function s(o,l){return t.exports=s=a||function(d,c){return d.__proto__=c,d},t.exports.default=t.exports,t.exports.__esModule=!0,s(o,l)}t.exports=s,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,i,n){t.exports=n(370)},function(t,i,n){var a=n(371);t.exports=a},function(t,i,n){var a=n(372);t.exports=a},function(t,i,n){n(373);var a=n(16);t.exports=a.Object.setPrototypeOf},function(t,i,n){n(4)({target:"Object",stat:!0},{setPrototypeOf:n(122)})},function(t,i,n){var a=n(375);t.exports=a},function(t,i,n){n(376);var a=n(16);t.exports=a.parseInt},function(t,i,n){var a=n(4),s=n(377);a({global:!0,forced:parseInt!=s},{parseInt:s})},function(t,i,n){var a=n(3),s=n(11),o=n(5),l=n(48),d=n(378).trim,c=n(243),u=a.parseInt,h=a.Symbol,f=h&&h.iterator,g=/^[+-]?0x/i,v=o(g.exec),p=8!==u(c+"08")||22!==u(c+"0x16")||f&&!s(function(){u(Object(f))});t.exports=p?function(m,I){var y=d(l(m));return u(y,I>>>0||(v(g,y)?16:10))}:u},function(t,i,n){var a=n(5),s=n(93),o=n(48),l=n(243),d=a("".replace),c="["+l+"]",u=RegExp("^"+c+c+"*"),h=RegExp(c+c+"*$"),f=function(g){return function(v){var p=o(s(v));return 1&g&&(p=d(p,u,"")),2&g&&(p=d(p,h,"")),p}};t.exports={start:f(1),end:f(2),trim:f(3)}},function(t,i,n){n(380);var a=n(16);t.exports=a.setTimeout},function(t,i,n){var a=n(4),s=n(3),o=n(78),l=n(15),d=n(95),c=n(47),u=/MSIE .\./.test(d),h=s.Function,f=function(g){return function(v,p){var m=arguments.length>2,I=m?c(arguments,2):void 0;return g(m?function(){o(l(v)?v:h(v),this,I)}:v,p)}};a({global:!0,bind:!0,forced:u},{setTimeout:f(s.setTimeout),setInterval:f(s.setInterval)})},function(t,i,n){var a=n(20),s=n(382),o=Array.prototype;t.exports=function(l){var d=l.indexOf;return l===o||a(o,l)&&d===o.indexOf?s:d}},function(t,i,n){n(383);var a=n(24);t.exports=a("Array").indexOf},function(t,i,n){var a=n(4),s=n(5),o=n(197).indexOf,l=n(109),d=s([].indexOf),c=!!d&&1/d([1],1,-0)<0,u=l("indexOf");a({target:"Array",proto:!0,forced:c||!u},{indexOf:function(h){var f=arguments.length>1?arguments[1]:void 0;return c?d(this,h,f)||0:o(this,h,f)}})},function(t,i,n){var a=n(385);t.exports=a},function(t,i,n){var a=n(20),s=n(386),o=Array.prototype;t.exports=function(l){var d=l.slice;return l===o||a(o,l)&&d===o.slice?s:d}},function(t,i,n){n(387);var a=n(24);t.exports=a("Array").slice},function(t,i,n){var a=n(4),s=n(3),o=n(107),l=n(128),d=n(19),c=n(124),u=n(46),h=n(54),f=n(139),g=n(12),v=n(108),p=n(47),m=v("slice"),I=g("species"),y=s.Array,_=Math.max;a({target:"Array",proto:!0,forced:!m},{slice:function(C,A){var M,E,R,x=h(this),P=u(x),F=c(C,P),k=c(void 0===A?P:A,P);if(o(x)&&((l(M=x.constructor)&&(M===y||o(M.prototype))||d(M)&&null===(M=M[I]))&&(M=void 0),M===y||void 0===M))return p(x,F,k);for(E=new(void 0===M?y:M)(_(k-F,0)),R=0;F<k;F++,R++)F in x&&f(E,R,x[F]);return E.length=R,E}})},function(t,i,n){var a=n(389);t.exports=a},function(t,i,n){n(390);var a=n(16);t.exports=a.Math.fround},function(t,i,n){n(4)({target:"Math",stat:!0},{fround:n(391)})},function(t,i,n){var a=n(392),s=Math.abs,o=Math.pow,l=o(2,-52),d=o(2,-23),c=o(2,127)*(2-d),u=o(2,-126);t.exports=Math.fround||function(h){var f,g,v=s(h),p=a(h);return v<u?p*(v/u/d+1/l-1/l)*u*d:(g=(f=(1+d/l)*v)-(f-v))>c||g!=g?p*(1/0):p*g}},function(t,i){t.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1}},function(t,i,n){var a=n(394);t.exports=a},function(t,i,n){var a=n(20),s=n(395),o=Array.prototype;t.exports=function(l){var d=l.map;return l===o||a(o,l)&&d===o.map?s:d}},function(t,i,n){n(396);var a=n(24);t.exports=a("Array").map},function(t,i,n){var a=n(4),s=n(42).map;a({target:"Array",proto:!0,forced:!n(108)("map")},{map:function(o){return s(this,o,arguments.length>1?arguments[1]:void 0)}})},function(t,i,n){var a=n(398);t.exports=a},function(t,i,n){var a=n(20),s=n(399),o=Function.prototype;t.exports=function(l){var d=l.bind;return l===o||a(o,l)&&d===o.bind?s:d}},function(t,i,n){n(400);var a=n(24);t.exports=a("Function").bind},function(t,i,n){n(4)({target:"Function",proto:!0},{bind:n(401)})},function(t,i,n){var a=n(3),s=n(5),o=n(43),l=n(19),d=n(22),c=n(47),u=a.Function,h=s([].concat),f=s([].join),g={},v=function(p,m,I){if(!d(g,m)){for(var y=[],_=0;_<m;_++)y[_]="a["+_+"]";g[m]=u("C,a","return new C("+f(y,",")+")")}return g[m](p,I)};t.exports=u.bind||function(p){var m=o(this),I=m.prototype,y=c(arguments,1),_=function(){var C=h(y,c(arguments));return this instanceof _?v(m,C.length,C):m.apply(p,C)};return l(I)&&(_.prototype=I),_}},function(t,i,n){var a=n(28);t.exports=function(){var s=a(this),o="";return s.global&&(o+="g"),s.ignoreCase&&(o+="i"),s.multiline&&(o+="m"),s.dotAll&&(o+="s"),s.unicode&&(o+="u"),s.sticky&&(o+="y"),o}},function(t,i,n){var a=n(10),s=n(2).RegExp;t.exports=a(function(){var o=s(".","s");return!(o.dotAll&&o.exec("\n")&&"s"===o.flags)})},function(t,i,n){var a=n(10),s=n(2).RegExp;t.exports=a(function(){var o=s("(?<a>b)","g");return"b"!==o.exec("b").groups.a||"bc"!=="b".replace(o,"$<a>c")})},function(t,i,n){var a=n(114),s=n(27),o=n(7),l=n(406),d=n(407),c=n(28),u=n(102),h=n(113),f=n(408),g=n(74),v=n(115),p=n(134),m=n(86),I=n(409),y=n(143),_=n(246),C=n(10),A=_.UNSUPPORTED_Y,M=4294967295,E=Math.min,R=[].push,x=o(/./.exec),P=o(R),F=o("".slice);l("split",function(k,w,S){var L;return L="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(U,Z){var ne=v(u(this)),oe=void 0===Z?M:Z>>>0;if(0===oe)return[];if(void 0===U)return[ne];if(!d(U))return s(w,ne,U,oe);for(var ue,X,pe,B=[],G=0,ee=new RegExp(U.source,(U.ignoreCase?"i":"")+(U.multiline?"m":"")+(U.unicode?"u":"")+(U.sticky?"y":"")+"g");(ue=s(y,ee,ne))&&!((X=ee.lastIndex)>G&&(P(B,F(ne,G,ue.index)),ue.length>1&&ue.index<ne.length&&a(R,B,m(ue,1)),pe=ue[0].length,G=X,B.length>=oe));)ee.lastIndex===ue.index&&ee.lastIndex++;return G===ne.length?!pe&&x(ee,"")||P(B,""):P(B,F(ne,G)),B.length>oe?m(B,0,oe):B}:"0".split(void 0,0).length?function(U,Z){return void 0===U&&0===Z?[]:s(w,this,U,Z)}:w,[function(U,Z){var ne=u(this),oe=null==U?void 0:p(U,k);return oe?s(oe,U,ne,Z):s(L,v(ne),U,Z)},function(U,Z){var ne=c(this),oe=v(U),ue=S(L,ne,oe,Z,L!==w);if(ue.done)return ue.value;var X=h(ne,RegExp),pe=ne.unicode,K=new X(A?"^(?:"+ne.source+")":ne,(ne.ignoreCase?"i":"")+(ne.multiline?"m":"")+(ne.unicode?"u":"")+(A?"g":"y")),G=void 0===Z?M:Z>>>0;if(0===G)return[];if(0===oe.length)return null===I(K,oe)?[oe]:[];for(var ee=0,ie=0,be=[];ie<oe.length;){K.lastIndex=A?0:ie;var Te,Ge=I(K,A?F(oe,ie):oe);if(null===Ge||(Te=E(g(K.lastIndex+(A?ie:0)),oe.length))===ee)ie=f(oe,ie,pe);else{if(P(be,F(oe,ee,ie)),be.length===G)return be;for(var je=1;je<=Ge.length-1;je++)if(P(be,Ge[je]),be.length===G)return be;ie=ee=Te}}return P(be,F(oe,ee)),be}]},!!C(function(){var k=/(?:)/,w=k.exec;k.exec=function(){return w.apply(this,arguments)};var S="ab".split(k);return 2!==S.length||"a"!==S[0]||"b"!==S[1]}),A)},function(t,i,n){n(245);var a=n(7),s=n(41),o=n(143),l=n(10),d=n(21),c=n(49),u=d("species"),h=RegExp.prototype;t.exports=function(f,g,v,p){var m=d(f),I=!l(function(){var A={};return A[m]=function(){return 7},7!=""[f](A)}),y=I&&!l(function(){var A=!1,M=/a/;return"split"===f&&((M={}).constructor={},M.constructor[u]=function(){return M},M.flags="",M[m]=/./[m]),M.exec=function(){return A=!0,null},M[m](""),!A});if(!I||!y||v){var _=a(/./[m]),C=g(m,""[f],function(A,M,E,R,x){var P=a(A),F=M.exec;return F===o||F===h.exec?I&&!x?{done:!0,value:_(M,E,R)}:{done:!0,value:P(E,M,R)}:{done:!1}});s(String.prototype,f,C[0]),s(h,m,C[1])}p&&c(h[m],"sham",!0)}},function(t,i,n){var a=n(29),s=n(82),o=n(21)("match");t.exports=function(l){var d;return a(l)&&(void 0!==(d=l[o])?!!d:"RegExp"==s(l))}},function(t,i,n){var a=n(242).charAt;t.exports=function(s,o,l){return o+(l?a(s,o).length:1)}},function(t,i,n){var a=n(2),s=n(27),o=n(28),l=n(17),d=n(82),c=n(143),u=a.TypeError;t.exports=function(h,f){var g=h.exec;if(l(g)){var v=s(g,h,f);return null!==v&&o(v),v}if("RegExp"===d(h))return s(c,h,f);throw u("RegExp#exec called on incompatible receiver")}},function(t,i,n){var a=n(411);t.exports=a},function(t,i,n){n(412);var a=n(16);t.exports=a.Array.isArray},function(t,i,n){n(4)({target:"Array",stat:!0},{isArray:n(107)})},function(t,i,n){var a=n(414);t.exports=a},function(t,i,n){n(415);var a=n(16);t.exports=a.Number.isNaN},function(t,i,n){n(4)({target:"Number",stat:!0},{isNaN:function(a){return a!=a}})},function(t,i,n){var a=n(417);n(67),t.exports=a},function(t,i,n){n(66),n(98),n(418);var a=n(16);t.exports=a.WeakMap},function(t,i,n){var a,s=n(3),o=n(5),l=n(99),d=n(138),c=n(222),u=n(419),h=n(19),f=n(224),g=n(40).enforce,v=n(203),p=!s.ActiveXObject&&"ActiveXObject"in s,m=function(E){return function(){return E(this,arguments.length?arguments[0]:void 0)}},I=c("WeakMap",m,u);if(v&&p){a=u.getConstructor(m,"WeakMap",!0),d.enable();var y=I.prototype,_=o(y.delete),C=o(y.has),A=o(y.get),M=o(y.set);l(y,{delete:function(E){if(h(E)&&!f(E)){var R=g(this);return R.frozen||(R.frozen=new a),_(this,E)||R.frozen.delete(E)}return _(this,E)},has:function(E){if(h(E)&&!f(E)){var R=g(this);return R.frozen||(R.frozen=new a),C(this,E)||R.frozen.has(E)}return C(this,E)},get:function(E){if(h(E)&&!f(E)){var R=g(this);return R.frozen||(R.frozen=new a),C(this,E)?A(this,E):R.frozen.get(E)}return A(this,E)},set:function(E,R){if(h(E)&&!f(E)){var x=g(this);x.frozen||(x.frozen=new a),C(this,E)?M(this,E,R):x.frozen.set(E,R)}else M(this,E,R);return this}})}},function(t,i,n){var a=n(5),s=n(99),o=n(138).getWeakData,l=n(26),d=n(19),c=n(80),u=n(64),h=n(42),f=n(22),g=n(40),v=g.set,p=g.getterFor,m=h.find,I=h.findIndex,y=a([].splice),_=0,C=function(E){return E.frozen||(E.frozen=new A)},A=function(){this.entries=[]},M=function(E,R){return m(E.entries,function(x){return x[0]===R})};A.prototype={get:function(E){var R=M(this,E);if(R)return R[1]},has:function(E){return!!M(this,E)},set:function(E,R){var x=M(this,E);x?x[1]=R:this.entries.push([E,R])},delete:function(E){var R=I(this.entries,function(x){return x[0]===E});return~R&&y(this.entries,R,1),!!~R}},t.exports={getConstructor:function(E,R,x,P){var F=E(function(L,U){c(L,k),v(L,{type:R,id:_++,frozen:void 0}),null!=U&&u(U,L[P],{that:L,AS_ENTRIES:x})}),k=F.prototype,w=p(R),S=function(L,U,Z){var ne=w(L),oe=o(l(U),!0);return!0===oe?C(ne).set(U,Z):oe[ne.id]=Z,L};return s(k,{delete:function(L){var U=w(this);if(!d(L))return!1;var Z=o(L);return!0===Z?C(U).delete(L):Z&&f(Z,U.id)&&delete Z[U.id]},has:function(L){var U=w(this);if(!d(L))return!1;var Z=o(L);return!0===Z?C(U).has(L):Z&&f(Z,U.id)}}),s(k,x?{get:function(L){var U=w(this);if(d(L)){var Z=o(L);return!0===Z?C(U).get(L):Z?Z[U.id]:void 0}},set:function(L,U){return S(this,L,U)}}:{add:function(L){return S(this,L,!0)}}),F}}},function(t,i,n){var a=n(421);t.exports=a},function(t,i,n){var a=n(20),s=n(422),o=Array.prototype;t.exports=function(l){var d=l.reduce;return l===o||a(o,l)&&d===o.reduce?s:d}},function(t,i,n){n(423);var a=n(24);t.exports=a("Array").reduce},function(t,i,n){var a=n(4),s=n(424).left,o=n(109),l=n(94),d=n(129);a({target:"Array",proto:!0,forced:!o("reduce")||!d&&l>79&&l<83},{reduce:function(c){var u=arguments.length;return s(this,c,u,u>1?arguments[1]:void 0)}})},function(t,i,n){var a=n(3),s=n(43),o=n(37),l=n(117),d=n(46),c=a.TypeError,u=function(h){return function(f,g,v,p){s(g);var m=o(f),I=l(m),y=d(m),_=h?y-1:0,C=h?-1:1;if(v<2)for(;;){if(_ in I){p=I[_],_+=C;break}if(_+=C,h?_<0:y<=_)throw c("Reduce of empty array with no initial value")}for(;h?_>=0:y>_;_+=C)_ in I&&(p=g(p,I[_],_,m));return p}};t.exports={left:u(!1),right:u(!0)}},function(t,i,n){n(426);var a=n(16);t.exports=a.Object.keys},function(t,i,n){var a=n(4),s=n(37),o=n(126);a({target:"Object",stat:!0,forced:n(11)(function(){o(1)})},{keys:function(l){return o(s(l))}})},function(t,i,n){t.exports=n(428)},function(t,i,n){var a=n(247);t.exports=a},function(t,i,n){t.exports=n(430)},function(t,i,n){var a=n(244);t.exports=a},function(t,i,n){var a=n(34),s=n(2),o=n(7),l=n(174),d=n(41),c=n(30),u=n(248),h=n(83),f=n(133),g=n(216),v=n(10),p=n(137).f,m=n(101).f,I=n(38).f,y=n(432),_=n(433).trim,C="Number",A=s.Number,M=A.prototype,E=s.TypeError,R=o("".slice),x=o("".charCodeAt),P=function(U){var Z=g(U,"number");return"bigint"==typeof Z?Z:F(Z)},F=function(U){var Z,ne,oe,ue,X,pe,B,K,G=g(U,"number");if(f(G))throw E("Cannot convert a Symbol value to a number");if("string"==typeof G&&G.length>2)if(G=_(G),43===(Z=x(G,0))||45===Z){if(88===(ne=x(G,2))||120===ne)return NaN}else if(48===Z){switch(x(G,1)){case 66:case 98:oe=2,ue=49;break;case 79:case 111:oe=8,ue=55;break;default:return+G}for(pe=(X=R(G,2)).length,B=0;B<pe;B++)if((K=x(X,B))<48||K>ue)return NaN;return parseInt(X,oe)}return+G};if(l(C,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var k,w=function(U){var Z=arguments.length<1?0:A(P(U)),ne=this;return h(M,ne)&&v(function(){y(ne)})?u(Object(Z),ne,w):Z},S=a?p(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;S.length>L;L++)c(A,k=S[L])&&!c(w,k)&&I(w,k,m(A,k));w.prototype=M,M.constructor=w,d(s,C,w)}},function(t,i,n){var a=n(7);t.exports=a(1..valueOf)},function(t,i,n){var a=n(7),s=n(102),o=n(115),l=n(434),d=a("".replace),c="["+l+"]",u=RegExp("^"+c+c+"*"),h=RegExp(c+c+"*$"),f=function(g){return function(v){var p=o(s(v));return 1&g&&(p=d(p,u,"")),2&g&&(p=d(p,h,"")),p}};t.exports={start:f(1),end:f(2),trim:f(3)}},function(t,i){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,i,n){var a=n(436);t.exports=a},function(t,i,n){var a=n(20),s=n(437),o=Array.prototype;t.exports=function(l){var d=l.some;return l===o||a(o,l)&&d===o.some?s:d}},function(t,i,n){n(438);var a=n(24);t.exports=a("Array").some},function(t,i,n){var a=n(4),s=n(42).some;a({target:"Array",proto:!0,forced:!n(109)("some")},{some:function(o){return s(this,o,arguments.length>1?arguments[1]:void 0)}})},function(t,i,n){var a=n(440);t.exports=a},function(t,i,n){n(441),n(445),n(251);var a=n(16);t.exports=a.URL},function(t,i,n){n(81);var a,s=n(4),o=n(25),l=n(249),d=n(3),c=n(44),u=n(23),h=n(5),f=n(199),g=n(56),v=n(80),p=n(22),m=n(225),I=n(250),y=n(47),_=n(215).codeAt,C=n(443),A=n(48),M=n(57),E=n(251),R=n(40),x=R.set,P=R.getterFor("URL"),F=E.URLSearchParams,k=E.getState,w=d.URL,S=d.TypeError,L=d.parseInt,U=Math.floor,Z=Math.pow,ne=h("".charAt),oe=h(/./.exec),ue=h([].join),X=h(1..toString),pe=h([].pop),B=h([].push),K=h("".replace),G=h([].shift),ee=h("".split),ie=h("".slice),be=h("".toLowerCase),Te=h([].unshift),Ge="Invalid scheme",je="Invalid host",he="Invalid port",ae=/[a-z]/i,V=/[\d+-.a-z]/i,Q=/\d/,me=/^0x/i,H=/^[0-7]+$/,j=/^\d+$/,q=/^[\da-f]+$/i,re=/[\0\t\n\r #%/:<>?@[\\\]^|]/,de=/[\0\t\n\r #/:<>?@[\\\]^|]/,le=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,we=/[\t\n\r]/g,Ae=function(qe,bt){var At,ht,Zt;if("["==ne(bt,0)){if("]"!=ne(bt,bt.length-1)||!(At=ye(ie(bt,1,-1))))return je;qe.host=At}else if(Oe(qe)){if(bt=C(bt),oe(re,bt)||null===(At=Se(bt)))return je;qe.host=At}else{if(oe(de,bt))return je;for(At="",ht=I(bt),Zt=0;Zt<ht.length;Zt++)At+=fe(ht[Zt],Ve);qe.host=At}},Se=function(qe){var bt,At,ht,Zt,yt,yr,Cr,ar=ee(qe,".");if(ar.length&&""==ar[ar.length-1]&&ar.length--,(bt=ar.length)>4)return qe;for(At=[],ht=0;ht<bt;ht++){if(""==(Zt=ar[ht]))return qe;if(yt=10,Zt.length>1&&"0"==ne(Zt,0)&&(yt=oe(me,Zt)?16:8,Zt=ie(Zt,8==yt?1:2)),""===Zt)yr=0;else{if(!oe(10==yt?j:8==yt?H:q,Zt))return qe;yr=L(Zt,yt)}B(At,yr)}for(ht=0;ht<bt;ht++)if(yr=At[ht],ht==bt-1){if(yr>=Z(256,5-bt))return null}else if(yr>255)return null;for(Cr=pe(At),ht=0;ht<At.length;ht++)Cr+=At[ht]*Z(256,3-ht);return Cr},ye=function(qe){var bt,At,ht,Zt,yt,yr,Cr,ar=[0,0,0,0,0,0,0,0],St=0,_r=null,Gt=0,Gr=function(){return ne(qe,Gt)};if(":"==Gr()){if(":"!=ne(qe,1))return;Gt+=2,_r=++St}for(;Gr();){if(8==St)return;if(":"!=Gr()){for(bt=At=0;At<4&&oe(q,Gr());)bt=16*bt+L(Gr(),16),Gt++,At++;if("."==Gr()){if(0==At||(Gt-=At,St>6))return;for(ht=0;Gr();){if(Zt=null,ht>0){if(!("."==Gr()&&ht<4))return;Gt++}if(!oe(Q,Gr()))return;for(;oe(Q,Gr());){if(yt=L(Gr(),10),null===Zt)Zt=yt;else{if(0==Zt)return;Zt=10*Zt+yt}if(Zt>255)return;Gt++}ar[St]=256*ar[St]+Zt,2!=++ht&&4!=ht||St++}if(4!=ht)return;break}if(":"==Gr()){if(Gt++,!Gr())return}else if(Gr())return;ar[St++]=bt}else{if(null!==_r)return;Gt++,_r=++St}}if(null!==_r)for(yr=St-_r,St=7;0!=St&&yr>0;)Cr=ar[St],ar[St--]=ar[_r+yr-1],ar[_r+--yr]=Cr;else if(8!=St)return;return ar},Fe=function(qe){var bt,At,ht,Zt;if("number"==typeof qe){for(bt=[],At=0;At<4;At++)Te(bt,qe%256),qe=U(qe/256);return ue(bt,".")}if("object"==typeof qe){for(bt="",ht=function(yt){for(var yr=null,Cr=1,ar=null,St=0,_r=0;_r<8;_r++)0!==yt[_r]?(St>Cr&&(yr=ar,Cr=St),ar=null,St=0):(null===ar&&(ar=_r),++St);return St>Cr&&(yr=ar,Cr=St),yr}(qe),At=0;At<8;At++)Zt&&0===qe[At]||(Zt&&(Zt=!1),ht===At?(bt+=At?":":"::",Zt=!0):(bt+=X(qe[At],16),At<7&&(bt+=":")));return"["+bt+"]"}return qe},Ve={},ke=m({},Ve,{" ":1,'"':1,"<":1,">":1,"`":1}),$e=m({},ke,{"#":1,"?":1,"{":1,"}":1}),Le=m({},$e,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),fe=function(qe,bt){var At=_(qe,0);return At>32&&At<127&&!p(bt,qe)?qe:encodeURIComponent(qe)},De={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Oe=function(qe){return p(De,qe.scheme)},Ne=function(qe){return""!=qe.username||""!=qe.password},Pe=function(qe){return!qe.host||qe.cannotBeABaseURL||"file"==qe.scheme},ze=function(qe,bt){var At;return 2==qe.length&&oe(ae,ne(qe,0))&&(":"==(At=ne(qe,1))||!bt&&"|"==At)},ge=function(qe){var bt;return qe.length>1&&ze(ie(qe,0,2))&&(2==qe.length||"/"===(bt=ne(qe,2))||"\\"===bt||"?"===bt||"#"===bt)},Ee=function(qe){var bt=qe.path,At=bt.length;!At||"file"==qe.scheme&&1==At&&ze(bt[0],!0)||bt.length--},Ue=function(qe){return"."===qe||"%2e"===be(qe)},Be={},Qe={},Ze={},tt={},lt={},dt={},_t={},Rt={},xt={},Pt={},jt={},Ir={},Eo={},_i={},zo={},Qo={},To={},Gn={},Ks={},ro={},ei={},Hn=function(qe,bt,At,ht){var Zt,yt,yr,Cr,ar,St=At||Be,_r=0,Gt="",Gr=!1,$s=!1,se=!1;for(At||(qe.scheme="",qe.username="",qe.password="",qe.host=null,qe.port=null,qe.path=[],qe.query=null,qe.fragment=null,qe.cannotBeABaseURL=!1,bt=K(bt,le,"")),bt=K(bt,we,""),Zt=I(bt);_r<=Zt.length;){switch(yt=Zt[_r],St){case Be:if(!yt||!oe(ae,yt)){if(At)return Ge;St=Ze;continue}Gt+=be(yt),St=Qe;break;case Qe:if(yt&&(oe(V,yt)||"+"==yt||"-"==yt||"."==yt))Gt+=be(yt);else{if(":"!=yt){if(At)return Ge;Gt="",St=Ze,_r=0;continue}if(At&&(Oe(qe)!=p(De,Gt)||"file"==Gt&&(Ne(qe)||null!==qe.port)||"file"==qe.scheme&&!qe.host))return;if(qe.scheme=Gt,At)return void(Oe(qe)&&De[qe.scheme]==qe.port&&(qe.port=null));Gt="","file"==qe.scheme?St=_i:Oe(qe)&&ht&&ht.scheme==qe.scheme?St=tt:Oe(qe)?St=Rt:"/"==Zt[_r+1]?(St=lt,_r++):(qe.cannotBeABaseURL=!0,B(qe.path,""),St=Ks)}break;case Ze:if(!ht||ht.cannotBeABaseURL&&"#"!=yt)return Ge;if(ht.cannotBeABaseURL&&"#"==yt){qe.scheme=ht.scheme,qe.path=y(ht.path),qe.query=ht.query,qe.fragment="",qe.cannotBeABaseURL=!0,St=ei;break}St="file"==ht.scheme?_i:dt;continue;case tt:if("/"!=yt||"/"!=Zt[_r+1]){St=dt;continue}St=xt,_r++;break;case lt:if("/"==yt){St=Pt;break}St=Gn;continue;case dt:if(qe.scheme=ht.scheme,yt==a)qe.username=ht.username,qe.password=ht.password,qe.host=ht.host,qe.port=ht.port,qe.path=y(ht.path),qe.query=ht.query;else if("/"==yt||"\\"==yt&&Oe(qe))St=_t;else if("?"==yt)qe.username=ht.username,qe.password=ht.password,qe.host=ht.host,qe.port=ht.port,qe.path=y(ht.path),qe.query="",St=ro;else{if("#"!=yt){qe.username=ht.username,qe.password=ht.password,qe.host=ht.host,qe.port=ht.port,qe.path=y(ht.path),qe.path.length--,St=Gn;continue}qe.username=ht.username,qe.password=ht.password,qe.host=ht.host,qe.port=ht.port,qe.path=y(ht.path),qe.query=ht.query,qe.fragment="",St=ei}break;case _t:if(!Oe(qe)||"/"!=yt&&"\\"!=yt){if("/"!=yt){qe.username=ht.username,qe.password=ht.password,qe.host=ht.host,qe.port=ht.port,St=Gn;continue}St=Pt}else St=xt;break;case Rt:if(St=xt,"/"!=yt||"/"!=ne(Gt,_r+1))continue;_r++;break;case xt:if("/"!=yt&&"\\"!=yt){St=Pt;continue}break;case Pt:if("@"==yt){Gr&&(Gt="%40"+Gt),Gr=!0,yr=I(Gt);for(var N=0;N<yr.length;N++){var b=yr[N];if(":"!=b||se){var D=fe(b,Le);se?qe.password+=D:qe.username+=D}else se=!0}Gt=""}else if(yt==a||"/"==yt||"?"==yt||"#"==yt||"\\"==yt&&Oe(qe)){if(Gr&&""==Gt)return"Invalid authority";_r-=I(Gt).length+1,Gt="",St=jt}else Gt+=yt;break;case jt:case Ir:if(At&&"file"==qe.scheme){St=Qo;continue}if(":"!=yt||$s){if(yt==a||"/"==yt||"?"==yt||"#"==yt||"\\"==yt&&Oe(qe)){if(Oe(qe)&&""==Gt)return je;if(At&&""==Gt&&(Ne(qe)||null!==qe.port))return;if(Cr=Ae(qe,Gt))return Cr;if(Gt="",St=To,At)return;continue}"["==yt?$s=!0:"]"==yt&&($s=!1),Gt+=yt}else{if(""==Gt)return je;if(Cr=Ae(qe,Gt))return Cr;if(Gt="",St=Eo,At==Ir)return}break;case Eo:if(!oe(Q,yt)){if(yt==a||"/"==yt||"?"==yt||"#"==yt||"\\"==yt&&Oe(qe)||At){if(""!=Gt){var O=L(Gt,10);if(O>65535)return he;qe.port=Oe(qe)&&O===De[qe.scheme]?null:O,Gt=""}if(At)return;St=To;continue}return he}Gt+=yt;break;case _i:if(qe.scheme="file","/"==yt||"\\"==yt)St=zo;else{if(!ht||"file"!=ht.scheme){St=Gn;continue}if(yt==a)qe.host=ht.host,qe.path=y(ht.path),qe.query=ht.query;else if("?"==yt)qe.host=ht.host,qe.path=y(ht.path),qe.query="",St=ro;else{if("#"!=yt){ge(ue(y(Zt,_r),""))||(qe.host=ht.host,qe.path=y(ht.path),Ee(qe)),St=Gn;continue}qe.host=ht.host,qe.path=y(ht.path),qe.query=ht.query,qe.fragment="",St=ei}}break;case zo:if("/"==yt||"\\"==yt){St=Qo;break}ht&&"file"==ht.scheme&&!ge(ue(y(Zt,_r),""))&&(ze(ht.path[0],!0)?B(qe.path,ht.path[0]):qe.host=ht.host),St=Gn;continue;case Qo:if(yt==a||"/"==yt||"\\"==yt||"?"==yt||"#"==yt){if(!At&&ze(Gt))St=Gn;else if(""==Gt){if(qe.host="",At)return;St=To}else{if(Cr=Ae(qe,Gt))return Cr;if("localhost"==qe.host&&(qe.host=""),At)return;Gt="",St=To}continue}Gt+=yt;break;case To:if(Oe(qe)){if(St=Gn,"/"!=yt&&"\\"!=yt)continue}else if(At||"?"!=yt)if(At||"#"!=yt){if(yt!=a&&(St=Gn,"/"!=yt))continue}else qe.fragment="",St=ei;else qe.query="",St=ro;break;case Gn:if(yt==a||"/"==yt||"\\"==yt&&Oe(qe)||!At&&("?"==yt||"#"==yt)){if(".."===(ar=be(ar=Gt))||"%2e."===ar||".%2e"===ar||"%2e%2e"===ar?(Ee(qe),"/"==yt||"\\"==yt&&Oe(qe)||B(qe.path,"")):Ue(Gt)?"/"==yt||"\\"==yt&&Oe(qe)||B(qe.path,""):("file"==qe.scheme&&!qe.path.length&&ze(Gt)&&(qe.host&&(qe.host=""),Gt=ne(Gt,0)+":"),B(qe.path,Gt)),Gt="","file"==qe.scheme&&(yt==a||"?"==yt||"#"==yt))for(;qe.path.length>1&&""===qe.path[0];)G(qe.path);"?"==yt?(qe.query="",St=ro):"#"==yt&&(qe.fragment="",St=ei)}else Gt+=fe(yt,$e);break;case Ks:"?"==yt?(qe.query="",St=ro):"#"==yt?(qe.fragment="",St=ei):yt!=a&&(qe.path[0]+=fe(yt,Ve));break;case ro:At||"#"!=yt?yt!=a&&("'"==yt&&Oe(qe)?qe.query+="%27":qe.query+="#"==yt?"%23":fe(yt,Ve)):(qe.fragment="",St=ei);break;case ei:yt!=a&&(qe.fragment+=fe(yt,ke))}_r++}},ti=function(qe){var bt,At,ht=v(this,no),Zt=arguments.length>1?arguments[1]:void 0,yt=A(qe),yr=x(ht,{type:"URL"});if(void 0!==Zt)try{bt=P(Zt)}catch(St){if(At=Hn(bt={},A(Zt)))throw S(At)}if(At=Hn(yr,yt,null,bt))throw S(At);var Cr=yr.searchParams=new F,ar=k(Cr);ar.updateSearchParams(yr.query),ar.updateURL=function(){yr.query=A(Cr)||null},o||(ht.href=u(Yo,ht),ht.origin=u(vs,ht),ht.protocol=u(Ko,ht),ht.username=u(Js,ht),ht.password=u(lu,ht),ht.host=u(Jo,ht),ht.hostname=u(zn,ht),ht.port=u(Xs,ht),ht.pathname=u(Zs,ht),ht.search=u(cu,ht),ht.searchParams=u(fu,ht),ht.hash=u(vi,ht))},no=ti.prototype,Yo=function(){var qe=P(this),bt=qe.scheme,At=qe.username,ht=qe.password,Zt=qe.host,yt=qe.port,yr=qe.path,Cr=qe.query,ar=qe.fragment,St=bt+":";return null!==Zt?(St+="//",Ne(qe)&&(St+=At+(ht?":"+ht:"")+"@"),St+=Fe(Zt),null!==yt&&(St+=":"+yt)):"file"==bt&&(St+="//"),St+=qe.cannotBeABaseURL?yr[0]:yr.length?"/"+ue(yr,"/"):"",null!==Cr&&(St+="?"+Cr),null!==ar&&(St+="#"+ar),St},vs=function(){var qe=P(this),bt=qe.scheme,At=qe.port;if("blob"==bt)try{return new ti(bt.path[0]).origin}catch(ht){return"null"}return"file"!=bt&&Oe(qe)?bt+"://"+Fe(qe.host)+(null!==At?":"+At:""):"null"},Ko=function(){return P(this).scheme+":"},Js=function(){return P(this).username},lu=function(){return P(this).password},Jo=function(){var qe=P(this),bt=qe.host,At=qe.port;return null===bt?"":null===At?Fe(bt):Fe(bt)+":"+At},zn=function(){var qe=P(this).host;return null===qe?"":Fe(qe)},Xs=function(){var qe=P(this).port;return null===qe?"":A(qe)},Zs=function(){var qe=P(this),bt=qe.path;return qe.cannotBeABaseURL?bt[0]:bt.length?"/"+ue(bt,"/"):""},cu=function(){var qe=P(this).query;return qe?"?"+qe:""},fu=function(){return P(this).searchParams},vi=function(){var qe=P(this).fragment;return qe?"#"+qe:""},jr=function(qe,bt){return{get:qe,set:bt,configurable:!0,enumerable:!0}};if(o&&f(no,{href:jr(Yo,function(qe){var bt=P(this),At=A(qe),ht=Hn(bt,At);if(ht)throw S(ht);k(bt.searchParams).updateSearchParams(bt.query)}),origin:jr(vs),protocol:jr(Ko,function(qe){var bt=P(this);Hn(bt,A(qe)+":",Be)}),username:jr(Js,function(qe){var bt=P(this),At=I(A(qe));if(!Pe(bt)){bt.username="";for(var ht=0;ht<At.length;ht++)bt.username+=fe(At[ht],Le)}}),password:jr(lu,function(qe){var bt=P(this),At=I(A(qe));if(!Pe(bt)){bt.password="";for(var ht=0;ht<At.length;ht++)bt.password+=fe(At[ht],Le)}}),host:jr(Jo,function(qe){var bt=P(this);bt.cannotBeABaseURL||Hn(bt,A(qe),jt)}),hostname:jr(zn,function(qe){var bt=P(this);bt.cannotBeABaseURL||Hn(bt,A(qe),Ir)}),port:jr(Xs,function(qe){var bt=P(this);Pe(bt)||(""==(qe=A(qe))?bt.port=null:Hn(bt,qe,Eo))}),pathname:jr(Zs,function(qe){var bt=P(this);bt.cannotBeABaseURL||(bt.path=[],Hn(bt,A(qe),To))}),search:jr(cu,function(qe){var bt=P(this);""==(qe=A(qe))?bt.query=null:("?"==ne(qe,0)&&(qe=ie(qe,1)),bt.query="",Hn(bt,qe,ro)),k(bt.searchParams).updateSearchParams(bt.query)}),searchParams:jr(fu),hash:jr(vi,function(qe){var bt=P(this);""!=(qe=A(qe))?("#"==ne(qe,0)&&(qe=ie(qe,1)),bt.fragment="",Hn(bt,qe,ei)):bt.fragment=null})}),g(no,"toJSON",function(){return u(Yo,this)},{enumerable:!0}),g(no,"toString",function(){return u(Yo,this)},{enumerable:!0}),w){var Qn=w.createObjectURL,yi=w.revokeObjectURL;Qn&&g(ti,"createObjectURL",c(Qn,w)),yi&&g(ti,"revokeObjectURL",c(yi,w))}M(ti,"URL"),s({global:!0,forced:!l,sham:!o},{URL:ti})},function(t,i,n){var a=n(26),s=n(202);t.exports=function(o,l,d,c){try{return c?l(a(d)[0],d[1]):l(d)}catch(u){s(o,"throw",u)}}},function(t,i,n){var a=n(3),s=n(5),o=2147483647,l=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",u=a.RangeError,h=s(d.exec),f=Math.floor,g=String.fromCharCode,v=s("".charCodeAt),p=s([].join),m=s([].push),I=s("".replace),y=s("".split),_=s("".toLowerCase),C=function(E){return E+22+75*(E<26)},A=function(E,R,x){var P=0;for(E=x?f(E/700):E>>1,E+=f(E/R);E>455;P+=36)E=f(E/35);return f(P+36*E/(E+38))},M=function(E){var R,x,P=[],F=(E=function(K){for(var G=[],ee=0,ie=K.length;ee<ie;){var be=v(K,ee++);if(be>=55296&&be<=56319&&ee<ie){var Te=v(K,ee++);56320==(64512&Te)?m(G,((1023&be)<<10)+(1023&Te)+65536):(m(G,be),ee--)}else m(G,be)}return G}(E)).length,k=128,w=0,S=72;for(R=0;R<E.length;R++)(x=E[R])<128&&m(P,g(x));var L=P.length,U=L;for(L&&m(P,"-");U<F;){var Z=o;for(R=0;R<E.length;R++)(x=E[R])>=k&&x<Z&&(Z=x);var ne=U+1;if(Z-k>f((o-w)/ne))throw u(c);for(w+=(Z-k)*ne,k=Z,R=0;R<E.length;R++){if((x=E[R])<k&&++w>o)throw u(c);if(x==k){for(var oe=w,ue=36;;ue+=36){var X=ue<=S?1:ue>=S+26?26:ue-S;if(oe<X)break;var pe=oe-X,B=36-X;m(P,g(C(X+pe%B))),oe=f(pe/B)}m(P,g(C(oe))),S=A(w,ne,U==L),w=0,++U}}++w,++k}return p(P,"")};t.exports=function(E){var R,x,P=[],F=y(I(_(E),d,"."),".");for(R=0;R<F.length;R++)m(P,h(l,x=F[R])?"xn--"+M(x):x);return p(P,".")}},function(t,i,n){var a=n(47),s=Math.floor,o=function(c,u){var h=c.length,f=s(h/2);return h<8?l(c,u):d(c,o(a(c,0,f),u),o(a(c,f),u),u)},l=function(c,u){for(var h,f,g=c.length,v=1;v<g;){for(f=v,h=c[v];f&&u(c[f-1],h)>0;)c[f]=c[--f];f!==v++&&(c[f]=h)}return c},d=function(c,u,h,f){for(var g=u.length,v=h.length,p=0,m=0;p<g||m<v;)c[p+m]=p<g&&m<v?f(u[p],h[m])<=0?u[p++]:h[m++]:p<g?u[p++]:h[m++];return c};t.exports=o},function(t,i){},function(t,i,n){var a=n(447);t.exports=a},function(t,i,n){var a=n(20),s=n(448),o=Array.prototype;t.exports=function(l){var d=l.every;return l===o||a(o,l)&&d===o.every?s:d}},function(t,i,n){n(449);var a=n(24);t.exports=a("Array").every},function(t,i,n){var a=n(4),s=n(42).every;a({target:"Array",proto:!0,forced:!n(109)("every")},{every:function(o){return s(this,o,arguments.length>1?arguments[1]:void 0)}})},function(t,i,n){var a=n(451);t.exports=a},function(t,i,n){var a=n(20),s=n(452),o=Array.prototype;t.exports=function(l){var d=l.find;return l===o||a(o,l)&&d===o.find?s:d}},function(t,i,n){n(453);var a=n(24);t.exports=a("Array").find},function(t,i,n){var a=n(4),s=n(42).find,o=n(127),l="find",d=!0;l in[]&&Array(1).find(function(){d=!1}),a({target:"Array",proto:!0,forced:d},{find:function(c){return s(this,c,arguments.length>1?arguments[1]:void 0)}}),o(l)},function(t,i,n){var a=n(455);t.exports=a},function(t,i,n){var a=n(20),s=n(456),o=Array.prototype;t.exports=function(l){var d=l.findIndex;return l===o||a(o,l)&&d===o.findIndex?s:d}},function(t,i,n){n(457);var a=n(24);t.exports=a("Array").findIndex},function(t,i,n){var a=n(4),s=n(42).findIndex,o=n(127),l="findIndex",d=!0;l in[]&&Array(1).findIndex(function(){d=!1}),a({target:"Array",proto:!0,forced:d},{findIndex:function(c){return s(this,c,arguments.length>1?arguments[1]:void 0)}}),o(l)},function(t,i,n){t.exports=n(459)},function(t,i,n){var a=n(253);n(477),n(478),n(479),n(480),n(481),n(482),n(483),t.exports=a},function(t,i,n){n(226),n(98),n(461),n(254),n(462),n(463),n(464),n(255),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476);var a=n(16);t.exports=a.Symbol},function(t,i,n){var a=n(4),s=n(3),o=n(32),l=n(78),d=n(23),c=n(5),u=n(55),h=n(25),f=n(152),g=n(11),v=n(22),p=n(107),m=n(15),I=n(19),y=n(20),_=n(151),C=n(26),A=n(37),M=n(54),E=n(118),R=n(48),x=n(53),P=n(63),F=n(126),k=n(123),w=n(223),S=n(159),L=n(92),U=n(33),Z=n(150),ne=n(47),oe=n(56),ue=n(154),X=n(121),pe=n(96),B=n(120),K=n(12),G=n(145),ee=n(18),ie=n(57),be=n(40),Te=n(42).forEach,Ge=X("hidden"),je="Symbol",he=K("toPrimitive"),ae=be.set,V=be.getterFor(je),Q=Object.prototype,me=s.Symbol,H=me&&me.prototype,j=s.TypeError,q=s.QObject,re=o("JSON","stringify"),de=L.f,le=U.f,we=w.f,Ae=Z.f,Se=c([].push),ye=ue("symbols"),Fe=ue("op-symbols"),Ve=ue("string-to-symbol-registry"),ke=ue("symbol-to-string-registry"),$e=ue("wks"),Le=!q||!q.prototype||!q.prototype.findChild,fe=h&&g(function(){return 7!=P(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a})?function(Be,Qe,Ze){var tt=de(Q,Qe);tt&&delete Q[Qe],le(Be,Qe,Ze),tt&&Be!==Q&&le(Q,Qe,tt)}:le,De=function(Be,Qe){var Ze=ye[Be]=P(H);return ae(Ze,{type:je,tag:Be,description:Qe}),h||(Ze.description=Qe),Ze},Oe=function(Be,Qe,Ze){Be===Q&&Oe(Fe,Qe,Ze),C(Be);var tt=E(Qe);return C(Ze),v(ye,tt)?(Ze.enumerable?(v(Be,Ge)&&Be[Ge][tt]&&(Be[Ge][tt]=!1),Ze=P(Ze,{enumerable:x(0,!1)})):(v(Be,Ge)||le(Be,Ge,x(1,{})),Be[Ge][tt]=!0),fe(Be,tt,Ze)):le(Be,tt,Ze)},Ne=function(Be,Qe){C(Be);var Ze=M(Qe),tt=F(Ze).concat(Ee(Ze));return Te(tt,function(lt){h&&!d(Pe,Ze,lt)||Oe(Be,lt,Ze[lt])}),Be},Pe=function(Be){var Qe=E(Be),Ze=d(Ae,this,Qe);return!(this===Q&&v(ye,Qe)&&!v(Fe,Qe))&&(!(Ze||!v(this,Qe)||!v(ye,Qe)||v(this,Ge)&&this[Ge][Qe])||Ze)},ze=function(Be,Qe){var Ze=M(Be),tt=E(Qe);if(Ze!==Q||!v(ye,tt)||v(Fe,tt)){var lt=de(Ze,tt);return!lt||!v(ye,tt)||v(Ze,Ge)&&Ze[Ge][tt]||(lt.enumerable=!0),lt}},ge=function(Be){var Qe=we(M(Be)),Ze=[];return Te(Qe,function(tt){v(ye,tt)||v(pe,tt)||Se(Ze,tt)}),Ze},Ee=function(Be){var Qe=Be===Q,Ze=we(Qe?Fe:M(Be)),tt=[];return Te(Ze,function(lt){!v(ye,lt)||Qe&&!v(Q,lt)||Se(tt,ye[lt])}),tt};if(f||(oe(H=(me=function(){if(y(H,this))throw j("Symbol is not a constructor");var Be=arguments.length&&void 0!==arguments[0]?R(arguments[0]):void 0,Qe=B(Be),Ze=function(tt){this===Q&&d(Ze,Fe,tt),v(this,Ge)&&v(this[Ge],Qe)&&(this[Ge][Qe]=!1),fe(this,Qe,x(1,tt))};return h&&Le&&fe(Q,Qe,{configurable:!0,set:Ze}),De(Qe,Be)}).prototype,"toString",function(){return V(this).tag}),oe(me,"withoutSetter",function(Be){return De(B(Be),Be)}),Z.f=Pe,U.f=Oe,L.f=ze,k.f=w.f=ge,S.f=Ee,G.f=function(Be){return De(K(Be),Be)},h&&(le(H,"description",{configurable:!0,get:function(){return V(this).description}}),u||oe(Q,"propertyIsEnumerable",Pe,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:me}),Te(F($e),function(Be){ee(Be)}),a({target:je,stat:!0,forced:!f},{for:function(Be){var Qe=R(Be);if(v(Ve,Qe))return Ve[Qe];var Ze=me(Qe);return Ve[Qe]=Ze,ke[Ze]=Qe,Ze},keyFor:function(Be){if(!_(Be))throw j(Be+" is not a symbol");if(v(ke,Be))return ke[Be]},useSetter:function(){Le=!0},useSimple:function(){Le=!1}}),a({target:"Object",stat:!0,forced:!f,sham:!h},{create:function(Be,Qe){return void 0===Qe?P(Be):Ne(P(Be),Qe)},defineProperty:Oe,defineProperties:Ne,getOwnPropertyDescriptor:ze}),a({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ge,getOwnPropertySymbols:Ee}),a({target:"Object",stat:!0,forced:g(function(){S.f(1)})},{getOwnPropertySymbols:function(Be){return S.f(A(Be))}}),re&&a({target:"JSON",stat:!0,forced:!f||g(function(){var Be=me();return"[null]"!=re([Be])||"{}"!=re({a:Be})||"{}"!=re(Object(Be))})},{stringify:function(Be,Qe,Ze){var tt=ne(arguments),lt=Qe;if((I(Qe)||void 0!==Be)&&!_(Be))return p(Qe)||(Qe=function(dt,_t){if(m(lt)&&(_t=d(lt,this,dt,_t)),!_(_t))return _t}),tt[1]=Qe,l(re,null,tt)}}),!H[he]){var Ue=H.valueOf;oe(H,he,function(Be){return d(Ue,this)})}ie(me,je),pe[Ge]=!0},function(t,i){},function(t,i,n){n(18)("hasInstance")},function(t,i,n){n(18)("isConcatSpreadable")},function(t,i,n){n(18)("match")},function(t,i,n){n(18)("matchAll")},function(t,i,n){n(18)("replace")},function(t,i,n){n(18)("search")},function(t,i,n){n(18)("species")},function(t,i,n){n(18)("split")},function(t,i,n){n(18)("toPrimitive")},function(t,i,n){n(18)("toStringTag")},function(t,i,n){n(18)("unscopables")},function(t,i,n){var a=n(3);n(57)(a.JSON,"JSON",!0)},function(t,i){},function(t,i){},function(t,i,n){n(18)("asyncDispose")},function(t,i,n){n(18)("dispose")},function(t,i,n){n(18)("matcher")},function(t,i,n){n(18)("metadata")},function(t,i,n){n(18)("observable")},function(t,i,n){n(18)("patternMatch")},function(t,i,n){n(18)("replaceAll")},function(t,i,n){t.exports=n(485)},function(t,i,n){var a=n(486);t.exports=a},function(t,i,n){var a=n(487);t.exports=a},function(t,i,n){n(254);var a=n(145);t.exports=a.f("asyncIterator")},function(t,i,n){t.exports=n(489)},function(t,i,n){var a=n(490);t.exports=a},function(t,i,n){var a=n(491);n(67),t.exports=a},function(t,i,n){n(66),n(98),n(81),n(255);var a=n(145);t.exports=a.f("iterator")},function(t,i,n){var a=n(68),s=n(7),o=n(10),l=n(256),d=n(28),c=n(106),u=n(74),h=n(113),f=l.ArrayBuffer,g=l.DataView,v=g.prototype,p=s(f.prototype.slice),m=s(v.getUint8),I=s(v.setUint8);a({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o(function(){return!new f(2).slice(1,void 0).byteLength})},{slice:function(y,_){if(p&&void 0===_)return p(d(this),y);for(var C=d(this).byteLength,A=c(y,C),M=c(void 0===_?C:_,C),E=new(h(this,f))(u(M-A)),R=new g(this),x=new g(E),P=0;A<M;)I(x,P++,m(R,A++));return E}})},function(t,i,n){var a=n(2).Array,s=Math.abs,o=Math.pow,l=Math.floor,d=Math.log,c=Math.LN2;t.exports={pack:function(u,h,f){var g,v,p,m=a(f),I=8*f-h-1,y=(1<<I)-1,_=y>>1,C=23===h?o(2,-24)-o(2,-77):0,A=u<0||0===u&&1/u<0?1:0,M=0;for((u=s(u))!=u||u===1/0?(v=u!=u?1:0,g=y):(g=l(d(u)/c),u*(p=o(2,-g))<1&&(g--,p*=2),(u+=g+_>=1?C/p:C*o(2,1-_))*p>=2&&(g++,p/=2),g+_>=y?(v=0,g=y):g+_>=1?(v=(u*p-1)*o(2,h),g+=_):(v=u*o(2,_-1)*o(2,h),g=0));h>=8;m[M++]=255&v,v/=256,h-=8);for(g=g<<h|v,I+=h;I>0;m[M++]=255&g,g/=256,I-=8);return m[--M]|=128*A,m},unpack:function(u,h){var f,g=u.length,v=8*g-h-1,p=(1<<v)-1,m=p>>1,I=v-7,y=g-1,_=u[y--],C=127&_;for(_>>=7;I>0;C=256*C+u[y],y--,I-=8);for(f=C&(1<<-I)-1,C>>=-I,I+=h;I>0;f=256*f+u[y],y--,I-=8);if(0===C)C=1-m;else{if(C===p)return f?NaN:_?-1/0:1/0;f+=o(2,h),C-=m}return(_?-1:1)*f*o(2,C-h)}}},function(t,i,n){n(260)("Float32",function(a){return function(s,o,l){return a(this,s,o,l)}})},function(t,i,n){var a=n(2),s=n(10),o=n(235),l=n(9).NATIVE_ARRAY_BUFFER_VIEWS,d=a.ArrayBuffer,c=a.Int8Array;t.exports=!l||!s(function(){c(1)})||!s(function(){new c(-1)})||!o(function(u){new c,new c(null),new c(1.5),new c(u)},!0)||s(function(){return 1!==new c(new d(2),1,void 0).length})},function(t,i,n){var a=n(29),s=Math.floor;t.exports=Number.isInteger||function(o){return!a(o)&&isFinite(o)&&s(o)===o}},function(t,i,n){var a=n(2),s=n(73),o=a.RangeError;t.exports=function(l){var d=s(l);if(d<0)throw o("The argument can't be less than 0");return d}},function(t,i,n){var a=n(112),s=n(27),o=n(236),l=n(59),d=n(50),c=n(234),u=n(179),h=n(233),f=n(9).aTypedArrayConstructor;t.exports=function(g){var v,p,m,I,y,_,C=o(this),A=l(g),M=arguments.length,E=M>1?arguments[1]:void 0,R=void 0!==E,x=u(A);if(x&&!h(x))for(_=(y=c(A,x)).next,A=[];!(I=s(_,y)).done;)A.push(I.value);for(R&&M>2&&(E=a(E,arguments[2])),p=d(A),m=new(f(C))(p),v=0;p>v;v++)m[v]=R?E(A[v],v):A[v];return m}},function(t,i,n){var a=n(500);t.exports=function(s,o){return new(a(s))(0===o?0:o)}},function(t,i,n){var a=n(2),s=n(501),o=n(237),l=n(29),d=n(21)("species"),c=a.Array;t.exports=function(u){var h;return s(u)&&(o(h=u.constructor)&&(h===c||s(h.prototype))||l(h)&&null===(h=h[d]))&&(h=void 0),void 0===h?c:h}},function(t,i,n){var a=n(82);t.exports=Array.isArray||function(s){return"Array"==a(s)}},function(t,i,n){var a=n(7),s=n(9),o=a(n(503)),l=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(d,c){return o(l(this),d,c,arguments.length>2?arguments[2]:void 0)})},function(t,i,n){var a=n(59),s=n(106),o=n(50),l=Math.min;t.exports=[].copyWithin||function(d,c){var u=a(this),h=o(u),f=s(d,h),g=s(c,h),v=arguments.length>2?arguments[2]:void 0,p=l((void 0===v?h:s(v,h))-g,h-f),m=1;for(g<f&&f<g+p&&(m=-1,g+=p-1,f+=p-1);p-- >0;)g in u?u[f]=u[g]:delete u[f],f+=m,g+=m;return u}},function(t,i,n){var a=n(9),s=n(60).every,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(27),o=n(259),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(d){var c=arguments.length;return s(o,l(this),d,c>1?arguments[1]:void 0,c>2?arguments[2]:void 0)})},function(t,i,n){var a=n(9),s=n(60).filter,o=n(507),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("filter",function(d){var c=s(l(this),d,arguments.length>1?arguments[1]:void 0);return o(this,c)})},function(t,i,n){var a=n(508),s=n(146);t.exports=function(o,l){return a(s(o),l)}},function(t,i){t.exports=function(n,a){for(var s=0,o=a.length,l=new n(o);o>s;)l[s]=a[s++];return l}},function(t,i,n){var a=n(9),s=n(60).find,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(60).findIndex,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(60).forEach,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(l){s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(172).includes,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(172).indexOf,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(2),s=n(7),o=n(105).PROPER,l=n(9),d=n(140),c=n(21)("iterator"),u=a.Uint8Array,h=s(d.values),f=s(d.keys),g=s(d.entries),v=l.aTypedArray,p=l.exportTypedArrayMethod,m=u&&u.prototype[c],I=!!m&&"values"===m.name,y=function(){return h(v(this))};p("entries",function(){return g(v(this))}),p("keys",function(){return f(v(this))}),p("values",y,o&&!I),p(c,y,o&&!I)},function(t,i,n){var a=n(9),s=n(7),o=a.aTypedArray,l=a.exportTypedArrayMethod,d=s([].join);l("join",function(c){return d(o(this),c)})},function(t,i,n){var a=n(9),s=n(114),o=n(517),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(d){var c=arguments.length;return s(o,l(this),c>1?[d,arguments[1]]:[d])})},function(t,i,n){var a=n(114),s=n(69),o=n(73),l=n(50),d=n(221),c=Math.min,u=[].lastIndexOf,h=!!u&&1/[1].lastIndexOf(1,-0)<0,f=d("lastIndexOf");t.exports=h||!f?function(v){if(h)return a(u,this,arguments)||0;var p=s(this),m=l(p),I=m-1;for(arguments.length>1&&(I=c(I,o(arguments[1]))),I<0&&(I=m+I);I>=0;I--)if(I in p&&p[I]===v)return I||0;return-1}:u},function(t,i,n){var a=n(9),s=n(60).map,o=n(146),l=a.aTypedArray;(0,a.exportTypedArrayMethod)("map",function(d){return s(l(this),d,arguments.length>1?arguments[1]:void 0,function(c,u){return new(o(c))(u)})})},function(t,i,n){var a=n(9),s=n(262).left,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(l){var d=arguments.length;return s(o(this),l,d,d>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=n(262).right,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(l){var d=arguments.length;return s(o(this),l,d,d>1?arguments[1]:void 0)})},function(t,i,n){var a=n(9),s=a.aTypedArray,l=Math.floor;(0,a.exportTypedArrayMethod)("reverse",function(){for(var d,c=this,u=s(c).length,h=l(u/2),f=0;f<h;)d=c[f],c[f++]=c[--u],c[u]=d;return c})},function(t,i,n){var a=n(2),s=n(9),o=n(50),l=n(261),d=n(59),c=n(10),u=a.RangeError,h=s.aTypedArray;(0,s.exportTypedArrayMethod)("set",function(f){h(this);var g=l(arguments.length>1?arguments[1]:void 0,1),v=this.length,p=d(f),m=o(p),I=0;if(m+g>v)throw u("Wrong length");for(;I<m;)this[g+I]=p[I++]},c(function(){new Int8Array(1).set({})}))},function(t,i,n){var a=n(9),s=n(146),o=n(10),l=n(86),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("slice",function(c,u){for(var h=l(d(this),c,u),f=s(this),g=0,v=h.length,p=new f(v);v>g;)p[g]=h[g++];return p},o(function(){new Int8Array(1).slice()}))},function(t,i,n){var a=n(9),s=n(60).some,o=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(l){return s(o(this),l,arguments.length>1?arguments[1]:void 0)})},function(t,i,n){var a=n(2),s=n(7),o=n(10),l=n(71),d=n(526),c=n(9),u=n(527),h=n(528),f=n(165),g=n(529),v=a.Array,p=c.aTypedArray,m=c.exportTypedArrayMethod,I=a.Uint16Array,y=I&&s(I.prototype.sort),_=!(!y||o(function(){y(new I(2),null)})&&o(function(){y(new I(2),{})})),C=!!y&&!o(function(){if(f)return f<74;if(u)return u<67;if(h)return!0;if(g)return g<602;var A,M,E=new I(516),R=v(516);for(A=0;A<516;A++)M=A%4,E[A]=515-A,R[A]=A-2*M+3;for(y(E,function(x,P){return(x/4|0)-(P/4|0)}),A=0;A<516;A++)if(E[A]!==R[A])return!0});m("sort",function(A){return void 0!==A&&l(A),C?y(this,A):d(p(this),(M=A,function(E,R){return void 0!==M?+M(E,R)||0:R!=R?-1:E!=E?1:0===E&&0===R?1/E>0&&1/R<0?1:-1:E>R}));var M},!C||_)},function(t,i,n){var a=n(86),s=Math.floor,o=function(c,u){var h=c.length,f=s(h/2);return h<8?l(c,u):d(c,o(a(c,0,f),u),o(a(c,f),u),u)},l=function(c,u){for(var h,f,g=c.length,v=1;v<g;){for(f=v,h=c[v];f&&u(c[f-1],h)>0;)c[f]=c[--f];f!==v++&&(c[f]=h)}return c},d=function(c,u,h,f){for(var g=u.length,v=h.length,p=0,m=0;p<g||m<v;)c[p+m]=p<g&&m<v?f(u[p],h[m])<=0?u[p++]:h[m++]:p<g?u[p++]:h[m++];return c};t.exports=o},function(t,i,n){var a=n(70).match(/firefox\/(\d+)/i);t.exports=!!a&&+a[1]},function(t,i,n){var a=n(70);t.exports=/MSIE|Trident/.test(a)},function(t,i,n){var a=n(70).match(/AppleWebKit\/(\d+)\./);t.exports=!!a&&+a[1]},function(t,i,n){var a=n(9),s=n(74),o=n(106),l=n(146),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(c,u){var h=d(this),f=h.length,g=o(c,f);return new(l(h))(h.buffer,h.byteOffset+g*h.BYTES_PER_ELEMENT,s((void 0===u?f:o(u,f))-g))})},function(t,i,n){var a=n(2),s=n(114),o=n(9),l=n(10),d=n(86),c=a.Int8Array,u=o.aTypedArray,h=o.exportTypedArrayMethod,f=[].toLocaleString,g=!!c&&l(function(){f.call(new c(1))});h("toLocaleString",function(){return s(f,g?d(u(this)):u(this),d(arguments))},l(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!l(function(){c.prototype.toLocaleString.call([1,2])}))},function(t,i,n){var a=n(9).exportTypedArrayMethod,s=n(10),o=n(2),l=n(7),d=o.Uint8Array,c=d&&d.prototype||{},u=[].toString,h=l([].join);s(function(){u.call({})})&&(u=function(){return h(this)}),a("toString",u,c.toString!=u)},function(t,i,n){n(260)("Uint8",function(a){return function(s,o,l){return a(this,s,o,l)}})},function(t,i,n){var a=n(535);t.exports=a},function(t,i,n){n(536);var a=n(16);t.exports=a.Date.now},function(t,i,n){var a=n(4),s=n(3),o=n(5),l=s.Date,d=o(l.prototype.getTime);a({target:"Date",stat:!0},{now:function(){return d(new l)}})},function(t,i,n){var a=n(538);t.exports=a},function(t,i,n){n(81),n(539);var a=n(16);t.exports=a.Array.from},function(t,i,n){var a=n(4),s=n(250);a({target:"Array",stat:!0,forced:!n(208)(function(o){Array.from(o)})},{from:s})},function(t,i,n){var a=n(541);t.exports=a},function(t,i,n){var a=n(542);n(67),t.exports=a},function(t,i,n){n(66),n(81);var a=n(97);t.exports=a},function(t,i,n){var a=n(544);t.exports=a},function(t,i,n){var a=n(20),s=n(545),o=String.prototype;t.exports=function(l){var d=l.startsWith;return"string"==typeof l||l===o||a(o,l)&&d===o.startsWith?s:d}},function(t,i,n){n(546);var a=n(24);t.exports=a("String").startsWith},function(t,i,n){var a,s=n(4),o=n(5),l=n(92).f,d=n(198),c=n(48),u=n(547),h=n(93),f=n(549),g=n(55),v=o("".startsWith),p=o("".slice),m=Math.min,I=f("startsWith");s({target:"String",proto:!0,forced:!(!g&&!I&&(a=l(String.prototype,"startsWith"),a&&!a.writable)||I)},{startsWith:function(y){var _=c(h(this));u(y);var C=d(m(arguments.length>1?arguments[1]:void 0,_.length)),A=c(y);return v?v(_,A,C):p(_,C,C+A.length)===A}})},function(t,i,n){var a=n(3),s=n(548),o=a.TypeError;t.exports=function(l){if(s(l))throw o("The method doesn't accept regular expressions");return l}},function(t,i,n){var a=n(19),s=n(62),o=n(12)("match");t.exports=function(l){var d;return a(l)&&(void 0!==(d=l[o])?!!d:"RegExp"==s(l))}},function(t,i,n){var a=n(12)("match");t.exports=function(s){var o=/./;try{"/./"[s](o)}catch(l){try{return o[a]=!1,"/./"[s](o)}catch(d){}}return!1}},function(t,i,n){var a=n(551);t.exports=a},function(t,i,n){n(552);var a=n(16),s=n(78);a.JSON||(a.JSON={stringify:JSON.stringify}),t.exports=function(o,l,d){return s(a.JSON.stringify,null,arguments)}},function(t,i,n){var a=n(4),s=n(3),o=n(32),l=n(78),d=n(5),c=n(11),u=s.Array,h=o("JSON","stringify"),f=d(/./.exec),g=d("".charAt),v=d("".charCodeAt),p=d("".replace),m=d(1..toString),I=/[\uD800-\uDFFF]/g,y=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,C=function(M,E,R){var x=g(R,E-1),P=g(R,E+1);return f(y,M)&&!f(_,P)||f(_,M)&&!f(y,x)?"\\u"+m(v(M,0),16):M},A=c(function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")});h&&a({target:"JSON",stat:!0,forced:A},{stringify:function(M,E,R){for(var x=0,P=arguments.length,F=u(P);x<P;x++)F[x]=arguments[x];var k=l(h,null,F);return"string"==typeof k?p(k,I,C):k}})},function(t,i,n){t.exports=n(554)},function(t,i,n){var a=n(555);t.exports=a},function(t,i,n){var a=n(556);t.exports=a},function(t,i,n){n(557);var a=n(16).Object,s=t.exports=function(o,l,d){return a.defineProperty(o,l,d)};a.defineProperty.sham&&(s.sham=!0)},function(t,i,n){var a=n(4),s=n(25);a({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:n(33).f})},function(t,i,n){n.r(i);var a=n(1),s=n.n(a),o=(n(305),n(0)),l=n.n(o),d=n(149),c=n.n(d),u=n(8),h=n.n(u),f=n(116),g=n.n(f),v=n(181),p=n.n(v),m=n(76),I=n.n(m),y=n(14),_=n.n(y),C=n(13),A=n.n(C),M=(n(140),n(75),n(177),n(355),n(356),n(90)),E=n.n(M),R=function(){function Ye(){this._events=[]}var Ce=Ye.prototype;return Ce.on=function(Y,te){this._events[Y]||(this._events[Y]=[]),this._events[Y].push(te)},Ce.once=function(Y,te){te._once=!0,this.on(Y,te)},Ce.emit=function(Y){var te=this._events[Y];if(te&&0!==te.length){for(var ce=arguments.length,_e=new Array(ce>1?ce-1:0),Ie=1;Ie<ce;Ie++)_e[Ie-1]=arguments[Ie];for(var Re=0;Re<te.length;Re++){var He,We=te[Re];We.call.apply(We,_()(He=[null]).call(He,_e)),We._once&&(E()(te).call(te,Re,1),Re--)}}},Ce.emitEx=function(Y){var te=this._events[Y];if(te&&0!==te.length){for(var ce=[],_e=arguments.length,Ie=new Array(_e>1?_e-1:0),Re=1;Re<_e;Re++)Ie[Re-1]=arguments[Re];for(var He=0;He<te.length;He++){var We,Je=te[He],Xe=Je.call.apply(Je,_()(We=[null]).call(We,Ie));Xe instanceof h.a&&ce.push(Xe),Je._once&&(E()(te).call(te,He,1),He--)}return h.a.all(ce)}},Ce.off=function(Y,te){var ce=this._events[Y];if(ce)if(te)for(var _e=ce.length,Ie=0;Ie<_e;Ie++)ce[Ie]===te&&E()(ce).call(ce,Ie,1);else ce&&(ce.length=0)},Ye}(),x=new R,P=n(263),F=n.n(P),k=n(87),w=n.n(k),S=n(88),L=n.n(S),U=n(39),Z=n.n(U),ne=n(61),oe=n.n(ne),ue=n(6),X=n.n(ue),pe=n(31),B=n.n(pe),K=n(51),G=n.n(K),ee=n(52),ie=n.n(ee),be=(n(245),n(405),n(91)),Te=n.n(be),Ge=n(147),je=n.n(Ge),he=(n(264),n(265)),ae=n.n(he),V=window.Dynamsoft;function Q(Ye){return"[object Object]"===Object.prototype.toString.call(Ye)}function me(Ye){return"function"==typeof Ye}function H(Ye){return"string"==typeof Ye}function j(Ye){return"number"==typeof Ye&&!je()(Ye)}function q(Ye,Ce){for(var Y in Ye)void 0===Ce[Y]?Ce[Y]=Ye[Y]:Q(Ye[Y])&&Q(Ce[Y])?q(Ye[Y],Ce[Y]):void 0!==Ye[Y]&&(Ce[Y]=Ye[Y])}function re(Ye){x.emit("error",Ye)}function de(Ye,Ce){x.emit("typeError",Ye,Ce)}function le(Ye,Ce,Y){var ce=Ye[1],_e=Ye[2],Ie=Ye[3],Re=Ye[4],He=Ye[5],We=Ye[6],Je=Ye[7];return we(Ye[0],0)&&we(ce,0)&&we(_e,Ce)&&we(Ie,0)&&we(Re,Ce)&&we(He,Y)&&we(We,0)&&we(Je,Y)}function we(Ye,Ce,Y){return void 0===Y&&(Y=1),Math.abs(Ye-Ce)<=Y}function Ae(Ye,Ce){var Y=Ce.split(".");return ae()(Y).call(Y,function(te,ce){return te[ce]||{}},Ye)}function Se(Ye){return V.ImageProcWrapper.createImage({source:{data:Ye},output:{orgImage:{quality:85,returnType:V.Enum_ImageType.IT_JPG,returnBlob:!0},previewImage:!1}}).then(function(Y){return Y.result})}function ye(Ye){return V.ImageProcWrapper.createImage({source:Ye,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:V.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}}}).then(function(Y){return Ye.imageData=Y.src,Y.preview})}var Fe=function(Ye){window.Dynamsoft&&window.Dynamsoft.Lib.log(Ye)},Ve="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ke=n(148),$e=n.n(ke),Le=function(){function Ye(Y){var te=this;this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.leftEdge=0,this.topEdge=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.zoom=Y.zoom||1;var ce=$e()(Y);A()(ce).call(ce,function(_e){te[_e]=Y[_e]}),this._initBox()}var Ce=Ye.prototype;return Ce.getRect=function(){if("free"===this.mode)return null;var Y=this._getMaxPoint(),te=Y.minX,ce=Y.maxX,_e=Y.minY,Ie=Y.maxY;return{x:Math.floor(te),y:Math.floor(_e),width:Math.floor(ce-te),height:Math.floor(Ie-_e)}},Ce._initBox=function(){var Y,te,ce;this.midpoints=fe(this.vertexes),this.probePoints=_()(Y=X()(te=this.vertexes).call(te)).call(Y,X()(ce=this.midpoints).call(ce)),this.slopeRatio=De(this.vertexes)},Ce._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},Ce.checkPointPosition=function(Y){var te=this._getMaxPoint(),ce=te.minX,_e=te.maxX,Ie=te.minY,Re=te.maxY,He=this.probePoints[2*Y],We=this.probePoints[2*Y+1];return Y<4?He===_e&&We===Re?"se":He===_e&&We===Ie?"ne":He===ce&&We===Ie?"nw":He===ce&&We===Re?"sw":null:He===_e?"e":We===Re?"s":He===ce?"w":We===Ie?"n":null},Ce.onStartHandler=function(Y,te,ce){var _e=this.isBoxSelected(Y,te);if(void 0!==ce&&(_e=ce),null!==_e&&(this._startX=Y,this._startY=te,this._lastX=Y,this._lastY=te,-1===_e?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=_e,this.isMoveBox=!1),"free"===this.mode&&_e>3)){var Ie=_e-4;this.k1=this.slopeRatio[(Ie+1)%4],this.b1=this.probePoints[(2*Ie+3)%8]-this.k1*this.probePoints[(2*Ie+2)%8],this.k2=this.slopeRatio[(Ie+3)%4],this.b2=this.probePoints[(2*Ie+1)%8]-this.k2*this.probePoints[(2*Ie+0)%8]}},Ce.onMoveHandler=function(Y,te,ce){var _e,Ie,Re;if(this.isPointSelected||this.isMoveBox){var He=X()(_e=this.probePoints).call(_e);if(this.isPointSelected){var We,Je=this.activeProbePoint;void 0!==ce&&(Je=ce),"normal"===this.mode?He=this._movePointNormal(He,Je,Y,te):(He=this._movePointFree(He,Je,Y,te),this.slopeRatio=X()(We=De(this.probePoints)).call(We,0,4)),this.probePoints=X()(He).call(He),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var Xe=Y-this._lastX,st=te-this._lastY;if(0===Xe&&0===st)return;He=this._moveBox(He,Xe,st),this.probePoints=X()(He).call(He)}var nt=fe(this.probePoints);this.probePoints=_()(Ie=X()(Re=this.probePoints).call(Re,0,8)).call(Ie,nt),this.midpoints=nt,this._lastX=Y,this._lastY=te}},Ce.onEndHandler=function(){var Y,te,ce,_e;this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var Ie=this._startX,Re=this._startY;this._startX=0,this._startY=0;var He=this._lastX,We=this._lastY;if(this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var Je,Xe,st=this._checkRectConvexity(this.probePoints);(Ie===He&&Re===We||!st)&&(this.probePoints=_()(Je=X()(Xe=this.vertexes).call(Xe)).call(Je,this.midpoints)),this.vertexes=X()(Y=this.probePoints).call(Y,0,8),this.midpoints=fe(this.probePoints),this.probePoints=_()(te=X()(ce=this.probePoints).call(ce,0,8)).call(te,this.midpoints),this.slopeRatio=X()(_e=De(this.probePoints)).call(_e,0,4)}},Ce._checkEdge=function(Y,te){return Y>=0&&Y<=this.width&&te>=0&&te<this.height},Ce._movePointNormal=function(Y,te,ce,_e){ce=Math.max(this.leftEdge,Math.min(this.width,ce)),_e=Math.max(this.topEdge,Math.min(this.height,_e));var Ie=0,Re=0;if(this.keepAspectRatio){var He=this._getMaxPoint(),We=He.minX,Je=He.maxX,Xe=He.minY,st=He.maxY,nt=this.checkPointPosition(te),at=(Je-We)/(st-Xe);0===at||at===1/0||at===-1/0||je()(at)?at=this._lastWhr:this._lastWhr=at,Ie=0,Re=0;var ut="width";if(te<4){if(Re=_e-Y[2*te+1],0==(Ie=ce-Y[2*te])||0===Re)return Y;ut="width"}else{var ct=te-4;if("e"===nt?(te=(ct+1)%4,ut="width"):"s"===nt?(te=ct,ut="height"):"w"===nt?(te=ct,ut="width"):"n"===nt&&(te=(ct+1)%4,ut="height"),Re=_e-Y[2*ct+1],0==(Ie=ce-Y[2*ct])||0===Re)return Y}"height"===ut?(Ie=Re*at,"ne"!==nt&&"sw"!==nt&&"n"!==nt&&"w"!==nt||(Ie=-Ie)):(Re=Ie/at,"ne"!==nt&&"sw"!==nt&&"n"!==nt&&"w"!==nt||(Re=-Re));var vt=Y[2*te]+Ie,wt=Y[2*te+1]+Re;vt<0?(Ie=0-Y[2*te],Re=0):vt>this.width?(Ie=this.width-Y[2*te],Re=0):wt<0?(Re=0-Y[2*te+1],Ie=0):wt>this.height&&(Re=this.height-Y[2*te+1],Ie=0),Y[2*te]+=Ie,Y[2*te+1]+=Re;var gt=(te+1)%4,Wt=(te+3)%4;te%2?(Y[2*gt]+=Ie,Y[2*Wt+1]+=Re):(Y[2*gt+1]+=Re,Y[2*Wt]+=Ie)}else if(te<4){if(Re=_e-Y[2*te+1],0==(Ie=ce-Y[2*te])&&0===Re)return Y;Y[2*te]=ce,Y[2*te+1]=_e;var zt=(te+1)%4,Ht=(te+3)%4;te%2?(Y[2*zt]=ce,Y[2*Ht+1]=_e):(Y[2*zt+1]=_e,Y[2*Ht]=ce)}else{var It=te-4,nr=this.slopeRatio[It%4];0===nr?(Y[(2*It+3)%8]=_e,Y[(2*It+1)%8]=_e):nr!==1/0&&nr!==-1/0||(Y[(2*It+2)%8]=ce,Y[(2*It+0)%8]=ce)}return Y},Ce._movePointFree=function(Y,te,ce,_e){ce=Math.max(this.leftEdge,Math.min(this.width,ce)),_e=Math.max(this.topEdge,Math.min(this.height,_e));var Ie=X()(Y).call(Y);if(te<4){if(0==ce-Y[2*te]&&0==_e-Y[2*te+1])return Y;Y[2*te]=ce,Y[2*te+1]=_e}else{var We=te-4,Je=this.slopeRatio[We%4],Xe=_e-Je*ce,st=-Xe/Je,nt=Xe,at=Y[(2*We+9)%8]-Je*Y[(2*We+8)%8],ut=-at/Je,ct=this.k1,vt=this.b1,wt=this.k2,gt=this.b2;0===Je?(Y[(2*We+3)%8]=_e,ct!==1/0&&ct!==-1/0&&(Y[(2*We+2)%8]=(_e-vt)/ct),Y[(2*We+1)%8]=_e,wt!==1/0&&wt!==-1/0&&(Y[(2*We+0)%8]=(_e-gt)/wt)):Je===1/0||Je===-1/0?(Y[(2*We+2)%8]=ce,Y[(2*We+3)%8]=ct*ce+vt,Y[(2*We+0)%8]=ce,Y[(2*We+1)%8]=wt*ce+gt):(0===ct?Y[(2*We+2)%8]+=st-ut:ct===1/0||ct===-1/0?Y[(2*We+3)%8]+=nt-at:(Y[(2*We+2)%8]=(vt-Xe)/(Je-ct),Y[(2*We+3)%8]=(Je*vt-ct*Xe)/(Je-ct)),0===wt?Y[(2*We+0)%8]+=st-ut:wt===1/0||wt===-1/0?Y[(2*We+1)%8]+=nt-at:(Y[(2*We+0)%8]=(gt-Xe)/(Je-wt),Y[(2*We+1)%8]=(Je*gt-wt*Xe)/(Je-wt)));for(var Wt=0;Wt<4;Wt++){var zt=Y[2*Wt],Ht=Y[2*Wt+1];if(zt<this.leftEdge||zt>this.width||Ht<this.topEdge||Ht>this.height)return Ie}}return Y},Ce._moveBox=function(Y,te,ce){if("normal"===this.mode){var _e=Math.min(Y[0],Y[2],Y[4],Y[6]),Ie=Math.max(Y[0],Y[2],Y[4],Y[6]),Re=Math.min(Y[1],Y[3],Y[5],Y[7]),He=Math.max(Y[1],Y[3],Y[5],Y[7]);_e+te<0&&(te=-_e),Ie+te>this.width&&(te=this.width-Ie),Re+ce<0&&(ce=-Re),He+ce>this.height&&(ce=this.height-He);for(var We=0;We<4;We++)Y[2*We]+=te,Y[2*We+1]+=ce}return Y},Ce._isPointOnBox=function(Y,te){if("normal"===this.mode){var ce=this._getMaxPoint();return Y>=ce.minX&&Y<=ce.maxX&&te>=ce.minY&&te<=ce.maxY}return!1},Ce.isBoxSelected=function(Y,te){var ce=this._isPointOnBox(Y,te),_e=this.isCtrlPointSelected(Y,te);return null!==_e?_e:ce?-1:null},Ce.isCtrlPointSelected=function(Y,te){var ce=this.sensorRadius,_e=this._getMaxPoint(),He=_e.minY,We=_e.maxY,Je=Math.min(Math.max(ce,.1*(_e.maxX-_e.minX)),3*ce)*this.dpr,Xe=Math.min(Math.max(ce,.1*(We-He)),3*ce)*this.dpr,st=8;"free"===this.mode&&(st=8);for(var nt=0;nt<st;nt++){var at=this.probePoints[2*nt],ut=this.probePoints[2*nt+1];if(Y<=at+Je&&Y>=at-Je&&te<=ut+Xe&&te>=ut-Xe)return nt}return null},Ce._checkRectConvexity=function(Y){var te,ce=(Y[6]-Y[0])*(Y[3]-Y[1])-(Y[7]-Y[1])*(Y[2]-Y[0]),_e=(Y[0]-Y[2])*(Y[5]-Y[3])-(Y[1]-Y[3])*(Y[4]-Y[2]),Ie=(Y[2]-Y[4])*(Y[7]-Y[5])-(Y[3]-Y[5])*(Y[6]-Y[4]),Re=(Y[4]-Y[6])*(Y[1]-Y[7])-(Y[5]-Y[7])*(Y[0]-Y[6]);if(ce*_e*Ie*Re<0)return!1;var He=_()(te=X()(Y).call(Y)).call(te,X()(Y).call(Y,0,2));if(this.slopeRatio.length)for(var We=0;We<2;We++)if(this.slopeRatio[We]!==this.slopeRatio[We+2]&&Oe(X()(He).call(He,2*We,2*We+2),X()(He).call(He,2*We+2,2*We+4),X()(He).call(He,2*We+4,2*We+6),X()(He).call(He,2*We+6,2*We+8)))return!1;return ce*_e*Ie*Re>0},Ye}();function fe(Ye){for(var Ce,Y=_()(Ce=X()(Ye).call(Ye,0,8)).call(Ce,Ye[0],Ye[1]),te=[],ce=0;ce<4;ce++)te.push((Y[2*ce]+Y[2*ce+2])/2,(Y[2*ce+1]+Y[2*ce+3])/2);return te}function De(Ye){for(var Ce,Y=[],ce=_()(Ce=X()(Ye).call(Ye,0,8)).call(Ce,Ye[0],Ye[1]),_e=0;_e<4;_e++)Y.push(ce[2*_e+3]-ce[2*_e+1]==0&&ce[2*_e+2]-ce[2*_e]==0?0:(ce[2*_e+3]-ce[2*_e+1])/(ce[2*_e+2]-ce[2*_e]));return Y}function Oe(Ye,Ce,Y,te){if(nt=Ye,at=Ce,ut=Y,ct=te,vt=Math.min,wt=Math.max,vt(nt[0],at[0])<=wt(ut[0],ct[0])&&vt(ut[0],ct[0])<=wt(nt[0],at[0])&&vt(nt[1],at[1])<=wt(ut[1],ct[1])&&vt(ut[1],ct[1])<=wt(nt[1],at[1])&&function(nt,at,ut,ct){var vt,wt;return!(((vt=nt[0]*(ut[1]-at[1])+at[0]*(nt[1]-ut[1])+ut[0]*(at[1]-nt[1]))^(wt=nt[0]*(ct[1]-at[1])+at[0]*(nt[1]-ct[1])+ct[0]*(at[1]-nt[1])))>=0&&0!==vt&&0!==wt||((vt=ut[0]*(nt[1]-ct[1])+ct[0]*(ut[1]-nt[1])+nt[0]*(ct[1]-ut[1]))^(wt=ut[0]*(at[1]-ct[1])+ct[0]*(ut[1]-at[1])+at[0]*(ct[1]-ut[1])))>=0&&0!==vt&&0!==wt)}(Ye,Ce,Y,te)){var ce,_e;if(_e=(Ye[1]-Y[1])*(Ce[0]-Ye[0])*(te[0]-Y[0])+Y[0]*(te[1]-Y[1])*(Ce[0]-Ye[0])-Ye[0]*(Ce[1]-Ye[1])*(te[0]-Y[0]),0==(ce=(te[0]-Y[0])*(Ye[1]-Ce[1])-(Ce[0]-Ye[0])*(Y[1]-te[1]))||0===_e){var Ie=Ne(Ye,Ce),Re=Ne(Y,te),He=Ie[0],We=Ie[1],Je=Re[0],Xe=Re[1];if(We[0]===Je[0]&&We[1]===Je[1])return We;if(He[0]===Xe[0]&&He[1]===Xe[1])return He;if(Pe(We,Re)&&Pe(Je,Ie))return[Je,We];if(Pe(He,Re)&&Pe(Xe,Ie))return[He,Xe];if(Pe(He,Re)&&Pe(We,Re))return[He,We];if(Pe(Je,Re)&&Pe(Xe,Re))return[Je,Xe]}return[_e/ce,(_e=Ce[1]*(Ye[0]-Ce[0])*(te[1]-Y[1])+(te[0]-Ce[0])*(te[1]-Y[1])*(Ye[1]-Ce[1])-te[1]*(Y[0]-te[0])*(Ce[1]-Ye[1]))/(ce=(Ye[0]-Ce[0])*(te[1]-Y[1])-(Ce[1]-Ye[1])*(Y[0]-te[0]))]}var nt,at,ut,ct,vt,wt;return!1}function Ne(Ye,Ce){return Ye[0]===Ce[0]?Ye[1]<Ce[1]?[Ye,Ce]:[Ce,Ye]:Ye[0]<Ce[0]?[Ye,Ce]:[Ce,Ye]}function Pe(Ye,Ce){return Ce[0][0]===Ce[1][0]?Ye[1]>=Ce[0][1]&&Ye[1]<=Ce[1][1]:Ye[0]>=Ce[0][0]&&Ye[0]<=Ce[1][0]}var ze=function(){function Ye(Y){this._cvs=null,this._cropBox=null,this._isCropping=!1,this._zoom=1,this._edgeMargin=20,this._cropStyle={cornerColor:"#FE8E14",lineColor:"#FE8E14",lineWidth:2,lineDash:"solid"},this._cvs=Y,this._initEvent()}var Ce=Ye.prototype;return Ce.dispose=function(){this._cvs.removeEventListener("touchstart",null),this._cvs.removeEventListener("touchmove",null),this._cvs.removeEventListener("touchend",null),this._cvs.removeEventListener("mousedown",null),document.removeEventListener("mousemove",null),document.removeEventListener("mouseup",null),this._cvs=null,this.onAreaChanged=null},Ce.setCropMode=function(Y){Y!==this._isCropping&&(Y||(this._cropBox=null),this._isCropping=Y)},Ce.setZoom=function(Y){this._zoom=Y,this._cropBox&&(this._cropBox.zoom=Y)},Ce.setCropArea=function(Y,te){if(Y){this._limitArea=te;var ce=this._cvs,_e=this._zoom,Ie=this._edgeMargin,Re=G()(Y).call(Y,function(He,We){return We%2==0?He/_e+te.relLeft+Ie:He/_e+te.relTop+Ie});this._cropBox=new Le({zoom:_e,vertexes:Re,width:ce.width-Ie-te.relLeft,height:ce.height-Ie-te.relTop,leftEdge:Ie+te.relLeft,topEdge:Ie+te.relTop,mode:"free",dpr:window.devicePixelRatio}),this._isCropping&&this._drawCropArea()}},Ce.getCropArea=function(){var Y,te=this._cropBox,ce=this._zoom,_e=this._edgeMargin,Ie=this._limitArea;return te?G()(Y=te.vertexes).call(Y,function(Re,He){return He%2==0?(Re-Ie.relLeft-_e)*ce:(Re-Ie.relTop-_e)*ce}):[]},Ce.setCropStyle=function(Y){q(Y,this._cropStyle),this._isCropping&&this._drawCropArea()},Ce.resize=function(Y){var te=this._cropBox,ce=this._edgeMargin;if(te){var _e=this._cvs,Re=_e.height;te.width=_e.width-ce-Y.relLeft,te.height=Re-ce-Y.relTop,te.leftEdge=ce+Y.relLeft,te.topEdge=ce+Y.relTop}},Ce._initEvent=function(){var Y=this,te=this._cvs;function ce(Re){this._cvsBoundingRect=this._cvs.getBoundingClientRect();var We=this._cvsBoundingRect;this._cropBox&&this._cropBox.onStartHandler(Re.clientX-We.left,Re.clientY-We.top)}function _e(Re){if(this._cropBox&&this._cropBox.isPointSelected){var He=this._cvsBoundingRect;this._cropBox.onMoveHandler(Re.clientX-He.left,Re.clientY-He.top),this._drawCropArea()}}function Ie(){var Re;this._cropBox&&this._cropBox.isPointSelected&&(this._cropBox.onEndHandler(),this._drawCropArea(),null==(Re=this.onAreaChanged)||Re.call(this,this.getCropArea()))}te.addEventListener("touchstart",function(Re){var He=Re.touches;He.length>1||ce.call(Y,He[0])}),te.addEventListener("mousedown",ie()(ce).call(ce,this)),te.addEventListener("touchmove",function(Re){var He=Re.touches;He.length>1||Y._cropBox.isPointSelected&&(_e.call(Y,He[0]),Re.preventDefault())}),document.addEventListener("mousemove",ie()(_e).call(_e,this)),te.addEventListener("touchend",ie()(Ie).call(Ie,this)),document.addEventListener("mouseup",ie()(Ie).call(Ie,this))},Ce._drawCropArea=function(){var Y,te=this._cropBox,ce=this._cvs,_e=this._cropStyle;if(te){var Ie=X()(Y=te.probePoints).call(Y),Re=ce.getContext("2d");Re.clearRect(0,0,ce.width,ce.height);var He=_e.lineWidth;if(He%2!=0)for(var We=0;We<Ie.length;We++)Ie[We]=Math.floor(Ie[We])-He/2;var Je=X()(Ie).call(Ie,0,8);Re.fillStyle="rgba(0, 0, 0, 0.2)",Re.fillRect(0,0,ce.width,ce.height),function(Xe,st,nt){Xe.save(),Xe.beginPath(),Xe.strokeStyle=nt.lineColor,Xe.lineWidth=nt.lineWidth,"dashed"===nt.lineDash&&Xe.setLineDash([5,5]),Xe.moveTo(st[0],st[1]);for(var at=0;at<st.length;at+=2){var ut=(at+2)%8;Xe.lineTo.apply(Xe,[st[ut],st[ut+1]])}Xe.closePath(),Xe.globalCompositeOperation="destination-out",Xe.fillStyle="rgba(0,0,0)",g()(Xe).call(Xe),Xe.globalCompositeOperation="source-over",Xe.stroke(),Xe.closePath(),Xe.restore()}(Re,Je,_e),function(Xe,st,nt){var at=Math.floor(8);Xe.save(),Xe.strokeStyle=nt.cornerColor,Xe.lineWidth=nt.lineWidth;for(var ut=0;ut<st.length;ut+=2){var ct=[st[ut],st[ut+1]];Xe.clearRect(ct[0]-at/2,ct[1]-at/2,at,at),Xe.strokeRect(ct[0]-at/2,ct[1]-at/2,at,at)}Xe.restore()}(Re,Ie,_e)}},Ye}(),ge=function(){function Ye(Y,te){this._obElement=null,this._callback=null,this._unbindFn=null,this._callback=te,this._obElement=Y,this._initObserver()}var Ce=Ye.prototype;return Ce._initObserver=function(){var Y=this._callback,te=this._obElement;if(void 0!==window.ResizeObserver){var ce=new window.ResizeObserver(function(Ie){Y(Ie[0].contentRect)});ce.observe(te),this._unbindFn=function(){ce.unobserve(te),ce.disconnect(),ce=null}}else{var _e=document.createElement("iframe");_e.id="fm",_e.style.cssText="width:100%;height:100%;z-index:-1;",_e.onresize=function(){var Ie=te.getBoundingClientRect();Y(Ie)},this._unbindFn=function(){_e.remove(),_e=null}}},Ce.dispose=function(){this._unbindFn(),this._unbindFn=null,this._callback=null,this._obElement=null},Ye}(),Ee=(n(144),function(){function Ye(Y,te){this.name="",this.icon="",this.text="",this.className="",this.onclick=null,this.element=null,this.options=Y,this.context=te,this.element=this._initEl()}var Ce=Ye.prototype;return Ce._initEl=function(){var Wt,zt,Ht,It,Y=this.options,te=Y.icon,ce=Y.text,_e=Y.className,Ie=Y.onclick,Re=Y.name,He=Y.onmount,We=Y.onunmount,Je=Y.dropdown,Xe=Y.order,st=void 0===Xe?0:Xe,nt=Y.onSelected,at=Y.isSelected,ut=void 0!==at&&at,ct=Y.visibility,vt=void 0===ct||ct,wt=this.context,gt=document.createElement("div");if(this.name=Re,_e){if(!1===vt)return gt.className=_e+" block",gt;gt.className=_e}return gt.style.order=String(st),function(Wt,zt){if(zt){var Ht=document.createElement("i");Ht.className=zt,Wt.appendChild(Ht)}}(gt,te),function(Wt,zt){if(zt){var Ht=document.createElement("p");Ht.innerText=zt,Wt.appendChild(Ht)}}(gt,ce),Wt=gt,Ht=wt,It=ut,(zt=He)&&Z()(function(){zt(Wt,Ht,It)},0),We&&(this._unmount=ie()(We).call(We,null,gt,wt)),function(Wt,zt,Ht){Wt.addEventListener("click",function(It){H(zt)?x.emit(zt,It,Ht):me(zt)&&zt(It,Ht)})}(gt,Ie,wt),function(Wt,zt,Ht,It){var nr=Wt;nr.bSelected=It,zt&&(It&&Wt.classList.add("dcs-selected"),Wt.addEventListener("click",function(Yn){nr.bSelected=!nr.bSelected,Wt.classList[nr.bSelected?"add":"remove"]("dcs-selected"),null==zt||zt(nr.bSelected,Ht)}))}(gt,nt,wt,ut),function(Wt,zt,Ht){Ue.apply(this,arguments)}(gt,wt,Je),gt},Ce.destroy=function(){var Y;null==(Y=this._unmount)||Y.call(this),this.element=null},Ce.update=function(){if(this.element){var Y,te=this._initEl();null==(Y=this.element.parentElement)||Y.insertBefore(te,this.element),this.element.remove(),this.element=te}},Ce.setSelected=function(Y){var te=this.options.onSelected;te&&te(Y,this.context)},Ye}());function Ue(){return(Ue=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e,Ie,Re,He,We,Xe,st,nt;return l.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(at.prev=0,ce=function(ut){var ct=document.createDocumentFragment();return A()(ut).call(ut,function(vt,wt){var gt=document.createElement("li"),zt=vt.innerHtml;if(gt.customData=vt.value,vt.isSelected&&gt.classList.add("selectedItem"),zt)gt.innerHTML=zt;else{var Ht=document.createElement("i");Ht.style.pointerEvents="none",Ht.className=vt.icon||"";var It=document.createElement("p");It.style.pointerEvents="none",It.innerText=vt.text||"",gt.appendChild(Ht),gt.appendChild(It)}ct.appendChild(gt)}),ct},_e=function(ut,ct,vt,wt){void 0===ct&&(ct=!1);for(var gt=[],Wt=ut.children,zt=0;zt<Wt.length;zt++)Wt[zt].classList.contains("selectedItem")&&gt.push(Wt[zt]);var Ht=!0;function It(nr,Yn){nr.classList[Yn?"add":"remove"]("selectedItem")}ut.onclick=function(nr){var Yn,In,Kn=!1;if(nr instanceof MouseEvent){if(nr.stopPropagation(),!Ht)return;In=nr.target,Kn=!0}else In=nr;if("LI"===(null==(Yn=In)?void 0:Yn.tagName)){Ht=!1;var oo=oe()(gt).call(gt,In);if(oo>-1){if(!ct)return void(Ht=!0);E()(gt).call(gt,oo,1),It(In,!0)}else if(ct)gt.push(In),It(In,!0);else{for(;gt.length;)It(gt.pop(),!1);It(In,!0),gt.push(In),ut&&(ut.parentNode.classList.remove("dcs-selected"),ut.classList.add("nodisplay"),ut.dataset.showDropdown="false",wt.dcs.emit("hideResolutionList",ut,wt))}if(Kn){var pu=null==vt?void 0:vt(In,In.customData,wt);h.a.resolve(pu).then(function(){Ht=!0})}}}},Ie=function(ut,ct,vt){ct.dataset.showDropdown="false",ut.onclick=function(wt){"true"!=ct.dataset.showDropdown&&(ct.classList.remove("nodisplay"),ut.classList.add("dcs-selected"),ct.dataset.showDropdown="true",wt.stopPropagation(),vt.dcs.addGlobalClickEvent(ct,function(){return!(!ct||"true"!=ct.dataset.showDropdown||(ct.classList.add("nodisplay"),ct.parentElement.classList.remove("dcs-selected"),ct.dataset.showDropdown="false",vt.dcs.emit("hideResolutionList"),0))}))}},te){at.next=6;break}return at.abrupt("return");case 6:return Re=te.list,He=te.multiple,We=te.onclick,at.next=9,Re(Ce,Y);case 9:if(at.t0=at.sent,at.t0){at.next=12;break}at.t0=[];case 12:Xe=ce(at.t0),(st=Ce.querySelector("dropdown"))?(st.removeEventListener("click",null),A()(nt=st.childNodes).call(nt,function(ut){ut.remove()}),st.appendChild(Xe)):((st=document.createElement("ul")).className="resolutionList dropdown nodisplay",st.appendChild(Xe),Ce.appendChild(st)),Ie(Ce,st,Y),_e(st,He,We,Y),at.next=29;break;case 20:return at.prev=20,at.t1=at.catch(0),Fe("Error Begin---"),Fe(at.t1),Fe(Ce),Fe(Y),Fe(te),Fe("Error End---"),at.abrupt("return",null);case 29:case"end":return at.stop()}},Ye,null,[[0,20]])}))).apply(this,arguments)}var Be=n(266),Qe=n.n(Be),Ze=(n(431),n(89)),tt=n.n(Ze),lt=n(267),dt=n.n(lt),_t=n(268),Rt=n.n(_t),xt=n(77),Pt=n.n(xt),jt=(n(252),{OK:{code:0,message:"Successful"},HTTPS_REQUIRED:{code:-4201,message:"HTTPS is required for accessing cameras."},MEDIADEVICES_NOT_IMPL:{code:-4202,message:"The current browser has not implemented the MediaDevices interface."},GETUSERMEDIA_NOT_IMPL:{code:-4203,message:"The current browser has not implemented the getUserMedia interface."},NO_MEMORY:{code:-4204,message:"Not enough memory for this operation."},NO_CAMERA_SELECTED:{code:-4205,message:"No camera is selected."},VIDEO_ELEMENT_REQUIRED:{code:-4206,message:"A Video element is required for this operation."},CAMERA_PLUG_OUT:{code:-4207,message:"The camera is not plugged in."},CAMERA_NOT_OPEN:{code:-4208,message:"The camera is not open."},CAMERA_SETTINGS_NOT_SUPPORT:{code:-4209,message:"The current browser does not support camera settings."},FAILED_GET_USERMEDIA:{code:-4210,message:"Failed to get camera input."},SOURCE_NOT_FOUND:{code:-4211,message:"The camera source can not be found."},VIDEO_NOT_PLAY:{code:-4214,message:"The video must be playing for the capture operation to work."},VIDEO_NOT_STOP:{code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},NO_CAMERA:{code:-4216,message:"No camera is found."},LICENSE_INVALID:{code:-4217,message:"The license is invalid."},MAX_DOCUMENT_LIMIT:{code:-4218,message:"The number of images processed at one time exceeds the maximum limit."},MAX_IMAGES_IN_BUFFER_LIMIT:{code:-4219,message:"The number of images processed exceeded memory limit."},CAPTURE_NO_IMAGE:{code:-4220,message:"No image is found for the capture operation."},IMAGE_FORMAT_INVALID:{code:-4221,message:"The image format is not support."},RESOLUTION_INVALID:{code:-4222,message:"The resolution is not support."}}),Ir=function(){return{icon:"dcs-font dcs-i-load",onclick:(Ye=s()(l.a.mark(function Ce(Y,te){var ce,_e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if((ce=te.dcs).emit("blurPage"),!ce.loadFn){Ie.next=9;break}return Ie.next=5,ce.loadFn(te);case 5:(_e=Ie.sent)&&!te.page.isDestroyed&&zo(_e,ce),Ie.next=11;break;case 9:return Ie.next=11,Eo(Y.target,te);case 11:ce.emit("focusPage");case 12:case"end":return Ie.stop()}},Ce)})),function(Ce,Y){return Ye.apply(this,arguments)}),className:"dcs-btn-loadBtn",text:"Load"};var Ye};function Eo(Ye,Ce){return _i.apply(this,arguments)}function _i(){return(_i=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie;return l.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return te=!1,ce=!1,(_e=document.createElement("input")).type="file",_e.multiple=!0,_e.accept="image/png,image/jpeg",Ie=function(){_e.value=null,_e.files=null,_e.onchange=null,_e=null,ce=!1,te=!1,Y.dcs.removeGlobalBlurEvent(Ce),Y.dcs.removeGlobalFocusEvent(Ce)},ce=!0,_e.click(),te=!0,Re.abrupt("return",new h.a(function(He){Y.dcs.addGlobalFocusEvent(Ce,function(){Z()(function(){!ce&&te&&(Mt.log("select file canceled"),Ie(),Ce.onblur=null,He(!0))},200)}),Y.dcs.addGlobalBlurEvent(Ce,function(){ce&&te&&(Mt.log("selecting file"),ce=!1)}),_e.onchange=s()(l.a.mark(function We(){var Je,Xe,st,nt,at,ut;return l.a.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if((Je=Y.dcs).showLoading("load local image"),vt.prev=2,te=!1,""!==_e.value){vt.next=7;break}vt.next=25;break;case 7:Xe=_e.files,st=[],nt=!1,at=0;case 11:if(!(at<Xe.length)){vt.next=24;break}if("application/pdf"!=(ut=Xe[at]).type&&"image/tiff"!=ut.type){vt.next=17;break}return 0==nt&&x.emit("video-error",jt.IMAGE_FORMAT_INVALID),nt=!0,vt.abrupt("continue",21);case 17:return vt.next=19,Se(Xe[at]);case 19:st.push(vt.sent);case 21:at++,vt.next=11;break;case 24:st.length>0&&!Y.page.isDestroyed&&zo(st,Je);case 25:return vt.prev=25,Je.hideLoading("load local image"),Ie(),Ce.onblur=null,He(!0),vt.finish(25);case 31:case"end":return vt.stop()}},We,null,[[2,,25,31]])}))}));case 11:case"end":return Re.stop()}},Ye)}))).apply(this,arguments)}function zo(Ye,Ce){return Qo.apply(this,arguments)}function Qo(){return(Qo=s()(l.a.mark(function Ye(Ce,Y){return l.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:Y.showLoading("handleBlobList"),Ke(Y,Ce).finally(function(){Y.hideLoading("handleBlobList")});case 2:case"end":return te.stop()}},Ye)}))).apply(this,arguments)}function To(Ye,Ce){return Gn.apply(this,arguments)}function Gn(){return(Gn=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie,Re,He;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(ce=Y.dcs,Ie=(te=Y.page).options,!(_e=Ce.currentTarget).classList.contains("dcs-selected")){We.next=22;break}if(Re=!1,Ie.file&&Ie.file.blobList&&Ie.file.blobList.length>0&&(Re=!0),!ce.config.scannerViewer.funcConfirmExitContinuousScan||0!=ce.config.scannerViewer.funcConfirmExitContinuousScan(Re)){We.next=9;break}return We.abrupt("return");case 9:_e.classList.remove("dcs-selected"),Ie.continuous=!1,Ie.file.blobList=[],(He=document.querySelector(".previewImg")).src&&(Vt.revokeObjectURL(He.src),He.src=Ve),He.parentElement.classList.add("hidden"),ce.multipleHandleFn([],{page:te,dcs:ce}),ce.multipleView=!1,ce._dvs.camera&&ce._dvs.camera._cameraDvs&&ce._dvs.camera._cameraDvs.ViewControl&&ce._dvs.camera._cameraDvs.ViewControl.getViewerByIndex(0).removeAllSync(),ce.config.scannerViewer.maxDocuments>0&&(ce.config.scannerViewer.autoScan.enableAutoScan||ce.config.scannerViewer.autoDetect.enableAutoDetect)&&(ce.captureLoop.changeStyle(),ce.captureLoop.setEnable(),ce.config.scannerViewer.autoScan.enableAutoScan?ce.captureLoop.setAutoScan():ce.captureLoop.setAutoDetect()),We.next=25;break;case 22:_e.classList.add("dcs-selected"),Ie.continuous=!0,ce.multipleView=!1;case 25:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}var Ks=function(){return{icon:"dcs-font dcs-i-close",className:"dcs-btn-closeBtn",onclick:(Ye=s()(l.a.mark(function Ce(Y,te){var ce,_e,Ie;return l.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(ce=te.dcs,!(_e=te.page)._isClosed){Re.next=4;break}return ce.navigateBack(),Re.abrupt("return");case 4:if(_e._isClosed=!0,ce.emit("blurPage"),!ce.multipleCloseHandleFn){Re.next=9;break}return Re.next=9,ce.multipleCloseHandleFn();case 9:if(Ie=!1,_e.options&&_e.options.file&&_e.options.file.blobList&&_e.options.file.blobList.length>0&&(Ie=!0),!ce.config.scannerViewer.funcConfirmExit||0!=ce.config.scannerViewer.funcConfirmExit(Ie)){Re.next=13;break}return Re.abrupt("return");case 13:ce.navigateBack();case 14:case"end":return Re.stop()}},Ce)})),function(Ce,Y){return Ye.apply(this,arguments)})};var Ye},ro=n(182),ei=n.n(ro),Hn=function(){return{icon:"dcs-font dcs-i-resolution",className:"dcs-btn-resBtn",dropdown:{multiple:!1,list:function(Ye,Ce){var Y=Ce.dcs;return new h.a(function(te,ce){Y.once("onPlayed",s()(l.a.mark(function _e(){var Ie,Re,He,We,Je,Xe,st;return l.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(Ie=Ae(Y,"config.scannerViewer.resolution"),Re=Ie.valueList,He=Ie.defaultValue,Y.showLoading("resolution list"),nt.prev=3,Re&&Re.length){nt.next=12;break}return nt.next=7,Y.getResolution();case 7:Je=nt.sent,He=He||{width:1280,height:720},Re=G()(Je).call(Je,function(at){return{label:at.width+"\xd7"+at.height,value:at}}),nt.next=13;break;case 12:He=He||Re[Re.length-1].value;case 13:if(!((Xe=ti(He,Re))<0)){nt.next=31;break}return nt.next=17,Y.getCurrentResolution();case 17:if(!(st=nt.sent)||st.width==He.width||st.height==He.height){nt.next=30;break}return nt.prev=19,nt.next=22,Y.setResolution(He);case 22:Xe<0&&(Re.push({value:st,label:st.width+"\xd7"+st.height}),Xe=Re.length-1),nt.next=28;break;case 25:nt.prev=25,nt.t0=nt.catch(19);case 28:nt.next=31;break;case 30:Xe<0&&(Re.push({value:st,label:st.width+"\xd7"+st.height}),Xe=Re.length-1);case 31:te(G()(We=Re).call(We,function(at,ut){return{value:at.value,text:at.label,icon:"checkBox",isSelected:ut===Xe}}));case 32:return nt.prev=32,Y.hideLoading("resolution list"),nt.finish(32);case 35:case"end":return nt.stop()}},_e,null,[[3,,32,35],[19,25]])}))),Y.on("resetResolution",function(){var Ie=Y.config.scannerViewer.resolution.defaultValue,Re=Y.config.scannerViewer.resolution.valueList,He=ti(Ie,Re);He<0&&(Re.push({value:Ie,label:Ie.width+"\xd7"+Ie.height}),He=Re.length-1);var We=document.getElementsByClassName("resolutionList");if(We&&We.length>0)for(var Je=We[0],Xe=0;Xe<Je.childNodes.length;Xe++)Xe==He&&Je.onclick(Je.childNodes[Xe])}),Y.on("resetRealResolution",function(){var _e=Y.config.scannerViewer.resolution.defaultValue;Y.showLoading("resolution button click"),Y.setResolution(_e).then(function(Ie){Y.hideLoading("resolution button click")})})})},onclick:function(Ye,Ce,Y){var te=Y.dcs;te.showLoading("resolution button click"),te.setResolution(Ce).then(function(ce){Ce.width!=ce.width&&Ce.height!=ce.height&&x.emit("video-error",jt.RESOLUTION_INVALID),te.config.scannerViewer.resolution.defaultValue=Ce,te.hideLoading("resolution button click"),te.getCameraView().resetVideoInfo()})}},onclick:function(Ye,Ce){var Y=Ce.dcs;Y.emit("blurPage"),Y.once("hideResolutionList",function(){Y.emit("focusPage")})}}};function ti(Ye,Ce){var Y=Ye.width,te=Ye.height,ce=ei()(Ce).call(Ce,function(_e){var Ie=_e.value||{};return Ie.width===Y&&Ie.height===te});return ce<0&&(ce=ei()(Ce).call(Ce,function(_e){var Ie=_e.value||{};return Ie.width===te&&Ie.height===Y})),ce}function no(Ye,Ce){return Yo.apply(this,arguments)}function Yo(){return(Yo=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie,Re,He;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:_e=(ce=Y.page).options,(te=Y.dcs).multipleHandleFn&&(Ie=_e.file.blobList,te.hideLoading("handle multiple image"),te.emit("blurPage"),te.multipleHandleFn(Ie,{page:ce,dcs:te}),Re=document.querySelector(".dcs-btn-multipleImg"),He=Re.querySelector(".previewImg"),Vt.revokeObjectURL(He.src),He.src=Ve,He.onload=null,He.onerror=null);case 3:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}function vs(){return(vs=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie,Re,He,We,Je,Xe,st,nt,at;return l.a.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(!(te=Ce.options).isFilterPage){ut.next=6;break}return ut.next=4,Ko(Ce,Y,te.onSave,te.file);case 4:ut.next=48;break;case 6:if(Y.showLoading("save button click"),ce=te.file,_e=te.onSave,He=void 0===(Re=(void 0===(Ie=Y.config)?{}:Ie).filterViewer)?{}:Re,ut.prev=10,We=Ce.getOriBlob(),Je=Ce.getAngle(),!ce.isFull||0!=Je){ut.next=26;break}return ut.next=16,St(We);case 16:if(Xe=ut.sent,!He.visibility){ut.next=21;break}Y.showFilterPage({blob:We,iImageData:Xe,angle:0,onSave:_e,file:ce}),ut.next=24;break;case 21:return Ce.options.iImageData=Xe,ut.next=24,Ko(Ce,Y,te.onSave,te.file);case 24:ut.next=44;break;case 26:return ce.detectArea=Ce.getDetectAreaForNotRotate(),ut.next=29,St(We);case 29:return st=ut.sent,ut.next=32,At(st,0,ce.detectArea);case 32:return nt=ut.sent,ut.next=35,_r(nt);case 35:if(at=ut.sent,!He.visibility){ut.next=40;break}Y.showFilterPage({blob:at,iImageData:nt,angle:Je,onSave:_e,file:ce}),ut.next=44;break;case 40:return Ce.options.blob=at,Ce.options.iImageData=nt,ut.next=44,Ko(Ce,Y,te.onSave,te.file);case 44:return ut.prev=44,Y.hideLoading("save button click"),kt(Y),ut.finish(44);case 48:case"end":return ut.stop()}},Ye,null,[[10,,44,48]])}))).apply(this,arguments)}function Ko(Ye,Ce,Y,te){return Js.apply(this,arguments)}function Js(){return(Js=s()(l.a.mark(function Ye(Ce,Y,te,ce){var _e,Ie,Re,He,We,Je,Xe,st,nt;return l.a.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(Y.showLoading("save filter page"),_e=Ce.options.blob,Ie=Ce.options.iImageData,at.prev=3,Re=Ce.options.file.filterValue,(He=Ce.getAngle())!=(void 0===(We=ce.oriAngle)?0:We)||0!=He||"original"!=Re){at.next=12;break}return at.next=10,Me(Y,_e,te,ce);case 10:at.next=31;break;case 12:if(ce.angle=He,0==He){at.next=20;break}return at.next=16,Gt(Ie,He);case 16:return Ie=at.sent,at.next=19,_r(Ie);case 19:_e=at.sent;case 20:if(Je=Ae(Y.config,"filterViewer.filter"),Xe=Je.valueList,!((st=Y.filterHandleList).length>0)){at.next=29;break}if("original"==Re){at.next=29;break}return at.next=27,z(Ie,_e,st,Xe,Re);case 27:(nt=at.sent)&&(_e=nt);case 29:return at.next=31,Me(Y,_e,te,ce);case 31:at.next=36;break;case 33:at.prev=33,at.t0=at.catch(3),Fe(at.t0);case 36:return at.prev=36,_e=null,Ie=null,Y.hideLoading("save filter page"),kt(Y),Y.config.filterViewer.exitDocumentScanAfterSave&&(Y.emit("video-closed"),Y.captureLoop&&Y.captureLoop.setIsLooping(!1),Y.emit("focusPage"),Y.navigateBack(3)),at.finish(36);case 43:case"end":return at.stop()}},Ye,null,[[3,33,36,43]])}))).apply(this,arguments)}var lu=function(Ye){function Ce(Y){var te,ce=Ye.getCurrentPage(),_e=ce.imageEl,Ie=ce.options.detectArea,Re=_e.naturalWidth,He=_e.naturalHeight;le(_()(te=[]).call(te,Ie),Re,He)&&Y.classList.add("dcs-selected")}return{icon:"dcs-font dcs-i-fullCrop",className:"dcs-btn-toggleFullArea",onclick:function(Y,te){var _e=te.page.toggleFullAreaButton(),Ie=null==Y?void 0:Y.currentTarget;Ie&&Ie.classList[_e?"remove":"add"]("dcs-selected")},onmount:function(Y){var te=Ye.getCurrentPage();te.imageEl.addEventListener("load",function(){Ce(Y)}),Ce(Y),te.getCropManage().onAreaChanged=function(ce){var _e=te.isAreaFulfilled(ce);te.options.file.isFull=_e,Y&&Y.classList[_e?"add":"remove"]("dcs-selected")}}}},Jo=function(Ye){return{icon:"dcs-font dcs-i-filter",className:"dcs-btn-filterBtn",onclick:function(Ce,Y){var te=Y.page;if(Ce){var ce=Ce.target;ce&&(Ce.stopPropagation(),function(_e,Ie,Re){Xs.apply(this,arguments)}(ce,Ye,te))}}}},zn=null;function Xs(){return(Xs=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(ce=document.querySelector(".filterDropDown")){Ie.next=9;break}return Ie.next=4,fu(Y,te);case 4:return(_e=Ie.sent).dataset.showDropdown="true",Ce.appendChild(_e),Zs(Y,ce),Ie.abrupt("return");case 9:if("true"!==ce.dataset.showDropdown){Ie.next=11;break}return Ie.abrupt("return");case 11:cu(ce,!0),Zs(Y,ce),ce.dataset.showDropdown="true",te.render();case 15:case"end":return Ie.stop()}},Ye)}))).apply(this,arguments)}function Zs(Ye,Ce){Ye.addGlobalClickEvent(Ce,function(Y){var te=document.querySelector(".filterDropDown");return!(!te||"true"!==te.dataset.showDropdown||(te.classList.add("nodisplay"),te.dataset.showDropdown="false",0))})}function cu(Ye,Ce){Ye.classList[Ce?"remove":"add"]("nodisplay"),Ce&&zn&&(Ye.scrollLeft=zn.offsetLeft)}function fu(Ye,Ce){return vi.apply(this,arguments)}function vi(){return(vi=s()(l.a.mark(function Ye(Ce,Y){var te,_e,Ie,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt,wt,gt,Wt,zt,Ht,It;return l.a.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(Ce.showLoading("create filter list"),(te=document.createElement("ul")).className="filterDropDown dropdown",nr.prev=3,Ie=void 0===(_e=Ce.filterHandleList)?[]:_e,Re=Ae(Ce.config,"filterViewer.filter"),He=Re.valueList,We=Y.options,Je=Y.getAngle(),Xe=Re.defaultValue,Pt()(He).call(He,function(Yn){return"original"===Yn.value})||He.unshift({value:"original",label:"original"}),st=We.blob,!(nt=We.iImageData)){nr.next=24;break}return nr.next=17,$s(nt,0);case 17:return at=nr.sent,nr.next=20,_r(at);case 20:ut=nr.sent,nt=null,nr.next=31;break;case 24:return nr.next=27,Gr(st,0);case 27:return ut=nr.sent,nr.next=30,St(ut);case 30:at=nr.sent;case 31:tt()(He).call(He,function(Yn){return Yn.value===Xe})||(Xe="original"),ct=document.createDocumentFragment(),vt=0;case 34:if(!(vt<He.length)){nr.next=48;break}if(Wt=(wt=He[vt]).label,zt=void 0,"original"!==(gt=wt.value)){nr.next=41;break}zt=st,nr.next=44;break;case 41:return nr.next=43,z(at,st,Ie,He,gt);case 43:zt=nr.sent;case 44:zt&&(Ht=document.createElement("li"),It={value:gt,url:Vt.createURL(zt),label:Wt},Ht.innerHTML='<img class="preFilter" src="'+It.url+'" style="transform:rotate('+Je+'deg)"><p>'+It.label+"</p>",ct.appendChild(Ht),Ht.dataset.filterValue=It.value,It.value===Xe&&(Ht.classList.add("selectedItem"),zn=Ht));case 45:vt++,nr.next=34;break;case 48:at=null,te.appendChild(ct),ct=null,te.addEventListener("click",function(){var Yn=s()(l.a.mark(function In(Kn){return l.a.wrap(function(oo){for(;;)switch(oo.prev=oo.next){case 0:jr(Kn,{dcs:Ce,page:Y});case 1:case"end":return oo.stop()}},In)}));return function(In){return Yn.apply(this,arguments)}}());case 52:return nr.prev=52,Ce.hideLoading("create filter list"),nr.finish(52);case 55:return nr.abrupt("return",te);case 56:case"end":return nr.stop()}},Ye,null,[[3,,52,55]])}))).apply(this,arguments)}function jr(Ye,Ce){return Qn.apply(this,arguments)}function Qn(){return(Qn=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie,Re,He,Je,Xe,st;return l.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(te=Y.dcs,ce=Y.page,Ce.stopPropagation(),(_e=Ce.target)!==zn&&"LI"===_e.tagName){nt.next=5;break}return nt.abrupt("return");case 5:if(zn&&zn.classList.remove("selectedItem"),zn=_e,_e.classList.add("selectedItem"),Ie=Ae(te.config,"filterViewer.filter"),Re=Ie.valueList,(He=te.filterHandleList).length){nt.next=13;break}return nt.abrupt("return");case 13:if(Je=ce.options.blob,"original"!==(Xe=_e.dataset.filterValue)){nt.next=20;break}return ce.options.file.filterValue=Xe,ce.updateImage(Je),nt.abrupt("return");case 20:return te.showLoading("filter button click"),nt.prev=21,nt.next=24,O(te,Je,He,Re,Xe);case 24:(st=nt.sent)&&(ce.options.file.filterValue=Xe,ce.updateImage(st));case 26:return nt.prev=26,te.hideLoading("filter button click"),nt.finish(26);case 29:case"end":return nt.stop()}},Ye,null,[[21,,26,29]])}))).apply(this,arguments)}var yi=function(){function Ye(Ce){this._updateData(Ce)}return Ye.prototype._updateData=function(Ce){var Y=this,te=$e()(Ce);A()(te).call(te,function(ce){Y[ce]=Ce[ce]})},Ye}(),qe=["blobList"];function bt(Ye){Ye&&!Ye.isDestroyed&&Ye.destroy()}function At(Ye,Ce,Y){return ht.apply(this,arguments)}function ht(){return(ht=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e,Ie,Re;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return _e=!1,te&&(ce=ft(te),_e=le(ce,Ce.imageWidth,Ce.imageHeight)),Re=!1,_e||!te||(Ie={points:ce},Re=!0),We.abrupt("return",Dt(Ce,Y,Ie,Re,{quality:85,returnType:V.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(Je){return Ce.imageData=Je.src,Je.result}));case 5:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}function Zt(Ye){var Ce=Ye.config,Y=Ae(void 0===Ce?{}:Ce,"filterViewer.filter"),te=Y.defaultValue,ce=void 0===te?"original":te,_e=Y.valueList;return"original"!==ce&&tt()(_e).call(_e,function(Ie){return Ie.value===ce})?ce:"original"}function yt(Ye,Ce,Y){return yr.apply(this,arguments)}function yr(){return(yr=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e,Ie,Re;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if("original"!==(ce=Zt(Ce))){We.next=3;break}return We.abrupt("return",{filterValue:ce,filterBlob:te});case 3:return Ie=Ae(void 0===(_e=Ce.config)?{}:_e,"filterViewer.filter"),Re=Ie.valueList,We.next=8,z(Y,te,Ce.filterHandleList,Re,ce);case 8:return We.abrupt("return",{filterValue:ce,filterBlob:We.sent});case 10:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}function Cr(Ye,Ce,Y,te,ce,_e){return ar.apply(this,arguments)}function ar(){return(ar=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e,Ie){var Re,We,Je,Xe,st,at,ut,vt,wt,gt,Wt,Ht;return l.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(void 0===te&&(te=!1),void 0===ce&&(ce=!1),void 0===_e&&(_e=!1),!Ie){It.next=14;break}if(!_e){It.next=11;break}return It.next=7,ye(Ce);case 7:Re=new yi({oriBlob:Ie,preview:It.sent}),It.next=12;break;case 11:Re=new yi({oriBlob:Ie});case 12:It.next=20;break;case 14:return _e||(We=!1),It.next=17,Dt(Ce,void 0,void 0,void 0,void 0,We);case 17:Ce.imageData=(Je=It.sent).src,Re=new yi(_e?{oriBlob:Je.result,preview:Je.preview}:{oriBlob:Je.result});case 20:if(Xe=Ae(Y,"config.scannerViewer"),at=Ce.imageWidth,ut=Ce.imageHeight,void 0!==(st=Xe.enableBorderDetection)&&!st){It.next=39;break}return It.next=25,b(Ce,!0,Y);case 25:if(vt=mt(vt=ft(It.sent.cornerPoints),at,ut),Re.detectArea=vt,!ce&&!te){It.next=37;break}return It.next=32,At(Ce,void 0,Re.detectArea);case 32:return wt=It.sent,It.next=35,_r(wt);case 35:gt=It.sent,te&&(Re.resImage=wt,Re.resBlob=gt);case 37:It.next=42;break;case 39:Re.detectArea=[0,0,at,0,at,ut,0,ut],ce&&(wt=Ce,gt=Re.oriBlob),te&&(Re.resImage=Ce,Re.resBlob=Re.oriBlob);case 42:if(!ce){It.next=50;break}return It.next=45,yt(Y,wt,gt);case 45:Ht=(Wt=It.sent).filterBlob,Re.filterValue=Wt.filterValue,Re.filterBlob=Ht;case 50:return wt=null,gt=null,It.abrupt("return",Re);case 53:case"end":return It.stop()}},Ye)}))).apply(this,arguments)}function St(Ye){return Fe("blobToImageData createObjectURL"),Dt(Ye,void 0,void 0,void 0,{quality:85,returnType:V.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(Ce){return Ce.result})}function _r(Ye){return Fe("blobToImageData createObjectURL"),Dt(Ye,void 0,void 0,void 0,{quality:85,returnType:V.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(Y){return Ye.imageData=Y.src,Y.result})}function Gt(Ye,Ce){return Fe("blobToImageData createObjectURL"),Dt(Ye,Ce,void 0,void 0,{quality:85,returnType:V.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(te){return Ye.imageData=te.src,te.result})}function Gr(Ye,Ce){return Dt(Ye,Ce,void 0,void 0,!1,void 0).then(function(Y){return Y.preview})}function $s(Ye,Ce){return Dt(Ye,Ce,void 0,void 0,{quality:85,returnType:V.Enum_ImageType.IT_BGRA,returnBlob:!1},void 0).then(function(te){return Ye.imageData=te.src,te.preview})}function se(Ye,Ce,Y){return N.apply(this,arguments)}function N(){return(N=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e,Ie,He;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(ce=document.querySelector(".dcs-btn-multipleImg")){We.next=4;break}return Mt.log("cannot find the div .dcs-btn-multipleImg"),We.abrupt("return");case 4:if(ce.querySelector(".imgCount").innerText=String(Y.length),_e=Y[Y.length-1],Fe("handleMultipleImg createObjectURL"),!_e.preview){We.next=11;break}We.next=18;break;case 11:return We.next=13,St(_e.oriBlob);case 13:return Ie=We.sent,We.next=16,it(Ce,null,Ie,!1,!1);case 16:_e.preview=We.sent.preview;case 18:return We.next=20,new h.a(function(Je,Xe){var st=ce.querySelector(".previewImg"),nt=st.src;st.src=Vt.createURL(_e.preview),st.onload=function(){st.onload=null,nt&&Vt.revokeObjectURL(nt),Je(!0)},st.onerror=function(at){Xe(at)}});case 20:He=document.querySelector(".dcs-btn-continuousMode"),ce.classList.remove("hidden"),null==He||He.classList.add("dcs-selected");case 23:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}function b(Ye,Ce,Y){return D.apply(this,arguments)}function D(){return(D=s()(l.a.mark(function Ye(Ce,Y,te){var ce,_e,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt,wt;return l.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(ce=Ce.imageWidth,_e=Ce.imageHeight,We=(He=void 0===(Re=(te.config.scannerViewer||{}).autoDetect)?{}:Re).acceptedPolygonConfidence,Je=void 0===We?80:We,st=void 0===(Xe=He.acceptedBlurryScore)?80:Xe,te.areaDetectFn){gt.next=6;break}return re({message:"The detect function is not bind.",code:-4290}),gt.abrupt("return",{cornerPoints:[],detectedArea:!1});case 6:return gt.next=8,te.areaDetectFn(Ce,Je,st,void 0,void 0,Y);case 8:return Ce.imageData=(nt=gt.sent).src,ut=void 0===(at=nt.confidence)?[0]:at,vt=void 0===(ct=nt.blurryScore)?0:ct,wt=nt.cornerPoints,x.emit("documentDetected",nt),ut[0]<Je/100||vt<st||Rt()(wt).call(wt,function(Wt){return 0===Wt})?(nt.detectedArea=!1,nt.cornerPoints=[0,0,ce,0,ce,_e,0,_e]):nt.detectedArea=!0,gt.abrupt("return",nt);case 14:case"end":return gt.stop()}},Ye)}))).apply(this,arguments)}function O(Ye,Ce,Y,te,ce){return W.apply(this,arguments)}function W(){return(W=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e){var Ie,Re,He;return l.a.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if("original"!==_e){Je.next=2;break}return Je.abrupt("return",Y);case 2:if(Ie=Pt()(te).call(te,function(Xe){return Xe.label===_e}),Re=Pt()(ce).call(ce,function(Xe){return Xe.value===_e}),Ie&&Ie.handler&&Re){Je.next=6;break}return Je.abrupt("return",Y);case 6:return Je.next=8,St(Y);case 8:return He=Je.sent,Je.next=11,Ie.handler(He,Re.option);case 11:return Je.abrupt("return",Je.sent.result);case 13:case"end":return Je.stop()}},Ye)}))).apply(this,arguments)}function z(Ye,Ce,Y,te,ce){return ve.apply(this,arguments)}function ve(){return(ve=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e){var Ie,Re,He;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if("original"!==_e){We.next=2;break}return We.abrupt("return",Y);case 2:if(Ie=Pt()(te).call(te,function(Je){return Je.label===_e}),Re=Pt()(ce).call(ce,function(Je){return Je.value===_e}),Ie&&Ie.handler&&Re){We.next=6;break}return We.abrupt("return",Y);case 6:return We.next=8,Ie.handler(Ce,Re.option);case 8:return Ce.imageData=(He=We.sent).src,We.abrupt("return",He.result);case 11:case"end":return We.stop()}},Ye)}))).apply(this,arguments)}function xe(Ye){var Ce=Ye||{},Y=Ce.iconCss,te=Ce.visibility,ce={};return Y&&(ce.icon=Y),!1===te&&(ce.visibility=!1),ce}function Me(Ye,Ce,Y,te){return J.apply(this,arguments)}function J(){return(J=s()(l.a.mark(function Ye(Ce,Y,te,ce){var _e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!te){Ie.next=8;break}return _e=Qe()(ce,qe),Ie.next=4,h.a.resolve(te([{iImageData:Y,file:I()({},_e)}]));case 4:!1!==Ie.sent&&Ce.redirectToHome(),Ie.next=9;break;case 8:Ce.redirectToHome();case 9:case"end":return Ie.stop()}},Ye)}))).apply(this,arguments)}function Ke(Ye,Ce){return et.apply(this,arguments)}function et(){return(et=s()(l.a.mark(function Ye(Ce,Y){var te,ce,_e,Ie,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt;return l.a.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(te=Ce.getCurrentPage(),_e=(ce=te.options).continuous,Ie=ce.file,0!=Y.length){wt.next=4;break}return wt.abrupt("return");case 4:if(_e||1!=Y.length){wt.next=13;break}return Re=Y[0],wt.next=8,St(Re);case 8:return He=wt.sent,wt.next=11,rt(Ce,He,!1,null,Re);case 11:wt.next=24;break;case 13:if(Ie.blobList=Ie.blobList||[],ce.continuous=!0,Xe=void 0===(Je=(We=Ce.config.scannerViewer||{}).maxDocuments)?20:Je,at=!0,(Ie.blobList.length+Y.length>(nt=void 0===(st=We.maxImagesInBuffer)?Xe:st)||Ie.blobList.length+Y.length>Xe)&&(x.emit("video-error",jt.MAX_DOCUMENT_LIMIT),at=!1),ut=[],at)ut=G()(Y).call(Y,function(gt){return new yi({oriBlob:gt})});else for(ct=0;ct<nt-Ie.blobList.length;ct++)ut.push(new yi({oriBlob:Y[ct]}));if(!(ut.length>0)){wt.next=24;break}return(vt=Ie.blobList).push.apply(vt,ut),wt.next=24,se(Ce,Ie.blobList,!0);case 24:case"end":return wt.stop()}},Ye)}))).apply(this,arguments)}function rt(Ye,Ce,Y,te,ce){return ot.apply(this,arguments)}function ot(){return(ot=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e){var Ie,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt,wt,gt,Wt,zt,Ht,It,nr,Yn,In,Kn,oo,pu,JT,t_,XT,r_,n_,i_,o_,$T;return l.a.wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(Ie=Ce.getCurrentPage(),He=(Re=Ie.options).continuous,We=Re.onSave,Je=Ae(Ce,"config.cropViewer"),Xe=Je.rotateLeft,st=Je.rotateRight,at=void 0===(nt=Je.autoDetectBorder)?{}:nt,ut=Je.apply,vt=void 0===(ct=Je.visibility)||ct,wt=Y,gt=Re.file,Ht=void 0===(zt=(void 0===(Wt=Ce.config)?{}:Wt).filterViewer)?{}:zt,He){mn.next=50;break}if(Mt.log("not continuous mode."),!vt){mn.next=25;break}return Mt.log("get BlobItem no filter+noPerspective+no preview"),mn.next=13,Cr(wt,Ce,!1,!1,!1,_e);case 13:return nr=(It=mn.sent).detectArea,Yn=It.oriBlob,te&&Ce.setImageDataBack(wt.imageData),gt.bAdd=!0,gt.oriBlob=Yn,gt.detectArea=nr,gt.angle=0,Mt.log("show edit page"),In="dcs-font dcs-i-next",Ht.visibility||(In="dcs-font dcs-i-save"),Ce.showEditPage({blob:Yn,detectArea:nr,angle:0,continuous:He,onSave:We,footerButtons:{rotateLeft:xe(Xe),rotateRight:xe(st),toggleFullArea:xe(at),save:I()({icon:In},xe(ut))},file:gt}),mn.abrupt("return");case 25:return Mt.log("get BlobItem filter+Perspective+no preview"),mn.next=28,Cr(wt,Ce,!0,!0,!1,_e);case 28:if(Kn=mn.sent,te&&(Ce.setImageDataBack(wt.imageData),delete wt.imageData),oo=Kn.filterBlob,pu=Kn.resBlob,JT=Kn.detectArea,t_=Kn.oriBlob,(XT=Kn.resImage)&&delete Kn.resImage,t_&&delete Kn.oriBlob,oo&&delete Kn.filterBlob,pu&&delete Kn.resBlob,gt.bAdd=!0,gt.oriBlob=t_,gt.detectArea=JT,gt.angle=0,!1!==Ht.visibility){mn.next=46;break}return mn.next=43,Me(Ce,oo||pu,Re.onSave,gt);case 43:return Ce.captureLoop&&Ce.captureLoop.setIsLooping(!1),Ce.emit("focusPage"),mn.abrupt("return");case 46:Mt.log("show filter page"),Ce.showFilterPage({angle:0,blob:oo||pu,iImageData:XT,file:gt,onSave:Re.onSave}),mn.next=66;break;case 50:if(gt.blobList=gt.blobList||[],Mt.log("continuous mode."),Re.continuous=!0,i_=void 0===(n_=(r_=Ce.config.scannerViewer||{}).maxDocuments)?20:n_,!(gt.blobList.length+1>(void 0===(o_=r_.maxImagesInBuffer)?i_:o_)||gt.blobList.length+1>i_)){mn.next=59;break}return Mt.log("maxImagesInBuffer."),x.emit("video-error",jt.MAX_DOCUMENT_LIMIT),(Ce.config.scannerViewer.autoScan.enableAutoScan||Ce.config.scannerViewer.autoDetect.enableAutoDetect)&&($T=Ce.captureLoop.getLoopType(),Ce.captureLoop.stopCaptureLoop(),Ce.captureLoop.changeStyle(),Ce.captureLoop._setLoopType($T),Ce.captureLoop.setDisable()),mn.abrupt("return");case 59:return mn.next=61,it(Ce,ce,wt,te,!0);case 61:return gt.blobList.push(mn.sent),Mt.log("start multiple image viewer."),mn.next=66,se(Ce,gt.blobList,!1);case 66:case"end":return mn.stop()}},Ye)}))).apply(this,arguments)}function it(Ye,Ce,Y,te,ce){return pt.apply(this,arguments)}function pt(){return(pt=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e){var Ie,Re,He,We,Je,Xe;return l.a.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(Mt.log("package to BlobItem"),Ce.config.scannerViewer.enableBorderDetection){st.next=5;break}Ie={},st.next=12;break;case 5:if(!Y){st.next=9;break}Ie=Y,st.next=12;break;case 9:return st.next=11,b(te,!0,Ce);case 11:Ie=st.sent;case 12:return Re=Ie.cornerPoints,He=Ae(Ce,"config.scannerViewer"),Je=void 0===(We=He.polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:We,Mt.log("get detected preview"),st.next=18,Et(te,Re,Je,_e);case 18:return Xe=st.sent,Mt.log("get detected preview ok"),ce&&(Ce.setImageDataBack(te.imageData),delete te.imageData),st.abrupt("return",new yi({oriBlob:Xe.result,preview:Xe.preview,detectArea:Re}));case 22:case"end":return st.stop()}},Ye)}))).apply(this,arguments)}function ft(Ye){var Ce,Y={value:Number.MAX_VALUE,idx:-1},te={value:Number.MAX_VALUE,idx:-1};if(!Ye)return[];for(var ce=0;ce<Ye.length;ce+=2){var _e=Ye[ce];_e<=Y.value?(te=Y,Y={value:_e,idx:ce}):_e<=te.value&&(te={value:_e,idx:ce})}var Ie=Ye[Y.idx+1]<Ye[te.idx+1]?Y.idx:te.idx;return _()(Ce=X()(Ye).call(Ye,Ie)).call(Ce,X()(Ye).call(Ye,0,Ie))}function mt(Ye,Ce,Y){return G()(Ye).call(Ye,function(te,ce){if(ce%2==0){var _e=te;return _e=Math.max(0,_e),Math.min(_e,Ce)}var Ie=te;return Ie=Math.max(0,Ie),Math.min(Ie,Y)})}function Et(Ye,Ce,Y,te){var ce,_e,Ie="fe8e14";return Y&&H(Y.stroke)&&0==oe()(_e=Y.stroke).call(_e,"#")&&(Ie=Y.stroke.substr(1)),Ce&&(ce={points:ft(Ce),lineWidth:5,strokeColor:Ie}),Dt(Ye,void 0,ce,!1,te,!0).then(function(Re){return Ye.imageData=Re.src,Re})}function Dt(Ye,Ce,Y,te,ce,_e){var Ie=void 0,Re={polygon:Ie,doPerspective:Ie,source:{angle:Ie},output:{orgImage:Ie,previewImage:Ie}};return q(Ye,Re.source),Re.source.angle=Ce,Y&&(Re.polygon=Y),te&&Y&&Y.points&&(Re.doPerspective=!0),!1!==ce&&(Re.output.orgImage=ce instanceof Object?ce:{quality:85,returnType:V.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==_e&&(Re.output.previewImage=_e instanceof Object?_e:{quality:85,width:200,height:200,returnType:V.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),V.ImageProcWrapper.createImage(Re)}function Lt(Ye){var Ce=Ye%360;return Ce<0&&(Ce+=360),Ce}function kt(Ye){var Ce=document.querySelectorAll(".preFilter");if(Ce)for(var Y=0;Y<Ce.length;Y++){var te=Ce[Y];te&&"IMG"==te.tagName&&te.src&&(Vt.revokeObjectURL(te.src),te.onload=null,te.parentNode.remove())}var ce=document.querySelector(".filterDropDown");ce&&(Ye.removeGlobalClickEvent(ce),ce.remove())}var Mt={log:function(Ye,Ce,Y,te){}},Vt={windowURL:dt.a||window.webkitURL,createURL:function(Ye){return H(Ye)?Ye:function(Ce){if(H(Ce)||void 0===Ce)return{type:"string",data:Ce};if(Ce instanceof Blob)return{type:"object",data:Vt.createObjectURL(Ce)};if(Ce.imageData&&Ce.imageData instanceof Blob)return{type:"object",data:Vt.createObjectURL(Ce.imageData)};if(Ce.imageData){var Y=Object.prototype.toString.call(Ce.imageData);if(/\[object \w+Array\]/.test(Y))return{type:"object",data:Vt.createObjectURL(new Blob([Ce.imageData]))}}else{var te=Object.prototype.toString.call(Ce);if(/\[object \w+Array\]/.test(te))return{type:"object",data:Vt.createObjectURL(new Blob([Ce]))}}return/data:image\/\w+;base64/.test(Ce)?{type:"string",data:Ce}:(Mt.log("createURLWithType object:"+Ce),{type:"object",data:Ce})}(Ye).data},createObjectURL:function(Ye){if(!Ye)return"";var Ce=Vt.windowURL.createObjectURL(Ye);return Fe("createObjectURL:"+Ce),Ce},revokeObjectURL:function(Ye){Fe("revokeObjectURL:"+Ye),Vt.windowURL.revokeObjectURL(Ye)}},Kt=function(){function Ye(Y,te){this.element=null,this.closeButton=null,this.headerButtons=[],this.footerButtons=[],this.className="",this.pageName="",this.container=null,this.template="",this.lastPage=null,this.nextPage=null,this.isDestroyed=!1,this._dcs=null,this._pagepubsub=new R,this.options=Y,this._dcs=te,te.config=te.config||{},te.config.scannerViewer=te.config.scannerViewer||{},te.config.scannerViewer.autoDetect=te.config.scannerViewer.autoDetect||{enableAutoDetect:!1},te.config.scannerViewer.autoScan=te.config.scannerViewer.autoScan||{enableAutoScan:!1},null==te.config.scannerViewer.autoDetect.enableAutoDetect&&(te.config.scannerViewer.autoDetect.enableAutoDetect=!1),null==te.config.scannerViewer.autoScan.enableAutoScan&&(te.config.scannerViewer.autoScan.enableAutoScan=!1)}var Ce=Ye.prototype;return Ce.createEl=function(Y){if(Y.customEl)this.element=Y.customEl;else{var te={dcs:this._dcs,page:this};if(this.headerButtons=vr(Y.headerButtons,te),this.footerButtons=vr(Y.footerButtons,te),!Y.customEl){var ce=this.template,_e=document.createElement("div");_e.innerHTML=ce,_e.className=this.className,this.element=_e;var Ie=this.element,Re=this.headerButtons,He=this.footerButtons,We=Ie.querySelector("header");this.insertButtons(We,Re);var Je=Ie.querySelector("footer");this.insertButtons(Je,He)}}},Ce.insertButtons=function(Y,te){var ce,_e;Y.appendChild((ce=te,_e=document.createDocumentFragment(),A()(ce).call(ce,function(Ie){_e.appendChild(Ie.element)}),_e))},Ce.destroy=function(){Ar(this.headerButtons),Ar(this.footerButtons),this.headerButtons=[],this.footerButtons=[],this.element&&(this.element.remove(),this.element=null),this.isDestroyed=!0,"homePage"==this.pageName&&(kt(this._dcs),x.emit("video-closed"))},Ce.updateButton=function(Y,te){for(var ce,_e=_()(ce=[]).call(ce,this.headerButtons,this.footerButtons),Ie=0;Ie<_e.length;Ie++){var Re=_e[Ie];if(Re.name===Y)return q(te,Re.options),void Re.update()}},Ce.on=function(Y,te){this._pagepubsub.on(Y,te)},Ce.once=function(Y,te){this._pagepubsub.once(Y,te)},Ce.off=function(Y,te){this._pagepubsub.off(Y,te)},Ce.emit=function(Y){for(var te,ce,_e=arguments.length,Ie=new Array(_e>1?_e-1:0),Re=1;Re<_e;Re++)Ie[Re-1]=arguments[Re];(te=this._pagepubsub).emit.apply(te,_()(ce=[Y]).call(ce,Ie))},Ce.emitEx=function(Y){for(var te,ce,_e=arguments.length,Ie=new Array(_e>1?_e-1:0),Re=1;Re<_e;Re++)Ie[Re-1]=arguments[Re];return(te=this._pagepubsub).emitEx.apply(te,_()(ce=[Y]).call(ce,Ie))},Ye}();function vr(Ye,Ce){var Y=[];for(var te in Ye)Ye[te]&&Y.push(new Ee(I()({},Ye[te],{name:te}),Ce));return Y}function Ar(Ye){A()(Ye).call(Ye,function(Ce,Y){Ce.destroy(),Ye[Y]=null})}var Yr=n(35),en=n.n(Yr),Br=n(183),ri=(en()(Br.a,{insert:"head",singleton:!1}),function(Ye){function Ce(te,ce){var _e;if((_e=Ye.call(this,te,ce)||this).cropMng=null,_e._resizeMng=null,_e._oldDetectAreaInfo={area:[],w:0,h:0,angle:0},_e._firstRender=!0,_e.pageName="edit",_e._angle=Lt(_e.options.angle),_e._initElement(te),te.isFilterPage&&(_e.options.file.filterValue=Zt(ce)),!_e.cropMng)return F()(_e);var Ie=ce.config.cropViewer,Re=(void 0===Ie?{}:Ie).polygonStyle;return Re&&_e.cropMng.setCropStyle({lineColor:Re.stroke,lineWidth:L()(Re.strokeWidth,10),cornerColor:Re.stroke,lineDash:Re.dash}),_e}w()(Ce,Ye);var Y=Ce.prototype;return Y.getOriBlob=function(){return this.options.file.oriBlob},Y._initElement=function(te){var ce;this.template='\n        <header class="headerButtons"></header>\n        <div class="resultContainer">\n            <div class="dcs-cvsContainer">\n                <img class="cameraEditImage">\n                </div>\n            '+(te.detectArea?"<canvas class='dcs-detectCvs'></canvas>":"")+'\n        </div>\n        <footer class="footerButtons"></footer>\n        ',this.className="cameraEditPage",this.createEl(te),te.customEl||(this._listenResize(),this._initCanvas(),te.detectArea&&(this.detectArea=_()(ce=[]).call(ce,te.detectArea)),te.isFilterPage||this._initCropManage())},Y._initCanvas=function(){var te=this.element,ce=te.querySelector(".dcs-cvsContainer");this.imageElContainer=ce,this.imageEl=ce.children[0],this.detectCvsEl=te.querySelector(".dcs-detectCvs")},Y._listenResize=function(){var te=this;this._resizeMng=new ge(this.element,function(){Z()(function(){te._updateImgCvs(),te.renderForRotate(0)},0)})},Y.rotateLeft=function(){this._rotate(-90)},Y.rotateRight=function(){this._rotate(90)},Y._rotate=function(te){this._angle+=te,this.renderForRotate(te)},Y.getAngle=function(){return j(this._angle)?Lt(this._angle):(this._angle=0,0)},Y.renderImage=function(){this._drawImage();var te=document.querySelectorAll(".preFilter");if(te)for(var ce=0;ce<te.length;ce++){var _e=te[ce];_e&&"IMG"==_e.tagName&&_e.src&&(_e.style.transform="rotate("+this._angle+"deg)")}},Y.render=function(){this._firstRender?this.updateImage(this.options.blob):(this.renderImage(),this._drawDetectArea())},Y.renderForRotate=function(te){this.renderImage(),this._drawDetectAreaForRotate(te)},Y.destroy=function(){var te,ce,_e,Ie;kt(this._dcs),Ye.prototype.destroy.call(this),this._resizeMng.dispose(),this._resizeMng=null,null==(te=this.cropMng)||te.dispose(),null==(ce=this.detectCvsEl)||ce.remove(),this.cropMng=null,this.detectCvsEl=null,null!=(_e=this.imageEl)&&_e.src&&Vt.revokeObjectURL(this.imageEl.src),null==(Ie=this.imageEl)||Ie.removeEventListener("load",null),this.imageElContainer=null,this.imageEl=null;var Re=this.options;if(Re){var He=Re.file;He&&(delete He.resBlob,delete He.blob,delete He.preview),delete Re.blob,delete Re.iImageData}this.options=null},Y.updateImage=function(te){var ce;if(te){var _e=Vt.createURL(te),Ie=this.imageEl,Re=Ie;if(Re.setAttribute("crossOrigin","anonymous"),Re.src!==_e){Ie&&Ie.src&&oe()(ce=Ie.src).call(ce,"blob")>-1&&Vt.revokeObjectURL(Ie.src),Re.src=_e;var He=this;Re.onload=function(){He._firstRender=!1,Re.onload=null,He.render()}}}},Y._updateImgCvs=function(){var te=this.detectCvsEl;if(te){var ce=te.getBoundingClientRect(),Ie=ce.height;te.width=ce.width,te.height=Ie}},Y._calImageArea=function(){var te=this.imageEl,ce=this.imageElContainer.getBoundingClientRect(),Re=function(He,We,Je,Xe,st){var nt,at;st%180==0?(nt=Je,at=Xe):(nt=Xe,at=Je);var ut=Math.min(nt/He,at/We),ct=B()(ut*He),vt=B()(ut*We),wt=Math.floor((nt-ct)/2),gt=Math.floor((at-vt)/2),Wt=st%180==0;return{left:wt,top:gt,width:ct,height:vt,relLeft:Wt?wt:gt,relTop:Wt?gt:wt,relWidth:Wt?ct:vt,relHeight:Wt?vt:ct}}(te.naturalWidth,te.naturalHeight,ce.width,ce.height,this.getAngle());return this._imageArea=Re,Re},Y._drawImage=function(){var te=this.imageEl;if(te){var ce=this._calImageArea();te.width=ce.width,te.height=ce.height,te.style.position="absolute",this.getAngle()%180!=0&&(ce.relLeft+=ce.height/2-ce.width/2,ce.relTop+=ce.width/2-ce.height/2),te.style.left=ce.relLeft+"px",te.style.top=ce.relTop+"px";var _e=this.getAngle();te.style.transform="rotate("+_e+"deg)"}},Y._initCropManage=function(){if(!this.cropMng){var te=this.detectCvsEl;te&&(this.cropMng=new ze(te),this.cropMng.setCropMode(!0))}},Y._drawDetectArea=function(){if(this._setDetectCanvasSize(),this.cropMng&&(this.cropMng.resize(this._imageArea),this.detectArea)){var te,ce=this.cropMng._zoom,_e=On(X()(te=this.detectArea).call(te),this._angle,B()(this._imageArea.relWidth*ce),B()(this._imageArea.relHeight*ce));this.cropMng.setCropArea(_e,this._imageArea)}},Y._drawDetectAreaForRotate=function(te){var ce;if(this.cropMng&&(ce=this.cropMng.getCropArea()),this._setDetectCanvasSize(),this.cropMng){this.cropMng.resize(this._imageArea);var _e=this.cropMng._zoom,Ie=On(ce,te,B()(this._imageArea.relWidth*_e),B()(this._imageArea.relHeight*_e));this.cropMng.setCropArea(Ie,this._imageArea)}},Y._setDetectCanvasSize=function(){var te=this.imageEl;if(te){var _e=this._calImageArea().relWidth,Ie=te.naturalWidth,Re=te.naturalHeight,He=this._angle%180==0,We=this.imageElContainer.parentElement.getBoundingClientRect();this._updateDetectCvsSize(0,0,We.width,We.height);var st=(He?Ie:Re)/_e;st<=0&&(st=1),this.cropMng&&this.cropMng.setZoom(st)}},Y._updateDetectCvsSize=function(te,ce,_e,Ie){var Re=this.detectCvsEl;Re&&(Re.width=_e,Re.height=Ie,Re.style.cssText="left:"+te+"px;top:"+ce+"px;width:"+_e+"px;height:"+Ie+"px")},Y.getCropManage=function(){return this.cropMng},Y.getDetectAreaForNotRotate=function(){if(!this.cropMng)return null;var te=this.cropMng.getCropArea();te=ft(te);var ce=this.cropMng._zoom;return ft(te=function(_e,Ie,Re,He){for(var We=[],Je=Lt(Ie),Xe=0;Xe<_e.length;Xe+=2){var st=void 0,nt=void 0,at=_e[Xe],ut=_e[Xe+1];90==Je?(st=ut,nt=Re-at):180==Je?(st=Re-at,nt=He-ut):270==Je?(st=He-ut,nt=at):(st=at,nt=ut),We.push(st,nt)}return We}(te,this.getAngle(),B()(this._imageArea.relWidth*ce),B()(this._imageArea.relHeight*ce)))},Y.isAreaFulfilled=function(te){var ce=this.cropMng;if(!ce)return!1;var _e=this._calImageArea(),Ie=_e.relWidth,Re=_e.relHeight,He=ce._zoom;return le(te,B()(Ie*He),B()(Re*He))},Y.toggleFullAreaButton=function(){var te=this.cropMng;if(!te)return!1;var ce=this._calImageArea(),_e=te.getCropArea();_e=ft(_e);var Ie,Re=this.getAngle(),He=Re,We=te._zoom,Je=B()(ce.relWidth*We),Xe=B()(ce.relHeight*We),st=le(_e,Je,Xe);return st?0===this._oldDetectAreaInfo.area.length?(this._oldDetectAreaInfo={area:[0,0,Je-2,0,Je-2,Xe-2,0,Xe-2],angle:Re,w:Je,h:Xe},Ie=this._oldDetectAreaInfo.area):(Ie=this._oldDetectAreaInfo.area,He=this._oldDetectAreaInfo.angle):(this._oldDetectAreaInfo={area:_e,angle:Re,w:Je,h:Xe},Ie=[0,0,Je,0,Je,Xe,0,Xe]),te.setCropArea(X()(Ie).call(Ie),ce),He!=Re&&(Mt.log("must rotate: "+(Re-He)),this.renderForRotate(Re-He)),this.options.file.isFull=!st,st},Ce}(Kt));function On(Ye,Ce,Y,te){for(var ce=[],_e=Lt(Ce),Ie=0;Ie<Ye.length;Ie+=2){var Re=void 0,He=void 0,We=Ye[Ie],Je=Ye[Ie+1];90==_e?(Re=Y-Je,He=We):180==_e?(Re=Y-We,He=te-Je):270==_e?(Re=Je,He=te-We):(Re=We,He=Je),ce.push(Re,He)}return ce}var tn=n(184),Dr=(en()(tn.a,{insert:"head",singleton:!1}),function(Ye){function Ce(te,ce){var _e;return(_e=Ye.call(this,te,ce)||this)._initElement(te),_e.pageName=te.pageName?te.pageName:"homePage",_e.attachDefaultEvent(te),_e}w()(Ce,Ye);var Y=Ce.prototype;return Y.attachDefaultEvent=function(te){this.on("onSaveCapture",function(ce,_e,Ie,Re,He){return rt(_e.dcs,Ie,Re,He)})},Y._initElement=function(te){this.template='\n        <header></header>\n        <div class="videoContainer"></div>\n        <footer class="buttonList">\n            '+(te.title?'<div class="modeTitle">'+te.title+"</div>":"")+"\n        </footer>\n        ",this.className="cameraHomePage",this.createEl(te)},Ce}(Kt)),rn=n(185),xr=(en()(rn.a,{insert:"head",singleton:!1}),function(Ye){function Ce(Y,te){var ce;return(ce=Ye.call(this,Y,te)||this).pageName="insert",ce}return w()(Ce,Ye),Ce.prototype.attachDefaultEvent=function(Y){Y.onSaveCapture&&this.on("onSaveCapture",Y.onSaveCapture)},Ce}(Dr)),Kr=n(186),ni=(en()(Kr.a,{insert:"head",singleton:!1}),document.createElement("div"));ni.className="loadingio-spinner-spin-rvygg48s7pr",ni.innerHTML='<div class="ldio-5z8jmalqic5">\n<div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div>\n</div>';var ii=ni,Gl=n(269),So=n.n(Gl),gd=(n(492),n(494),n(502),n(504),n(505),n(506),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(530),n(531),n(532),n(533),n(270)),md=n.n(gd),Ym=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],Km={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},Hl=n(271),Jm=n.n(Hl),zl=n(272),du=n.n(zl),_d=n(273),Xm=n.n(_d),Zm=n(274),hu=n.n(Zm),vd=n(275),ys=n.n(vd);function io(Ye,Ce){var Y,te=void 0!==du.a&&Xm()(Ye)||Ye["@@iterator"];if(te)return ie()(Y=(te=te.call(Ye)).next).call(Y,te);if(Te()(Ye)||(te=function(_e,Ie){var Re;if(_e){if("string"==typeof _e)return Fi(_e,void 0);var He=X()(Re=Object.prototype.toString.call(_e)).call(Re,8,-1);return"Object"===He&&_e.constructor&&(He=_e.constructor.name),"Map"===He||"Set"===He?Jm()(_e):"Arguments"===He||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He)?Fi(_e,void 0):void 0}}(Ye))||Ce&&Ye&&"number"==typeof Ye.length){te&&(Ye=te);var ce=0;return function(){return ce>=Ye.length?{done:!0}:{done:!1,value:Ye[ce++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fi(Ye,Ce){(null==Ce||Ce>Ye.length)&&(Ce=Ye.length);for(var Y=0,te=new Array(Ce);Y<Ce;Y++)te[Y]=Ye[Y];return te}function Ql(){var Ye;void 0===navigator.mediaDevices&&(hu()(Ye=location.origin).call(Ye,"https://")?re(jt.MEDIADEVICES_NOT_IMPL):re(jt.HTTPS_REQUIRED)),void 0===navigator.mediaDevices.getUserMedia&&re(jt.GETUSERMEDIA_NOT_IMPL)}function $m(){return yd.apply(this,arguments)}function yd(){return(yd=s()(l.a.mark(function Ye(){var Ce,Y,te,ce,_e,Ie,Re,He,We;return l.a.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=3,navigator.mediaDevices.enumerateDevices();case 3:Ce=Je.sent,Y=[],te=0,ce=0;case 7:if(!(ce<Ce.length)){Je.next=24;break}if("videoinput"===(_e=Ce[ce]).kind){Je.next=11;break}return Je.abrupt("continue",21);case 11:Ie=!1,Re=io(Y);case 13:if((He=Re()).done){Je.next=20;break}if(He.value.deviceId!==_e.deviceId){Je.next=18;break}return Ie=!0,Je.abrupt("break",20);case 18:Je.next=13;break;case 20:Ie||((We={}).deviceId=_e.deviceId,We.label=!_e.label||/^camera\s[0-9]+$/.test(_e.label)?"camera "+te++:_e.label,Y.push(We));case 21:ce++,Je.next=7;break;case 24:return Je.abrupt("return",Y);case 25:case"end":return Je.stop()}},Ye)}))).apply(this,arguments)}function bs(Ye,Ce,Y,te,ce,_e,Ie,Re){void 0===Re&&(Re=!1);var He,We,Je=JSON.parse(ys()({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:Re?"user":"environment"}}})),Xe="exact"===te&&!ce;if(Ce&&(Je.video.width=((He={})[Xe?"exact":"ideal"]=Ce,He)),Y&&(Je.video.height=((We={})[Xe?"exact":"ideal"]=Y,We)),_e&&_e.bMobile&&_e.bSafari&&ce){var st,nt=Math.max(Ce||1280,Y||720);Je.video.width=((st={})[Xe?"exact":"ideal"]=nt,st),delete Je.video.height}if(Ye)delete Je.video.facingMode,Je.video.deviceId={exact:Ye};else if(Ie&&!Re){for(var at,ut=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"],ct=function(){var gt=at.value,Wt=gt.label.toLowerCase();if(Wt&&tt()(ut).call(ut,function(zt){return-1!=oe()(Wt).call(Wt,zt)})&&/\b0(\b)?/.test(Wt))return delete Je.video.facingMode,Je.video.deviceId={ideal:gt.deviceId},"break"},vt=io(Ie);!(at=vt()).done&&"break"!==ct(););!Je.video.deviceId&&_e.bAndroid&&_e.bHarmonyOS&&(delete Je.video.facingMode,Je.video.deviceId={ideal:Ie[Ie.length-1].deviceId})}if(Je.video.facingMode){var wt=Je.video.facingMode;wt instanceof Array&&wt.length&&(wt=wt[0]),"environment"===(wt=wt.exact||wt.ideal||wt)&&(Je.bFmEnvironment=!!Je.video.facingMode)}return Je}function BT(Ye,Ce,Y,te,ce,_e){return VT.apply(this,arguments)}function VT(){return(VT=s()(l.a.mark(function Ye(Ce,Y,te,ce,_e,Ie){var Re,He,We,Je,Xe,st,nt,at,ut;return l.a.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return Re={},He=null,We=null,ct.prev=3,Je=bs(Ce,Y,te,ce,!1,_e,Ie),ct.next=7,qm(Je,!1,_e,Ie);case 7:if(He=ct.sent){ct.next=10;break}return ct.abrupt("return",Re);case 10:if(document&&document.createElement?We=document.createElement("video"):re(jt.VIDEO_ELEMENT_REQUIRED),Xe="exact"===ce,!_e.bFirefox&&Xe){ct.next=16;break}return We.srcObject=He,ct.next=16,We.play();case 16:Re.type=ce,Xe?(st=He.getVideoTracks()[0],(nt=st.getConstraints())&&nt.width?(Re.height=nt.height.exact||nt.height,Re.width=nt.width.exact||nt.width):(at=st.getSettings(),Re.height=at.height.exact||at.height,Re.width=at.width.exact||at.width)):(Re.height=We.videoHeight,Re.width=We.videoWidth),ct.next=23;break;case 20:ct.prev=20,ct.t0=ct.catch(3),this._fireLog("_getResolution exception:"+(ct.t0.message||ct.t0));case 23:if(!He){ct.next=29;break}return _e.bFirefox&&(We.srcObject=null),ct.next=27,A()(ut=He.getTracks()).call(ut,function(vt){vt.stop()});case 27:He=null,We=null;case 29:return ct.abrupt("return",Re);case 30:case"end":return ct.stop()}},Ye,this,[[3,20]])}))).apply(this,arguments)}function qm(Ye,Ce,Y,te){return WT.apply(this,arguments)}function WT(){return(WT=s()(l.a.mark(function Ye(Ce,Y,te,ce){return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return"boolean"==typeof Ce.video&&(Ce.video={}),_e.prev=1,_e.next=4,navigator.mediaDevices.getUserMedia(Ce);case 4:return _e.abrupt("return",_e.sent);case 7:if(_e.prev=7,_e.t0=_e.catch(1),!_e.t0.name||"OverconstrainedError"!==_e.t0.name){_e.next=13;break}if(!Y){_e.next=12;break}throw _e.t0;case 12:return _e.abrupt("return",null);case 13:return te&&te.bMobile&&te.bSafari?(delete Ce.video.width,delete Ce.video.height):Ce.bFmEnvironment?(delete Ce.video.facingMode,ce&&ce.length&&(Ce.video.deviceId={ideal:ce[ce.length-1].deviceId})):Ce.video=!0,_e.abrupt("return",navigator.mediaDevices.getUserMedia(Ce));case 15:case"end":return _e.stop()}},Ye,null,[[1,7]])}))).apply(this,arguments)}function YU(Ye,Ce){for(var Y,te=Ye.width,ce=Ye.height,_e=io(Ce);!(Y=_e()).done;){var Ie=Y.value;if(Ie.height===ce&&Ie.width===te)return!0}return!1}function KU(Ye,Ce){for(var Y,te=Ye.width,ce=Ye.height,_e=io(Ce);!(Y=_e()).done;){var Ie=Y.value;if(Ie.height===ce&&Ie.width===te)return Ie.type}return"ideal"}var e_=function(){function Ye(Y,te,ce,_e){this.videoSettings=Km,this._browserInfo=null,this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._isFill=!1,this._isUser=!1,this._useWebgl=!0,this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.glCropImgData=null,this._cameraManager=null,this._browserInfo=V.navInfo,!this._browserInfo.bMobile&&this._browserInfo.bSafari?L()(this._browserInfo.strBrowserVersion)>=15&&(this._useWebgl=!1):this._browserInfo.bHuaWeiBrowser&&(this._useWebgl=!1),this._cameraInfo=Y||{deviceId:"",label:""},this._videoEle=te,this._allCameras=ce}var Y,Ce=Ye.prototype;return Ce.getFrame=function(){md()();var Y=this._videoEle.videoWidth,te=this._videoEle.videoHeight;this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new globalThis.OffscreenCanvas(Y,te):document.createElement("canvas"));var ce=this.videoGlCvs,_e=this._useWebgl,Ie=null;if(_e&&(Ie=this.videoGl||ce.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||ce.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})),Ie&&_e||(_e=!1,this.videoGlCvs=document.createElement("canvas"),ce=this.videoGlCvs),ce.width==Y&&ce.height==te||(ce.height=te,ce.width=Y,Ie&&Ie.viewport(0,0,Y,te)),_e){if(!this.videoGl){this.videoGl=Ie;var Re=Ie.createShader(Ie.VERTEX_SHADER);Ie.shaderSource(Re,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\ngl_Position = a_position;\nv_uv = a_uv;\n}\n"),Ie.compileShader(Re),Ie.getShaderParameter(Re,Ie.COMPILE_STATUS);var He=Ie.createShader(Ie.FRAGMENT_SHADER);Ie.shaderSource(He,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\nvec4 sample =  texture2D(u_texture, v_uv);\ngl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);\n}\n"),Ie.compileShader(He),Ie.getShaderParameter(He,Ie.COMPILE_STATUS);var We=Ie.createProgram();Ie.attachShader(We,Re),Ie.attachShader(We,He),Ie.linkProgram(We),Ie.getProgramParameter(We,Ie.LINK_STATUS),Ie.useProgram(We),Ie.bindBuffer(Ie.ARRAY_BUFFER,Ie.createBuffer()),Ie.bufferData(Ie.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),Ie.STATIC_DRAW);var Je=Ie.getAttribLocation(We,"a_position");Ie.enableVertexAttribArray(Je),Ie.vertexAttribPointer(Je,2,Ie.FLOAT,!1,16,0);var Xe=Ie.getAttribLocation(We,"a_uv");Ie.enableVertexAttribArray(Xe),Ie.vertexAttribPointer(Xe,2,Ie.FLOAT,!1,16,8),Ie.activeTexture(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_2D,Ie.createTexture()),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.NEAREST),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.NEAREST),Ie.uniform1i(Ie.getUniformLocation(We,"u_texture"),0)}return(!this.glImgData||this.glImgData.length<Y*te*4)&&(this.glImgData=new Uint8Array(Y*te*4)),Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,Ie.RGBA,Ie.UNSIGNED_BYTE,this._videoEle),Ie.drawArrays(Ie.TRIANGLE_STRIP,0,4),Ie.readPixels(0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight,Ie.RGBA,Ie.UNSIGNED_BYTE,this.glImgData),this.glImgData}var nt=ce.getContext("2d");return nt.drawImage(this._videoEle,0,0),0===ce.width||0===ce.height?null:((!this.glImgData||this.glImgData.length<ce.width*ce.height*4)&&(this.glImgData=new Uint8Array(ce.width*ce.height*4)),this.glImgData.set(nt.getImageData(0,0,ce.width,ce.height).data),this.glImgData)},Ce.capture=(Y=s()(l.a.mark(function te(ce){var Ie,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt,wt,gt,Wt,zt;return l.a.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(void 0===ce&&(ce=!1),Mt.log("capture"),Ie=this._videoEle.videoWidth,Re=this.getVideoSizeInfo(),He=Re.width,We=Re.height,Je=Re.offsetX,Xe=Re.offsetY,st=this.getFrame(),nt=!1,at=!1,this.videoGl?at=!0:nt=!0,ut={imageData:null,imageWidth:He,imageHeight:We,rgba:nt,bgra:at},this._isFill){for((!this.glCropImgData||this.glCropImgData.length<He*We*4)&&(this.glCropImgData=new Uint8Array(He*We*4)),ct=this.glCropImgData,vt=0,wt=Xe+We,gt=Xe;gt<wt;gt++)zt=vt*He*4,ct.set(st.subarray(Wt=4*(gt*Ie+Je),Wt+4*He),zt),vt++;ut.imageData=ct.buffer}else ut.imageData=st.buffer;if(ce){Ht.next=14;break}return Ht.next=13,_r(ut);case 13:return Ht.abrupt("return",Ht.sent);case 14:return Ht.abrupt("return",ut);case 15:case"end":return Ht.stop()}},te,this)})),function(te){return Y.apply(this,arguments)}),Ce.setImageDataBack=function(Y){Mt.log("setImageDataBack"),this._isFill?this.glCropImgData=new Uint8Array(Y):this.glImgData=new Uint8Array(Y)},Ce.getVideoSizeInfo=function(){var Y,te=this._videoEle;if("none"==(null==te||null==(Y=te.style)?void 0:Y.display))return{width:te.videoWidth,height:te.videoHeight,offsetX:0,offsetY:0};"playing"!==this.getStatus()&&re(jt.VIDEO_NOT_PLAY);var _e=te.getBoundingClientRect(),Ie=_e.width,Re=_e.height;0!==Ie&&0!==Re||re(jt.CAPTURE_NO_IMAGE);var He,We,Je=0,Xe=0,st=te.videoHeight,nt=te.videoWidth;if(this._isFill){var at=Math.max(Ie/nt,Re/st),ut=Ie/(nt*at),ct=Re/(st*at);He=Math.floor(nt*ut),We=Math.floor(st*ct),Je=Math.floor((1-ut)/2*nt),Xe=Math.floor((1-ct)/2*st)}else He=nt,We=st;return{width:He,height:We,offsetX:Je,offsetY:Xe}},Ce.setFillMode=function(Y){this._isFill=Y,this._videoEle&&(this._videoEle.style.objectFit=Y?"cover":"contain")},Ce.setPlugOut=function(){this._isPlugOut=!0},Ce._checkPlugOut=function(){this._isPlugOut&&x.emit("video-error",jt.CAMERA_PLUG_OUT)},Ce.getResolutions=function(){var Y=s()(l.a.mark(function te(ce){var _e,Ie,Re,He,We,Je,Xe,st,nt,at,ut,vt,wt;return l.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(void 0===ce&&(ce=!1),!(this._allResolutions.length>0)||ce){gt.next=3;break}return gt.abrupt("return",this._allResolutions);case 3:if(this._cameraInfo){gt.next=5;break}return gt.abrupt("return",null);case 5:_e=[],this._allResolutions=[],Ie=!1,Re=!1,gt.prev=9,We=So()(Ym);case 11:return gt.next=13,We.next();case 13:if(!(Ie=!(Je=gt.sent).done)){gt.next=32;break}return st=(Xe=Je.value).width,nt=Xe.height,at=Xe.type,gt.next=18,BT(this._cameraInfo.deviceId,st,nt,at,this._browserInfo,this._allCameras);case 18:if(vt=(ut=gt.sent).height===nt&&ut.width===st||ut.height===st&&ut.width===nt,ut&&ut.height&&vt){gt.next=27;break}return gt.next=24,BT(this._cameraInfo.deviceId,st,nt,"ideal",this._browserInfo,this._allCameras);case 24:return(wt=gt.sent)&&wt.height&&!YU({width:wt.width,height:wt.height},_e)&&(delete wt.type,_e.push(wt)),gt.abrupt("continue",29);case 27:delete ut.type,_e.push(ut);case 29:Ie=!1,gt.next=11;break;case 32:gt.next=38;break;case 34:gt.prev=34,gt.t0=gt.catch(9),Re=!0,He=gt.t0;case 38:if(gt.prev=38,gt.prev=39,!Ie||null==We.return){gt.next=43;break}return gt.next=43,We.return();case 43:if(gt.prev=43,!Re){gt.next=46;break}throw He;case 46:return gt.finish(43);case 47:return gt.finish(38);case 48:return this._allResolutions=_e,gt.abrupt("return",_e);case 50:case"end":return gt.stop()}},te,this,[[9,34,38,48],[39,,43,47]])}));return function(te){return Y.apply(this,arguments)}}(),Ce.setResolution=function(){var Y=s()(l.a.mark(function te(ce,_e){return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!this.playing()){Ie.next=2;break}return Ie.abrupt("return",this.play(ce,_e,this._cameraManager));case 2:return this._curResolution={width:ce,height:_e},Ie.abrupt("return",this._curResolution);case 4:case"end":return Ie.stop()}},te,this)}));return function(te,ce){return Y.apply(this,arguments)}}(),Ce.getCurrentResolution=function(){return this._curResolution},Ce.getCameraInfo=function(){return this._cameraInfo},Ce.destroy=function(){this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null,this._browserInfo=null},Ce.stop=function(){var Y;this._videoEle&&this._videoEle.srcObject&&(A()(Y=this._videoEle.srcObject.getTracks()).call(Y,function(te){te.stop()}),this._videoEle.srcObject=null,this._videoTrack=null)},Ce.getDeviceId=function(Y){if(Y){var te=Y.getVideoTracks();if(te.length)return this._videoTrack=te[0],this._videoTrack.getSettings().deviceId}return""},Ce.updateCameraInfo=function(Y){var te={};if(Y){var ce=Y.getVideoTracks();if(ce.length){this._videoTrack=ce[0];var _e={deviceId:(te=this._videoTrack.getSettings()).deviceId,label:this._videoTrack.label};this._cameraInfo=_e}}return te},Ce.getBestMediaStream=function(){var Y=s()(l.a.mark(function te(ce,_e,Ie){var Re,He,We,Je,Xe,st;return l.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return this.videoSettings=bs(this._cameraInfo.deviceId,ce,_e,Ie,!0,this._browserInfo,this._allCameras,this._isUser),Re=this.videoSettings,nt.prev=2,nt.next=5,qm(Re,!0,this._browserInfo,this._allCameras);case 5:if(We=this.getDeviceId(He=nt.sent),!this._cameraManager||!Re.bFmEnvironment||this._isUser){nt.next=21;break}return nt.next=10,this._cameraManager.getAllCamerasInfo();case 10:if(this._allCameras=nt.sent,this.videoSettings=bs(this._cameraInfo.deviceId,ce,_e,Ie,!0,this._browserInfo,this._allCameras,this._isUser),"boolean"==typeof(Re=this.videoSettings).video&&(Re.video={}),(Je=Re.video.deviceId)&&(Je=Je.exact||Je.ideal||Je),!(Je&&We.length>0&&We!=Je)){nt.next=21;break}return A()(Xe=He.getTracks()).call(Xe,function(at){at.stop()}),nt.next=20,qm(Re,!0,this._browserInfo,this._allCameras);case 20:He=nt.sent;case 21:return st=this.updateCameraInfo(He),nt.abrupt("return",{settings:st,stream:He});case 25:nt.prev=25,nt.t0=nt.catch(2),re("NotAllowedError"===nt.t0.name||"Permission denied"===nt.t0.message?jt.CAMERA_NOT_OPEN:jt.FAILED_GET_USERMEDIA);case 28:case"end":return nt.stop()}},te,this,[[2,25]])}));return function(te,ce,_e){return Y.apply(this,arguments)}}(),Ce.play=function(){var Y=s()(l.a.mark(function te(ce,_e,Ie){var Re,He,Je,Xe,st,at;return l.a.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return(Re=this._videoEle)||re(jt.VIDEO_ELEMENT_REQUIRED),this._cameraManager=Ie,this._checkPlugOut(),He=this._curResolution,"number"==typeof ce&&ce>0&&"number"==typeof _e&&_e>0||(ce=He?He.width:1280,_e=He?He.height:720),Je=KU({width:ce,height:_e},this._allResolutions),this.stop(),ut.next=10,this.getBestMediaStream(ce,_e,Je);case 10:return st=(Xe=ut.sent).settings,Re.srcObject=Xe.stream,ut.next=16,new h.a(function(ct){Re.onloadedmetadata=function(vt){ct(vt)}});case 16:return ut.prev=16,ut.next=19,Re.play();case 19:ut.next=27;break;case 21:return ut.prev=21,ut.t0=ut.catch(16),ut.next=25,new h.a(function(ct){Z()(ct,1e3)});case 25:return ut.next=27,Re.play();case 27:return at={width:Re.videoWidth,height:Re.videoHeight},st.width&&st.height&&(st.width===ce&&st.height===_e||st.width===_e&&st.height===ce)&&(at.width=ce,at.height=_e),this._curResolution=at,x.emit("onPlayed",Re),ut.abrupt("return",at);case 32:case"end":return ut.stop()}},te,this,[[16,21]])}));return function(te,ce,_e){return Y.apply(this,arguments)}}(),Ce.pause=function(){this._videoEle&&this._videoEle.pause()},Ce.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},Ce.paused=function(){return!!this._videoEle&&this._videoEle.paused},Ce.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var Y=this._videoEle.srcObject;if(Y){var te=Y.getVideoTracks();if(te&&0!==te.length)return!0}}catch(ce){re(ce)}return!1},Ce.getStatus=function(){return this.playing()?this.paused()?"paused":"playing":"stopped"},Ce.getVideoSetting=function(){return this.videoSettings},Ce.toggleCamera=function(Y,te,ce){return this._isUser=!this._isUser,this._cameraInfo.deviceId="",this.play(Y,te,ce)},Ye}(),UT=n(187),JU=(en()(UT.a,{insert:"head",singleton:!1}),function(){function Ye(Y){this._cameraPermission=!1,this._allCamerasInfo=[],this.selectedCamera=null,this.videoEl=null,this._trackCameraDeviceChanged(),this._initEl(Y),x.on("onPlayed",function(te){jT(te)})}var Y,Ce=Ye.prototype;return Ce.selectCamera=(Y=s()(l.a.mark(function te(ce){var _e,Ie,Re,He,We;return l.a.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(this._allCamerasInfo.length){Je.next=3;break}return Je.next=3,this.getAllCamerasInfo();case 3:if(_e=this._allCamerasInfo,ce||(ce=new e_(null,this.videoEl,_e)),Ie=null,!H(ce)){Je.next=21;break}Re={deviceId:"",label:""},He=0;case 9:if(!(He<_e.length)){Je.next=19;break}if(ce!==(We=_e[He]).deviceId){Je.next=16;break}return Re.deviceId=We.deviceId,Re.label=We.label,Ie=new e_(Re,this.videoEl,_e),Je.abrupt("break",19);case 16:He++,Je.next=9;break;case 19:Je.next=22;break;case 21:ce instanceof e_&&(Ie=ce);case 22:return this.selectedCamera&&this.selectedCamera.destroy(),this.selectedCamera=Ie,Je.abrupt("return",Ie);case 25:case"end":return Je.stop()}},te,this)})),function(te){return Y.apply(this,arguments)}),Ce.closeCamera=function(){this.selectedCamera&&(this.selectedCamera.destroy(),this.selectedCamera=null)},Ce.getCurrentCamera=function(){return this.selectedCamera},Ce.destroy=function(){x.off("onCameraChanged")},Ce.getAllCamerasInfo=function(){var Y=s()(l.a.mark(function te(){return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return Ql(),_e.next=3,$m();case 3:return this._allCamerasInfo=_e.sent,_e.abrupt("return",this._allCamerasInfo);case 6:case"end":return _e.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce._trackCameraDeviceChanged=function(){var Y=this;void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(te){Y._cameraChangedHandler(te)})},Ce._initEl=function(Y){if(Y)this.videoEl=Y;else{var te=document.createElement("video");te.className="cameraVideo",te.playsInline=!0,te.muted=!0,this.videoEl=te}},Ce._cameraChangedHandler=function(Y){},Ce._requestCamera=function(){var Y=s()(l.a.mark(function te(){return l.a.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return Ql(),0===this._allCamerasInfo.length&&x.emit("onThrowError",jt.NO_CAMERA),ce.next=4,this._checkAllowCamera();case 4:case"end":return ce.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce._checkAllowCamera=function(){var Y=s()(l.a.mark(function te(){return l.a.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:case"end":return ce.stop()}},te)}));return function(){return Y.apply(this,arguments)}}(),Ce.requestCamera=function(){var Y=s()(l.a.mark(function te(){return l.a.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:case"end":return ce.stop()}},te)}));return function(){return Y.apply(this,arguments)}}(),Ye.cameraExist=function(Y,te){return!0},Ye}());function jT(Ye,Ce,Y){if(Ye){var te,ce,_e=Ye.style.objectFit;Ce&&Y?(te=Ce,ce=Y):(te=Ye.videoWidth,ce=Ye.videoHeight);var Ie=Ye.getBoundingClientRect(),Re=Ie.width,He=Ie.height,We={zoom:1,left:0,top:0};if("cover"===_e){var Je=Math.max(Re/te,He/ce);We.zoom=Je}else{var Xe=Math.min(Re/te,He/ce),st=(Re-te*Xe)/2,nt=(He-ce*Xe)/2;We.zoom=Xe,We.left=st,We.top=nt}Ye.videoLayout=We}}var GT=function(){function Ye(Y){this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null,this._srcVideoInfo=null,this._observer=null,this._videoEl=Y,this._showCanvas=this.createCameraCanvas()}var Ce=Ye.prototype;return Ce.createCameraCanvas=function(){var Y=document.createElement("canvas");return Y.className="cameraCvs",Y},Ce.getCameraDvs=function(){return this._showCanvas},Ce.resetVideoInfo=function(){if(V.navInfo.bMobile&&(V.navInfo.biPhone||V.navInfo.biPad)){var Y=window.orientation;this._srcVideoInfo={videoWidth:this._videoEl.videoWidth,videoHeight:this._videoEl.videoHeight,orientation:Y=0==Y||180==Y?0:90}}},Ce.bindView=function(Y){var te;if(!(te=H(Y)?document.getElementById(Y):Y))return!1;var ce=this._showCanvas,_e=this._videoEl,Ie=_e.parentElement;null==Ie||Ie.remove();var Re=document.createElement("div");Re.className="cameraContainer",Re.appendChild(_e),Re.appendChild(ce),this._containerEl=Re,te.appendChild(Re),HT(ce);var He=this;return this._obEl=new ge(Re,function(We){var Je,Xe;if(V.navInfo.bMobile&&(V.navInfo.biPhone||V.navInfo.biPad)&&He._videoEl.videoWidth>0&&He._videoEl.videoHeight>0){var st=window.orientation;st=0==st||180==st?0:90,He._srcVideoInfo?st==He._srcVideoInfo.orientation?(Je=He._srcVideoInfo.videoWidth,Xe=He._srcVideoInfo.videoHeight):(Xe=He._srcVideoInfo.videoHeight,Je=He._srcVideoInfo.videoWidth):(He._srcVideoInfo={videoWidth:He._videoEl.videoWidth,videoHeight:He._videoEl.videoHeight,orientation:st},Je=He._srcVideoInfo.videoWidth,Xe=He._srcVideoInfo.videoHeight)}jT(He._videoEl,Je,Xe),HT(ce),x.emit("uiResize",We)}),!0},Ce.unbindView=function(){this._obEl&&(this._obEl.dispose(),this._obEl=null);var Y=this._containerEl;return!!Y&&(Y.remove(),!0)},Ce.dispose=function(){var Y;this.unbindView(),this._showCanvas.width=1,this._showCanvas.height=1,null==(Y=this._showCanvas)||Y.remove(),this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null},Ye}();function HT(Ye){var Ce=Ye.getBoundingClientRect(),te=Ce.height;Ye.width=Ce.width,Ye.height=te}var Mr,Ye,XU=n(276),ZU=n.n(XU),$U=function(){function Ye(){this.path=[],this._currentPage=null}var Ce=Ye.prototype;return Ce.navigateTo=function(Y){this.path.push(Y),this.currentPage=Y},Ce.redirectTo=function(Y){this.closeAll(),this.navigateTo(Y)},Ce.redirectToHome=function(){this.navigateBack(this.path.length-1)},Ce.navigateBack=function(Y){void 0===Y&&(Y=1);for(var te=this.path;Y>0;)bt(te.pop()),Y--;return this.currentPage=te[te.length-1],this.currentPage},Ce.closeAll=function(){var Y;A()(Y=this.path).call(Y,function(te){bt(te)}),this.path=[],this.currentPage=null},Ce.hideAllPages=function(){var Y;A()(Y=this.path).call(Y,function(te){var ce;null==(ce=te.element)||ce.classList.add("nodisplay")})},Ce.showAllPages=function(){var Y;A()(Y=this.path).call(Y,function(te){var ce;null==(ce=te.element)||ce.classList.remove("nodisplay")})},Ce.showHomePage=function(Y,te){var ce,_e=(ce={load:Ir(),toggleCamera:{icon:"dcs-font dcs-i-switch",onclick:function(We,Je){var Xe=Je.dcs;Xe.emit("blurPage"),Xe.showLoading("switch camera button click");var st=Xe.config.scannerViewer.resolution.defaultValue;Xe.toggleCamera(st.width,st.height).finally(function(){Xe.hideLoading("switch camera button click"),Xe.emit("focusPage")})},className:"dcs-btn-toggleCamera",text:"Switch Camera"},capture:{icon:"dcs-font dcs-i-capture",className:"dcs-btn-captureBtn",onclick:function(We,Je){Je.dcs.captureLoop.startManualCapture(Je)}},autoCapture:{icon:"dcs-font dcs-i-autoCapture",className:"dcs-btn-autoCapture",onmount:function(We,Je){var Xe=Je.dcs,st=Je.page;Xe.captureLoop&&(Xe.captureLoop.setEnable(),Xe.once("onPlayed",function(){Xe.captureLoop.startLoop(Je)}),Xe.once("video-closed",function(){Xe.captureLoop.stopCaptureLoop()}),"homePage"==st.pageName?(Xe.config.scannerViewer.autoScan&&(Xe.captureLoop.loadLoopTypeFromConfig(),Xe.captureLoop.clearCaptureTimer()),Xe.on("blurPage",function(){Xe.captureLoop.isEnable()&&(Xe.captureLoop.saveLoopTypeToConfig(),Xe.captureLoop.stopCaptureLoop(),Xe.captureLoop.setDisable())}),Xe.on("focusPage",function(){Xe.captureLoop.setEnable(),Xe.config.scannerViewer.autoScan.enableAutoScan?Xe.captureLoop.setAutoScan():Xe.captureLoop.changeStyle()})):Xe.captureLoop.loadLoopTypeFromConfig())},onSelected:function(We,Je){We?(Je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0,Je.dcs.config.scannerViewer.autoScan.enableAutoScan=!0):Je.dcs.config.scannerViewer.autoScan.enableAutoScan=!1,Je.dcs.captureLoop.loadLoopTypeFromConfig(),Je.dcs.captureLoop.startLoop(Je)}},multipleBtn:{onclick:no,onmount:function(We){We.innerHTML='<img class="previewImg">\n         <div class="imgCount">0</div>\n         <div class="nextArr dcs-font dcs-i-back"></div>\n        ',Mt.log(We)},className:"dcs-btn-multipleImg hidden",text:"Continuous"},continuous:{icon:"dcs-font dcs-i-continuous",onclick:To,onmount:function(We,Je){Je.page.options.continuous&&We.classList.add("dcs-selected")},className:"dcs-btn-continuousMode",text:"Continuous"}},{continuous:!1,resolution:{width:1280,height:720},file:{},deviceId:"",headerButtons:{changeResBtn:Hn(),autoDetect:{icon:"dcs-font dcs-i-autoDetect",onmount:function(We,Je){var Xe=Je.dcs,st=Je.page;Xe.captureLoop&&(Xe.captureLoop.setEnable(),Xe.once("onPlayed",function(){Xe.captureLoop.startLoop(Je)}),Xe.once("video-closed",function(){Xe.captureLoop.stopCaptureLoop()}),"homePage"==st.pageName?(Xe.config.scannerViewer.autoDetect&&(Xe.captureLoop.loadLoopTypeFromConfig(),Xe.captureLoop.clearCaptureTimer()),Xe.on("blurPage",function(){Xe.captureLoop.isEnable()&&(Xe.captureLoop.saveLoopTypeToConfig(),Xe.captureLoop.stopCaptureLoop(),Xe.captureLoop.setDisable())}),Xe.on("focusPage",function(){Xe.captureLoop.setEnable(),Xe.config.scannerViewer.autoDetect.enableAutoDetect&&!Xe.config.scannerViewer.autoScan.enableAutoScan?Xe.captureLoop.setAutoDetect():Xe.captureLoop.changeStyle()})):Xe.captureLoop.loadLoopTypeFromConfig())},onSelected:function(We,Je){We?Je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0:(Je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,Je.dcs.config.scannerViewer.autoScan.enableAutoScan=!1),Je.dcs.captureLoop.loadLoopTypeFromConfig(),Je.dcs.captureLoop.startLoop(Je)},className:"dcs-btn-detectCamera"},closeBtn:Ks()},footerButtons:ce,fill:!1});q(Y,_e);var Ie=new Dr(_e,te);this.navigateTo(Ie);var Re=document.querySelector(".dcs-btn-multipleImg");if(Re)if(te.config.scannerViewer.continuousScan.visibility)Re.style.top="-67px",Re.style.right="18px",Re.style.position="absolute";else{Re.style.top="0",Re.style.right="0",Re.style.position="relative";var He=document.querySelector(".dcs-btn-continuousMode");He&&(He.className="",He.appendChild(Re))}return Ie},Ce.showInsertPage=function(Y,te){var ce,_e=(ce={load:Ir(),toggleCamera:{icon:"dcs-font dcs-i-switch",onclick:function(Re,He){var We=He.dcs;We.emit("blurPage"),We.showLoading("switch camera button click");var Je=We.config.scannerViewer.resolution.defaultValue;We.toggleCamera(Je.width,Je.height).finally(function(){We.hideLoading("switch camera button click"),We.emit("focusPage")})},className:"dcs-btn-toggleCamera",text:"Switch Camera"},capture:{icon:"dcs-font dcs-i-capture",className:"dcs-btn-captureBtn",onclick:function(Re,He){He.dcs.captureLoop.startManualCapture(He)}},autoCapture:{icon:"dcs-font dcs-i-autoCapture",className:"dcs-btn-autoCapture",onmount:function(Re,He){var We=He.dcs,Je=He.page;We.captureLoop&&(We.captureLoop.setEnable(),We.once("onPlayed",function(){We.captureLoop.startLoop(He)}),We.once("video-closed",function(){We.captureLoop.stopCaptureLoop()}),"homePage"==Je.pageName?(We.config.scannerViewer.autoScan&&(We.captureLoop.loadLoopTypeFromConfig(),We.captureLoop.clearCaptureTimer()),We.on("blurPage",function(){We.captureLoop.isEnable()&&(We.captureLoop.saveLoopTypeToConfig(),We.captureLoop.stopCaptureLoop(),We.captureLoop.setDisable())}),We.on("focusPage",function(){We.captureLoop.setEnable(),We.config.scannerViewer.autoScan.enableAutoScan?We.captureLoop.setAutoScan():We.captureLoop.changeStyle()})):We.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Re,He){Re?(He.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0,He.dcs.config.scannerViewer.autoScan.enableAutoScan=!0):He.dcs.config.scannerViewer.autoScan.enableAutoScan=!1,He.dcs.captureLoop.loadLoopTypeFromConfig(),He.dcs.captureLoop.startLoop(He)}}},{continuous:!1,resolution:{width:1280,height:720},file:{},deviceId:"",headerButtons:{changeResBtn:Hn(),autoDetect:{icon:"dcs-font dcs-i-autoDetect",onmount:function(Re,He){var We=He.dcs,Je=He.page;We.captureLoop&&(We.captureLoop.setEnable(),We.once("onPlayed",function(){We.captureLoop.startLoop(He)}),We.once("video-closed",function(){We.captureLoop.stopCaptureLoop()}),"homePage"==Je.pageName?(We.config.scannerViewer.autoDetect&&(We.captureLoop.loadLoopTypeFromConfig(),We.captureLoop.clearCaptureTimer()),We.on("blurPage",function(){We.captureLoop.isEnable()&&(We.captureLoop.saveLoopTypeToConfig(),We.captureLoop.stopCaptureLoop(),We.captureLoop.setDisable())}),We.on("focusPage",function(){We.captureLoop.setEnable(),We.config.scannerViewer.autoDetect.enableAutoDetect&&!We.config.scannerViewer.autoScan.enableAutoScan?We.captureLoop.setAutoDetect():We.captureLoop.changeStyle()})):We.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Re,He){Re?He.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0:(He.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,He.dcs.config.scannerViewer.autoScan.enableAutoScan=!1),He.dcs.captureLoop.loadLoopTypeFromConfig(),He.dcs.captureLoop.startLoop(He)},className:"dcs-btn-detectCamera"},closeBtn:Ks()},footerButtons:ce,fill:!1});q(Y,_e);var Ie=new xr(_e,te);return this.navigateTo(Ie),Ie},Ce.showEditPage=function(Y,te){var ce={blob:null,footerButtons:{rotateLeft:{icon:"dcs-font dcs-i-rotateLeft",className:"dcs-btn-rotateLeft",onclick:function(Re,He){He.page.rotateLeft()}},rotateRight:{icon:"dcs-font dcs-i-rotateRight",className:"dcs-btn-rotateRight",onclick:function(Re,He){He.page.rotateRight()}},toggleFullArea:lu(te),save:{icon:"dcs-font dcs-i-save",className:"dcs-btn-save",onclick:function(Re,He){!function(We,Je){vs.apply(this,arguments)}(He.page,He.dcs)}}},headerButtons:{backBtn:{icon:"dcs-font dcs-i-back",className:"dcs-btn-backBtn",onclick:function(Re,He){He.dcs.navigateBack()}}},file:{},continuous:!1};q(Y,ce),ce.detectArea||(ce.footerButtons.toggleFullArea=null);var _e=new ri(ce,te);return this.navigateTo(_e),_e},ZU()(Ye,[{key:"currentPage",get:function(){return this._currentPage},set:function(Y){var te=this._currentPage;this._currentPage=Y,te instanceof Dr?te._dcs.emit("blurPage"):Y instanceof Dr&&Y._dcs.isHome()&&Y._dcs.emit("focusPage"),function(ce){if(ce){if(ce&&ce.element){var _e,Ie,Re,He,Je=ce.container||ce._dcs.config.element;if(!Je)return document.body.appendChild(ce.element),document.body.classList.add("dcs-overflowHidden"),ce.element.classList.add("dcs-fixed-full"),ce.container=document.body,void(null==(_e=(Ie=ce).render)||_e.call(Ie));H(Je)&&(Je=document.getElementById(Je)),Je&&("static"===window.getComputedStyle(Je).position&&Je.classList.add("dcs-relative"),Je.appendChild(ce.element),ce.container=Je,null==(Re=(He=ce).render)||Re.call(He))}}else document.body.classList.remove("dcs-overflowHidden")}(Y),te&&!Y&&(te._dcs.off("blurPage"),te._dcs.off("focusPage"))}}]),Ye}(),qU=function(){function Ye(){this.err=null,this._init()}var Ce=Ye.prototype;return Ce._init=function(){var Y=this;x.on("error",function(te){var ce=new Error(te.message);ce.code=te.code,Y._throwErr(ce)}),x.on("typeError",function(te,ce){var _e=new Error("Argument of type '"+te+"' is not assignable to parameter of type '"+ce+"'.");_e.code=-4212,Y._throwErr(_e)}),x.on("valueError",function(te,ce){var _e=new Error("The argument '"+te+"' is not valid for the parameter '"+ce+"'");_e.code=-4213,Y._throwErr(_e)})},Ce._throwErr=function(Y){throw this.err=Y,Y},Ye}();(Ye=Mr||(Mr={}))[Ye.None=0]="None",Ye[Ye.AutoScan=1]="AutoScan",Ye[Ye.AutoDetect=2]="AutoDetect";var bd=function(){function Ye(Y){this.isLooping=!1,this._dcs=null,this._cameraCvs=null,this._enabled=!1,this._loopType=Mr.None,this.loopTimer=null,this.lastConfirmTime=0,this.lastDetectTime=(new Date).getTime(),this._captureLoopSub=new R,this._oldLoopType=[],this._dcs=Y}var Y,Ce=Ye.prototype;return Ce.dispose=function(){this._loopType=Mr.None,this.clearCaptureTimer(),this._dcs=null,this._captureLoopSub=null,this._cameraCvs=null},Ce.resetLastConfirmTime=function(){this.lastConfirmTime=0},Ce.setAutoScan=function(){this.innerSetNextLoopType(Mr.AutoScan)},Ce.setAutoDetect=function(){this.innerSetNextLoopType(Mr.AutoDetect)},Ce.innerSetNextLoopType=function(Y){this._loopType==Ye.EnumLoopType_ManualScan?0==this._oldLoopType.length?this._oldLoopType.push(Y):this._oldLoopType[0]=Y:(this._loopType=Y,this.changeStyle(),this.clearCaptureTimer(),this.startLoop({dcs:this._dcs,page:this._dcs.getCurrentPage()}))},Ce.saveLoopTypeToConfig=function(){this._loopType==Mr.AutoScan?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!0,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this._loopType==Mr.AutoDetect?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1)},Ce.loadLoopTypeFromConfig=function(){this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoScan.enableAutoScan?(this._loopType=Mr.AutoScan,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoDetect.enableAutoDetect?this._loopType=Mr.AutoDetect:(this._loopType=Mr.None,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1),this.changeStyle()},Ce.getLoopType=function(){return this._loopType},Ce._setLoopType=function(Y){this._loopType=Y},Ce.setIsLooping=function(Y){this.isLooping=Y},Ce.setEnable=function(){this.isAutoButtonEnabled()&&(this._enabled=!0)},Ce.setDisable=function(){this._enabled=!1},Ce.isEnable=function(){return this._enabled},Ce.isAutoButtonDisabled=function(){return 1!=this._dcs.config.scannerViewer.enableBorderDetection},Ce.isAutoButtonEnabled=function(){return 1==this._dcs.config.scannerViewer.enableBorderDetection},Ce.startManualCapture=function(Y){var ce,te=this;Mt.log("startManualCapture"),this._oldLoopType.push(this._loopType),this._captureLoopSub.once("onCapturedImage",(ce=s()(l.a.mark(function _e(Ie,Re,He){var We,Je;return l.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return We={dcs:Ie,page:Ie.getCurrentPage()},Xe.prev=1,0==We.page.options.continuous&&te.loadLoopTypeFromConfig(),Xe.next=5,We.page.emitEx("onSaveCapture",!1,We,Re,!0,He);case 5:Xe.next=12;break;case 7:Xe.prev=7,Xe.t0=Xe.catch(1),Mt.log("manual capture error."),Mt.log(Xe.t0),702==Xe.t0.code&&(Ie.hideLoading("startManualCapture 1"),re(Xe.t0));case 12:if(!Ie.captureLoop){Xe.next=28;break}if(!((Je=Ie.captureLoop._oldLoopType).length<=0)){Xe.next=19;break}return Mt.log("manual capture stack error."),Ie.captureLoop._loopType=Mr.None,Ie.hideLoading("startManualCapture 2"),Xe.abrupt("return");case 19:if(Ie.captureLoop._loopType=Je.pop(),Ie.captureLoop.resetLastConfirmTime(),!Ie.captureLoop.loopTypeIsManualScan()){Xe.next=25;break}return Ie.captureLoop.innerLoop(We),Ie.hideLoading("startManualCapture 3"),Xe.abrupt("return");case 25:Ie.hideLoading("startManualCapture 4"),Ie.captureLoop.innerLoop(We),Ie.captureLoop.changeStyle();case 28:case"end":return Xe.stop()}},_e,null,[[1,7]])})),function(_e,Ie,Re){return ce.apply(this,arguments)})),this.lastConfirmTime=(new Date).getTime(),this.loopTypeIsManualScan()||(this._loopType=Ye.EnumLoopType_ManualScan,this._dcs.showLoading("startManualCapture start loop"),this.isLooping||(this.clearCaptureTimer(),this.innerLoop(Y)))},Ce.startLoop=function(Y){Mt.log("startLoop"),this.isAutoButtonDisabled()&&(this._loopType=Mr.None),this._loopType==Mr.AutoScan||this._loopType==Mr.AutoDetect?null==this.loopTimer&&(this.lastConfirmTime=0,this.isLooping||(this.clearCaptureTimer(),this.innerLoop(Y))):(this.stopCaptureLoop(),this._dcs.hideLoading("startLoop")),this.changeStyle()},Ce.changeStyle=function(){var Y,te,ce=null==(Y=this._dcs)||null==(te=Y.getCurrentPage())?void 0:te.element;if(ce){var _e=ce.querySelector(".dcs-btn-autoCapture"),Ie=ce.querySelector(".dcs-btn-captureBtn"),Re=ce.querySelector(".dcs-btn-detectCamera");if(this.isAutoButtonDisabled())return _e&&(_e.classList.remove("dcs-selected"),_e.classList.add("dcs-disable"),_e.bSelected=!1),Re&&Ie.classList.remove("dcs-capturing"),void(Re&&(Re.classList.remove("dcs-selected"),Re.classList.add("dcs-disable"),Re.bSelected=!1));this._loopType==Mr.AutoScan?(_e&&(_e.classList.add("dcs-selected"),_e.bSelected=!0),Re&&Ie.classList.add("dcs-capturing"),Re&&(Re.classList.add("dcs-selected"),Re.bSelected=!0)):this._loopType==Mr.AutoDetect?(_e&&(_e.classList.remove("dcs-selected"),_e.bSelected=!1),Re&&Ie.classList.remove("dcs-capturing"),Re&&(Re.classList.add("dcs-selected"),Re.bSelected=!0)):(_e&&(_e.classList.remove("dcs-selected"),_e.classList.remove("dcs-disable"),_e.bSelected=!1),Re&&Ie.classList.remove("dcs-capturing"),Re&&(Re.classList.remove("dcs-selected"),Re.classList.remove("dcs-disable"),Re.bSelected=!1))}},Ce.getDetectRemainTime=function(){var Y=(new Date).getTime(),te=Ae(this._dcs,"config.scannerViewer.autoDetect").fpsLimit;return Math.max(0,1e3/(void 0===te?3:te)-(Y-this.lastDetectTime))},Ce.loopTypeIsNone=function(){return this._loopType==Mr.None},Ce.loopTypeIsManualScan=function(){return this._loopType==Ye.EnumLoopType_ManualScan},Ce.innerLoop=function(Y){var te=this,ce=Y.dcs,_e=ce.areaDetectFn,Ie=this.getDetectRemainTime();if(_e)return this.loopTypeIsNone()?this.exitAutoCaptureFromInner(0):void((this._loopType!=Mr.AutoScan&&this._loopType!=Mr.AutoDetect||this.isEnable())&&(clearTimeout(this.loopTimer),this.loopTimer=Z()(s()(l.a.mark(function Re(){var He;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!te.loopTypeIsNone()){We.next=2;break}return We.abrupt("return",te.exitAutoCaptureFromInner(1));case 2:if(!te.isLooping){We.next=4;break}return We.abrupt("return");case 4:return te.isLooping=!0,We.next=7,te.innerLoopTimeout(Y);case 7:He=We.sent,te.isLooping=!1,He&&(te._loopType==Mr.AutoScan||te._loopType==Mr.AutoDetect)&&te.isEnable()?Z()(function(){ce.captureLoop&&(ce.captureLoop._loopType!=Mr.AutoScan&&ce.captureLoop._loopType!=Mr.AutoDetect||!ce.captureLoop.isEnable()||ce.captureLoop.innerLoop(Y))},10):te.clearCaptureTimer();case 10:case"end":return We.stop()}},Re)})),Ie)))},Ce.innerLoopTimeout=(Y=s()(l.a.mark(function te(ce){var _e,Ie,Re,He,We,Je,Xe,st,nt,at,ut,ct,vt,wt,zt,Ht;return l.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(_e=ce.dcs,this.lastDetectTime=(new Date).getTime(),He=void 0===(Re=(Ie=_e.config.scannerViewer).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:Re,Je=void 0===(We=Ie.autoDetect)?{}:We,Xe=!0,It.prev=4,"playing"==_e.getStatus()){It.next=7;break}return It.abrupt("return",!0);case 7:return It.next=9,_e.capture(Xe);case 9:if(st=It.sent,!this.loopTypeIsNone()){It.next=14;break}return It.abrupt("return",this.exitAutoCaptureFromInner(2));case 14:if(!this.loopTypeIsManualScan()){It.next=17;break}return this._captureLoopSub.emit("onCapturedImage",_e,st),It.abrupt("return",!1);case 17:return It.prev=17,It.next=20,b(st,!1,_e);case 20:if(nt=It.sent,this._loopType!=Mr.AutoScan){It.next=67;break}if(at=nt.cornerPoints,!this.loopTypeIsNone()){It.next=27;break}return Mt.log("loop setImageDataBack"),_e.setImageDataBack(st.imageData),It.abrupt("return",this.exitAutoCaptureFromInner(3));case 27:if(!nt.detectedArea){It.next=56;break}if(this.drawArea(at,He,_e.getVideoElement()),!this.loopTypeIsNone()){It.next=35;break}return Mt.log("loop setImageDataBack"),_e.setImageDataBack(st.imageData),It.abrupt("return",this.exitAutoCaptureFromInner(5));case 35:if(!this.loopTypeIsManualScan()){It.next=38;break}return this._captureLoopSub.emit("onCapturedImage",_e,st,nt),It.abrupt("return",!1);case 38:if(ct=void 0===(ut=Je.autoCaptureDelay)?2e3:ut,vt=(new Date).getTime(),!(this._loopType==Mr.AutoScan&&this.lastConfirmTime>0&&vt-this.lastConfirmTime>ct)){It.next=53;break}return _e.showLoading("auto capture"),It.prev=43,It.next=46,ce.page.emitEx("onSaveCapture",!0,ce,st,!0,nt);case 46:return It.prev=46,_e.hideLoading("auto capture"),It.finish(46);case 49:return _e.captureLoop.resetLastConfirmTime(),It.abrupt("return",!0);case 53:0==this.lastConfirmTime&&(this.lastConfirmTime=vt);case 54:It.next=60;break;case 56:Mt.log("[capture loop] detect result:"),Mt.log(nt),this.lastConfirmTime=0,this.clearCanvas();case 60:if(!this.loopTypeIsManualScan()){It.next=63;break}return this._captureLoopSub.emit("onCapturedImage",_e,st,nt),It.abrupt("return",!1);case 63:Mt.log("loop setImageDataBack"),_e.setImageDataBack(st.imageData),It.next=83;break;case 67:if(this._loopType!=Mr.AutoDetect){It.next=80;break}if(wt=nt.cornerPoints,Mt.log("loop setImageDataBack"),_e.setImageDataBack(st.imageData),!this.loopTypeIsNone()){It.next=73;break}return It.abrupt("return",this.exitAutoCaptureFromInner(3));case 73:if(zt=le(wt,st.imageWidth,st.imageHeight),!this.loopTypeIsNone()){It.next=77;break}return It.abrupt("return",this.exitAutoCaptureFromInner(4));case 77:zt?this.clearCanvas():(Ht=_e.getVideoElement(),_e.captureLoop.drawArea(wt,He,Ht)),It.next=83;break;case 80:if(!this.loopTypeIsManualScan()){It.next=83;break}return this._captureLoopSub.emit("onCapturedImage",_e,st,nt),It.abrupt("return",!1);case 83:It.next=88;break;case 85:It.prev=85,It.t0=It.catch(17),Mt.log(It.t0);case 88:It.next=93;break;case 90:It.prev=90,It.t1=It.catch(4),Mt.log(It.t1);case 93:return It.abrupt("return",!0);case 95:case"end":return It.stop()}},te,this,[[4,90],[17,85],[43,,46,49]])})),function(te){return Y.apply(this,arguments)}),Ce.exitAutoCaptureFromInner=function(Y){return this.clearCaptureTimer(),this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"),Mt.log("auto capture loop: loopType is None "+Y),!1},Ce.clearCaptureTimer=function(){clearTimeout(this.loopTimer),this.loopTimer=null,this.lastConfirmTime=0},Ce.stopCaptureLoop=function(){this._loopType=Mr.None,this.clearCaptureTimer(),this.clearCanvas()},Ce.getCameraCvs=function(){return this._cameraCvs||(this._cameraCvs=this._dcs.getCameraView().getCameraDvs()),this._cameraCvs},Ce.clearCanvas=function(){var Y=this.getCameraCvs();Y&&Y.getContext("2d").clearRect(0,0,Y.width,Y.height)},Ce.drawArea=function(Y,te,ce){var _e=this.getCameraCvs(),Ie=_e.getContext("2d");Ie.save(),Ie.clearRect(0,0,_e.width,_e.height);var Re=ce.videoLayout,He=Re.zoom;Ie.translate(Re.left,Re.top),Ie.scale(He,He),Ie.beginPath(),Ie.moveTo(Y[0],Y[1]);for(var Xe=2;Xe<Y.length;Xe+=2)Ie.lineTo(Y[Xe],Y[Xe+1]);Ie.closePath();var at=L()(te.strokeWidth,10)/He;Ie.strokeStyle=te.stroke,Ie.lineCap="round",Ie.lineWidth=at,"dashed"===te.dash&&Ie.setLineDash([Math.max(2,at),Math.max(4,2*at)]),Ie.stroke(),Ie.restore()},Ye}();bd.EnumLoopType_ManualScan=3,bd._defaultConfig={autoScan:{enableAutoScan:!1},autoDetect:{enableAutoDetect:!1},enableBorderDetection:!0};var Yl=new c.a,Kl=new c.a,Id=new c.a,e4=function(){function Ye(){this._cameraMng=null,this._cameraView=null,this._errorMng=null,this._uiRouters=null,this.captureLoop=null,this.areaDetectFn=null,this.perspectiveFn=null,this.licenseFn=null,this.multipleHandleFn=null,this.multipleCloseHandleFn=null,this.loadFn=null,this.filterHandleList=[],this.imageDataToBlobHandleFn=null,this.file={},this._runPlaying=!1,this._loadingConfig={element:ii,background:"rgba(0, 0, 0, 0.2)",container:null},this._loadingNumber=0,this.multipleView=!1,this.config={scannerViewer:{maxDocuments:20,maxImagesInBuffer:20,fullScreen:!0,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},resolution:{visibility:!0,valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoDetect:{visibility:!0,acceptedPolygonConfidence:0,acceptedBlurryScore:0},autoScan:{visibility:!0},continuousScan:{visibility:!0,enableContinuousScan:!0},switchCamera:{visibility:!0},loadLocalFile:{visibility:!0}},filterViewer:{visibility:!0,insert:{visibility:!0,position:"before"},delete:{visibility:!0},rotateLeft:{visibility:!0},filter:{visibility:!0,valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original"}},cropViewer:{visibility:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},rotateLeft:{visibility:!0},rotateRight:{visibility:!0},autoDetectBorder:{visibility:!0},apply:{visibility:!0}}},this._container=null,this._cameraMng=new JU,this._cameraView=new GT(this._cameraMng.videoEl),this._uiRouters=new $U,this._errorMng=new qU,this.captureLoop=new bd(this),document.addEventListener("click",zT),window.addEventListener("focus",YT),window.addEventListener("blur",QT)}var Y,Ce=Ye.prototype;return Ce.bindView=function(Y){var te;return void 0===Y&&(Y=this._container),(te=H(Y)?document.getElementById(Y):Y)?(this._cameraView||(this._cameraView=new GT(this._cameraMng.videoEl)),this.captureLoop||(this.captureLoop=new bd(this)),this._cameraView.bindView(te),this._container=te,!0):(x.emit("error"),!1)},Ce.unbindView=function(){var Y,te;return this._container=null,null==(Y=this._cameraView)||Y.dispose(),this._cameraView=null,null==(te=this.captureLoop)||te.dispose(),this.captureLoop=null,!0},Ce.getVideoElement=function(){return this._cameraMng.videoEl},Ce.getCameraView=function(){return this._cameraView},Ce.play=(Y=s()(l.a.mark(function te(ce,_e,Ie,Re,He){var We,Je;return l.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(void 0===Re&&(Re=!1),void 0===He&&(He=!1),this._checkLicense(),He||!this._runPlaying){Xe.next=5;break}return Xe.abrupt("return",h.a.reject(jt.VIDEO_NOT_STOP));case 5:if(ce&&(ce instanceof HTMLElement||de(typeof ce,"HTMLElement"),this.bindView(ce)),this._container){Xe.next=8;break}return Xe.abrupt("return",h.a.reject(jt.VIDEO_ELEMENT_REQUIRED));case 8:if(void 0===_e||j(_e)||de(typeof _e,"number"),void 0===Ie||j(Ie)||de(typeof Ie,"number"),this._runPlaying=!0,We=this._cameraMng.getCurrentCamera()){Xe.next=16;break}return Xe.next=15,this._cameraMng.selectCamera();case 15:We=Xe.sent;case 16:return We.setFillMode(Re),Xe.prev=17,Xe.next=20,We.play(_e,Ie,this._cameraMng);case 20:Je=Xe.sent,Xe.next=27;break;case 23:return Xe.prev=23,Xe.t0=Xe.catch(17),this._runPlaying=!1,Xe.abrupt("return",h.a.reject(Xe.t0));case 27:return Xe.abrupt("return",Je);case 28:case"end":return Xe.stop()}},te,this,[[17,23]])})),function(te,ce,_e,Ie,Re){return Y.apply(this,arguments)}),Ce.pause=function(){var Y=this._cameraMng.getCurrentCamera();Y&&Y.pause()},Ce.stop=function(){var Y=this._cameraMng.getCurrentCamera();if(Y)return Y.stop(),void(this._runPlaying=!1)},Ce.resume=function(){var Y=this._cameraMng.getCurrentCamera();Y&&Y.resume()},Ce.getStatus=function(){var Y=this._cameraMng.getCurrentCamera();return Y?Y.getStatus():""},Ce.capture=function(Y){var te=this._cameraMng.getCurrentCamera();return te?te.capture(Y):h.a.reject(jt.NO_CAMERA_SELECTED)},Ce.setImageDataBack=function(Y){var te=this._cameraMng.getCurrentCamera();return te?te.setImageDataBack(Y):(re(jt.NO_CAMERA_SELECTED),null)},Ce.getSourceList=function(){return this._checkLicense(),this._cameraMng.getAllCamerasInfo()},Ce.selectSource=function(){var Y=s()(l.a.mark(function te(ce){var _e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return this._checkLicense(),Ie.next=3,this._cameraMng.selectCamera(ce);case 3:if(_e=Ie.sent,this._runPlaying=!1,_e){Ie.next=7;break}return Ie.abrupt("return",h.a.reject(jt.SOURCE_NOT_FOUND));case 7:return Ie.abrupt("return",null==_e?void 0:_e.getCameraInfo());case 8:case"end":return Ie.stop()}},te,this)}));return function(te){return Y.apply(this,arguments)}}(),Ce.closeSource=function(){var Y=s()(l.a.mark(function te(){var ce,_e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this._runPlaying=!1,!(ce=this._cameraMng.getCurrentCamera())){Ie.next=6;break}return _e=ce.getCameraInfo(),this._cameraMng.closeCamera(),Ie.abrupt("return",_e);case 6:return Ie.abrupt("return",h.a.reject(jt.NO_CAMERA_SELECTED));case 7:case"end":return Ie.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce.getCurrentSource=function(){var Y=s()(l.a.mark(function te(){var ce;return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!(ce=this._cameraMng.getCurrentCamera())){_e.next=3;break}return _e.abrupt("return",ce.getCameraInfo());case 3:return _e.abrupt("return",null);case 4:case"end":return _e.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce.getCurrentResolution=function(){var Y=s()(l.a.mark(function te(){var ce;return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!(ce=this._cameraMng.getCurrentCamera())){_e.next=3;break}return _e.abrupt("return",ce.getCurrentResolution());case 3:return _e.abrupt("return",h.a.reject(jt.NO_CAMERA_SELECTED));case 4:case"end":return _e.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce.getResolution=function(){var Y=s()(l.a.mark(function te(){var ce;return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!(ce=this._cameraMng.getCurrentCamera())){_e.next=3;break}return _e.abrupt("return",ce.getResolutions());case 3:return _e.abrupt("return",h.a.reject(jt.NO_CAMERA_SELECTED));case 4:case"end":return _e.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce.setResolution=function(){var Y=s()(l.a.mark(function te(ce){var _e;return l.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!(_e=this._cameraMng.getCurrentCamera())){Ie.next=5;break}return Q(ce),Ie.abrupt("return",_e.setResolution(ce.width,ce.height));case 5:return Ie.abrupt("return",h.a.reject(jt.NO_CAMERA_SELECTED));case 6:case"end":return Ie.stop()}},te,this)}));return function(te){return Y.apply(this,arguments)}}(),Ce.getVideoSetting=function(){var Y=this._cameraMng.getCurrentCamera();return Y?Y.getVideoSetting():(re(jt.NO_CAMERA_SELECTED),null)},Ce.toggleCamera=function(){var Y=s()(l.a.mark(function te(ce,_e){var Ie;return l.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(!(Ie=this._cameraMng.getCurrentCamera())){Re.next=3;break}return Re.abrupt("return",Ie.toggleCamera(ce,_e,this._cameraMng));case 3:return Re.abrupt("return",h.a.reject(jt.NO_CAMERA_SELECTED));case 4:case"end":return Re.stop()}},te,this)}));return function(te,ce){return Y.apply(this,arguments)}}(),Ce.show=function(){return!!this._container&&this.bindView()},Ce.hidden=function(){return!this._container},Ce.hide=function(){this.unbindView()},Ce.bindAreaDetectFunction=function(Y){return!!me(Y)&&(this.areaDetectFn=Y,!0)},Ce.bindPerspectiveFunction=function(Y){return this.perspectiveFn=Y,!0},Ce.bindLicenseCallback=function(Y){return this.licenseFn=Y,!0},Ce.bindMultipleHandle=function(Y){return this.multipleHandleFn=Y,!0},Ce.bindMultipleCloseHandle=function(Y){return this.multipleCloseHandleFn=Y,!0},Ce.bindImageDataToBlobHandle=function(Y){return this.imageDataToBlobHandleFn=Y,!0},Ce.bindLoadHandle=function(Y){return this.loadFn=Y,!0},Ce.bindFilterHandleList=function(Y){return this.filterHandleList=Y,!0},Ce.showEditPage=function(){var Y=s()(l.a.mark(function te(ce){return l.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return void 0===ce&&(ce={}),this._checkLicense(),_e.abrupt("return",this._uiRouters.showEditPage(ce,this));case 3:case"end":return _e.stop()}},te,this)}));return function(te){return Y.apply(this,arguments)}}(),Ce.showHomePage=function(){var Y=s()(l.a.mark(function te(ce){var _e,Re,He,We,Je,Xe,st,nt,at,ut,ct;return l.a.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(void 0===ce&&(ce={}),this._checkLicense(),_e=this._uiRouters.showHomePage(ce,this),Re=_e.element.children[1],this.showLoading("showHomePage"),vt.prev=6,We=(He=this.config.scannerViewer.resolution).valueList,(Je=He.defaultValue)||We&&We.length>0&&(Je=We[We.length-1].value),Xe=_e.options,st=g()(Xe),!(nt=Xe.deviceId)){vt.next=13;break}return vt.next=13,this.selectSource(nt);case 13:return ut=(at={width:void 0,height:void 0}).width,ct=at.height,Je&&(ut=Je.width?Je.width:void 0,ct=Je.height?Je.height:void 0),vt.next=17,this.play(Re,ut,ct,st);case 17:vt.next=23;break;case 19:vt.prev=19,vt.t0=vt.catch(6),this.navigateBack(),re(vt.t0);case 23:return vt.prev=23,this.hideLoading("showHomePage"),vt.finish(23);case 26:return vt.abrupt("return",_e);case 27:case"end":return vt.stop()}},te,this,[[6,19,23,26]])}));return function(te){return Y.apply(this,arguments)}}(),Ce.showInsertPage=function(){var Y=s()(l.a.mark(function te(ce){var _e,Re,He,We,Je,Xe,st,nt,at,ut,ct;return l.a.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(void 0===ce&&(ce={}),this._checkLicense(),_e=this._uiRouters.showInsertPage(ce,this),Re=_e.element.children[1],this.showLoading("showInsertPage"),vt.prev=6,We=(He=this.config.scannerViewer.resolution).valueList,(Je=He.defaultValue)||We&&We.length>0&&(Je=We[We.length-1].value),Xe=_e.options,st=g()(Xe),!(nt=Xe.deviceId)){vt.next=13;break}return vt.next=13,this.selectSource(nt);case 13:return ut=(at={width:void 0,height:void 0}).width,ct=at.height,Je&&(ut=Je.width?Je.width:void 0,ct=Je.height?Je.height:void 0),vt.next=17,this.play(Re,ut,ct,st,!0);case 17:vt.next=23;break;case 19:vt.prev=19,vt.t0=vt.catch(6),this.navigateBack(),re(vt.t0);case 23:return vt.prev=23,this.hideLoading("showInsertPage"),vt.finish(23);case 26:return vt.abrupt("return",_e);case 27:case"end":return vt.stop()}},te,this,[[6,19,23,26]])}));return function(te){return Y.apply(this,arguments)}}(),Ce.showFilterPage=function(Y){this._checkLicense();var te=this.config.filterViewer,ce=void 0===te?{}:te;ce.visibility||(ce.insert.visibility=!1,ce.remove.visibility=!1,ce.rotateLeft.visibility=!1,p()(ce).visibility=!1);var _e=ce.rotateLeft,Ie=p()(ce);return Y.footerButtons={rotateRight:null,rotateLeft:xe(_e),filter:I()({},Jo(this),xe(Ie)),save:{order:1},empty:{}},Y.isFilterPage=!0,this._uiRouters.showEditPage(Y,this)},Ce.navigateBack=function(Y){void 0===Y&&(Y=1);var te=this._uiRouters.navigateBack(Y);te instanceof Dr&&(this.bindView(te.element.children[1]),te._dcs.isHome()&&te._dcs.emit("focusPage")),!te&&this._cameraMng.getCurrentCamera()&&(this.closeSource(),this.unbindView())},Ce.redirectToHome=function(){this._uiRouters.redirectToHome()},Ce.isHome=function(){return 0==this.multipleView&&1==this._uiRouters.path.length},Ce.closeAll=function(){var Y;this._uiRouters.closeAll(),this.file={},null==(Y=this._container)||Y.classList.remove("dcs-relative"),this._cameraMng.getCurrentCamera()&&this.closeSource()},Ce.hideAllPages=function(){this._uiRouters.hideAllPages()},Ce.showAllPages=function(){var Y=s()(l.a.mark(function te(){var ce,_e,Ie,He,We,Je;return l.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:(ce=document.querySelector(".dcs-btn-multipleImg"))&&(_e=ce.querySelector(".previewImg"))&&(Ie=this.getCurrentPage(),0==(We=void 0===(He=Ie.options.file.blobList)?[]:He).length?ce.classList.add("hidden"):(Je=We[We.length-1],_e.src==Ve&&Je.preview&&(_e.src=Vt.createURL(Je.preview)))),this._uiRouters.showAllPages();case 3:case"end":return Xe.stop()}},te,this)}));return function(){return Y.apply(this,arguments)}}(),Ce._checkLicense=function(){return!this.licenseFn||(0!==this.licenseFn().errorCode&&re(jt.LICENSE_INVALID),!0)},Ce.createBlobItem=function(Y){return new yi(Y)},Ce.showLoading=function(Y){this._loadingNumber++,Y&&Mt.log(["show loading: ",Y,", num: ",this._loadingNumber].join(""));var te=this._loadingConfig,ce=te.element,_e=te.background,Ie=this._loadingConfig.container;if(!Ie){var Re=document.createElement("div");Re.style.background=_e,this._loadingConfig.container=Re,Ie=Re}var He,We=this.config.element;Ie.innerHTML="",Ie.appendChild(ce),Ie.className="loadingContainer",(He=H(We)?document.getElementById(We):We)?He.appendChild(Ie):(document.body.appendChild(Ie),Ie.classList.add("dcs-fixed-full"))},Ce.hideLoading=function(Y){if(this._loadingNumber--,Y&&Mt.log(["hide loading: ",Y,", num: ",this._loadingNumber].join("")),this._loadingNumber<1){var te=this._loadingConfig.container;null==te||te.remove(),this._loadingNumber=0}},Ce.getDetectArea=function(Y){return b(Y,!0,this)},Ce.filterHandler=function(){var Y=s()(l.a.mark(function te(ce,_e){var Ie;return l.a.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return Ie=Ae(this.config,"filterViewer.filter"),We.abrupt("return",O(this,ce,this.filterHandleList,Ie.valueList,_e));case 4:case"end":return We.stop()}},te,this)}));return function(te,ce){return Y.apply(this,arguments)}}(),Ce.filterHandlerByIImageData=function(){var Y=s()(l.a.mark(function te(ce,_e,Ie){var Re;return l.a.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Re=Ae(this.config,"filterViewer.filter"),Je.abrupt("return",z(ce,_e,this.filterHandleList,Re.valueList,Ie));case 4:case"end":return Je.stop()}},te,this)}));return function(te,ce,_e){return Y.apply(this,arguments)}}(),Ce.packageBlobItemFromIImageData=function(Y,te,ce,_e){return void 0===te&&(te=!1),void 0===ce&&(ce=!1),void 0===_e&&(_e=!1),Cr(Y,this,te,ce,_e)},Ce.on=function(Y,te){x.on(Y,te)},Ce.once=function(Y,te){x.once(Y,te)},Ce.off=function(Y,te){x.off(Y,te)},Ce.emit=function(Y){for(var te,ce=arguments.length,_e=new Array(ce>1?ce-1:0),Ie=1;Ie<ce;Ie++)_e[Ie-1]=arguments[Ie];x.emit.apply(x,_()(te=[Y]).call(te,_e))},Ce.getCurrentPage=function(){return this._uiRouters.currentPage},Ce.dispose=function(){var Y,te,ce,_e;this.config&&(this.config.element=null),document.removeEventListener("click",zT),window.removeEventListener("focus",YT),window.removeEventListener("blur",QT),Yl.clear(),Kl.clear(),this._container=null,null==(Y=this._cameraView)||Y.dispose(),this._cameraView=null,null==(te=this._cameraMng)||te.destroy(),this._cameraMng=null,null==(ce=this._uiRouters)||ce.closeAll(),this._uiRouters=null,this._errorMng=null,null==(_e=this.captureLoop)||_e.dispose(),this.captureLoop=null},Ce.addGlobalClickEvent=function(Y,te){if(me(te)){var ce=this;Yl.set(Y,function(_e){te(_e,ce)&&ce.removeGlobalClickEvent(_e)})}},Ce.removeGlobalClickEvent=function(Y){Yl.delete(Y)},Ce.addGlobalBlurEvent=function(Y,te){if(me(te)){var ce=this;Kl.set(Y,function(_e){te(_e,ce)&&ce.removeGlobalBlurEvent(_e)})}},Ce.removeGlobalBlurEvent=function(Y){Kl.delete(Y)},Ce.addGlobalFocusEvent=function(Y,te){if(me(te)){var ce=this;Id.set(Y,function(_e){te(_e,ce)&&ce.removeGlobalBlurEvent(_e)})}},Ce.removeGlobalFocusEvent=function(Y){Id.delete(Y)},Ye}();function zT(Ye){A()(Yl).call(Yl,function(Ce,Y){me(Ce)&&Ce(Y)})}function QT(Ye){A()(Kl).call(Kl,function(Ce,Y){me(Ce)&&Ce(Y)})}function YT(Ye){A()(Id).call(Id,function(Ce,Y){me(Ce)&&Ce(Y)})}var KT=n(188);en()(KT.a,{insert:"head",singleton:!1}),window.Dynamsoft||(window.Dynamsoft={}),window.Dynamsoft.CameraViewer=e4}])}),T.AddonReady(function(e,r){e.product.bHTML5Edition&&!T.navInfoSync.bIE&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(i){var s=function(){this._stwain=i,this._viewer=null};s.prototype._getCameraViewer=function(){return null==this._viewer&&(e.log("camera addon: bind viewer."),this._viewer=new T.CameraViewer,this._stwain._ImgManager.getWebViewer().bindCamera()),this._viewer},s.prototype._checkLic=function(){var o=!0;return e.License.checkProductKey(this._stwain,{Webcam:!0},!0)||(e.log("camera addon: check camera license failed."),o=!1),o&&!e.License.checkProductKey(this._stwain,{Webcam:!0,Wasm:!0},!0)&&(e.log("camera addon: check camera wasm license failed."),o=!1),!o&&{code:this._stwain._errorCode,message:this._stwain._errorString}},s.prototype.getSourceList=function(){var o=this._checkLic();return o?e.Promise.reject(o):this._getCameraViewer().getSourceList()},s.prototype.selectSource=function(o){var l=this._checkLic();return l?e.Promise.reject(l):(this._getCameraViewer().hide(),this._getCameraViewer().selectSource(o))},s.prototype.closeSource=function(){var o=this._checkLic();if(o)return e.Promise.reject(o);this._getCameraViewer().hide();var l=this._getCameraViewer().closeSource();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),l},s.prototype.play=function(o,l,d){var u,h,c=this._checkLic();if(c)return e.Promise.reject(c);if(this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen)return e.Errors.ImageEditorOpenCannotPlayVideo(this._stwain),e.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString});var f=o;if(!f)if(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain){var g=e.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));g&&g.length>0&&g[0].className.indexOf("DVS_disabled")<0&&(f=g[0])}else{var v=e.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));v&&v.length>0&&v[0].className.indexOf("DVS_disabled")<0&&(f=v[0])}if(f)"object"==typeof l&&(u=l.width,h=l.height),f&&"DIV"==f.nodeName||(f=document.getElementById(f)),!f.offsetHeight&&!f.scrollHeight&&!f.clientHeight&&(f.style.height="200px"),!f.offsetWidth&&!f.scrollWidth&&!f.clientWidth&&(f.style.width="200px"),this._getCameraViewer().show();else{var p=this._getCameraViewer();p&&p.hide(),this._stwain._ImgManager.getWebViewer().render()}return e.log("camera addon: play."),this._getCameraViewer().play(f,u,h,d)},s.prototype.pause=function(){return e.log("camera addon: pause."),this._getCameraViewer().pause()},s.prototype.resume=function(){return e.log("camera addon: resume."),this._getCameraViewer().resume()},s.prototype.getStatus=function(){return e.log("camera addon: get status."),this._getCameraViewer().getStatus()},s.prototype.capture=function(){var o=this._checkLic(),l=this._stwain,d=l.GetCurrentFileName();return o?e.Promise.reject(o):(""==d&&(d=l._ImgManager.getWebViewer().GetDefaultFileName()),e.log("camera addon: start capture."),this._getCameraViewer().capture().then(function(c){return e.log("camera addon: captured."),new e.Promise(function(u,h){var f=c.imageData||c.blob,g=-1,v=T.DWT.EnumDWT_ImageType;l._bLocalService?(e.isString(f.type)&&("application/pdf"==f.type?g=v.IT_PDF:"image/png"==f.type?g=v.IT_PNG:"image/jpeg"==f.type||"image/jpg"==f.type?g=v.IT_JPG:"image/bmp"==f.type?g=v.IT_BMP:"image/tiff"==f.type||"image/tif"==f.type?g=v.IT_TIF:"image/jp2"==f.type&&(g=v.IT_J2K)),l.__captureImage(f,g,function(){e.log("camera addon: loaded image from capture."),u(f)},function(p,m){e.log("camera addon: failed to load image from capture."),h({code:p,message:m})})):l._innerSendToMobile("LoadImageFromBinary",[f,!0,null,d],0,function(){e.log("camera addon: loaded image from capture."),u(f)},function(p,m){e.log("camera addon: failed to load image from capture."),h({code:p,message:m})})})}))},s.prototype.stop=function(){this._getCameraViewer().hide(),e.log("camera addon: stop.");var o=this._getCameraViewer().stop();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),this._stwain._ImgManager.getWebViewer().render(),o},s.prototype.show=function(){return e.log("camera addon: show."),this._getCameraViewer().show()},s.prototype.hide=function(){return e.log("camera addon: hide."),this._getCameraViewer().hide()},s.prototype.getCurrentResolution=function(){return e.log("camera addon: get current resolution."),this._getCameraViewer().getCurrentResolution()},s.prototype.getCurrentSource=function(){return e.log("camera addon: get current source."),this._getCameraViewer().getCurrentSource()},s.prototype.getResolution=function(){var o=this._checkLic();return o?e.Promise.reject(o):(e.log("camera addon: get resolution."),this._getCameraViewer().getResolution())},s.prototype.setResolution=function(o){var l=this._checkLic();return l?e.Promise.reject(l):(e.log("camera addon: set resolution."),this._getCameraViewer().setResolution(o))},s.prototype.showVideo=function(o,l,d,c){var u=this._checkLic();return u?e.Promise.reject(u):(this._getCameraViewer(),e.log("camera addon: show video."),this._stwain._ImgManager.getWebViewer().showVideo(o,l,d,c))},s.prototype.scanDocument=function(o){var l=this._checkLic();return l?e.Promise.reject(l):(this._getCameraViewer(),e.log("camera addon: scan document."),this._stwain._ImgManager.getWebViewer().showVideoEx(o))},s.prototype.closeVideo=function(){var o=this._checkLic();return o?e.Promise.reject(o):(e.log("camera addon: close video."),this._stwain._ImgManager.getWebViewer().closeVideo())},s.prototype.on=function(o,l){"video-closed"==o||"video-error"==o?e.isFunction(l)?(e.log("camera addon: add event "+o),this._stwain._ImgManager.getWebViewer().camera_on(o,l)):e.Errors.CallbackNotAFunction(this._stwain):e.Errors.EventNotExist(this._stwain)},s.prototype.off=function(o,l){if("video-closed"==o&&"video-error"==o)if(e.isUndefined(l))this._stwain._ImgManager.getWebViewer().off(o);else{if(!e.isFunction(l))return void e.Errors.CallbackNotAFunction(this._stwain);e.log("camera addon: remove event "+o),this._stwain._ImgManager.getWebViewer().off(o,l)}else e.Errors.EventNotExist(this._stwain)},i.__addon=i.__addon||{},i.__addon.Camera=new s})}),function(e){var r=e.DWT||(e.DWT={});r.initQueue=[],r.inited=!1,e.initOrder=e.initOrder||[]}(T=window.Dynamsoft||{Lib:{}}),T=T||{},function(e,r,t){var i=20211014;if(!(r._preDefine_ver&&r._preDefine_ver>=i)){r._preDefine_ver=i;var n=function(d,c){for(var u in c)c.hasOwnProperty(u)&&(d[u]=c[u]);return d},a=function(d){if(null==d||"object"!=typeof d)return d;var c,u,h;if(d instanceof Date)return(c=new Date).setTime(d.getTime()),c;if(d instanceof Array){for(c=[],h=d.length,u=0;u<h;u++)c[u]=a(d[u]);return c}if(d instanceof Object){for(u in c={},d)d.hasOwnProperty(u)&&(c[u]=a(d[u]));return c}return 0};if(r.Lib||(r.Lib={}),n(r.Lib,{win:e,doc:e.document,debug:!1,nil:void 0,mix:n,clone:a,guid:function(d){var h,f,c=[],u="0123456789abcdef";for(h=0;h<8;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),h=0;h<4;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-4"),h=0;h<3;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),f=u.substr(Math.floor(16*Math.random()),1),f=u.substr(3&f|8,1),c.push(f),h=0;h<3;h++)c.push(u.substr(Math.floor(16*Math.random()),1));for(c.push("-"),h=0;h<8;h++)c.push(u.substr(Math.floor(16*Math.random()),1));return c.unshift(d),c.join("")},now:Date.now||function(){return+new Date},noop:function(){}}),Object.keys)r.Lib.keys=Object.keys;else{var s=["propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],o={}.hasOwnProperty;for(var l in{toString:1})s=!1;r.Lib.keys=function(d){var c=[];for(var u in d)o.call(d,u)&&c.push(u);if(s&&d)for(var h=0;u=s[h++];)o.call(d,u)&&c.push(u);return c}}}}("undefined"!=typeof window?window:void 0,T),function(e){var r=!{toString:1}.propertyIsEnumerable("toString"),t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function i(n,a){return{}.hasOwnProperty.call(n,a)}e.keys=Object.keys||function(n){var s,o,a=[];for(s in n)i(n,s)&&a.push(s);if(r)for(o=t.length-1;o>=0;o--)i(n,s=t[o])&&a.push(s);return a}}(T.Lib),function(e,r){var t=20200716;if(!(e._isXXX_ver&&e._isXXX_ver>=t)){e._isXXX_ver=t;var n,a,s=!1,d={}.hasOwnProperty,c={},u="object"==typeof HTMLElement;(0,e.mix)(e,{isDef:function(v){return v!==r},isUndef:h,isUndefined:h,isNull:function(v){return null===v},isNaN:function(v){return isNaN(v)},type:function(v){return null===v||v===r?String(v):c[{}.toString.call(v)]||"object"},isPlainObject:function(v){if(!v||"object"!==e.type(v)||v.nodeType||v.window==v)return s;var p,m;try{if((m=v.constructor)&&!d(v,"constructor")&&!d(m.prototype,"isPrototypeOf"))return s}catch(I){return s}for(p in v);return h(p)||d(v,p)},isDOM:function(v){return u?v instanceof HTMLElement:v&&"object"==typeof v&&(1===v.nodeType||9===v.nodeType)&&"string"==typeof v.nodeName},isDOMInBody:function(v){var p=v;if(e.isDOM(v))for(;!p&&p!=document.body;)p=p.parentNode;else p=0;return!!p}}),g("Function"),e.each=n=function(v,p,m){if(v){var I,y,_,C=0,A=v.length;if(m=m||null,h(A)||e.isFunction(v))for(_=e.keys(v);C<_.length&&p.call(m,v[I=_[C]],I,v)!==s;C++);else for(y=v[0];C<A&&p.call(m,y,C,v)!==s;y=v[++C]);}return v},a=["String","Object","Boolean","Number"],Array.isArray?e.isArray=Array.isArray:a.push("Array"),n(a,g)}function h(v){return v===r}function g(v,p){c["[object "+v+"]"]=p=v.toLowerCase(),e["is"+v]=function(m){return e.type(m)===p}}}(T.Lib),function(e){var i,r=e.mix,t=e.win,n=20211122;e._log_ver&&e.isNumber(e._log_ver)&&e._log_ver>=n||(e._log_ver=n,e.isDef(t.console)&&(!e.isFunction((i=t.console).log)||!e.isFunction(i.error))&&(i=!1),e.getFormatedNow=function(a){var s=a?new Date(a):new Date,o="yyyy-MM-dd HH:mm:ss.SSSZ",l={"M+":s.getUTCMonth()+1,"d+":s.getUTCDate(),"H+":s.getUTCHours(),"h+":s.getUTCHours()%12||12,"m+":s.getUTCMinutes(),"s+":s.getUTCSeconds(),"q+":Math.floor((s.getUTCMonth()+3)/3),"S+":s.getUTCMilliseconds()};for(var d in/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(s.getUTCFullYear()+"").substr(4-RegExp.$1.length))),l)new RegExp("("+d+")").test(o)&&(o=o.replace(RegExp.$1,1==RegExp.$1.length?l[d]:("000"+l[d]).substr(("000"+l[d]).length-RegExp.$1.length)));return o},r(e,{log:function(a){if(e.debug&&i&&e.isFunction(i.log)){var s=e.getFormatedNow((new Date).getTime());i.log(["[",s,"] ",a].join(""))}},error:function(a){if(e.debug&&i&&e.isFunction(i.error)){var s=e.getFormatedNow((new Date).getTime());i.error(["[",s,"] ",a].join(""))}},warn:function(a){if(e.debug&&i&&e.isFunction(i.warn)){var s=e.getFormatedNow((new Date).getTime());i.warn(["[",s,"] ",a].join(""))}},info:function(a){if(e.debug&&i&&e.isFunction(i.info)){var s=e.getFormatedNow((new Date).getTime());i.info(["[",s,"] ",a].join(""))}},getLogger:function(){return i},setLogger:function(a){i=a}}))}(T.Lib),function(e){var r=20200521;e._random_ver&&e._random_ver>=r||(e._random_ver=r,e.getRandom=function(){for(var n,t=e.now()%1e4,i=[],a=0;a<5;a++)n=Math.floor(10*Math.random()),0!=a||0!=n?i.push(n):a=-1;return t<10?i.push("000"):t<100?i.push("00"):t<1e3&&i.push("0"),i.push(t),i.join("")})}(T.Lib),function(e){var r=20201013;e._strUtil_ver&&e.isNumber(e._strUtil_ver)&&e._strUtil_ver>=r||(e._strUtil_ver=r,e.mix(e,{startsWith:function(t,i){return 0===t.lastIndexOf(i,0)},endsWith:function(t,i){var n=t.length-i.length;return n>=0&&t.indexOf(i,n)===n},replaceAll:function(t,i,n){return t.replace(new RegExp(i,"gi"),n)},upperCaseFirst:function(t){return t.charAt(0).toUpperCase()+t.substr(1)},removeNonPrintableChar:function(t){return e.isString(t)?t.replace(/[^\x20-\x7E]/g,""):t},makeArray:function(t){if(null==t)return[];if(e.isArray(t))return t;var i=typeof t.length,n=typeof t;if("number"!==i||t.alert||"string"===n||"function"===n&&(!("item"in t)||"number"!==i))return[t];for(var a=[],s=0,o=t.length;s<o;s++)a[s]=t[s];return a}}))}(T.Lib),function(e){var r=20200521;e._extend_ver&&e.isNumber(e._extend_ver)&&e._extend_ver>=r||(e._extend_ver=r,e.extend=function(t,i){var n=function(){t.apply(this,arguments),i&&i.apply(this,arguments)};return e.each(t.prototype,function(a,s){n.prototype[s]=a}),n.prototype.constructor=n,n})}(T.Lib),function(e){var r=20200521;function t(i){var n=this,a=n.constructor;for(n.__attrs={},n.__attrVals={},n.userConfig=i;a;)n.addAttrs(a.ATTRS),a=a.superclass?a.superclass.constructor:null;e.mix(n.__attrs,i)}e._attribute_ver&&e.isNumber(e._attribute_ver)&&e._attribute_ver>=r||(e._attribute_ver=r,e.mix(t.prototype,{get:function(i){return i in this.__attrs?this.__attrs[i]:""},set:function(i,n){i in this.__attrs&&(this.__attrs[i]=n)},addAttrs:function(i){e.mix(this.__attrs,i)}}),t.extend=function(i){var a,s;return(i=i||{}).constructor&&(a=i.constructor),s=e.extend(this,a),e.mix(s,i),s},e.Attributes=t)}(T.Lib),function(e){var r=20200521;if(!(e._json_ver&&e._json_ver>=r)){e._json_ver=r;var t=e.win.JSON;if(t&&t.parse&&t.stringify)return e.parse=t.parse,void(e.stringify=t.stringify);var n,f,g,v,p,i=(g={},v=/["\b\f\n\r\t\x00-\x1f]/g,p=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g,e.each(f={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},function(m,I){g[m]=I}),g["\\/"]="/",g["\\\\"]="\\",{quote:function(m){return'"'+m.replace(v,function(I){var y;return(y=f[I])||(y="\\u"+("0000"+I.charCodeAt(0).toString(16)).slice(-4)),y})+'"'},unQuote:function(m){return m.slice(1,m.length-1).replace(p,function(I){var y;return(y=g[I])||(y=String.fromCharCode(parseInt(I.slice(2),16))),y})}});n=function(f,g,v,p,m,I,y){var _=g[f];switch(_&&"object"==typeof _&&("function"==typeof _.toJSON?_=_.toJSON(f):_ instanceof Date?_=isFinite(_.valueOf())?_.getUTCFullYear()+"-"+a(_.getUTCMonth()+1)+"-"+a(_.getUTCDate())+"T"+a(_.getUTCHours())+":"+a(_.getUTCMinutes())+":"+a(_.getUTCSeconds())+"Z":null:(_ instanceof String||_ instanceof Number||_ instanceof Boolean)&&(_=_.valueOf())),void 0!==v&&(_=v.call(g,f,_)),typeof _){case"number":return isFinite(_)?String(_):"null";case"string":return i.quote(_);case"boolean":return String(_);case"object":return _?e.isArray(_)?function(f,g,v,p,m,I){var y=I;I+=p;for(var _=[],C=f.length,A=0;A<C;){var M=n(String(A),f,g,v,p,m,I);_[_.length]=void 0===M?"null":M,++A}return _.length?p?"[\n"+I+_.join("\n,"+I)+"\n"+y+"]":"["+_.join(",")+"]":"[]"}(_,v,p,m,I,y):function(f,g,v,p,m,I){var y=I;I+=p;var _,C,M,A=0,E=[];for(C=(_=void 0!==v?v:e.keys(f)).length;A<C;A++){var R=n(M=_[A],f,g,v,p,m,I);if(void 0!==R){var x=i.quote(M);x+=":",p&&(x+=" "),E[E.length]=x+=R}}return E.length?p?"{\n"+I+E.join(",\n"+I)+"\n"+y+"}":"{"+E.join(",")+"}":"{}"}(_,v,p,m,I,y):"null"}},e.stringify=function(f,g,v){var m,I,p="";return g&&("function"==typeof g?I=g:e.isArray(g)&&(m=g)),"number"==typeof v?(v=Math.min(10,v),p=new Array(v+1).join(" ")):"string"==typeof v&&(p=v.slice(0,10)),n("",{"":f},I,m,p,[],"")};var c,l={};l.yy={unQuote:i.unQuote},(c=function(f){var g=this;g.rules=[],e.mix(g,f),g.resetInput(g.input)}).prototype={constructor:function(f){var g=this;g.rules=[],e.mix(g,f),g.resetInput(g.input)},resetInput:function(f){e.mix(this,{input:f,matched:"",stateStack:[c.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var f=this,g=f.stateStack[f.stateStack.length-1],v=[];return g=f.mapState(g),e.each(f.rules,function(p){var m=p.state||p[3];m?e.inArray(g,m)&&v.push(p):g==c.STATIC.INITIAL&&v.push(p)}),v},pushState:function(f){this.stateStack.push(f)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var f=this,g=c.STATIC.DEBUG_CONTEXT_LIMIT,v=f.matched,p=f.match,m=f.input,I=((v=v.slice(0,v.length-p.length)).length>g?"...":"")+v.slice(-g).replace(/\n/," "),y=p+m;return I+(y=y.slice(0,g)+(y.length>g?"...":""))+"\n"+new Array(I.length+1).join("-")+"^"},mapSymbol:function(f){var v=this.symbolMap;return v?v[f]||(v[f]=++this.symbolId):f},mapReverseSymbol:function(f){var g=this,v=g.symbolMap,m=g.reverseSymbolMap;return!m&&v&&(m=g.reverseSymbolMap={},e.each(v,function(I,y){m[I]=y})),m?m[f]:f},mapState:function(f){var v=this.stateMap;return v?v[f]||(v[f]=++this.stateId):f},lex:function(){var v,p,m,I,y,f=this,g=f.input,_=f.getCurrentRules();if(f.match=f.text="",!g)return f.mapSymbol(c.STATIC.END_TAG);for(v=0;v<_.length;v++){var E,A=(p=_[v]).token||p[0],M=p.action||p[2]||void 0;if(m=g.match(p.regexp||p[1]))return(y=m[0].match(/\n.*/g))&&(f.lineNumber+=y.length),e.mix(f,{firstLine:f.lastLine,lastLine:f.lineNumber+1,firstColumn:f.lastColumn,lastColumn:y?y[y.length-1].length-1:f.lastColumn+m[0].length}),E=f.match=m[0],f.matches=m,f.text=E,f.matched+=E,I=void 0===(I=M&&M.call(f))?A:f.mapSymbol(I),g=g.slice(E.length),f.input=g,I||f.lex()}e.error("lex error at line "+f.lineNumber+":\n"+f.showDebugInfo())}},c.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var u=new c({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});l.lexer=u,u.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},l.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var f={};return f[this.$1.key]=this.$1.value,f}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],l.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},l.parse=function(g){var m,I,y,v=this,p=v.lexer,_=v.table,C=_.gotos,A=_.action,M=v.productions,E=[null],R=[0];for(p.resetInput(g);;){if(m=R[R.length-1],I||(I=p.lex()),!I)return e.log("it is not a valid input: "+g,"error"),!1;if(!(y=A[m]&&A[m][I])){var P,x=[];return A[m]&&e.each(A[m],function(ue,X){x.push(v.lexer.mapReverseSymbol(X))}),P="Syntax error at line "+p.lineNumber+":\n"+p.showDebugInfo()+"\nexpect "+x.join(", "),e.log(P),!1}switch(y[0]){case 1:R.push(I),E.push(p.text),R.push(y[2]),I=null;break;case 2:var Z,F=M[y[1]],k=F.symbol||F[0],w=F.action||F[2],L=(F.rhs||F[1]).length,U=0,ne=E[E.length-L];for(v.$$=ne,Z=void 0;U<L;U++)v["$"+(L-U)]=E[E.length-1-U];w&&(Z=w.call(v)),ne=void 0!==Z?Z:v.$$,L&&(R=R.slice(0,-1*L*2),E=E.slice(0,-1*L)),R.push(k),E.push(ne),R.push(C[R[R.length-2]][R[R.length-1]]);break;case 0:return ne}}},e.parse=function(f,g){var v=l.parse(String(f));return g?h({"":v},"",g):v}}function a(f){return f<10?"0"+f:f}function h(f,g,v){var m,I,y,p=f[g];if("object"==typeof p)if(e.isArray(p)){m=0,I=p.length;for(var _=[];m<I;)void 0!==(y=h(p,String(m),v))&&(_[_.length]=y);p=_}else{var C=e.keys(p);for(m=0,I=C.length;m<I;m++){var A=C[m];void 0===(y=h(p,A,v))?delete p[A]:p[A]=y}}return v.call(f,g,p)}}(T.Lib),function(e){var r=20210305;if(!(e._array_ver&&e._array_ver>=r)){e._array_ver=r;var t=Array.prototype,i=t.indexOf,n=t.filter,a=t.forEach;e.isFunction(i)||(i=function(s,o){var l;if(null==this)return-1;var d=Object(this),c=d.length>>>0;if(0===c)return-1;var u=+o||0;if(Math.abs(u)===1/0&&(u=0),u>=c)return-1;for(l=Math.max(u>=0?u:c-Math.abs(u),0);l<c;){if(l in d&&d[l]===s)return l;l++}return-1}),e.isFunction(a)||(Array.prototype.forEach=function(o,l){var d,c;if(null!=this&&e.isFunction(o)){var u=Object(this),h=u.length>>>0;for(arguments.length>1&&(d=l),c=0;c<h;)c in u&&o.call(d,u[c],c,u),c++}}),e.mix(e,{filter:n?function(s,o,l){return n.call(s,o,l||this)}:function(s,o,l){var d=[];return e.each(s,function(c,u,h){o.call(l||this,c,u,h)&&d.push(c)}),d},indexOf:function(s,o){return i.call(o,s)},uniq:function(s){for(var o=[],l=s.length,d=0;d<l;d++){for(var c=d+1;c<l;c++)s[d]===s[c]&&(c=++d);o.push(s[d])}return o}})}}(T.Lib),function(e){var r=20200521;if(!(e._function_ver&&e._function_ver>=r)){e._function_ver=r;var t=Array.prototype,i=Function.prototype;e.isFunction(i.bind)||(i.bind=function(n){var a=this;if(1<arguments.length){var s=t.slice.call(arguments,1);return function(){return a.apply(n,arguments.length?s.concat(t.slice.call(arguments)):s)}}return function(){return arguments.length?a.apply(n,arguments):a.call(n)}})}}(T.Lib),function(e){var r=20200521;if(!(e._string_ver&&e._string_ver>=r)){e._string_ver=r;var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=String.prototype,a=i.trim;a||(a=i.trim=function(){return this.replace(t,"")}),e.trim=function(s){return null==s?"":a.call(s)}}}(T.Lib),function(e){var r=20211022;e._navInfobase_ver&&e.isNumber(e._navInfobase_ver)&&e._navInfobase_ver>=r||(e._navInfobase_ver=r,e.getNavInfoByUserAgent=function(t,i){var c,a=!1,s=!0,o=e.win,l=e.doc,d=l&&l.documentElement,u=t.toLowerCase(),h=i.toLowerCase(),f=/cros/.test(u),g=/harmonyos/g.test(u),v=/android/g.test(u),p=/iphone/g.test(u)||/iphone/g.test(h),m=/macintosh/.test(u),I=/ipad/g.test(u)||(m||"macintel"==h)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,y=/ucweb|ucbrowser/g.test(u),_=!y&&/nexus/g.test(u)&&/version\/[\d.]+.*safari\//g.test(u),C=/playbook/g.test(u),A=/hp-tablet/g.test(u),M=/blackberry|bb10/g.test(u),E=/symbian/g.test(u),R=/windows phone/g.test(u),x=/mobile/g.test(u),P=/arm64|aarch64/g.test(u),F=/mips64/g.test(u),k=/huaweibrowser/g.test(u),w=P||F;"linux"==h&&u.indexOf("windows nt")>=0&&(h="harmonyos",g=!0);var S=C||I||A,L=p||_||M||E||R||v||g||x,U=!L&&!S&&!f,Z=U&&/win32|win64|windows/.test(h),ne=Z&&/win64|x64/.test(u),oe=U&&/mac68k|macppc|macintosh|macintel/.test(u),ue=U&&/linux/.test(h),X="win64"==h||/wow64|x86_64|win64|x64/.test(u)||w,pe=/wow64/g.test(u),B=u.indexOf("msie "),K=u.indexOf("trident"),G=u.indexOf("rv:"),ee=a,ie=/opera|opr/g.test(u),be=/360se/g.test(u),Te=/maxthon/g.test(u),Ge=/tencenttraveler|qqbrowser/g.test(u),je=/the world/g.test(u),he=/metasr/g.test(u),ae=/avant/g.test(u),V=/firefox|fxios/g.test(u),Q=!V&&/edge\/|edga\/|edgios\/|edg\//g.test(u),me=!(M||C||y||ie||Q)&&/chrome|crios/g.test(u),H=Z&&!V&&!Q&&!me&&(-1!=B||-1!=K||-1!=G),j="",q=0,re=/gecko/g.test(u),de=L||S,le="",we=a,Ae=o.JSON;if((oe||p||I||Z||M||C||_)&&!y&&!ie&&!Q&&!H&&!V&&(c=u.match(/version\/([\d.]+).*safari\//))&&(M||C||_||(ee=s,me=a),le=c[1]),Q){var Se=u.indexOf("edge/");Se>-1?Se+=5:(Se=u.indexOf("edg/"))>-1?Se+=4:(Se=u.indexOf("edga/"))>-1?Se+=5:(Se=u.indexOf("edgios/"))>-1&&(Se+=7),Se>-1&&(c=(le=u.slice(Se)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s}else if(V)if(de=s,(c=u.indexOf("firefox/"))>-1){var ye=(c=u.slice(c+8)).indexOf(" ");ye>-1&&(c=c.slice(0,ye)),le=c,(ye=c.indexOf("."))>-1&&(c=le.slice(0,ye)),c<27&&(de=a)}else(p||I)&&(c=u.indexOf("fxios/"))>-1&&(le=c=(c=u.slice(c+6)).slice(0,c.indexOf(" ")));else if(H)-1!=B?j=c=(c=u.slice(B+5)).slice(0,c.indexOf(";")):-1!=G?j=c=(c=(c=u.slice(G+3)).slice(0,c.indexOf(";"))).slice(0,c.indexOf(")")):-1!=K&&(j=c=(c=u.slice(K+7)).slice(0,c.indexOf(";"))),(""===j||j>=10)&&(de=s),le=c;else if(ee)de=s,(c=le.indexOf("."))>-1&&(c=le.slice(0,c))<7&&(de=a);else if(y)(c=u.indexOf("ucweb"))>-1?le=u.slice(c+5):(c=u.indexOf("ucbrowser/"))>-1&&(c=(le=u.slice(c+10)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s;else if(ie)(c=u.indexOf("version/"))>-1?le=u.slice(c+8):(c=u.indexOf("opr/"))>-1&&(le=u.slice(c+4)),de=s;else if(E)(c=u.indexOf("browserng/"))>-1&&(le=u.slice(c+10)),de=s;else if(R)(c=u.indexOf("iemobile/"))>-1&&(le=u.slice(c+9)),de=s;else if(me){var Fe=u.indexOf("chrome/");Fe>-1?(c=(le=u.slice(Fe+7)).indexOf(" "))>-1&&(le=le.slice(0,c)):(Fe=u.indexOf("crios/"))>-1&&(c=(le=u.slice(Fe+6)).indexOf(" "))>-1&&(le=le.slice(0,c)),de=s,(c=le.indexOf("."))>-1&&(c=le.slice(0,c))<27&&(de=a)}return(Q||H)&&(l.documentMode?q=l.documentMode:(q=5,l.compatMode&&"CSS1Compat"==l.compatMode&&(q=7))),d&&d.querySelector&&(!H||H&&le>8)&&(we=s),H&&le<9&&(Ae=null),{bWin:Z,bMac:oe,bLinux:ue,bMobile:L,bPad:S,bChromeOS:f,bHarmonyOS:g,bArm64:P,bMips64:F,bEmbed:w,bAndroid:v,biPhone:p,biPad:I,bWin64:ne,bWOW64:pe,bOSx64:X,bIE:H,bEdge:Q,bChrome:me,bFirefox:V,bSafari:ee,bOpera:ie,bNexus:_,bUC:y,b360SE:be,bMaxthon:Te,bTencentTraveler:Ge,bTheWorld:je,bMetaSr:he,bAvant:ae,bHuaWeiBrowser:k,bGecko:re,bHTML5Edition:de,strBrowserVersion:le,IEMode:q,bQuerySelectorSupported:we,nativeJson:Ae,scrollBarWidth:a}})}(T.Lib),function(e){var r=20210305;if(!(e._defineProperty_ver&&e._defineProperty_ver>=r)){e._defineProperty_ver=r;var t=!1;if(!("userAgentData"in navigator)){var n,i=navigator;n=e.getNavInfoByUserAgent(i.userAgent,i.platform),T.navInfo=n,n.bIE&&(t=8==n.strBrowserVersion)}t?Object.defineProperty=function(a,s,o){a[s]=o.value||o.get&&o.get()}:Object.defineProperty||(Object.defineProperty=function(a,s,o){var l=a[s],d=function(){return o.get.apply(a,[l])},c=function(h){return l=o.set.apply(a,[h])};if(a.__defineGetter__)a.__defineGetter__(s,d),a.__defineSetter__(s,c);else{var u=function(h){event.propertyName==s&&(a.detachEvent("onpropertychange",u),c(a[s]),a[s]=d,a[s].toString=d,a.attachEvent("onpropertychange",u))};a[s]=d,a[s].toString=d,a.attachEvent("onpropertychange",u)}}),Object.create||(Object.create=function(a,s){if("object"!=typeof a&&"function"!=typeof a)return{};if(null===a)return{};if(void 0!==s)return{};function o(){}return o.prototype=a,new o})}}(T.Lib),function(e,r){var f,g,t="",a=e.getLogger(),s=e.isDef,o=e.each,u={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},h={},v=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function p(_){var C=typeof _;return null==_||"object"!==C&&"function"!==C}function y(_){return encodeURIComponent(String(_))}o(u,function(_,C){h[_]=C}),e.mix(e,{urlEncode:y,urlDecode:function(_){return decodeURIComponent(_.replace(/\+/g," "))},fromUnicode:function(_){return _.replace(/\\u([a-f\d]{4})/gi,function(C,A){return String.fromCharCode(parseInt(A,16))})},escapeHtml:function(_){return(_+"").replace(function(){if(f)return f;var _=t;return o(u,function(C){_+=C+"|"}),_=_.slice(0,-1),f=new RegExp(_,"g")}(),function(C){return h[C]})},escapeRegExp:function(_){return _.replace(v,"\\$&")},unEscapeHtml:function(_){return _.replace(function(){if(g)return g;var _=t;return o(h,function(C){_+=C+"|"}),_+="&#(\\d{1,5});",g=new RegExp(_,"g")}(),function(C,A){return u[C]||String.fromCharCode(+A)})},param:function(_,C,A,M){C=C||"&",A=A||"=",e.isUndef(M)&&(M=!0);var E=[];return o(_,function(R,x){var P=y(x);p(R)?(E.push(P),s(R)&&E.push(A,y(R+t)),E.push(C)):e.isArray(R)&&R.length&&o(R,function(F){p(F)&&(E.push(P,M?y("[]"):t),s(F)&&E.push(A,y(F+t)),E.push(C))})}),E.pop(),E.join(t)},unparam:function(_,C,A){if(!e.isString(_)||!(_=e.trim(_)))return{};A=A||"=";for(var E,P,F,M={},R=e.urlDecode,x=_.split(C=C||"&"),k=0,w=x.length;k<w;++k){if(-1===(E=e.indexOf(A,x[k])))P=R(x[k]),F=void 0;else{P=R(x[k].substring(0,E)),F=x[k].substring(E+1);try{F=R(F)}catch(S){a.error("decodeURIComponent error : "+F),a.error(S)}e.endsWith(P,"[]")&&(P=P.substring(0,P.length-2))}P in M?e.isArray(M[P])?M[P].push(F):M[P]=[M[P],F]:M[P]=F}return M}})}(T.Lib),function(e){var r=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function t(n,a){for(var s=[],o=0;o<n.length;o++){var l=n[o];!l||"."===l||(".."===l?s.length&&".."!==s[s.length-1]?s.pop():a&&s.push(".."):s.push(l))}return s}var i=e.Path={resolve:function(){var s,l,n="",o=arguments,d=0;for(s=o.length-1;s>=0&&!d;s--)e.isString(l=o[s])&&l&&(n=l+"/"+n,d="/"===l.charAt(0));return(d?"/":"")+t(e.filter(n.split("/"),function(c){return!!c}),!d).join("/")||"."},normalize:function(n){var a="/"===n.charAt(0),s="/"===n.slice(-1);return!(n=t(e.filter(n.split("/"),function(o){return!!o}),!a).join("/"))&&!a&&(n="."),n&&s&&(n+="/"),(a?"/":"")+n},join:function(){var n=e.makeArray(arguments);return i.normalize(e.filter(n,function(a){return a&&e.isString(a)}).join("/"))},relative:function(n,a){n=i.normalize(n),a=i.normalize(a);var l,d,s=e.filter(n.split("/"),function(h){return!!h}),o=[],c=e.filter(a.split("/"),function(h){return!!h}),u=Math.min(s.length,c.length);for(l=0;l<u&&s[l]===c[l];l++);for(d=l;l<s.length;)o.push(".."),l++;return(o=o.concat(c.slice(d))).join("/")},basename:function(n,a){var o;return o=(n.match(r)||[])[3]||"",a&&o&&o.slice(-1*a.length)===a&&(o=o.slice(0,-1*a.length)),o},dirname:function(n){var a=n.match(r)||[],s=a[1]||"",o=a[2]||"";return s||o?(o&&(o=o.substring(0,o.length-1)),s+o):"."},extname:function(n){return(n.match(r)||[])[4]||""}}}(T.Lib),function(e,r){function t(n){n._queryMap||(n._queryMap=e.unparam(n._query))}function i(n){this._query=n||""}i.prototype={constructor:i,clone:function(){return new i(this.toString())},reset:function(n){var a=this;return a._query=n||"",a._queryMap=null,a},count:function(){var a=0;return t(this),e.each(this._queryMap,function(s){e.isArray(s)?a+=s.length:a++}),a},has:function(n){var s;return t(this),s=this._queryMap,n?n in s:!e.isEmptyObject(s)},get:function(n){var s;return t(this),s=this._queryMap,n?s[n]:s},keys:function(){return t(this),e.keys(this._queryMap)},set:function(n,a){var o,s=this;return t(s),o=s._queryMap,e.isString(n)?s._queryMap[n]=a:(n instanceof i&&(n=n.get()),e.each(n,function(l,d){o[d]=l})),s},remove:function(n){var a=this;return t(a),n?delete a._queryMap[n]:a._queryMap={},a},add:function(n,a){var o,l,s=this;return e.isString(n)?(t(s),l=e.isUndef(l=(o=s._queryMap)[n])?a:[].concat(l).concat(a),o[n]=l):(n instanceof i&&(n=n.get()),e.each(n,function(d,c){s.add(c,d)})),s},toString:function(n){return t(this),e.param(this._queryMap,r,r,n)}},e.uriQuery=i}(T.Lib),function(e){var r=e.uriQuery,t=e.each,i=e.Path,n=e.getLogger(),a=/[#\/\?@]/g,s=/[#\?]/g,o=/[#@]/g,l=/#/g,d={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},c=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function h(v,p){return v.toLowerCase()===p.toLowerCase()}function f(v,p){return encodeURI(v).replace(p,function(m){return"%"+function(v){return 1===v.length?"0"+v:v}(m.charCodeAt(0).toString(16))})}function g(v){if(v instanceof g)return v.clone();var p,m=this;return e.mix(m,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),p=g.getComponents(v),t(p,function(I,y){if(I=I||"","query"===y)m.query=new r(I);else{try{I=e.urlDecode(I)}catch(_){n.error(_+"urlDecode error : "+I)}m[y]=I}}),m}g.prototype={constructor:g,clone:function(){var v=new g,p=this;return t(d,function(m,I){v[I]=p[I]}),v.query=v.query.clone(),v},resolve:function(v){e.isString(v)&&(v=new g(v));var I,m=0,_=this.clone();return t(["scheme","userInfo","hostname","port","path","query","fragment"],function(C){if("path"===C)if(m)_[C]=v[C];else{var A=v.path;A&&(m=1,e.startsWith(A,"/")||(_.hostname&&!_.path?A="/"+A:_.path&&-1!==(I=_.path.lastIndexOf("/"))&&(A=_.path.slice(0,I+1)+A)),_.path=i.normalize(A))}else"query"===C?(m||v.query.toString())&&(_.query=v.query.clone(),m=1):(m||v[C])&&(_[C]=v[C],m=1)}),_},getScheme:function(){return this.scheme},setScheme:function(v){return this.scheme=v,this},getHostname:function(){return this.hostname},setHostname:function(v){return this.hostname=v,this},setUserInfo:function(v){return this.userInfo=v,this},getUserInfo:function(){return this.userInfo},setPort:function(v){return this.port=v,this},getPort:function(){return this.port},setPath:function(v){return this.path=v,this},getPath:function(){return this.path},setQuery:function(v){return e.isString(v)&&(e.startsWith(v,"?")&&(v=v.slice(1)),v=new r(f(v,o))),this.query=v,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(v){return e.startsWith(v,"#")&&(v=v.slice(1)),this.fragment=v,this},isSameOriginAs:function(v){var p=this;return h(p.hostname,v.hostname)&&h(p.scheme,v.scheme)&&h(p.port,v.port)},toString:function(v){var I,y,_,C,A,M,E,p=[],m=this;return(I=m.scheme)&&(p.push(f(I,a)),p.push(":")),(y=m.hostname)&&(p.push("//"),(E=m.userInfo)&&(p.push(f(E,a)),p.push("@")),p.push(encodeURIComponent(y)),(C=m.port)&&(p.push(":"),p.push(C))),(_=m.path)&&(y&&!e.startsWith(_,"/")&&(_="/"+_),_=i.normalize(_),p.push(f(_,s))),(M=m.query.toString.call(m.query,v))&&(p.push("?"),p.push(M)),(A=m.fragment)&&(p.push("#"),p.push(f(A,l))),p.join("")}},g.getComponents=function(v){var m=(v=v||"").match(c)||[],I={};return t(d,function(y,_){I[_]=m[y]}),I},e.Uri=g}(T.Lib),function(e,r){var t=e.Lib,i=t.win,n=20200622;if(!(t._promise_ver&&t.isNumber(t._promise_ver)&&t._promise_ver>=n)){if(t._promise_ver=n,t.isFunction(i.__zone_symbol__Promise)&&(t.nativePromise=i.__zone_symbol__Promise),Bt&&Bt.Promise)return t.Promise=Bt.Promise,void(t.nativePromise||(t.nativePromise=t.Promise));if(i&&i.Promise)return t.Promise=i.Promise,void(t.nativePromise||(t.nativePromise=t.Promise));i.Map||(i.Map=function(){this.keys=new Array,this.data=new Object,this.set=function(a,s){null==this.data[a]&&-1==this.keys.indexOf(a)&&this.keys.push(a),this.data[a]=s},this.get=function(a){return this.data[a]}}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof global?s=global:void 0!==Bt&&(s=Bt),s.Promise=a()}}(function(){return function l(d,c,u){function h(v,p){if(!c[v]){if(!d[v]){var m="function"==typeof _dereq_&&_dereq_;if(!p&&m)return m(v,!0);if(f)return f(v,!0);var I=new Error("Cannot find module '"+v+"'");throw I.code="MODULE_NOT_FOUND",I}var y=c[v]={exports:{}};d[v][0].call(y.exports,function(_){return h(d[v][1][_]||_)},y,y.exports,l,d,c,u)}return c[v].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<u.length;g++)h(u[g]);return h}({1:[function(l,d,c){d.exports=function(u){function h(g){var v=new f(g),p=v.promise();return v.setHowMany(1),v.setUnwrap(),v.init(),p}var f=u._SomePromiseArray;u.any=function(g){return h(g)},u.prototype.any=function(){return h(this)}}},{}],2:[function(l,d,c){function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new y(16),this._normalQueue=new y(16),this._haveDrainedQueues=!1;var _=this;this.drainQueues=function(){_._drainQueues()},this._schedule=I}function v(_){for(;_.length()>0;)p(_)}function p(_){var C=_.shift();if("function"!=typeof C)C._settlePromises();else{var A=_.shift(),M=_.shift();C.call(A,M)}}var m;try{throw new Error}catch(_){m=_}var I=l("./schedule"),y=l("./queue");u.prototype.setScheduler=function(_){var C=this._schedule;return this._schedule=_,this._customScheduler=!0,C},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(_,C){C?(process.stderr.write("Fatal "+(_ instanceof Error?_.stack:_)+"\n"),process.exit(2)):this.throwLater(_)},u.prototype.throwLater=function(_,C){if(1===arguments.length&&(C=_,_=function(){throw C}),"undefined"!=typeof setTimeout)setTimeout(function(){_(C)},0);else try{this._schedule(function(){_(C)})}catch(A){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.prototype.invokeLater=function(_,C,A){this._lateQueue.push(_,C,A),this._queueTick()},u.prototype.invoke=function(_,C,A){this._normalQueue.push(_,C,A),this._queueTick()},u.prototype.settlePromises=function(_){this._normalQueue._pushOne(_),this._queueTick()},u.prototype._drainQueues=function(){v(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,v(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},d.exports=u,d.exports.firstLineError=m},{"./queue":26,"./schedule":29}],3:[function(l,d,c){d.exports=function(u,h,f,g){var v=!1,p=function(_,C){this._reject(C)},m=function(_,C){C.promiseRejectionQueued=!0,C.bindingPromise._then(p,p,null,this,_)},I=function(_,C){0==(50397184&this._bitField)&&this._resolveCallback(C.target)},y=function(_,C){C.promiseRejectionQueued||this._reject(_)};u.prototype.bind=function(_){v||(v=!0,u.prototype._propagateFrom=g.propagateFromFunction(),u.prototype._boundValue=g.boundValueFunction());var C=f(_),A=new u(h);A._propagateFrom(this,1);var M=this._target();if(A._setBoundTo(C),C instanceof u){var E={promiseRejectionQueued:!1,promise:A,target:M,bindingPromise:C};M._then(h,m,void 0,A,E),C._then(I,y,void 0,A,E),A._setOnCancel(C)}else A._resolveCallback(M);return A},u.prototype._setBoundTo=function(_){void 0!==_?(this._bitField=2097152|this._bitField,this._boundTo=_):this._bitField=-2097153&this._bitField},u.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},u.bind=function(_,C){return u.resolve(C).bind(_)}}},{}],4:[function(l,d,c){var h;"undefined"!=typeof Promise&&(h=Promise);var f=l("./promise")();f.noConflict=function(){try{Promise===f&&(Promise=h)}catch(g){}return f},d.exports=f},{"./promise":22}],5:[function(l,d,c){var u=Object.create;if(u){var h=u(null),f=u(null);h[" size"]=f[" size"]=0}d.exports=function(g){function p(A){return function(A,M){var E;if(null!=A&&(E=A[M]),"function"!=typeof E){var R="Object "+_.classString(A)+" has no method '"+_.toString(M)+"'";throw new g.TypeError(R)}return E}(A,this.pop()).apply(A,this)}function m(A){return A[this]}function I(A){var M=+this;return 0>M&&(M=Math.max(0,M+A.length)),A[M]}var _=l("./util"),C=_.canEvaluate;g.prototype.call=function(A){var M=[].slice.call(arguments,1);return M.push(A),this._then(p,void 0,void 0,M,void 0)},g.prototype.get=function(A){var M;if("number"==typeof A)M=I;else if(C){var R=(void 0)(A);M=null!==R?R:m}else M=m;return this._then(M,void 0,void 0,A,void 0)}}},{"./util":36}],6:[function(l,d,c){d.exports=function(u,h,f,g){var v=l("./util"),p=v.tryCatch,m=v.errorObj,I=u._async;u.prototype.break=u.prototype.cancel=function(){if(!g.cancellation())return this._warn("cancellation is disabled");for(var y=this,_=y;y._isCancellable();){if(!y._cancelBy(_)){_._isFollowing()?_._followee().cancel():_._cancelBranched();break}var C=y._cancellationParent;if(null==C||!C._isCancellable()){y._isFollowing()?y._followee().cancel():y._cancelBranched();break}y._isFollowing()&&y._followee().cancel(),y._setWillBeCancelled(),_=y,y=C}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(y){return y===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),I.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(y,_){if(v.isArray(y))for(var C=0;C<y.length;++C)this._doInvokeOnCancel(y[C],_);else if(void 0!==y)if("function"==typeof y){if(!_){var A=p(y).call(this._boundValue());A===m&&(this._attachExtraTrace(A.e),I.throwLater(A.e))}}else y._resultCancelled(this)},u.prototype._invokeOnCancel=function(){var y=this._onCancel();this._unsetOnCancel(),I.invoke(this._doInvokeOnCancel,this,y)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(l,d,c){d.exports=function(u){var f=l("./util"),g=l("./es5").keys,v=f.tryCatch,p=f.errorObj;return function(m,I,y){return function(_){var C=y._boundValue();e:for(var A=0;A<m.length;++A){var M=m[A];if(M===Error||null!=M&&M.prototype instanceof Error){if(_ instanceof M)return v(I).call(C,_)}else if("function"==typeof M){var E=v(M).call(C,_);if(E===p)return E;if(E)return v(I).call(C,_)}else if(f.isObject(_)){for(var R=g(M),x=0;x<R.length;++x){var P=R[x];if(M[P]!=_[P])continue e}return v(I).call(C,_)}}return u}}}},{"./es5":13,"./util":36}],8:[function(l,d,c){d.exports=function(u){function h(){this._trace=new h.CapturedTrace(g())}function g(){var m=p.length-1;return m>=0?p[m]:void 0}var v=!1,p=[];return u.prototype._promiseCreated=function(){},u.prototype._pushContext=function(){},u.prototype._popContext=function(){return null},u._peekContext=u.prototype._peekContext=function(){},h.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,p.push(this._trace))},h.prototype._popContext=function(){if(void 0!==this._trace){var m=p.pop(),I=m._promiseCreated;return m._promiseCreated=null,I}return null},h.CapturedTrace=null,h.create=function(){return v?new h:void 0},h.deactivateLongStackTraces=function(){},h.activateLongStackTraces=function(){var m=u.prototype._pushContext,I=u.prototype._popContext,y=u._peekContext,_=u.prototype._peekContext,C=u.prototype._promiseCreated;h.deactivateLongStackTraces=function(){u.prototype._pushContext=m,u.prototype._popContext=I,u._peekContext=y,u.prototype._peekContext=_,u.prototype._promiseCreated=C,v=!1},v=!0,u.prototype._pushContext=h.prototype._pushContext,u.prototype._popContext=h.prototype._popContext,u._peekContext=u.prototype._peekContext=g,u.prototype._promiseCreated=function(){var A=this._peekContext();A&&null==A._promiseCreated&&(A._promiseCreated=this)}},h}},{}],9:[function(l,d,c){d.exports=function(u,h,f,g){function v(ge,Ee){return{promise:Ee}}function p(){return!1}function m(ge,Ee,Ue){var Be=this;try{ge(Ee,Ue,function(Qe){if("function"!=typeof Qe)throw new TypeError("onCancel must be a function, got: "+V.toString(Qe));Be._attachCancellationCallback(Qe)})}catch(Qe){return Qe}}function I(ge){if(!this._isCancellable())return this;var Ee=this._onCancel();void 0!==Ee?V.isArray(Ee)?Ee.push(ge):this._setOnCancel([Ee,ge]):this._setOnCancel(ge)}function y(){return this._onCancelField}function _(ge){this._onCancelField=ge}function C(){this._cancellationParent=void 0,this._onCancelField=void 0}function A(ge,Ee){if(0!=(1&Ee)){this._cancellationParent=ge;var Ue=ge._branchesRemainingToCancel;void 0===Ue&&(Ue=0),ge._branchesRemainingToCancel=Ue+1}0!=(2&Ee)&&ge._isBound()&&this._setBoundTo(ge._boundTo)}function E(){var ge=this._boundTo;return void 0!==ge&&ge instanceof u?ge.isFulfilled()?ge.value():void 0:ge}function R(){this._trace=new ie(this._peekContext())}function x(ge,Ee){if(me(ge)){var Ue=this._trace;if(void 0!==Ue&&Ee&&(Ue=Ue._parent),void 0!==Ue)Ue.attachExtraTrace(ge);else if(!ge.__stackCleaned__){var Be=oe(ge);V.notEnumerableProp(ge,"stack",Be.message+"\n"+Be.stack.join("\n")),V.notEnumerableProp(ge,"__stackCleaned__",!0)}}}function P(){this._trace=void 0}function w(ge,Ee,Ue){if(ze.warnings){var Be,Qe=new ae(ge);if(Ee)Ue._attachExtraTrace(Qe);else if(ze.longStackTraces&&(Be=u._peekContext()))Be.attachExtraTrace(Qe);else{var Ze=oe(Qe);Qe.stack=Ze.message+"\n"+Ze.stack.join("\n")}fe("warning",Qe)||ue(Qe,"",!0)}}function Z(ge){for(var Ee=[],Ue=0;Ue<ge.length;++Ue){var Be=ge[Ue],Qe="    (No stack trace)"===Be||re.test(Be),Ze=Qe&&Oe(Be);Qe&&!Ze&&(le&&" "!==Be.charAt(0)&&(Be="    "+Be),Ee.push(Be))}return Ee}function oe(ge){var Ee=ge.stack,Ue=ge.toString();return Ee="string"==typeof Ee&&Ee.length>0?function(ge){for(var Ee=ge.stack.replace(/\s+$/g,"").split("\n"),Ue=0;Ue<Ee.length;++Ue){var Be=Ee[Ue];if("    (No stack trace)"===Be||re.test(Be))break}return Ue>0&&"SyntaxError"!=ge.name&&(Ee=Ee.slice(Ue)),Ee}(ge):["    (No stack trace)"],{message:Ue,stack:"SyntaxError"==ge.name?Ee:Z(Ee)}}function ue(ge,Ee,Ue){var Be;"undefined"!=typeof console&&(Be=V.isObject(ge)?Ee+de(ge.stack,ge):Ee+String(ge),"function"==typeof Ge?Ge(Be,Ue):("function"==typeof console.log||"object"==typeof console.log)&&console.log(Be))}function X(ge,Ee,Ue,Be){var Qe=!1;try{"function"==typeof Ee&&(Qe=!0,"rejectionHandled"===ge?Ee(Be):Ee(Ue,Be))}catch(Ze){he.throwLater(Ze)}"unhandledRejection"===ge?fe(ge,Ue,Be)||Qe||ue(Ue,"Unhandled rejection "):fe(ge,Be)}function pe(ge){var Ee;if("function"==typeof ge)Ee="[function "+(ge.name||"anonymous")+"]";else{if(Ee=ge&&"function"==typeof ge.toString?ge.toString():V.toString(ge),/\[object [a-zA-Z0-9$_]+\]/.test(Ee))try{Ee=JSON.stringify(ge)}catch(Qe){}0===Ee.length&&(Ee="(empty array)")}return"(<"+function(ge){return ge.length<41?ge:ge.substr(0,38)+"..."}(Ee)+">, no stack trace)"}function K(){return"function"==typeof Pe}function G(ge){var Ee=ge.match(Ne);return Ee?{fileName:Ee[1],line:parseInt(Ee[2],10)}:void 0}function ie(ge){this._parent=ge,this._promisesCreated=0;var Ee=this._length=1+(void 0===ge?0:ge._length);Pe(this,ie),Ee>32&&this.uncycle()}var be,Te,Ge,je,he=u._async,ae=l("./errors").Warning,V=l("./util"),Q=l("./es5"),me=V.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,j=/\((?:timers\.js):\d+:\d+\)/,q=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,re=null,de=null,le=!1,we=!(0==V.env("BLUEBIRD_DEBUG")||!V.env("BLUEBIRD_DEBUG")&&"development"!==V.env("NODE_ENV")),Ae=!(0==V.env("BLUEBIRD_WARNINGS")||!we&&!V.env("BLUEBIRD_WARNINGS")),Se=!(0==V.env("BLUEBIRD_LONG_STACK_TRACES")||!we&&!V.env("BLUEBIRD_LONG_STACK_TRACES")),ye=0!=V.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Ae||!!V.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function ge(){for(var Be=0;Be<Ue.length;++Be)Ue[Be]._notifyUnhandledRejection();Ee()}function Ee(){Ue.length=0}var Ue=[];je=function(Be){Ue.push(Be),setTimeout(ge,1)},Q.defineProperty(u,"_unhandledRejectionCheck",{value:ge}),Q.defineProperty(u,"_unhandledRejectionClear",{value:Ee})})(),u.prototype.suppressUnhandledRejections=function(){var ge=this._target();ge._bitField=-1048577&ge._bitField|524288},u.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),je(this))},u.prototype._notifyUnhandledRejectionIsHandled=function(){X("rejectionHandled",be,void 0,this)},u.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},u.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},u.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var ge=this._settledValue();this._setUnhandledRejectionIsNotified(),X("unhandledRejection",Te,ge,this)}},u.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},u.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},u.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},u.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},u.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},u.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},u.prototype._warn=function(ge,Ee,Ue){return w(ge,Ee,Ue||this)},u.onPossiblyUnhandledRejection=function(ge){var Ee=u._getContext();Te=V.contextBind(Ee,ge)},u.onUnhandledRejectionHandled=function(ge){var Ee=u._getContext();be=V.contextBind(Ee,ge)};var Fe=function(){};u.longStackTraces=function(){if(he.haveItemsQueued()&&!ze.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ze.longStackTraces&&K()){var ge=u.prototype._captureStackTrace,Ee=u.prototype._attachExtraTrace,Ue=u.prototype._dereferenceTrace;ze.longStackTraces=!0,Fe=function(){if(he.haveItemsQueued()&&!ze.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");u.prototype._captureStackTrace=ge,u.prototype._attachExtraTrace=Ee,u.prototype._dereferenceTrace=Ue,h.deactivateLongStackTraces(),ze.longStackTraces=!1},u.prototype._captureStackTrace=R,u.prototype._attachExtraTrace=x,u.prototype._dereferenceTrace=P,h.activateLongStackTraces()}},u.hasLongStackTraces=function(){return ze.longStackTraces&&K()};var Ve={unhandledrejection:{before:function(){var ge=V.global.onunhandledrejection;return V.global.onunhandledrejection=null,ge},after:function(ge){V.global.onunhandledrejection=ge}},rejectionhandled:{before:function(){var ge=V.global.onrejectionhandled;return V.global.onrejectionhandled=null,ge},after:function(ge){V.global.onrejectionhandled=ge}}},ke=function(){var ge=function(Ue,Be){if(!Ue)return!V.global.dispatchEvent(Be);var Qe;try{return Qe=Ue.before(),!V.global.dispatchEvent(Be)}finally{Ue.after(Qe)}};try{if("function"==typeof CustomEvent){var Ee=new CustomEvent("CustomEvent");return V.global.dispatchEvent(Ee),function(Be,Qe){Be=Be.toLowerCase();var tt=new CustomEvent(Be,{detail:Qe,cancelable:!0});return Q.defineProperty(tt,"promise",{value:Qe.promise}),Q.defineProperty(tt,"reason",{value:Qe.reason}),ge(Ve[Be],tt)}}return"function"==typeof Event?(Ee=new Event("CustomEvent"),V.global.dispatchEvent(Ee),function(Be,Qe){Be=Be.toLowerCase();var Ze=new Event(Be,{cancelable:!0});return Ze.detail=Qe,Q.defineProperty(Ze,"promise",{value:Qe.promise}),Q.defineProperty(Ze,"reason",{value:Qe.reason}),ge(Ve[Be],Ze)}):((Ee=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),V.global.dispatchEvent(Ee),function(Ue,Be){Ue=Ue.toLowerCase();var Qe=document.createEvent("CustomEvent");return Qe.initCustomEvent(Ue,!1,!0,Be),ge(Ve[Ue],Qe)})}catch(Ue){}return function(){return!1}}(),$e=V.isNode?function(){return process.emit.apply(process,arguments)}:V.global?function(ge){var Ee="on"+ge.toLowerCase(),Ue=V.global[Ee];return!!Ue&&(Ue.apply(V.global,[].slice.call(arguments,1)),!0)}:function(){return!1},Le={promiseCreated:v,promiseFulfilled:v,promiseRejected:v,promiseResolved:v,promiseCancelled:v,promiseChained:function(ge,Ee,Ue){return{promise:Ee,child:Ue}},warning:function(ge,Ee){return{warning:Ee}},unhandledRejection:function(ge,Ee,Ue){return{reason:Ee,promise:Ue}},rejectionHandled:v},fe=function(ge){var Ee=!1;try{Ee=$e.apply(null,arguments)}catch(Be){he.throwLater(Be),Ee=!0}var Ue=!1;try{Ue=ke(ge,Le[ge].apply(null,arguments))}catch(Be){he.throwLater(Be),Ue=!0}return Ue||Ee};u.config=function(ge){if("longStackTraces"in(ge=Object(ge))&&(ge.longStackTraces?u.longStackTraces():!ge.longStackTraces&&u.hasLongStackTraces()&&Fe()),"warnings"in ge){var Ee=ge.warnings;ze.warnings=!!Ee,ye=ze.warnings,V.isObject(Ee)&&"wForgottenReturn"in Ee&&(ye=!!Ee.wForgottenReturn)}if("cancellation"in ge&&ge.cancellation&&!ze.cancellation){if(he.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");u.prototype._clearCancellationData=C,u.prototype._propagateFrom=A,u.prototype._onCancel=y,u.prototype._setOnCancel=_,u.prototype._attachCancellationCallback=I,u.prototype._execute=m,De=A,ze.cancellation=!0}if("monitoring"in ge&&(ge.monitoring&&!ze.monitoring?(ze.monitoring=!0,u.prototype._fireEvent=fe):!ge.monitoring&&ze.monitoring&&(ze.monitoring=!1,u.prototype._fireEvent=p)),"asyncHooks"in ge&&V.nodeSupportsAsyncResource){var Be=!!ge.asyncHooks;ze.asyncHooks!==Be&&(ze.asyncHooks=Be,Be?f():g())}return u},u.prototype._fireEvent=p,u.prototype._execute=function(ge,Ee,Ue){try{ge(Ee,Ue)}catch(Be){return Be}},u.prototype._onCancel=function(){},u.prototype._setOnCancel=function(ge){},u.prototype._attachCancellationCallback=function(ge){},u.prototype._captureStackTrace=function(){},u.prototype._attachExtraTrace=function(){},u.prototype._dereferenceTrace=function(){},u.prototype._clearCancellationData=function(){},u.prototype._propagateFrom=function(ge,Ee){};var De=function(ge,Ee){0!=(2&Ee)&&ge._isBound()&&this._setBoundTo(ge._boundTo)},Oe=function(){return!1},Ne=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;V.inherits(ie,Error),h.CapturedTrace=ie,ie.prototype.uncycle=function(){var ge=this._length;if(!(2>ge)){for(var Ee=[],Ue={},Be=0,Qe=this;void 0!==Qe;++Be)Ee.push(Qe),Qe=Qe._parent;for(Be=(ge=this._length=Be)-1;Be>=0;--Be){var Ze=Ee[Be].stack;void 0===Ue[Ze]&&(Ue[Ze]=Be)}for(Be=0;ge>Be;++Be){var lt=Ue[Ee[Be].stack];if(void 0!==lt&&lt!==Be){lt>0&&(Ee[lt-1]._parent=void 0,Ee[lt-1]._length=1),Ee[Be]._parent=void 0,Ee[Be]._length=1;var dt=Be>0?Ee[Be-1]:this;ge-1>lt?(dt._parent=Ee[lt+1],dt._parent.uncycle(),dt._length=dt._parent._length+1):(dt._parent=void 0,dt._length=1);for(var _t=dt._length+1,Rt=Be-2;Rt>=0;--Rt)Ee[Rt]._length=_t,_t++;return}}}},ie.prototype.attachExtraTrace=function(ge){if(!ge.__stackCleaned__){this.uncycle();for(var Ee=oe(ge),Ue=Ee.message,Be=[Ee.stack],Qe=this;void 0!==Qe;)Be.push(Z(Qe.stack.split("\n"))),Qe=Qe._parent;(function(ge){for(var Ee=ge[0],Ue=1;Ue<ge.length;++Ue){for(var Be=ge[Ue],Qe=Ee.length-1,Ze=Ee[Qe],tt=-1,lt=Be.length-1;lt>=0;--lt)if(Be[lt]===Ze){tt=lt;break}for(lt=tt;lt>=0&&Ee[Qe]===Be[lt];--lt)Ee.pop(),Qe--;Ee=Be}})(Be),function(ge){for(var Ee=0;Ee<ge.length;++Ee)(0===ge[Ee].length||Ee+1<ge.length&&ge[Ee][0]===ge[Ee+1][0])&&(ge.splice(Ee,1),Ee--)}(Be),V.notEnumerableProp(ge,"stack",function(ge,Ee){for(var Ue=0;Ue<Ee.length-1;++Ue)Ee[Ue].push("From previous event:"),Ee[Ue]=Ee[Ue].join("\n");return Ue<Ee.length&&(Ee[Ue]=Ee[Ue].join("\n")),ge+"\n"+Ee.join("\n")}(Ue,Be)),V.notEnumerableProp(ge,"__stackCleaned__",!0)}};var Pe=function(){var ge=/^\s*at\s*/,Ee=function(Ze,tt){return"string"==typeof Ze?Ze:void 0!==tt.name&&void 0!==tt.message?tt.toString():pe(tt)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,re=ge,de=Ee;var Ue=Error.captureStackTrace;return Oe=function(Ze){return H.test(Ze)},function(Ze,tt){Error.stackTraceLimit+=6,Ue(Ze,tt),Error.stackTraceLimit-=6}}var Qe,Be=new Error;if("string"==typeof Be.stack&&Be.stack.split("\n")[0].indexOf("stackDetection@")>=0)return re=/@/,de=Ee,le=!0,function(Ze){Ze.stack=(new Error).stack};try{throw new Error}catch(Ze){Qe="stack"in Ze}return"stack"in Be||!Qe||"number"!=typeof Error.stackTraceLimit?(de=function(Ze,tt){return"string"==typeof Ze?Ze:"object"!=typeof tt&&"function"!=typeof tt||void 0===tt.name||void 0===tt.message?pe(tt):tt.toString()},null):(re=ge,de=Ee,function(Ze){Error.stackTraceLimit+=6;try{throw new Error}catch(tt){Ze.stack=tt.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(Ge=function(ge){console&&console.warn&&console.warn(ge)},V.isNode&&process.stderr.isTTY?Ge=function(ge,Ee){console&&console.warn&&console.warn((Ee?"\x1b[33m":"\x1b[31m")+ge+"\x1b[0m\n")}:V.isNode||"string"!=typeof(new Error).stack||(Ge=function(ge,Ee){console&&console.warn&&console.warn("%c"+ge,Ee?"color: darkorange":"color: red")}));var ze={warnings:Ae,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return Se&&u.longStackTraces(),{asyncHooks:function(){return ze.asyncHooks},longStackTraces:function(){return ze.longStackTraces},warnings:function(){return ze.warnings},cancellation:function(){return ze.cancellation},monitoring:function(){return ze.monitoring},propagateFromFunction:function(){return De},boundValueFunction:function(){return E},checkForgottenReturns:function(ge,Ee,Ue,Be,Qe){if(void 0===ge&&null!==Ee&&ye){if(void 0!==Qe&&Qe._returnedNonUndefined()||0==(65535&Be._bitField))return;Ue&&(Ue+=" ");var Ze="",tt="";if(Ee._trace){for(var lt=Ee._trace.stack.split("\n"),dt=Z(lt),_t=dt.length-1;_t>=0;--_t){var Rt=dt[_t];if(!j.test(Rt)){var xt=Rt.match(q);xt&&(Ze="at "+xt[1]+":"+xt[2]+":"+xt[3]+" ");break}}if(dt.length>0){var Pt=dt[0];for(_t=0;_t<lt.length;++_t)if(lt[_t]===Pt){_t>0&&(tt="\n"+lt[_t-1]);break}}}Be._warn("a promise was created in a "+Ue+"handler "+Ze+"but was not returned from it, see http://goo.gl/rRqMUw"+tt,!0,Ee)}},setBounds:function(ge,Ee){if(K()){for(var Ue,Be,Qe=(ge.stack||"").split("\n"),Ze=(Ee.stack||"").split("\n"),tt=-1,lt=-1,dt=0;dt<Qe.length;++dt)if(_t=G(Qe[dt])){Ue=_t.fileName,tt=_t.line;break}for(dt=0;dt<Ze.length;++dt){var _t;if(_t=G(Ze[dt])){Be=_t.fileName,lt=_t.line;break}}0>tt||0>lt||!Ue||!Be||Ue!==Be||tt>=lt||(Oe=function(Rt){if(H.test(Rt))return!0;var xt=G(Rt);return!!(xt&&xt.fileName===Ue&&tt<=xt.line&&xt.line<=lt)})}},warn:w,deprecated:function(ge,Ee){var Ue=ge+" is deprecated and will be removed in a future version.";return Ee&&(Ue+=" Use "+Ee+" instead."),w(Ue)},CapturedTrace:ie,fireDomEvent:ke,fireGlobalEvent:$e}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(l,d,c){d.exports=function(u){function h(){return this.value}function f(){throw this.reason}u.prototype.return=u.prototype.thenReturn=function(g){return g instanceof u&&g.suppressUnhandledRejections(),this._then(h,void 0,void 0,{value:g},void 0)},u.prototype.throw=u.prototype.thenThrow=function(g){return this._then(f,void 0,void 0,{reason:g},void 0)},u.prototype.catchThrow=function(g){if(arguments.length<=1)return this._then(void 0,f,void 0,{reason:g},void 0);var v=arguments[1],p=function(){throw v};return this.caught(g,p)},u.prototype.catchReturn=function(g){if(arguments.length<=1)return g instanceof u&&g.suppressUnhandledRejections(),this._then(void 0,h,void 0,{value:g},void 0);var v=arguments[1];v instanceof u&&v.suppressUnhandledRejections();var p=function(){return v};return this.caught(g,p)}}},{}],11:[function(l,d,c){d.exports=function(u,h){function f(){return p(this)}var v=u.reduce,p=u.all;u.prototype.each=function(m){return v(this,m,h,0)._then(f,void 0,void 0,this,void 0)},u.prototype.mapSeries=function(m){return v(this,m,h,h)},u.each=function(m,I){return v(m,I,h,0)._then(f,void 0,void 0,m,void 0)},u.mapSeries=function(m,I){return v(m,I,h,h)}}},{}],12:[function(l,d,c){function u(F,k){function w(S){return this instanceof w?(y(this,"message","string"==typeof S?S:k),y(this,"name",F),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new w(S)}return I(w,Error),w}function h(F){return this instanceof h?(y(this,"name","OperationalError"),y(this,"message",F),this.cause=F,this.isOperational=!0,void(F instanceof Error?(y(this,"message",F.message),y(this,"stack",F.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new h(F)}var f,g,v=l("./es5"),p=v.freeze,m=l("./util"),I=m.inherits,y=m.notEnumerableProp,_=u("Warning","warning"),C=u("CancellationError","cancellation error"),A=u("TimeoutError","timeout error"),M=u("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(F){f=u("TypeError","type error"),g=u("RangeError","range error")}for(var E="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),R=0;R<E.length;++R)"function"==typeof Array.prototype[E[R]]&&(M.prototype[E[R]]=Array.prototype[E[R]]);v.defineProperty(M.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),M.prototype.isOperational=!0;var x=0;M.prototype.toString=function(){var F=Array(4*x+1).join(" "),k="\n"+F+"AggregateError of:\n";x++,F=Array(4*x+1).join(" ");for(var w=0;w<this.length;++w){for(var S=this[w]===this?"[Circular AggregateError]":this[w]+"",L=S.split("\n"),U=0;U<L.length;++U)L[U]=F+L[U];k+=(S=L.join("\n"))+"\n"}return x--,k},I(h,Error);var P=Error.__BluebirdErrorTypes__;P||(P=p({CancellationError:C,TimeoutError:A,OperationalError:h,RejectionError:h,AggregateError:M}),v.defineProperty(Error,"__BluebirdErrorTypes__",{value:P,writable:!1,enumerable:!1,configurable:!1})),d.exports={Error,TypeError:f,RangeError:g,CancellationError:P.CancellationError,OperationalError:P.OperationalError,TimeoutError:P.TimeoutError,AggregateError:P.AggregateError,Warning:_}},{"./es5":13,"./util":36}],13:[function(l,d,c){var u=function(){return void 0===this}();if(u)d.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:u,propertyIsWritable:function(C,A){var M=Object.getOwnPropertyDescriptor(C,A);return!(M&&!M.writable&&!M.set)}};else{var h={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,v=function(C){var A=[];for(var M in C)h.call(C,M)&&A.push(M);return A};d.exports={isArray:function(C){try{return"[object Array]"===f.call(C)}catch(A){return!1}},keys:v,names:v,defineProperty:function(C,A,M){return C[A]=M.value,C},getDescriptor:function(C,A){return{value:C[A]}},freeze:function(C){return C},getPrototypeOf:function(C){try{return Object(C).constructor.prototype}catch(A){return g}},isES5:u,propertyIsWritable:function(){return!0}}}},{}],14:[function(l,d,c){d.exports=function(u,h){var f=u.map;u.prototype.filter=function(g,v){return f(this,g,v,h)},u.filter=function(g,v,p){return f(g,v,p,h)}}},{}],15:[function(l,d,c){d.exports=function(u,h,f){function g(E,R,x){this.promise=E,this.type=R,this.handler=x,this.called=!1,this.cancelPromise=null}function v(E){this.finallyHandler=E}function p(E,R){return null!=E.cancelPromise&&(arguments.length>1?E.cancelPromise._reject(R):E.cancelPromise._cancel(),E.cancelPromise=null,!0)}function m(){return y.call(this,this.promise._target()._settledValue())}function I(E){return p(this,E)?void 0:(A.e=E,A)}function y(E){var R=this.promise,x=this.handler;if(!this.called){this.called=!0;var P=this.isFinallyHandler()?x.call(R._boundValue()):x.call(R._boundValue(),E);if(P===f)return P;if(void 0!==P){R._setReturnedNonUndefined();var F=h(P,R);if(F instanceof u){if(null!=this.cancelPromise){if(F._isCancelled()){var k=new C("late cancellation observer");return R._attachExtraTrace(k),A.e=k,A}F.isPending()&&F._attachCancellationCallback(new v(this))}return F._then(m,I,void 0,this,void 0)}}}return R.isRejected()?(p(this),A.e=E,A):(p(this),E)}var _=l("./util"),C=u.CancellationError,A=_.errorObj,M=l("./catch_filter")(f);return g.prototype.isFinallyHandler=function(){return 0===this.type},v.prototype._resultCancelled=function(){p(this.finallyHandler)},u.prototype._passThrough=function(E,R,x,P){return"function"!=typeof E?this.then():this._then(x,P,void 0,new g(this,R,E),void 0)},u.prototype.lastly=u.prototype.finally=function(E){return this._passThrough(E,0,y,y)},u.prototype.tap=function(E){return this._passThrough(E,1,y)},u.prototype.tapCatch=function(E){var R=arguments.length;if(1===R)return this._passThrough(E,1,void 0,y);var x,P=new Array(R-1),F=0;for(x=0;R-1>x;++x){var k=arguments[x];if(!_.isObject(k))return u.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+_.classString(k)));P[F++]=k}P.length=F;var w=arguments[x];return this._passThrough(M(P,w,this),1,void 0,y)},g}},{"./catch_filter":7,"./util":36}],16:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function I(R,x,P,F){if(p.cancellation()){var k=new u(f),w=this._finallyPromise=new u(f);this._promise=k.lastly(function(){return w}),k._captureStackTrace(),k._setOnCancel(this)}else(this._promise=new u(f))._captureStackTrace();this._stack=F,this._generatorFunction=R,this._receiver=x,this._generator=void 0,this._yieldHandlers="function"==typeof P?[P].concat(E):E,this._yieldedPromise=null,this._cancellationPhase=!1}var _=l("./errors").TypeError,C=l("./util"),A=C.errorObj,M=C.tryCatch,E=[];C.inherits(I,v),I.prototype._isResolved=function(){return null===this._promise},I.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},I.prototype._promiseCancelled=function(){if(!this._isResolved()){var R;if(void 0!==this._generator.return)this._promise._pushContext(),R=M(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var P=new u.CancellationError("generator .return() sentinel");u.coroutine.returnSentinel=P,this._promise._attachExtraTrace(P),this._promise._pushContext(),R=M(this._generator.throw).call(this._generator,P),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(R)}},I.prototype._promiseFulfilled=function(R){this._yieldedPromise=null,this._promise._pushContext();var x=M(this._generator.next).call(this._generator,R);this._promise._popContext(),this._continue(x)},I.prototype._promiseRejected=function(R){this._yieldedPromise=null,this._promise._attachExtraTrace(R),this._promise._pushContext();var x=M(this._generator.throw).call(this._generator,R);this._promise._popContext(),this._continue(x)},I.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof u){var R=this._yieldedPromise;this._yieldedPromise=null,R.cancel()}},I.prototype.promise=function(){return this._promise},I.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},I.prototype._continue=function(R){var x=this._promise;if(R===A)return this._cleanup(),this._cancellationPhase?x.cancel():x._rejectCallback(R.e,!1);var P=R.value;if(!0===R.done)return this._cleanup(),this._cancellationPhase?x.cancel():x._resolveCallback(P);var F=g(P,this._promise);if(F instanceof u||null!==(F=function(R,x,P){for(var F=0;F<x.length;++F){P._pushContext();var k=M(x[F])(R);if(P._popContext(),k===A){P._pushContext();var w=u.reject(A.e);return P._popContext(),w}var S=g(k,P);if(S instanceof u)return S}return null}(F,this._yieldHandlers,this._promise))){var k=(F=F._target())._bitField;0==(50397184&k)?(this._yieldedPromise=F,F._proxy(this,null)):0!=(33554432&k)?u._async.invoke(this._promiseFulfilled,this,F._value()):0!=(16777216&k)?u._async.invoke(this._promiseRejected,this,F._reason()):this._promiseCancelled()}else this._promiseRejected(new _("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(P))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},u.coroutine=function(R,x){if("function"!=typeof R)throw new _("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var P=Object(x).yieldHandler,F=I,k=(new Error).stack;return function(){var w=R.apply(this,arguments),S=new F(void 0,void 0,P,k),L=S.promise();return S._generator=w,S._promiseFulfilled(void 0),L}},u.coroutine.addYieldHandler=function(R){if("function"!=typeof R)throw new _("expecting a function but got "+C.classString(R));E.push(R)},u.spawn=function(R){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof R)return h("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var x=new I(R,this),P=x.promise();return x._run(u.spawn),P}}},{"./errors":12,"./util":36}],17:[function(l,d,c){d.exports=function(u,h,f,g,v){l("./util"),u.join=function(){var m,I=arguments.length-1;I>0&&"function"==typeof arguments[I]&&(m=arguments[I]);var y=[].slice.call(arguments);m&&y.pop();var _=new h(y).promise();return void 0!==m?_.spread(m):_}}},{"./util":36}],18:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(M,E,R,x){this.constructor$(M),this._promise._captureStackTrace();var P=u._getContext();if(this._callback=y.contextBind(P,E),this._preservedValues=x===v?new Array(this.length()):null,this._limit=R,this._inFlight=0,this._queue=[],A.invoke(this._asyncInit,this,void 0),y.isArray(M))for(var F=0;F<M.length;++F){var k=M[F];k instanceof u&&k.suppressUnhandledRejections()}}function I(M,E,R,x){if("function"!=typeof E)return f("expecting a function but got "+y.classString(E));var P=0;if(void 0!==R){if("object"!=typeof R||null===R)return u.reject(new TypeError("options argument must be an object but it is "+y.classString(R)));if("number"!=typeof R.concurrency)return u.reject(new TypeError("'concurrency' must be a number but it is "+y.classString(R.concurrency)));P=R.concurrency}return new m(M,E,P="number"==typeof P&&isFinite(P)&&P>=1?P:0,x).promise()}var y=l("./util"),_=y.tryCatch,C=y.errorObj,A=u._async;y.inherits(m,h),m.prototype._asyncInit=function(){this._init$(void 0,-2)},m.prototype._init=function(){},m.prototype._promiseFulfilled=function(M,E){var R=this._values,x=this.length(),P=this._preservedValues,F=this._limit;if(0>E){if(R[E=-1*E-1]=M,F>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(F>=1&&this._inFlight>=F)return R[E]=M,this._queue.push(E),!1;null!==P&&(P[E]=M);var k=this._promise,w=this._callback,S=k._boundValue();k._pushContext();var L=_(w).call(S,M,E,x),U=k._popContext();if(p.checkForgottenReturns(L,U,null!==P?"Promise.filter":"Promise.map",k),L===C)return this._reject(L.e),!0;var Z=g(L,this._promise);if(Z instanceof u){var ne=(Z=Z._target())._bitField;if(0==(50397184&ne))return F>=1&&this._inFlight++,R[E]=Z,Z._proxy(this,-1*(E+1)),!1;if(0==(33554432&ne))return 0!=(16777216&ne)?(this._reject(Z._reason()),!0):(this._cancel(),!0);L=Z._value()}R[E]=L}return++this._totalResolved>=x&&(null!==P?this._filter(R,P):this._resolve(R),!0)},m.prototype._drainQueue=function(){for(var M=this._queue,E=this._limit,R=this._values;M.length>0&&this._inFlight<E;){if(this._isResolved())return;var x=M.pop();this._promiseFulfilled(R[x],x)}},m.prototype._filter=function(M,E){for(var R=E.length,x=new Array(R),P=0,F=0;R>F;++F)M[F]&&(x[P++]=E[F]);x.length=P,this._resolve(x)},m.prototype.preservedValues=function(){return this._preservedValues},u.prototype.map=function(M,E){return I(this,M,E,null)},u.map=function(M,E,R,x){return I(M,E,R,x)}}},{"./util":36}],19:[function(l,d,c){d.exports=function(u,h,f,g,v){var p=l("./util"),m=p.tryCatch;u.method=function(I){if("function"!=typeof I)throw new u.TypeError("expecting a function but got "+p.classString(I));return function(){var y=new u(h);y._captureStackTrace(),y._pushContext();var _=m(I).apply(this,arguments),C=y._popContext();return v.checkForgottenReturns(_,C,"Promise.method",y),y._resolveFromSyncValue(_),y}},u.attempt=u.try=function(I){if("function"!=typeof I)return g("expecting a function but got "+p.classString(I));var _,y=new u(h);if(y._captureStackTrace(),y._pushContext(),arguments.length>1){v.deprecated("calling Promise.try with more than 1 argument");var C=arguments[1],A=arguments[2];_=p.isArray(C)?m(I).apply(A,C):m(I).call(A,C)}else _=m(I)();var M=y._popContext();return v.checkForgottenReturns(_,M,"Promise.try",y),y._resolveFromSyncValue(_),y},u.prototype._resolveFromSyncValue=function(I){I===p.errorObj?this._rejectCallback(I.e,!1):this._resolveCallback(I,!0)}}},{"./util":36}],20:[function(l,d,c){function h(_){var C;if(function(_){return _ instanceof Error&&I.getPrototypeOf(_)===Error.prototype}(_)){(C=new m(_)).name=_.name,C.message=_.message,C.stack=_.stack;for(var A=I.keys(_),M=0;M<A.length;++M){var E=A[M];y.test(E)||(C[E]=_[E])}return C}return g.markAsOriginatingFromRejection(_),_}var g=l("./util"),v=g.maybeWrapAsError,m=l("./errors").OperationalError,I=l("./es5"),y=/^(?:name|message|stack|cause)$/;d.exports=function(_,C){return function(A,M){if(null!==_){if(A){var E=h(v(A));_._attachExtraTrace(E),_._reject(E)}else if(C){var R=[].slice.call(arguments,1);_._fulfill(R)}else _._fulfill(M);_=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(l,d,c){d.exports=function(u){function h(y,_){if(!v.isArray(y))return f.call(this,y,_);var A=m(_).apply(this._boundValue(),[null].concat(y));A===I&&p.throwLater(A.e)}function f(y,_){var A=this._boundValue(),M=void 0===y?m(_).call(A,null):m(_).call(A,null,y);M===I&&p.throwLater(M.e)}function g(y,_){if(!y){var A=new Error(y+"");A.cause=y,y=A}var M=m(_).call(this._boundValue(),y);M===I&&p.throwLater(M.e)}var v=l("./util"),p=u._async,m=v.tryCatch,I=v.errorObj;u.prototype.asCallback=u.prototype.nodeify=function(y,_){if("function"==typeof y){var C=f;void 0!==_&&Object(_).spread&&(C=h),this._then(C,g,void 0,this,y)}return this}}},{"./util":36}],22:[function(l,d,c){d.exports=function(){function u(){}function f(he){he!==oe&&function(he,ae){if(null==he||he.constructor!==f)throw new Z("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof ae)throw new Z("expecting a function but got "+C.classString(ae))}(this,he),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(he),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(he){this.promise._resolveCallback(he)}function v(he){this.promise._rejectCallback(he,!1)}function p(he){var ae=new f(oe);ae._fulfillmentHandler0=he,ae._rejectionHandler0=he,ae._promise0=he,ae._receiver0=he}var m=function(){return new Z("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},I=function(){return new f.PromiseInspection(this._target())},y=function(he){return f.reject(new Z(he))},_={},C=l("./util");C.setReflectHandler(I);var A=function(){var he=process.domain;return void 0===he?null:he},E=function(){return{domain:A(),async:null}},R=C.isNode&&C.nodeSupportsAsyncResource?l("async_hooks").AsyncResource:null,x=function(){return{domain:A(),async:new R("Bluebird::Promise")}},P=C.isNode?E:function(){return null};C.notEnumerableProp(f,"_getContext",P);var w=l("./es5"),S=l("./async"),L=new S;w.defineProperty(f,"_async",{value:L});var U=l("./errors"),Z=f.TypeError=U.TypeError;f.RangeError=U.RangeError;var ne=f.CancellationError=U.CancellationError;f.TimeoutError=U.TimeoutError,f.OperationalError=U.OperationalError,f.RejectionError=U.OperationalError,f.AggregateError=U.AggregateError;var oe=function(){},ue={},X={},pe=l("./thenables")(f,oe),B=l("./promise_array")(f,oe,pe,y,u),K=l("./context")(f),G=K.create,ee=l("./debuggability")(f,K,function(){P=x,C.notEnumerableProp(f,"_getContext",x)},function(){P=E,C.notEnumerableProp(f,"_getContext",E)}),ie=l("./finally")(f,pe,X),be=l("./catch_filter")(X),Te=l("./nodeback"),Ge=C.errorObj,je=C.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(he){var ae=arguments.length;if(ae>1){var V,Q=new Array(ae-1),me=0;for(V=0;ae-1>V;++V){var H=arguments[V];if(!C.isObject(H))return y("Catch statement predicate: expecting an object but got "+C.classString(H));Q[me++]=H}if(Q.length=me,"function"!=typeof(he=arguments[V]))throw new Z("The last argument to .catch() must be a function, got "+C.toString(he));return this.then(void 0,be(Q,he,this))}return this.then(void 0,he)},f.prototype.reflect=function(){return this._then(I,I,void 0,this,void 0)},f.prototype.then=function(he,ae){if(ee.warnings()&&arguments.length>0&&"function"!=typeof he&&"function"!=typeof ae){var V=".then() only accepts functions but was passed: "+C.classString(he);arguments.length>1&&(V+=", "+C.classString(ae)),this._warn(V)}return this._then(he,ae,void 0,void 0,void 0)},f.prototype.done=function(he,ae){this._then(he,ae,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(he){return"function"!=typeof he?y("expecting a function but got "+C.classString(he)):this.all()._then(he,void 0,void 0,ue,void 0)},f.prototype.toJSON=function(){var he={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(he.fulfillmentValue=this.value(),he.isFulfilled=!0):this.isRejected()&&(he.rejectionReason=this.reason(),he.isRejected=!0),he},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new B(this).promise()},f.prototype.error=function(he){return this.caught(C.originatesFromRejection,he)},f.getNewLibraryCopy=d.exports,f.is=function(he){return he instanceof f},f.fromNode=f.fromCallback=function(he){var ae=new f(oe);ae._captureStackTrace();var V=arguments.length>1&&!!Object(arguments[1]).multiArgs,Q=je(he)(Te(ae,V));return Q===Ge&&ae._rejectCallback(Q.e,!0),ae._isFateSealed()||ae._setAsyncGuaranteed(),ae},f.all=function(he){return new B(he).promise()},f.cast=function(he){var ae=pe(he);return ae instanceof f||((ae=new f(oe))._captureStackTrace(),ae._setFulfilled(),ae._rejectionHandler0=he),ae},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(he){var ae=new f(oe);return ae._captureStackTrace(),ae._rejectCallback(he,!0),ae},f.setScheduler=function(he){if("function"!=typeof he)throw new Z("expecting a function but got "+C.classString(he));return L.setScheduler(he)},f.prototype._then=function(he,ae,V,Q,me){var H=void 0!==me,j=H?me:new f(oe),q=this._target(),re=q._bitField;H||(j._propagateFrom(this,3),j._captureStackTrace(),void 0===Q&&0!=(2097152&this._bitField)&&(Q=0!=(50397184&re)?this._boundValue():q===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,j));var de=P();if(0!=(50397184&re)){var le,we,Ae=q._settlePromiseCtx;0!=(33554432&re)?(we=q._rejectionHandler0,le=he):0!=(16777216&re)?(we=q._fulfillmentHandler0,le=ae,q._unsetRejectionIsUnhandled()):(Ae=q._settlePromiseLateCancellationObserver,we=new ne("late cancellation observer"),q._attachExtraTrace(we),le=ae),L.invoke(Ae,q,{handler:C.contextBind(de,le),promise:j,receiver:Q,value:we})}else q._addCallbacks(he,ae,j,Q,de);return j},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(he){this._bitField=-65536&this._bitField|65535&he},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){if(!L.hasCustomScheduler()){var he=this._bitField;this._bitField=he|(536870912&he)>>2^134217728}},f.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},f.prototype._receiverAt=function(he){var ae=0===he?this._receiver0:this[4*he-4+3];return ae===_?void 0:void 0===ae&&this._isBound()?this._boundValue():ae},f.prototype._promiseAt=function(he){return this[4*he-4+2]},f.prototype._fulfillmentHandlerAt=function(he){return this[4*he-4+0]},f.prototype._rejectionHandlerAt=function(he){return this[4*he-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(he){var ae=he._fulfillmentHandler0,V=he._rejectionHandler0,Q=he._promise0,me=he._receiverAt(0);void 0===me&&(me=_),this._addCallbacks(ae,V,Q,me,null)},f.prototype._migrateCallbackAt=function(he,ae){var V=he._fulfillmentHandlerAt(ae),Q=he._rejectionHandlerAt(ae),me=he._promiseAt(ae),H=he._receiverAt(ae);void 0===H&&(H=_),this._addCallbacks(V,Q,me,H,null)},f.prototype._addCallbacks=function(he,ae,V,Q,me){var H=this._length();if(H>=65531&&(H=0,this._setLength(0)),0===H)this._promise0=V,this._receiver0=Q,"function"==typeof he&&(this._fulfillmentHandler0=C.contextBind(me,he)),"function"==typeof ae&&(this._rejectionHandler0=C.contextBind(me,ae));else{var j=4*H-4;this[j+2]=V,this[j+3]=Q,"function"==typeof he&&(this[j+0]=C.contextBind(me,he)),"function"==typeof ae&&(this[j+1]=C.contextBind(me,ae))}return this._setLength(H+1),H},f.prototype._proxy=function(he,ae){this._addCallbacks(void 0,void 0,ae,he,null)},f.prototype._resolveCallback=function(he,ae){if(0==(117506048&this._bitField)){if(he===this)return this._rejectCallback(m(),!1);var V=pe(he,this);if(!(V instanceof f))return this._fulfill(he);ae&&this._propagateFrom(V,2);var Q=V._target();if(Q===this)return void this._reject(m());var me=Q._bitField;if(0==(50397184&me)){var H=this._length();H>0&&Q._migrateCallback0(this);for(var j=1;H>j;++j)Q._migrateCallbackAt(this,j);this._setFollowing(),this._setLength(0),this._setFollowee(V)}else if(0!=(33554432&me))this._fulfill(Q._value());else if(0!=(16777216&me))this._reject(Q._reason());else{var q=new ne("late cancellation observer");Q._attachExtraTrace(q),this._reject(q)}}},f.prototype._rejectCallback=function(he,ae,V){var Q=C.ensureErrorObject(he),me=Q===he;if(!me&&!V&&ee.warnings()){var H="a promise was rejected with a non-error: "+C.classString(he);this._warn(H,!0)}this._attachExtraTrace(Q,!!ae&&me),this._reject(he)},f.prototype._resolveFromExecutor=function(he){if(he!==oe){var ae=this;this._captureStackTrace(),this._pushContext();var V=!0,Q=this._execute(he,function(me){ae._resolveCallback(me)},function(me){ae._rejectCallback(me,V)});V=!1,this._popContext(),void 0!==Q&&ae._rejectCallback(Q,!0)}},f.prototype._settlePromiseFromHandler=function(he,ae,V,Q){var me=Q._bitField;if(0==(65536&me)){var H;Q._pushContext(),ae===ue?V&&"number"==typeof V.length?H=je(he).apply(this._boundValue(),V):(H=Ge).e=new Z("cannot .spread() a non-array: "+C.classString(V)):H=je(he).call(ae,V);var j=Q._popContext();0==(65536&(me=Q._bitField))&&(H===X?Q._reject(V):H===Ge?Q._rejectCallback(H.e,!1):(ee.checkForgottenReturns(H,j,"",Q,this),Q._resolveCallback(H)))}},f.prototype._target=function(){for(var he=this;he._isFollowing();)he=he._followee();return he},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(he){this._rejectionHandler0=he},f.prototype._settlePromise=function(he,ae,V,Q){var me=he instanceof f,H=this._bitField,j=0!=(134217728&H);0!=(65536&H)?(me&&he._invokeInternalOnCancel(),V instanceof ie&&V.isFinallyHandler()?(V.cancelPromise=he,je(ae).call(V,Q)===Ge&&he._reject(Ge.e)):ae===I?he._fulfill(I.call(V)):V instanceof u?V._promiseCancelled(he):me||he instanceof B?he._cancel():V.cancel()):"function"==typeof ae?me?(j&&he._setAsyncGuaranteed(),this._settlePromiseFromHandler(ae,V,Q,he)):ae.call(V,Q,he):V instanceof u?V._isResolved()||(0!=(33554432&H)?V._promiseFulfilled(Q,he):V._promiseRejected(Q,he)):me&&(j&&he._setAsyncGuaranteed(),0!=(33554432&H)?he._fulfill(Q):he._reject(Q))},f.prototype._settlePromiseLateCancellationObserver=function(he){var ae=he.handler,V=he.promise,Q=he.receiver,me=he.value;"function"==typeof ae?V instanceof f?this._settlePromiseFromHandler(ae,Q,me,V):ae.call(Q,me,V):V instanceof f&&V._reject(me)},f.prototype._settlePromiseCtx=function(he){this._settlePromise(he.promise,he.handler,he.receiver,he.value)},f.prototype._settlePromise0=function(he,ae,V){var Q=this._promise0,me=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Q,he,me,ae)},f.prototype._clearCallbackDataAtIndex=function(he){var ae=4*he-4;this[ae+2]=this[ae+3]=this[ae+0]=this[ae+1]=void 0},f.prototype._fulfill=function(he){var ae=this._bitField;if(!((117506048&ae)>>>16)){if(he===this){var V=m();return this._attachExtraTrace(V),this._reject(V)}this._setFulfilled(),this._rejectionHandler0=he,(65535&ae)>0&&(0!=(134217728&ae)?this._settlePromises():L.settlePromises(this),this._dereferenceTrace())}},f.prototype._reject=function(he){var ae=this._bitField;if(!((117506048&ae)>>>16))return this._setRejected(),this._fulfillmentHandler0=he,this._isFinal()?L.fatalError(he,C.isNode):void((65535&ae)>0?L.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(he,ae){for(var V=1;he>V;V++){var Q=this._fulfillmentHandlerAt(V),me=this._promiseAt(V),H=this._receiverAt(V);this._clearCallbackDataAtIndex(V),this._settlePromise(me,Q,H,ae)}},f.prototype._rejectPromises=function(he,ae){for(var V=1;he>V;V++){var Q=this._rejectionHandlerAt(V),me=this._promiseAt(V),H=this._receiverAt(V);this._clearCallbackDataAtIndex(V),this._settlePromise(me,Q,H,ae)}},f.prototype._settlePromises=function(){var he=this._bitField,ae=65535&he;if(ae>0){if(0!=(16842752&he)){var V=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,V,he),this._rejectPromises(ae,V)}else{var Q=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Q,he),this._fulfillPromises(ae,Q)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var he=this._bitField;return 0!=(33554432&he)?this._rejectionHandler0:0!=(16777216&he)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&w.defineProperty(f.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),f.defer=f.pending=function(){return ee.deprecated("Promise.defer","new Promise"),{promise:new f(oe),resolve:g,reject:v}},C.notEnumerableProp(f,"_makeSelfResolutionError",m),l("./method")(f,oe,pe,y,ee),l("./bind")(f,oe,pe,ee),l("./cancel")(f,B,y,ee),l("./direct_resolve")(f),l("./synchronous_inspection")(f),l("./join")(f,B,pe,oe,L),f.Promise=f,f.version="3.7.2",l("./call_get.js")(f),l("./generators.js")(f,y,oe,pe,u,ee),l("./map.js")(f,B,y,pe,oe,ee),l("./nodeify.js")(f),l("./promisify.js")(f,oe),l("./props.js")(f,B,pe,y),l("./race.js")(f,oe,pe,y),l("./reduce.js")(f,B,y,pe,oe,ee),l("./settle.js")(f,B,ee),l("./some.js")(f,B,y),l("./timers.js")(f,oe,ee),l("./using.js")(f,y,pe,G,oe,ee),l("./any.js")(f),l("./each.js")(f,oe),l("./filter.js")(f,oe),C.toFastProperties(f),C.toFastProperties(f.prototype),p({a:1}),p({b:2}),p({c:3}),p(1),p(function(){}),p(void 0),p(!1),p(new f(oe)),ee.setBounds(S.firstLineError,C.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(l,d,c){d.exports=function(u,h,f,g,v){function m(y){var _=this._promise=new u(h);y instanceof u&&(_._propagateFrom(y,3),y.suppressUnhandledRejections()),_._setOnCancel(this),this._values=y,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var I=l("./util");return I.inherits(m,v),m.prototype.length=function(){return this._length},m.prototype.promise=function(){return this._promise},m.prototype._init=function y(_,C){var A=f(this._values,this._promise);if(A instanceof u){var M=(A=A._target())._bitField;if(this._values=A,0==(50397184&M))return this._promise._setAsyncGuaranteed(),A._then(y,this._reject,void 0,this,C);if(0==(33554432&M))return 0!=(16777216&M)?this._reject(A._reason()):this._cancel();A=A._value()}if(null!==(A=I.asArray(A)))return 0===A.length?void(-5===C?this._resolveEmptyArray():this._resolve(function(y){switch(y){case-2:return[];case-3:return{};case-6:return new Map}}(C))):void this._iterate(A);var E=g("expecting an array or an iterable object but got "+I.classString(A)).reason();this._promise._rejectCallback(E,!1)},m.prototype._iterate=function(y){var _=this.getActualLength(y.length);this._length=_,this._values=this.shouldCopyValues()?new Array(_):this._values;for(var C=this._promise,A=!1,M=null,E=0;_>E;++E){var R=f(y[E],C);M=R instanceof u?(R=R._target())._bitField:null,A?null!==M&&R.suppressUnhandledRejections():null!==M?0==(50397184&M)?(R._proxy(this,E),this._values[E]=R):A=0!=(33554432&M)?this._promiseFulfilled(R._value(),E):0!=(16777216&M)?this._promiseRejected(R._reason(),E):this._promiseCancelled(E):A=this._promiseFulfilled(R,E)}A||C._setAsyncGuaranteed()},m.prototype._isResolved=function(){return null===this._values},m.prototype._resolve=function(y){this._values=null,this._promise._fulfill(y)},m.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},m.prototype._reject=function(y){this._values=null,this._promise._rejectCallback(y,!1)},m.prototype._promiseFulfilled=function(y,_){return this._values[_]=y,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseCancelled=function(){return this._cancel(),!0},m.prototype._promiseRejected=function(y){return this._totalResolved++,this._reject(y),!0},m.prototype._resultCancelled=function(){if(!this._isResolved()){var y=this._values;if(this._cancel(),y instanceof u)y.cancel();else for(var _=0;_<y.length;++_)y[_]instanceof u&&y[_].cancel()}},m.prototype.shouldCopyValues=function(){return!0},m.prototype.getActualLength=function(y){return y},m}},{"./util":36}],24:[function(l,d,c){d.exports=function(u,h){function f(oe){return!L.test(oe)}function g(oe){try{return!0===oe.__isPromisified__}catch(ue){return!1}}function v(oe,ue,X){var pe=M.getDataPropertyOrDefault(oe,ue+X,w);return!!pe&&g(pe)}function y(oe,ue,X,pe,B){for(var K=new RegExp(Z(ue)+"$"),G=function(oe,ue,X,pe){for(var B=M.inheritedDataKeys(oe),K=[],G=0;G<B.length;++G){var ee=B[G],ie=oe[ee],be=pe===U||U(ee,ie,oe);"function"!=typeof ie||g(ie)||v(oe,ee,ue)||!pe(ee,ie,oe,be)||K.push(ee,ie)}return function(oe,ue,X){for(var pe=0;pe<oe.length;pe+=2){var B=oe[pe];if(X.test(B))for(var K=B.replace(X,""),G=0;G<oe.length;G+=2)if(oe[G]===K)throw new F("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",ue))}}(K,ue,X),K}(oe,ue,K,X),ee=0,ie=G.length;ie>ee;ee+=2){var be=G[ee],Te=G[ee+1],Ge=be+ue;if(pe===ne)oe[Ge]=ne(be,A,be,Te,ue,B);else{var je=pe(Te,function(){return ne(be,A,be,Te,ue,B)});M.notEnumerableProp(je,"__isPromisified__",!0),oe[Ge]=je}}return M.toFastProperties(oe),oe}var A={},M=l("./util"),E=l("./nodeback"),R=M.withAppended,x=M.maybeWrapAsError,P=M.canEvaluate,F=l("./errors").TypeError,w={__isPromisified__:!0},L=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),U=function(oe){return M.isIdentifier(oe)&&"_"!==oe.charAt(0)&&"constructor"!==oe},Z=function(oe){return oe.replace(/([$])/,"\\$")},ne=P?void 0:function(oe,ue,X,pe,B,K){function G(){var be=ue;ue===A&&(be=this);var Te=new u(h);Te._captureStackTrace();var Ge="string"==typeof ie&&this!==ee?this[ie]:oe,je=E(Te,K);try{Ge.apply(be,R(arguments,je))}catch(he){Te._rejectCallback(x(he),!0,!0)}return Te._isFateSealed()||Te._setAsyncGuaranteed(),Te}var ee=function(){return this}(),ie=oe;return"string"==typeof ie&&(oe=pe),M.notEnumerableProp(G,"__isPromisified__",!0),G};u.promisify=function(oe,ue){if("function"!=typeof oe)throw new F("expecting a function but got "+M.classString(oe));if(g(oe))return oe;var B=function(oe,ue,X){return ne(oe,ue,void 0,oe,null,X)}(oe,void 0===(ue=Object(ue)).context?A:ue.context,!!ue.multiArgs);return M.copyDescriptors(oe,B,f),B},u.promisifyAll=function(oe,ue){if("function"!=typeof oe&&"object"!=typeof oe)throw new F("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var X=!!(ue=Object(ue)).multiArgs,pe=ue.suffix;"string"!=typeof pe&&(pe="Async");var B=ue.filter;"function"!=typeof B&&(B=U);var K=ue.promisifier;if("function"!=typeof K&&(K=ne),!M.isIdentifier(pe))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var G=M.inheritedDataKeys(oe),ee=0;ee<G.length;++ee){var ie=oe[G[ee]];"constructor"!==G[ee]&&M.isClass(ie)&&(y(ie.prototype,pe,B,K,X),y(ie,pe,B,K,X))}return y(oe,pe,B,K,X)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(l,d,c){d.exports=function(u,h,f,g){function v(M){var E,R=!1;if(void 0!==m&&M instanceof m)E=C(M),R=!0;else{var x=_.keys(M),P=x.length;E=new Array(2*P);for(var F=0;P>F;++F){var k=x[F];E[F]=M[k],E[F+P]=k}}this.constructor$(E),this._isMap=R,this._init$(void 0,R?-6:-3)}function p(M){var E,R=f(M);return y(R)?(E=R instanceof u?R._then(u.props,void 0,void 0,void 0,void 0):new v(R).promise(),R instanceof u&&E._propagateFrom(R,2),E):g("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var m,I=l("./util"),y=I.isObject,_=l("./es5");"function"==typeof Map&&(m=Map);var C=function(){function M(x,P){this[E]=x,this[E+R]=P,E++}var E=0,R=0;return function(x){R=x.size,E=0;var P=new Array(2*x.size);return x.forEach(M,P),P}}();I.inherits(v,h),v.prototype._init=function(){},v.prototype._promiseFulfilled=function(M,E){if(this._values[E]=M,++this._totalResolved>=this._length){var x;if(this._isMap)x=function(M){for(var E=new m,R=M.length/2|0,x=0;R>x;++x)E.set(M[R+x],M[x]);return E}(this._values);else{x={};for(var P=this.length(),F=0,k=this.length();k>F;++F)x[this._values[F+P]]=this._values[F]}return this._resolve(x),!0}return!1},v.prototype.shouldCopyValues=function(){return!1},v.prototype.getActualLength=function(M){return M>>1},u.prototype.props=function(){return p(this)},u.props=function(M){return p(M)}}},{"./es5":13,"./util":36}],26:[function(l,d,c){function h(f){this._capacity=f,this._length=0,this._front=0}h.prototype._willBeOverCapacity=function(f){return this._capacity<f},h.prototype._pushOne=function(f){var g=this.length();this._checkCapacity(g+1),this[this._front+g&this._capacity-1]=f,this._length=g+1},h.prototype.push=function(f,g,v){var p=this.length()+3;if(this._willBeOverCapacity(p))return this._pushOne(f),this._pushOne(g),void this._pushOne(v);var m=this._front+p-3;this._checkCapacity(p);var I=this._capacity-1;this[m+0&I]=f,this[m+1&I]=g,this[m+2&I]=v,this._length=p},h.prototype.shift=function(){var f=this._front,g=this[f];return this[f]=void 0,this._front=f+1&this._capacity-1,this._length--,g},h.prototype.length=function(){return this._length},h.prototype._checkCapacity=function(f){this._capacity<f&&this._resizeTo(this._capacity<<1)},h.prototype._resizeTo=function(f){var g=this._capacity;this._capacity=f,function(f,g,v,p,m){for(var I=0;m>I;++I)v[I+p]=f[I+0],f[I+0]=void 0}(this,0,this,g,this._front+this._length&g-1)},d.exports=h},{}],27:[function(l,d,c){d.exports=function(u,h,f,g){function v(I,y){var _=f(I);if(_ instanceof u)return m(_);if(null===(I=p.asArray(I)))return g("expecting an array or an iterable object but got "+p.classString(I));var C=new u(h);void 0!==y&&C._propagateFrom(y,3);for(var A=C._fulfill,M=C._reject,E=0,R=I.length;R>E;++E){var x=I[E];(void 0!==x||E in I)&&u.cast(x)._then(A,M,void 0,C,null)}return C}var p=l("./util"),m=function(I){return I.then(function(y){return v(y,I)})};u.race=function(I){return v(I,void 0)},u.prototype.race=function(){return v(this,void 0)}}},{"./util":36}],28:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(E,R,x,P){this.constructor$(E);var F=u._getContext();this._fn=A.contextBind(F,R),void 0!==x&&(x=u.resolve(x))._attachCancellationCallback(this),this._initialValue=x,this._currentCancellable=null,this._eachValues=P===v?Array(this._length):0===P?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function I(E,R){this.isFulfilled()?R._resolve(E):R._reject(E)}function y(E,R,x,P){return"function"!=typeof R?f("expecting a function but got "+A.classString(R)):new m(E,R,x,P).promise()}function _(E){this.accum=E,this.array._gotAccum(E);var R=g(this.value,this.array._promise);return R instanceof u?(this.array._currentCancellable=R,R._then(C,void 0,void 0,this,void 0)):C.call(this,R)}function C(E){var F,R=this.array,x=R._promise,P=M(R._fn);x._pushContext(),(F=void 0!==R._eachValues?P.call(x._boundValue(),E,this.index,this.length):P.call(x._boundValue(),this.accum,E,this.index,this.length))instanceof u&&(R._currentCancellable=F);var k=x._popContext();return p.checkForgottenReturns(F,k,void 0!==R._eachValues?"Promise.each":"Promise.reduce",x),F}var A=l("./util"),M=A.tryCatch;A.inherits(m,h),m.prototype._gotAccum=function(E){null!=this._eachValues&&E!==v&&this._eachValues.push(E)},m.prototype._eachComplete=function(E){return null!==this._eachValues&&this._eachValues.push(E),this._eachValues},m.prototype._init=function(){},m.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},m.prototype.shouldCopyValues=function(){return!1},m.prototype._resolve=function(E){this._promise._resolveCallback(E),this._values=null},m.prototype._resultCancelled=function(E){return E===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof u&&this._currentCancellable.cancel(),this._initialValue instanceof u&&this._initialValue.cancel()))},m.prototype._iterate=function(E){this._values=E;var R,x,P=E.length;void 0!==this._initialValue?(R=this._initialValue,x=0):(R=u.resolve(E[0]),x=1),this._currentCancellable=R;for(var F=x;P>F;++F){var k=E[F];k instanceof u&&k.suppressUnhandledRejections()}if(!R.isRejected())for(;P>x;++x)R=R._then(_,void 0,void 0,{accum:null,value:E[x],index:x,length:P,array:this},void 0),0==(127&x)&&R._setNoAsyncGuarantee();void 0!==this._eachValues&&(R=R._then(this._eachComplete,void 0,void 0,this,void 0)),R._then(I,I,void 0,R,this)},u.prototype.reduce=function(E,R){return y(this,E,R,null)},u.reduce=function(E,R,x,P){return y(E,R,x,P)}}},{"./util":36}],29:[function(l,d,c){var u,I,y,_,C,h=l("./util"),g=h.getNativePromise();if(h.isNode&&"undefined"==typeof MutationObserver){var v=global.setImmediate,p=process.nextTick;u=h.isRecentNode?function(I){v.call(global,I)}:function(I){p.call(process,I)}}else if("function"==typeof g&&"function"==typeof g.resolve){var m=g.resolve();u=function(I){m.then(I)}}else u="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(I){setImmediate(I)}:"undefined"!=typeof setTimeout?function(I){setTimeout(I,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(I=document.createElement("div"),y={attributes:!0},_=!1,C=document.createElement("div"),new MutationObserver(function(){I.classList.toggle("foo"),_=!1}).observe(C,y),function(E){var R=new MutationObserver(function(){R.disconnect(),E()});R.observe(I,y),_||(_=!0,C.classList.toggle("foo"))});d.exports=u},{"./util":36}],30:[function(l,d,c){d.exports=function(u,h,f){function g(m){this.constructor$(m)}var v=u.PromiseInspection;l("./util").inherits(g,h),g.prototype._promiseResolved=function(m,I){return this._values[m]=I,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseFulfilled=function(m,I){var y=new v;return y._bitField=33554432,y._settledValueField=m,this._promiseResolved(I,y)},g.prototype._promiseRejected=function(m,I){var y=new v;return y._bitField=16777216,y._settledValueField=m,this._promiseResolved(I,y)},u.settle=function(m){return f.deprecated(".settle()",".reflect()"),new g(m).promise()},u.allSettled=function(m){return new g(m).promise()},u.prototype.settle=function(){return u.settle(this)}}},{"./util":36}],31:[function(l,d,c){d.exports=function(u,h,f){function g(C){this.constructor$(C),this._howMany=0,this._unwrap=!1,this._initialized=!1}function v(C,A){if((0|A)!==A||0>A)return f("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var M=new g(C),E=M.promise();return M.setHowMany(A),M.init(),E}var p=l("./util"),m=l("./errors").RangeError,I=l("./errors").AggregateError,y=p.isArray,_={};p.inherits(g,h),g.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var C=y(this._values);!this._isResolved()&&C&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},g.prototype.init=function(){this._initialized=!0,this._init()},g.prototype.setUnwrap=function(){this._unwrap=!0},g.prototype.howMany=function(){return this._howMany},g.prototype.setHowMany=function(C){this._howMany=C},g.prototype._promiseFulfilled=function(C){return this._addFulfilled(C),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},g.prototype._promiseRejected=function(C){return this._addRejected(C),this._checkOutcome()},g.prototype._promiseCancelled=function(){return this._values instanceof u||null==this._values?this._cancel():(this._addRejected(_),this._checkOutcome())},g.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var C=new I,A=this.length();A<this._values.length;++A)this._values[A]!==_&&C.push(this._values[A]);return C.length>0?this._reject(C):this._cancel(),!0}return!1},g.prototype._fulfilled=function(){return this._totalResolved},g.prototype._rejected=function(){return this._values.length-this.length()},g.prototype._addRejected=function(C){this._values.push(C)},g.prototype._addFulfilled=function(C){this._values[this._totalResolved++]=C},g.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},g.prototype._getRangeError=function(C){return new m("Input array must contain at least "+this._howMany+" items but contains only "+C+" items")},g.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},u.some=function(C,A){return v(C,A)},u.prototype.some=function(C){return v(this,C)},u._SomePromiseArray=g}},{"./errors":12,"./util":36}],32:[function(l,d,c){d.exports=function(u){function h(y){void 0!==y?(y=y._target(),this._bitField=y._bitField,this._settledValueField=y._isFateSealed()?y._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}h.prototype._settledValue=function(){return this._settledValueField};var f=h.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},g=h.prototype.error=h.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},v=h.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},p=h.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},m=h.prototype.isPending=function(){return 0==(50397184&this._bitField)},I=h.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};h.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},u.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},u.prototype._isCancelled=function(){return this._target().__isCancelled()},u.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},u.prototype.isPending=function(){return m.call(this._target())},u.prototype.isRejected=function(){return p.call(this._target())},u.prototype.isFulfilled=function(){return v.call(this._target())},u.prototype.isResolved=function(){return I.call(this._target())},u.prototype.value=function(){return f.call(this._target())},u.prototype.reason=function(){var y=this._target();return y._unsetRejectionIsUnhandled(),g.call(y)},u.prototype._value=function(){return this._settledValue()},u.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},u.PromiseInspection=h}},{}],33:[function(l,d,c){d.exports=function(u,h){var I=l("./util"),y=I.errorObj,_=I.isObject,C={}.hasOwnProperty;return function(A,M){if(_(A)){if(A instanceof u)return A;var E=function(A){try{return function(A){return A.then}(A)}catch(M){return y.e=M,y}}(A);if(E===y){M&&M._pushContext();var R=u.reject(E.e);return M&&M._popContext(),R}if("function"==typeof E)return function(A){try{return C.call(A,"_promise0")}catch(M){return!1}}(A)?(R=new u(h),A._then(R._fulfill,R._reject,void 0,R,null),R):function(A,M,E){var P=new u(h),F=P;E&&E._pushContext(),P._captureStackTrace(),E&&E._popContext();var k=!0,w=I.tryCatch(M).call(A,function(S){P&&(P._resolveCallback(S),P=null)},function(S){P&&(P._rejectCallback(S,k,!0),P=null)});return k=!1,P&&w===y&&(P._rejectCallback(w.e,!0,!0),P=null),F}(A,E,M)}return A}}},{"./util":36}],34:[function(l,d,c){d.exports=function(u,h,f){function g(A){this.handle=A}function v(A){return clearTimeout(this.handle),A}function p(A){throw clearTimeout(this.handle),A}var m=l("./util"),I=u.TimeoutError;g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var y=function(A){return _(+this).thenReturn(A)},_=u.delay=function(A,M){var E,R;return void 0!==M?(E=u.resolve(M)._then(y,null,null,A,void 0),f.cancellation()&&M instanceof u&&E._setOnCancel(M)):(E=new u(h),R=setTimeout(function(){E._fulfill()},+A),f.cancellation()&&E._setOnCancel(new g(R)),E._captureStackTrace()),E._setAsyncGuaranteed(),E};u.prototype.delay=function(A){return _(A,this)},u.prototype.timeout=function(A,M){A=+A;var E,R,x=new g(setTimeout(function(){E.isPending()&&function(A,M,E){var R;R="string"!=typeof M?M instanceof Error?M:new I("operation timed out"):new I(M),m.markAsOriginatingFromRejection(R),A._attachExtraTrace(R),A._reject(R),null!=E&&E.cancel()}(E,M,R)},A));return f.cancellation()?(R=this.then(),(E=R._then(v,p,void 0,x,void 0))._setOnCancel(x)):E=this._then(v,p,void 0,x,void 0),E}}},{"./util":36}],35:[function(l,d,c){d.exports=function(u,h,f,g,v,p){function m(w){setTimeout(function(){throw w},0)}function y(w,S){var U=0,Z=w.length,ne=new u(v);return function L(){if(U>=Z)return ne._fulfill();var oe=function(w){var S=f(w);return S!==w&&"function"==typeof w._isDisposable&&"function"==typeof w._getDisposer&&w._isDisposable()&&S._setDisposable(w._getDisposer()),S}(w[U++]);if(oe instanceof u&&oe._isDisposable()){try{oe=f(oe._getDisposer().tryDispose(S),w.promise)}catch(ue){return m(ue)}if(oe instanceof u)return oe._then(L,m,null,null,null)}L()}(),ne}function _(w,S,L){this._data=w,this._promise=S,this._context=L}function C(w,S,L){this.constructor$(w,S,L)}function A(w){return _.isDisposer(w)?(this.resources[this.index]._setDisposable(w),w.promise()):w}function M(w){this.length=w,this.promise=null,this[w-1]=null}var E=l("./util"),R=l("./errors").TypeError,x=l("./util").inherits,P=E.errorObj,F=E.tryCatch,k={};_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():k},_.prototype.tryDispose=function(w){var S=this.resource(),L=this._context;void 0!==L&&L._pushContext();var U=S!==k?this.doDispose(S,w):null;return void 0!==L&&L._popContext(),this._promise._unsetDisposable(),this._data=null,U},_.isDisposer=function(w){return null!=w&&"function"==typeof w.resource&&"function"==typeof w.tryDispose},x(C,_),C.prototype.doDispose=function(w,S){return this.data().call(w,w,S)},M.prototype._resultCancelled=function(){for(var w=this.length,S=0;w>S;++S){var L=this[S];L instanceof u&&L.cancel()}},u.using=function(){var w=arguments.length;if(2>w)return h("you must pass at least 2 arguments to Promise.using");var S=arguments[w-1];if("function"!=typeof S)return h("expecting a function but got "+E.classString(S));var L,U=!0;2===w&&Array.isArray(arguments[0])?(w=(L=arguments[0]).length,U=!1):(L=arguments,w--);for(var Z=new M(w),ne=0;w>ne;++ne){var oe=L[ne];if(_.isDisposer(oe)){var ue=oe;(oe=oe.promise())._setDisposable(ue)}else{var X=f(oe);X instanceof u&&(oe=X._then(A,null,null,{resources:Z,index:ne},void 0))}Z[ne]=oe}var pe=new Array(Z.length);for(ne=0;ne<pe.length;++ne)pe[ne]=u.resolve(Z[ne]).reflect();var B=u.all(pe).then(function(G){for(var ee=0;ee<G.length;++ee){var ie=G[ee];if(ie.isRejected())return P.e=ie.error(),P;if(!ie.isFulfilled())return void B.cancel();G[ee]=ie.value()}K._pushContext(),S=F(S);var be=U?S.apply(void 0,G):S(G),Te=K._popContext();return p.checkForgottenReturns(be,Te,"Promise.using",K),be}),K=B.lastly(function(){var G=new u.PromiseInspection(B);return y(Z,G)});return Z.promise=K,K._setOnCancel(Z),K},u.prototype._setDisposable=function(w){this._bitField=131072|this._bitField,this._disposer=w},u.prototype._isDisposable=function(){return(131072&this._bitField)>0},u.prototype._getDisposer=function(){return this._disposer},u.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},u.prototype.disposer=function(w){if("function"==typeof w)return new C(w,this,g());throw new R}}},{"./errors":12,"./util":36}],36:[function(l,d,c){function u(){try{var ae=ue;return ue=null,ae.apply(this,arguments)}catch(V){return oe.e=V,oe}}function f(ae){return null==ae||!0===ae||!1===ae||"string"==typeof ae||"number"==typeof ae}function I(ae,V,Q){return f(ae)||Z.defineProperty(ae,V,{value:Q,configurable:!0,enumerable:!1,writable:!0}),ae}function E(ae){try{return ae+""}catch(V){return"[no string representation]"}}function R(ae){return ae instanceof Error||null!==ae&&"object"==typeof ae&&"string"==typeof ae.message&&"string"==typeof ae.name}function F(ae){return R(ae)&&Z.propertyIsWritable(ae,"stack")}function k(ae){return{}.toString.call(ae)}var ue,Z=l("./es5"),ne="undefined"==typeof navigator,oe={e:{}},X=void 0!==Bt?Bt:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,B=function(){var ae=[Array.prototype,Object.prototype,Function.prototype],V=function(H){for(var j=0;j<ae.length;++j)if(ae[j]===H)return!0;return!1};if(Z.isES5){var Q=Object.getOwnPropertyNames;return function(H){for(var j=[],q=Object.create(null);null!=H&&!V(H);){var re;try{re=Q(H)}catch(Ae){return j}for(var de=0;de<re.length;++de){var le=re[de];if(!q[le]){q[le]=!0;var we=Object.getOwnPropertyDescriptor(H,le);null!=we&&null==we.get&&null==we.set&&j.push(le)}}H=Z.getPrototypeOf(H)}return j}}var me={}.hasOwnProperty;return function(H){if(V(H))return[];var j=[];e:for(var q in H)if(me.call(H,q))j.push(q);else{for(var re=0;re<ae.length;++re)if(me.call(ae[re],q))continue e;j.push(q)}return j}}(),K=/this\s*\.\s*\S+\s*=/,G=/^[a-z$_][a-z$_0-9]*$/i,ee="stack"in new Error?function(ae){return F(ae)?ae:new Error(E(ae))}:function(ae){if(F(ae))return ae;try{throw new Error(E(ae))}catch(V){return V}},ie=function(ae){return Z.isArray(ae)?ae:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var be="function"==typeof Array.from?function(ae){return Array.from(ae)}:function(ae){for(var V,Q=[],me=ae[Symbol.iterator]();!(V=me.next()).done;)Q.push(V.value);return Q};ie=function(ae){return Z.isArray(ae)?ae:null!=ae&&"function"==typeof ae[Symbol.iterator]?be(ae):null}}var je,ae,Te="undefined"!=typeof process&&"[object process]"===k(process).toLowerCase(),Ge="undefined"!=typeof process&&void 0!==process.env,he={setReflectHandler:function(ae){je=ae},isClass:function(ae){try{if("function"==typeof ae){var V=Z.names(ae.prototype),Q=Z.isES5&&V.length>1,me=V.length>0&&!(1===V.length&&"constructor"===V[0]),H=K.test(ae+"")&&Z.names(ae).length>0;if(Q||me||H)return!0}return!1}catch(j){return!1}},isIdentifier:function(ae){return G.test(ae)},inheritedDataKeys:B,getDataPropertyOrDefault:function(ae,V,Q){if(!Z.isES5)return{}.hasOwnProperty.call(ae,V)?ae[V]:void 0;var me=Object.getOwnPropertyDescriptor(ae,V);return null!=me?null==me.get&&null==me.set?me.value:Q:void 0},thrower:function(ae){throw ae},isArray:Z.isArray,asArray:ie,notEnumerableProp:I,isPrimitive:f,isObject:function(ae){return"function"==typeof ae||"object"==typeof ae&&null!==ae},isError:R,canEvaluate:ne,errorObj:oe,tryCatch:function(ae){return ue=ae,u},inherits:function(ae,V){function Q(){for(var H in this.constructor=ae,this.constructor$=V,V.prototype)me.call(V.prototype,H)&&"$"!==H.charAt(H.length-1)&&(this[H+"$"]=V.prototype[H])}var me={}.hasOwnProperty;return Q.prototype=V.prototype,ae.prototype=new Q,ae.prototype},withAppended:function(ae,V){var Q,me=ae.length,H=new Array(me+1);for(Q=0;me>Q;++Q)H[Q]=ae[Q];return H[Q]=V,H},maybeWrapAsError:function(ae){return f(ae)?new Error(E(ae)):ae},toFastProperties:function(ae){function V(){}function Q(){return typeof me.foo}V.prototype=ae;var me=new V;return Q(),Q(),ae},filledRange:function(ae,V,Q){for(var me=new Array(ae),H=0;ae>H;++H)me[H]=V+H+Q;return me},toString:E,canAttachTrace:F,ensureErrorObject:ee,originatesFromRejection:function(ae){return null!=ae&&(ae instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===ae.isOperational)},markAsOriginatingFromRejection:function(ae){try{I(ae,"isOperational",!0)}catch(V){}},classString:k,copyDescriptors:function(ae,V,Q){for(var me=Z.names(ae),H=0;H<me.length;++H){var j=me[H];if(Q(j))try{Z.defineProperty(V,j,Z.getDescriptor(ae,j))}catch(q){}}},isNode:Te,hasEnvVariables:Ge,env:function(ae){return Ge?process.env[ae]:void 0},global:X,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===k(new Promise(function(){})))return Promise}catch(V){}},contextBind:function(ae,V){if(null===ae||"function"!=typeof V||V===je)return V;null!==ae.domain&&(V=ae.domain.bind(V));var Q=ae.async;if(null!==Q){var me=V;V=function(){var H=new Array(2).concat([].slice.call(arguments));return H[0]=me,H[1]=this,Q.runInAsyncScope.apply(Q,H)}}return V}};he.isRecentNode=he.isNode&&(process.versions&&process.versions.node?ae=process.versions.node.split(".").map(Number):process.version&&(ae=process.version.split(".").map(Number)),0===ae[0]&&ae[1]>10||ae[0]>0),he.nodeSupportsAsyncResource=he.isNode&&function(){var ae=!1;try{ae="function"==typeof l("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(Q){ae=!1}return ae}(),he.isNode&&he.toFastProperties(process);try{throw new Error}catch(ae){he.lastLineError=ae}d.exports=he},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:null!=Bt&&(Bt.P=Bt.Promise),t.Promise=Promise,t.nativePromise||(t.nativePromise=t.Promise)}}(T),function(e){var r=20211022;e._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",e._defaultPlatform="Win32",!(e._navInfo_ver&&e.isNumber(e._navInfo_ver)&&e._navInfo_ver>=r)&&(e._navInfo_ver=r,e.getNavInfoSync=function(){var m,n=e.win,s=n.location.protocol,o="https:"===s,l="https:"!==s&&"http:"!==s,d=!1,c=!1,u=!0,h=!0,f=!1,g=0,v=0;if(T.navInfo)m=T.navInfo;else{e.getNavInfo();var I=navigator;m=e.getNavInfoByUserAgent(I.userAgent,I.platform)}return"userAgentData"in navigator?f=m.bMobile||navigator.userAgentData.mobile:(c=(m=T.navInfo).bEdge,h=m.bGecko,f=m.bMobile||m.bPad||m.bChromeOS,(d=m.bIE)&&(g=m.strBrowserVersion,v=m.IEMode),u=m.bHTML5Edition),{host:n,bSSL:o,bFileSystem:l,bIE:d,bEdge:c,bGecko:h,bMobile:f,IEVersion:g,IEMode:v,bHTML5Edition:u,nodejs:!1}},e.getNavInfoByUAData=function(t){var i=function(n){var l,_,a=navigator.userAgentData,s=a.mobile,d=n.platform.toLowerCase(),f=(n.architecture.toLowerCase(),"64"==n.bitness),g=d.indexOf("mac")>=0,v=d.indexOf("chrome os")>=0,p=navigator.userAgent.toLowerCase(),m=/harmonyos/g.test(p),I=/arm64|aarch64/g.test(p),y=/mips64/g.test(p);return s||/mobile/g.test(p)&&(s=!0),_=/aarch64|arm64|mips64/g.test(p),"brands"in a&&e.isArray(a.brands)&&a.brands.length>0?(a.brands[0].brand.toLowerCase(),l=a.brands[0].version):"uaList"in a&&e.isArray(a.uaList)&&a.uaList.length>0&&(a.uaList[0].brand.toLowerCase(),l=a.uaList[0].version),"linux"==navigator.platform&&p.indexOf("windows nt")>=0&&(d="",m=!0,s=!0),{bWin:"windows"==d,bMac:g,bLinux:"linux"==d,bAndroid:!1,bMobile:s,bPad:!1,bChromeOS:v,bHarmonyOS:m,bArm64:I,bMips64:y,bEmbed:_,bOSx64:f,bIE:!1,bEdge:!1,bChrome:!0,bFirefox:!1,bSafari:!1,bOpera:!1,bGecko:!0,bHTML5Edition:!0,strBrowserVersion:l,IEMode:!1,bQuerySelectorSupported:!0,nativeJson:!0,scrollBarWidth:!1}};return t?Promise.resolve(function(){return i(t)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(i)},e.asyncGetNavInfo=function(){if(T.navInfo)return Promise.resolve(T.navInfo);var t=navigator;return"userAgent"in t?(T.navInfo=e.getNavInfoByUserAgent(t.userAgent,t.platform),Promise.resolve(T.navInfo)):"userAgentData"in t?e.getNavInfoByUAData().then(function(i){return T.navInfo=i,i}):(T.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),Promise.resolve(T.navInfo))},e.getNavInfo=function(){if(T.navInfo)return T.navInfo;var t=navigator;return"userAgent"in t?(T.navInfo=e.getNavInfoByUserAgent(t.userAgent,t.platform),T.navInfo):"userAgentData"in t?(e.getNavInfoByUAData().then(function(i){T.navInfo=i}),!1):(T.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),T.navInfo)},T.navInfoSync=e.getNavInfoSync())}(T.Lib),function(e,r){var t=e.Lib,i=e.navInfoSync,n=20200521;if(!(t._ls_ver&&t.isNumber(t._ls_ver)&&t._ls_ver>=n)){t._ls_ver=n;var a=!1,s=!1;if(!(i.bEdge&&i.bFileSystem||i.bIE&&i.IEVersion<8))try{s=window.localStorage,a=!!s}catch(l){s=!1}t.LS={isSupportLS:function(){return a},item:function(l,d,c){var u=null;return this.isSupportLS()?(d?(s.setItem(l,d),u=d):u=s.getItem(l),null===u?c:u):c},removeItem:function(l){return!!this.isSupportLS()&&(s.removeItem(l),!0)}}}}(T),function(e,r){var t=20200708;if(!(e._utilities_ver&&e._utilities_ver>=t)){e._utilities_ver=t;var n=e.win,a=e.doc,s=T.navInfoSync,_=(e.getLogger(),0),C=[],R=/\S/,x=!(!a||!a.addEventListener),P="DOMContentLoaded",F="readystatechange",k="load",w="complete",S=x?function(ne,oe,ue){ne.addEventListener(oe,ue,!1)}:function(ne,oe,ue){ne.attachEvent("on"+oe,ue)},L=x?function(ne,oe,ue){ne.removeEventListener(oe,ue,!1)}:function(ne,oe,ue){ne.detachEvent("on"+oe,ue)};if(e.mix(e,{isWindow:function(ne){return null!=ne&&ne==ne.window},globalEval:function(ne){ne&&R.test(ne)&&(n.execScript?n.execScript(ne):n.eval.call(n,ne))},domReady:function(ne){if(_)try{ne(e)}catch(oe){e.log(oe.stack||oe,"error"),setTimeout(function(){throw oe},0)}else C.push(ne);return this}}),e.ready=e.domReady,e.checkDomReady=function(){_||(_=1,e.asyncGetNavInfo().then(function(ne){a&&!s.nodejs&&L(n,k,e.checkDomReady),function(){for(var ne=0;ne<C.length;ne++)try{C[ne](e)}catch(oe){e.log(oe.stack||oe,"error"),setTimeout(function(){throw oe},0)}}()}))},function(){if(a&&a.readyState!==w)if(S(n,k,e.checkDomReady),x){var ne=function(){L(a,P,ne),e.checkDomReady()};S(a,P,ne)}else{var oe=function(){a.readyState===w&&(L(a,F,oe),e.checkDomReady())};S(a,F,oe);var ue,X=a&&a.documentElement,pe=X&&X.doScroll;try{ue=null===n.frameElement}catch(K){ue=!1}if(pe&&ue){var B=function(){try{pe("left"),setTimeout(e.checkDomReady,30)}catch(K){setTimeout(B,40)}};B()}}else e.checkDomReady()}(),T.navInfoSync.bIE)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(ne){}}}(T.Lib),function(e){var r=20200521;if(!(e._domUtil_ver&&e._domUtil_ver>=r)){e._domUtil_ver=r;var i="none";e.mix(e,{get:function(n){return e.doc.getElementById(n)},hide:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display=i)},show:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display="")},toggle:function(n){var a=e.isString(n)?e.get(n):n;a&&(a.style.display=a.style.display===i?"":i)},empty:function(n){if(n)for(;n.firstChild;)n.removeChild(n.firstChild)}})}}(T.Lib),function(e){var r=e.Lib,t=20200521;r._color_ver&&r.isNumber(r._color_ver)&&r._color_ver>=t||(r._color_ver=t,r.colorStrToInt=function(i){var a,s,n="0x";if(/^(rgb|RGB)/.test(i)){var o=i.replace(/[^\d,.]/g,"").split(",");for(s=0;s<3;++s)1==(a=Number(o[s]).toString(16)).length&&(a="0"+a),n+=a;4==o.length?(1==(a=Math.round(255*Number(o[s])).toString(16)).length&&(a="0"+a),n+=a):n+="ff"}else if("transparent"==i)n+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(i))n+=i.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(i)){for(s=0;s<3;++s)n+=i[s]+i[s];n+="ff"}else n="-1";return Number(n)},r.IntToColorStr=function(i){if(i>4294967295||i<0)return null;var n;if(T.navInfoSync.bHTML5Edition)n="rgba("+Math.floor(i/16777216)+","+Math.floor(i/65536)%256+","+Math.floor(i/256)%256+","+i%256/255+")";else if(i%256==0)n="transparent";else{for(n=Math.floor(i/256).toString(16);6!=n.length;)n="0"+n;n="#"+n}return n})}(T),function(e,r){var t=e.Lib,i=20211014;t._ajax_ver&&t.isNumber(t._ajax_ver)&&t._ajax_ver>=i||(t._ajax_ver=i,t.asyncGetNavInfo().then(function(n){var Z,ue,a=n.bIE&&parseInt(n.strBrowserVersion)<=9,s=n.bIE&&parseInt(n.strBrowserVersion)<=10,o=t.win,l=t.each,f=200,A=new t.Uri(location.href),M=A&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(A.getScheme()),R=function(){try{return new o.XMLHttpRequest}catch(X){}},x=function(){try{var X=!1;return l(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(pe){try{return X=new o.ActiveXObject(pe)}catch(B){t.error("new xhr error: "+B.message)}}),X}catch(pe){}},P=!(M||!o.XMLHttpRequest)&&"withCredentials"in(R()||[]),F=o.ActiveXObject?function(X){return a?x():!M&&R()||x()}:R,w=/^(?:GET|HEAD)$/,S=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},U=void 0;function ne(){}function oe(X){if(X&&t.isString(X.url)){var pe=new ne;return pe.sendInternal(X),pe}t.log("the url is error.")}Z=Bt&&Bt.fetch?Bt.fetch:o.fetch,s&&(U=t.noop),t.mix(ne.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(X,pe){return this.headers[X]=pe,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(X){var pe,K,B=this;if(X=X.toLowerCase(),2===B.state){if(!(K=B.responseHeaders))for(K=B.responseHeaders={};pe=S.exec(B.responseHeadersString);)K[pe[1].toLowerCase()]=pe[2];pe=K[X]}return void 0===pe?null:pe},overrideMimeType:function(X){return this.state||(this.mimeType=X),this},abort:function(X){var pe=this;return X=X||"abort",pe.state=3,pe.status=0,pe.statusText=X,pe.nativeXhr&&pe.nativeXhr.abort(),pe._callback(),pe},_ioReady:function(X,pe){var B=this,K=!1;if(2!==B.state&&3!==B.state){1===B.state&&(B.state=2),B.readyState=4,X>=f&&X<300||304===X?304===X?(pe="not modified",K=!0):(pe="success",K=!0):X<0&&(X=0);try{X>=f&&B.handleResponseData()}catch(G){t.error(G.stack||G,"error"),pe=G.message||"parser error"}if((X<f||!K)&&B.retry>0)return B.retry=B.retry-1,void setTimeout(function(){B.sendInternal()},200);B.status=X,B.statusText=pe,B._callback(K)}},_callback:function(X){var pe=this,B=pe.timeoutTimer;B&&(clearTimeout(B),pe.timeoutTimer=0),l([X?pe.onSuccess:pe.onError,pe.onComplete],function(K){t.isFunction(K)&&K.apply(pe.context,[pe.responseData,pe.statusText,pe])}),pe.responseData=null},handleResponseData:function(){var pe,X=this,B=X.dataType,K=X.nativeXhr;if("blob"===B||"arraybuffer"===B)if(a){var G,ee,ie;if("responseBody"in K)G=K.responseBody,ee=dsVbsBinGetLength(G),pe=new VBArray(dsVbsBinGetBytes(G,0,ee)).toArray();else for(pe=[],ee=(G=K.responseText).length,ie=0;ie<ee;++ie)pe.push(255&G.charCodeAt(ie));G=null}else pe=o.Blob?K.response:"responseBody"in K?K.responseBody:K.responseText;else if("json"==B)pe=K.responseType&&"json"==K.responseType.toLowerCase()?K.response:K.responseText?(o.JSON&&o.JSON.parse?o.JSON.parse:t.parse)(K.responseText):{};else if("user-defined"===B)pe=void 0!==K.response?K.response:K.responseText;else{X.responseText=pe=K.responseText||"";try{var be=K.responseXML;be&&be.documentElement&&(X.responseXML=be)}catch(Te){}}X.responseData=pe},sendInternal:function(X){var B,G,ee,ie,be,Te,Ge,je,he,ae,V,pe=this;if(B=pe._setup(X),t.isString(G=B.method)&&(G=G.toUpperCase()),be=B.contentType,ie=B.dataType,je=B.mimeType,t.isString(ee=B.url)&&(pe.nativeXhr=Te=F(B.crossDomain),Te)){try{if(pe.state=1,B.username?Te.open(G,ee,B.async,B.username,B.password):Te.open(G,ee,B.async),(B.async||n.bIE)&&ie&&"user-defined"!=ie&&"responseType"in Te)try{Te.responseType=ie}catch(H){}}catch(H){return void(pe.state<2?(t.error(H.stack||H,"error"),pe._ioReady(-1,"open error: "+(t.isNumber(H.number)?"("+H.number+")":"")+(H.message||""))):t.error(H))}"withCredentials"in(Ge=B.xhrFields||{})&&(P||delete Ge.withCredentials),l(Ge,function(H,j){try{Te[j]=H}catch(q){t.error(q)}}),je&&Te.overrideMimeType&&Te.overrideMimeType(je),!1===(he=B.headers||{})["X-Requested-With"]&&delete he["X-Requested-With"],"setRequestHeader"in Te&&(be&&Te.setRequestHeader("Content-Type",B.contentType),Te.setRequestHeader("Accept",ie&&L[ie]?L[ie]+("*"===ie?"":", */*; q=0.01"):L["*"]),l(he,function(H,j){Te.setRequestHeader(j,H)})),B.cache||(Te.setRequestHeader("If-Modified-Since","0"),Te.setRequestHeader("Cache-Control","no-cache")),V=(ae=!w.test(B.method))&&B.data||null,ae&&a&&(V=B.data),B.async&&B.timeout>0&&(B.timeout<300&&(B.timeout=300),pe.timeoutTimer=setTimeout(function(){pe.abort("timeout")},B.timeout));try{if(pe.state=1,t.isFunction(pe.beforeSend)&&!1===pe.beforeSend(Te,pe))return void pe.abort("cancel");Te.send(V),V=null,B.data=null,t.isFunction(pe.afterSend)&&pe.afterSend(pe)}catch(H){pe.state<2?(t.error(H.stack||H,"error"),pe._ioReady(-1,"send error: "+(H.message||""))):t.error(H)}B.async&&4!==Te.readyState?Te.onreadystatechange=function(){pe._xhrCallback()}:pe._xhrCallback()}},_xhrCallback:function(X,pe){var B=this,K=B.nativeXhr;try{if(4===K.readyState||pe)if(K.onreadystatechange=U,pe)4!==K.readyState&&K.abort();else{B.responseHeadersString=K.getAllResponseHeaders();var ee,G=K.status;try{ee=K.statusText}catch(ie){t.error("xhr statusText error: "),t.error(ie),ee=""}B._ioReady(G,ee)}}catch(ie){t.error(ie.stack||ie,"error"),K.onreadystatechange=U,pe||B._ioReady(-1,ie.message||"process error")}},_setup:function(X){var B,K,G,ee,ie,pe=this;if(X){for(K in pe.context=X.context,delete X.context,X instanceof ne&&(X=X.config),pe.config=X,t.startsWith(ee=X.url,"http://")||t.startsWith(ee,"https://")?ie=new t.Uri(ee):(t.startsWith(ee,"//")&&(X.url=ee="http:"+ee),ie=A.resolve(ee)),B=X.dataType?X.dataType.toLowerCase():"text",X.dataType=B,X.method=X.method?X.method.toUpperCase():"GET","crossDomain"in X||(X.crossDomain=!ie.isSameOriginAs(A)),G=X.headers)t.isUndefined(G[K])&&delete G[K];t.mix(pe,X)}return pe.state=1,pe}}),t.mix(t,{ajax:oe,io:{get:function(X,pe,B,K){return oe({method:"GET",url:X,onSuccess:pe,onError:B,dataType:K})},post:function(X,pe,B,K,G){return oe({method:"POST",data:pe,url:X,onSuccess:B,onError:K,dataType:G})},put:function(X,pe,B,K,G){return oe({method:"PUT",data:pe,url:X,onSuccess:B,onError:K,dataType:G})}}}),Z?t.fetch=function(X,pe){var G,ee,B="text",K=!1;return pe&&(pe.dataType&&(B=pe.dataType),pe.fetchRaw&&(K=!0)),G=Z(X,pe),Promise!=t.nativePromise?(ee=Promise,Promise=t.nativePromise,G=G.then(function(ie){if(Promise=ee,ie.ok)return ie;throw{httpCode:ie.status,errorString:["HTTP process error: ",ie.statusText," (",ie.status,")."].join("")}})):G=G.then(function(ie){if(ie.ok)return ie;throw{httpCode:ie.status,errorString:["HTTP process error: ",ie.statusText," (",ie.status,")."].join("")}}),K||(G=G.then("blob"==B?function(ie){return ie.blob()}:"json"==B?function(ie){return ie.json()}:"arraybuffer"==B?function(ie){return ie.arrayBuffer()}:function(ie){return ie.text()})),G}:(a&&t.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),Promise!=t.nativePromise&&(ue=Promise,Promise=t.nativePromise),t.fetch=function(X,pe){return new Promise(function(B,K){var ie={url:X,onSuccess:function(Te,Ge,je){ue&&(Promise=ue),B(Te)},onError:function(Te,Ge,je){ue&&(Promise=ue),K({httpCode:je.status,errorString:Ge})},dataType:"text"},be=!1;pe&&(pe.method&&(ie.method=pe.method),pe.body&&(ie.data=pe.body),pe.headers&&(ie.headers||(ie.headers={}),l(pe.headers,function(Te,Ge){"content-type"==Ge.toLowerCase()&&(be=!0),ie.headers[Ge]=Te})),pe.dataType&&(ie.dataType=pe.dataType),pe.contentType&&(ie.contentType=pe.contentType)),be&&(ie.contentType=!1),"blob"==ie.dataType&&a&&(ie.mimeType="text/plain; charset=x-user-defined"),t.ajax(ie)})})}))}(T),function(e){var r=20200521;if(!(e._customEvt_ver&&e.isNumber(e._customEvt_ver)&&e._customEvt_ver>=r)){e._customEvt_ver=r;var t={fire:function(i){var a,n=this;n.exec=n.exec||{},i=i.toLowerCase(),a=Array.prototype.slice.call(arguments,1),e.each(n.exec[i]||[],function(s){var o=s.f,l=s.c||n;try{o.apply(l,a)}catch(d){e.log(d)}})},on:function(i,n,a){var s=this;s.exec=s.exec||{},i=i.toLowerCase(),s.exec[i]=s.exec[i]||[],s.exec[i].push({f:n,c:a})},off:function(i,n,a){var o=this.exec;if(o){if(!i)return void(this.exec=null);if(i=i.toLowerCase(),!n)return void(o[i]=null);for(var l=o[i]||[],d=l.length-1;d>=0;d--)l[d]===n&&l.splice(d,1)}}};e.obj={customEvent:t}}}(T.Lib),function(e){var a,r=e.Lib,i=!0,n=r.win.document,s=20200521;r._evtBase_ver&&r.isNumber(r._evtBase_ver)&&r._evtBase_ver>=s||(r._evtBase_ver=s,a=function(o){return T.navInfoSync.bGecko&&"mousewheel"===o?"DOMMouseScroll":o},r.mix(r,{addEventListener:n.addEventListener?function(o,l,d){var c=a(l);o&&o.addEventListener(c,d,!1)}:function(o,l,d){var c=a(l);o&&o.attachEvent("on"+c,d)},removeEventListener:n.removeEventListener?function(o,l,d){var c=a(l);o&&o.removeEventListener(c,d,!1)}:function(o,l,d){var c=a(l);o&&o.detachEvent("on"+c,d)},stopPropagation:function(o){var l=o||window.event;l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation(),l.returnValue=!1,l.cancelBubble=!0},fireEvent:function(o,l){var d;n.createEvent?((d=n.createEvent("HTMLEvents")).initEvent(o,i,i),l.dispatchEvent&&l.dispatchEvent(d)):n.createEventObject?((d=n.createEventObject()).bubbles=i,d.cancelable=i,l.fireEvent(o,d)):(d=new Event(o),l.dispatchEvent&&l.dispatchEvent(d))}}))}(T),function(e,r){var t=20200716;if(!(e._loadbase64_ver&&e._loadbase64_ver>=t)){e._loadbase64_ver=t;var i={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};e.base64={UTF16ToUTF8:function(s){for(var d,c,o=[],l=s.length,u=0;u<l;u++){var h=s.charCodeAt(u);if(h>0&&h<=127)o.push(s.charAt(u));else if(h>=128&&h<=2047)d=192|h>>6&31,c=128|63&h,o.push(String.fromCharCode(d),String.fromCharCode(c));else if(h>=2048&&h<=65535){d=224|h>>12&15,c=128|h>>6&63;var f=128|63&h;o.push(String.fromCharCode(d),String.fromCharCode(c),String.fromCharCode(f))}}return o.join("")},UTF8ToUTF16:function(s){var d,h,f,v,o=[],l=s.length;for(d=0;d<l;d++)0==((h=s.charCodeAt(d))>>7&255)?o.push(s.charAt(d)):6==(h>>5&255)?(v=(31&h)<<6|63&(f=s.charCodeAt(++d)),o.push(String.fromCharCode(v))):14==(h>>4&255)&&(v=(255&(h<<4|(f=s.charCodeAt(++d))>>2&15))<<8|(3&f)<<6|63&s.charCodeAt(++d),o.push(String.fromCharCode(v)));return o.join("")},encode:function(s){for(var u,h,f,o=this.UTF16ToUTF8(s),l=[],d=0,c=o.length;d<c;){if(u=255&o.charCodeAt(d++),d==c){l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4)),l.push("==");break}if(h=o.charCodeAt(d++),d==c){l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4|(240&h)>>4)),l.push(i.encodeChars.charAt((15&h)<<2)),l.push("=");break}f=o.charCodeAt(d++),l.push(i.encodeChars.charAt(u>>2)),l.push(i.encodeChars.charAt((3&u)<<4|(240&h)>>4)),l.push(i.encodeChars.charAt((15&h)<<2|(192&f)>>6)),l.push(i.encodeChars.charAt(63&f))}return l.join("")},encodeArray:function(s){for(var c,u,h,o=[],l=0,d=s.length;l<d;){if(c=255&s[l++],l==d){o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4)),o.push("==");break}if(u=255&s[l++],l==d){o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4|(240&u)>>4)),o.push(i.encodeChars.charAt((15&u)<<2)),o.push("=");break}h=255&s[l++],o.push(i.encodeChars.charAt(c>>2)),o.push(i.encodeChars.charAt((3&c)<<4|(240&u)>>4)),o.push(i.encodeChars.charAt((15&u)<<2|(192&h)>>6)),o.push(i.encodeChars.charAt(63&h))}return o.join("")},decode:function(s,o){for(var h,f,g,v,l=this,d=[],c=0,u=s.length;c<u;){do{h=i.decodeChars[255&s.charCodeAt(c++)]}while(c<u&&-1==h);if(-1==h)break;do{f=i.decodeChars[255&s.charCodeAt(c++)]}while(c<u&&-1==f);if(-1==f)break;d.push(o?h<<2|(48&f)>>4:String.fromCharCode(h<<2|(48&f)>>4));do{if(61==(g=255&s.charCodeAt(c++)))return o?d:l.UTF8ToUTF16(d.join(""));g=i.decodeChars[g]}while(c<u&&-1==g);if(-1==g)break;d.push(o?(15&f)<<4|(60&g)>>2:String.fromCharCode((15&f)<<4|(60&g)>>2));do{if(61==(v=255&s.charCodeAt(c++)))return o?d:l.UTF8ToUTF16(d.join(""));v=i.decodeChars[v]}while(c<u&&-1==v);if(-1==v)break;d.push(o?(3&g)<<6|v:String.fromCharCode((3&g)<<6|v))}return o?d:l.UTF8ToUTF16(d.join(""))}},e.utf8={fromUTF16:function(s){for(var c,o=[],l=0,d=s.length;l<d;)(c=s.charCodeAt(l))>=1&&c<=127?o.push(s.charAt(l)):c>2047?(o.push(String.fromCharCode(224|c>>12&15)),o.push(String.fromCharCode(128|c>>6&63)),o.push(String.fromCharCode(128|c>>0&63))):(o.push(String.fromCharCode(192|c>>6&31)),o.push(String.fromCharCode(128|c>>0&63))),l++;return o.join("")},toUTF16:function(s){for(var c,u,h,o=[],l=0,d=s.length;l<d;)switch(c=s.charCodeAt(l++),c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(s.charAt(l-1));break;case 12:case 13:u=s.charCodeAt(l++),o.push(String.fromCharCode((31&c)<<6|63&u));break;case 14:u=s.charCodeAt(l++),h=s.charCodeAt(l++),o.push(String.fromCharCode((15&c)<<12|(63&u)<<6|(63&h)<<0))}return o.join("")}};var n="undefined"!=typeof exports?exports:void 0!==Bt?Bt:$.global;(a.prototype=new Error).name="InvalidCharacterError",e.btoa=n.btoa?function(s){return n.btoa(s)}:function(s){for(var l,d,o=String(s),c=0,u=i.encodeChars,h="";o.charAt(0|c)||(u="=",c%1);h+=u.charAt(63&l>>8-c%1*8)){if((d=o.charCodeAt(c+=3/4))>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");l=l<<8|d}return h},e.atob=n.atob?function(s){return n.atob(s)}:function(s){var o=String(s).replace(/[=]+$/,"");if(o.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,c,l=0,u=0,h="";c=o.charAt(u++);~c&&(d=l%4?64*d+c:c,l++%4)?h+=String.fromCharCode(255&d>>(-2*l&6)):0)c=i.encodeChars.indexOf(c);return h}}function a(s){this.message=s}}(T.Lib),function(e){var r=20210107;if(!(e._loadjs_ver&&e._loadjs_ver>=r)){e._loadjs_ver=r;var n=e.doc,a=n&&n.documentElement,s=n.getElementsByTagName("head")[0]||a,o=n.createElement("script").readyState?function(l,d){var c=l.onreadystatechange;l.onreadystatechange=function(){var u=l.readyState;"loaded"===u||"complete"===u?(l.onreadystatechange=null,c&&c(),d.call(this,!0)):"loading"===u||d.call(this,!1)}}:function(l,d){l.addEventListener("load",d,!1),l.addEventListener("error",d,!1)};e.scriptOnload=o,e.getScript=function(l,d,c){var u,h;if(e.isFunction(c)||(c=function(){}),e.isString(l)&&""!=l)return u=n.createElement("script"),h=["",l].join(""),u.src=h,d&&(u.async=!0),u.charset="utf-8",o(u,c),s.insertBefore(u,s.firstChild),u;c()},e.getScripts=function(l,d,c){if(e.isArray(l)){var u=l.length,h=function(f){f?u--:c(),u<=0&&c("ok")};u<=0?c("ok"):e.each(l,function(f){e.getScript(f,d,h)})}else c()},e.getCss=function(l,d){var c,u=d;if(e.isFunction(u)||(u=!1),e.isString(l)&&""!=l)return(c=n.createElement("link")).href=l,c.rel="stylesheet",c.async=!0,u&&o(c,u),s.insertBefore(c,s.firstChild),c;u&&u()},e.getAllCss=function(l,d){if(e.isArray(l)){var c=l.length,u=function(h){h?c--:d(),c<=0&&d("ok")};e.each(l,function(h){e.getCss(h,u)})}else d()},e.addScript=function(l){var d,c;e.isString(c=l.body)&&""!=c&&((d=n.createElement("script")).charset="utf-8",T.navInfoSync.bIE?d.text=c:d.appendChild(n.createTextNode(c)),d.language=l.language?l.language:"javascript",d.type=l.type?l.type:"text/javascript",s.insertBefore(d,s.firstChild))},e.addJS=function(l){e.addScript({body:l})},e.addVBS=function(l){e.addScript({body:l,language:"vbscript",type:"text/vbscript"})}}}(T.Lib),function(e){var r=e.Lib,t=20210601;if(!(r._asyncQueue_ver&&r.isNumber(r._asyncQueue_ver)&&r._asyncQueue_ver>=t)){r._asyncQueue_ver=t;var i={queue:[],doNextStarted:!1,timer:!1,pushToDo:function(n,a,s){i.queue.push({obj:n,method:a,args:s})},doNext:function(){if(!i.doNextStarted)return clearTimeout(i.timer),void(i.timer=!1);if(0!=i.queue.length){var n=i.queue[0],a=n.obj,s=n.method,o=n.args;if(i.queue.splice(0,1),a&&r.isFunction(a[s])){var l=!1;if(o.length>2){var d=o[o.length-2],c=o[o.length-1];r.isFunction(d)&&r.isFunction(c)&&(o[o.length-2]=function(){try{d.apply(a,arguments)}catch(u){}i.timer=setTimeout(i.doNext,0)},o[o.length-1]=function(){try{c.apply(a,arguments)}catch(u){}i.timer=setTimeout(i.doNext,0)},l=!0)}try{a[s].apply(a,o)}catch(u){}l||(i.timer=setTimeout(i.doNext,0))}else if(null===a&&r.isFunction(s)){try{s.apply(null,o)}catch(u){}i.timer=setTimeout(i.doNext,0)}else r.log("not invoke a function: "+s),i.timer=setTimeout(i.doNext,0)}else i.timer=setTimeout(i.doNext,500)},start:function(){i.doNextStarted||(i.doNextStarted=!0,i.timer=setTimeout(i.doNext,0))},stop:function(){clearTimeout(i.timer),i.doNextStarted=!1,i.queue=[]}};r.asyncQueue=i}}(T),function(e){var r=20200521;if(!(e._sprintf_ver&&e._sprintf_ver>=r)){e._sprintf_ver=r;var t,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},s=Object.create?Object.create(null):{};e.sprintf=t=function(d){return a(o(d),arguments)},e.vsprintf=function(d,c){return t.apply(null,[d].concat(c||[]))}}function n(d,c){if("_".repeat)return d.repeat(c);for(var u=0,h=[];u<c;u++)h.push(d);return h.join("")}function a(d,c){var f,v,p,m,I,y,_,C,A,u=1,h=d.length,g="";for(v=0;v<h;v++)if("string"==typeof d[v])g+=d[v];else if("object"==typeof d[v]){if((m=d[v]).keys)for(f=c[u],p=0;p<m.keys.length;p++){if(null==f)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[p],m.keys[p-1]));f=f[m.keys[p]]}else f=m.param_no?c[m.param_no]:c[u++];if(i.not_type.test(m.type)&&i.not_primitive.test(m.type)&&f instanceof Function&&(f=f()),i.numeric_arg.test(m.type)&&"number"!=typeof f&&isNaN(f))throw new TypeError(t("[sprintf] expecting number but found %T",f));switch(i.number.test(m.type)&&(C=f>=0),m.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,m.width?parseInt(m.width):0);break;case"e":f=m.precision?parseFloat(f).toExponential(m.precision):parseFloat(f).toExponential();break;case"f":f=m.precision?parseFloat(f).toFixed(m.precision):parseFloat(f);break;case"g":f=m.precision?String(Number(f.toPrecision(m.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=m.precision?f.substring(0,m.precision):f;break;case"t":f=String(!!f),f=m.precision?f.substring(0,m.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=m.precision?f.substring(0,m.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=m.precision?f.substring(0,m.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}i.json.test(m.type)?g+=f:(!i.number.test(m.type)||C&&!m.sign?A="":(A=C?"+":"-",f=f.toString().replace(i.sign,"")),y=m.pad_char?"0"===m.pad_char?"0":m.pad_char.charAt(1):" ",_=m.width-(A+f).length,I=m.width&&_>0?n(y,_):"",g+=m.align?A+f+I:"0"===y?A+I+f:I+A+f)}return g}function o(d){if(s[d])return s[d];for(var u,c=d,h=[],f=0;c;){if(null!==(u=i.text.exec(c)))h.push(u[0]);else if(null!==(u=i.modulo.exec(c)))h.push("%");else{if(null===(u=i.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){f|=1;var g=[],v=u[2],p=[];if(null===(p=i.key.exec(v)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(p[1]);""!==(v=v.substring(p[0].length));)if(null!==(p=i.key_access.exec(v)))g.push(p[1]);else{if(null===(p=i.index_access.exec(v)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(p[1])}u[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}c=c.substring(u[0].length)}return s[d]=h,h}}(T.Lib),function(e){var r=e.Lib,t=r.doc,i=20200521;if(!(r._evt_ver&&r.isNumber(r._evt_ver)&&r._evt_ver>=i)){r._evt_ver=i,r.Events={registedClass:[],registedObjs:[]};var n=function(s){var o=s||window.event,l=!0;return r.each(r.Events.registedObjs,function(d){r.each(r.Events.registedClass,function(c){if(d instanceof c&&d.bFocus&&d.handlerKeyDown&&!(l=d.handlerKeyDown(o)))return!1})}),l};r.ready(function(){r.addEventListener(t.documentElement,"keydown",n)}),r.mix(r,{getWheelDelta:function(s){var o,l=(s=s||window.event).wheelDelta,d=s.detail;return l&&(o=l/120),d&&(o=-(d%3==0?d/3:d)),o}});var a={LEFT:0,MIDDLE:1,RIGHT:2};r.EnumMouseButton=a,r.detectButton=function(s){var o=s||window.event;return null==o.which?o.button<2?a.LEFT:4==o.button?a.MIDDLE:a.RIGHT:o.which<2?a.LEFT:2==o.which?a.MIDDLE:a.RIGHT}}}(T),function(e){var r=20200521;e._ui_eventWhich_ver&&e.isNumber(e._ui_eventWhich_ver)&&e._ui_eventWhich_ver>=r||(e._ui_eventWhich_ver=r,e.switchEvent=function(t){return(t=t||window.event).which=null==t.which?t.button<2?1:4==t.button?2:3:t.which<2?1:2==t.which?2:3,t})}(T.Lib),function(e){var r=20200521;e._ui_style_ver&&e.isNumber(e._ui_style_ver)&&e._ui_style_ver>=r||(e._ui_style_ver=r,e.currentStyle=function(t,i){var n=e.win,a=n.doc;return t.currentStyle?t.currentStyle[i]:n.getComputedStyle?(i.replace(/([A-Z])/g,"-$1"),i.toLowerCase(),a.defaultView.getComputedStyle(t,null)[i]):null})}(T.Lib),function(e,r){var a=e.Lib,s=e.navInfoSync,o=a.isString,l=a.each,d=Array.prototype.slice,c=" ",u=s.bIE&&s.IEMode<10,h=/[\n\t\r\.]/g,f=20200521;function g(M,E,R){var x=this;return x instanceof g?M?"string"==typeof M?(a.error("Err 4001."),x):a.isArray(M)||M.isNodeList?(Array.prototype.push.apply(x,a.makeArray(M)),x):(x[0]=M,x.length=1,x):x:new g(M,E,R)}function v(M){return o(M)&&(M=a.trim(M))&&M.length>=3&&a.startsWith(M,"<")&&a.endsWith(M,">")}function p(M){return(c+M+c).replace(h,c)}function m(M){return M.replace(h,"")}function A(M,E){var R=E;return R&&R.isNodeList&&(R=R.getEL()),o(M)?(v(M)&&a.err("Err 4002."),new g(a.sizzle(M,R))):M.isNodeList?M:new g(M)}a._ui_nodelist_ver&&a.isNumber(a._ui_nodelist_ver)&&a._ui_nodelist_ver>=f||(a._ui_nodelist_ver=f,g.prototype={isNodeList:!0,length:0,item:function(M){return a.isNumber(M)?M>=this.length?null:new g(this[M]):new g(M)},slice:function(){return new g(d.apply(this,arguments))},getDOMNodes:function(){return d.call(this)},each:function(M,E){var R=this;return l(R,function(x,P){return x=new g(x),M.call(E||x,x,P,R)}),R},getEL:function(){return this.length>0?this[0]:void 0},all:function(M){return this.length>0?a.all(M,this):new g},one:function(M){var R=this.all(M);return R.length?R.slice(0,1):R}},a.mix(g.prototype,{before:function(M){var E=this.getEL(),R=[M];E&&(v(M)&&(R=a.parseHTML(M)),l(R,function(x){E.insertBefore(x,E.childNodes[0])}))},append:function(M){var E=this.getEL(),R=[M];E&&(v(M)&&(R=a.parseHTML(M)),l(R,function(x){E.appendChild(x)}))},html:function(M){var E=this.getEL();if(E){if(a.isUndef(M))return function(M){var E=M.innerHTML;return document.all?(E=E.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(F,k,w,S){return k?"</"+w.toLowerCase()+">":("<"+w.toLowerCase()+S+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(L,U,Z,ne,oe,ue,X,pe){return oe?'="'+oe+'"'+ue:L})}).replace(/<\/?([^>]+)>/g,function(F){return F}):E}(E);E.innerHTML="",l(a.parseHTML(M),function(R){E.appendChild(R)})}},attr:function(M,E){var R=this.getEL();if(R){if(a.isUndef(E))return"readonly"===M?R.readOnly?"readonly":"":("style"!==M&&u?R=R[M]:(R=R.attributes[M])&&(R=R.value),R);"class"==M?R.className=E:R[M]=E}},style:function(M,E){var R=this.getEL();if(R)return a.style(R,M,E)},css:function(M){l(this,function(E){l(M,function(R,x){a.style(E,x,R)})})},addClass:function(M){var E=this.getEL();E&&function(M,E){var x,F,k,w,R=M.className,P=E.length;if(R){for(x=p(R),F=R,k=0;k<P;k++)w=m(E[k]),x.indexOf(c+w+c)<0&&(F+=c+w);F=a.trim(F)}else F=E.join(" ");M.className=F}(E,M.split(c))},removeClass:function(M){var E=this.getEL();E&&function(M,E){var x,F,k,R=M.className,P=E.length;if(R&&P){for(x=p(R),F=0;F<P;F++)for(k=c+m(E[F])+c;x.indexOf(k)>=0;)x=x.replace(k,c);M.className=a.trim(x)}}(E,M.split(c))},hasClass:function(M){var E=this.getEL();if(E)return function(M,E){var x,F,k,R=M.className,P=E.length;if(R&&P){for(x=p(R),F=0;F<P;F++)if(k=c+m(E[F])+c,x.indexOf(k)<0)return!1;return!0}return!1}(E,M.split(c))},parent:function(){var M=this.getEL();return M&&(M=M.parentNode),new g(M)},remove:function(){var M=this.getEL();M&&M.parentNode.removeChild(M)},offset:function(){var M=this.getEL();return a.DOM.getElDimensions(M,!0)}}),a.mix(a,{all:A,one:function(M,E){var R=A(M,E);return R.length?R.slice(0,1):R},isNodeList:function(M){return M instanceof g}}),a.ready(function(){a.all=A}))}(T),function(e){var r=e.win,t=e.doc,i=isNaN,n=20200521;e._dom_ver&&e.isNumber(e._dom_ver)&&e._dom_ver>=n||(e._dom_ver=n,e.DOM={getOffset:function(a,s,o){a=a||r.event;for(var f,g,l=o||a.target,d=0,c=0,u=0,h=0,v=!1;l&&!i(l.offsetLeft)&&!i(l.offsetTop);)g=l.scrollLeft,f=l.scrollTop,"BODY"===l.tagName?v?(g=0,f=0):(g|=t.documentElement.scrollLeft,f|=t.documentElement.scrollTop):"fixed"===l.style.position&&(v=!0),d+=l.offsetLeft-g,c+=l.offsetTop-f,l=l.offsetParent;return s&&(u=s.Left,h=s.Top),{x:d=a.clientX-d-u,y:c=a.clientY-c-h}},getElDimensions:function(a,s){var o,l;return a?(o=a.style.display,a.style.display="",l=s?{offsetTop:a.offsetTop,offsetLeft:a.offsetLeft,offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight}:{clientTop:a.clientTop,clientLeft:a.clientLeft,clientWidth:a.clientWidth?a.clientWidth:parseInt(a.style.width)?parseInt(a.style.width):0,clientHeight:a.clientHeight?a.clientHeight:parseInt(a.style.height)?parseInt(a.style.height):0},a.style.display=o,l):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},e.getElDimensions=e.DOM.getElDimensions)}(T.Lib),function(e,r){var t=20211015,i=e.Lib;if(!(i._dialog_ver&&i.isNumber(i._dialog_ver)&&i._dialog_ver>=t)){i._dialog_ver=t,i.loaderBarClassName="ds-dwt-loaderBar",i.loaderBarWidth="230px",i.loaderBarHeight="240px",i.loaderBarBackgroundColor="",i.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",i.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",i.createShowMaskContent=function(){var R,x,E="";return T.DWT&&T.DWT.CustomizableDisplayInfo&&(x=T.DWT.CustomizableDisplayInfo),R=x&&i.isString(x.loaderBarSource)&&""!=x.loaderBarSource?x.loaderBarSource:T.navInfoSync.bIE?i.loaderBarSourceIE:i.loaderBarSource,""!=i.loaderBarBackgroundColor&&(E=";background:"+i.loaderBarBackgroundColor),['<div align="center" ','class="',i.loaderBarClassName,'" ','style="margin:0 auto;width:',i.loaderBarWidth,";height:",i.loaderBarHeight,";line-height:",i.loaderBarHeight,E,'"><img src="',R,'" /></div>'].join("")};var l,d,n=i.win,a=i.doc,s=!0,o=!1,c=5e5,C={pendingDialogStack:[],_updateStacking:function(E){var P,k;0!=(P=this.pendingDialogStack).length?(1!=E&&(l===r&&(l=a.createElement("div"),(d=l.style).position="fixed",d.display="block",d.left=d.top=d.margin=d.padding=0,d.backgroundColor="rgba(128, 128, 128, 0.1)",d.filter="alpha(opacity=10)",d.opacity=d.MozOpacity=.1,d.zIndex=c,d.width=d.height="100%",T.navInfo.bIE&&(l.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),a.createEvent&&i.addEventListener(l,"click",m)),a.body.contains(l)||a.body.appendChild(l)),k=c,i.each(P,function(w){k++,w._dlgInfo.mask.style.zIndex=k++,w.style.zIndex=k})):l!==r&&(i.removeEventListener(l,"click",m),a.body.removeChild(l),l=r)},pushDialog:function(E,R){var P,x=this,F=E.getBoundingClientRect();x.pendingDialogStack.length>=1e3?i.error("Too many modal dialogs."):((P=a.createElement("div")).className="dynamsoft-backdrop",1==R&&(P.style.left=(F.x|F.left)+"px",P.style.top=(F.y|F.top)+"px",P.style.width=F.width+"px",P.style.height=F.height+"px"),a.createEvent&&i.addEventListener(P,"click",function(k){if(E.dispatchEvent){var w=p(k);E.dispatchEvent(w)}}),E.parentNode.insertBefore(P,E.nextSibling),E._dlgInfo.mask=P,x.pendingDialogStack.push(E),x._updateStacking(R))},removeDialog:function(E){var x,P,R=this;-1!=(x=i.isArray(R.pendingDialogStack)?i.indexOf(E,R.pendingDialogStack):-1)&&(R.pendingDialogStack.splice(x,1),(P=E._dlgInfo.mask).parentNode.removeChild(P),E._dlgInfo.mask=null,R._updateStacking())}};i.dialog={setup:function(E,R,x){E.show=A.bind(E,o,R),E.showModal=A.bind(E,s,R),E.close=M.bind(E),x&&(E._dlgcfg=x),E._dlgInfo={}},setcfg:function(E,R){E._dlgcfg=R}},i.mask={container:!1,bConfined:!1,dlgMask:!1,preOnresize:!1,preOnscroll:!1},i.showMask=function(){if(!i.mask.dlgMask&&!i.dlgLoadingShowStatus){var x,E=i.mask.bConfined,R=i.mask.container;if(R){x=R.getBoundingClientRect();for(var P=R.firstChild;P;){if(i.isFunction(P.getBoundingClientRect)){x=P.getBoundingClientRect();break}P=P.nextSibling}}var F=document.createElement("div");F.className="dynamsoft-dialog-wrap",i.mask.preOnresize=!!window.onresize&&window.onresize,i.mask.preOnscroll=!!window.onscroll&&window.onscroll,E&&x&&(window.onresize=window.onscroll=function(){x=R.getBoundingClientRect();for(var k=R.firstChild;k;){if(i.isFunction(k.getBoundingClientRect)){x=k.getBoundingClientRect();break}k=k.nextSibling}F.style.left=(x.x|x.left)+"px",F.style.top=(x.y|x.top)+"px",F.style.width=x.width+"px",x.width<470&&(i.loaderBarWidth=x.width-10+"px"),F.style.height=i.loaderBarHeight=x.height+"px",i.mask.dlgMask&&(i.mask.dlgMask.close(),i.mask.dlgMask.showModal())},window.onscroll()),F.innerHTML=i.createShowMaskContent(),document.body.appendChild(F),i.mask.dlgMask=F,i.dialog.setup(i.mask.dlgMask,E),i.mask.dlgMask.showModal()}},i.hideMask=function(){var E=i.mask.dlgMask;E&&(E.close(),document.body.removeChild(E),i.mask.dlgMask=!1),window.onresize=i.mask.preOnresize?i.mask.preOnresize:null,i.mask.preOnresize=!1,window.onscroll=i.mask.preOnscroll?i.mask.preOnscroll:null,i.mask.preOnscroll=!1}}function f(E,R){for(var x=0;x<E.length;++x)if(E[x]==R)return s;return o}function p(E){var R=a.createEvent("MouseEvents");return R.initMouseEvent(E.type,E.bubbles,E.cancelable,n,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget),R}function m(E){a.body.dispatchEvent(p(E))}function A(E,R){var x=this,P="absolute",k=x._dlgcfg;k&&i.isString(k.style_position)&&(P=k.style_position),x.open?i.error("showDialog called on open dialog."):(x.open=s,x.removeAttribute("closed"),x.setAttribute("open","open"),x.setAttribute("style","DIALOG"==x.tagName?"position:"+P+";left:0;right:0;top:30%;margin:auto;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);width:-moz-fit-content;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;":"position:"+P+";display:block;left:0;right:0;border:0;top:30%;margin:auto;width:-moz-fit-content;-webkit-box-sizing:border-box;box-sizing:border-box;"),function(E){var R=o;return n.getComputedStyle?R=n.getComputedStyle(E):E.currentStyle&&(R=E.currentStyle),R&&"absolute"!=R.position||"auto"!=E.style.top&&""!=E.style.top||"auto"!=E.style.bottom&&""!=E.style.bottom?o:!function(E){for(var R=0;R<a.styleSheets.length;++R){var k,w,x=a.styleSheets[R],P=o,F=o;try{P=x.cssRules,F=a.querySelectorAll}catch(Z){}if(P&&F)for(var S=0;S<P.length;++S){k=P[S],w=o;try{w=F(k.selectorText)}catch(Z){}if(w&&f(w,E)){var L=k.style.getPropertyValue("top"),U=k.style.getPropertyValue("bottom");if(L&&"auto"!=L||U&&"auto"!=U)return s}}}return o}(E)}(x)&&function(E){E.style.top=(a.body.scrollTop||a.documentElement.scrollTop)+((n.innerHeight?n.innerHeight:a.documentElement.clientHeight)-E.offsetHeight)/2+"px",E._dlgInfo.isTopOverridden=s}(x),E&&(x._dlgInfo.modal=s,C.pushDialog(x,R)))}function M(E){var R=this;return R.open||i.error("closeDialog called on closed dialog."),R.open=o,R.removeAttribute("open"),R.setAttribute("closed","closed"),R.style.display="none",void 0!==E&&(R.returnValue=E),R._dlgInfo.isTopOverridden&&(R.style.top="auto"),R._dlgInfo.modal&&C.removeDialog(R),R.returnValue}}(T),function(e){var r=20200521;if(!(e._sizzle_ver&&e.isNumber(e._sizzle_ver)&&e._sizzle_ver>=r)){e._sizzle_ver=r;var n,a,s,o,l,d,c,u,h,f,g,v,m,I,y,_,R,x,P,F,i=RegExp,C="dws_"+1*new Date,A=window.document,M=0,E=0,k=function(fe,De){return fe===De&&(h=!0),0},w=[],S=w.pop,L=w.push,U=w.push,Z=w.slice,ne=function(fe,De){for(var Oe=0,Ne=fe.length;Oe<Ne;Oe++)if(fe[Oe]===De)return Oe;return-1},ue="[\\x20\\t\\r\\n\\f]",X="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",pe=["\\[",ue,"*(",X,")(?:",ue,"*([*^$|!~]?=)",ue,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",X,"))|)",ue,"*\\]"].join(""),B=new i(ue+"+","g"),K=new i(["^",ue,"+|((?:^|[^\\\\])(?:\\\\.)*)",ue,"+$"].join(""),"g"),G=new i(["^",ue,"*,",ue,"*"].join("")),ee=new i(["^",ue,"*([>+~]|",ue,")",ue,"*"].join("")),be=(new i("^"+X+"$"),{ID:new i("^#("+X+")"),CLASS:new i("^\\.("+X+")"),TAG:new i("^("+X+"|[*])"),ATTR:new i("^"+pe),needsContext:new i(["^",ue,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",ue,"*((?:-\\d)?\\d*)",ue,"*\\)|)(?=[^-]|$)"].join(""),"i")}),Te=/^[^{]+\{\s*\[native \w/,Ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,je=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,he=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(fe,De){return De?"\0"===fe?"\ufffd":fe.slice(0,-1)+"\\"+fe.charCodeAt(fe.length-1).toString(16)+" ":"\\"+fe},V=function(){f()};R=Q(),x=Q(),P=Q(),F=Q();try{U.apply(w=Z.call(A.childNodes),A.childNodes)}catch(fe){U={apply:w.length?function(De,Oe){L.apply(De,Z.call(Oe))}:function(De,Oe){for(var Ne=De.length,Pe=0;De[Ne++]=Oe[Pe++];);De.length=Ne-1}}}n=j.support={},f=j.setDocument=function(fe){var De,Oe,Ne=fe?fe.ownerDocument||fe:A;return Ne===g||9!==Ne.nodeType||!Ne.documentElement||(v=(g=Ne).documentElement,A!==g&&(Oe=g.defaultView)&&Oe.top!==Oe&&(Oe.addEventListener?Oe.addEventListener("unload",V,!1):Oe.attachEvent&&Oe.attachEvent("onunload",V)),n.attributes=re(function(Pe){return Pe.className="i",!Pe.getAttribute("className")}),n.getElementsByTagName=re(function(Pe){return Pe.appendChild(g.createComment("")),!Pe.getElementsByTagName("*").length}),n.getElementsByClassName=Te.test(g.getElementsByClassName),n.getById=re(function(Pe){return v.appendChild(Pe).id=C,!g.getElementsByName||!g.getElementsByName(C).length}),a.filter.ID=n.getById?function(Pe){var ze=Pe;return function(ge){return ge.getAttribute("id")===ze}}:function(Pe){var ze=new i(["^",Pe,"$"].join(""),"g");return function(ge){var Ee=void 0!==ge.getAttributeNode&&ge.getAttributeNode("id");return Ee&&ze.test(Ee.value)}},a.find.TAG=n.getElementsByTagName?function(Pe,ze){return void 0!==ze.getElementsByTagName?ze.getElementsByTagName(Pe):n.qsa?ze.querySelectorAll(Pe):void 0}:function(Pe,ze){var ge,Ee=[],Ue=0,Be=ze.getElementsByTagName(Pe);if("*"===Pe){for(;ge=Be[Ue++];)1===ge.nodeType&&Ee.push(ge);return Ee}return Be},a.find.CLASS=n.getElementsByClassName&&function(Pe,ze){if(void 0!==ze.getElementsByClassName)return ze.getElementsByClassName(Pe)},I=[],m=[],(n.qsa=Te.test(g.querySelectorAll))&&(re(function(Pe){v.appendChild(Pe).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",Pe.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+ue+"*(?:''|\"\")"),Pe.querySelectorAll("[selected]").length||m.push("\\["+ue+"*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),Pe.querySelectorAll("[id~="+C+"-]").length||m.push("~="),Pe.querySelectorAll(":checked").length||m.push(":checked"),Pe.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")}),re(function(Pe){Pe.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ze=g.createElement("input");ze.setAttribute("type","hidden"),Pe.appendChild(ze).setAttribute("name","D"),Pe.querySelectorAll("[name=d]").length&&m.push("name"+ue+"*[*^$|!~]?="),2!==Pe.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),v.appendChild(Pe).disabled=!0,2!==Pe.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),Pe.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Te.test(y=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&re(function(Pe){n.disconnectedMatch=y.call(Pe,"*"),y.call(Pe,"[s!='']:x")}),m=m.length&&new i(m.join("|")),I=I.length&&new i(I.join("|")),De=Te.test(v.compareDocumentPosition),_=De||Te.test(v.contains)?function(Pe,ze){var ge=9===Pe.nodeType?Pe.documentElement:Pe,Ee=ze&&ze.parentNode;return Pe===Ee||!(!Ee||1!==Ee.nodeType||!(ge.contains?ge.contains(Ee):Pe.compareDocumentPosition&&16&Pe.compareDocumentPosition(Ee)))}:function(Pe,ze){if(ze)for(;ze=ze.parentNode;)if(ze===Pe)return!0;return!1},k=De?function(Pe,ze){if(Pe===ze)return h=!0,0;var ge=!Pe.compareDocumentPosition-!ze.compareDocumentPosition;return ge||(1&(ge=(Pe.ownerDocument||Pe)===(ze.ownerDocument||ze)?Pe.compareDocumentPosition(ze):1)||!n.sortDetached&&ze.compareDocumentPosition(Pe)===ge?Pe===g||Pe.ownerDocument===A&&_(A,Pe)?-1:ze===g||ze.ownerDocument===A&&_(A,ze)?1:u?ne(u,Pe)-ne(u,ze):0:4&ge?-1:1)}:function(Pe,ze){if(Pe===ze)return h=!0,0;var ge,Ee=0,Ue=Pe.parentNode,Be=ze.parentNode,Qe=[Pe],Ze=[ze];if(!Ue||!Be)return Pe===g?-1:ze===g?1:Ue?-1:Be?1:u?ne(u,Pe)-ne(u,ze):0;if(Ue===Be)return le(Pe,ze);for(ge=Pe;ge=ge.parentNode;)Qe.unshift(ge);for(ge=ze;ge=ge.parentNode;)Ze.unshift(ge);for(;Qe[Ee]===Ze[Ee];)Ee++;return Ee?le(Qe[Ee],Ze[Ee]):Qe[Ee]===A?-1:Ze[Ee]===A?1:0}),g},j.matches=function(fe,De){return j(fe,null,null,De)},j.matchesSelector=function(fe,De){if((fe.ownerDocument||fe)!==g&&f(fe),n.matchesSelector&&!F[De+" "]&&(!I||!I.test(De))&&(!m||!m.test(De)))try{var Oe=y.call(fe,De);if(Oe||n.disconnectedMatch||fe.document&&11!==fe.document.nodeType)return Oe}catch(Ne){F(De,!0)}return j(De,g,null,[fe]).length>0},j.contains=function(fe,De){return(fe.ownerDocument||fe)!==g&&f(fe),_(fe,De)},j.escape=function(fe){return(fe+"").replace(he,ae)},j.error=function(fe){throw new Error("Syntax error: "+fe)},j.uniqueSort=function(fe){var De,Oe=[],Ne=0,Pe=0;if(h=!n.detectDuplicates,u=!n.sortStable&&fe.slice(0),fe.sort(k),h){for(;De=fe[Pe++];)De===fe[Pe]&&(Ne=Oe.push(Pe));for(;Ne--;)fe.splice(Oe[Ne],1)}return u=null,fe},s=j.getText=function(fe){var De,Oe="",Ne=0,Pe=fe.nodeType;if(Pe){if(1===Pe||9===Pe||11===Pe){if("string"==typeof fe.textContent)return fe.textContent;for(fe=fe.firstChild;fe;fe=fe.nextSibling)Oe+=s(fe)}else if(3===Pe||4===Pe)return fe.nodeValue}else for(;De=fe[Ne++];)Oe+=s(De);return Oe},a=j.selectors={cacheLength:50,match:be,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(fe){return fe[3]=fe[3]||fe[4]||fe[5]||"","~="===fe[2]&&(fe[3]=" "+fe[3]+" "),fe.slice(0,4)}},filter:{TAG:function(fe){var De=fe.toLowerCase();return"*"===fe?function(){return!0}:function(Oe){return Oe.nodeName&&Oe.nodeName.toLowerCase()===De}},CLASS:function(fe){var De=R[fe+" "];return De||(De=new i("(^|"+ue+")"+fe+"("+ue+"|$)"))&&R(fe,function(Oe){return De.test("string"==typeof Oe.className&&Oe.className||void 0!==Oe.getAttribute&&Oe.getAttribute("class")||"")})},ATTR:function(fe,De,Oe){return function(Ne){var Pe=j.attr(Ne,fe);return null==Pe?"!="===De:!De||(Pe+="","="===De?Pe===Oe:"!="===De?Pe!==Oe:"^="===De?Oe&&0===Pe.indexOf(Oe):"*="===De?Oe&&Pe.indexOf(Oe)>-1:"$="===De?Oe&&Pe.slice(-Oe.length)===Oe:"~="===De?(" "+Pe.replace(B," ")+" ").indexOf(Oe)>-1:"|="===De&&(Pe===Oe||Pe.slice(0,Oe.length+1)===Oe+"-"))}}}},Ae.prototype=a.filters=a.pseudos,a.setFilters=new Ae,o=j.tokenize=function(fe,De){var Oe,Ne,ze,ge,Ee,Ue,Pe=[],Be=x[fe+" "];if(Be)return De?0:Be.slice(0);for(ge=fe,Ee=[],Ue=a.preFilter;ge;){for(ze in(!Oe||(Ne=G.exec(ge)))&&(Ne&&(ge=ge.slice(Ne[0].length)||ge),Ee.push(Pe=[])),Oe=!1,(Ne=ee.exec(ge))&&(Oe=Ne.shift(),Pe.push({value:Oe,type:Ne[0].replace(K," ")}),ge=ge.slice(Oe.length)),a.filter)(Ne=be[ze].exec(ge))&&(!Ue[ze]||(Ne=Ue[ze](Ne)))&&(Oe=Ne.shift(),Pe.push({value:Oe,type:ze,matches:Ne}),ge=ge.slice(Oe.length));if(!Oe)break}return De?ge.length:ge?j.error(fe):x(fe,Ee).slice(0)},l=j.compile=function(fe,De){var Oe,Ne=[],Pe=[],ze=P[fe+" "];if(!ze){for(De||(De=o(fe)),Oe=De.length;Oe--;)(ze=$e(De[Oe]))[C]?Ne.push(ze):Pe.push(ze);(ze=P(fe,function(fe,De){var Oe=De.length>0,Ne=fe.length>0,Pe=function(ze,ge,Ee,Ue,Be){var Qe,Ze,tt,lt=0,dt="0",_t=ze&&[],Rt=[],xt=c,Pt=ze||Ne&&a.find.TAG("*",Be),jt=M+=null==xt?1:Math.random()||.1,Ir=Pt.length;for(Be&&(c=ge===g||ge||Be);dt!==Ir&&null!=(Qe=Pt[dt]);dt++){if(Ne&&Qe){for(Ze=0,!ge&&Qe.ownerDocument!==g&&(f(Qe),Ee=!1);tt=fe[Ze++];)if(tt(Qe,ge||g,Ee)){Ue.push(Qe);break}Be&&(M=jt)}Oe&&((Qe=!tt&&Qe)&&lt--,ze&&_t.push(Qe))}if(lt+=dt,Oe&&dt!==lt){for(Ze=0;tt=De[Ze++];)tt(_t,Rt,ge,Ee);if(ze){if(lt>0)for(;dt--;)_t[dt]||Rt[dt]||(Rt[dt]=S.call(Ue));Rt=Ve(Rt)}U.apply(Ue,Rt),Be&&!ze&&Rt.length>0&&lt+De.length>1&&j.uniqueSort(Ue)}return Be&&(M=jt,c=xt),_t};return Oe?q(Pe):Pe}(Pe,Ne))).selector=fe}return ze},d=j.select=function(fe,De,Oe,Ne){var ze="function"==typeof fe&&fe,ge=!Ne&&o(fe=ze.selector||fe);return Oe=Oe||[],(ze||l(fe,ge))(Ne,De,!1,Oe,!De||De),Oe},n.sortStable=C.split("").sort(k).join("")===C,n.detectDuplicates=!!h,f(),n.sortDetached=re(function(fe){return 1&fe.compareDocumentPosition(g.createElement("fieldset"))}),re(function(fe){return fe.innerHTML="<a href='#'></a>","#"===fe.firstChild.getAttribute("href")}),!n.attributes||re(function(fe){return fe.innerHTML="<input/>",fe.firstChild.setAttribute("value",""),""===fe.firstChild.getAttribute("value")}),re(function(fe){return null==fe.getAttribute("disabled")}),e.support=n,e.sizzle=j}function Q(){var fe=[];return function De(Oe,Ne){return fe.push(Oe+" ")>a.cacheLength&&delete De[fe.shift()],De[Oe+" "]=Ne}}function me(fe){for(var De=0,Oe=fe.length,Ne="";De<Oe;De++)Ne+=fe[De].value;return Ne}function j(fe,De,Oe,Ne){var Pe,ze,ge,Ee,Ue,Be,Qe,Ze=De&&De.ownerDocument,tt=De?De.nodeType:9;if(Oe=Oe||[],"string"!=typeof fe||!fe||1!==tt&&9!==tt&&11!==tt)return Oe;if(!Ne){if((De?De.ownerDocument||De:A)!==g&&f(De),De=De||g,11!==tt)if(Ue=Ge.exec(fe))if(Pe=Ue[1]){if(9===tt){if(!(ge=De.getElementById(Pe)))return Oe;if(ge.id===Pe)return Oe.push(ge),Oe}else if(Ze&&(ge=Ze.getElementById(Pe))&&_(De,ge)&&ge.id===Pe)return Oe.push(ge),Oe}else{if(Ue[2])return U.apply(Oe,De.getElementsByTagName(fe)),Oe;if((Pe=Ue[3])&&n.getElementsByClassName&&De.getElementsByClassName)return U.apply(Oe,De.getElementsByClassName(Pe)),Oe}else(Ue=je.exec(fe))&&((Pe=Ue[1])?(9===tt?(ge=De.getElementById(Pe))&&ge.id===Pe&&(De=ge):Ze&&(ge=Ze.getElementById(Pe))&&_(De,ge)&&ge.id===Pe&&(De=ge),Pe="#"+Pe+" "):(Pe=Ue[2])?(U.apply(Oe,De.getElementsByTagName(fe)),De=Oe[0],Pe+=" "):(Pe=Ue[3])&&n.getElementsByClassName&&De.getElementsByClassName&&(U.apply(Oe,De.getElementsByClassName(Pe)),De=Oe[0],Pe+=" "),fe=fe.replace(Pe,""));if(n.qsa&&!F[fe+" "]&&(!m||!m.test(fe))){if(1!==tt)Ze=De,Qe=fe;else if("object"!==De.nodeName.toLowerCase()){for((Ee=De.getAttribute("id"))?Ee=Ee.replace(he,ae):De.setAttribute("id",Ee=C),ze=(Be=o(fe)).length;ze--;)Be[ze]="#"+Ee+" "+me(Be[ze]);Qe=Be.join(","),Ze=De}if(Qe)try{return U.apply(Oe,Ze.querySelectorAll(Qe)),Oe}catch(lt){F(fe,!0)}finally{Ee===C&&De.removeAttribute("id")}}}return d(fe.replace(K,"$1"),De,Oe,Ne)}function q(fe){return fe[C]=!0,fe}function re(fe){var De=g.createElement("fieldset");try{return!!fe(De)}catch(Oe){return!1}finally{De.parentNode&&De.parentNode.removeChild(De),De=null}}function le(fe,De){var Oe=De&&fe,Ne=Oe&&1===fe.nodeType&&1===De.nodeType&&fe.sourceIndex-De.sourceIndex;if(Ne)return Ne;if(Oe)for(;Oe=Oe.nextSibling;)if(Oe===De)return-1;return fe?1:-1}function Ae(){}function Se(fe,De,Oe){var Ne=De.dir,Pe=De.next,ze=Pe||Ne,ge=Oe&&"parentNode"===ze,Ee=E++;return De.first?function(Ue,Be,Qe){for(;Ue=Ue[Ne];)if(1===Ue.nodeType||ge)return fe(Ue,Be,Qe);return!1}:function(Ue,Be,Qe){var Ze,tt,lt,dt=[M,Ee];if(Qe){for(;Ue=Ue[Ne];)if((1===Ue.nodeType||ge)&&fe(Ue,Be,Qe))return!0}else for(;Ue=Ue[Ne];)if(1===Ue.nodeType||ge)if(tt=(lt=Ue[C]||(Ue[C]={}))[Ue.uniqueID]||(lt[Ue.uniqueID]={}),Pe&&Pe===Ue.nodeName.toLowerCase())Ue=Ue[Ne]||Ue;else{if((Ze=tt[ze])&&Ze[0]===M&&Ze[1]===Ee)return dt[2]=Ze[2];if(tt[ze]=dt,dt[2]=fe(Ue,Be,Qe))return!0}return!1}}function ye(fe){return fe.length>1?function(De,Oe,Ne){for(var Pe=fe.length;Pe--;)if(!fe[Pe](De,Oe,Ne))return!1;return!0}:fe[0]}function Ve(fe,De,Oe,Ne,Pe){for(var ze,ge=[],Ee=0,Ue=fe.length,Be=null!=De;Ee<Ue;Ee++)(ze=fe[Ee])&&(!Oe||Oe(ze,Ne,Pe))&&(ge.push(ze),Be&&De.push(Ee));return ge}function ke(fe,De,Oe,Ne,Pe,ze){return Ne&&!Ne[C]&&(Ne=ke(Ne)),Pe&&!Pe[C]&&(Pe=ke(Pe,ze)),q(function(ge,Ee,Ue,Be){var Qe,Ze,tt,lt=[],dt=[],_t=Ee.length,Rt=ge||function(fe,De,Oe){for(var Ne=0,Pe=De.length;Ne<Pe;Ne++)j(fe,De[Ne],Oe);return Oe}(De||"*",Ue.nodeType?[Ue]:Ue,[]),xt=!fe||!ge&&De?Rt:Ve(Rt,lt,fe,Ue,Be),Pt=Oe?Pe||(ge?fe:_t||Ne)?[]:Ee:xt;if(Oe&&Oe(xt,Pt,Ue,Be),Ne)for(Qe=Ve(Pt,dt),Ne(Qe,[],Ue,Be),Ze=Qe.length;Ze--;)(tt=Qe[Ze])&&(Pt[dt[Ze]]=!(xt[dt[Ze]]=tt));if(ge){if(Pe||fe){if(Pe){for(Qe=[],Ze=Pt.length;Ze--;)(tt=Pt[Ze])&&Qe.push(xt[Ze]=tt);Pe(null,Pt=[],Qe,Be)}for(Ze=Pt.length;Ze--;)(tt=Pt[Ze])&&(Qe=Pe?ne(ge,tt):lt[Ze])>-1&&(ge[Qe]=!(Ee[Qe]=tt))}}else Pt=Ve(Pt===Ee?Pt.splice(_t,Pt.length):Pt),Pe?Pe(null,Ee,Pt,Be):U.apply(Ee,Pt)})}function $e(fe){for(var De,Oe,Ne,Pe=fe.length,ze=a.relative[fe[0].type],ge=ze||a.relative[" "],Ee=ze?1:0,Ue=Se(function(Ze){return Ze===De},ge,!0),Be=Se(function(Ze){return ne(De,Ze)>-1},ge,!0),Qe=[function(Ze,tt,lt){var dt=!ze&&(lt||tt!==c)||((De=tt).nodeType?Ue(Ze,tt,lt):Be(Ze,tt,lt));return De=null,dt}];Ee<Pe;Ee++)if(Oe=a.relative[fe[Ee].type])Qe=[Se(ye(Qe),Oe)];else{if((Oe=a.filter[fe[Ee].type].apply(null,fe[Ee].matches))[C]){for(Ne=++Ee;Ne<Pe&&!a.relative[fe[Ne].type];Ne++);return ke(Ee>1&&ye(Qe),Ee>1&&me(fe.slice(0,Ee-1).concat({value:" "===fe[Ee-2].type?"*":""})).replace(K,"$1"),Oe,Ee<Ne&&$e(fe.slice(Ee,Ne)),Ne<Pe&&$e(fe=fe.slice(Ne)),Ne<Pe&&me(fe))}Qe.push(Oe)}return ye(Qe)}}(T.Lib),function(e){var i=e.doc,n=e.each,a=i.documentElement,s=20200521;if(!(e._ui_nodelistExt_ver&&e.isNumber(e._ui_nodelistExt_ver)&&e._ui_nodelistExt_ver>=s)){e._ui_nodelistExt_ver=s;var d,c,u,h,f,g,o=e.support,l=e.sizzle,v=i.createElement("div"),p=i.createElement("div");if(p.style){p.style.cssText="float:left;opacity:.5",o.opacity="0.5"===p.style.opacity,o.cssFloat=!!p.style.cssFloat,p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===p.style.backgroundClip,(v=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",p.innerHTML="",v.appendChild(p),o.boxSizing=""===p.style.boxSizing||""===p.style.MozBoxSizing||""===p.style.WebkitBoxSizing,e.mix(o,{reliableHiddenOffsets:function(){return null==d&&m(),h},boxSizingReliable:function(){return null==d&&m(),u},pixelMarginRight:function(){return null==d&&m(),c},pixelPosition:function(){return null==d&&m(),d},reliableMarginRight:function(){return null==d&&m(),f},reliableMarginLeft:function(){return null==d&&m(),g}});var I,y,_=/^margin/,C=/^(top|right|bottom|left)$/,A=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,M=new RegExp("^("+A+")(?!px)[a-z%]+$","i"),E=new RegExp("^("+A+")(.*)$","i");window.getComputedStyle?(I=function(H){var j,q;return(!(q=(j=e.isFunction(H.getEL)?H.getEL():H).ownerDocument.defaultView)||!q.opener)&&(q=window),q.getComputedStyle(j)},y=function(H,j,q){var re,de,le,we,Ae=H.style;return(""===(we=(q=q||I(H))?q.getPropertyValue(j)||q[j]:void 0)||void 0===we)&&!l.contains(H.ownerDocument,H)&&(we=e.style(H,j)),q&&!o.pixelMarginRight()&&M.test(we)&&_.test(j)&&(re=Ae.width,de=Ae.minWidth,le=Ae.maxWidth,Ae.minWidth=Ae.maxWidth=Ae.width=we,we=q.width,Ae.width=re,Ae.minWidth=de,Ae.maxWidth=le),void 0===we?we:we+""}):a.currentStyle&&(I=function(H){return H.currentStyle},y=function(H,j,q){var re,de,le,we,Ae=H.style;return null==(we=(q=q||I(H))?q[j]:void 0)&&Ae&&Ae[j]&&(we=Ae[j]),M.test(we)&&!C.test(j)&&(re=Ae.left,(le=(de=H.runtimeStyle)&&de.left)&&(de.left=H.currentStyle.left),Ae.left="fontSize"===j?"1em":we,we=Ae.pixelLeft+"px",Ae.left=re,le&&(de.left=le)),void 0===we?we:we+""||"auto"});var X,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,x=/<([\w:-]+)/,P=/^\s+/,F=/<|&#?\w+;/,k=/<tbody/i,w=/^-ms-/,S=/-([\da-z])/gi,L=/^(none|table(?!-c[ea]).+)/,U=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Z={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"},oe=["Top","Right","Bottom","Left"],ue={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:o.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},pe=["Webkit","O","Moz","ms"],K=document.createElement("div");if(K.style){X=K.style,o.cssFloat=!!K.style.cssFloat;var G=function(H,j){return j.toUpperCase()},ee={type:e.type,cssHooks:{},htmlPrefilter:function(H){return H.replace(R,"<$1></$2>")},nodeName:function(H,j){return H.nodeName&&H.nodeName.toLowerCase()===j.toLowerCase()},merge:function(H,j){for(var q=+j.length,re=0,de=H.length;re<q;)H[de++]=j[re++];if(q!=q)for(;void 0!==j[re];)H[de++]=j[re++];return H.length=de,H},camelCase:function(H){return H.replace(w,"ms-").replace(S,G)},cssProps:{float:o.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}};n(["height","width"],function(H,j){ee.cssHooks[H]={get:function(q,re,de){if(re)return L.test(e.css(q,"display"))&&0===q.offsetWidth?function(H,j,q,re){var de,we={};return n(j,function(Ae,Se){we[Se]=H.style[Se],H.style[Se]=j[Se]}),de=q.apply(H,[]),n(j,function(Ae,Se){H.style[Se]=we[Se]}),de}(q,Z,function(){return ae(q,H,de)}):ae(q,H,de)},set:function(q,re,de){var le=de&&I(q);return function(H,j,q){var re=E.exec(j);return re?Math.max(0,re[1]-(q||0))+(re[2]||"px"):j}(0,re,de?he(q,H,de,o.boxSizing&&"border-box"===e.css(q,"boxSizing",!1,le),le):0)}}}),e.style=function(H,j,q,re){if(H&&3!==H.nodeType&&8!==H.nodeType&&H.style){var de,le,we,Ae=ee.camelCase(j),Se=H.style;if(j=ee.cssProps[Ae]||(ee.cssProps[Ae]=ie(Ae)||Ae),we=ee.cssHooks[j]||ee.cssHooks[Ae],void 0===q)return we&&"get"in we&&void 0!==(de=we.get(H,!1,re))?de:Se[j]+"";if("string"==(le=typeof q)&&(de=V(q))&&de[1]&&(q=function(H,j,q,re){var de,le=1,we=20,Ae=function(){return e.css(H,j,"")},Se=Ae(),ye=q&&q[3]||(ee.cssNumber[j]?"":"px"),Fe=(ee.cssNumber[j]||"px"!==ye&&+Se)&&V(e.css(H,j));if(Fe&&Fe[3]!==ye){ye=ye||Fe[3],q=q||[],Fe=+Se||1;do{e.style(H,j,(Fe/=le=le||".5")+ye)}while(le!==(le=Ae()/Se)&&1!==le&&--we)}return q&&(Fe=+Fe||+Se||0,de=q[1]?Fe+(q[1]+1)*q[2]:+q[2]),de}(H,j,de),le="number"),null==q||q!=q)return;"number"===le&&(q+=de&&de[3]||(ee.cssNumber[Ae]?"":"px")),!o.clearCloneStyle&&""===q&&0===j.indexOf("background")&&(Se[j]="inherit"),(!we||!("set"in we)||void 0!==(q=we.set(H,q,re)))&&(Se[j]=q)}},e.css=function(H,j,q,re){var de,le,we,Ae=ee.camelCase(j);return j=ee.cssProps[Ae]||(ee.cssProps[Ae]=ie(Ae)||Ae),(we=ee.cssHooks[j]||ee.cssHooks[Ae])&&"get"in we&&(le=we.get(H,!0,q)),void 0===le&&(le=y(H,j,re)),"normal"===le&&j in ne&&(le=ne[j]),""===q||q?(de=parseFloat(le),!0===q||isFinite(de)?de||0:le):le},e.parseHTML=function(H,j){if(!H||"string"!=typeof H)return[];"boolean"==typeof j&&(j=!1),j=j||document;var q=U.exec(H);return q?[j.createElement(q[1])]:(q=function(H,j){for(var q,re,le,we,Ae,Se,ye=H.length,Fe=function(H){var j="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),q=H.createDocumentFragment();if(q.createElement)for(;j.length;)q.createElement(j.pop());return q}(j),Ve=[],ke=0;ke<ye;ke++)if((re=H[ke])||0===re)if("object"===e.type(re))ee.merge(Ve,re.nodeType?[re]:re);else if(F.test(re)){for(le=le||Fe.appendChild(j.createElement("div")),we=(x.exec(re)||["",""])[1].toLowerCase(),le.innerHTML=(Se=ue[we]||ue._default)[1]+ee.htmlPrefilter(re)+Se[2],q=Se[0];q--;)le=le.lastChild;if(!o.leadingWhitespace&&P.test(re)&&Ve.push(j.createTextNode(P.exec(re)[0])),!o.tbody)for(q=(re="table"!==we||k.test(re)?"<table>"!==Se[1]||k.test(re)?0:le:le.firstChild)&&re.childNodes.length;q--;)ee.nodeName(Ae=re.childNodes[q],"tbody")&&!Ae.childNodes.length&&re.removeChild(Ae);for(ee.merge(Ve,le.childNodes),le.textContent="";le.firstChild;)le.removeChild(le.firstChild);le=Fe.lastChild}else Ve.push(j.createTextNode(re));for(le&&Fe.removeChild(le),ke=0;re=Ve[ke++];)"SCRIPT"!==re.tagName&&(l.contains(re.ownerDocument,re),Fe.appendChild(re));return le=null,Fe}([H],j),ee.merge([],q.childNodes))}}}}function m(){var H,j;a.appendChild(v),p.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",d=u=g=!1,c=f=!0,window.getComputedStyle&&(j=window.getComputedStyle(p),d="1%"!==(j||{}).top,g="2px"===(j||{}).marginLeft,u="4px"===(j||{width:"4px"}).width,p.style.marginRight="50%",c="4px"===(j||{marginRight:"4px"}).marginRight,(H=p.appendChild(document.createElement("div"))).style.cssText=p.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",H.style.marginRight=H.style.width="0",p.style.width="1px",f=!parseFloat((window.getComputedStyle(H)||{}).marginRight),p.removeChild(H)),p.style.display="none",(h=0===p.getClientRects().length)&&(p.style.display="",p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",p.childNodes[0].style.borderCollapse="separate",(H=p.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(h=0===H[0].offsetHeight)&&(H[0].style.display="",H[1].style.display="none",h=0===H[0].offsetHeight)),a.removeChild(v)}function ie(H){if(H in X)return H;for(var j=H.charAt(0).toUpperCase()+H.slice(1),q=pe.length;q--;)if((H=pe[q]+j)in X)return H}function he(H,j,q,re,de){for(var le=q===(re?"border":"content")?4:"width"===j?1:0,we=0;le<4;le+=2)"margin"===q&&(we+=e.css(H,q+oe[le],!0,de)),re?("content"===q&&(we-=e.css(H,"padding"+oe[le],!0,de)),"margin"!==q&&(we-=e.css(H,"border"+oe[le]+"Width",!0,de))):(we+=e.css(H,"padding"+oe[le],!0,de),"padding"!==q&&(we+=e.css(H,"border"+oe[le]+"Width",!0,de)));return we}function ae(H,j,q){var re=!0,de="width"===j?H.offsetWidth:H.offsetHeight,le=I(H),we=o.boxSizing&&"border-box"===e.css(H,"boxSizing",!1,le);if(de<=0||null==de){if(((de=y(H,j,le))<0||null==de)&&(de=H.style[j]),M.test(de))return de;re=we&&(o.boxSizingReliable()||de===H.style[j]),de=parseFloat(de)||0}return de+he(H,j,q||(we?"border":"content"),re,le)}function V(H){return new RegExp("^(?:([+-])=|)("+A+")([a-z%]*)$","i").exec(H)}}(T.Lib),function(e,r){var a,s,t=T.managerEnv,i=e.LS,n=T.navInfoSync.host,o=20211117,l=function(){if(T.dcp){var u=T.dcp.dcpJSVer;if(e.isNumber(u))return u>=o}return!1};if(t||(T.managerEnv={},t=T.managerEnv),t.resourcesPath=t.resourcesPath||"Resources",t.IfUpdateService=!!t.IfUpdateService,l())return l=r,void(o=r);var d=[];T.dcp=a={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:o,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[17,2,0,"1026"],managerVersionMac:[17,2,0,"1026"],managerVersionLinux:[17,2,0,"1026"],serviceVersion:[1,7,2,"1026"],serviceVersionMac:[1,7,2,"1026"],serviceVersionLinux:[1,7,2,"1026"],detect:s={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var u=T.Lib.getNavInfo();if(!u.bWin&&!u.bWin64){if(u.bMac)return a.managerVersionMac;if(u.bLinux)return a.managerVersionLinux}return a.managerVersion},getServiceVersion:function(){var u=T.Lib.getNavInfo();if(!u.bWin&&!u.bWin64){if(u.bMac)return a.serviceVersionMac;if(u.bLinux)return a.serviceVersionLinux}return a.serviceVersion},versionInfo:function(u,h){var f=0;s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,h,function(p){if(e.isArray(p)&&p.length>0&&p[0]){s.curPort=a.ports[f%a.ports.length];var m=p[0];if(e.isString(m)&&a._compareVersion(m.split(","),a.oldDWASMVer))return a._setDefaultValuesFromServer(p),s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.Connected,a._sendStatusEvent(!1,m),e.isFunction(u)&&setTimeout(function(){u(a.strSID,a.bEnhancedMode)},0),!0}return!1},function(p,m,I){return++f,s.curPortIndex=f%a.ports.length,s.bConnected=!1,!!(s.bConnectNumLimited&&f>=s.IMAXCONNECTCOUNT)&&(setTimeout(function(){u(p,m,I)},0),!0)})},_checkOldManagerVersion:function(u,h){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,r,u,h)},_checkManagerVersion:function(u,h,f){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,u,h,f)},_checkService:function(u,h){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,r,u,h)},_checkUpdateFile:function(u,h){this._postBase("CheckUpdateFile",!1,r,u,h)},_updateService:function(u,h){this._postBase("UpdateService",!1,r,u,h)},_postBase:function(u,h,f,g,v){var m;return m={id:"1",method:u,version:h?a.oldDWASMVerStr:"dwasm2_"+a._getModuleVer(),parameter:[]},f&&(m.productKey=f),this._postBaseV2(u,h,m,200,g,v),!0},_postBaseV2:function(u,h,f,g,v,p){var I,y,_=e.stringify(f);if(e.isFunction(v)&&e.isFunction(p)){if(a.detect.bConnected&&"VersionInfo"==u&&""!=a.detect.connectedResult)return void v(a.detect.connectedResult);I=function(k,w,S){0!=--A||p(k,w,S)},y=function(k,w,S){var L=a._getJSON(k);L&&"result"in L&&(A=-1,a.detect.bConnected||(a.detect.bConnected=!0,a.detect.dcpStatus=a.detect.EnumDCP_DetectStatus.Connected,a.detect.curPort=a.ports[S.index],a.ports=[a.detect.curPort],a.detect.curPortIndex=0,i.isSupportLS()&&i.item("DCP_port",a.detect.curPort[1]),v(L.result)))||I(k,w,S)};var C,A=a.ports.length;if(A>1&&i.isSupportLS()){var M=i.item("DCP_port");if(e.isString(M)&&""!==M)for(C=1;C<A;C++){var R,x,E=a.ports[C];R=E[0],(x=E[1])==M&&(a.ports[C][0]=a.ports[0][0],a.ports[C][1]=a.ports[0][1],a.ports[0][0]=R,a.ports[0][1]=x);break}}for(a.detect.bConnected&&(A=1),d=[],a.detect.bConnected=!1,C=0;C<A;C++){var P=[a._getPreUrl(C),h?"dcp/":a._getModuleName(),h?a.oldDWASMVerStr:a._getModuleVer(),"/",u,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");d.push({method:"POST",url:P,timeout:g,data:_,onSuccess:y,onError:I})}for(C=0;C<A;C++)e.ajax(d[C]).index=C}},loadZip:function(u,h,f,g){var v,p=h,m=f;100===p&&(p=0,m=function(I){e.isString(I)&&(I=I.replace('"result" : [ 0,','"result" : [ 100,')),f(I)}),v=T.managerEnv.IfUpdateService?[a._getPreUrl(s.curPortIndex),a._getModuleName(),a._getModuleVer(),"/LoadZipFromBytes?type=",p,"&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join(""):[a._getPreUrl(s.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:v,async:!0,data:u,onSuccess:m,onError:g})},oldLoadZip:function(u,h,f,g){var v=[a._getPreUrl(s.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:v,async:!0,data:u,onSuccess:f,onError:g})},_getPreUrl:function(u){var h,f;return T.navInfoSync.bSSL?(f="https://",h=a.ports[u][1]):(f="http://",h=a.ports[u][0]),[f,a.host,":",h,"/"].join("")},_getHttpPreUrl:function(u){return["http://",a.host,":",a.ports[u][0],"/"].join("")},_getDcpWsPreUrl:function(u){return a.getWsUrl(a.host,T.navInfoSync.bSSL?a.ports[u][1]:a.ports[u][0])},_getJSON:function(u){return!!u&&e.parse(u)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return a.getManagerVersion().join("")},_compareVersion:function(u,h){return!e.isLocalIP(a.host)||(e.isArray(u)&&4==u.length&&e.isArray(h)&&h.length>=4?u[0]>h[0]||u[0]==h[0]&&u[1]>h[1]||u[0]==h[0]&&u[1]==h[1]&&u[2]>h[2]||u[0]==h[0]&&u[1]==h[1]&&u[2]==h[2]&&parseInt(u[3])>=parseInt(h[3]):!!(e.isArray(u)&&1==u.length&&e.isArray(h)&&h.length>=1)&&parseInt(u[0])>=parseInt(h[0]))},_getDSUpdateZipUrl:function(){var h,f,u=T.Lib.getNavInfo(),g="";return h="Win",u.bMac?h="Mac":u.bLinux&&(h="Linux"),f=T.navInfoSync.bFileSystem?"":"?t="+e.now(),u.bWin&&a.b64bit&&(g="_x64"),[T.managerEnv.resourcesPath,"/dist/serviceupdate/",h,"DSUpdate_",a.getManagerVersion().join("."),g,".zip",f].join("")},getPorts:function(u,h,f){var g="GetPorts",v="dwasm2_"+a._getModuleVer();this._postBaseV2(g,!1,{id:"1",method:g,version:v,parameter:[u]},700,h,f)},_setDefaultValuesFromServer:function(u){var h="",f=!1,g=!1,v={};if(u.length>4&&(h=e.isString(u[2])?u[2]:"",f=e.isString(u[3])&&"true"===u[3],g=e.isString(u[4])&&"64"===u[4]),u.length>5&&(v=u[5]),a.detect.connectedResult=u,a.strSID=h,a.bEnhancedMode=f,a.b64bit=g,a.objEnhancedPorts=v,f&&v&&v.dcp){var p=v.dcp;s.curPort=[p.port,p.sslPort]}else s.curPort=a.ports[s.curPortIndex];if(f&&v&&v.dwt){var m=v.dwt;s.dwtPort=m?T.navInfoSync.bSSL?m.sslPort:m.port:0}},checkDcpForUpdate:function(u,h,f,g,v,p,m,I){var y=!1,_=!0,C=3,A=0,M=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0].split(","),Z=!1;if(L.length>4&&(Z=e.isString(L[4])&&"64"===L[4]),a.b64bit=Z,T.managerEnv.IfUpdateService)if(a._compareVersion(U,a.oldDWASMVer)){var ne=a._getDSUpdateZipUrl();y=!0;var ue=function(pe,B,K){a._funUpdateFailed(v,p,pe,K.status),setTimeout(m,0)};f&&f(),g&&g(),s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),e.fetch(ne,{mode:"cors",dataType:"arraybuffer"}).then(function(pe){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadedZip,a._sendStatusEvent(),a.oldLoadZip(pe,0,function(){setTimeout(function(){a._checkManagerVersion(I,R,x)},5e3)},ue),pe=null},function(pe){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,v&&v();var B="The update package can't be downloaded. The error code is "+pe.httpCode+".";p&&p(!0,B),a._sendStatusEvent(!0,B),setTimeout(m,0)})}else _&&(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,f&&f(),u&&u(),a._sendStatusEvent(),_=!1);else s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0);return!0},E=function(L,U){return++A,s.curPortIndex=A%a.ports.length,s.bConnected=!1,s.bConnectNumLimited&&A>=s.IMAXCONNECTCOUNT?(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3),!0},R=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0].split(",");return!!a._compareVersion(U,a.getManagerVersion())&&(a.detect.connectedResult=L,T.managerEnv.IfUpdateService?setTimeout(y?function(){a._checkUpdateZip(g,v,p,m)}:function(){a._checkService(P,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0)),!0)},x=function(L,U,Z){var ne=1e3;return C<3&&(ne=500),--C<0?(a._funShowUpgradeDialogWhenUpdateFailed(v,p),setTimeout(m,0)):setTimeout(function(){a._checkManagerVersion(I,R,x)},ne),!0},P=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return f&&f(),!1;var U=L[0].split(",");return a._compareVersion(U,a.getServiceVersion())?(s.bConnected=!0,v&&v(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,L[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),setTimeout(m,0)):setTimeout(function(){a._checkUpdateZip(g,v,p,m)},0),!0},F=function(L,U,Z){return a._funUpdateFailed(v,p,L,Z.status),setTimeout(m,0),!0},w=function(L){if(!(e.isArray(L)&&L.length>0&&L[0]))return!1;var U=L[0];return e.isString(U)&&a._compareVersion(U.split(","),a.oldDWASMVer)?(a._setDefaultValuesFromServer(L),s.curPort=a.ports[A%a.ports.length],T.managerEnv.IfUpdateService?setTimeout(function(){a._checkService(P,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(m,0))):(A=0,s.curPortIndex=0,_&&(f&&f(),u&&u(),_=!1),setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3)),!0},S=function(L,U){return++A,s.curPortIndex=A%a.ports.length,s.bConnected=!1,_&&(f&&f(),u&&u(L,U),_=!1),s.bConnectNumLimited&&A>=s.IMAXCONNECTCOUNT?(A=0,s.curPortIndex=0,setTimeout(function(){a._checkOldManagerVersion(M,E)},1e3)):setTimeout(function(){a._checkManagerVersion(I,w,S)},1e3),!0};h&&h(),a._checkManagerVersion(I,w,S)},_checkUpdateZip:function(u,h,f,g,v){var p=function(R,x,P){var F=-1;if(P&&(F=P.status),0==F)return setTimeout(function(){a._checkService(M,E)},5e3),!0;var k=a._getDSUpdateZipUrl();return s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),e.fetch(k,{mode:"cors",dataType:"arraybuffer"}).then(y,m),!0},m=function(R){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,h&&h();var x="The update package can't be downloaded. The error code is "+R.httpCode+".";return f&&f(!0,x),a._sendStatusEvent(!0,x),setTimeout(g,0),!0},y=function(R){T.dcp.loadZip(R,1,function(P){var F,k;try{e.isString(P)&&"result"in(k=e.parse(P.replace(/\0/g,"")))&&(F=k.result)}catch(w){}e.isArray(F)&&F.length>2&&1==F[2]?setTimeout(function(){a._checkService(M,E)},5e3):(a._funUpdateFailed(h,f,P,200),setTimeout(g,0))},_),R=null},_=function(R,x,P){var F=-1;return P&&(F=P.status),0==F?setTimeout(function(){a._checkService(M,E)},5e3):(a._funUpdateFailed(h,f,R,P.status),setTimeout(g,0)),!0},A=3,M=function(R){if(!(e.isArray(R)&&R.length>0&&R[0]))return!1;var x=R[0].split(",");return!!a._compareVersion(x,a.getServiceVersion())&&(s.bConnected=!0,h&&h(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,R[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),setTimeout(g,0),!0)},E=function(R,x){var P=1e3;return A<3&&(P=500),--A<0?(a._funShowUpgradeDialogWhenUpdateFailed(h,f),setTimeout(g,0),!0):(setTimeout(function(){a._checkService(M,E)},P),!0)};u&&u(),s.dcpStatus=s.EnumDCP_DetectStatus.VerifyingZip,a._sendStatusEvent(),a._checkUpdateFile(function(R){if(!(e.isArray(R)&&R.length>1))return!1;if(1==R[1])s.dcpStatus=s.EnumDCP_DetectStatus.VerifiedZip,a._sendStatusEvent(),s.dcpStatus=s.EnumDCP_DetectStatus.UpdatingService,a._sendStatusEvent(),setTimeout(function(){a._checkService(M,E)},5e3);else{var x=0;if("exception"in R&&(x=R.exception),-2373==x)return a._funUpdateFailed(h,f,R,200),setTimeout(g,0),!0;setTimeout(p,0)}return!0},p)},_getStatusString:function(u,h){var f,g,v="";return u==s.EnumDCP_DetectStatus.Init?"Getting manager version":u==s.EnumDCP_DetectStatus.Connected?(h&&(v=h),"Getting manager version succeeded and the version is "+v):u==s.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":u==s.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":u==s.EnumDCP_DetectStatus.DownloadFailed?(g=".",h&&h.length>0?("."==h.slice(h.length-1)&&(g=""),f=" with the error: "+h):f="","Update package failed to download"+f+g):u==s.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":u==s.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":u==s.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":u==s.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":u==s.EnumDCP_DetectStatus.CheckedService?(h&&(v=h),"Getting service version succeeded and the version is "+v):u==s.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":u==s.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":u==s.EnumDCP_DetectStatus.UpdatingService?"Updating the service":u==s.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":u==s.EnumDCP_DetectStatus.UpdateFailed?(g=".",h&&h.length>0?("."==h.slice(h.length-1)&&(g=""),f=" with the error: "+h):f="","The update failed"+f+g):""},_sendStatusEvent:function(u,h){var f=!!u;e.isFunction(n.OnGetServiceUpdateStatus)&&n.OnGetServiceUpdateStatus(f,s.dcpStatus,a._getStatusString(s.dcpStatus,h))},_getErr:function(u){var h,f="";try{e.isString(u)?(h=u.replace(/\0/g,""),h=e.parse(h)):u&&(h=u),"description"in h&&(f=h.description)}catch(g){}return f},_funShowUpgradeDialogWhenUpdateFailed:function(u,h){return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,u&&u(),h&&h(),a._sendStatusEvent(!0),!0},_funUpdateFailed:function(u,h,f,g){var v,p;return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,u&&u(),200==g?(v="The update failed.",p=a._getStatusString(s.dcpStatus,a._getErr(f))):p=v="The update failed. The error code is "+g,h&&h(!0,v),a._sendStatusEvent(!0,p),!0},getDSPath:function(u,h){var f=T.managerEnv.resourcesPath,g=h;if(T.Lib.isString(f)&&f.length>0?"/"!=f[f.length-1]&&(f+="/"):f="Resources/",!g){var v=T.Lib.getNavInfo();g=v.bMac?".pkg":v.bArm64?"-arm64.deb":v.bMips64?"-mips64el.deb":v.bLinux||v.bChromeOS||v.bHarmonyOS?".deb":".msi"}return[f,"dist/DynamsoftServiceSetup",g].join("")},getLinuxHTML5DebPath:function(){return T.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return T.dcp.getDSPath(!1,".rpm")},newWebsocket:function(u){var h,f=a.wsProtocol,g=window.MozWebSocket;if(void 0!==g)h=f?new g(u,f):new g(u);else{var v=window.WebSocket;if(T.navInfo.bEdge){var p=window,m=parent;try{for(;p!=m&&m.WebSocket;)v=m.WebSocket,p=m.window,m=m.parent}catch(I){v=window.WebSocket}}h=f?new v(u,f):new v(u)}return h},_checkManagerVersionWS:function(u,h,f){var g=a._getDcpWsPreUrl(0),v={id:"1",method:"VersionInfo",version:"dwasm2_"+a._getModuleVer(),parameter:[]};return u&&(v.productKey=u),a.postStringDataByWS(g,e.stringify(v),function(m){var I=e.parse(m);I&&"result"in I?h(I.result):f()},f)},getWsUrl:function(u,h){return[T.navInfoSync.bSSL?"wss://":"ws://",u,":",h,"/"].join("")},postStringDataByWS:function(u,h,f,g){var v=a.newWebsocket(u);v.onopen=function(){1==v.readyState?(v.onopen=null,v.send(h)):0==v.readyState&&setTimeout(v.onopen,100)},v.onmessage=function(p){var m=p.data;if("object"==typeof m)return m=null,p=null,g(),void v.close();var I=m.replace(/\0/g,"");try{f(I),v.close()}catch(y){e.log(m),g(),v.close()}m=null,p=null},v.onerror=function(p){p&&e.log("websocket error: "+p),g(),v.close()},v.onclose=function(p){v.onclose=null,v.onerror=null,v.onmessage=null}},getBinaryFileInfo:function(u,h){var f="GetBinaryFileInfo",g={id:"1",method:f,version:"dwasm2_"+a._getModuleVer(),parameter:[]},v=e.stringify(g),p=function(y,_,C){var A=a._getJSON(y);A?u(A):h(y,_,C)};if(T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition){var m=a._getDcpWsPreUrl(0);return a.postStringDataByWS(m,v,p,h)}var I=[a._getPreUrl(0),a._getModuleName(),a._getModuleVer(),"/",f,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:I,timeout:200,data:v,onSuccess:p,onError:h})},checkDcpV3:function(u,h,f){var g=!0,v=0,p=function(I){return!!(e.isArray(I)&&I.length>0&&I[0])&&(a._setDefaultValuesFromServer(I),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),setTimeout(f,0),!0)},m=function(I,y){return++v,s.bConnectNumLimited&&v>=s.IMAXCONNECTCOUNT?(s.bConnected=!1,s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):setTimeout(function(){T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(u,p,m):a._checkManagerVersion(u,p,m)},1e3),g&&(h&&h(I,y),g=!1),!0};s.curPortIndex=0,s.bConnected=!1,T.DWT.ConnectWithSocket&&T.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(u,p,m):a._checkManagerVersion(u,p,m)}},l=r,o=r,t=r,e.domReady(function(){a.onReadys.length>0&&e.each(a.onReadys,function(u){e.isFunction(u)&&u()})}),T.Ready=function(u){return e.asyncGetNavInfo().then(function(){try{u(e)}catch(h){throw e.log(h.stack||h,"error"),h}})}}(T.Lib),(T=Bt.Dynamsoft||{}).DWT=T.DWT||{},T.aryAddonReadyFun=T.aryAddonReadyFun||[],T.AddonReady=T.AddonReady||function(e){T.aryAddonReadyFun.push(e)},T.AddonReady(function(e,r){T.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var t=T,s=T.dcp,d=[1,7,2,"1026"],c="upload_"+d.join(""),u={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(A,M){},OnRunSuccess:function(A){},OnRunFailure:function(A,M,E){}},h=0,f="",g_ServerUrlError=function(){h=-2,f="Upload failed because the url to upload to is invalid."},g_HttpUploadError=function(A,M,E){h=-3,A?f="Upload cancelled.":(f=M&&""!=M?"Upload failed with error: "+M:"Upload failed.",M&&""!=M&&(f=f+"("+E+")"))},g_HttpFilenameError=function(){h=-7,f="The file name is incorrect in the upload job."},g_MobileNotSupport=function(){h=-2400,f="File uploader addon doesn't work under current settings."},g__resetErr=function(){h=0,f=""},v=function(){var A=!1;return T.DWT&&(A=!1===T.DWT.UseLocalService),A||T.navInfoSync.bMobile};function p(){}function m(A){this.job=A}function I(A){this.job=A}p.prototype={runWaiting:0,CreateJob:function(){var A={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return e.mix(A,u),A.SourceValue=new m(A),A.FormField=new I(A),A},Run:function(A){var E,M=this,R='""',x=A.ServerUrl,P="";if((!A.ar||!A.cu)&&t.DWT&&(t.DWT.ProductKey&&(R='"'+t.DWT.ProductKey+'"'),t.DWT.handshakeCode||t.DWT.organizationID))return T.DWT.lglic().then(function(oe){A.ar=oe.ar,A.cu=oe.cu,M.Run(A)}),!0;if(!e.isString(x)||""==x)return A.id=-1,g_ServerUrlError(),!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1),!1;if(!A.documents||!e.isArray(A.documents)||A.documents.length<=0)return A.id=-1,h=-4,f="Upload failed because the file to upload has invalid content.",!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1),!1;for(A.Url=x,delete A.ServerUrl,E=0;E<A.documents;E++){var F=A.documents[E];if(!e.isString(F.files)||""==F.files)return A.id=-1,g_HttpFilenameError(),!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1),!1;(!e.isString(F.remoteName)||""==F.remoteName)&&(F.remoteName="RemoteFile")}var k=A.SourceValue;delete A.SourceValue;var w=A.FormField;delete A.FormField;var L,U,S=e.stringify(A);return S=e.replaceAll(S,'"',"'"),A.ServerUrl=x,delete A.Url,A.SourceValue=k,A.FormField=w,U=['{"id":"',1,'","method":"RunUploadFile","version":"',c,'","parameter":[',R,',"',S,'"'],A.ar&&A.cu?(P=[',"',A.ar,'","',A.cu,'",0]}'].join(""),delete A.ar,delete A.cu,U.push(P)):U.push("]}"),L=U.join(""),M.runWaiting++,T.FileUploader._sendCmd("RunUploadFile",L,function(oe){if(M.runWaiting--,oe){var ue=oe.UploadId;if(ue&&ue>0)A.id=ue,t.FileUploader.map[A.id]=A,t.FileUploader.ids.push(oe.UploadId),A.OnUploadTransferPercentage&&A.OnUploadTransferPercentage(A,0);else{var X=oe.errorcode,pe=oe.errorstring;X&&pe?(h=X,f=pe):(h=-6,f="Cannot create an upload job."),!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1)}}},function(oe,ue,X){M.runWaiting--,t.FileUploader.parseHttpErrors(oe,ue,X),!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1)}),!0},Cancel:function(A){return!A.id||A.id<0?(h=-5,f="Invalid upload job id.",!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1),!1):(T.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+c+'","parameter":["'+A.id+'"]}',function(x){t.FileUploader.deleteJobById(A.id)},function(x,P,F){t.FileUploader.parseHttpErrors(x,P,F),!A.bEvent&&e.isFunction(A.OnRunFailure)&&(A.bEvent=!0,A.OnRunFailure(A,h,f),A.bEvent=!1)}),!0)},CancelAllUpload:function(){var A=this,M=t.FileUploader.ids,E='{"id":"1","method":"DeleteUploadTask","version":"'+c+'","parameter":["'+M.join(",")+'"]}';return A.runWaiting>0?(h=-8,f="Can not cancel all jobs when at least one job is still being created.",!1):(A.runWaiting<0&&(A.runWaiting=0),M.length<=0||T.FileUploader._sendCmd("DeleteUploadTask",E,function(P){for(var F=0;F<M.length;F++)t.FileUploader.deleteJobById(M[F]);t.FileUploader.ids=[],t.FileUploader.map=[]},function(P,F,k){t.FileUploader.parseHttpErrors(P,F,k)}),!0)},OnUploadTransferPercentage:function(A,M){},OnRunSuccess:function(A){},OnRunFailure:function(A,M,E){}},t.SourceValue=m,m.prototype.Add=function(A,M,E){var R=this.job,x=E,P=A;if(!e.isString(P)||""==P)return g_HttpFilenameError(),void(!R.bEvent&&e.isFunction(R.OnRunFailure)&&(R.bEvent=!0,R.OnRunFailure(R,h,f),R.bEvent=!1));x||(x="RemoteFile"),P=T.Lib.replaceAll(P,"\\\\","\\\\"),R.documents.push({files:[P],fileName:M,remoteName:x})},t.FormField=I,I.prototype.Add=function(A,M){var E,R,x=M,P=A;if(null==x&&(x=""),!e.isString(P)||""==P||!e.isString(x)||(x=encodeURI(x),(P=encodeURI(P)).indexOf("'")>-1||x.indexOf("'")>-1))return!1;for(E=0;E<this.job.formFields.length;E++)if((R=this.job.formFields[E]).name==P)return R.value=x,!0;return this.job.formFields.push({name:P,value:x}),!0},t.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!1,ws:null,nextLoopTime:600,deleteJobById:function(A){if(g__resetErr(),v())return g_MobileNotSupport(),!1;var M;if(A){for(M=0;M<t.FileUploader.ids.length;M++)if(A==t.FileUploader.ids[M]){t.FileUploader.ids.splice(M,1);break}var E=t.FileUploader.map[A];for(E.SourceValue.job=null,delete E.SourceValue,E.FormField.job=null,delete E.FormField,delete t.FileUploader.map[A],M=E.documents.length-1;M>=0;M--)E.documents.splice(M,1);for(M=E.formFields.length-1;M>=0;M--)E.formFields.splice(M,1);T.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+c+'","parameter":["'+A+'"]}')}},_sendCmdByWS:function(A,M,E){var R;return t.FileUploader.ws?R=t.FileUploader.ws:(R=s.newWebsocket(t.FileUploader.wsUrl),t.FileUploader.ws=R),R.onopen=function(){1==R.readyState?(R.onopen=null,R.send(A)):0==R.readyState&&setTimeout(R.onopen,100)},R.onmessage=function(x){var P=x.data;if("object"==typeof P)return P=null,x=null,void E();var F=P.replace(/\0/g,"");try{(F=e.parse(F))&&"result"in F?M(F.result):E()}catch(k){e.log(P),E()}P=null,x=null},R.onerror=function(x){x&&e.log("websocket error: "+x),E()},R.onclose=function(x){R.onclose=null,R.onerror=null,R.onmessage=null,t.FileUploader.ws=null},!0},_sendCmd:function(A,M,E,R){if(T.DWT.ConnectWithSocket)return _sendCmdByWS(M,E,R);var x=[t.FileUploader.protocol,t.FileUploader.ip,":",t.FileUploader.port,"/dcp/",c,"/",A,"?type=1&dsver=",d.join(""),"&ts=",e.now()].join("");return e.ajax({url:x,method:"post",dataType:"json",processData:!1,data:M,onSuccess:E,onError:R})},parseHttpErrors:function(A,M,E){var R,x;A&&e.isArray(A)&&A.length>2?(R=A[1],x=A[2]):(R=M,x=E),2==x.state&&0==x.status?"abort"===x.statusText?g_HttpUploadError(!0):g_ServerUrlError():g_HttpUploadError(false,R,x.status)},loadHttpBlob:function(A,M,E,R,x,P,F){var w={method:A,url:M,dataType:"blob",async:E,onSuccess:R,onError:function(S,L,U){t.FileUploader.parseHttpErrors(S,L,U),e.isFunction(x)&&x()}};e.isFunction(P)&&(w.beforeSend=function(S){S.addEventListener("progress",function(L){delete L.totalSize,delete L.position,P(L)},false)}),e.ajax(w)},_OnPercentDone:function(){},Download:function(A,M,E){if(!e.isString(A))return h=-1,f="The zip file that contains the upload library (.dll) is invalid.",e.isFunction(E)&&E(h,f),!1;var R=function(){return h=-9,f="The zip file that contains the upload library (.dll) download failed.",e.isFunction(E)&&E(h,f),!1};return t.FileUploader.loadHttpBlob("get",A,!0,function(P){s.loadZip(P,100,M,R)},R,!1)},Init:function(A,M,E){if(g__resetErr(),v())return g_MobileNotSupport(),e.isFunction(E)&&E(h,f),!1;var R=function(){var x,P,F;x=T.dcp.ports[0],T.navInfoSync.bSSL?(F="https://",P=x[1]):(F="http://",P=x[0]),t.FileUploader.port=P,t.FileUploader.protocol=F,t.FileUploader.ip=s.host,t.FileUploader.wsUrl=s._getDcpWsPreUrl(0),t.FileUploader.running=!0,M(new p),setTimeout(t.FileUploader.StatusLoop,500)};T.dcp.detect.bConnected?R():T.dcp.checkDcpV3(T.DWT.ProductKey,E,R)},Close:function(){T.DWT.ConnectWithSocket&&t.FileUploader.ws&&(t.FileUploader.ws.close(),t.FileUploader.ws=null),t.FileUploader.running=!1},VersionInfo:function(A,M){return g__resetErr(),v()?(g_MobileNotSupport(),e.isFunction(M)&&M(h,f),!1):(T.FileUploader._sendCmd("VersionInfo",'{"id":"1","method":"VersionInfo","version":"'+c+'","parameter":[]}',A,function(x,P,F){t.FileUploader.parseHttpErrors(x,P,F),e.isFunction(M)&&M(h,f)}),!0)},StatusLoop:function(){return g__resetErr(),v()?(g_MobileNotSupport(),!1):(t.FileUploader.GetUploadStatus(),t.FileUploader.running&&setTimeout(t.FileUploader.StatusLoop,t.FileUploader.nextLoopTime),!0)},GetUploadStatus:function(){if(g__resetErr(),t.FileUploader.ids.length<=0)return!0;if(v())return g_MobileNotSupport(),!1;var A='{"id":"1","method":"GetUploadStatus","version":"'+c+'","parameter":["'+t.FileUploader.ids.join(",")+'"]}';return T.FileUploader._sendCmd("GetUploadStatus",A,function(R){if(e.isArray(R))for(var P,x=0;x<R.length;x++){var F=(P=R[x]).id,k=t.FileUploader.map[F],w=P.percentage,S=P.errorcode,L=P.response,U=P.errorstring;!k||(S==T.DWT.EnumTransferErrorCode.TRANS_FINISHED?(k.OnUploadTransferPercentage(k,100,C(L)),!k.bEvent&&e.isFunction(k.OnRunSuccess)&&(k.bEvent=!0,k.OnRunSuccess(k,C(L)),k.bEvent=!1),t.FileUploader.deleteJobById(F)):S==T.DWT.EnumTransferErrorCode.TRANS_OK||S==T.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||S==T.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||S==T.DWT.EnumTransferErrorCode.TRANS_SENDING||S==T.DWT.EnumTransferErrorCode.TRANS_PAUSE||S==T.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||S==T.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?k.OnUploadTransferPercentage(k,w,C(L)):(!k.bEvent&&e.isFunction(k.OnRunFailure)&&(k.bEvent=!0,k.OnRunFailure(k,S,U,C(L)),k.bEvent=!1),t.FileUploader.deleteJobById(F)))}},function(R,x,P){}),!0}};var _=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function C(A){var M,E,R,x,P,F,k;for(F=A.length,P=0,k="";P<F;){do{M=_[255&A.charCodeAt(P++)]}while(P<F&&-1==M);if(-1==M)break;do{E=_[255&A.charCodeAt(P++)]}while(P<F&&-1==E);if(-1==E)break;k+=String.fromCharCode(M<<2|(48&E)>>4);do{if(61==(R=255&A.charCodeAt(P++)))return k;R=_[R]}while(P<F&&-1==R);if(-1==R)break;k+=String.fromCharCode((15&E)<<4|(60&R)>>2);do{if(61==(x=255&A.charCodeAt(P++)))return k;x=_[x]}while(P<F&&-1==x);if(-1==x)break;k+=String.fromCharCode((3&R)<<6|x)}return k}}),function(){var e=screen.width,r=e>550?550:e-10,t=e>680?680:e-10,i=0,a=navigator.userAgent.toLowerCase(),s=/arm64|aarch64/g.test(a),o=/mips64/g.test(a),l=/cros/.test(a),d=/harmonyos/g.test(a);T.OnWebTwainNotFoundOnWindowsCallback=function(c,u,h,f,g,v,p){T._show_install_dialog(c,{default:u},h,T.DWT.EnumDWT_PlatformType.enumWindow,f,g,v,p,!0)},T.OnWebTwainNotFoundOnLinuxCallback=function(c,u,h,f,g,v,p,m,I){I||(I=T.DWT.EnumDWT_PlatformType.enumLinux),T._show_install_dialog(c,{default:u,deb:u,rpm:h},f,I,g,v,p,m,!0)},T.OnWebTwainNotFoundOnMacCallback=function(c,u,h,f,g,v,p){T._show_install_dialog(c,{default:u},h,T.DWT.EnumDWT_PlatformType.enumMac,f,g,v,p,!0)},T.dwt_change_install_url=function(c){var u=document.getElementById("dwt-btn-install");u&&(u.href=c)},T.DWT_Reconnect=function(){var c=T;if((new Date-i)/1e3>30){var u=document.getElementById("dwt-btn-install");u&&(u.innerHTML='Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.')}else c.DWT?c.DWT.CheckConnectToTheService(function(){T.DWT.ConnectToTheService()},function(){T._isInsecurePrivateNetwork()&&T._isChrome94plus()?T._checkDWTByWebSocket(function(){T.OnHTTPCorsError()},function(){setTimeout(T.DWT_Reconnect,500)}):setTimeout(T.DWT_Reconnect,500)}):console.log("The Dynamsoft namespace is missing")},T.DCP_DWT_onclickInstallButton=function(){return document.getElementById("dwt-btn-install")&&setTimeout(function(){var u=document.getElementById("dwt-install-url-div");u&&(u.style.display="none");var h=document.getElementById("dwt-btn-install");if(h&&"1"==h.getAttribute("html5")){var f=h.parentNode,g=document.createElement("div");g.id="dwt-btn-install",g.style.textAlign="center",g.style.paddingBottom="15px",g.innerHTML="Connecting to the service...",g.setAttribute("html5","1"),f.removeChild(h),f.appendChild(g),i=new Date,setTimeout(T.DWT_Reconnect,10)}else(f=h.parentNode).removeChild(h)},10),!0},T._isChrome94plus=function(){var h,c=a.indexOf("chrome/"),u=0;return c>-1?(h=(u=a.slice(c+7)).indexOf(" "))>-1&&(u=parseInt(u.slice(0,h))):(c=a.indexOf("crios/"))>-1&&(h=(u=a.slice(c+6)).indexOf(" "))>-1&&(u=parseInt(u.slice(0,h))),u>=94},T._isInsecurePrivateNetwork=function(){var c=location.hostname;return"localhost"!=c&&"127.0.0.1"!=c&&0!=c.indexOf("192.168.")&&0!=c.indexOf("172.16.")&&0!=c.indexOf("10.")&&!T.navInfoSync.bSSL},T._checkDWTByWebSocket=function(c,u){var f,h=T.Lib.detect.urls;if(h&&h.length>0){var g=h[0];f=T.Lib.getWS(g.host,g.port,g.ssl)}else f=T.Lib.getWS(T.Lib.product.host,18622,!1);f.onopen=function(){if(1==f.readyState){f.onopen=null;var v=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',T.Lib.product.getDWTPrefix(),T.Lib.product.getServerVersionInfo(),'"}'].join("");f.send(v)}else 0==f.readyState&&setTimeout(f.onopen,100)},f.onmessage=function(v){try{f.close(),v.data.indexOf("Version not found")>=0?u():c()}catch(p){u(),f.close()}v=null},f.onerror=function(){u()}},T._show_install_dialog=function(c,u,h,f,g,v,p,m,I){var _,A,y=T,M=T.DWT.EnumDWT_PlatformType,E=f==M.enumLinux||f==M.enumEmbed||f==M.enumChromeOS||f==M.enumHarmonyOS;if(T.DWT.bNpm&&T.navInfoSync.bFileSystem)return T._show_online_download_dialog(u,h,f);if(_=['<div class="dynamsoft-dwt-dlg-title">',"Please complete one-time setup","</div>"],y.DWT){if(I&&T._isInsecurePrivateNetwork()&&T._isChrome94plus())return void T._checkDWTByWebSocket(function(){T.OnHTTPCorsError()},function(){T._show_install_dialog(c,u,h,f,g,v,p,m,!1)});A=E||navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"RESTART":"REFRESH",_.push('<div class="dynamsoft-dwt-installdlg-iconholder"> '),_.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>'),_.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>'),_.push('<img style="margin: 0px 134px 0px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII= alt="download">'),_.push('<img style="margin: 2px 132px 2px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg== alt="install">'),_.push('<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII= alt="scan">'),_.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'),_.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'),_.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'),_.push("</div>"),_.push("</div>"),h&&E&&(_.push('<div style="margin:10px 0 0 60px;">'),_.push('<div id="dwt-install-url-div">'),s||o||l||d||(_.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+u.deb+'\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>'),_.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+u.rpm+'\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>')),_.push("</div></div>")),_.push('<div><a id="dwt-btn-install" target="_blank" href="'),_.push(u.default),_.push('"'),_.push(h?' html5="1"':' html5="0"'),_.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'),h?g?(_.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),_.push("If you still see the dialog after installing the scan service, please<br />"),_.push("1. Add the website to the zone of trusted sites.<br />"),_.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"),_.push("2. Refresh your browser."),_.push("</div>")):E&&(_.push('<div class="dynamsoft-dwt-dlg-tail">'),_.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>'+A+"</strong>  your browser.</div>"),_.push("</div>")):(_.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),g?(_.push("After the installation, please<br />"),_.push("1. Restart the browser<br />"),_.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')):_.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'),_.push("</div>")),y.DWT.ShowMessage(_.join(""),{width:r,headerStyle:1,closeButton:!1})}else console.log("The Dynamsoft namespace is missing")},T.OnWebTwainNeedUpgradeCallback=function(c,u,h,f,g,v,p,m,I,y,_){T._show_install_dialog(c,u,h,f,g,v,p,m,!1)},T.OnWebTwainPreExecuteCallback=function(){T.DWT?T.DWT.OnWebTwainPreExecute():console.log("The Dynamsoft namespace is missing")},T.OnWebTwainPostExecuteCallback=function(){T.DWT?T.DWT.OnWebTwainPostExecute():console.log("The Dynamsoft namespace is missing")},T.OnRemoteWebTwainNotFoundCallback=function(c,u,h,f,g){T.DWT?T.DWT.ShowMessage((g?['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',"Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />","</div>"]:['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',"Failed to connect to the Dynamsoft Service.<br />","Please make sure that the certificate is valid OR ","If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>']).join(""),{width:r,headerStyle:1,closeButton:!1}):console.log("The Dynamsoft namespace is missing")},T.OnRemoteWebTwainNeedUpgradeCallback=function(c,u,h,f){T.DWT?T.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"Dynamsoft Service is outdated on the PC with IP/domain <br />",'"',u,'".<br />',"Please open the page on that PC to download and install it.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'].join(""),{width:r,headerStyle:1,closeButton:!1}):console.log("The Dynamsoft namespace is missing")},T.OnWebTWAINDllDownloadSuccessful=function(){console.log("The Web TWAIN Module was downloaded successfully!")},T.OnWebTWAINDllDownloadFailure=function(c,u,h){if(T.DWT)return-2371==u&&T.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',h,"</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'].join(""),{width:r,headerStyle:1,closeButton:!1}),!0;console.log("The Dynamsoft namespace is missing")},T.OnGetServiceUpdateStatus=function(c,u,h){"Update skipped"!=h&&console.log(h)},T.OnWebTWAINModuleDownloadManually=function(c,u,h,f,g,v){return T._show_install_dialog("",c,!0,u,h,f,g,v,!1)},T.OnLTSLicenseError=function(c){var u="",f=T.DWT.licenseException,g=0;f&&(g=f.code),(-2440==g||-2441==g||-2443==g||-2446==g||c.indexOf("Internet connection")>-1||c.indexOf("Storage")>-1)&&(u='<div>You can register for a free 30-day trial <a href="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>'),T.DWT.ShowMessage([c,u].join(""),{width:t,headerStyle:2})},T.OnLTSConnectionFailure=T.OnLTSLicenseError,T.OnLTSReturnedAnError=T.OnLTSLicenseError,T.OnLTSUUIDError=T.OnLTSLicenseError,T.OnLTSConnectionWarning=function(){var c=["Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ","A cached authorization is being used, and you can continue to use the software as usual. ","Please get connected to the network as soon as possible. ",T.DWT.isPublicLicense()?'<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ':"Contact the site administrator ","for more information."].join("");T.DWT.ShowMessage(c,{width:t,caption:"Warning",headerStyle:2})},T.OnLTSPublicLicenseMessage=function(c){T.DWT.ShowMessage(c,{width:t,caption:"Warning",headerStyle:2})},T.OnHTTPCorsError=function(){var c=["<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",'<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'].join("");T.DWT.ShowMessage(c,{width:t,headerStyle:2})},T.OnLicenseExpiredMessage=function(c,u){var h,f='<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',g='<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',v="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";u>5||(h=u>0?['<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',u<=1?"1 day":parseInt(u)+" days",". Two quick steps to extend your trial:</div>",'<div style="margin:0 0 0 10px">1. <a target="_blank" href="',v,'">Request a new trial key</a> and follow the instructions to set the new key</div>','<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>','<div style="padding:10px 0 0 0">If you run into any issues, please ',f,".</div>",'<div style="padding:0">If you are ready to purchase a full license, please go to the ',g," or ",f,".</div>"].join(""):['<div style="padding:0">Sorry. Your trial key has expired on ',c,". You can purchase a full license at the ",g,".</div>",'<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="',v,'">this page</a>.</div>','<div style="padding:0">If you need any help, please ',f,".</div>"].join("")),h&&T.DWT.ShowMessage(h,{width:t,caption:"Warning",headerStyle:2})},T.OnLicenseError=function(c,u){T.DWT.ShowMessage(c,{width:t,headerStyle:2})},T.OnSSLCertInfo=function(c){},T._show_online_download_dialog=function(c,u,h){var m,I,y,g=T.DWT.JSVersion.split(","),v=g[0]+"."+g[1],p=location.pathname;p=p.substring(0,p.lastIndexOf("/")+1),h==T.DWT.EnumDWT_PlatformType.enumLinux&&(s||o)&&(s?c.default=getDebPath("arm64"):o&&(c.default=getDebPath("mips64el"))),m=["https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001","&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",v,".",y=c.default.substr(c.default.length-3)].join(""),I=T.Lib.Path.normalize([p,c.default].join("")),h==T.DWT.EnumDWT_PlatformType.enumWindow&&0==I.indexOf("/")&&(I=I.substr(1)),T.DWT.ShowMessage(['<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',"<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",y," on this machine.</div>","<div>You can download the file via this trust site:</div>",'<div><a id="dwt-btn-install" target="_blank" href="',m,'"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>','<div style="word-break: break-word;">Or, go to <br />',I," if the file exists.</div>","<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>","</div>"].join(""),{width:r,headerStyle:1,closeButton:!1})}}(),T.DWT.AutoLoad=!1,T.DWT.IfAddMD5InUploadHeader=!1,T.DWT.IfConfineMaskWithinTheViewer=!1;const Ho=T;function id(e,r){return new Vr(t=>{const i=e.length;if(0===i)return void t.complete();const n=new Array(i);let a=0,s=0;for(let o=0;o<i;o++){const l=Cn(e[o]);let d=!1;t.add(l.subscribe({next:c=>{d||(d=!0,s++),n[o]=c},error:c=>t.error(c),complete:()=>{a++,(a===i||!d)&&(s===i&&t.next(r?r.reduce((c,u,h)=>(c[u]=n[h],c),{}):n),t.complete())}}))}})}let kE=(()=>{class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(Tt(ko),Tt(vn))},e.\u0275dir=Jt({type:e}),e})(),Ys=(()=>{class e extends kE{}return e.\u0275fac=function(){let r;return function(i){return(r||(r=Ti(e)))(i||e)}}(),e.\u0275dir=Jt({type:e,features:[kr]}),e})();const wo=new dr("NgValueAccessor"),eU={provide:wo,useExisting:Or(()=>Tm),multi:!0},rU=new dr("CompositionEventMode");let Tm=(()=>{class e extends kE{constructor(t,i,n){super(t,i),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=bo()?bo().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(Tt(ko),Tt(vn),Tt(rU,8))},e.\u0275dir=Jt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&$r("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Ur([eU]),kr]}),e})();const xn=new dr("NgValidators"),gs=new dr("NgAsyncValidators");function KE(e){return null!=e}function JE(e){const r=Zu(e)?Cn(e):e;return Yc(r),r}function XE(e){let r={};return e.forEach(t=>{r=null!=t?Object.assign(Object.assign({},r),t):r}),0===Object.keys(r).length?null:r}function ZE(e,r){return r.map(t=>t(e))}function $E(e){return e.map(r=>function(e){return!e.validate}(r)?r:t=>r.validate(t))}function Sm(e){return null!=e?function(e){if(!e)return null;const r=e.filter(KE);return 0==r.length?null:function(t){return XE(ZE(t,r))}}($E(e)):null}function Am(e){return null!=e?function(e){if(!e)return null;const r=e.filter(KE);return 0==r.length?null:function(t){return function(...e){if(1===e.length){const r=e[0];if(Xl(r))return id(r,null);if(wd(r)&&Object.getPrototypeOf(r)===Object.prototype){const t=Object.keys(r);return id(t.map(i=>r[i]),t)}}if("function"==typeof e[e.length-1]){const r=e.pop();return id(e=1===e.length&&Xl(e[0])?e[0]:e,null).pipe(Pr(t=>r(...t)))}return id(e,null)}(ZE(t,r).map(JE)).pipe(Pr(XE))}}($E(e)):null}function tT(e,r){return null===e?[r]:Array.isArray(e)?[...e,r]:[e,r]}function Dm(e){return e?Array.isArray(e)?e:[e]:[]}function od(e,r){return Array.isArray(e)?e.includes(r):e===r}function iT(e,r){const t=Dm(r);return Dm(e).forEach(n=>{od(t,n)||t.push(n)}),t}function oT(e,r){return Dm(r).filter(t=>!od(e,t))}let sT=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Sm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Am(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,i){return!!this.control&&this.control.hasError(t,i)}getError(t,i){return this.control?this.control.getError(t,i):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Jt({type:e}),e})(),jn=(()=>{class e extends sT{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let r;return function(i){return(r||(r=Ti(e)))(i||e)}}(),e.\u0275dir=Jt({type:e,features:[kr]}),e})();class _s extends sT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let uT=(()=>{class e extends class{constructor(r){this._cd=r}is(r){var t,i,n;return"submitted"===r?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(n=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===n?void 0:n[r])}}{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Tt(_s,2))},e.\u0275dir=Jt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Kc("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[kr]}),e})();function Vl(e,r){(function(e,r){const t=function(e){return e._rawValidators}(e);null!==r.validator?e.setValidators(tT(t,r.validator)):"function"==typeof t&&e.setValidators([t]);const i=function(e){return e._rawAsyncValidators}(e);null!==r.asyncValidator?e.setAsyncValidators(tT(i,r.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const n=()=>e.updateValueAndValidity();ld(r._rawValidators,n),ld(r._rawAsyncValidators,n)})(e,r),r.valueAccessor.writeValue(e.value),function(e,r){r.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&lT(e,r)})}(e,r),function(e,r){const t=(i,n)=>{r.valueAccessor.writeValue(i),n&&r.viewToModelUpdate(i)};e.registerOnChange(t),r._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,r),function(e,r){r.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&lT(e,r),"submit"!==e.updateOn&&e.markAsTouched()})}(e,r),function(e,r){if(r.valueAccessor.setDisabledState){const t=i=>{r.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),r._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,r)}function ld(e,r){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(r)})}function lT(e,r){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),r.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fd(e,r){const t=e.indexOf(r);t>-1&&e.splice(t,1)}const Wl="VALID",dd="INVALID",uu="PENDING",Ul="DISABLED";function Fm(e){return(Nm(e)?e.validators:e)||null}function dT(e){return Array.isArray(e)?Sm(e):e||null}function Lm(e,r){return(Nm(r)?r.asyncValidators:e)||null}function hT(e){return Array.isArray(e)?Am(e):e||null}function Nm(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class km{constructor(r,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=r,this._rawAsyncValidators=t,this._composedValidatorFn=dT(this._rawValidators),this._composedAsyncValidatorFn=hT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(r){this._rawValidators=this._composedValidatorFn=r}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(r){this._rawAsyncValidators=this._composedAsyncValidatorFn=r}get parent(){return this._parent}get valid(){return this.status===Wl}get invalid(){return this.status===dd}get pending(){return this.status==uu}get disabled(){return this.status===Ul}get enabled(){return this.status!==Ul}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(r){this._rawValidators=r,this._composedValidatorFn=dT(r)}setAsyncValidators(r){this._rawAsyncValidators=r,this._composedAsyncValidatorFn=hT(r)}addValidators(r){this.setValidators(iT(r,this._rawValidators))}addAsyncValidators(r){this.setAsyncValidators(iT(r,this._rawAsyncValidators))}removeValidators(r){this.setValidators(oT(r,this._rawValidators))}removeAsyncValidators(r){this.setAsyncValidators(oT(r,this._rawAsyncValidators))}hasValidator(r){return od(this._rawValidators,r)}hasAsyncValidator(r){return od(this._rawAsyncValidators,r)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(r={}){this.touched=!0,this._parent&&!r.onlySelf&&this._parent.markAsTouched(r)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(r=>r.markAllAsTouched())}markAsUntouched(r={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}markAsDirty(r={}){this.pristine=!1,this._parent&&!r.onlySelf&&this._parent.markAsDirty(r)}markAsPristine(r={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}markAsPending(r={}){this.status=uu,!1!==r.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!r.onlySelf&&this._parent.markAsPending(r)}disable(r={}){const t=this._parentMarkedDirty(r.onlySelf);this.status=Ul,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this._updateValue(),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(r={}){const t=this._parentMarkedDirty(r.onlySelf);this.status=Wl,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(r){this._parent&&!r.onlySelf&&(this._parent.updateValueAndValidity(r),r.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(r){this._parent=r}updateValueAndValidity(r={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wl||this.status===uu)&&this._runAsyncValidator(r.emitEvent)),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.updateValueAndValidity(r)}_updateTreeValidity(r={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(r)),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ul:Wl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(r){if(this.asyncValidator){this.status=uu,this._hasOwnPendingAsyncValidator=!0;const t=JE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:r})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(r,t={}){this.errors=r,this._updateControlsErrors(!1!==t.emitEvent)}get(r){return function(e,r,t){if(null==r||(Array.isArray(r)||(r=r.split(".")),Array.isArray(r)&&0===r.length))return null;let i=e;return r.forEach(n=>{i=i instanceof Bm?i.controls.hasOwnProperty(n)?i.controls[n]:null:i instanceof _U&&i.at(n)||null}),i}(this,r)}getError(r,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[r]:null}hasError(r,t){return!!this.getError(r,t)}get root(){let r=this;for(;r._parent;)r=r._parent;return r}_updateControlsErrors(r){this.status=this._calculateStatus(),r&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(r)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?Ul:this.errors?dd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uu)?uu:this._anyControlsHaveStatus(dd)?dd:Wl}_anyControlsHaveStatus(r){return this._anyControls(t=>t.status===r)}_anyControlsDirty(){return this._anyControls(r=>r.dirty)}_anyControlsTouched(){return this._anyControls(r=>r.touched)}_updatePristine(r={}){this.pristine=!this._anyControlsDirty(),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}_updateTouched(r={}){this.touched=this._anyControlsTouched(),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}_isBoxedValue(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}_registerOnCollectionChange(r){this._onCollectionChange=r}_setUpdateStrategy(r){Nm(r)&&null!=r.updateOn&&(this._updateOn=r.updateOn)}_parentMarkedDirty(r){return!r&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class hd extends km{constructor(r=null,t,i){super(Fm(t),Lm(i,t)),this._onChange=[],this._applyFormState(r),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(r,t={}){this.value=this._pendingValue=r,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(r,t={}){this.setValue(r,t)}reset(r=null,t={}){this._applyFormState(r),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(r){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(r){this._onChange.push(r)}_unregisterOnChange(r){fd(this._onChange,r)}registerOnDisabledChange(r){this._onDisabledChange.push(r)}_unregisterOnDisabledChange(r){fd(this._onDisabledChange,r)}_forEachChild(r){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(r){this._isBoxedValue(r)?(this.value=this._pendingValue=r.value,r.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=r}}class Bm extends km{constructor(r,t,i){super(Fm(t),Lm(i,t)),this.controls=r,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(r,t){return this.controls[r]?this.controls[r]:(this.controls[r]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(r,t,i={}){this.registerControl(r,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(r,t={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(r,t,i={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],t&&this.registerControl(r,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(r){return this.controls.hasOwnProperty(r)&&this.controls[r].enabled}setValue(r,t={}){this._checkAllValuesPresent(r),Object.keys(r).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(r[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(r,t={}){null!=r&&(Object.keys(r).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(r[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(r={},t={}){this._forEachChild((i,n)=>{i.reset(r[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(r,t,i)=>(r[i]=t instanceof hd?t.value:t.getRawValue(),r))}_syncPendingControls(){let r=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_throwIfControlMissing(r){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[r])throw new Error(`Cannot find form control with name: ${r}.`)}_forEachChild(r){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&r(i,t)})}_setUpControls(){this._forEachChild(r=>{r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(r){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&r(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(r,t,i)=>((t.enabled||this.disabled)&&(r[i]=t.value),r))}_reduceChildren(r,t){let i=r;return this._forEachChild((n,a)=>{i=t(i,n,a)}),i}_allControlsDisabled(){for(const r of Object.keys(this.controls))if(this.controls[r].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(r){this._forEachChild((t,i)=>{if(void 0===r[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class _U extends km{constructor(r,t,i){super(Fm(t),Lm(i,t)),this.controls=r,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(r){return this.controls[r]}push(r,t={}){this.controls.push(r),this._registerControl(r),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(r,t,i={}){this.controls.splice(r,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(r,t={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(r,t,i={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(r,t={}){this._checkAllValuesPresent(r),r.forEach((i,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(r,t={}){null!=r&&(r.forEach((i,n)=>{this.at(n)&&this.at(n).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(r=[],t={}){this._forEachChild((i,n)=>{i.reset(r[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(r=>r instanceof hd?r.value:r.getRawValue())}clear(r={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:r.emitEvent}))}_syncPendingControls(){let r=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_throwIfControlMissing(r){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(r))throw new Error(`Cannot find form control at index ${r}`)}_forEachChild(r){this.controls.forEach((t,i)=>{r(t,i)})}_updateValue(){this.value=this.controls.filter(r=>r.enabled||this.disabled).map(r=>r.value)}_anyControls(r){return this.controls.some(t=>t.enabled&&r(t))}_setUpControls(){this._forEachChild(r=>this._registerControl(r))}_checkAllValuesPresent(r){this._forEachChild((t,i)=>{if(void 0===r[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const r of this.controls)if(r.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(r){r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)}}const bU={provide:_s,useExisting:Or(()=>Wm)},mT=(()=>Promise.resolve(null))();let Wm=(()=>{class e extends _s{constructor(t,i,n,a){super(),this.control=new hd,this._registered=!1,this.update=new pn,this._parent=t,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=function(e,r){if(!r)return null;let t,i,n;return Array.isArray(r),r.forEach(a=>{a.constructor===Tm?t=a:function(e){return Object.getPrototypeOf(e.constructor)===Ys}(a)?i=a:n=a}),n||i||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(e,r){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(r,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(e,r){return[...r.path,e]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const i=t.isDisabled.currentValue,n=""===i||i&&"false"!==i;mT.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Tt(jn,9),Tt(xn,10),Tt(gs,10),Tt(wo,10))},e.\u0275dir=Jt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ur([bU]),kr,An]}),e})(),vT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({}),e})();const RU={provide:wo,useExisting:Or(()=>pd),multi:!0};function ET(e,r){return null==e?`${r}`:(r&&"object"==typeof r&&(r="Object"),`${e}: ${r}`.slice(0,50))}let pd=(()=>{class e extends Ys{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=this._getOptionId(t);null==i&&this.setProperty("selectedIndex",-1);const n=ET(i,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function(e){return e.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return e.\u0275fac=function(){let r;return function(i){return(r||(r=Ti(e)))(i||e)}}(),e.\u0275dir=Jt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&$r("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([RU]),kr]}),e})(),TT=(()=>{class e{constructor(t,i,n){this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ET(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Tt(vn),Tt(ko),Tt(pd,9))},e.\u0275dir=Jt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const OU={provide:wo,useExisting:Or(()=>zm),multi:!0};function ST(e,r){return null==e?`${r}`:("string"==typeof r&&(r=`'${r}'`),r&&"object"==typeof r&&(r="Object"),`${e}: ${r}`.slice(0,50))}let zm=(()=>{class e extends Ys{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const n=t.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(n.indexOf(s.toString())>-1)}}else i=(n,a)=>{n._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const n=[];if(void 0!==i.selectedOptions){const a=i.selectedOptions;for(let s=0;s<a.length;s++){const o=a.item(s),l=this._getOptionValue(o.value);n.push(l)}}else{const a=i.options;for(let s=0;s<a.length;s++){const o=a.item(s);if(o.selected){const l=this._getOptionValue(o.value);n.push(l)}}}this.value=n,t(n)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function(e){return e.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return e.\u0275fac=function(){let r;return function(i){return(r||(r=Ti(e)))(i||e)}}(),e.\u0275dir=Jt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&$r("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([OU]),kr]}),e})(),AT=(()=>{class e{constructor(t,i,n){this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ST(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ST(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Tt(vn),Tt(ko),Tt(zm,9))},e.\u0275dir=Jt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),kT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({imports:[[vT]]}),e})(),GU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e}),e.\u0275inj=ai({imports:[kT]}),e})(),HU=(()=>{class e{constructor(){this.DWObject=null,this.videoPlaying=!1,this.currentCamera="",this.currentDevice="",this.containerId="dwtcontrolContainer",this.devices=[],this.cameras=[]}ngOnInit(){var t=this;Ho.DWT.CreateDWTObjectEx({WebTwainId:"dwtcontrol"},function(i){t.DWObject=i;const n=document.getElementById("dwtcontrolContainer");t.DWObject.Viewer.bind(n),t.DWObject.Viewer.height=600,t.DWObject.Viewer.width=800;var a=t.DWObject.Viewer.createThumbnailViewer();a.hoverBorder="100px black solid",a.show(),t.DWObject.Viewer.show()},function(i){console.log(i)}),Ho.DWT.UseLocalService=!0,Ho.DWT.RegisterEvent("OnWebTwainReady",()=>{console.log("event fired"),this.Dynamsoft_OnReady()}),Ho.DWT.ProductKey="t0154KQMAAEQbBf/4T2H0zI09dZkFR+iwVy80Ygqb4Z5hd1NDDYwOWAQ0Rf0kjre/W80e6J121tQhlFlfz4khjuW9wORJcOs3EvuGqBgkF3GPZN1cGGbzdaOHwUOcy/hdT+aHfNCIUxgOGO0br0/bVHM+a8h6zqXhgNG+qeZcmHqdY7B33BT7Xv5IDcMBo31z5Hw3GiCaNP0BSE+iwQ==",Ho.DWT.ResourcesPath="assets/dwt-resources",Ho.DWT.Load()}initCameras(){var t=this;return NE(function*(){var i,n;if(!t.DWObject)return;const a=null===(i=t.DWObject)||void 0===i?void 0:i.GetSourceNames(),s=document.getElementById("cameraSelect");if(console.log(s.length),s.options.length>1)for(let o=s.options.length;o>0;o--)s.options.remove(o);for(let o=0;o<a.length;o++)t.devices.push({deviceId:o.toString(),label:a[o]}),s.options.add(new Option(t.devices[o].label,t.devices[o].deviceId));null===(n=t.DWObject)||void 0===n||n.Viewer.setViewMode(-1,-1),t.DWObject.FitWindowType=-1})()}Dynamsoft_OnReady(){this.DWObject=Ho.DWT.GetWebTwain(this.containerId)}acquireImage(){var t=this;return NE(function*(){var i,n;console.log(t.currentDevice),(null===(i=t.DWObject)||void 0===i?void 0:i.SelectSourceByIndex(parseInt(t.currentDevice)))&&(null===(n=t.DWObject)||void 0===n||n.AcquireImage())})()}loadFile(){var t,i,n;this.DWObject.IfShowFileDialog=!0,null===(t=this.DWObject)||void 0===t||t.Addon.PDF.SetResolution(200),null===(i=this.DWObject)||void 0===i||i.Addon.PDF.SetConvertMode(Ho.DWT.EnumDWT_ConvertMode.CM_RENDERALL),null===(n=this.DWObject)||void 0===n||n.LoadImageEx("",Ho.DWT.EnumDWT_ImageType.IT_ALL,function(){console.log("Loaded a file successfully!")},function(o,l){console.log(l)})}playVideo(){if(this.DWObject){this.DWObject.Addon.Camera.stop(),this.videoPlaying=!1;let t=this;this.DWObject.Addon.Camera.selectSource(this.currentCamera).then(()=>{var i;null===(i=t.DWObject)||void 0===i||i.Addon.Camera.play().then(()=>{t.videoPlaying=!0})})}}showEditor(){var t,i;null===(t=this.DWObject)||void 0===t||t.Viewer.createImageEditor().show(),null===(i=this.DWObject)||void 0===i||i.RegisterEvent("CloseImageEditorUI",()=>{})}zoomIn(){var t;this.DWObject.Viewer.zoom+=5,console.log(null===(t=this.DWObject)||void 0===t?void 0:t.Viewer.zoom)}zoomOut(){var t;this.DWObject.Viewer.zoom=.27,console.log(null===(t=this.DWObject)||void 0===t?void 0:t.Viewer.zoom)}captureImage(){}testButton(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bu({type:e,selectors:[["app-dwt"]],decls:22,vars:1,consts:[["id","cameraSelect",3,"ngModel","ngModelChange"],["value",""],[3,"click"],["id","dwtcontrolContainer"]],template:function(t,i){1&t&&(pi(0,"p"),Qi(1,"dwt works!"),gi(),pi(2,"select",0),$r("ngModelChange",function(a){return i.currentDevice=a}),pi(3,"option",1),Qi(4,"Choose a camera "),gi(),gi(),pi(5,"button",2),$r("click",function(){return i.initCameras()}),Qi(6,"Init Cameras"),gi(),pi(7,"button",2),$r("click",function(){return i.acquireImage()}),Qi(8,"Acquire Image"),gi(),pi(9,"button",2),$r("click",function(){return i.playVideo()}),Qi(10,"Test Button"),gi(),pi(11,"button",2),$r("click",function(){return i.captureImage()}),Qi(12,"Capture Image"),gi(),pi(13,"button",2),$r("click",function(){return i.loadFile()}),Qi(14,"Open File.."),gi(),pi(15,"button",2),$r("click",function(){return i.showEditor()}),Qi(16,"Show Editor.."),gi(),pi(17,"button",2),$r("click",function(){return i.zoomIn()}),Qi(18,"Zoom In.."),gi(),pi(19,"button",2),$r("click",function(){return i.zoomOut()}),Qi(20,"Zoom out.."),gi(),Xu(21,"div",3)),2&t&&(function(e){cy(mr(),Ct(),kn()+e,fc())}(2),hp("ngModel",i.currentDevice))},directives:[pd,uT,Wm,TT,AT],styles:[".dvs-body[_ngcontent-%COMP%]{border:5px solid black}"]}),e})(),zU=(()=>{class e{constructor(){this.title="dwt-angular"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bu({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){1&t&&(Xu(0,"app-dwt"),Xu(1,"router-outlet"))},directives:[HU,Cm],styles:[""]}),e})(),QU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ni({type:e,bootstrap:[zU]}),e.\u0275inj=ai({providers:[],imports:[[t2,QW,GU]]}),e})();(function(){if(_0)throw new Error("Cannot enable prod mode after platform setup.");m0=!1})(),qB().bootstrapModule(QU).catch(e=>console.error(e))}},gu=>{gu(gu.s=245)}]);